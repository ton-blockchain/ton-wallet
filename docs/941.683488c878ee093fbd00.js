/*! For license information please see 941.683488c878ee093fbd00.js.LICENSE.txt */
(()=>{var t,e,n={1689:(t,e,n)=>{"use strict";n.d(e,{B:()=>s});const s=n(31481).hL1&&!["chrome-extension:","moz-extension:"].includes(self.location.protocol)},2177:(t,e,n)=>{"use strict";n.d(e,{GK:()=>h,Xy:()=>f,in:()=>i});var s=n(1307),r=n(3476),a=n(43800),o=n(48287).Buffer;function i(t){return t?(0,a.R)(t):0n}function c(t,e,n){const r=t.asSlice(),a=r.loadUint(8),o=r.loadUint(8);if(a!==e||o!==n)throw new Error("Invalid dns record value prefix");return function(t){t.loadUint(3);let e=t.loadUintBig(8);e>127n&&(e-=256n);const n=t.loadUintBig(256);if("0:0"==`${e.toString(10)}:${n.toString(16)}`)return;const r=`${e.toString(10)}:${n.toString(16).padStart(64,"0")}`;return s.Address.parse(r)}(r)}function d(t){return c(t,186,147)}function l(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);if(116!==n||115!==s)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}async function u(t,e,n,a,o){const f=8*n.length,h=(new s.Builder).storeBuffer(n).asCell(),p=i(a),{stack:m}=await t.callGetMethod(s.Address.parse(e),"dnsresolve",[{type:"slice",cell:h},{type:"int",value:p}]),w=m.readNumber();let y;try{y=m.readCell()}catch(t){}if(0!==w){if(w%8!=0)throw new Error("domain split not at a component boundary");if(w>f)throw new Error(`invalid response ${w}/${f}`);if(w===f)return a===r.kJ.DnsNextResolver?y?d(y):void 0:a===r.kJ.Wallet?y?function(t){return c(t,159,211)}(y):void 0:a===r.kJ.Site?y?function(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);return 173===n||1===s?function(t){const e=t.asSlice(),n=e.loadUint(8),s=e.loadUint(8);if(173!==n||1!==s)throw new Error("Invalid dns record value prefix");return e.loadBuffer(4).toString("hex")}(t):l(t)}(y):void 0:a===r.kJ.BagId?y?l(y):void 0:y;if(y){const e=d(y);return o?a===r.kJ.DnsNextResolver?e:void 0:u(t,e.toString(),n.slice(w/8),a,!1)}}}function f(t){if(!t||!t.length)throw new Error("empty domain");if("."===t)return"";t=t.toLowerCase();for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let e=0;e<t.length;e++){const n=t.substring(e,e+1);for(let t=127;t<=159;t++)if(n===String.fromCharCode(t))throw new Error("bytes in range 127..159 are not allowed in domain names")}const e=t.split(".");return e.forEach((t=>{if(!t.length)throw new Error("domain name cannot have an empty component")})),`${e.reverse().join("\0")}\0`}function h(t,e,n,s,r){let a=f(n);return a.length<126&&(a=`\0${a}`),u(t,e,o.from(a),s,r)}},2188:(t,e,n)=>{"use strict";n.d(e,{H:()=>u});var s=n(31481),r=n(10309),a=n(1689),o=n(55029),i=n(37836);const c=("development"===s.Guj||"staging"===s.Guj)&&"object"==typeof window&&!a.B,d=(0,i.nF)((t=>window.alert(t)),10*r.Z2);function l(t){t instanceof ErrorEvent&&"ResizeObserver loop limit exceeded"===t.message||(t.preventDefault(),u(t instanceof ErrorEvent?t.error||t.message:t.reason))}function u(t){(0,o.SJ)("handleError",t);const e="string"==typeof t?t:t.message,n="object"==typeof t?t.stack:void 0;e.endsWith("Failed to import rlottie-wasm.js")||c&&d(`${s.FHx}\n\n${e||t}\n${n}`)}self.addEventListener("error",l),self.addEventListener("unhandledrejection",l)},3476:(t,e,n)=>{"use strict";n.d(e,{$G:()=>x,Ad:()=>F,Bm:()=>R,CH:()=>f,CU:()=>U,EV:()=>T,F0:()=>l,FT:()=>S,GV:()=>i,H3:()=>P,IP:()=>M,LV:()=>o,LY:()=>N,PY:()=>A,SQ:()=>I,UA:()=>O,W2:()=>r,Wb:()=>m,Zm:()=>B,b2:()=>K,br:()=>q,e2:()=>k,fI:()=>b,h$:()=>H,kF:()=>C,kJ:()=>j,kc:()=>W,li:()=>D,mv:()=>v,nm:()=>z,nx:()=>p,ov:()=>E,qP:()=>_,qd:()=>c,s1:()=>L,sl:()=>y,tF:()=>u,uS:()=>h,v4:()=>V,v8:()=>g,xA:()=>w,xB:()=>d});var s=n(61995);const r="m/44'/607'/0'",a=1000000000n,o=50000000n,i=18000000n,c=32100000n,d=8000000n,l=3000000n,u=1n,f=20000000n,h=100000000n,p=5000000n,m=1n,w=112,y={stakeNominators:a,unstakeNominators:a,stakeLiquid:a,unstakeLiquid:a,stakeJettonsForward:s.xT.STAKE_JETTONS,stakeJettons:s.xT.STAKE_JETTONS+o,unstakeJettons:s.xT.UNSTAKE_JETTONS,claimJettons:s.xT.JETTON_TRANSFER+s.xT.SIMPLE_UPDATE_REQUEST,changeDns:15000000n,stakeEthena:o+100000000n,stakeEthenaForward:100000000n,unstakeEthena:o+100000000n,unstakeEthenaForward:100000000n,unstakeEthenaLocked:150000000n,unstakeEthenaLockedForward:70000000n},g="d",v="w",A=5,b=9,k=!0,S=1.05,E=["simpleR1","simpleR2","simpleR3","v2R1","v2R2","v3R1","v3R2","v4R2","W5"],I="te6cckEBAQEABgAACE0jhUPUcYAL";let D=function(t){return t[t.MasterChain=-1]="MasterChain",t[t.BaseChain=0]="BaseChain",t}({});const B=D.BaseChain,C=600,T=4,_=1,R=255;let x=function(t){return t[t.Comment=0]="Comment",t[t.Encrypted=560454219]="Encrypted",t[t.OurFee=1294173507]="OurFee",t[t.Bounced=4294967295]="Bounced",t}({}),N=function(t){return t[t.Transfer=260734629]="Transfer",t[t.TransferNotification=1935855772]="TransferNotification",t[t.InternalTransfer=395134233]="InternalTransfer",t[t.Excesses=3576854235]="Excesses",t[t.Burn=1499400124]="Burn",t[t.BurnNotification=2078119902]="BurnNotification",t}({}),P=function(t){return t[t.TransferOwnership=1607220500]="TransferOwnership",t[t.OwnershipAssigned=85167505]="OwnershipAssigned",t[t.Excesses=3576854235]="Excesses",t}({}),F=function(t){return t[t.RequestLoan=3863136613]="RequestLoan",t[t.LoanRepayment=3755778683]="LoanRepayment",t[t.Deposit=1205158801]="Deposit",t[t.Withdraw=832244956]="Withdraw",t[t.Withdrawal=175592284]="Withdrawal",t[t.DeployController=2994658477]="DeployController",t[t.Touch=1271382751]="Touch",t[t.Donate=1940913697]="Donate",t[t.DistributedAsset=3678112445]="DistributedAsset",t[t.Vote=1778069612]="Vote",t}({}),U=function(t){return t[t.UnstakeRequest=1234866786]="UnstakeRequest",t[t.ClaimRewards=2027548937]="ClaimRewards",t}({}),O=function(t){return t[t.AddWhitelist=1918412443]="AddWhitelist",t}({}),M=function(t){return t[t.Withdraw=4096]="Withdraw",t[t.ChangeValidator=4097]="ChangeValidator",t}({}),W=function(t){return t[t.ChangeRecord=1320284409]="ChangeRecord",t}({}),L=function(t){return t[t.Ok=2742684035]="Ok",t}({}),K=function(t){return t[t.TokenBridgePaySwap=8]="TokenBridgePaySwap",t}({}),H=function(t){return t.Wallet="wallet",t.Staking="staking",t}({}),j=function(t){return t.DnsNextResolver="dns_next_resolver",t.Wallet="wallet",t.Site="site",t.BagId="storage",t.Unknown="unknown",t}({});const q=[N.Excesses,L.Ok],z={dns_next_resolver:"19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff",wallet:"e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b",site:"fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe",storage:"49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7"},V={simpleR1:{name:"simpleR1",hash:"3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd",type:H.Wallet},simpleR2:{name:"simpleR2",hash:"672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df",type:H.Wallet},simpleR3:{name:"simpleR3",hash:"d95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52",type:H.Wallet},v2R1:{name:"v2R1",hash:"fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029",type:H.Wallet},v2R2:{name:"v2R2",hash:"b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983",type:H.Wallet},v3R1:{name:"v3R1",hash:"11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6",type:H.Wallet},v3R2:{name:"v3R2",hash:"df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14",type:H.Wallet},v4R1:{name:"v4R1",hash:"1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf",type:H.Wallet},v4R2:{name:"v4R2",hash:"5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1",type:H.Wallet},W5:{name:"W5",hash:"7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5",type:H.Wallet},highloadV2:{name:"highloadV2",hash:"fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e",type:H.Wallet},nominatorPool:{name:"nominatorPool",hash:"26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff",type:H.Staking},multisig:{name:"multisig",hash:"45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2",type:H.Wallet},multisigV2:{name:"multisigV2",hash:"eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97",type:H.Wallet},vesting:{name:"vesting",hash:"69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83",type:H.Wallet},multisigNew:{name:"multisigNew",hash:"7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f",type:H.Wallet},dedustPool:{name:"dedustPool",hash:"f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62",isSwapAllowed:!0},dedustVaultNative:{name:"dedustVaultNative",hash:"64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb",isSwapAllowed:!0},dedustVaultJetton:{name:"dedustVaultJetton",hash:"5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307",isSwapAllowed:!0},stonPtonWallet:{name:"stonPtonWallet",hash:"6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880",isSwapAllowed:!0},stonRouter:{name:"stonRouter",hash:"14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da",isSwapAllowed:!0},stonRouterV2_1:{name:"stonRouterV2_1",hash:"d61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd",isSwapAllowed:!0},stonPoolV2_1:{name:"stonPoolV2_1",hash:"16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c",isSwapAllowed:!0},stonRouterV2_2:{name:"stonRouterV2_2",hash:"094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102",isSwapAllowed:!0},stonRouterV2_2_alt:{name:"stonRouterV2_2_alt",hash:"d41e7563afa05ee008655e190920d3f53de9cab4c2d4e10ee1d0f158e95e52e5",isSwapAllowed:!0},stonPoolV2_2:{name:"stonPoolV2_2",hash:"11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4",isSwapAllowed:!0},stonPtonWalletV2:{name:"stonPtonWalletV2",hash:"2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6",isSwapAllowed:!0}}},9705:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});class s{constructor(){this.promise=new Promise(((t,e)=>{this.reject=e,this.resolve=t}))}static resolved(t){const e=new s;return e.resolve(t),e}}},10309:(t,e,n)=>{"use strict";n.d(e,{UX:()=>a,Z2:()=>r});var s=n(19314);const r=1e3,a=365*(60*r*60*24);(0,s.A)((function(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"short",r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return new Date(e).toLocaleString(t,{year:n?void 0:"numeric",month:s||void 0,day:r?void 0:"numeric",hour:a?"numeric":void 0,minute:a?"numeric":void 0,hourCycle:"h23"})}))},10428:(t,e,n)=>{"use strict";n.d(e,{D:()=>s});let s=function(t){return t[t.Default=0]="Default",t[t.Instant=1]="Instant",t[t.BestRate=2]="BestRate",t}({})},12332:(t,e,n)=>{"use strict";var s={};n.r(s),n.d(s,{Workchain:()=>Nt.li,buildWallet:()=>Zr,checkApiAvailability:()=>Ei,checkDnsChangeWalletDraft:()=>Jo,checkDnsRenewalDraft:()=>zo,checkMultiTransactionDraft:()=>ko,checkNftOwnership:()=>Uo,checkNftTransferDraft:()=>Mo,checkStakeDraft:()=>ui,checkTransactionDraft:()=>po,checkUnstakeDraft:()=>fi,decryptComment:()=>To,fetchActivityDetails:()=>Ja,fetchActivitySlice:()=>Va,fetchEstimateDiesel:()=>_o,fetchPrivateKey:()=>fa,fetchToken:()=>so,generateMnemonic:()=>da,getAccountBalance:()=>ta,getAccountNewestActionId:()=>bo,getAccountNfts:()=>Fo,getBackendStakingState:()=>vi,getContractInfo:()=>Yr,getNftUpdates:()=>Oo,getOtherVersionWallet:()=>Aa,getStakingStates:()=>wi,getTonWallet:()=>ca,getToncoinAmountForTransfer:()=>ao,getWalletBalance:()=>ea,getWalletFromAddress:()=>ba,getWalletFromBip39Mnemonic:()=>ma,getWalletFromMnemonic:()=>wa,getWalletFromPrivateKey:()=>ya,getWalletInfo:()=>Xr,getWalletSeqno:()=>na,getWalletStateInit:()=>oa,getWalletVersionInfos:()=>ra,getWalletVersions:()=>aa,insertMintlessPayload:()=>Xa,isActiveSmartContract:()=>Gr,isAddressInitialized:()=>$r,normalizeAddress:()=>Vr,oneCellFromBoc:()=>zt,packPayloadToBoc:()=>Si,parsePayloadBase64:()=>As,pickBestWallet:()=>sa,pickWalletByAddress:()=>ia,publicKeyToAddress:()=>Qr,rawSign:()=>pa,resolveTokenAddress:()=>Ht,resolveTokenWalletAddress:()=>Kt,sendSignedMessage:()=>Bo,sendSignedMessages:()=>Co,setupActivePolling:()=>tc,setupInactivePolling:()=>sc,submitDnsChangeWallet:()=>$o,submitDnsRenewal:()=>Vo,submitMultiTransfer:()=>So,submitNftTransfers:()=>Wo,submitStake:()=>hi,submitTokenStakingClaim:()=>Ai,submitTransfer:()=>wo,submitTransferWithDiesel:()=>yo,submitUnstake:()=>pi,submitUnstakeEthenaLocked:()=>bi,validateDexSwapTransfers:()=>Bi,validateMnemonic:()=>la});var r={};n.r(r),n.d(r,{checkApiAvailability:()=>Dc,checkTransactionDraft:()=>Sc,getAllTransactionSlice:()=>uc,getTokenTransactionSlice:()=>lc,getWalletBalance:()=>hc,getWalletFromBip39Mnemonic:()=>Ic,setupActivePolling:()=>wc,setupInactivePolling:()=>gc,submitTransfer:()=>Ec});var a={};n.r(a),n.d(a,{connect:()=>ju,disconnect:()=>zu,fetchDappMetadata:()=>Xu,initTonConnect:()=>Hu,reconnect:()=>qu,sendTransaction:()=>Vu,signData:()=>$u});var o={};n.r(o),n.d(o,{activateAccount:()=>el,buildTokenSlug:()=>ts,cancelDappRequest:()=>Vl,cancelPendingTransfer:()=>Zc,changePassword:()=>_l,checkApiAvailability:()=>pd,checkDnsChangeWalletDraft:()=>cu,checkDnsRenewalDraft:()=>ou,checkNftOwnership:()=>ru,checkNftTransferDraft:()=>nu,checkStakeDraft:()=>ad,checkTransactionDraft:()=>Jc,checkUnstakeDraft:()=>od,checkWorkerStorageIntegrity:()=>Hl,confirmDappRequest:()=>ql,confirmDappRequestConnect:()=>zl,createAccountWithSecondNetwork:()=>Sl,createLocalActivitiesFromEmulation:()=>nd,createLocalTransactions:()=>Yc,createWallet:()=>Al,deactivateAllAccounts:()=>nl,decryptComment:()=>Xc,deleteAllDapps:()=>dl,deleteDapp:()=>cl,fetchAccountConfigForDebugPurposesOnly:()=>wd,fetchActivitySlice:()=>zc,fetchAddress:()=>$l,fetchAllActivitySlice:()=>Vc,fetchEstimateDiesel:()=>td,fetchLedgerAccount:()=>rl,fetchMnemonic:()=>Ll,fetchNfts:()=>eu,fetchPriceHistory:()=>hf,fetchPrivateKey:()=>Wl,fetchSwaps:()=>Dd,fetchToken:()=>Oc,fetchTonActivityDetails:()=>ed,fetchTonWallet:()=>sl,generateMnemonic:()=>vl,getAddressInfo:()=>Yl,getAmountForTokenTransfer:()=>Lc,getBackendAuthToken:()=>md,getBaseCurrency:()=>_c,getContractInfo:()=>Zl,getDapps:()=>ll,getDappsByUrl:()=>ul,getLogs:()=>N.ao,getMnemonicWordList:()=>Kl,getMoonpayOnrampUrl:()=>vd,getStakingHistory:()=>dd,getTokenBySlug:()=>Zn,getWalletBalance:()=>Ql,getWalletInfo:()=>Xl,getWalletSeqno:()=>Jl,importLedgerWallet:()=>El,importMnemonic:()=>kl,importNewWalletVersion:()=>xl,importViewAccount:()=>Rl,initAccounts:()=>tl,initDapps:()=>al,initPolling:()=>Vd,initStaking:()=>rd,initSwap:()=>kd,initTransactions:()=>qc,isWalletInitialized:()=>Gl,loadExploreSites:()=>wl,ping:()=>yd,removeAccount:()=>Tl,removeNetworkAccounts:()=>Bl,resetAccounts:()=>Cl,resolveDataPreloadPromise:()=>Pc,resolveTokenAddress:()=>Wc,resolveTokenWalletAddress:()=>Mc,sendSignedTransferMessage:()=>Qc,setBaseCurrency:()=>Rc,setIsAppFocused:()=>wr,startSseConnection:()=>lf,submitDnsChangeWallet:()=>du,submitDnsRenewal:()=>iu,submitNftTransfers:()=>su,submitStake:()=>id,submitStakingClaimOrUnlock:()=>ud,submitTransfer:()=>$c,submitUnstake:()=>cd,subscribeNotifications:()=>pf,swapBuild:()=>Cd,swapBuildTransfer:()=>Sd,swapCexCreateTransaction:()=>Pd,swapCexEstimate:()=>xd,swapCexSubmit:()=>Fd,swapCexValidateAddress:()=>Nd,swapEstimate:()=>Bd,swapGetAssets:()=>Td,swapGetPairs:()=>Rd,swapGetTonCurrencies:()=>_d,swapSubmit:()=>Ed,tryUpdateStakingCommonData:()=>ld,tryUpdateSwapTokens:()=>$d,tryUpdateTokens:()=>Jd,unsubscribeNotifications:()=>mf,updateAccountMemoryCache:()=>gd,validateMnemonic:()=>bl,verifyPassword:()=>jl,waitAndCreateTonPendingTransfer:()=>Gc,waitDataPreload:()=>Fc});var i=n(31481),c=1e6,d="[big.js] ",l=d+"Invalid ",u=l+"decimal places",f=l+"rounding mode",h=d+"Division by zero",p={},m=void 0,w=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function y(t,e,n,s){var r=t.c;if(n===m&&(n=t.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(f);if(e<1)s=3===n&&(s||!!r[0])||0===e&&(1===n&&r[0]>=5||2===n&&(r[0]>5||5===r[0]&&(s||r[1]!==m))),r.length=1,s?(t.e=t.e-e+1,r[0]=1):r[0]=t.e=0;else if(e<r.length){if(s=1===n&&r[e]>=5||2===n&&(r[e]>5||5===r[e]&&(s||r[e+1]!==m||1&r[e-1]))||3===n&&(s||!!r[0]),r.length=e,s)for(;++r[--e]>9;)if(r[e]=0,0===e){++t.e,r.unshift(1);break}for(e=r.length;!r[--e];)r.pop()}return t}function g(t,e,n){var s=t.e,r=t.c.join(""),a=r.length;if(e)r=r.charAt(0)+(a>1?"."+r.slice(1):"")+(s<0?"e":"e+")+s;else if(s<0){for(;++s;)r="0"+r;r="0."+r}else if(s>0)if(++s>a)for(s-=a;s--;)r+="0";else s<a&&(r=r.slice(0,s)+"."+r.slice(s));else a>1&&(r=r.charAt(0)+"."+r.slice(1));return t.s<0&&n?"-"+r:r}p.abs=function(){var t=new this.constructor(this);return t.s=1,t},p.cmp=function(t){var e,n=this,s=n.c,r=(t=new n.constructor(t)).c,a=n.s,o=t.s,i=n.e,c=t.e;if(!s[0]||!r[0])return s[0]?a:r[0]?-o:0;if(a!=o)return a;if(e=a<0,i!=c)return i>c^e?1:-1;for(o=(i=s.length)<(c=r.length)?i:c,a=-1;++a<o;)if(s[a]!=r[a])return s[a]>r[a]^e?1:-1;return i==c?0:i>c^e?1:-1},p.div=function(t){var e=this,n=e.constructor,s=e.c,r=(t=new n(t)).c,a=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>c)throw Error(u);if(!r[0])throw Error(h);if(!s[0])return t.s=a,t.c=[t.e=0],t;var i,d,l,f,p,w=r.slice(),g=i=r.length,v=s.length,A=s.slice(0,i),b=A.length,k=t,S=k.c=[],E=0,I=o+(k.e=e.e-t.e)+1;for(k.s=a,a=I<0?0:I,w.unshift(0);b++<i;)A.push(0);do{for(l=0;l<10;l++){if(i!=(b=A.length))f=i>b?1:-1;else for(p=-1,f=0;++p<i;)if(r[p]!=A[p]){f=r[p]>A[p]?1:-1;break}if(!(f<0))break;for(d=b==i?r:w;b;){if(A[--b]<d[b]){for(p=b;p&&!A[--p];)A[p]=9;--A[p],A[b]+=10}A[b]-=d[b]}for(;!A[0];)A.shift()}S[E++]=f?l:++l,A[0]&&f?A[b]=s[g]||0:A=[s[g]]}while((g++<v||A[0]!==m)&&a--);return S[0]||1==E||(S.shift(),k.e--,I--),E>I&&y(k,I,n.RM,A[0]!==m),k},p.eq=function(t){return 0===this.cmp(t)},p.gt=function(t){return this.cmp(t)>0},p.gte=function(t){return this.cmp(t)>-1},p.lt=function(t){return this.cmp(t)<0},p.lte=function(t){return this.cmp(t)<1},p.minus=p.sub=function(t){var e,n,s,r,a=this,o=a.constructor,i=a.s,c=(t=new o(t)).s;if(i!=c)return t.s=-c,a.plus(t);var d=a.c.slice(),l=a.e,u=t.c,f=t.e;if(!d[0]||!u[0])return u[0]?t.s=-c:d[0]?t=new o(a):t.s=1,t;if(i=l-f){for((r=i<0)?(i=-i,s=d):(f=l,s=u),s.reverse(),c=i;c--;)s.push(0);s.reverse()}else for(n=((r=d.length<u.length)?d:u).length,i=c=0;c<n;c++)if(d[c]!=u[c]){r=d[c]<u[c];break}if(r&&(s=d,d=u,u=s,t.s=-t.s),(c=(n=u.length)-(e=d.length))>0)for(;c--;)d[e++]=0;for(c=e;n>i;){if(d[--n]<u[n]){for(e=n;e&&!d[--e];)d[e]=9;--d[e],d[n]+=10}d[n]-=u[n]}for(;0===d[--c];)d.pop();for(;0===d[0];)d.shift(),--f;return d[0]||(t.s=1,d=[f=0]),t.c=d,t.e=f,t},p.mod=function(t){var e,n=this,s=n.constructor,r=n.s,a=(t=new s(t)).s;if(!t.c[0])throw Error(h);return n.s=t.s=1,e=1==t.cmp(n),n.s=r,t.s=a,e?new s(n):(r=s.DP,a=s.RM,s.DP=s.RM=0,n=n.div(t),s.DP=r,s.RM=a,this.minus(n.times(t)))},p.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t},p.plus=p.add=function(t){var e,n,s,r=this,a=r.constructor;if(t=new a(t),r.s!=t.s)return t.s=-t.s,r.minus(t);var o=r.e,i=r.c,c=t.e,d=t.c;if(!i[0]||!d[0])return d[0]||(i[0]?t=new a(r):t.s=r.s),t;if(i=i.slice(),e=o-c){for(e>0?(c=o,s=d):(e=-e,s=i),s.reverse();e--;)s.push(0);s.reverse()}for(i.length-d.length<0&&(s=d,d=i,i=s),e=d.length,n=0;e;i[e]%=10)n=(i[--e]=i[e]+d[e]+n)/10|0;for(n&&(i.unshift(n),++c),e=i.length;0===i[--e];)i.pop();return t.c=i,t.e=c,t},p.pow=function(t){var e=this,n=new e.constructor("1"),s=n,r=t<0;if(t!==~~t||t<-1e6||t>1e6)throw Error(l+"exponent");for(r&&(t=-t);1&t&&(s=s.times(e)),t>>=1;)e=e.times(e);return r?n.div(s):s},p.prec=function(t,e){if(t!==~~t||t<1||t>c)throw Error(l+"precision");return y(new this.constructor(this),t,e)},p.round=function(t,e){if(t===m)t=0;else if(t!==~~t||t<-c||t>c)throw Error(u);return y(new this.constructor(this),t+this.e+1,e)},p.sqrt=function(){var t,e,n,s=this,r=s.constructor,a=s.s,o=s.e,i=new r("0.5");if(!s.c[0])return new r(s);if(a<0)throw Error(d+"No square root");0===(a=Math.sqrt(s+""))||a===1/0?((e=s.c.join("")).length+o&1||(e+="0"),o=((o+1)/2|0)-(o<0||1&o),t=new r(((a=Math.sqrt(e))==1/0?"5e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+o)):t=new r(a+""),o=t.e+(r.DP+=4);do{n=t,t=i.times(n.plus(s.div(n)))}while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return y(t,(r.DP-=4)+t.e+1,r.RM)},p.times=p.mul=function(t){var e,n=this,s=n.constructor,r=n.c,a=(t=new s(t)).c,o=r.length,i=a.length,c=n.e,d=t.e;if(t.s=n.s==t.s?1:-1,!r[0]||!a[0])return t.c=[t.e=0],t;for(t.e=c+d,o<i&&(e=r,r=a,a=e,d=o,o=i,i=d),e=new Array(d=o+i);d--;)e[d]=0;for(c=i;c--;){for(i=0,d=o+c;d>c;)i=e[d]+a[c]*r[d-c-1]+i,e[d--]=i%10,i=i/10|0;e[d]=i}for(i?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t},p.toExponential=function(t,e){var n=this,s=n.c[0];if(t!==m){if(t!==~~t||t<0||t>c)throw Error(u);for(n=y(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return g(n,!0,!!s)},p.toFixed=function(t,e){var n=this,s=n.c[0];if(t!==m){if(t!==~~t||t<0||t>c)throw Error(u);for(t=t+(n=y(new n.constructor(n),t+n.e+1,e)).e+1;n.c.length<t;)n.c.push(0)}return g(n,!1,!!s)},p[Symbol.for("nodejs.util.inspect.custom")]=p.toJSON=p.toString=function(){var t=this,e=t.constructor;return g(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])},p.toNumber=function(){var t=Number(g(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(t.toString()))throw Error(d+"Imprecise conversion");return t},p.toPrecision=function(t,e){var n=this,s=n.constructor,r=n.c[0];if(t!==m){if(t!==~~t||t<1||t>c)throw Error(l+"precision");for(n=y(new s(n),t,e);n.c.length<t;)n.c.push(0)}return g(n,t<=n.e||n.e<=s.NE||n.e>=s.PE,!!r)},p.valueOf=function(){var t=this,e=t.constructor;if(!0===e.strict)throw Error(d+"valueOf disallowed");return g(t,t.e<=e.NE||t.e>=e.PE,!0)};var v=function t(){function e(n){var s=this;if(!(s instanceof e))return n===m?t():new e(n);if(n instanceof e)s.s=n.s,s.e=n.e,s.c=n.c.slice();else{if("string"!=typeof n){if(!0===e.strict&&"bigint"!=typeof n)throw TypeError(l+"value");n=0===n&&1/n<0?"-0":String(n)}!function(t,e){var n,s,r;if(!w.test(e))throw Error(l+"number");for(t.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(n<0&&(n=s),n+=+e.slice(s+1),e=e.substring(0,s)):n<0&&(n=e.length),r=e.length,s=0;s<r&&"0"==e.charAt(s);)++s;if(s==r)t.c=[t.e=0];else{for(;r>0&&"0"==e.charAt(--r););for(t.e=n-s-1,t.c=[],n=0;s<=r;)t.c[n++]=+e.charAt(s++)}}(s,n)}s.constructor=e}return e.prototype=p,e.DP=20,e.RM=1,e.NE=-7,e.PE=21,e.strict=!1,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}();v.RM=0,v.NE=-1e5,v.PE=1e5;const A=v(10);function b(t,e){return BigInt(v(t).mul(A.pow(e??i.Tu9.decimals)).round().toString())}function k(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S(t,e??i.Tu9.decimals,n).toString()}function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Tu9.decimals,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v(t.toString()).div(A.pow(e)).round(e,n?v.roundHalfUp:void 0)}function E(t){return self.crypto.getRandomValues(new Uint8Array(t))}n(48287).Buffer;const I="bigint:";function D(t,e){return"string"==typeof e&&e.startsWith(I)?BigInt(e.slice(7)):e}function B(t){return-0n===t||t<0n?-t:t}function C(t,e){return t*i.X1K/b(e)}function T(t,e){return t*b(e)/i.X1K}const _="undefined:";function R(t,e){return void 0===e?`${_}marker`:e}function x(t,e){return"string"==typeof e&&e.startsWith(I)?BigInt(e.slice(7)):"string"==typeof e&&e.startsWith(_)?void 0:e}var N=n(55029);const P=new Map;BigInt.prototype.toJSON=function(){return`${I}${this.toString()}`};var F=n(23174);function U(t){const e=t.split("-"),[n,s="mainnet"]=3===e.length?[e[0],e[2]]:e;return{id:Number(n),network:s}}function O(t){return 1===t.length&&t[0].length===i.PcM}(0,n(19314).A)((function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(t)return t.length<=e+n+3?t:`${t.slice(0,e)}···${t.slice(-n)}`}));var M=n(37836),W=n(98629),L=n(90749),K=n(88947),H=n.n(K),j=n(83507),q=n.n(j),z=n(48287).Buffer;const V=/^m(\/[0-9]+')+$/;function J(t){return t.replace("'","")}const $=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2147483648;if(!(t=>!!V.test(t)&&!t.split("/").slice(1).map(J).some(isNaN))(t))throw new Error("Invalid derivation path");const{key:s,chainCode:r}=(t=>{const e=q()("sha512","ed25519 seed").update(z.from(t,"hex")).digest();return{key:e.slice(0,32),chainCode:e.slice(32)}})(e);return t.split("/").slice(1).map(J).map((t=>parseInt(t,10))).reduce(((t,e)=>((t,e)=>{let{key:n,chainCode:s}=t;const r=z.allocUnsafe(4);r.writeUInt32BE(e,0);const a=z.concat([z.alloc(1,0),n,r]),o=q()("sha512",s).update(a).digest();return{key:o.slice(0,32),chainCode:o.slice(32)}})(t,e+n)),{key:s,chainCode:r})};function G(t,e){return t.reduce(((t,n)=>(t[n[e]]=n,t)),{})}function Q(t,e){return e.reduce(((e,n)=>(e[n]=t[n],e)),{})}function Z(t,e){const n=new Set(e.map(String));return Q(t,Object.keys(t).filter((t=>!n.has(t))))}function X(t){return Object.keys(t).reduce(((e,n)=>{const s=n;return void 0!==t[s]&&(e[s]=t[s]),e}),{})}function Y(t){return t.filter(Boolean)}function tt(t,e){const n=[];for(let s=0;s<t.length;s+=e)n.push(t.slice(s,s+e));return n}function et(t,e){const n=[];for(let s=t;s<e;)n.push(s++);return n}function nt(t,e){return t.reduce(((t,n,s)=>(t[n]=Array.isArray(e)?e[s]:e,t)),{})}function st(t,e){return t.map((t=>t[e]))}function rt(t,e){const n=new Set(e),s=[];for(const e of t)n.has(e)||s.push(e);return s}var at=n(1307),ot=n(94471),it=n(90746),ct=n(3273),dt=n(71902),lt=n(99579),ut=n(79145),ft=n(28784),ht=n(7941),pt=n(8387),mt=n(10309);function wt(t){for(const e of i.gs5){const{suffixes:n,baseFormat:s}=e;for(let r=n.length-1;r>=0;r--){const a=n[r];if(!t.endsWith(`.${a}`))continue;const o=t.slice(0,-a.length-1);if(s.test(o))return{base:o,zone:e}}}}var yt=n(69780),gt=n(96773),vt=n(97935),At=n(61995),bt=n(84752),kt=n(86972),St=n(67132),Et=n(48287).Buffer;function It(t){return crypto.subtle.digest("SHA-256",t)}function Dt(t){return Et.from(t).toString("hex")}function Bt(t){return Uint8Array.from(Et.from(t,"hex"))}function Ct(t){return Et.from(t).toString("base64")}function Tt(t){return Uint8Array.from(Et.from(t,"base64"))}let _t;function Rt(t){var e;return _t={...t,isDappSupported:!0,isSseSupported:t.isElectron||i.UMQ&&!t.isNativeBottomSheet,apiHeaders:{"X-App-Origin":t.isElectron?"file://":null===(e=self)||void 0===e?void 0:e.origin},toncenterMainnetKey:t.isElectron?i.xlJ:i.Irq,toncenterTestnetKey:t.isElectron?i.Q$0:i.HGV},_t}function xt(){return _t}var Nt=n(3476);function Pt(){return function(){let t=BigInt(0);for(const e of E(8)){const n=BigInt(e);t=(t<<BigInt(8))+n}return t}()}var Ft=n(77744),Ut=n(48287).Buffer;const Ot=127;let Mt;const Wt={simpleR1:ot.m,simpleR2:it.t,simpleR3:ct.A,v2R1:dt.H,v2R2:lt.a,v3R1:ut.G,v3R2:ft.N,v4R2:ht.U,W5:pt.WalletContractV5R1};function Lt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet";if(!Mt){const{apiHeaders:t,toncenterMainnetKey:e,toncenterTestnetKey:n}=xt();Mt={mainnet:new Ft.x({endpoint:`${i._J8}/api/v2/jsonRPC`,timeout:i.cSq,apiKey:e,headers:t}),testnet:new Ft.x({endpoint:`${i.pyR}/api/v2/jsonRPC`,timeout:i.cSq,apiKey:n,headers:t})}}return Mt[t]}const Kt=(0,yt.A)((async(t,e,n)=>{const s=Lt(t).open(new vt.Sr(at.Address.parse(n)));return Vt(await s.getWalletAddress(at.Address.parse(e)),!0,t)})),Ht=(0,yt.A)((async(t,e)=>{const n=Lt(t).open(new St.K(at.Address.parse(e)));return Vt((await n.getWalletData()).minter,!0,t)})),jt=(0,yt.A)((async(t,e)=>{const n=await Lt(t).runMethodWithError(at.Address.parse(e),"get_public_key");if(0===n.exit_code)return Bt(n.stack.readBigNumber().toString(16).padStart(64,"0"))})),qt=(0,yt.A)((async(t,e,n,s)=>{const r=Lt(t),a=r.open(kt.Ml.createFromAddress(at.Address.parse(e))),o=await a.getWalletAddress(at.Address.parse(s),n);return r.open(bt.sH.createFromAddress(o))}));function zt(t){return at.Cell.fromBoc(Ut.from(t))}function Vt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt.e2,n=arguments.length>2?arguments[2]:void 0;return"string"==typeof t&&(t=at.Address.parse(t)),t.toString({urlSafe:!0,bounceable:e,testOnly:"testnet"===n})}function Jt(t){return"string"==typeof t&&(t=at.Address.parse(t)),t.toRawString()}function $t(t){const{queryId:e,tokenAmount:n,toAddress:s,responseAddress:r,forwardAmount:a,customPayload:o}=t;let i=t.forwardPayload,c=(new at.Builder).storeUint(Nt.LY.Transfer,32).storeUint(e||Pt(),64).storeCoins(n).storeAddress(at.Address.parse(s)).storeAddress(at.Address.parse(r)).storeMaybeRef(o).storeCoins(a??0n);return i instanceof Uint8Array&&(i=Qt(i,Math.round(c.availableBits/8))),i?c="string"==typeof i?c.storeBit(!1).storeUint(0,32).storeBuffer(Ut.from(i)):i instanceof Uint8Array?c.storeBit(!1).storeBuffer(Ut.from(i)):c.storeBit(!0).storeRef(i):c.storeBit(!1),c.endCell()}function Gt(t){const e=Ut.from(t),n=new Uint8Array(e.length+4),s=Ut.alloc(4);return s.writeUInt32BE(Nt.$G.Comment),n.set(s,0),n.set(e,4),n}function Qt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot;return Ut.from(t).length<=e?t:Zt(t)}function Zt(t){const e=Ot;let n;for(let s=Math.ceil(t.length/e)-1;s>=0;s--){const r=s*e,a=Math.min(e,t.length-r),o=Ut.from(t.buffer,t.byteOffset+r,a),i=(new at.Builder).storeBuffer(o);n&&i.storeRef(n),n=i.endCell()}return n??at.Cell.EMPTY}function Xt(t){if(t.length>39+16*Ot)throw new Error("Input text is too long");return(new at.Builder).storeBuffer(Ut.from(t.subarray(0,39))).storeRef(Zt(t.subarray(39))).endCell()}function Yt(t){return(new at.Builder).storeUint(Nt.Ad.Deposit,32).storeUint(t||0,64).asCell()}function te(t){try{if(at.Address.isRaw(t))return{address:at.Address.parseRaw(t),isRaw:!0,isValid:!0};if(at.Address.isFriendly(t))return{...at.Address.parseFriendly(t),isUserFriendly:!0,isValid:!0}}catch(t){}return{isValid:!1}}function ee(t){return Boolean(te(t).isRaw)}function ne(t,e,n){return(0,at.beginCell)().storeUint(At.Hx.UNSTAKE_JETTONS,32).storeUint(n??0,64).storeCoins(t).storeBit(e??!1).endCell()}function se(t,e){const n=at.Dictionary.empty(at.Dictionary.Keys.Address(),at.Dictionary.Values.Bool());for(const e of t)n.set(at.Address.parse(e),!0);return(0,at.beginCell)().storeUint(At.Hx.CLAIM_REWARDS,32).storeUint(e??0,64).storeDict(n,at.Dictionary.Keys.Address(),at.Dictionary.Values.Bool()).endCell()}function re(t){return ae(t)?(e=t,n=t=>t instanceof at.Dictionary?re(nt(t.keys(),t.values())):ae(t)?re(t):t,Object.keys(e).reduce(((t,s,r)=>(t[s]=n(e[s]),t)),{})):t;var e,n}function ae(t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===Object.prototype}let oe,ie=function(t){return t[t.IndexedDb=0]="IndexedDb",t[t.LocalStorage=1]="LocalStorage",t[t.ExtensionLocal=2]="ExtensionLocal",t[t.CapacitorStorage=3]="CapacitorStorage",t}({});function ce(){return Date.now().toString(36)+Math.random().toString(36).slice(2)}class de{requestStates=new Map;requestStatesByCallback=new Map;constructor(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"*";this.target=t,this.onUpdate=e,this.channel=n,this.shouldUseJson=s,this.targetOrigin=r}destroy(){}init(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.postMessage({type:"init",args:e})}request(t){const{requestStates:e,requestStatesByCallback:n}=this,s=ce(),r={type:"callMethod",messageId:s,...t},a={messageId:s},o=new Promise(((t,e)=>{Object.assign(a,{resolve:t,reject:e})}));if("function"==typeof r.args[r.args.length-1]){r.withCallback=!0;const t=r.args.pop();a.callback=t,n.set(t,a)}return e.set(s,a),o.catch((()=>{})).finally((()=>{e.delete(s),a.callback&&n.delete(a.callback)})),this.postMessage(r),o}cancelCallback(t){t.isCanceled=!0;const{messageId:e}=this.requestStatesByCallback.get(t)||{};e&&this.postMessage({type:"cancelProgress",messageId:e})}onMessage(t){try{t=function(t){return"string"==typeof t?JSON.parse(t,x):t}(t)}catch(t){return void(0,N.SJ)("PostMessageConnector: Failed to parse message",t)}const{requestStates:e,channel:n}=this;if(t.channel===n)if("update"===t.type&&this.onUpdate&&this.onUpdate(t.update),"methodResponse"===t.type){const n=e.get(t.messageId);n&&(t.error?n.reject(t.error):n.resolve(t.response))}else if("methodCallback"===t.type){var s;const n=e.get(t.messageId);null==n||null===(s=n.callback)||void 0===s||s.call(n,...t.callbackArgs)}else if("unhandledError"===t.type){var r,a;const e=new Error(null===(r=t.error)||void 0===r?void 0:r.message);throw null!==(a=t.error)&&void 0!==a&&a.stack&&(e.stack=t.error.stack),e}}postMessage(t){t.channel=this.channel;let e=t;this.shouldUseJson&&(e=function(t){return JSON.stringify(t,R)}(t)),"open"in this.target?this.target.postMessage(e,this.targetOrigin):this.target.postMessage(e)}}function le(t){if(!oe)throw new Error("API is not initialized");for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];return oe.request({name:t,args:n})}let ue={};const fe={async getItem(t,e){if(xt().isAndroidApp&&t in ue&&!e)return ue[t];const n=await le("capacitorStorageGetItem",t),s=n?JSON.parse(n,D):void 0;return xt().isAndroidApp&&(void 0===s?delete ue[t]:ue[t]=s),s},async setItem(t,e){await le("capacitorStorageSetItem",t,JSON.stringify(e)),xt().isAndroidApp&&(ue[t]=e)},async removeItem(t){await le("capacitorStorageRemoveItem",t),xt().isAndroidApp&&delete ue[t]},async clear(){await le("capacitorStorageClear"),xt().isAndroidApp&&(ue={})},async getKeys(){const t=await le("capacitorStorageKeys");return null==t?void 0:t.value}},he=i.hL1?self.chrome.storage.local:void 0,pe=he&&{getItem:async t=>{var e;return null===(e=await he.get(t))||void 0===e?void 0:e[t]},setItem:(t,e)=>he.set({[t]:e}),removeItem:he.remove.bind(he),clear:he.clear.bind(he),getAll:he.get.bind(he),setMany:he.set.bind(he),getMany:he.get.bind(he)}||{};var me=n(77783);const we=me.y$(i.vPi,i.rQT),ye={getItem:t=>me.Jt(t,we),setItem:(t,e)=>me.hZ(t,e,we),removeItem:t=>me.yH(t,we),clear:()=>me.IU(we),getAll:async()=>{const t=await me.HP(we);return nt(t,await me.qy(t,we))},getMany:async t=>nt(t,await me.qy(t,we)),setMany:t=>me._y(Object.entries(t),we)};function ge(t){return function(){return Promise.resolve(t(...arguments))}}const ve="object"==typeof localStorage?{getItem:ge(localStorage.getItem),setItem:ge(localStorage.setItem),removeItem:ge(localStorage.removeItem),clear:ge(localStorage.clear),getAll:ge((()=>({...localStorage}))),getMany:ge((t=>Q(localStorage,t))),setMany:ge((t=>{Object.assign(localStorage,t)}))}:{getItem:t=>le("localStorageGetItem",t),setItem:(t,e)=>le("localStorageSetItem",t,e),removeItem:t=>le("localStorageRemoveItem",t),clear:()=>le("localStorageClear"),getAll:()=>le("localStorageGetAll"),getMany:t=>le("localStorageGetMany",t),setMany:t=>le("localStorageSetMany",t)},Ae=i.hL1?pe:i.UMQ?fe:ye,be=(ie.IndexedDb,ie.LocalStorage,ie.ExtensionLocal,ie.CapacitorStorage,0);let ke;const Se=new Promise((t=>{ke=t}));async function Ee(t,e){return(await Ce(t))[e].address}async function Ie(t){return(await Te(t)).ton}async function De(t){return(await async function(t){const e=await Ce(t);if(e.tron)return e;throw new Error("TRON wallet missing")}(t)).tron}function Be(t){return xe(t,"accounts")}async function Ce(t){const e=await Be(t);if(e)return e;throw new Error(`Account ${t} doesn't exist`)}async function Te(t){const e=await Ce(t);if(e.ton)return e;throw new Error("TON wallet missing")}function _e(){return Ae.getItem("accounts")}async function Re(t,e){return Pe(t,"accounts",{...await Ce(t),...e})}async function xe(t,e){var n;return null===(n=await Ae.getItem(e))||void 0===n?void 0:n[t]}async function Ne(t,e){const n=await Ae.getItem(e);if(!n)return;const{[t]:s,...r}=n;await Ae.setItem(e,r)}async function Pe(t,e,n){const s=await Ae.getItem(e);await Ae.setItem(e,{...s,[t]:n})}async function Fe(t,e){const n=await Ae.getItem(e);if(n){for(const e of Object.keys(n))U(e).network===t&&delete n[e];await Ae.setItem(e,n)}}async function Ue(){const t=await Oe();if(t)return U(t).network}function Oe(){return Ae.getItem("currentAccountId")}function Me(t){const e={};return"ton"in t&&t.ton&&(e.ton=t.ton.address),"tron"in t&&t.tron&&(e.tron=t.tron.address),e}const We=[{name:"PBKDF2"},!1,["deriveBits","deriveKey"]],Le={name:"PBKDF2",iterations:1e5,hash:"SHA-256"},Ke={name:"AES-GCM",length:256};function He(t){return L.JB(t.join(" "))}async function je(t,e){const n=t.join(","),s=crypto.getRandomValues(new Uint8Array(16)),r=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),...We),a=await crypto.subtle.deriveKey({salt:s,...Le},r,Ke,!1,["encrypt"]),o=crypto.getRandomValues(new Uint8Array(12)),i=(new TextEncoder).encode(n),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:o},a,i),d=Array.from(new Uint8Array(c)),l=btoa(String.fromCharCode(...d)),u=Array.from(o).map((t=>`00${t.toString(16)}`.slice(-2))).join("");return`${Array.from(s).map((t=>`00${t.toString(16)}`.slice(-2))).join("")}:${u}:${l}`}async function qe(t,e){if(!t.includes(":"))return async function(t,e){const n=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",n),r=t.slice(0,24).match(/.{2}/g).map((t=>parseInt(t,16))),a={name:"AES-GCM",iv:new Uint8Array(r)},o=await crypto.subtle.importKey("raw",s,a,!1,["decrypt"]),i=atob(t.slice(24)),c=new Uint8Array(i.match(/[\s\S]/g).map((t=>t.charCodeAt(0)))),d=await crypto.subtle.decrypt(a,o,c);return(new TextDecoder).decode(d).split(",")}(t,e);const[n,s,r]=t.split(":"),a=new Uint8Array(n.match(/.{2}/g).map((t=>parseInt(t,16)))),o=new Uint8Array(s.match(/.{2}/g).map((t=>parseInt(t,16)))),i=await crypto.subtle.importKey("raw",(new TextEncoder).encode(e),...We),c=await crypto.subtle.deriveKey({salt:a,...Le},i,Ke,!1,["decrypt"]),d=atob(r),l=new Uint8Array(d.match(/[\s\S]/g).map((t=>t.charCodeAt(0)))),u=await crypto.subtle.decrypt({name:"AES-GCM",iv:o},c,l);return(new TextDecoder).decode(u).split(",")}async function ze(t,e,n){const s=[e];try{const{mnemonicEncrypted:r}=n;s.push(r);const a=await qe(r,e);return s.push(...a),r.includes(":")||await async function(t,e,n){const s=[n,...e];try{const r=await je(e,n);s.push(r);const a=await qe(r,n).catch((()=>{}));if(!n||!a)return{error:F.QD.DebugError};await Re(t,{mnemonicEncrypted:r})}catch(t){(0,N.SJ)("tryMigratingMnemonicEncryption",Ve(t,s))}}(t,a,e),a}catch(t){return void(0,N.SJ)("getMnemonic",Ve(t,s))}}function Ve(t,e){const n=t=>{for(const n of e)t=t.replaceAll(n,"(hidden)");return t};if("string"==typeof t)return n(t);if(t instanceof Error){var s;const e=n(t.message);return{name:t.name,message:e,stack:null===(s=t.stack)||void 0===s?void 0:s.replaceAll(t.message,e)}}return t}var Je=n(2177);const $e=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,Ge=/[\0-\x08\x0E-\x1F\x7F-\x84\x86-\x9F\u0300-\u034E\u0350-\u035B\u0363-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u200C\u200E\u200F\u202A-\u202E\u2066-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3035\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFFF9-\uFFFB]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDCA-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF51-\uDF7E\uDF8F-\uDF92]|\uD82F[\uDC9D\uDC9E\uDCA0-\uDCA3]|\uD834[\uDD65-\uDD69\uDD6D-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDC01\uDC20-\uDC7F\uDD00-\uDDEF]/g,Qe=/[\n\r]/g,Ze=/[\u0702\u0701\u2024\u00B7\u02D9\u0971\u1427\u18DF\u22C5\u2027]/g,Xe=/[\u200B-\u200D\uFEFF\u2063]/g,Ye=/^(?:[~`!@#%^&*(){}[\];:"'<,.>?/\\|_+=-]|[a-zA-Z0-9\s])+$/,tn=new Map([[" "," "],["0","⓿"],["1","11⓵➊⑴¹𝟏𝟙１𝟷𝟣⒈𝟭1➀₁①❶⥠"],["2","⓶⒉⑵➋ƻ²ᒿ𝟚２𝟮𝟤ᒾ𝟸Ƨ𝟐②ᴤ₂➁❷ᘝƨ"],["3","³ȝჳⳌꞫ𝟑ℨ𝟛𝟯𝟥Ꝫ➌ЗȜ⓷ӠƷ３𝟹⑶⒊ʒʓǯǮƺ𝕴ᶾзᦡ➂③₃ᶚᴣᴟ❸ҘҙӬӡӭӟӞ"],["4","𝟰𝟺𝟦𝟒➍ҶᏎ𝟜ҷ⓸ҸҹӴӵᶣ４чㄩ⁴➃₄④❹Ӌ⑷⒋"],["5","𝟱⓹➎Ƽ𝟓𝟻𝟝𝟧５➄₅⑤⁵❺ƽ⑸⒌"],["6","Ⳓ🄇𝟼Ꮾ𝟲𝟞𝟨𝟔➏⓺Ϭϭ⁶б６ᧈ⑥➅₆❻⑹⒍"],["7","𝟕𝟟𝟩𝟳𝟽🄈⓻𐓒➐７⁷⑦₇❼➆⑺⒎"],["8","𐌚🄉➑⓼８𝟠𝟪৪⁸₈𝟴➇⑧❽𝟾𝟖⑻⒏"],["9","൭Ꝯ𝝑𝞋𝟅🄊𝟡𝟵Ⳋ⓽➒੧৭୨９𝟫𝟿𝟗⁹₉Գ➈⑨❾⑼⒐"],["10","⓾❿➉➓🔟⑩⑽⒑"],["11","⑪⑾⒒⓫"],["12","⑫⑿⒓⓬"],["13","⑬⒀⒔⓭"],["14","⑭⒁⒕⓮"],["15","⑮⒂⒖⓯"],["16","⑯⒃⒗⓰"],["17","⑰⒄⒘⓱"],["18","⑱⒅⒙⓲"],["19","⑲⒆⒚⓳"],["20","⑳⒇⒛⓴"],["ae","æ"],["OE","Œ"],["oe","œ"],["pi","ᒆ"],["Nj","ǋ"],["AE","ᴁ"],["A","𝑨𝔄ᗄ𝖠𝗔ꓯ𝞐🄐🄰Ꭿ𐊠𝕬𝜜𝐴ꓮᎪ𝚨ꭺ𝝖🅐Å∀🇦₳🅰𝒜𝘈𝐀𝔸дǺᗅⒶＡΑᾋᗩĂÃÅǍȀȂĀȺĄʌΛλƛᴀᴬДАልÄₐᕱªǞӒΆẠẢẦẨẬẮẰẲẴẶᾸᾹᾺΆᾼᾈᾉᾊᾌᾍᾎᾏἈἉἊἋἌἍἎἏḀȦǠӐÀÁÂẤẪ𝛢𝓐𝙰𝘼ᗩ"],["a","∂⍺ⓐձǟᵃᶏ⒜аɒａαȃȁคǎმäɑāɐąᾄẚạảǡầẵḁȧӑӓãåάὰάăẩằẳặᾀᾁᾂᾃᾅᾆᾰᾱᾲᾳᾴᶐᾶᾷἀἁἂἃἄἅἆἇᾇậắàáâấẫǻⱥ𝐚𝑎𝒂𝒶𝓪𝔞𝕒𝖆𝖺𝗮𝘢𝙖𝚊𝛂𝛼𝜶𝝰𝞪⍶"],["B","🄑𝔙𝖁ꞵ𝛃𝛽𝜷𝝱𝞫Ᏸ𐌁𝑩𝕭🄱𐊡𝖡𝘽ꓐ𝗕𝘉𝜝𐊂𝚩𝐁𝛣𝝗𝐵𝙱𝔹Ᏼᏼ𝞑Ꞵ𝔅🅑฿𝓑ᗿᗾᗽ🅱ⒷＢвϐᗷƁ乃ßცჩ๖βɮБՅ๒ᙖʙᴮᵇጌḄℬΒВẞḂḆɃദᗹᗸᵝᙞᙟᙝᛒᙗᙘᴃ🇧"],["b","ꮟᏏ𝐛𝘣𝒷𝔟𝓫𝖇𝖻𝑏𝙗𝕓𝒃𝗯𝚋♭ᑳᒈｂᖚᕹᕺⓑḃḅҍъḇƃɓƅᖯƄЬᑲþƂ⒝ЪᶀᑿᒀᒂᒁᑾьƀҌѢѣᔎ"],["C","ꞆႠ℃🄒ᏟⲤ🄲ꓚ𐊢𐌂🅲𐐕🅒☾ČÇⒸＣↃƇᑕㄈ¢८↻ĈϾՇȻᙅᶜ⒞ĆҀĊ©टƆℂℭϹС匚ḈҪʗᑖᑡᑢᑣᑤᑥⅭ𝐂𝐶𝑪𝒞𝓒𝕮𝖢𝗖𝘊𝘾ᔍ"],["c","🝌ｃⅽ𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌ᴄϲⲥсꮯ𐐽ⲥ𐐽ꮯĉｃⓒćčċçҁƈḉȼↄсርᴄϲҫ꒝ςɽϛ𝙲ᑦ᧚𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌₵🇨ᥴᒼⅽ"],["D","🄓Ꭰ🄳𝔡𝖉𝔻𝗗𝘋𝙳𝐷𝓓𝐃𝑫𝕯𝖣𝔇𝘿ꭰⅅ𝒟ꓓ🅳🅓ⒹＤƉᗪƊÐԺᴅᴰↁḊĐÞⅮᗞᑯĎḌḐḒḎᗫᗬᗟᗠᶛᴆ🇩"],["d","Ꮷ𝔡𝖉ᑯꓒ𝓭ᵭ₫ԃⓓｄḋďḍḑḓḏđƌɖɗᵈ⒟ԁⅾᶁԀᑺᑻᑼᑽᒄᑰᑱᶑ𝕕𝖽𝑑𝘥𝒅𝙙𝐝𝗱𝚍ⅆ𝒹ʠժ"],["E","£ᙓ⋿∃ⴺꓱ𝐄𝐸𝔈𝕰𝖤𝘌𝙴𝛦𝜠ꭼ🄔🄴𝙀𝔼𐊆𝚬ꓰ𝝚𝞔𝓔𝑬𝗘🅴🅔ⒺΈＥƎἝᕮƐモЄᴇᴱᵉÉ乇ЁɆꂅ€ÈℰΕЕⴹᎬĒĔĖĘĚÊËԐỀẾỄỂẼḔḖẺȄȆẸỆȨḜḘḚἘἙἚἛἜῈΈӖὲέЀϵ🇪"],["e","əәⅇꬲꞓ⋴𝛆𝛜𝜀𝜖𝜺𝝐𝝴𝞊𝞮𝟄ⲉꮛ𐐩ꞒⲈ⍷𝑒𝓮𝕖𝖊𝘦𝗲𝚎𝙚𝒆𝔢𝖾𝐞Ҿҿⓔｅ⒠èᧉéᶒêɘἔềếễ૯ǝєεēҽɛểẽḕḗĕėëẻěȅȇẹệȩɇₑęḝḙḛ℮еԑѐӗᥱёἐἑἒἓἕℯ"],["F","ᖵꘘꓞꟻᖷ𝐅𝐹𝑭𝔽𝕱𝖥𝗙𝙁𝙵𝟊℉🄕🄵𐊇𝔉𝘍𐊥ꓝꞘ🅵🅕𝓕ⒻＦғҒᖴƑԲϝቻḞℱϜ₣🇫Ⅎ"],["f","𝐟ᵮ𝑓𝒇𝒻𝓯𝔣𝕗𝖿𝗳𝙛𝚏ꬵꞙẝ𝖋ⓕｆƒḟʃբᶠ⒡ſꊰʄ∱ᶂ𝘧"],["G","𝗚𝘎🄖ꓖᏳ🄶Ꮐᏻ𝔾𝓖𝑮𝕲ꮐ𝒢𝙂𝖦𝙶𝔊𝐺𝐆🅶🅖ⒼＧɢƓʛĢᘜᴳǴĠԌĜḠĞǦǤԍ₲🇬⅁"],["g","ᶃᶢⓖｇǵĝḡğġǧģց૭ǥɠﻭﻮᵍ⒢ℊɡᧁ𝐠𝑔𝒈𝓰𝔤𝕘𝖌𝗀𝗴𝘨𝙜𝚐"],["H","Ἤ🄗𝆦🄷𝜢ꓧ𝘏𝐻𝝜𝖧𐋏𝗛ꮋℍᎻℌⲎ𝑯𝞖🅷🅗ዞǶԋⒽＨĤᚺḢḦȞḤḨḪĦⱧҢңҤῊΉῌἨἩἪἫἭἮἯᾘᾙᾚᾛᾜᾝᾞᾟӉӈҥΉн卄♓𝓗ℋН𝐇𝙃𝙷ʜ𝛨Η𝚮ᕼӇᴴᵸ🇭"],["h","ꞕ৸𝕳ꚕᏲℏӊԊꜧᏂҺ⒣ђⓗｈĥḣḧȟḥḩḫẖħⱨհһከኩኪካɦℎ𝐡𝒉𝒽𝓱𝔥𝕙𝖍𝗁𝗵𝘩𝙝𝚑իʰᑋᗁɧんɥ"],["I","ⲒἿ🄘🄸ЇꀤᏆ🅸🅘إﺇٳأﺃٲٵⒾＩ៸ÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗェエῘῙῚΊἸἹἺἻἼἽἾⅠΪΊɪᶦᑊᥣ𝛪𝐈𝙄𝙸𝓵𝙡𝐼ᴵ𝚰𝑰🇮"],["i","⍳ℹⅈ𝑖𝒊𝒾ı𝚤ɩιιͺ𝛊𝜄𝜾𝞲ꙇӏꭵᎥⓘｉìíîĩīĭïḯỉǐȉȋịḭῐῑῒΐῖῗἰἱἲⅰⅼ∣ⵏ￨׀ا١۱ߊᛁἳἴἵɨіὶίᶖ𝔦𝚒𝝸𝗂𝐢𝕚𝖎𝗶𝘪𝙞ίⁱᵢ𝓲⒤"],["J","𝐉𝐽𝑱𝒥𝓙𝔍𝕁𝕵𝖩𝗝𝘑𝙅𝙹ꞲͿꓙ🄙🄹🅹🅙ⒿＪЈʝᒍנﾌĴʆวلյʖᴊᴶﻝጋɈⱼՂๅႱįᎫȷ丿ℐℑᒘᒙᒚᒛᒴᒵᒎᒏ🇯"],["j","𝚥ꭻⅉⓙｊϳʲ⒥ɉĵǰјڶᶨ𝒿𝘫𝗷𝑗𝙟𝔧𝒋𝗃𝓳𝕛𝚓𝖏𝐣"],["K","𝐊ꝄꝀ𝐾𝑲𝓚𝕶𝖪𝙺𝚱𝝟🄚𝗞🄺𝜥𝘒ꓗ𝙆𝕂Ⲕ𝔎𝛫Ꮶ𝞙𝒦🅺🅚₭ⓀＫĸḰќƘкҠκқҟӄʞҚКҡᴋᴷᵏ⒦ᛕЌጕḲΚKҜҝҞĶḴǨⱩϗӃ🇰"],["k","ⓚꝁｋḱǩḳķḵƙⱪᶄ𝐤𝘬𝗄𝕜𝜅𝜘𝜿𝝒𝝹𝞌𝞳𝙠𝚔𝑘𝒌ϰ𝛋𝛞𝟆𝗸𝓴𝓀"],["L","𝐋𝐿𝔏𝕃𝕷𝖫𝗟𝘓𝙇ﴼ🄛🄻𐐛Ⳑ𝑳𝙻𐑃𝓛ⳑꮮᏞꓡ🅻🅛ﺈ└ⓁւＬĿᒪ乚ՆʟꓶιԼᴸˡĹረḶₗΓլĻᄂⅬℒⱢᥧᥨᒻᒶᒷᶫﺎᒺᒹᒸᒫ⎳ㄥŁⱠﺄȽ🇱"],["l","ⓛｌŀĺľḷḹļӀℓḽḻłﾚɭƚɫⱡ|Ɩ⒧ʅǀוןΙІ｜ᶩӏ𝓘𝕀𝖨𝗜𝘐𝐥𝑙𝒍𝓁𝔩𝕝𝖑𝗅𝗹𝘭𝚕𝜤𝝞ı𝚤ɩι𝛊𝜄𝜾𝞲"],["M","ꮇ🄜🄼𐌑𐊰ꓟⲘᎷ🅼🅜ⓂＭмṂ൱ᗰ州ᘻო๓♏ʍᙏᴍᴹᵐ⒨ḾМṀ௱ⅯℳΜϺᛖӍӎ𝐌𝑀𝑴𝓜𝔐𝕄𝕸𝖬𝗠𝘔𝙈𝙼𝚳𝛭𝜧𝝡𝞛🇲"],["m","₥ᵯ𝖒𝐦𝗆𝔪𝕞𝓂ⓜｍനᙢ൩ḿṁⅿϻṃጠɱ៳ᶆ𝙢𝓶𝚖𝑚𝗺᧕᧗"],["N","𝇙𝇚𝇜🄝𝆧𝙉🄽ℕꓠ𝛮𝝢𝙽𝚴𝑵𝑁Ⲛ𝐍𝒩𝞜𝗡𝘕𝜨𝓝𝖭🅽₦🅝ЙЍⓃҋ៷ＮᴎɴƝᑎ几иՈռИהЛπᴺᶰŃ刀ክṄⁿÑПΝᴨոϖǸŇṆŅṊṈทŊӢӣӤӥћѝйᥢҊᴻ🇳"],["n","ոռח𝒏𝓷𝙣𝑛𝖓𝔫𝗇𝚗𝗻ᥒⓝήｎǹᴒńñᾗηṅňṇɲņṋṉղຖՌƞŋ⒩ภกɳпŉлԉȠἠἡῃդᾐᾑᾒᾓᾔᾕᾖῄῆῇῂἢἣἤἥἦἧὴήበቡቢባቤብቦȵ𝛈𝜂𝜼𝝶𝞰𝕟𝘯𝐧𝓃ᶇᵰᥥ∩"],["O","𝜽⭘🔿ꭴ⭕⏺🄁🄀Ꭴ𝚯𝚹𝛩𝛳𝜣𝜭𝝝𝝧𝞗𝞡ⴱᎾᏫ⍬𝞱𝝷𝛉𝟎𝜃θ𝟘𝑂𝑶𝓞𝔒𝕆𝕺𝗢𝘖𝙊𝛰㈇ꄲ🄞🔾🄾𐊒𝟬ꓳⲞ𐐄𐊫𐓂𝞞🅞⍥◯ⵁ⊖０⊝𝝤Ѳϴ𝚶𝜪ѺӦӨӪΌʘ𝐎ǑÒŎÓÔÕȌȎㇿ❍ⓄＯὋロ❤૦⊕ØФԾΘƠᴼᵒ⒪ŐÖₒ¤◊Φ〇ΟОՕଠഠ௦סỒỐỖỔṌȬṎŌṐṒȮȰȪỎỜỚỠỞỢỌỘǪǬǾƟⵔ߀៰⍜⎔⎕⦰⦱⦲⦳⦴⦵⦶⦷⦸⦹⦺⦻⦼⦽⦾⦿⧀⧁⧂⧃ὈὉὊὌὍ"],["o","ంಂംං૦௦۵ℴ𝑜𝒐𝖔ꬽ𝝄𝛔𝜎𝝈𝞂ჿ𝚘০୦ዐ𝛐𝗈𝞼ဝⲟ𝙤၀𐐬𝔬𐓪𝓸🇴⍤○ϙ🅾𝒪𝖮𝟢𝟶𝙾𝘰𝗼𝕠𝜊𝐨𝝾𝞸ᐤⓞѳ᧐ᥲðｏఠᦞՓòөӧóºōôǒȏŏồốȍỗổõσṍȭṏὄṑṓȯȫ๏ᴏőöѻоዐǭȱ০୦٥౦೦൦๐໐οօᴑ०੦ỏơờớỡởợọộǫøǿɵծὀὁόὸόὂὃὅ"],["P","🄟🄿ꓑ𝚸𝙿𝞠𝙋ꮲⲢ𝒫𝝦𝑃𝑷𝗣𝐏𐊕𝜬𝘗𝓟𝖯𝛲Ꮲ🅟Ҏ🅿ⓅＰƤᑭ尸Ṗրφքᴘᴾᵖ⒫ṔｱקРየᴩⱣℙΡῬᑸᑶᑷᑹᑬᑮ🇵₱"],["p","ⲣҏ℗ⓟｐṕṗƥᵽῥρрƿǷῤ⍴𝓹𝓅𝐩𝑝𝒑𝔭𝕡𝖕𝗉𝗽𝘱𝙥𝚙𝛒𝝆𝞺𝜌𝞀"],["Q","🅀🄠Ꝗ🆀🅠ⓆＱℚⵕԚ𝐐𝑄𝑸𝒬𝓠𝚀𝘘𝙌𝖰𝕼𝔔𝗤🇶"],["q","𝓆ꝗ𝗾ⓠｑգ⒬۹զᑫɋɊԛ𝗊𝑞𝘲𝕢𝚚𝒒𝖖𝐪𝔮𝓺𝙦"],["R","℞🄡℟ꭱᏒ𐒴ꮢᎡꓣ🆁🅡ⓇＲᴙȒʀᖇя尺ŔЯરƦᴿዪṚɌʁℛℜℝṘŘȐṜŖṞⱤ𝐑𝑅𝑹𝓡𝕽𝖱𝗥𝘙𝙍𝚁ᚱ🇷ᴚ"],["r","𝚛ꭇᣴℾ𝚪𝛤𝜞𝝘𝞒ⲄГᎱᒥꭈⲅꮁⓡｒŕṙřȑȓṛṝŗгՐɾᥬṟɍʳ⒭ɼѓᴦᶉ𝐫𝑟𝒓𝓇𝓻𝔯𝕣𝖗𝗋𝗿𝘳𝙧ᵲґᵣ"],["S","🅂🄪🄢ꇙ𝓢𝗦Ꮪ𝒮Ꮥ𝚂𝐒ꓢ𝖲𝔖𝙎𐊖𝕾𐐠𝘚𝕊𝑆𝑺🆂🅢ⓈＳṨŞֆՏȘˢ⒮ЅṠŠŚṤŜṦṢടᔕᔖᔢᔡᔣᔤ"],["s","ᣵⓢꜱ𐑈ꮪｓśṥŝṡšṧʂṣṩѕşșȿᶊక𝐬𝑠𝒔𝓈𝓼𝔰𝕤𝖘𝗌𝘀𝘴𝙨𝚜ގ🇸"],["T","🅃🄣七ፒ𝜯🆃𐌕𝚻𝛵𝕋𝕿𝑻𐊱𐊗𝖳𝙏🝨𝝩𝞣𝚃𝘛𝑇ꓔ⟙𝐓Ⲧ𝗧⊤𝔗Ꭲꭲ𝒯🅣⏇⏉ⓉＴтҬҭƬイŦԵτᴛᵀｲፕϮŤ⊥ƮΤТ下ṪṬȚŢṰṮ丅丁ᐪ𝛕𝜏𝝉𝞃𝞽𝓣ㄒ🇹ጥ"],["t","ⓣｔṫẗťṭțȶ੮էʇ†ţṱṯƭŧᵗ⒯ʈեƫ𝐭𝑡𝒕𝓉𝓽𝔱𝕥𝖙𝗍𝘁𝘵𝙩𝚝ナ"],["U","🅄Џ🄤ሀꓴ𐓎꒤🆄🅤ŨŬŮᑗᑘǓǕǗǙⓊＵȖᑌ凵ƱմԱꓵЦŪՄƲᙀᵁᵘ⒰ŰપÜՍÙÚÛṸṺǛỦȔƯỪỨỮỬỰỤṲŲṶṴɄᥩᑧ∪ᘮ⋃𝐔𝑈𝑼𝒰𝓤𝔘𝕌𝖀𝖴𝗨𝘜𝙐𝚄🇺"],["u","𝘂𝘶𝙪𝚞ꞟꭎꭒ𝛖𝜐𝝊𝞄𝞾𐓶ὺύⓤｕùũūừṷṹŭǖữᥙǚǜὗυΰนսʊǘǔúůᴜűųยûṻцሁüᵾᵤµʋủȕȗưứửựụṳṵʉῠῡῢΰῦῧὐὑϋύὒὓὔὕὖᥔ𝐮𝑢𝒖𝓊𝓾𝔲𝕦𝖚𝗎ᶙ"],["V","𝑉𝒱𝕍𝗩🄥🅅ꓦ𝑽𝖵𝘝Ꮩ𝚅𝙑𝐕🆅🅥ⓋＶᐯѴᵛ⒱۷ṾⅴⅤṼ٧ⴸѶᐺᐻ🇻𝓥"],["v","∨⌄⋁ⅴ𝐯𝑣𝒗𝓋𝔳𝕧𝖛𝗏ꮩሀⓥｖ𝜐𝝊ṽṿ౮งѵעᴠνטᵥѷ៴ᘁ𝙫𝚟𝛎𝜈𝝂𝝼𝞶𝘷𝘃𝓿"],["W","𝐖𝑊𝓦𝔚𝕎𝖂𝖶𝗪𝙒𝚆🄦🅆ᏔᎳ𝑾ꓪ𝒲𝘞🆆Ⓦ🅦ｗＷẂᾧᗯᥕ山ѠຟచաЩШώщฬшᙎᵂʷ⒲ฝሠẄԜẀŴẆẈധᘺѿᙡƜ₩🇼"],["w","𝐰ꝡ𝑤𝒘𝓌𝔀𝔴𝕨𝖜𝗐𝘄𝘸𝙬𝚠աẁꮃẃⓦ⍵ŵẇẅẘẉⱳὼὠὡὢὣωὤὥὦὧῲῳῴῶῷⱲѡԝᴡώᾠᾡᾢᾣᾤᾥᾦɯ𝝕𝟉𝞏"],["X","ꭓꭕ𝛘𝜒𝝌𝞆𝟀ⲭ🞨𝑿𝛸🄧🞩🞪🅇🞫🞬𐌗Ⲭꓫ𝖃𝞦𝘟𐊐𝚾𝝬𝜲Ꭓ𐌢𝖷𝑋𝕏𝔛𐊴𝗫🆇🅧❌Ⓧ𝓧ＸẊ᙭χㄨ𝒳ӾჯӼҳЖΧҲᵡˣ⒳אሸẌꊼⅩХ╳᙮ᕁᕽⅹᚷⵝ𝙓𝚇乂𝐗🇽"],["x","᙮ⅹ𝑥𝒙𝓍𝔵𝕩𝖝𝗑𝘅ᕁᕽⓧｘхẋ×ₓ⤫⤬⨯ẍᶍ𝙭ӽ𝘹𝐱𝚡⨰ﾒ𝔁"],["Y","𝒴🄨𝓨𝔜𝖄𝖸𝘠𝙔𝚼𝛶𝝪𝞤УᎩᎽⲨ𝚈𝑌𝗬𝐘ꓬ𝒀𝜰𐊲🆈🅨ⓎＹὛƳㄚʏ⅄ϔ￥¥ՎϓγץӲЧЎሃŸɎϤΥϒҮỲÝŶỸȲẎỶỴῨῩῪΎὙὝὟΫΎӮӰҰұ𝕐🇾"],["y","𝐲𝑦𝒚𝓎𝔂𝔶𝕪𝖞𝗒𝘆𝘺𝙮𝚢ʏỿꭚγℽ𝛄𝛾𝜸𝝲𝞬🅈ᎽᎩⓨｙỳýŷỹȳẏÿỷуყẙỵƴɏᵞɣʸᶌү⒴ӳӱӯўУʎ"],["Z","🄩🅉ꓜ𝗭𝐙☡Ꮓ𝘡🆉🅩ⓏＺẔƵ乙ẐȤᶻ⒵ŹℤΖŻŽẒⱫ🇿"],["z","𝑍𝒁𝒵𝓩𝖹𝙕𝚉𝚭𝛧𝜡𝝛𝞕ᵶꮓ𝐳𝑧𝒛𝓏𝔃𝔷𝕫𝖟𝗓𝘇𝘻𝙯𝚣ⓩｚźẑżžẓẕƶȥɀᴢጊʐⱬᶎʑᙆ"]]),en=new Map,nn=new Map;for(const[t,e]of tn.entries()){en.set(t,[...e]);for(const n of e)nn.set(n,t)}function sn(t){if(function(t){return Ye.test(t)}(t))return t;let e="";for(const n of function(t){return t.replace(Ge,"").replace($e,"$1").replace(Qe," ").replace(Ze,".").replace(Xe,"")}(t))e+=nn.get(n)||n;return e}var rn=n(9705),an=n(45232);const on=400;async function cn(t,e,n){const{authToken:s,isAllowBadRequest:r,method:a,shouldRetry:o,retries:c,timeouts:d}=n??{},l=new URL(`${i.HUv}${t}`),u={method:a??"POST",headers:{"Content-Type":"application/json",...ln(),...s&&{"X-Auth-Token":s}},body:JSON.stringify(e)},f=o?await(0,an.J5)(l,u,{retries:c,timeouts:d,shouldSkipRetryFn:t=>!(null!=t&&t.includes("signal is aborted"))}):await fetch(l.toString(),u);return await(0,an.EQ)(f,r?[on]:void 0),f.json()}function dn(t,e,n){const s=new URL(`${i.HUv}${t}`);return(0,an.x6)(s,e,{headers:{...n,...ln()}})}function ln(){return{...xt().apiHeaders,"X-App-Version":i.hl5,"X-App-Env":i.Guj}}function un(t){for(const[e,n]of Object.entries(ln())){const s=/^X-App-(.+)$/i.exec(e);s&&t.searchParams.append(s[1].toLowerCase(),n)}}let fn={},hn=[],pn=new Set,mn=new Set,wn={};const yn=new rn.A;async function gn(){try{const t=await dn("/known-addresses");fn=t.knownAddresses,hn=t.scamMarkers.map((t=>new RegExp(t,"i"))),pn=new Set(t.trustedSites),mn=new Set(t.trustedCollections),wn=t.tonNftSuperCollections.reduce(((t,e)=>{const{collections:n,...s}=e;return n.forEach((e=>{t[e]=s})),t}),{}),yn.resolve()}catch(t){(0,N.SJ)("tryUpdateKnownAddresses",t)}}function vn(){return fn}async function An(){return await yn.promise,wn}function bn(t){return fn[t]}function kn(t){return mn.has(t)}function Sn(t){const e=sn(t).matchAll(i.kNZ);for(const t of e){var n;const e=null===(n=t.groups)||void 0===n?void 0:n.host;if(e&&(s=e,!pn.has(s.toLowerCase())))return!0}var s;return!1}function En(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(Tn(t)?1:0)-(Tn(e)?1:0);return 0===s&&(s=t.timestamp-e.timestamp,0===s&&(s=t.id>e.id?1:t.id<e.id?-1:0)),n?s:-s}function In(t){const[e,n,s]=t.split(":");return{hash:e,type:s,subId:n}}function Dn(t,e){return Bn(t,e,"local")}function Bn(t,e,n){return n||void 0!==e?void 0===n?`${t}:${e}`:`${t}:${e??""}:${n}`:t}function Cn(t){switch(t.kind){case"transaction":return t.nft?[]:[t.slug];case"swap":return[t.from,t.to]}}function Tn(t){return"swap"===t.kind?!t.cex&&"pending"===t.status:!!t.isPending}function _n(t){return 1e3*t}function Rn(t){return Math.floor(t/1e3)}new Map,new Set(["stake","unstake","unstakeRequest"]),new Set(["dnsChangeAddress","dnsChangeSite","dnsChangeStorage","dnsChangeSubdomains","dnsDelete","dnsRenew"]);var xn=n(50110),Nn=n(53528),Pn=n(62386),Fn=n(65871),Un=n(66902),On=n(56906),Mn=n(97590);function Wn(t){return!function(t){let e=0;for(const n in t)if(t.hasOwnProperty(n)&&(e++,e>0))return!0;return!1}(t)}var Ln=n(64143);const Kn=new Set(["AbortError","BulkError","UnknownError"]);async function Hn(t){try{return await t()}catch(t){if(Kn.has(null==t?void 0:t.name))return;throw t}}class jn extends Ln.Ay{constructor(){super("tables"),this.version(1).stores({nfts:"[accountId+address], accountId, address, collectionAddress"}),this.version(2).stores({sseConnections:"&clientId"}),this.version(3).stores({tokens:"tokenAddress, chain, &slug"}),this.version(4).upgrade((t=>t.table("tokens").clear())),this.version(5).stores({nfts:null,sseConnections:null})}}const qn=new jn,zn=new class{constructor(t){this.table=t}all(){return this.table.toArray()}find(t){return Hn((()=>this.table.where(t).toArray()))}put(t){return Hn((()=>this.table.put(t)))}bulkPut(t){return Hn((()=>this.table.bulkPut(t)))}update(t,e){return Hn((()=>this.table.update(t,e)))}delete(t){return Hn((()=>this.table.delete(t)))}deleteWhere(t){return Hn((()=>this.table.where(t).delete()))}clear(){return Hn((()=>this.table.clear()))}}(qn.tokens),Vn=new rn.A,Jn={baseCurrency:i.wOb,bySlug:{...i.lfO}};async function $n(t,e,n,s,r){const a=[],o=G(n??[],"slug");for(const{slug:t,...e}of n??[]){const n=Jn.bySlug[t];if(n){const s={...n,...e};Jn.bySlug[t]=s,a.push(s)}}for(const e of t){const{slug:t}=e,n=Gn(e,o,Jn.bySlug[t]);e.slug in Jn||(r=!0),Jn.bySlug[e.slug]=n,e.tokenAddress&&a.push(n)}s&&(Jn.baseCurrency=s),await zn.bulkPut(a),r&&e&&Yn(e)}function Gn(t,e,n){return n?{...X(t.isFromBackend?n:t),...X(t.isFromBackend?t:n),price:t.price||n.price,priceUsd:t.priceUsd||n.priceUsd,percentChange24h:t.percentChange24h||n.percentChange24h}:t.slug in e?{...t,...e[t.slug]}:t}function Qn(){return Jn}function Zn(t){return Jn.bySlug[t]}function Xn(t){return Zn(ts("ton",t))}function Yn(t){t({type:"updateTokens",tokens:Jn.bySlug,baseCurrency:Jn.baseCurrency})}function ts(t,e){return`${t}-${e.replace(/[^a-z\d]/gi,"").slice(0,10)}`.toLowerCase()}const es=128,ns={"wallet v1 r1":"simpleR1","wallet v1 r2":"simpleR2","wallet v1 r3":"simpleR3","wallet v2 r1":"v2R1","wallet v2 r2":"v2R2","wallet v3 r1":"v3R1","wallet v3 r2":"v3R2","wallet v4 r2":"v4R2","wallet v5 r1":"W5"};async function ss(t,e){return(await os(t,"/addressBook",{address:e})).address_book[e]}async function rs(t,e){const{wallets:n,address_book:s}=await os(t,"/walletStates",{address:e.join(",")}),r=Object.fromEntries(n.map((t=>[t.address.toLowerCase(),as(t,s)])));return Object.fromEntries(e.map((t=>{const e=Jt(t).toLowerCase();return[t,r[e]??{address:t,balance:0n,isInitialized:!1,seqno:0}]})))}function as(t,e){return{address:e[t.address].user_friendly,version:"wallet_type"in t?ns[t.wallet_type]:void 0,balance:BigInt(t.balance),isInitialized:"active"===t.status,seqno:"seqno"in t?t.seqno:0,lastTxId:t.last_transaction_hash?Bn(t.last_transaction_hash):void 0,domain:e[t.address].domain??void 0}}function os(t,e,n){const s=`${"testnet"===t?i.pyR:i._J8}/api/v3${e}`;return(0,an.x6)(s,n,{headers:is(t)})}function is(t){const{apiHeaders:e,toncenterMainnetKey:n,toncenterTestnetKey:s}=xt(),r="testnet"===t?s:n;return{...e,...r&&{"X-Api-Key":r},"X-Actions-Version":i.eaP}}var cs=n(68354);const ds=500,ls=100;let us;function fs(t){if(!us){const t={...xt().apiHeaders,"Content-Type":"application/json"};us={mainnet:new cs.jI(new cs.Qq({baseUrl:i.lHX,baseApiParams:{headers:t},customFetch:an.J5})),testnet:new cs.jI(new cs.Qq({baseUrl:i.SKs,baseApiParams:{headers:t},customFetch:an.J5}))}}return us[t]}async function hs(t,e){return(await fs(t).accounts.getAccountJettonsBalances(e,{supported_extensions:["custom_payload"]})).balances}async function ps(t,e){return(await fs(t).nft.getNftItemsByAddresses({account_ids:e})).nft_items}var ms=n(48287).Buffer;const ws=1;const ys={parse:t=>{const e=ms.from(""),n=(t,e,s)=>{if(s&&0!==t.loadUint(8))throw new Error("Only snake format is supported");return e=ms.concat([e,t.loadBuffer(t.remainingBits/8)]),1===t.remainingRefs&&(e=n(t.loadRef().beginParse(),e,!1)),e};return n(t.loadRef().beginParse(),e,!0)},serialize:()=>{}},gs={uri:"ascii",name:"utf8",description:"utf8",image:"ascii",symbol:"utf8",decimals:"utf8",custom_payload_api_uri:"ascii"};async function vs(t){return Q(await(0,an.x3)(t),["name","description","symbol","decimals","image","image_data","custom_payload_api_uri"])}async function As(t,e,n){const s=function(t){let e;e="string"==typeof t?ms.from(t,"base64"):t instanceof ms?t:ms.from(t);try{return Un.Cell.fromBoc(e)[0].beginParse()}catch(t){if("Invalid magic"!==(null==t?void 0:t.message))throw t}return new On.Slice(new Nn.BitReader(new Pn.BitString(e,0,8*e.length)),[])}(n),r={type:"unknown",base64:n};return s?await async function(t,e,n,s,r){let a;try{if(a=n.loadUint(32),a===Nt.$G.Comment){return{type:"comment",comment:Ss(n).toString("utf-8")}}if(a===Nt.$G.Encrypted){return{type:"encrypted-comment",encryptedComment:Ss(n).toString("base64")}}if(n.remainingBits<64)return;const s=n.loadUintBig(64);switch(a){case Nt.LY.Transfer:{var o;const r=await Ht(t,e).catch((()=>"")),a=ts("ton",r),i=n.loadCoins(),c=n.loadAddress(),d=n.loadMaybeAddress();if(!d)return{type:"tokens:transfer-non-standard",queryId:s,destination:Vt(c,void 0,t),amount:i,slug:a};const l=n.loadMaybeRef(),u=n.loadCoins();let f,h=n.loadMaybeRef();if(!h&&n.remainingBits){const t=(new Fn.Builder).storeBits(n.loadBits(n.remainingBits));et(0,n.remainingRefs).forEach((()=>{t.storeRef(n.loadRef())})),h=t.endCell()}if(h){const t=h.beginParse();t.remainingBits>32&&(f=t.loadUint(32))}return{type:"tokens:transfer",queryId:s,amount:i,destination:Vt(c,void 0,t),responseDestination:Vt(d,void 0,t),customPayload:null==l?void 0:l.toBoc().toString("base64"),forwardAmount:u,forwardPayload:null===(o=h)||void 0===o?void 0:o.toBoc().toString("base64"),forwardPayloadOpCode:f,slug:a,tokenAddress:r}}case Nt.H3.TransferOwnership:{var c;const r=n.loadAddress(),a=n.loadAddress(),o=n.loadMaybeRef(),i=n.loadCoins(),d=ks(n),l=d?bs(d.asSlice()):void 0;let u;{const n=await An(),[s]=await ps(t,[e]);s&&(u=Is(t,s,n))}return{type:"nft:transfer",queryId:s,newOwner:Vt(r,void 0,t),responseDestination:Vt(a,void 0,t),customPayload:null==o?void 0:o.toBoc().toString("base64"),forwardAmount:i,forwardPayload:null==d?void 0:d.toBoc().toString("base64"),nftAddress:e,nftName:null===(c=u)||void 0===c?void 0:c.name,nft:u,comment:l}}case Nt.H3.OwnershipAssigned:{const r=n.loadAddress(),a=ks(n),o=a?bs(a.asSlice()):void 0;let i;{const n=await An(),[s]=await ps(t,[e]);s&&(i=Is(t,s,n))}return{type:"nft:ownership-assigned",queryId:s,prevOwner:Vt(r,void 0,t),comment:o,nftAddress:e,nft:i}}case Nt.LY.Burn:{const r=await Ht(t,e),a=ts("ton",r),o=n.loadCoins(),c=n.loadAddress(),d=n.loadMaybeRef(),l=r===i.Kzb;return{type:"tokens:burn",queryId:s,amount:o,address:Vt(c,void 0,t),customPayload:null==d?void 0:d.toBoc().toString("base64"),slug:a,isLiquidUnstakeRequest:l}}case Nt.Ad.DistributedAsset:return{type:"liquid-staking:withdrawal-nft",queryId:s};case Nt.Ad.Withdrawal:return{type:"liquid-staking:withdrawal",queryId:s};case Nt.Ad.Deposit:{let t;return n.remainingBits>0&&(t=n.loadUintBig(64)),{type:"liquid-staking:deposit",queryId:s,appId:t}}case Nt.UA.AddWhitelist:{const e=n.loadAddress();return{type:"vesting:add-whitelist",queryId:s,address:await ss(t,e.toRawString())}}case Nt.IP.Withdraw:return{type:"single-nominator:withdraw",queryId:s,amount:n.loadCoins()};case Nt.IP.ChangeValidator:{const e=n.loadAddress();return{type:"single-nominator:change-validator",queryId:s,address:await ss(t,e.toRawString())}}case Nt.Ad.Vote:{const t=n.loadAddress(),e=n.loadUint(48),r=n.loadBit(),a=n.loadBit();return{type:"liquid-staking:vote",queryId:s,votingAddress:Vt(t,!0),expirationDate:e,vote:r,needConfirmation:a}}case Nt.kc.ChangeRecord:{var d;const e=n.loadBuffer(32).toString("hex"),r=(null===(d=Object.entries(Nt.nm).find((t=>{let[,n]=t;return e===n})))||void 0===d?void 0:d[0])??"unknown",a=n.loadAddress(),o=await async function(t,e){"string"==typeof e&&(e=at.Address.parse(e));const n=Lt(t).open(new gt.n(e)),s=(r=Vt((await n.getNftData()).collectionAddress,!0),i.gs5.find((t=>t.resolver===r)));var r;return`${null!=s&&s.isTelemint?await n.getTelemintDomain():await n.getDomain()}.${null==s?void 0:s.suffixes[0]}`}(t,a);if(r===Nt.kJ.Wallet){if(n.remainingRefs>0){const e=n.loadRef().beginParse();n.endParse();const r=e.loadAddress(),a=e.loadUint(8);return{type:"dns:change-record",queryId:s,record:{type:"wallet",value:await ss(t,r.toRawString()),flags:a},domain:o}}return{type:"dns:change-record",queryId:s,record:{type:"wallet",value:void 0},domain:o}}if(n.remainingRefs>0){const t=n.loadRef();return{type:"dns:change-record",queryId:s,record:r===Nt.kJ.Unknown?{type:"unknown",key:e,value:t.toBoc().toString("base64")}:{type:r,value:t.toBoc().toString("base64")},domain:o}}return{type:"dns:change-record",queryId:s,record:r===Nt.kJ.Unknown?{type:"unknown",key:e}:{type:r},domain:o}}case Nt.b2.TokenBridgePaySwap:return{type:"token-bridge:pay-swap",queryId:s,swapId:n.loadBuffer(32).toString("hex")};case Nt.CU.UnstakeRequest:return{type:"jetton-staking:unstake",queryId:s,amount:n.loadCoins(),isForce:n.loadBoolean()}}}catch(t){if(i.Oig){var l;const e=r,n=`0x${null===(l=a)||void 0===l?void 0:l.toString(16).padStart(8,"0")}`;(0,N.SJ)("parsePayload",n,e,"\n",t)}}}(t,e,s)??r:r}function bs(t){if(!(t.remainingBits<32)&&t.loadUint(32)===Nt.$G.Comment&&(t.remainingBits||t.remainingRefs))return Ss(t).toString("utf-8")}function ks(t){let e=t.loadBit()&&t.remainingRefs?t.loadRef():void 0;if(!e&&t.remainingBits){const n=(new Fn.Builder).storeBits(t.loadBits(t.remainingBits));et(0,t.remainingRefs).forEach((()=>{n.storeRef(t.loadRef())})),e=n.endCell()}return e??void 0}function Ss(t){let e=ms.alloc(0);for(;t.remainingBits>=8&&(e=ms.concat([e,t.loadBuffer(t.remainingBits/8)]),t.remainingRefs);)t=t.loadRef().beginParse();return e}function Es(t){const{id:e,image:n,attributes:s}=t;let r,a,o={};var i,c,d;(n&&(o.imageUrl=n),void 0!==e&&(o.mtwCardId=e),s&&Array.isArray(s)&&s.length&&(r=null===(i=s.find((t=>"Card Type"===t.trait_type)))||void 0===i?void 0:i.value.replace(/[^\x20-\x7E]/g,"").trim().toLowerCase(),r))&&(a=null===(c=s.find((t=>"Text"===t.trait_type)))||void 0===c?void 0:c.value.toLowerCase(),o.mtwCardType=r,"standard"===r&&(o.mtwCardBorderShineType=null===(d=s.find((t=>"Shine"===t.trait_type)))||void 0===d?void 0:d.value.toLowerCase()),o.mtwCardTextType="dark"===a||"silver"===r?"dark":"light",o=X(o));return Wn(o)?void 0:o}function Is(t,e,n){if(e.metadata)try{const{address:s,index:r,collection:a,metadata:o,previews:c,sale:d,trust:l,owner:u}=e,{name:f,image:h,description:p,render_type:m,attributes:w,lottie:y}=o,g=a&&Vt(a.address,!0,t);let v=!1;if(!g||!kn(g))for(const t of[f,p].filter(Boolean))Sn(t)&&(v=!0);const A="whitelist"===l,b=v||"SCAM"===p||"blacklist"===l,k="hidden"===m||b,S=c.find((t=>"1500x1500"===t.resolution)).url,E=Ds(n,g),I={attributes:w,...A&&y&&{lottie:(0,an.I5)(y)},...g===i.qL&&Es(o),...E&&{fragmentUrl:h.replace(i.Pjb,"https://$1")}};return X({index:r,name:f,ownerAddress:u?Vt(u.address,!1,t):void 0,address:Vt(s,!0,t),image:(0,an.fU)(S||h||""),thumbnail:c.find((t=>"500x500"===t.resolution)).url,isOnSale:Boolean(d),isHidden:k,isScam:b,description:p,...a&&{collectionAddress:g,collectionName:a.name,isOnFragment:E||i.q5n.includes(a.address),isTelegramGift:E},metadata:I})}catch(t){return void(0,N.SJ)("buildNft",t)}}function Ds(t,e){var n;return!!e&&(null===(n=t[e])||void 0===n?void 0:n.id)===i.X6R}function Bs(t,e){const n=typeof t;if(n!==typeof e)return!1;if("object"!==n||null===t||null===e)return t===e;const s=Array.isArray(t);if(s!==Array.isArray(e))return!1;if(s){const n=t,s=e;return n.length===s.length&&n.every(((t,e)=>Bs(t,s[e])))}const r=t,a=e,o=Object.keys(r),i=Object.keys(a);return!!o.every((t=>a.hasOwnProperty(t)))&&!!i.every((t=>r.hasOwnProperty(t)))&&o.every((t=>Bs(r[t],a[t])))}var Cs=n(59288);function Ts(t){var e,n;return(null===(e=t.sseOptions)||void 0===e?void 0:e.appClientId)??(null===(n=t.sse)||void 0===n?void 0:n.appClientId)??"jsbridge"}let _s,Rs;function xs(t){if("transaction"!==t.kind)return t;const{normalizedAddress:e,comment:n,isIncoming:s,nft:r}=t;let{metadata:a={}}=t;const o=Boolean(r),c=vn(),d=!!n&&hn.some((t=>t.test(n))),l=!(d||!n||!s||!o&&!n.toLowerCase().includes("claim"))&&(Sn(n)||(u=n,i.rcB.test(sn(u))));var u;return e in c&&(a={...a,...c[e]}),(d||l)&&(a.isScam=!0),{...t,metadata:a}}function Ns(t){return Rs===t}function Ps(t){const{id:e,network:n}=t;return`${e}-ton-${n}`}async function Fs(){const t=await fe.getKeys();if(null!=t&&t.length){const e=[];for(const n of t){if(n.startsWith("backup_"))continue;const t=`backup_${n}`,s=await fe.getItem(n,!0);(0,Cs.v)(void 0!==s,"Empty value!"),await fe.setItem(t,s);const r=await fe.getItem(t);(0,Cs.v)(Bs(s,r),"Data has not been saved!"),e.push([n,s])}for(const[t,n]of e){let e=!1;await fe.setItem(t,n).catch((()=>{e=!0})),e&&(await fe.removeItem(t),await fe.setItem(t,n))}}}const Us="0:F6FF877DD4CE1355B101572045F09D54C29309737EB52CA542CFA6C195F7CC5B",Os="0000000000000000000000000000000000000000000000",Ms=new Set(["0:901362FD85FC31D55F2C82617D91EADA1F1D6B34AF559A047572D56F20D046CA"]);async function Ws(t){const{network:e,filter:n,limit:s,toTimestamp:r,fromTimestamp:a,shouldIncludeFrom:o,shouldIncludeTo:i,walletAddress:c,includeTypes:d,excludeTypes:l}=t,u={account:"address"in n?n.address:void 0,action_id:"actionId"in n?n.actionId:void 0,limit:s,start_utime:a&&Rn(a)+(o?0:1),end_utime:r&&Rn(r)-(i?0:1),sort:"desc",...(null==d?void 0:d.length)&&{action_type:d.join(",")},...(null==l?void 0:l.length)&&{exclude_action_type:l.join(",")}},{actions:f,address_book:h,metadata:p={}}=await os(e,"/actions",u);return Ls(e,c,f,h,p,await An())}function Ls(t,e,n,s,r,a,o){const i={network:t,addressBook:s,walletAddress:e,metadata:r,nftSuperCollectionsByCollectionAddress:a,isPending:o},c=[];for(const t of n)c.push(...Ks(t,i));return c}function Ks(t,e){let n=[];switch(t.type){case"ton_transfer":n=[Hs(t,e)];break;case"call_contract":n=[js(t,e)];break;case"contract_deploy":n=[qs(t,e)];break;case"nft_transfer":n=[$s(t,e)];break;case"nft_mint":n=[Gs(t,e)];break;case"jetton_transfer":n=[zs(t,e)];break;case"jetton_mint":n=[Vs(t,e)];break;case"jetton_burn":n=[Js(t,e)];break;case"stake_deposit":n=[Qs(t,e)];break;case"stake_withdrawal":n=[Zs(t,e)];break;case"stake_withdrawal_request":n=[Xs(t,e)];break;case"jetton_swap":n=[Ys(t,e)];break;case"change_dns":case"delete_dns":case"renew_dns":n=[tr(t,e)];break;case"auction_bid":n=[er(t,e)];break;case"dex_deposit_liquidity":n=nr(t,e);break;case"dex_withdraw_liquidity":n=function(t,e){const{addressBook:n}=e,{details:s,details:{source:r,pool:a,dex:o}}=t,i={...rr(t,e,a,r),shouldLoadDetails:!0,type:"liquidityWithdraw",extra:{dex:lr(o)}},c=cr(t,"additional");return[{...i,amount:BigInt(s.amount_1),slug:sr(n,s.asset_1)},{...i,id:c,txId:c,amount:BigInt(s.amount_2),slug:sr(n,s.asset_2)}]}(t,e)}for(let t=0;t<n.length;t++){var s;const e=n[t];e&&("nft"in e&&null!==(s=e.nft)&&void 0!==s&&s.isHidden&&(e.shouldHide=!0),"transaction"!==e.kind||e.isIncoming||(e.shouldLoadDetails??=!0),n[t]=xs(e))}return n.filter(Boolean)}function Hs(t,e){const{details:n,details:{encrypted:s,source:r,destination:a,value:o}}=t,c=!s&&n.comment||void 0,d=s&&n.comment||void 0;return{...rr(t,e,r,a,o),slug:i.Tu9.slug,comment:c,encryptedComment:d}}function js(t,e){const{walletAddress:n}=e,{details:s,details:{source:r,destination:a,value:o}}=t,c=rr(t,e,r,a,o),d=Number(s.opcode),l=!c.isIncoming&&[Nt.$G.OurFee,Nt.s1.Ok].includes(d);let u;return Nt.br.includes(d)?u="excess":d===Nt.$G.Bounced?u="bounced":[Nt.CU.UnstakeRequest,Nt.CU.ClaimRewards].includes(d)?u="unstakeRequest":c.toAddress!==n&&(u="callContract"),{...c,slug:i.Tu9.slug,type:u,shouldHide:l}}function qs(t,e){const{details:{source:n,destination:s}}=t;if(n)return{...rr(t,e,n,s),slug:i.Tu9.slug,type:"contractDeploy",shouldLoadDetails:!1,fee:0n}}function zs(t,e){const{addressBook:n}=e,{details:s,details:{is_encrypted_comment:r,forward_payload:a,sender:o,receiver:c,amount:d}}=t,l=rr(t,e,o,c,d),{isIncoming:u,toAddress:f,fromAddress:h}=l,p=!r&&s.comment||void 0,m=r&&s.comment||void 0,w=n[s.asset].user_friendly,y=ts("ton",w),g=!u&&a===Nt.SQ;let v;return f===i.pV9?v="burn":f===i.xrY?v="stake":h===i.xrY?v="unstake":w===i.wpN.tokenAddress&&(h===i.BV6?v="unstake":f===i.BV6&&(v="stake")),{...l,slug:y,comment:p,encryptedComment:m,shouldHide:g,type:v}}function Vs(t,e){const{addressBook:n}=e,{details:s,details:{receiver:r,receiver_jetton_wallet:a,amount:o}}=t,c=n[s.asset].user_friendly,d=ts("ton",c);let l,u="mint";return c===i.VG8.tokenAddress&&t.end_lt!==t.trace_end_lt?(u="unstakeRequest",l={...rr(t,e,r,r,0),toAddress:i.BV6,isIncoming:!1,normalizedAddress:i.BV6}):l=rr(t,e,a,r,o),{...l,slug:d,type:u}}function Js(t,e){const{network:n}=e,{details:s,details:{owner:r,owner_jetton_wallet:a,amount:o}}=t,i=ts("ton",Vt(s.asset,!0,n));return{...rr(t,e,r,a,o),slug:i,type:"burn"}}function $s(t,e){const{metadata:n,walletAddress:s,addressBook:r,nftSuperCollectionsByCollectionAddress:a}=e,{nft_item_index:o,nft_item:c,nft_collection:d,new_owner:l,old_owner:u,forward_payload:f,is_purchase:h,price:p,response_destination:m,marketplace:w}=t.details,{nft:y,isMetadataMissing:g}=ar(n,c,a,d??void 0,o??void 0);let v=!y&&d?function(t,e){var n,s;const r=null===(n=e[t])||void 0===n?void 0:n.token_info[0];return null==r||null===(s=r.name)||void 0===s?void 0:s.includes("Withdrawal Payout")}(d,n):void 0;if(u&&l&&m){var A,b;const t=null===(A=r[u])||void 0===A?void 0:A.user_friendly,e=null===(b=r[l])||void 0===b?void 0:b.user_friendly;t!==s&&e!==s&&(v=!0)}const k={...rr(t,e,u??c,l),shouldHide:v,slug:i.Tu9.slug,nft:y,comment:f&&(S=f,(0,xn.A)((()=>{const t=at.Cell.fromBase64(S);if(!t.isExotic)return bs(t.asSlice())})))||void 0,shouldReload:g&&Ms.has(t.details.nft_collection)||void 0};var S;if(k.toAddress===i.pV9)k.type="burn";else if(h&&p){var E;const t=(null===(E=r[l])||void 0===E?void 0:E.user_friendly)===s;k.type="nftTrade",k.isIncoming=!t,k.amount=t?-BigInt(p):BigInt(p),k.extra={marketplace:w??void 0}}return k}function Gs(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{owner:r,nft_item_index:a,nft_item:o,nft_collection:c}=t.details,{nft:d,isMetadataMissing:l}=ar(n,o,s,c??void 0,a??void 0);return{...rr(t,e,r,o),slug:i.Tu9.slug,nft:d,type:"mint",shouldReload:l&&Ms.has(t.details.nft_collection)||void 0}}function Qs(t,e){const{details:{stake_holder:n,pool:s,amount:r}}=t;return{...rr(t,e,n,s,r),slug:i.Tu9.slug,type:"stake"}}function Zs(t,e){const{addressBook:n}=e,{details:s,details:{stake_holder:r,amount:a}}=t,o=s.pool??Us;return{...rr(t,o in n?e:{...e,addressBook:{...n,[o]:{user_friendly:i.qMf,domain:null}}},o,r,a),slug:i.Tu9.slug,type:"unstake",shouldLoadDetails:"tonstakers"===s.provider&&!s.payout_nft}}function Xs(t,e){const{details:{stake_holder:n,pool:s}}=t;return{...rr(t,e,n,s,0),slug:i.Tu9.slug,type:"unstakeRequest"}}function Ys(t,e){var n,s;const{metadata:r,isPending:a}=e,{end_utime:o,success:c,details:{dex_incoming_transfer:{amount:d,asset:l},dex_outgoing_transfer:{amount:u,asset:f}}}=t,h=l&&(null===(n=or(l,r))||void 0===n?void 0:n.decimals)||i.Tu9.decimals,p=f&&(null===(s=or(f,r))||void 0===s?void 0:s.decimals)||i.Tu9.decimals,m=l?Vt(l,!0):void 0,w=f?Vt(f,!0):void 0,y=m&&m!==i.oWZ?ts("ton",m):i.Tu9.slug,g=w&&w!==i.oWZ?ts("ton",w):i.Tu9.slug;return{kind:"swap",id:cr(t),timestamp:_n(o),from:y,fromAmount:k(BigInt(d),h),to:g,toAmount:k(BigInt(u),p),networkFee:"0",swapFee:"0",ourFee:"0",status:a?"pending":c?"completed":"failed",hashes:[],externalMsgHashNorm:t.trace_external_hash_norm??t.trace_external_hash,shouldLoadDetails:!0}}function tr(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{details:{source:r,asset:a}}=t,{nft:o}=ar(n,a,s);let c;if("change_dns"===t.type){const{sum_type:e}=t.details.value;"DNSSmcAddress"===e?c="dnsChangeAddress":"DNSAdnlAddress"===e?c="dnsChangeSite":"DNSStorageAddress"===e?c="dnsChangeStorage":"DNSNextResolver"===e&&(c="dnsChangeSubdomains")}else c="renew_dns"===t.type||"delete_dns"===t.type&&t.details.hash.endsWith(Os)?"dnsRenew":"dnsDelete";return{...rr(t,e,r,a,0),slug:i.Tu9.slug,type:c,nft:o}}function er(t,e){const{metadata:n,nftSuperCollectionsByCollectionAddress:s}=e,{details:r}=t,{bidder:a,auction:o,nft_item_index:c,nft_item:d,nft_collection:l}=r,{nft:u}=ar(n,d??void 0,s,l??void 0,c??void 0);return{...rr(t,e,a,o,r.amount),slug:i.Tu9.slug,type:"auctionBid",nft:u}}function nr(t,e){const{addressBook:n}=e,{details:s,details:{source:r,pool:a,destination_liquidity:o,dex:i}}=t,c={...rr(t,e,r,a??o),type:"liquidityDeposit",extra:{dex:lr(i)}},d=[{...c,amount:-BigInt(s.amount_1??0n),slug:sr(n,s.asset_1)}];if(null!==s.amount_2){const e=cr(t,"additional");d.push({...c,id:e,txId:e,amount:-BigInt(s.amount_2),slug:sr(n,s.asset_2)})}return d}function sr(t,e){return e?ts("ton",t[e].user_friendly):i.Tu9.slug}function rr(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const a=cr(t),{walletAddress:o,network:i,addressBook:c,isPending:d}=e,l=c[n].user_friendly,u=c[s].user_friendly,f=u===o,h=Vt(f?l:u,!0,i),p=f?BigInt(r):-BigInt(r);return{kind:"transaction",id:a,txId:a,timestamp:_n(t.end_utime),externalMsgHashNorm:t.trace_external_hash_norm??t.trace_external_hash,fee:0n,fromAddress:l,toAddress:u,isIncoming:f,normalizedAddress:h,amount:p,isPending:d||void 0}}function ar(t,e,n,s,r){try{const a=ir(e,t,"nft_items");if(!a)return{isMetadataMissing:!0};const{name:o,description:c,extra:d}=a;let{image:l}=a;const u=null!=d&&d.lottie?(0,an.I5)(d.lottie):void 0,f=Vt(e,!0),h=s?ir(s,t,"nft_collections"):void 0,p=s?Vt(s,!0):void 0,m=(null==d?void 0:d.domain)??o??"",{zone:w,base:y}=wt(m)??{};if(w&&(!p||!l))return"ton"===w.suffixes[0]&&(l=`${i.X7L}${y}`),{nft:X({index:Number(r),name:m,address:f,thumbnail:(null==d?void 0:d._image_medium)??l,image:l,description:c,isOnSale:!1,collectionAddress:p??w.resolver,collectionName:w.collectionName,metadata:{...u&&{lottie:u}}})};let g=!1;if(!p||!kn(p))for(const t of[o,c].filter(Boolean))Sn(t)&&(g=!0);const v=g,A="hidden"===(null==d?void 0:d.render_type)||v,b=Ds(n,p),k=p===i.qL,S=l?(0,an.fU)(l):void 0,E=(null==d?void 0:d._image_medium)??S;return{nft:X({index:Number(r),name:o,address:f,thumbnail:E,image:S,description:c,isOnSale:!1,isHidden:A,metadata:{...b&&{fragmentUrl:l.replace(i.Pjb,"https://$1")},...k&&Es({id:Number(r||0)+1,image:l,attributes:null==d?void 0:d.attributes})},...p&&{collectionAddress:p,collectionName:null==h?void 0:h.name,isOnFragment:b||i.q5n.includes(s),isTelegramGift:b}})}}catch(t){return(0,N.SJ)("parseToncenterNft",t),{}}}function or(t,e){const n=Vt(t,!0),s=ts("ton",n),r=Zn(s);if(r)return r;const a=ir(t,e,"jetton_masters");return a?{tokenAddress:n,slug:s,chain:"ton",name:a.name,symbol:a.symbol,image:a.image,decimals:Number(a.extra.decimals)}:void 0}function ir(t,e,n){var s;const r=e[t];if(r&&r.is_indexed)return null===(s=r.token_info)||void 0===s?void 0:s.find((t=>t.type===n))}function cr(t,e){const n=`${t.start_lt}-${t.action_id}`;return Bn(t.trace_id??t.trace_external_hash_norm??t.trace_external_hash,n,e)}function dr(t){const{hash:e,subId:n}=In(t),[s,r]=n.split("-");return{traceId:e,startLt:s,actionId:r}}function lr(t){switch(t){case"dedust":return"dedust";case"stonfi":case"stonfi_v2":return"ston";default:return}}function ur(){const t=new Set;function e(e){t.delete(e)}return{runCallbacks:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.forEach((t=>{t(...n)}))},addCallback:function(n){return t.add(n),()=>{e(n)}},removeCallback:e,hasCallbacks:function(){return Boolean(t.size)}}}const fr=ur();let hr=!0;function pr(t,e,n){let s;const r=()=>{s(),n()};return s=(0,M.Gf)(t,(()=>{if(hr)r();else{const n=fr.addCallback(r),a=(0,M.Gf)(e-t,r);s=()=>{n(),a()}}})),()=>s()}function mr(t,e){return new Promise((n=>{pr(t,e,n)}))}function wr(t){hr=t,t&&fr.runCallbacks()}var yr=n(2188);const gr=1e3,vr=60*gr,Ar=365,br=50,kr="fakeTxId",Sr={updateOnStart:!0,minUpdateDelay:{focused:gr,notFocused:3*gr},fallbackUpdateStartDelay:3*gr,fallbackUpdatePeriod:{focused:1.1*gr,notFocused:10*gr},forceUpdatePeriod:{focused:vr,notFocused:2*vr}},Er={updateOnStart:!1,minUpdateDelay:{focused:5*gr,notFocused:30*gr},fallbackUpdateStartDelay:5*gr,fallbackUpdatePeriod:{focused:30*gr,notFocused:vr},forceUpdatePeriod:{focused:2*vr,notFocused:5*vr}};function Ir(t){let e,{period:n,minDelay:s=0,skipInitialPoll:r,prepare:a=()=>Promise.resolve(),poll:o}=t,i=!1;const c=new rn.A,d=(0,M.nF)((async()=>{var t;if(i)return;null===(t=e)||void 0===t||t();const n=await c.promise;try{"stop"===await o(n)&&(i=!0)}finally{i||l()}}),(()=>mr(...Br(s))));function l(){var t;null===(t=e)||void 0===t||t(),e=pr(...Br(n),d)}return a().then((t=>{i||(c.resolve(t),r?l():d())})),{poll:d,stop(){var t;i=!0,null===(t=e)||void 0===t||t()}}}function Dr(t,e){let n,s=!1;async function r(a,o){var i;null===(i=n)||void 0===i||i();try{return await e(a,...o)}finally{var c;!s&&a<t.length&&(null===(c=n)||void 0===c||c(),n=(0,M.Gf)(t[a],(()=>r(a+1,o))))}}return{run(){s=!1;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r(0,e)},cancel(){var t;s=!0,null===(t=n)||void 0===t||t()}}}function Br(t){if("number"==typeof t)return[t,t];const{focused:e,notFocused:n}=t;return[e,n]}class Cr{#t;#e;#n=!1;constructor(t,e){this.#t=e,t?this.#s():this.#r(),e.pollOnStart&&this.#a()}onSocketConnect(){this.#n||(this.#s(),this.#a())}onSocketDisconnect(){this.#n||this.#r()}onSocketMessage(){this.#n||this.#s()}destroy(){var t;this.#n=!0,null===(t=this.#e)||void 0===t||t.call(this)}#a=(0,M.nF)((async()=>{if(!this.#n)try{await this.#t.poll()}catch(t){(0,yr.H)(t)}}),(()=>mr(...Br(this.#t.minPollDelay))));#r(){var t;null===(t=this.#e)||void 0===t||t.call(this);const{pollingStartDelay:e,pollingPeriod:n}=this.#t,s=()=>{this.#e=pr(...Br(n),s),this.#a()};this.#e=(0,M.Gf)(e,s)}#s(){var t;null===(t=this.#e)||void 0===t||t.call(this);const e=()=>{const{forcedPollingPeriod:t}=this.#t;this.#e=pr(...Br(t),(()=>{e(),this.#a()}))};e()}}class Tr{#o;#i;#c=!1;#d=0;#l;#u=[];#f=ur();#h=ur();#p=ur();constructor(t){this.#o=t.toString(),this.#m()}send(t){this.#i&&this.#c?this.#w(t):this.#u.push(t)}get isConnected(){return this.#c}reconnect(){this.close(),this.#m()}onMessage(t){return this.#f.addCallback(t)}onConnect(t){return this.#h.addCallback(t)}onDisconnect(t){return this.#p.addCallback(t)}close(){this.#y(),this.#c&&(this.#c=!1,this.#p.runCallbacks(!1))}#m(){this.#y(),this.#i=new WebSocket(this.#o),this.#i.binaryType="arraybuffer",this.#i.onerror=()=>(0,N.SJ)("WebSocket error event",this.#o),this.#i.onopen=this.#g,this.#i.onclose=this.#v,this.#i.onmessage=this.#A,this.#l=(0,M.Gf)(i.cSq,(()=>this.#v("openTimeout")))}#y(){var t;null===(t=this.#l)||void 0===t||t.call(this),this.#i&&(this.#i.onerror=null,this.#i.onopen=null,this.#i.onclose=null,this.#i.onmessage=null,this.#i.close(),this.#i=void 0)}#w(t){if(!this.#i)throw new Error("No active socket");this.#i.send(JSON.stringify(t))}#g=()=>{var t;for((0,N.MD)("WebSocket opened",this.#o),null===(t=this.#l)||void 0===t||t.call(this),this.#d=0;this.#u.length;)this.#w(this.#u.shift());this.#c||(this.#c=!0,this.#h.runCallbacks())};#v=t=>{"openTimeout"===t?(0,N.SJ)("WebSocket open timeout"):(0,N.SJ)("WebSocket closed unexpectedly",t.code,t.reason,t.wasClean),this.#y(),this.#d++;const e=Math.min(500*this.#d,5e3);if(this.#l=(0,M.Gf)(e,(()=>this.#m())),this.#c){if("openTimeout"===t)throw new Error("Unexpected timeout event in an open socket");this.#c=!1,this.#p.runCallbacks(!0)}};#A=t=>{let{data:e}=t;this.#f.runCallbacks(e instanceof ArrayBuffer?e:JSON.parse(e))}}const _r=20*gr,Rr=5*gr,xr={};class Nr{#b;#i;#k={};#S=[];#E=new Set;#I=0;#D;#B;constructor(t){this.#b=t}watchWallets(t){let{onNewActivities:e,onConnect:n,onDisconnect:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.#I++,a={id:r,addresses:t,isConnected:!1,onNewActivities:e,onConnect:n,onDisconnect:s,destroy:this.#C.bind(this,r)};return this.#S.push(a),this.#T(),a}#C(t){const e=this.#S.findIndex((e=>e.id===t));e>=0&&(this.#S.splice(e,1),this.#T())}#T=(0,M.nF)((()=>{var t;this.#_()?(this.#i??=this.#R(),this.#i.isConnected&&this.#x()):(null===(t=this.#i)||void 0===t||t.close(),this.#i=void 0)}),10,!1);#R(){const t=function(t){const e=new URL("testnet"===t?i.pyR:i._J8);return e.protocol="wss:",e.pathname="/api/streaming/v1/ws",un(e),e}(this.#b),e=new Tr(t);return e.onMessage(this.#A),e.onConnect(this.#N),e.onDisconnect(this.#P),e}#A=t=>{var e;null===(e=this.#B)||void 0===e||e.call(this),"status"in t&&"subscribed"===t.status&&this.#F(t),"type"in t&&("trace_invalidated"===t.type&&(t={...t,type:"pending_actions",actions:[],address_book:{},metadata:{}}),"actions"!==t.type&&"pending_actions"!==t.type||this.#U(t))};#N=()=>{var t;null===(t=this.#i)||void 0===t||t.send({operation:"configure",include_address_book:!0,include_metadata:!0}),this.#x(),this.#O()};#P=()=>{var t;this.#E.clear(),null===(t=this.#D)||void 0===t||t.call(this);for(const t of this.#S)t.isConnected&&(t.isConnected=!1,t.onDisconnect&&(0,xn.A)(t.onDisconnect))};#F(t){for(const e of this.#S)t.id&&Number(t.id)<e.id||e.isConnected||(e.isConnected=!0,e.onConnect&&(0,xn.A)(e.onConnect))}#U=(0,M.SB)((async t=>{const e="pending_actions"===t.type,n=t.trace_external_hash_norm,s=await async function(t,e,n){const s=function(t,e){const n={};for(const r of t)for(const t of r.accounts){var s;const a=(null===(s=e[t])||void 0===s?void 0:s.user_friendly)??t;n[a]??=[],n[a].push(r)}return n}(e.actions,e.address_book),r={},a=await An();for(const[o,i]of Object.entries(s))n.has(o)&&(r[o]=Ls(t,o,i,e.address_book,e.metadata,a,"pending_actions"===e.type));return r}(this.#b,t,this.#M(!0)),r=this.#W(n,Object.keys(s),e);for(const t of this.#S)if(Fr(t))for(const a of t.addresses)r.has(a)&&(0,xn.A)((()=>t.onNewActivities({address:a,messageHashNormalized:n,arePending:e,activities:s[a]??[]})))}));#x(){const t=String(this.#I++),e=this.#E,n=this.#M(),s=rt(e,n),r=rt(n,e);s.length&&this.#i.send({operation:"unsubscribe",addresses:s}),r.length&&this.#i.send({operation:"subscribe",id:t,addresses:r,types:["actions","pending_actions"]}),this.#E=n}#_(){return this.#S.some((t=>t.addresses.length))}#M(t){const e=new Set;for(const n of this.#S)if(!t||Fr(n))for(const t of n.addresses)e.add(t);return e}#O(){var t;null===(t=this.#D)||void 0===t||t.call(this);const e=setInterval((()=>{var t,e;null===(t=this.#i)||void 0===t||t.send({operation:"ping"}),null===(e=this.#B)||void 0===e||e.call(this),this.#B=(0,M.Gf)(Rr,(()=>{var t;null===(t=this.#i)||void 0===t||t.reconnect()}))}),_r);this.#D=()=>clearInterval(e)}#W(t,e,n){const s=this.#k[t]??[],r=[],a=new Set;for(const t of s)a.add(t);for(const t of e)a.add(t),n&&r.push(t);return r.length?this.#k[t]=r:delete this.#k[t],a}}function Pr(t){return!t.arePending||!t.activities.length}function Fr(t){return t.isConnected&&!!t.onNewActivities}function Ur(t,e){const n={},s=s=>{n[s]??={},n[s].cancelReport??=(0,M.Gf)(t,(()=>{delete n[s].cancelReport;const{toReport:t}=n[s];t&&e([t])}))};return t=>{const r=t.messageHashNormalized;var a,o;Pr(t)?(null===(a=n[r])||void 0===a||null===(o=a.cancelReport)||void 0===o||o.call(a),delete n[r],e([t])):n[r]?(n[r].toReport=t,s(r)):(e([t]),s(r))}}const Or={focused:gr,notFocused:3*gr},Mr=3*gr,Wr={focused:1.1*gr,notFocused:10*gr},Lr={focused:vr,notFocused:2*vr};class Kr{#b;#L;#K;#H=function(){let t=[];const e=new Set;function n(t){for(const n of t)void 0!==n&&e.add(n);!function(){for(const t of e){if(e.size<=100)break;e.delete(t)}}()}return{get all(){return t},update:function(s,r,a){n(st(s,"externalMsgHashNorm")),a&&n(st(a.filter(Pr),"messageHashNormalized")),r?t=r:a&&(t=function(t,e){if(!e.length)return t;const n=new Set(st(e,"messageHashNormalized"));return[...t.filter((t=>!n.has(t.externalMsgHashNorm))),...e.flatMap((t=>t.arePending?t.activities:[]))].sort(En)}(t,a)),t=t.filter((t=>{let{externalMsgHashNorm:n}=t;return!(n&&e.has(n))}))}}}();#j;#q;#z=ur();#V=ur();#J=!1;#$=[];#n=!1;constructor(t,e,n,s){this.#b=t,this.#L=e,this.#K=n,this.#j=function(t){return xr[t]??=new Nr(t),xr[t]}(t).watchWallets([e],{onConnect:this.#N,onDisconnect:this.#P,onNewActivities:Ur(250,this.#G)}),this.#J=this.#j.isConnected,this.#q=new Cr(this.#j.isConnected,{pollOnStart:s,minPollDelay:Or,pollingStartDelay:Mr,pollingPeriod:Wr,forcedPollingPeriod:Lr,poll:this.#a})}onUpdate(t){return this.#z.addCallback(t)}onLoadingChange(t){return this.#V.addCallback(t)}destroy(){this.#n=!0,this.#j.destroy(),this.#q.destroy()}#N=()=>{this.#J=!0,this.#q.onSocketConnect()};#P=()=>{this.#J=!1,this.#q.onSocketDisconnect()};#G=t=>{if(this.#n)return;const e=t.filter((t=>t.arePending)),n=t.filter((t=>!t.arePending)).flatMap((t=>t.activities)).sort(En),s=this.#J?[]:n,r=this.#J?n:[];this.#$.unshift(...r),this.#Q(s,void 0,e)};#a=async()=>{try{this.#V.runCallbacks(!0);const[t,e]=await Promise.all([Hr(this.#b,this.#L),this.#Z()]);if(this.#n)return;this.#Q(function(t,e){var n;const s=(null===(n=t[0])||void 0===n?void 0:n.timestamp)??-1/0,r=[];for(const t of e){if(t.timestamp<=s)break;r.push(t)}return r.push(...t),r}(e,this.#$.splice(0)),t),this.#J=!1}finally{this.#n||this.#V.runCallbacks(!1)}};async#Z(){for(;!this.#n;)try{return await Ws({network:this.#b,filter:{address:this.#L},walletAddress:this.#L,fromTimestamp:this.#K,limit:br})}catch(t){if((0,N.SJ)("loadNewConfirmedActivities",t),this.#n||!this.#J)break;await mr(...Br(Or))}return[]}#Q(t,e,n){(t.length||e||null!=n&&n.length)&&(t.length&&(this.#K=t[0].timestamp),this.#H.update(t,e,n),this.#z.runCallbacks(t,this.#H.all))}}async function Hr(t,e){try{return await async function(t,e){const{actions:n,address_book:s,metadata:r={}}=await os(t,"/pendingActions",{account:e});return Ls(t,e,n,s,r,await An(),!0)}(t,e)}catch(t){return void(0,N.SJ)("loadPendingActivities",t)}}async function jr(t){const{network:e,address:n,limit:s,toTimestamp:r,fromTimestamp:a,shouldIncludeFrom:o,shouldIncludeTo:i}=t,c=await os(e,"/transactions",{account:n,limit:s,start_utime:a&&Rn(a)+(o?0:1),end_utime:r&&Rn(r)-(i?0:1),sort:"desc"}),{transactions:d,address_book:l}=c;return d.length?d.map((t=>qr(e,t,l))).flat():[]}function qr(t,e,n){const{now:s,hash:r,total_fees:a,description:{compute_ph:{exit_code:o}}}=e,c=1e3*s,d=!!e.in_msg.source&&!e.out_msgs.length,l=e.in_msg.hash,u=d?[e.in_msg]:e.out_msgs;if(!u.length)return[];const f=BigInt(a)/BigInt(u.length),h=[];return u.forEach(((e,s)=>{const{source:a,destination:p,value:m,fwd_fee:w,opcode:y,hash:g,bounced:v}=e;if(!p)return;const A=n[a].user_friendly,b=n[p].user_friendly,k=Vt(d?a:p,!0,t),S=f+BigInt(w??0),E=X({txId:u.length>1?Bn(r,s):Bn(r),timestamp:c,isIncoming:d,fromAddress:A,toAddress:b,amount:d?BigInt(m):-BigInt(m),slug:i.Tu9.slug,fee:S,externalMsgHash:d?void 0:l,normalizedAddress:k,shouldHide:!!o||void 0,hash:r,opCode:Number(y)||void 0,msgHash:g,type:v?"bounced":void 0});h.push(E)})),h}async function zr(t,e,n){let s,r;if(void 0!==wt(e)){const r=await async function(t,e){try{const n=wt(e);if(!n)return;const s=await(0,Je.GK)(Lt(t),n.zone.resolver,n.base,Nt.kJ.Wallet);if(!(s instanceof at.Address))return;return Vt(s,void 0,t)}catch(t){var n;if(null===(n=t.message)||void 0===n||!n.includes("exit_code"))throw t;return}}(t,e);if(!r)return"dnsNotResolved";if(s=e,e=r,!n){const n=await async function(t,e){const n=tt(e,es);return(await Promise.all(n.map((e=>os(t,"/addressBook",{address:e}))))).reduce(((t,e)=>Object.assign(t,e)),{})}(t,[e]);e=n[e].user_friendly}}try{r=Vr(e)}catch{return"invalidAddress"}const a=bn(r);return a?{address:e,...a,name:s??a.name}:{address:e,name:s}}function Vr(t,e){return Vt(t,!0,e)}var Jr=n(48287).Buffer;const $r=(0,yt.A)((async(t,e)=>(await Xr(t,e)).isInitialized)),Gr=(0,yt.A)((async(t,e)=>{const{isInitialized:n,version:s}=await Xr(t,e);return n?!s:void 0}),(t=>void 0!==t));function Qr(t,e,n){return Vt(Zr(e,n).address,!1,t)}function Zr(t,e){"string"==typeof t&&(t=Bt(t));const n=Wt[e];if(!n)throw new Error(`Unsupported wallet contract version "${e}"`);return n.create({publicKey:Jr.from(t),workchain:Nt.Zm})}async function Xr(t,e){const n="string"==typeof e?e:Vt(e.address,void 0,t);return(await rs(t,[n]))[n]}async function Yr(t,e){const n=await Lt(t).getAddressInfo(e),{code:s,state:r}=n,a=Jr.from(await It(Tt(s))).toString("hex"),o=Object.values(Nt.v4).find((t=>t.hash===a)),i=s&&at.Cell.fromBase64(s).hash().toString("hex");return{isInitialized:"active"===r,isWallet:"active"===r?(null==o?void 0:o.type)===Nt.h$.Wallet:void 0,isSwapAllowed:null==o?void 0:o.isSwapAllowed,contractInfo:o,codeHash:i}}async function ta(t){const{network:e}=U(t),{address:n}=await Ie(t);return ea(e,n)}async function ea(t,e){return(await Xr(t,e)).balance}async function na(t,e){const{seqno:n}=await Xr(t,e);return n||0}async function sa(t,e){const n=await ra(t,e),s=n.filter((t=>{let{version:e}=t;return e===i.RoE}))[0];if(s.lastTxId)return s;const r=n.reduce(((t,e)=>e.balance>((null==t?void 0:t.balance)??0n)?e:t),void 0);if(r)return r;const a=function(t,e){let n=t.length;for(;n--;)if(e(t[n]))return t[n]}(n,(t=>{let{lastTxId:e}=t;return!!e}));if(a)return a;const o=n.find((t=>{let{version:e}=t;return"v4R2"===e}));return(await hs(t,o.address)).length>0?o:s}async function ra(t,e){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nt.ov).map((n=>{const s=Zr(e,n);return{wallet:s,address:Vt(s.address,!1,t),version:n}})),s=await rs(t,st(n,"address"));return n.map((t=>({...s[t.address]??{balance:0n,isInitialized:!1},...t})))}function aa(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nt.ov).map((n=>{const s=Zr(e,n);return{wallet:s,address:Vt(s.address,!1,t),version:n}}))}async function oa(t,e){const n=await ca(t,e);return(0,at.beginCell)().storeWritable((0,at.storeStateInit)(n.init)).endCell()}function ia(t,e,n){return n=Vt(n,!1,t),aa(t,e).find((t=>t.address===n))}async function ca(t,e){const{publicKey:n,version:s}=e??await Ie(t);if(!n)throw new Error("Public key is missing");return Zr(n,s)}function da(){return W.generateMnemonic()}function la(t){return W.validateMnemonic(t)}function ua(t){return H().sign.keyPair.fromSeed(Bt(t))}async function fa(t,e,n){try{const{secretKey:s}=await ha(t,e,n)||{};return s}catch(t){return void console.error(t)}}async function ha(t,e,n){try{n=n??await Ce(t);const s=await ze(t,e,n);if(!s)return;return O(s)?ua(s[0]):"bip39"===n.type?va(s):await W.mnemonicToKeyPair(s)}catch(t){return void(0,N.SJ)("fetchKeyPair",t)}}async function pa(t,e,n){const s=await fa(t,e);if(s)return Dt(H().sign.detached(Bt(n),s))}function ma(t,e,n){const{publicKey:s}=va(e);return ga(s,t,n)}async function wa(t,e,n){const{publicKey:s}=await W.mnemonicToKeyPair(t);return ga(s,e,n)}function ya(t,e,n){const{publicKey:s}=ua(t);return ga(s,e,n)}async function ga(t,e,n){let s,r;n?s=Zr(t,n):({wallet:s,version:n,lastTxId:r}=await sa(e,t));const a=Vt(s.address,!1,e);return{type:"ton",publicKey:Dt(t),address:a,version:n,index:0,lastTxId:r}}function va(t){const e=L.kw(t.join(" ")),{key:n}=$(Nt.W2,e.toString("hex"));return H().sign.keyPair.fromSeed(n)}function Aa(t,e,n){if(!e.publicKey)throw new Error("The wallet has no public key");return{type:"ton",address:Qr(t,Bt(e.publicKey),n),publicKey:e.publicKey,version:n,index:e.index}}async function ba(t,e){const n=await zr(t,e,!0);if("dnsNotResolved"===n)return{error:F.Nu.DomainNotResolved};if("invalidAddress"===n)return{error:F.Nu.InvalidAddress};const s=n.address,[r,a]=await Promise.all([Xr(t,s),jt(t,s)]);return{title:n.name,wallet:X({type:"ton",publicKey:a?Dt(a):void 0,address:r.address,version:(null==r?void 0:r.version)??i.RoE,index:0,isInitialized:(null==r?void 0:r.isInitialized)??!1})}}function ka(t){return i.zll[t]}function Sa(t){return"stars-fee"===t.status?0n:t.amount??0n}Object.fromEntries(Object.entries(i.zll).map((t=>{let[e,{nativeToken:n}]=t;return[n.slug,e]})));var Ea=n(87963),Ia=n.n(Ea),Da=n(52598),Ba=n(48287).Buffer;function Ca(t){if(t.length<48)throw new Error;const e=t.slice(0,32),n=t.slice(32,48);return new(Ia().ModeOfOperation.cbc)(e,n)}function Ta(t,e){return async function(t,e){const n={name:"HMAC",hash:"SHA-512"},s=await crypto.subtle.importKey("raw",t,n,!1,["sign"]),r=await crypto.subtle.sign(n,s,e),a=new Uint8Array(r);if(64!==a.length)throw new Error;return a}(t,e)}async function _a(t,e,n,s,r){if(!t||!t.length)throw new Error("empty comment");64===s.length&&(s=s.slice(0,32));const a=(new TextEncoder).encode(t),o=(new TextEncoder).encode(Vt(r,!0)),i=await async function(t,e,n,s,r){const a=await(0,Da.getSharedSecret)(s,n),o=await async function(t,e,n){const s=function(t){const e=(31+t&-16)-t,n=crypto.getRandomValues(new Uint8Array(e));if(n[0]=e,(e+t)%16!=0)throw new Error;return n}(t.length),r=new Uint8Array(s.length+t.length);return r.set(s,0),r.set(t,s.length),async function(t,e,n){if(t.length%16!=0)throw new Error;const s=(await Ta(n,t)).slice(0,16),r=new Uint8Array(t.length+16);r.set(s,0);const a=Ca(await Ta(e,s)).encrypt(t);return r.set(a,16),r}(r,e,n)}(t,a,r),i=new Uint8Array(e.length+o.length);for(let t=0;t<e.length;t++)i[t]=n[t]^e[t];return i.set(o,e.length),i}(a,e,n,s,o),c=new Uint8Array(i.length+4),d=Ba.alloc(4);return d.writeUInt32BE(Nt.$G.Encrypted),c.set(d,0),c.set(i,4),c}async function Ra(t,e,n,s){64===n.length&&(n=n.slice(0,32));const r=(new TextEncoder).encode(Vt(s,!0)),a=await async function(t,e,n,s){if(t.length<e.length)throw new Error("Failed to decrypt: data is too small");const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[n]^e[n];const a=await(0,Da.getSharedSecret)(n,r);return await async function(t,e,n){if(t.length<16)throw new Error("Failed to decrypt: data is too small");if(t.length%16!=0)throw new Error("Failed to decrypt: data size is not divisible by 16");const s=t.slice(0,16),r=t.slice(16),a=await Ta(e,s),o=await async function(t,e,n,s){const r=Ca(t).decrypt(n),a=(await Ta(s,r)).slice(0,16);if(e.join(",")!==a.join(","))throw new Error("Failed to decrypt: hash mismatch");const o=r[0];if(o>r.length||o<16)throw new Error("Failed to decrypt: invalid prefix size");return r.slice(o)}(a,s,r,n);return o}(t.slice(e.length),a,s)}(t,e,n,r);return(new TextDecoder).decode(a)}const xa="/diesel",Na="/diesel";async function Pa(t,e,n,s){const{address:r,init:a}=e;let o;a&&!await t.isContractDeployed(r)&&(o=a);const i=(0,at.external)({to:r,init:o?{code:o.code,data:o.data}:void 0,body:n}),c=(0,at.beginCell)().store((0,at.storeMessage)(i)).endCell(),d="w5"===s,l=c.hash().toString("base64"),u=function(t){return(0,at.beginCell)().storeUint(2,2).storeUint(0,2).storeAddress(t.info.dest).storeUint(0,4).storeBit(!1).storeBit(!0).storeRef(t.body).endCell().hash().toString("base64")}(i),f=n.hash().toString("base64"),h=c.toBoc().toString("base64");let p;if(d){const t=await function(t){return cn(`${Na}/w5/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(h);p=t.paymentLink}else if("diesel"===s){const t=await function(t){return cn(`${xa}/sendBoc`,{boc:t,isAddition:!0},{shouldRetry:!0})}(h);p=t.paymentLink}else await t.sendFile(h);return{boc:h,msgHash:d?f:l,msgHashNormalized:u,paymentLink:p}}const Fa={},Ua={};async function Oa(t,e){const n=`${t}:${e}`,s=Ua[n],r=ce(),a=new rn.A;return Ua[n]=a,Fa[r]=a,s&&await s.promise,{id:r,pendingTransfer:a}}function Ma(t){return Fa[t]}var Wa=n(39989);async function La(t,e,n,s){const{trace:r,addressBook:a}=await async function(t){const{network:e,msgHashNormalized:n,isActionPending:s}=t,r=await os(e,s?"/pendingTraces":"/traces",{[s?"ext_msg_hash":"msg_hash"]:n,include_actions:!0});return{trace:r.traces[0],addressBook:r.address_book,metadata:r.metadata}}({network:t,msgHashNormalized:n,isActionPending:s});return r&&Ka({network:t,walletAddress:e,actions:r.actions,traceDetail:r.trace,addressBook:a,transactions:r.transactions})}function Ka(t){const{network:e,walletAddress:n,actions:s,traceDetail:r,addressBook:a,transactions:o}=t,i=Object.values(o).map((t=>qr(e,t,a))).flat(),c=i.reduce(((t,e)=>{const n=e.hash;return t[n]?t[n].push(e):t[n]=[e],t}),{});let d=0n,l=0n,u=0n;const f=[];let h=!1;return function t(e,s){const r=e.tx_hash,a=c[r]||[];if(h||(h=a.some((t=>{let{fromAddress:e,isIncoming:s}=t;return e===n&&!s})),h))for(const[o,i]of a.entries()){const{fromAddress:a,toAddress:c,amount:h,isIncoming:p,fee:m,msgHash:w,type:y}=i,g=s??o;g in f?f[g].hashes.add(r):f.push({hashes:new Set,sent:0n,received:0n,networkFee:0n}),a!==n||p?c===n&&p&&"bounced"!==y&&(f[g].received+=B(h),l+=B(h)):(f[g].sent+=B(h),f[g].networkFee=m,d+=B(h),u+=m);const v=e.children.find((t=>{let{in_msg_hash:e}=t;return e===w}));v&&t(v,g)}else e.children.forEach(t)}(r),{actions:s,traceDetail:r,addressBook:a,byTransactionIndex:f,totalSent:d,totalReceived:l,totalNetworkFee:u}}const Ha=128,ja=5,qa=gr,za=(0,yt.A)((async(t,e)=>{const n=await jr({network:t,address:e,limit:1});return Boolean(n.length)}));async function Va(t,e,n,s,r,a){const{network:o}=U(t),{address:c}=await Ie(t);return e?(await Ws({network:o,filter:{address:e===i.Tu9.slug?c:await Kt(o,c,Zn(e).tokenAddress)},walletAddress:c,limit:r??Ha,fromTimestamp:s,toTimestamp:n,shouldIncludeFrom:a})).filter((t=>Cn(t).includes(e))):Ws({network:o,filter:{address:c},walletAddress:c,limit:r??Ha,fromTimestamp:s,toTimestamp:n,shouldIncludeFrom:a})}async function Ja(t,e){const{network:n}=U(t),{address:s}=await Ie(t);let r;for(let t=0;t<ja&&!r;t++){t>0&&await(0,M.v7)(qa);const a=await La(n,s,e.externalMsgHashNorm,Tn(e));a&&(r=$a(e,a))}return r||(0,N.SJ)("Trace unavailable for activity",e.id),r}function $a(t,e){const{actionId:n}=dr(t.id),{actions:s,byTransactionIndex:r}=e,a=s.find((t=>{let{action_id:e}=t;return e===n}));if(!a)return;const o=new Set(a.transactions),{sent:i,received:c,networkFee:d}=r.find((t=>function(t,e){const n=new Set;for(const s of e)t.has(s)&&n.add(s);return n}(t.hashes,o).size));let l;return l="swap"===t.kind?function(t){const{action:e,networkFee:n,received:s,sent:r,parsedTrace:{actions:a}}=t;let{activity:o}=t;const{details:i}=e;let c=r,d=s;i.asset_in?i.asset_out||(d-=BigInt(i.dex_outgoing_transfer.amount)):c-=BigInt(i.dex_incoming_transfer.amount);const l=n+c-d;let u;if(o={...o,networkFee:k(l)},i.asset_in){const t=a.find((t=>"jetton_transfer"===t.type&&t.details.forward_payload===Nt.SQ));t&&(u=BigInt(t.details.amount))}else{const t=a.find((t=>"call_contract"===t.type&&Number(t.details.opcode)===Nt.$G.OurFee));t&&(u=BigInt(t.details.value))}if(u){const t=Zn(o.from);o.ourFee=k(u,null==t?void 0:t.decimals)}return delete o.shouldLoadDetails,{activity:o,sentForFee:c,excess:d}}({parsedTrace:e,activity:t,action:a,sent:i,received:c,networkFee:d}):function(t){const{action:e,received:n,sent:s,parsedTrace:{addressBook:r,totalSent:a,totalReceived:o,totalNetworkFee:i}}=t;let{activity:c,networkFee:d}=t,l=s,u=n;switch(e.type){case"ton_transfer":case"call_contract":l-=BigInt(e.details.value);break;case"nft_transfer":e.details.is_purchase&&(l-=BigInt(e.details.price));break;case"stake_deposit":l-=BigInt(e.details.amount);break;case"stake_withdrawal":u-=BigInt(e.details.amount);break;case"dex_deposit_liquidity":{const t=BigInt(nr(e,{addressBook:r,network:"mainnet",walletAddress:"",metadata:{},nftSuperCollectionsByCollectionAddress:{}}).length);d=i/t,l=a/t,u=o/t,e.details.asset_1?e.details.asset_2||(l-=BigInt(e.details.amount_2??0n)/t):l-=BigInt(e.details.amount_1??0n)/t;break}case"dex_withdraw_liquidity":e.details.asset_1?e.details.asset_2||(u-=BigInt(e.details.amount_2)):u-=BigInt(e.details.amount_1),l/=2n,u/=2n}const f=d+l-u;return c={...c,fee:f},delete c.shouldLoadDetails,{activity:c,sentForFee:l,excess:u}}({parsedTrace:e,activity:t,action:a,sent:i,received:c,networkFee:d}),(0,N.MD)("Calculation of fee for action",{actionId:a.action_id,externalMsgHashNorm:t.externalMsgHashNorm,isPending:Tn(t),networkFee:k(d),realFee:k(Ga(l.activity)),sentForFee:k(l.sentForFee),excess:k(l.excess),details:a.details}),l}function Ga(t){return"swap"===t.kind?b(t.networkFee,i.Tu9.decimals):t.fee}async function Qa(t,e,n,s){const r=function(t,e,n){const s=(0,at.external)({to:t.address,init:n?void 0:{code:t.init.code,data:t.init.data},body:e});return(0,at.beginCell)().store((0,at.storeMessage)(s)).endCell().toBoc().toString("base64")}(e,n,s),a=await async function(t,e){const n="testnet"===t?i.pyR:i._J8;return(await(0,an.J5)(`${n}/api/emulate/v1/emulateTrace`,{method:"POST",headers:{...is(t),"Content-Type":"application/json"},body:JSON.stringify({boc:e,ignore_chksig:!0,include_code_data:!1,with_actions:!0,include_address_book:!0,include_metadata:!0})})).json()}(t,r);return function(t,e,n,s){const r=Ka({network:t,walletAddress:e,actions:n.actions,traceDetail:n.trace,addressBook:n.address_book,transactions:n.transactions}),a=Ls(t,e,n.actions,n.address_book,n.metadata,s),o=[];let c=0n,d=0n;for(let t of a)if(!(t.shouldHide||"transaction"===t.kind&&t.fromAddress!==e&&t.toAddress!==e)){if(t.shouldLoadDetails){const e=$a(t,r);e?(t=e.activity,d+=e.excess):(0,N.SJ)("Unparsable trace for emulated activity",t.id)}o.push(t),c+=Ga(t)}return d&&function(t,e,n){const s=e.findIndex((t=>"transaction"===t.kind&&"excess"===t.type));if(-1!==s){const t=e.splice(s,1)[0];e.push({...t,amount:t.amount+n})}else e.push({id:kr,txId:kr,timestamp:e[e.length-1].timestamp,kind:"transaction",amount:n,slug:i.Tu9.slug,normalizedAddress:i.pV9,fromAddress:i.pV9,toAddress:t,isIncoming:!0,fee:0n,type:"excess"})}(e,o,d),0===a.length?function(t){const e=Object.values(t.transactions).reduce(((t,e)=>{const{total_fees:n}=e;return t+BigInt(n)}),0n);return{networkFee:e,received:0n,byTransactionIndex:[],activities:[],realFee:e}}(n):{networkFee:r.totalNetworkFee,received:r.totalReceived,byTransactionIndex:r.byTransactionIndex,activities:o,realFee:c}}(t,Vt(e.address,!1,t),a,await An())}var Za=n(48287).Buffer;async function Xa(t,e,n,s){const{toAddress:r,payload:a}=s,o=Xn(n);if("string"!=typeof a||null==o||!o.customPayloadApiUrl)return s;const i=await As(t,r,a);if("tokens:transfer"!==i.type)throw new Error("Invalid payload");const{mintlessTokenBalance:c,isMintlessClaimed:d,stateInit:l,customPayload:u}=await no({network:t,token:o,fromAddress:e,tokenWalletAddress:s.toAddress});if(!c||d)return s;const f=$t({toAddress:i.destination,queryId:i.queryId,tokenAmount:i.amount,forwardAmount:i.forwardAmount,forwardPayload:at.Cell.fromBase64(i.forwardPayload),responseAddress:i.responseDestination,customPayload:at.Cell.fromBase64(u)});return{...s,stateInit:l?at.Cell.fromBase64(l):void 0,payload:f,isBase64Payload:!1}}async function Ya(t){const{network:e,tokenAddress:n,fromAddress:s,toAddress:r,amount:a,shouldSkipMintless:o,forwardAmount:i=Nt.tF}=t;let{payload:c}=t;const d=await Kt(e,s,n),l=Xn(n),{isTokenWalletDeployed:u=!!await Gr(e,d),isMintlessClaimed:f,mintlessTokenBalance:h,customPayload:p,stateInit:m}=await no({network:e,fromAddress:s,token:l,tokenWalletAddress:d,shouldSkipMintless:o});if(u&&n!==await Ht(e,d))throw new Error("Invalid contract");c=$t({tokenAmount:a,toAddress:r,forwardAmount:i,forwardPayload:c,responseAddress:s,customPayload:p?at.Cell.fromBase64(p):void 0});let{amount:w,realAmount:y}=ao(l,Boolean(h)&&!f);return i>Nt.tF&&(w+=i),{amount:w,realAmount:y,toAddress:d,payload:c,stateInit:m?at.Cell.fromBase64(m):void 0,mintlessTokenBalance:h,isTokenWalletDeployed:u}}async function to(t,e,n){const s=await Kt(t,e,n),r=Xn(n),{isTokenWalletDeployed:a=!!await Gr(t,s),mintlessTokenBalance:o}=await no({network:t,fromAddress:e,token:r,tokenWalletAddress:s});return eo(t,s,a,o)}async function eo(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n,r=0n;return n&&(r+=await function(t,e){return Lt(t).open(new St.K(at.Address.parse(e))).getJettonBalance()}(t,e)),s&&(r+=s),r}async function no(t){const{network:e,fromAddress:n,token:s,tokenWalletAddress:r,shouldSkipMintless:a}=t;let o,i,c,d,l;if(s.customPayloadApiUrl&&!a&&(o=!!await Gr(e,r),d=o&&await async function(t,e){return(await Lt(t).runMethod(at.Address.parse(e),"is_claimed")).stack.readBoolean()}(e,r),!d)){const t=await async function(t,e){const n=Jt(e);return await(0,an.x3)(`${t}/wallet/${n}`).catch((()=>{}))}(s.customPayloadApiUrl,n),e=!t||Date.now()>new Date(1e3*Number(t.compressed_info.expired_at)).getTime();t&&!e&&(i=t.custom_payload,l=BigInt(t.compressed_info.amount),o||(c=t.state_init))}return{isTokenWalletDeployed:o,isMintlessClaimed:d,mintlessTokenBalance:l,customPayload:i,stateInit:c}}async function so(t,e){return ro(e,await async function(t,e){const{content:n}=await function(t,e){return Lt(t).open(new vt.Sr(at.Address.parse(e))).getJettonData()}(t,e);let s;const r=n.asSlice();if(r.loadUint(8)===ws){const t=Ss(r).toString("utf-8");s=await vs(t)}else s=await async function(t){const e=t.loadDict(Mn.Dictionary.Keys.Buffer(32),ys),n={};for(const[t,r]of Object.entries(gs)){var s;const a=ms.from(await It(ms.from(t,"ascii"))),o=null===(s=e.get(a))||void 0===s?void 0:s.toString(r);o&&(n[t]=o)}return n}(r),s.uri&&(s={...await vs(s.uri),...s});return s}(t,e))}function ro(t,e){const{name:n,symbol:s,image:r,image_data:a,decimals:o,custom_payload_api_uri:i}=e;return{slug:ts("ton",t),name:n,symbol:s,decimals:void 0===o?Nt.fI:Number(o),chain:"ton",tokenAddress:t,image:r&&(0,an.fU)(r)||a&&(c=a,(d=c,Et.from(d,"base64").toString("utf-8")).includes("<svg")?`data:image/svg+xml;base64,${c}`:`data:image/png;base64,${c}`)||void 0,customPayloadApiUrl:i};var c,d}function ao(t,e){let n=0n,s=0n;return t.slug===i.rUK?(n+=Nt.GV,s+=Nt.F0):t.isTiny?(n+=Nt.GV,s+=Nt.xB):(n+=Nt.LV,s+=Nt.qd),e&&(n+=Nt.CH,s+=Nt.CH),{amount:n,realAmount:s}}async function oo(t,e,n){const s=await async function(t,e){return(await hs(t,e)).map((e=>function(t,e){if(e.jetton)try{const{balance:n,jetton:s,wallet_address:r}=e,a=ro(Vt(s.address,!0,t),s);return{slug:a.slug,balance:BigInt(n),token:a,jettonWallet:Vt(r.address,void 0,t)}}catch(t){return void(0,N.SJ)("parseTokenBalance",t)}}(t,e))).filter(Boolean)}(t,e),r=s.map((t=>{let{token:e}=t;return{...e,price:0,priceUsd:0,percentChange24h:0}}));return await $n(r,n),await async function(t,e,n){await Vn.promise;const s=Qn().bySlug,r=e.reduce(((t,e)=>{const n=s[e];return n&&"ton"===n.chain&&!n.codeHash&&["LP","STAKED","POOL"].some((t=>n.symbol.toUpperCase().includes(t)))&&t.push(n),t}),[]);if(!r.length)return;const a=G(r,"tokenAddress");try{const e=await async function(t,e){const{accounts:n}=await os(t,"/accountStates",{address:e.join(",")}),s=Object.fromEntries(e.map((t=>[Jt(t),t])));for(const t of n)t.address=s[t.address.toLowerCase()];return G(n,"address")}(t,r.map((t=>t.tokenAddress)));for(const t of Object.keys(e))a[t]&&(a[t].codeHash=Za.from(e[t].code_hash,"base64").toString("hex"));await $n(Object.values(a).filter((t=>t.codeHash)),n)}catch(t){(0,N.SJ)("Failed to fetch contract code hashes for tokens",t)}}(t,r.map((t=>t.slug)),n),Object.fromEntries(s.map((t=>{let{slug:e,balance:n}=t;return[e,n]})))}var io=n(48287).Buffer;const co=vr,lo=gr,uo=100000000n,fo=900,ho={status:"not-available",nativeAmount:0n,remainingFee:0n,realFee:0n};async function po(t){const{accountId:e,amount:n=0n,tokenAddress:s,shouldEncrypt:r,isBase64Data:a,stateInit:o,forwardAmount:i,allowGasless:c}=t;let{toAddress:d,data:l}=t;const{network:u}=U(e);let f={};try{if(f=await mo(u,d),"error"in f)return f;d=f.resolvedAddress;const{isInitialized:t}=await Yr(u,d);if(o&&!a)return{...f,error:F.KL.StateInitWithoutBin};let p;if(o)try{p=at.Cell.fromBase64(o)}catch{return{...f,error:F.KL.InvalidStateInit}}if(f.isBounceable&&!t&&!p)return f.isToAddressNew=!await za(u,d),{...f,error:F.KL.InactiveContract};if(f.resolvedAddress=d,n<0n)return{...f,error:F.KL.InvalidAmount};const m=await ca(e);if("string"==typeof l&&a&&(l=Tt(l)),l&&"string"==typeof l&&r&&!await jt(u,d))return{...f,error:F.KL.WalletNotInitialized};const{address:w,isInitialized:y}=await Ie(e);let g;l&&"string"==typeof l&&!a&&(l=Gt(l));const v=await ea(u,m);let A,b,k;if(s){const t=await Ya({network:u,tokenAddress:s,fromAddress:w,toAddress:d,amount:n,payload:l,forwardAmount:i});({amount:g,toAddress:d,payload:l}=t);const{realAmount:e,isTokenWalletDeployed:r,mintlessTokenBalance:a}=t;b=g,k=e;const o=d;A=await eo(u,o,r,a)}else A=v,g=n,b=0n,k=0n,l instanceof Uint8Array&&(l=r?Xt(l):Qt(l));const S=!s&&v===n,{transaction:E}=await Ao({network:u,wallet:m,toAddress:d,amount:g,payload:l,stateInit:p,isFullBalance:S,shouldEncrypt:r}),{networkFee:I}=xo(await Do(u,m,E,y));let D;if(b+=I,k+=I,f.fee=b,f.realFee=k,f.diesel=ho,s){const t=v>=b;c&&(f.diesel=await Ro({accountId:e,tokenAddress:s,canTransferGasfully:t,toncoinBalance:v,tokenBalance:A})),D="not-available"!==(h=f.diesel).status&&void 0!==h.amount?n+Sa(f.diesel)<=A:t&&n<=A}else D=v>=b+(S?0n:n);return D?f:{...f,error:F.KL.InsufficientBalance}}catch(t){return{...(0,Wa.QS)(t),...f}}var h}async function mo(t,e){const n={},s=await zr(t,e);if("dnsNotResolved"===s)return{...n,error:F.KL.DomainNotResolved};if("invalidAddress"===s)return{...n,error:F.KL.InvalidToAddress};n.addressName=s.name,n.resolvedAddress=s.address,n.isMemoRequired=s.isMemoRequired,n.isScam=s.isScam,e=s.address;const{isUserFriendly:r,isTestOnly:a,isBounceable:o}=te(e);n.isBounceable=o;const i=!/[+=/]/.test(e);return!r||!i||"mainnet"===t&&a?{...n,error:F.KL.InvalidAddressFormat}:n}async function wo(t){const{accountId:e,password:n,amount:s,tokenAddress:r,shouldEncrypt:a,isBase64Data:o,forwardAmount:i}=t;let{stateInit:c}=t,{toAddress:d,data:l}=t;const{network:u}=U(e);try{const t=await Ce(e),{address:f,isInitialized:h}=t.ton,p=await ca(e,t.ton),{publicKey:m,secretKey:w}=await ha(e,n,t);let y,g;"string"==typeof l&&({payload:l,encryptedComment:y}=await go({network:u,toAddress:d,fromAddress:f,data:l,secretKey:w,publicKey:m,shouldEncrypt:a,isBase64Data:o})),r?({amount:g,toAddress:d,payload:l,stateInit:c}=await Ya({network:u,tokenAddress:r,fromAddress:f,toAddress:d,amount:s,payload:l,forwardAmount:i})):(g=s,l instanceof Uint8Array&&(l=a?Xt(l):Qt(l)));const{pendingTransfer:v}=await Oa(u,f),A=await ea(u,p),b=!r&&A===s,{seqno:k,transaction:S}=await Ao({network:u,wallet:p,toAddress:d,amount:g,payload:l,stateInit:c,privateKey:w,isFullBalance:b,shouldEncrypt:a}),{networkFee:E}=await Do(u,p,S,h);if(!(b?A>E:A>=g+E))return{error:F.jf.InsufficientBalance};const I=Lt(u),{msgHash:D,boc:B,msgHashNormalized:C}=await Pa(I,p,S);return Io(u,f,B,k,v),{amount:s,seqno:k,encryptedComment:y,toAddress:d,msgHash:D,msgHashNormalized:C,toncoinAmount:g}}catch(t){return(0,N.SJ)("submitTransfer",t),{error:vo(t)}}}async function yo(t){try{const{toAddress:e,amount:n,accountId:s,password:r,tokenAddress:a,shouldEncrypt:o,dieselAmount:c,isGaslessWithStars:d}=t;let{data:l}=t;const{network:u}=U(s),[{address:f,version:h},p]=await Promise.all([Ie(s),ha(s,r)]),{publicKey:m,secretKey:w}=p;let y;"string"==typeof l&&({payload:l,encryptedComment:y}=await go({network:u,toAddress:e,fromAddress:f,data:l,secretKey:w,publicKey:m,shouldEncrypt:o}));const g=[await Ya({network:u,tokenAddress:a,fromAddress:f,toAddress:e,amount:n,payload:l})];return d||g.push(await Ya({network:u,tokenAddress:a,fromAddress:f,toAddress:i.InW,amount:c,shouldSkipMintless:!0,payload:(new at.Builder).storeUint(Nt.$G.OurFee,32).endCell()})),{...await So({accountId:s,password:r,messages:g,isGasless:!0}),encryptedComment:y,withW5Gasless:"W5"===h}}catch(t){return(0,N.SJ)("submitTransferWithDiesel",t),{error:vo(t)}}}async function go(t){let e,n,{network:s,toAddress:r,data:a,shouldEncrypt:o,publicKey:i,secretKey:c,fromAddress:d,isBase64Data:l}=t;if(a)if(l)e=function(t){try{return at.Cell.fromBase64(t)}catch(e){return(0,N.SJ)("parseBase64",e),Uint8Array.from(Ut.from(t,"base64"))}}(a);else if(o){const t=await jt(s,r);e=await _a(a,i,t,c,d),n=io.from(e.slice(4)).toString("base64")}else e=Gt(a);else e=void 0;return{payload:e,encryptedComment:n}}function vo(t){if(t instanceof Wa.K$){if(t.message.includes("exitcode=35,"))return F.jf.IncorrectDeviceTime;if(400===t.statusCode)return t.message;if(t.displayError)return t.displayError}return F.jf.UnsuccesfulTransfer}async function Ao(t){let{network:e,wallet:n,toAddress:s,amount:r,payload:a,stateInit:o,privateKey:i,isFullBalance:c,expireAt:d,shouldEncrypt:l}=t;const{seqno:u}=await Xr(e,n);i?(0,N.MD)("Signing transactions",{seqno:u,toAddress:s,amount:r}):i=new Uint8Array(64),d||(d=Math.round(Date.now()/1e3)+Nt.kF),a instanceof Uint8Array&&(a=l?Xt(a):Qt(a,0));const f=o?(0,at.loadStateInit)(o.asSlice()):void 0,h=(c?at.SendMode.CARRY_ALL_REMAINING_BALANCE:at.SendMode.PAY_GAS_SEPARATELY)+at.SendMode.IGNORE_ERRORS,p={seqno:u,secretKey:io.from(i),messages:[(0,at.internal)({value:r,to:s,body:a,init:f,bounce:te(s).isBounceable})],sendMode:h,timeout:d};return{seqno:u,transaction:(pt.WalletContractV5R1,n.createTransfer(p))}}async function bo(t){const{network:e}=U(t),{address:n}=await Ie(t);return async function(t,e){const n=await jr({network:t,address:e,limit:1});if(n.length)return n[0].txId}(e,n)}async function ko(t,e,n){let s=0n;const{network:r}=U(t),a=await Ie(t),{isInitialized:o,version:i}=a;try{for(const{toAddress:t,amount:n}of e){if(n<0n)return{error:F.KL.InvalidAmount};const e="mainnet"===r,{isValid:a,isTestOnly:o}=te(t);if(!a||e&&o)return{error:F.KL.InvalidToAddress};s+=n}const{hasInsufficientTokenBalance:c,parsedPayloads:d}=await async function(t,e,n){const s=await Promise.all(n.map((async e=>{let{payload:n,toAddress:s}=e;if(!n)return{tokenResult:void 0,parsedPayload:void 0};try{const e=No({payload:n,isBase64Payload:!0}).toBoc().toString("base64"),r=await As(t,s,e);return"tokens:transfer"===(null==r?void 0:r.type)?{tokenResult:{tokenAddress:r.tokenAddress,amount:r.amount},parsedPayload:r}:{tokenResult:void 0,parsedPayload:r}}catch(t){(0,N.SJ)("isTokenBalanceInsufficient","Error parsing payload",t)}return{tokenResult:void 0,parsedPayload:void 0}}))),r={},a=s.map((t=>null==t?void 0:t.parsedPayload));for(const t of s)if(null!=t&&t.tokenResult){const{tokenAddress:e,amount:n}=t.tokenResult;r[e]||(r[e]=0n),r[e]+=n}const o=Object.keys(r);if(0===o.length)return{hasInsufficientTokenBalance:!1,parsedPayloads:a};const i=await Promise.all(o.map((n=>to(t,e,n))));for(let t=0;t<o.length;t++){const e=r[o[t]];if(i[t]<e)return{hasInsufficientTokenBalance:!0,parsedPayloads:a}}return{hasInsufficientTokenBalance:!1,parsedPayloads:a}}(r,a.address,e),l=await ca(t,a),{balance:u}=await Xr(r,l),{transaction:f}=await Eo({network:r,wallet:l,messages:e,version:i}),h={emulation:xo(await Do(r,l,f,o)),parsedPayloads:d},p=!n&&u<s+h.emulation.networkFee;return c||p?{...h,error:F.KL.InsufficientBalance}:h}catch(t){return(0,Wa.QS)(t)}}async function So(t){let{accountId:e,password:n,messages:s,expireAt:r,isGasless:a}=t;const{network:o}=U(e),i=await Ce(e),{address:c,isInitialized:d,version:l}=i.ton,{pendingTransfer:u}=await Oa(o,c);try{const t=await ca(e,i.ton),f=await fa(e,n,i);let h=0n;s.forEach((t=>{h+=BigInt(t.amount)}));const{balance:p}=await Xr(o,t),m=a?"W5"===l?"w5":"diesel":void 0,w="w5"===m,{seqno:y,transaction:g}=await Eo({network:o,wallet:t,messages:s,version:l,privateKey:f,expireAt:r,withW5Gasless:w});if(!a){const{networkFee:e}=await Do(o,t,g,d);if(p<h+e)return{error:F.jf.InsufficientBalance}}const v=Lt(o),{msgHash:A,boc:b,paymentLink:k,msgHashNormalized:S}=await Pa(v,t,g,m);a?u.resolve():Io(o,c,b,y,u);const E=s.map((t=>"string"!=typeof t.payload&&void 0!==t.payload?Z(t,["payload"]):t));return{seqno:y,amount:h.toString(),messages:E,boc:b,msgHash:A,msgHashNormalized:S,paymentLink:k,withW5Gasless:w}}catch(t){return u.resolve(),(0,N.SJ)("submitMultiTransfer",t),{error:vo(t)}}}async function Eo(t){let{network:e,wallet:n,messages:s,version:r,privateKey:a,expireAt:o,withW5Gasless:i}=t;const{seqno:c}=await Xr(e,n);a?(0,N.MD)("Signing transaction",{seqno:c,messages:s.map((t=>Q(t,["toAddress","amount"])))}):a=new Uint8Array(64),o||(o=Math.round(Date.now()/1e3)+(i?fo:Nt.kF));let d=!1;const l=s.map((t=>{const{amount:e,toAddress:n,stateInit:s,isBase64Payload:r}=t;let{payload:a}=t;a=No({payload:a,isBase64Payload:r});const o=s?(0,at.loadStateInit)(s.asSlice()):void 0;return!d&&a&&(d=!0),(0,at.internal)({value:e,to:n,body:a,bounce:te(n).isBounceable,init:o})}));"W5"===r&&l.reverse();const u={authType:i?"internal":void 0,seqno:c,secretKey:io.from(a),messages:l,sendMode:at.SendMode.PAY_GAS_SEPARATELY+at.SendMode.IGNORE_ERRORS,timeout:o};return{seqno:c,transaction:(pt.WalletContractV5R1,n.createTransfer(u))}}async function Io(t,e,n,s,r){const a=Lt(t),o=Date.now()+co;for(;Date.now()<o;){const[r,o]=await Promise.all([a.sendFile(n).catch((t=>String(t))),Xr(t,e).catch((()=>{}))]);if(null!=r&&r.match(/(exitcode=33|exitcode=133|inbound external message rejected by account)/))break;if(o&&o.seqno>s)break;await(0,M.v7)(lo)}null==r||r.resolve()}async function Do(t,e,n,s){try{return{isFallback:!1,...await Qa(t,e,n,s)}}catch(t){(0,N.SJ)("Failed to emulate a transaction",t)}const{code:r=null,data:a=null}=s?{}:e.init,{source_fees:o}=await Lt(t).estimateExternalMessageFee(e.address,{body:n,initCode:r,initData:a,ignoreSignature:!0});return{isFallback:!0,networkFee:BigInt(o.in_fwd_fee+o.storage_fee+o.gas_fee+o.fwd_fee)}}async function Bo(t,e,n){const{network:s}=U(t),{address:r,publicKey:a,version:o}=await Ie(t),i=Lt(s),c=Zr(a,o),{base64:d,seqno:l}=e,u=n?Ma(n):void 0;try{const{boc:t,msgHashNormalized:e}=await Pa(i,c,at.Cell.fromBase64(d));return Io(s,r,t,l,u),{boc:t,msgHashNormalized:e}}catch(t){throw null==u||u.resolve(),t}}async function Co(t,e){const{network:n}=U(t),{address:s,publicKey:r,version:a}=await Ie(t),o=Lt(n),i=Zr(r,a),c=Nt.PY+e.length;let d,l=0,u=0;const f=[];let h;for(;l<e.length&&u<c;){const{base64:t,seqno:r}=e[l];try{({pendingTransfer:h}=await Oa(n,s));const{boc:e,msgHashNormalized:a}=await Pa(o,i,at.Cell.fromBase64(t));f.push(a),0===l&&(d=e),Io(n,s,e,r,h),l++}catch(t){var p;null===(p=h)||void 0===p||p.resolve(),(0,N.SJ)("sendSignedMessages",t)}u++}return{successNumber:l,firstBoc:d,msgHashesNormalized:f}}async function To(t,e,n,s){const r=await ha(t,s);if(!r)return;const{secretKey:a,publicKey:o}=r;return Ra(io.from(e,"base64"),o,a,n)}function _o(t,e){return Ro({accountId:t,tokenAddress:e,canTransferGasfully:!1})}async function Ro(t){let{accountId:e,tokenAddress:n,canTransferGasfully:s,toncoinBalance:r,tokenBalance:a}=t;const{network:o}=U(e);if("mainnet"!==o)return ho;const c=await Ie(e),d=await ca(e,c),l=Xn(n);if(!l.isGaslessEnabled&&!l.isStarsEnabled)return ho;const{address:u,version:f}=c;r??=await ea(o,d);const h=function(t){const e=!t.isGaslessEnabled&&t.isStarsEnabled;let{amount:n,realAmount:s}=ao(t,!1);return e||(n*=2n,s*=2n),n+=i.dqR,s+=i.dqR,{amount:n,realFee:s,isStars:e}}(l),p=h.amount-r;if(r>=uo||p<=0n)return ho;const m=await function(t,e,n,s,r){return dn("/diesel/estimate",{address:t,tokenAddress:e,toncoinAmount:n,isW5:s,isStars:r})}(u,n,k(p),"W5"===f,h.isStars),w={status:m.status,amount:void 0===m.amount?void 0:b(m.amount,"stars-fee"===m.status?0:l.decimals),nativeAmount:p,remainingFee:r,realFee:h.realFee},y=Sa(w);if(0n===y)return w;a??=await to(o,u,n);const g=a>=y,v=Boolean(m.pendingCreatedAt&&Date.now()-new Date(m.pendingCreatedAt).getTime()<fo*gr);return!s&&g||v?w:ho}function xo(t){return"byTransactionIndex"in(t={...t,networkFee:T(t.networkFee,Nt.FT)})&&(t.byTransactionIndex=t.byTransactionIndex.map((t=>({...t,networkFee:T(t.networkFee,Nt.FT)})))),t}function No(t){let{payload:e,isBase64Payload:n}=t;if(void 0!==e){if(e instanceof at.Cell)return e;if("string"==typeof e)return n?at.Cell.fromBase64(e):Zt(Gt(e));if(e instanceof Uint8Array)return e.length?Zt(e):void 0;throw new TypeError("Unexpected payload type "+typeof e)}}var Po=n(48287).Buffer;async function Fo(t,e,n){const{network:s}=U(t),{address:r}=await Ie(t),a=await An(),o=await async function(t,e,n){const{collection:s,offset:r,limit:a}=n??{};return(await fs(t).accounts.getAccountNftItems(e,{offset:r??0,limit:a??ds,indirect_ownership:!0,collection:s})).nft_items}(s,r,{offset:e,limit:n});return Y(o.map((t=>Is(s,t,a))))}async function Uo(t,e){const{network:n}=U(t),{address:s}=await Ie(t),r=await function(t,e){return fs(t).nft.getNftItemByAddress(e)}(n,e),a=Is(n,r,await An());return s===(null==a?void 0:a.ownerAddress)}async function Oo(t,e){var n;const{network:s}=U(t),{address:r}=await Ie(t),a=await An(),o=await async function(t,e,n){return(await fs(t).accounts.getAccountEvents(e,{limit:ls,start_date:n})).events}(s,r,e);e=(null===(n=o[0])||void 0===n?void 0:n.timestamp)??e,o.reverse();const i=[];for(const e of o)for(const n of e.actions){let e,o,c;const d=!!n.NftPurchase;if(n.NftItemTransfer){const{sender:t,recipient:r,nft:a}=n.NftItemTransfer;if(!t||!r)continue;e=r.address,o=Vt(a,!0,s)}else{if(!n.NftPurchase)continue;{const{buyer:t}=n.NftPurchase;if(e=t.address,c=n.NftPurchase.nft,!c)continue;o=Vt(c.address,!0,s)}}if(at.Address.parse(e).equals(at.Address.parse(r))){if(c||([c]=await ps(s,[o])),c){const e=Is(s,c,a);e&&i.push({type:"nftReceived",accountId:t,nftAddress:o,nft:e})}}else!d&&await Gr(s,e)?i.push({type:"nftPutUpForSale",accountId:t,nftAddress:o}):i.push({type:"nftSent",accountId:t,nftAddress:o,newOwnerAddress:e})}return[e,i]}async function Mo(t){const{accountId:e,nfts:n,comment:s}=t;let{toAddress:r}=t;const{network:a}=U(e),{address:o}=await Ie(e),c=await mo(a,r);if("error"in c)return c;r=c.resolvedAddress;const d=n.slice(0,i.gR8).map((t=>Lo(t,o,r,s))),l=await ko(e,d);if(l.emulation){const t=l.emulation.networkFee;c.fee=Ho(n.length,d.length,t,Nt.uS),c.realFee=Ho(n.length,d.length,t,Nt.nx)}return"error"in l&&(c.error=l.error),c}async function Wo(t){const{accountId:e,password:n,nfts:s,toAddress:r,comment:a}=t,{address:o}=await Ie(e);return So({accountId:e,password:n,messages:s.map((t=>Lo(t,o,r,a)))})}function Lo(t,e,n,s){return{payload:t.collectionAddress!==i.KmP||n!==i.pV9&&!i.WVU.includes(n)?Ko(e,n,s):function(t,e,n){const s=at.Address.parse(e).hash.readUint8()>>4;return Ko(t,i.WVU[s],(new at.Builder).storeUint(1609328194,32).storeUint(n,64).endCell(),i.APY)}(e,t.address,t.index),amount:Nt.uS,toAddress:t.address}}function Ko(t,e,n){let s,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Nt.Wb,a=(new at.Builder).storeUint(Nt.H3.TransferOwnership,32).storeUint(Pt(),64).storeAddress(at.Address.parse(e)).storeAddress(at.Address.parse(t)).storeBit(!1).storeCoins(r);return n&&(s="string"==typeof n?Qt(Gt(n),Math.floor((a.availableBits-Nt.xA)/8)):n),s instanceof Uint8Array?(a.storeBit(0),a=a.storeBuffer(Po.from(s))):a=a.storeMaybeRef(s),a.endCell()}function Ho(t,e,n,s){let r=t%e;return r>0&&r<e&&(r+=1),T(n,(Math.floor(t/e)*e+r)/e)+BigInt(t)*s}function jo(t){return"tokens:transfer"===(null==t?void 0:t.type)||"tokens:transfer-non-standard"===(null==t?void 0:t.type)}function qo(t){const{type:e,ton:{version:n}}=t;return"ledger"===e?Nt.qP:"W5"===n?Nt.Bm:Nt.EV}async function zo(t,e){const n=qo(await Te(t)),s=Math.ceil(e.length/n),r=e.slice(0,n).map(Go),a=await ko(t,r);return"error"in a?a:{realFee:Nt.sl.changeDns*BigInt(e.length)+a.emulation.networkFee*BigInt(s)}}async function*Vo(t,e,n){const s=tt(n,qo(await Te(t)));for(const n of s){const s=n.map(Go);yield{addresses:n,result:await So({accountId:t,password:e,messages:s})}}}async function Jo(t,e,n){const s=await ko(t,[Qo(e,n)]);return"error"in s?s:{realFee:s.emulation.networkFee+Nt.sl.changeDns}}function $o(t,e,n,s){return So({accountId:t,password:e,messages:[Qo(n,s)]})}function Go(t){return{toAddress:t,payload:gt.n.buildFillUpMessage(),amount:Nt.sl.changeDns}}function Qo(t,e){return{toAddress:t,payload:gt.n.buildChangeDnsWalletMessage(e),amount:Nt.sl.changeDns}}self.devSettings={};var Zo=n(85586);class Xo{constructor(t,e){this.address=t,this.init=e}static createFromAddress(t){return new Xo(t)}static createFromConfig(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s={code:e,data:(0,at.beginCell)().endCell()};return new Xo((0,at.contractAddress)(n,s),s)}async getListNominators(t){return(await t.get("list_nominators",[])).stack.readTuple().items.map((t=>{const e=t.map((t=>({type:"int",value:t}))),n=new at.TupleReader(e),s=n.readBigNumber().toString(16).padStart(64,"0");return{address:at.Address.parse(`0:${s}`),amount:n.readBigNumber(),pendingDepositAmount:n.readBigNumber(),withdrawRequested:Boolean(n.readNumber())}}))}}let Yo;const ti=new rn.A,ei={};let ni;const si=new rn.A;function ri(t,e){return ei[`${t}:${e}`]??{}}function ai(t,e,n){const s=`${t}:${e}`;ei[s]={...ei[s],...n}}async function oi(){return await ti.promise,Yo}async function ii(){return await si.promise,ni}var ci=n(48287).Buffer;let di;async function li(){if(di=await Ae.getItem("clientId"),!di){di=ci.from(E(10)).toString("hex");const t=await Ae.getItem("referrer");t&&(di=`${di}:${t}`),await Ae.setItem("clientId",di)}return di}async function ui(t,e,n){let s;switch(n.type){case"nominators":if(e<Nt.sl.stakeNominators)return{error:F.KL.InvalidAmount};s=await po({accountId:t,toAddress:n.pool,amount:e+Nt.sl.stakeNominators,data:Nt.v8}),"fee"in s&&s.fee&&(s.fee=Nt.sl.stakeNominators+s.fee);break;case"liquid":s=await po({accountId:t,toAddress:i.qMf,amount:e+Nt.sl.stakeLiquid,data:Yt()}),"fee"in s&&s.fee&&(s.fee=Nt.sl.stakeLiquid+s.fee);break;case"jetton":{const{tokenSlug:r,pool:a,period:o}=n,{tokenAddress:i}=Zn(r);s=await po({accountId:t,toAddress:a,tokenAddress:i,amount:e,data:kt.Ml.stakePayload(o),forwardAmount:Nt.sl.stakeJettonsForward});break}case"ethena":s=await po({accountId:t,toAddress:i.BV6,tokenAddress:i.wpN.tokenAddress,amount:e,forwardAmount:Nt.sl.stakeEthenaForward})}return s}async function fi(t,e,n){const{network:s}=U(t),{address:r}=await Ie(t),a=await oi();let o,c;switch(n.type){case"nominators":o=await po({accountId:t,toAddress:n.pool,amount:Nt.sl.unstakeNominators,data:Nt.mv});break;case"liquid":{if(e>n.balance)return{error:F.KL.InsufficientBalance};c=e===n.balance?n.tokenBalance:C(e,a.liquid.currentRate);const i=await mi(s,r,c);o=await po({accountId:t,toAddress:i.toAddress,amount:i.amount,data:i.payload});break}case"jetton":c=e,o=await po({accountId:t,toAddress:n.stakeWalletAddress,amount:Nt.sl.unstakeJettons,data:ne(e,!0)});break;case"ethena":if(e>n.balance)return{error:F.KL.InsufficientBalance};c=e===n.balance?n.tokenBalance:C(e,"testnet"===s?1:a.ethena.rate),o=await po({accountId:t,toAddress:i.VG8.tokenAddress,amount:c,tokenAddress:i.VG8.tokenAddress,forwardAmount:Nt.sl.unstakeEthenaForward})}return{...o,type:n.type,tokenAmount:c}}async function hi(t,e,n,s){let r;const{network:a}=U(t),{address:o}=await Ie(t);switch(s.type){case"nominators":r=await wo({accountId:t,password:e,toAddress:Vt(s.pool,!0,a),amount:n+Nt.sl.stakeNominators,data:Nt.v8});break;case"liquid":r=await wo({accountId:t,password:e,toAddress:i.qMf,amount:n+Nt.sl.stakeLiquid,data:Yt()});break;case"jetton":{const{tokenSlug:a,pool:o,period:i}=s,{tokenAddress:c}=Zn(a);r=await wo({accountId:t,password:e,toAddress:o,tokenAddress:c,amount:n,data:kt.Ml.stakePayload(i),forwardAmount:Nt.sl.stakeJettonsForward}),"error"in r||(r.toAddress=o);break}case"ethena":r=await wo({accountId:t,password:e,toAddress:i.BV6,tokenAddress:i.wpN.tokenAddress,amount:n,forwardAmount:Nt.sl.stakeEthenaForward})}return"error"in r||ai(t,o,{stakedAt:Date.now()}),r}async function pi(t,e,n,s){const{network:r}=U(t),{address:a}=await Ie(t);let o;switch(s.type){case"nominators":o=await wo({accountId:t,password:e,toAddress:Vt(s.pool,!0,r),amount:Nt.sl.unstakeNominators,data:Nt.mv});break;case"liquid":{const i=s.instantAvailable?F.Dn.Default:F.Dn.BestRate,c=await mi(r,a,n,i);o=await wo({accountId:t,password:e,toAddress:c.toAddress,amount:c.amount,data:c.payload});break}case"jetton":o=await wo({accountId:t,password:e,toAddress:s.stakeWalletAddress,amount:Nt.sl.unstakeJettons,data:ne(n,!0)});break;case"ethena":o=await wo({accountId:t,password:e,toAddress:i.VG8.tokenAddress,amount:n,tokenAddress:i.VG8.tokenAddress,forwardAmount:Nt.sl.unstakeEthenaForward}),"error"in o||(o.localActivityParams={slug:i.VG8.slug,amount:0n,toAddress:i.VG8.tokenAddress})}return o}async function mi(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:F.Dn.Default;const r=await Kt(t,e,i.Kzb),a=function(t){const{queryId:e,amount:n,responseAddress:s,waitTillRoundEnd:r,fillOrKill:a}=t,o=function(t,e){return(new at.Builder).storeUint(Number(t),1).storeUint(Number(e),1).asCell()}(r,a);return(new at.Builder).storeUint(Nt.LY.Burn,32).storeUint(e??0,64).storeCoins(n).storeAddress(at.Address.parse(s)).storeBit(1).storeRef(o).asCell()}({amount:n,responseAddress:e,fillOrKill:s===F.Dn.Instant,waitTillRoundEnd:s===F.Dn.BestRate});return{amount:Nt.sl.unstakeLiquid,toAddress:r,payload:a}}async function wi(t,e,n,s){const{network:r}=U(t),{address:a}=await Ie(t),{loyaltyType:o,shouldUseNominators:c,type:d}=n,l={accountId:t,backendState:n,commonData:e,address:a,loyaltyType:o,network:r,balances:s},u=[];for(const t of e.jettonPools)ts("ton",t.token)in s&&u.push(gi(l,t));return(c||"nominators"===d)&&u.push(async function(t){var e,n;let{network:s,address:r,backendState:a,commonData:o}=t;const c=a.balance,{address:d,apy:l}=a.nominatorsPool,u=Date.now()>o.prevRound.unlock,f=u?o.round.start:o.prevRound.start,h=u?o.round.unlock:o.prevRound.unlock;let p;if("nominators"===a.type){const t=Lt(s).open(new Xo(at.Address.parse(d))),e=await t.getListNominators(),n=at.Address.parse(r);p=e.find((t=>t.address.equals(n)))}return{type:"nominators",id:"nominators",tokenSlug:i.Tu9.slug,balance:p?c:0n,annualYield:l,yieldType:"APY",pool:d,start:f,end:h,pendingDepositAmount:(null===(e=p)||void 0===e?void 0:e.pendingDepositAmount)??0n,unstakeRequestAmount:null!==(n=p)&&void 0!==n&&n.withdrawRequested?c:0n}}(l)),!(i.wpN.slug in s)||e.ethena.isDisabled&&!i.Oig||u.push(async function(t){const{network:e,balances:n,address:s,commonData:r,commonData:{ethena:{apy:a,apyVerified:o}},backendState:{ethena:{isVerified:c}}}=t,d="testnet"===e?1:r.ethena.rate,l=Lt(e),u=await Kt(e,s,i.VG8.tokenAddress),f=l.open(Zo.G.createFromAddress(at.Address.parse(u))),{lockedBalance:h,unlockTime:p}=await f.getTimeLockData(),m=n[i.VG8.slug]??0n,w=T(m,d),y=T(h,d),g={id:"ethena",type:"ethena",tokenSlug:i.wpN.slug,yieldType:"APY",annualYield:c?o:a,annualYieldStandard:a,annualYieldVerified:o,balance:w,pool:i.BV6,tokenBalance:m,unstakeRequestAmount:y,lockedBalance:h,unlockTime:p&&h?1e3*p:void 0,tsUsdeWalletAddress:u};return void 0!==c||function(t){return Boolean(t.balance||t.unstakeRequestAmount||"unclaimedRewards"in t&&t.unclaimedRewards>i.dL4)}(g)||(g.annualYield=o),g}(l)),[yi(l),...await Promise.all(u)]}function yi(t){var e;let{accountId:n,address:s,backendState:r,commonData:a,loyaltyType:o,balances:c}=t;const{currentRate:d}=a.liquid,l=c[ts("ton",i.Kzb)]??0n,u=b((null===(e=r.liquid)||void 0===e?void 0:e.unstakeRequestAmount)??0),f=ri(n,s),h=Math.max(f.stakedAt??0,r.stakedAt??0),p=Date.now()-h>i.NFS&&!(self.devSettings??{}).simulateLongUnstaking?a.liquid.available:0n,{start:m,end:w}=function(t){const{prevRound:e,round:n}=t,s=Date.now(),r=i.N7B,a=s>e.unlock&&s<e.unlock+r&&!t.liquid.collection||s>=e.unlock+r?n:e;return{start:a.start,end:a.unlock+r}}(a);let y=a.liquid.apy;o&&o in a.liquid.loyaltyApy&&(y=a.liquid.loyaltyApy[o]);const g=T(l+u,d);return{type:"liquid",id:"liquid",tokenSlug:i.Tu9.slug,pool:i.qMf,balance:g,annualYield:y,yieldType:"APY",tokenBalance:l,unstakeRequestAmount:u,instantAvailable:p,start:m,end:w}}async function gi(t,e){const{network:n}=t,{pool:s,token:r,poolConfig:a}=e,{decimals:o,slug:i}=Xn(r),{tvl:c,rewardJettons:d}=re(a),{rewardsDeposits:l}=Object.values(d)[0],u=Math.floor(Date.now()/1e3);let f=0n;for(const{startTime:t,endTime:e,distributionSpeed:n}of Object.values(l))t<u&&e>u&&(f+=n);const h=function(t){let{tvl:e,dailyReward:n,decimals:s}=t;if(!e)return 0;const r=S(n,s).div(S(e,s)).mul(Ar).mul(100).toFixed(2);return Number(r)}({tvl:c,dailyReward:f,decimals:o}),{address:p,balances:m}=t,w=e.periods[0],y=ts("ton",w.token),g=await qt(n,s,w.period,p);let v,A=0n,b=0n;if(y in m){const t=await g.getStorageData().catch((()=>{}));if(t){const e=await Kt(n,s,r),o=bt.sH.getAvailableRewards(t,a);A=(o&&o[e])??0n,b=t.jettonBalance,v=Object.keys(o)}}return{type:"jetton",id:s,pool:s,tokenAddress:r,tokenSlug:i,annualYield:h,yieldType:"APR",balance:b,unclaimedRewards:A,poolWallets:v,stakeWalletAddress:Vt(g.address,!0),tokenAmount:0n,tvl:c,dailyReward:f,period:w.period}}async function vi(t){const{address:e}=await Ie(t),n=await async function(t){const e=await li(),n=await dn(`/staking/state/${t}`,void 0,{"X-App-ClientID":e});if(n.balance=b(n.balance),n.totalProfit=b(n.totalProfit),!function(t){return i.aPk.some((e=>t.endsWith(e)))}(n.nominatorsPool.address))throw Error("Unexpected pool address, likely a malicious activity");return n}(e);return{...n,nominatorsPool:{...n.nominatorsPool,start:1e3*n.nominatorsPool.start,end:1e3*n.nominatorsPool.end}}}function Ai(t,e,n){return wo({accountId:t,password:e,toAddress:n.stakeWalletAddress,amount:Nt.sl.claimJettons,data:se(n.poolWallets)})}async function bi(t,e,n){const{address:s}=await Ie(t),r=await wo({accountId:t,password:e,toAddress:n.tsUsdeWalletAddress,amount:Nt.sl.unstakeEthenaLocked,data:Zo.G.transferTimelockedMessage({jettonAmount:n.lockedBalance,to:at.Address.parse(i.VG8.tokenAddress),responseAddress:at.Address.parse(s),forwardTonAmount:Nt.sl.unstakeEthenaLockedForward})});return"error"in r||(r.localActivityParams={type:"unstake",amount:n.unstakeRequestAmount,isIncoming:!0,slug:i.wpN.slug,fromAddress:i.BV6,toAddress:s}),r}var ki=n(48287).Buffer;function Si(t){let e=new at.Cell;return t&&(t instanceof at.Cell?e=t:"string"==typeof t?t.length>0&&(e=(new at.Builder).storeUint(0,32).storeStringTail(t).asCell()):e=(new at.Builder).storeBuffer(ki.from(t)).asCell()),e.toBoc().toString("base64")}async function Ei(t){try{return await Lt(t).getMasterchainInfo(),!0}catch(t){return!1}}const Ii=[i.yTE,i.InW],Di=1000000000n;async function Bi(t,e,n,s){const r=(r,a)=>{(0,Cs.v)(r,a,{network:t,address:e,request:n,transfers:s})};r(s.length<=2,"Too many transfers");const[a,o]=s;if(n.from===i.Tu9.symbol){const e=b(n.fromAmount)+b(n.ourFee)+Di,{isSwapAllowed:s,codeHash:i}=await Yr(t,a.toAddress);r(!!s,`Not allowed swap contract: ${i}`),r(a.amount<=e,"Main transfer amount is too big"),o&&(r(o.amount<=a.amount,"Fee transfer amount is too big"),r(o.amount+a.amount<e,"Total amount is too big"),r(Ii.includes(Vt(o.toAddress,!1)),"Unexpected fee transfer address"))}else{const s=Xn(n.from);r(!!s,'Unknown "from" token');const i=b(n.fromAmount,s.decimals)+b(n.ourFee??0,s.decimals)+b(n.dieselFee??0,s.decimals),c=Di,d=await Kt(t,e,s.tokenAddress),l=await As(t,a.toAddress,a.payload);r(a.toAddress===d,"Main transfer address is not the token wallet address"),r(jo(l),"Main transfer payload is not a token transfer");const{amount:u,destination:f}=l;r(u<=i,"Main transfer token amount is too big"),r(a.amount<c,"Main transfer TON amount is too big");const{isSwapAllowed:h}=await Yr(t,f);if(r(!!h,"Main transfer destination is not a swap smart contract"),o){const e=await As(t,o.toAddress,o.payload);r(o.amount+a.amount<c,"Total TON amount is too big"),r(o.toAddress===d,"Fee transfer address is not the token wallet address"),r(jo(e),"Fee transfer payload is not a token transfer");const{amount:n,destination:s}=e;r(u+n<=i,"Total token amount is too big"),r(Ii.includes(Vt(s,!1)),"Unexpected fee transfer destination")}}}function Ci(t){return{...t,id:(e=t.id,Bn(e,void 0,"backend-swap")),kind:"swap",from:Ti(t,t.from),to:Ti(t,t.to),shouldLoadDetails:!t.cex};var e}function Ti(t,e){return e===i.Tu9.symbol?i.Tu9.slug:t.cex?(null===(n=Xn(e))||void 0===n?void 0:n.slug)??e:ts("ton",e);var n}async function _i(t){const{address:e,swapId:n,authToken:s,msgHash:r,error:a}=t;await cn(`/swap/history/${e}/${n}/update`,{swapVersion:i.AuB,msgHash:r,error:a},{method:"PATCH",authToken:s})}const Ri=4,xi=gr,Ni=100;async function Pi(t,e,n,s){try{e=await async function(t,e){try{const{network:n}=U(t),{address:s}=await Ie(t);let r=e.filter((t=>t.shouldReload)).map((t=>dr(t.id).actionId));for(let t=0;t<Ri&&r.length;t++)(0,N.MD)(`Reload incomplete activities #${t+1}`,r),await(0,M.v7)(xi),({activities:e,actionIdsToReload:r}=await Fi(n,s,e,r))}catch(t){(0,N.SJ)("reloadIncompleteActivities",t)}return e}(t,e),e=await async function(t,e,n,s){if(!e.length||"testnet"===U(t).network||!function(t,e){return t?i.dGN.has(t):e.some((t=>Cn(t).some((t=>i.dGN.has(t)))))}(n,e))return e;try{const{ton:{address:r}={}}=await Ce(t);if(!r)return e;const a=e[0].timestamp,o=e[e.length-1].timestamp,[c,d]=a<o?[a,s?Date.now():o]:[o,s?Date.now():a],l=e.map((t=>{let{id:e}=t;return In(e).hash})),u=await function(t,e){return cn(`/swap/history/${t}`,{...e,swapVersion:i.AuB})}(r,{fromTimestamp:c,toTimestamp:d,asset:n?Zn(n).tokenAddress??i.Tu9.symbol:void 0,hashes:l,isCex:!0});if(!u.length)return e;const f=[],h=new Set;for(const t of u)t.hashes.forEach((t=>h.add(t))),t.timestamp>c&&t.timestamp<d&&f.push(Ci(t));for(const t of e)"transaction"===t.kind&&h.has(In(t.id).hash)?f.push({...t,shouldHide:!0}):f.push(t);return f.sort(En),f}catch(t){return(0,N.SJ)("swapReplaceCexActivities",t),e}}(t,e,n,s)}catch(t){(0,N.SJ)("enrichActivities",t)}return e}async function Fi(t,e,n,s){const r=tt(s,Ni),a=(await Promise.all(r.map((async n=>(await Ws({network:t,filter:{actionId:n},walletAddress:e,limit:Ni})).filter((t=>!t.shouldReload)))))).flat();if(a.length){const t=G(a,"id"),e=a.map((t=>dr(t.id).actionId));n=n.map((e=>t[e.id]??e)),s=rt(s,e)}return{activities:n,actionIdsToReload:s}}class Ui{#b;#i;#S=[];#I=0;constructor(t){this.#b=t}watchWallets(t){let{onNewActivity:e,onConnect:n,onDisconnect:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.#I++,a={id:r,wallets:t,isConnected:!1,onNewActivity:e,onConnect:n,onDisconnect:s,destroy:this.#C.bind(this,r)};return this.#S.push(a),this.#T(),a}#C(t){const e=this.#S.findIndex((e=>e.id===t));e>=0&&(this.#S.splice(e,1),this.#T())}#T=(0,M.nF)((async()=>{const{isWebSocketEnabled:t}=await ii();var e;t&&this.#_()?(this.#i??=this.#R(),this.#i.isConnected&&this.#x()):(null===(e=this.#i)||void 0===e||e.close(),this.#i=void 0)}),10,!1);#R(){const t=function(t){const e=new URL(i.HUv);return e.protocol="http"===e.protocol?"ws":"wss",e.pathname+=("testnet"===t?"testnet/":"")+"ws",un(e),e}(this.#b),e=new Tr(t);return e.onMessage(this.#A),e.onConnect(this.#N),e.onDisconnect(this.#P),e}#A=t=>{switch(t.type){case"subscribed":this.#F(t);break;case"newActivity":this.#X(t)}};#N=()=>{this.#x()};#P=()=>{for(const t of this.#S)t.isConnected&&(t.isConnected=!1,t.onDisconnect&&(0,xn.A)(t.onDisconnect))};#F(t){for(const e of this.#S)t.id<e.id||e.isConnected||(e.isConnected=!0,e.onConnect&&(0,xn.A)(e.onConnect))}#X(t){const e=new Set(t.addresses);for(const{wallets:n,isConnected:s,onNewActivity:r}of this.#S)if(s&&r)for(const s of n)s.chain===t.chain&&e.has(s.address)&&s.events.includes("activity")&&(0,xn.A)((()=>r(s)))}#x(){const t=this.#M(["activity"]),e=this.#I++;this.#i.send({type:"subscribe",id:e,addresses:t.map((t=>({...t,events:["activity"]})))})}#_(){return this.#S.some((t=>t.wallets.length))}#M(t){const e=[];for(const n of this.#S)for(const s of n.wallets)s.events.some((e=>t.includes(e)))&&e.push({chain:s.chain,address:s.address});return e}}const Oi={};class Mi{#t;#j;#q;#n=!1;#Y;constructor(t){var e;this.#t=t,this.#j=(e=t.network,Oi[e]??=new Ui(e),Oi[e]).watchWallets([{chain:t.chain,events:["activity"],address:t.address}],{onNewActivity:this.#tt,onConnect:this.#N,onDisconnect:this.#P}),this.#q=new Cr(this.#j.isConnected,{pollOnStart:t.updateOnStart,minPollDelay:t.minUpdateDelay,pollingStartDelay:t.fallbackUpdateStartDelay,pollingPeriod:t.fallbackUpdatePeriod,forcedPollingPeriod:t.forceUpdatePeriod,poll:this.#et})}destroy(){this.#n=!0,this.#j.destroy(),this.#q.destroy()}#tt=()=>{this.#Y=!0,this.#nt(),this.#q.onSocketMessage()};#N=()=>{this.#et(),this.#q.onSocketConnect()};#P=()=>{this.#q.onSocketDisconnect()};#et=()=>{this.#Y??=!1,this.#nt()};#nt=(0,M.nF)((async()=>{if(void 0===this.#Y)return;if(await(0,M.v7)(10),this.#n)return;const t=this.#Y;this.#Y=void 0,await this.#t.onUpdate(t)}),(()=>{const[t,e]=Br(this.#t.minUpdateDelay);return mr(t-10,e-10)}))}const Wi=ur();class Li{#st=new Set;#rt;constructor(t){this.#rt=t}get isOn(){return this.#st.size>0}on(t){this.toggle(t,!0)}off(t){this.toggle(t,!1)}toggle(t,e){const n=this.isOn;this.#st[e?"add":"delete"](t);const s=this.isOn;n!==s&&this.#rt(s)}}class Ki{#at;#ot=[];#H=function(){let t=[],e=[];return{get all(){return[...t,...e].sort(En)},updateAfterRawUpdate:(n,s)=>{const r=new Set(st(n,"externalMsgHashNorm"));e=[...e,...t.filter((t=>r.has(t.externalMsgHashNorm)))].sort(En),t=s},updateAfterEnrichment:t=>{const n=new Set(st(t,"externalMsgHashNorm"));e=e.filter((t=>!n.has(t.externalMsgHashNorm)))}}}();#it=new Li((t=>this.#V.runCallbacks(t)));#z=ur();#ct=function(t){let e=[];return(n,s)=>{var r,a;!n.length&&(a=s,(r=e).length===a.length&&r.every(((t,e)=>t===a[e])))||t(n,s),e=s}}(this.#z.runCallbacks);#V=ur();#n=!1;#dt;constructor(t,e){this.#at=t,this.#dt=[e.onUpdate(this.#lt),e.onLoadingChange((t=>this.#it.toggle("raw",t)))]}onUpdate(t){return this.#z.addCallback(t)}onLoadingChange(t){return this.#V.addCallback(t)}destroy(){this.#n=!0;for(const t of this.#dt)t()}#lt=(t,e)=>{this.#H.updateAfterRawUpdate(t,e),this.#ut([]),t.length&&(this.#ot.unshift(...t),this.#ft())};#ft=(0,M.nF)((async()=>{if(!this.#n)try{this.#it.on("enrich");const t=this.#ot;this.#ot=[];const e=await Pi(this.#at,t,void 0,!0);this.#H.updateAfterEnrichment(t),this.#ut(e)}finally{this.#it.off("enrich")}}),0);#ut(t){this.#n||this.#ct(t,this.#H.all)}}const Hi=3*gr,ji={focused:2*gr,notFocused:10*gr},qi={focused:vr,notFocused:5*vr},zi={focused:vr,notFocused:5*vr},Vi={focused:5*gr,notFocused:20*gr},Ji={focused:5*vr,notFocused:15*vr},$i={focused:10*gr,notFocused:vr},Gi={focused:15*gr,notFocused:2*vr},Qi={focused:vr,notFocused:5*vr},Zi=5*gr,Xi=10,Yi=(0,M.JL)();function tc(t,e,n,s,r){if(!("ton"in e)||!e.ton)return()=>{};const a=function(t,e,n){const s=ec(t,e,n);return{...Ir({period:qi,minDelay:ji,poll:s.update}),getBalances:s.get}}(t,n,s.bind(void 0,"balance")),o=function(t,e,n,s,r,a,o){let c,d,l=!1;const u=Y(Object.values(n));let f=u.length?Math.max(...u):void 0;function h(t){t.length&&r()}function p(e,n){e.slice().reverse().forEach((t=>{Wi.runCallbacks(t)})),a({type:"newActivities",chain:"ton",activities:e,pendingActivities:n,accountId:t})}return(async()=>{const n=void 0===f;n&&(f=await async function(){try{o(!0);const e=Object.keys(await s());return await async function(t,e,n){const s=(0,M.JL)(Xi),r={};let a,o=[];const c=s.wrap((async e=>{try{const n=e!==i.Tu9.slug?e:void 0;let s=await Va(t,n,void 0,void 0,br);s=await Pi(t,s,e,!0),e===i.Tu9.slug&&s.length&&(a=s[0].timestamp,o=s,s=s.filter((t=>Cn(t).includes(i.Tu9.slug)))),r[e]=s}catch(t){(0,N.SJ)("loadTokenActivity",e,t)}}));return await Promise.allSettled(e.map(c)),n({type:"initialActivities",chain:"ton",accountId:t,mainActivities:o,bySlug:r}),a}(t,e,a)}catch(t){return void(0,N.SJ)("loadInitialConfirmedActivities",t)}finally{o(!1)}}(),r()),l||(c=new Kr(U(t).network,e,f,!n),d=new Ki(t,c),c.onUpdate(h),d.onUpdate(p),d.onLoadingChange(o))})(),()=>{var t,e;l=!0,null===(t=d)||void 0===t||t.destroy(),null===(e=c)||void 0===e||e.destroy()}}(t,e.ton.address,r,a.getBalances,(async function(){await(0,M.v7)(Hi),a.poll(),c.poll(),d.poll()}),n,s.bind(void 0,"activities")),c=function(t,e){let n=Math.round(Date.now()/1e3);const s=Dr([Zi],(async()=>{try{const s=await Oo(t,n).catch(nc);if(s){let t;[n,t]=s,t.filter((t=>!("nftReceived"===t.type&&t.nft.isHidden))).forEach(e)}}catch(t){(0,N.SJ)("setupNftPolling updatePartial",t)}})),r=Ir({period:Qi,async poll(){s.cancel();try{const s=await Fo(t).catch(nc);s&&(n=Math.round(Date.now()/1e3),e({type:"updateNfts",accountId:t,nfts:s}))}catch(t){(0,N.SJ)("setupNftPolling updateFull",t)}}});return{poll:(0,M.nF)(s.run,(()=>mr(...Br(ji)))),stop(){s.cancel(),r.stop()}}}(t,n),d=function(t){return Ir({period:zi,minDelay:ji,async poll(){try{const e=await Ie(t);if(e.isInitialized)return"stop";const{network:n}=U(t);let s;if(e.publicKey){const t=await $r(n,e.address);t&&(s={isInitialized:t})}else{const t=await ba(n,e.address);!("error"in t)&&t.wallet.isInitialized&&(s=Q(t.wallet,["isInitialized","publicKey","version"]))}s&&await async function(t,e){return Re(t,{ton:{...await Ie(t),...e}})}(t,s)}catch(t){(0,N.SJ)("checkWalletInitialization",t)}}})}(t),l=function(t,e){const{network:n}=U(t);let s;return Ir({period:Ji,async poll(){try{const{type:r,ton:a}=await Ce(t);if("bip39"===r||!a)return"stop";const{publicKey:o,version:c,isInitialized:d}=a;if(!o){if(!d)return;return e({type:"updateWalletVersions",accountId:t,currentVersion:c,versions:[]}),"stop"}const l=Bt(o),u=("ledger"===r?i.iQn:i.eZ2).filter((t=>t!==c)),f=await ra(n,l,u),h=f.map((t=>{let{wallet:e,...n}=t;return n}));Bs(f,s)||(s=f,e({type:"updateWalletVersions",accountId:t,currentVersion:c,versions:h}))}catch(t){(0,N.SJ)("setupWalletVersionsPolling",t)}}}).stop}(t,n),u=function(t,e){let n;return Ir({period:Gi,async poll(){try{const s=await async function(t){const{network:e}=U(t),{address:n}=await Ie(t),s=await dn("/dns/getDomains",{address:n}),r=await An(),a={},o={},i={};return Object.keys(s).forEach((t=>{const{lastFillUpTime:n,linkedAddress:c,nft:d}=s[t];a[t]=new Date(n).getTime()+mt.UX,c&&(o[t]=c);const l=Is(e,d,r);l&&(i[t]=l)})),{expirationByAddress:a,linkedAddressByAddress:o,nfts:i}}(t);Bs(s,n)||(n=s,e({type:"updateAccountDomainData",accountId:t,...Q(s,["expirationByAddress","linkedAddressByAddress","nfts"])}))}catch(t){(0,N.SJ)("setupTonDnsPolling",t)}}}).stop}(t,n),f=function(t,e,n){if(i.OuE||"mainnet"!==U(t).network)return()=>{};let s;return Ir({period:Vi,async poll(){try{const[r,a,o]=await Promise.all([oi(),e(),vi(t)]),i=await wi(t,r,o,a),{shouldUseNominators:c,totalProfit:d}=o;Bs(i,s)||(s=i,n({type:"updateStaking",accountId:t,states:i,totalProfit:d,shouldUseNominators:c}))}catch(t){(0,N.SJ)("setupStakingPolling",t)}}}).stop}(t,a.getBalances,n),h=function(t,e){if(i.TI6)return()=>{};let n;return Ir({period:$i,async prepare(){const{isVestingEnabled:t}=await ii();return t},async poll(s){if(!s)return"stop";try{const s=await async function(t){const{network:e}=U(t),n="testnet"===e,{address:s}=await Ie(t);return dn(`/vesting/${s}`,{isTestnet:n})}(t);Bs(n,s)||(n=s,e({type:"updateVesting",accountId:t,vestingInfo:s}))}catch(t){(0,N.SJ)("setupVestingPolling",t)}}}).stop}(t,n);return()=>{a.stop(),o(),c.stop(),l(),u(),f(),h()}}function ec(t,e,n){const{network:s}=U(t);let r,a,o=new rn.A;async function c(n){const{balance:r,domain:o=!1}=await Xr(s,n);return o!==a&&(e({type:"updateAccount",accountId:t,chain:"ton",domain:o}),a=o),r}return{get:async function(){return await o.promise,r},update:async function(){null==n||n(!0);try{const n=await Ie(t),[a,d]=await Promise.all([c(n.address),oo(s,n.address,e)]),l={[i.Tu9.slug]:a,...d},u=!Bs(r,l);r=l,u&&e({type:"updateBalances",accountId:t,chain:"ton",balances:r}),o.resolve()}catch(t){(0,N.SJ)("setupBalanceAndDomainPolling update",t),o.reject(t),o=new rn.A}finally{null==n||n(!1)}}}}function nc(t){(0,N.SJ)("Polling error",t)}function sc(t,e,n){if(!("ton"in e)||!e.ton)return()=>{};const s=ec(t,n),r=new Mi({...Er,chain:"ton",network:U(t).network,address:e.ton.address,onUpdate:Yi.wrap((async()=>{await s.update()}))});return()=>{r.destroy()}}var rc=n(17718);let ac;const oc={},ic=ka("tron");function cc(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mainnet";return ac||(ac={mainnet:new rc.TronWeb({fullHost:ic.mainnet.apiUrl}),testnet:new rc.TronWeb({fullHost:ic.testnet.apiUrl})}),ac[t]}async function dc(t){if(!(t in oc)){const e=await cc(t).trx.getChainParameters(),n=e.find((t=>"getEnergyFee"===t.key)).value,s=e.find((t=>"getTransactionFee"===t.key)).value;oc[t]={energyUnitFee:n,bandwidthUnitFee:s}}return oc[t]}async function lc(t,e,n,s,r){const{network:a}=U(t),{address:o}=await De(t);if(e===i.X7T.slug){const t=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=ka("tron")[t].apiUrl,r=new URL(`${s}/v1/accounts/${e}/transactions`);return(await(0,an.x6)(r.toString(),n)).data}(a,o,{min_timestamp:s?s+1e3:void 0,max_timestamp:n?n-1e3:void 0,limit:r,search_internal:!1});return t.map((t=>function(t,e){const{raw_data:n,txID:s,energy_fee:r,net_fee:a,block_timestamp:o}=e,c=n.contract[0].parameter.value,d=BigInt(c.amount??0),l=rc.TronWeb.address.fromHex(c.owner_address),u=rc.TronWeb.address.fromHex(c.to_address||c.receiver_address||c.contract_address),f=u===t;return{id:s,kind:"transaction",txId:s,timestamp:o,fromAddress:l,toAddress:u,amount:f?d:-d,slug:i.X7T.slug,isIncoming:f,normalizedAddress:f?l:u,fee:BigInt(r+a),type:"TriggerSmartContract"===n.contract[0].type?"callContract":void 0,shouldHide:"TransferAssetContract"===n.contract[0].type}}(o,t))).filter(Boolean)}{const{tokenAddress:t}=Zn(e),c=await async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=ka("tron")[t].apiUrl,r=new URL(`${s}/v1/accounts/${e}/transactions/trc20`);return(await(0,an.x6)(r.toString(),n)).data}(a,o,{contract_address:t,min_timestamp:s?s+1e3:void 0,max_timestamp:n?n-1e3:void 0,limit:r});return c.map((t=>function(t,e){const{transaction_id:n,block_timestamp:s,from:r,to:a,value:o,token_info:c}=e,d=BigInt(o),l=a===t;return{id:n,kind:"transaction",txId:n,timestamp:s,fromAddress:r,toAddress:a,amount:l?d:-d,slug:ts(i.X7T.chain,c.address),isIncoming:l,normalizedAddress:l?r:a,fee:0n}}(o,t)))}}async function uc(t,e,n,s){const r=(await Promise.all([lc(t,i.X7T.slug,e,void 0,n),...s.map((s=>lc(t,s,e,void 0,n)))])).filter((t=>t.length));if(!r.length)return[];const a=r.reduce(((t,e)=>t.length>e.length?t:t.length<e.length||t[t.length-1].timestamp<e[e.length-1].timestamp?e:t),[]),o=a[a.length-1].timestamp,[c,...d]=r;return fc(c,...d).filter((t=>{let{timestamp:e}=t;return e>=o}))}function fc(t){const e=[],n=new Set,s=G(t,"id");for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];for(const t of a)for(const r of t){if(n.has(r.id))continue;n.add(r.id),e.push(r);const t=s[r.id];"transaction"===r.kind&&"transaction"===(null==t?void 0:t.kind)&&(r.fee=t.fee)}for(const s of t)n.has(s.id)||("transaction"!==s.kind||s.toAddress)&&(n.add(s.id),e.push(s));return e.sort(En)}async function hc(t,e){const n=cc(t);return BigInt(await n.trx.getUnconfirmedBalance(e))}async function pc(t,e,n){const s=await async function(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4?arguments[4]:void 0;try{const a=await t.transactionBuilder.triggerSmartContract(e,n,{_isConstant:!0},s,r);return a&&a.result?a.constant_result:[]}catch(t){return(0,N.SJ)("callContract",t),[]}}(cc(t),e,"balanceOf(address)",[{type:"address",value:n}],n);return s.length?BigInt(`0x${s[0]}`):0n}const mc=(0,M.JL)();function wc(t,e,n,s,r){if(!("tron"in e)||!e.tron)return()=>{};const{address:a}=e.tron,o=yc(t,a,n,s.bind(void 0,"balance")),c=function(t,e,n,s){const{network:r}=U(t),{usdtAddress:a}=ka("tron")[r],o=ts("tron",a),c=[i.X7T.slug,o];return{update:async function(){s(!0);try{e=Wn(e)?await async function(t,e,n){const s={},r={},a=await Promise.all(e.map((async e=>{var n;let a=await lc(t,e,void 0,void 0,br);return a=await Pi(t,a,e,!0),s[e]=null===(n=a[0])||void 0===n?void 0:n.timestamp,r[e]=a,a}))),[o,...i]=a,c=fc(o,...i);return c.slice().reverse().forEach((t=>{Wi.runCallbacks(t)})),n({type:"initialActivities",chain:"tron",accountId:t,mainActivities:c,bySlug:r}),s}(t,c,n):await async function(t,e,n,s){const r={},a=await Promise.all(n.map((async n=>{var s;let a=e[n];const o=await lc(t,n,void 0,a,br);return a=(null===(s=o[0])||void 0===s?void 0:s.timestamp)??a,r[n]=a,o}))),[o,...i]=a;let c=fc(o,...i);return c=await Pi(t,c,void 0,!0),c.slice().reverse().forEach((t=>{Wi.runCallbacks(t)})),c.length>0&&s({type:"newActivities",chain:"tron",activities:c,pendingActivities:[],accountId:t}),r}(t,e,c,n)}catch(t){(0,N.SJ)("setupActivityPolling update",t)}finally{s(!1)}}}}(t,r,n,s.bind(void 0,"activities"));let d=!0;const l=new Mi({...Sr,chain:"tron",network:U(t).network,address:a,onUpdate:async function(t){t||d?await Promise.all([o.update(),c.update()]):await o.update()&&await c.update(),d=!1}});return()=>{l.destroy()}}function yc(t,e,n,s){const{network:r}=U(t),{usdtAddress:a}=ka("tron")[r],o=ts("tron",a);let c;return{update:async function(){null==s||s(!0);try{const[s,d]=await Promise.all([hc(r,e),pc(r,a,e)]),l={[i.X7T.slug]:s,[o]:d},u=!Bs(c,l);return c=l,u&&n({type:"updateBalances",accountId:t,chain:"tron",balances:c}),u}catch(t){(0,N.SJ)("setupBalancePolling update",t)}finally{null==s||s(!1)}return!1}}}function gc(t,e,n){if(!("tron"in e)||!e.tron)return()=>{};const{address:s}=e.tron,r=yc(t,s,n),a=new Mi({...Er,chain:"tron",network:U(t).network,address:s,onUpdate:mc.wrap((async()=>{await r.update()}))});return()=>{a.destroy()}}const vc={transferTrc20Estimated:28214970n},Ac=1000000n;var bc=n(48287).Buffer;const kc=65;async function Sc(t){const{accountId:e,amount:n,toAddress:s,tokenAddress:r}=t,{network:a}=U(e),o=cc(a),i={};try{if(!o.isAddress(s))return{error:F.KL.InvalidToAddress};i.resolvedAddress=s;const{address:t}=await De(e),[c,d,{energyUnitFee:l,bandwidthUnitFee:u}]=await Promise.all([hc(a,t),o.trx.getBandwidth(t),dc(a)]);let f;if(r)f=await async function(t,e){const{network:n,tokenAddress:s,toAddress:r,energyUnitFee:a,fromAddress:o}=e;let{amount:i}=e;const c=await pc(n,s,o);if(!c)return vc.transferTrc20Estimated;(void 0===i||i>c)&&(i=1n);const{energy_required:d}=await t.transactionBuilder.estimateEnergy(s,"transfer(address,uint256)",{},[{type:"address",value:r},{type:"uint256",value:Number(i)}],o);return BigInt(a*d)}(o,{network:a,toAddress:s,tokenAddress:r,amount:n,energyUnitFee:l,fromAddress:t});else{const[e,r]=await Promise.all([o.transactionBuilder.sendTrx(s,Number(n??1),t),o.trx.getAccount(s)]),a=69+bc.from(e.raw_data_hex,"hex").byteLength+kc;f=d>a?0n:BigInt(a)*BigInt(u),void 0===r.balance&&(f+=Ac)}return i.fee=f,i.realFee=f,c>=(r?f:(n??0n)+f)||(i.error=F.KL.InsufficientBalance),i}catch(t){return(0,N.SJ)("tron:checkTransactionDraft",t),{...(0,Wa.QS)(t),...i}}}async function Ec(t){const{accountId:e,password:n,toAddress:s,amount:r,fee:a=0n,tokenAddress:o}=t,{network:i}=U(e);try{const t=cc(i),c=await Ce(e),{address:d}=c.tron;if(!(await hc(i,d)>=(o?a:a+r)))return{error:F.jf.InsufficientBalance};const l=await ze(e,n,c),u=t.fromMnemonic(l.join(" ")).privateKey.slice(2);if(o){const{transaction:e}=await async function(t,e){const{amount:n,tokenAddress:s,toAddress:r,feeLimit:a,fromAddress:o}=e,{transaction:i}=await t.transactionBuilder.triggerSmartContract(s,"transfer(address,uint256)",{feeLimit:Number(a)},[{type:"address",value:r},{type:"uint256",value:Number(n)}],o);return{transaction:i}}(t,{toAddress:s,tokenAddress:o,amount:r,feeLimit:a,fromAddress:d}),n=await t.trx.sign(e,u);return{amount:r,toAddress:s,txId:(await t.trx.sendRawTransaction(n)).transaction.txID}}{const e=await t.trx.sendTransaction(s,Number(r),{privateKey:u});if("code"in e&&(!("result"in e)||!e.result)){const t="message"in e&&e.message?function(t){let e="";for(let n=0;n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.slice(n,n+2),16));return e}(e.message):e.code.toString();return(0,N.SJ)("submitTransfer",{error:t,result:e}),{error:t}}return{amount:r,toAddress:s,txId:e.transaction.txID}}}catch(t){return(0,N.SJ)("submitTransfer",t),{error:F.jf.UnsuccesfulTransfer}}}function Ic(t,e){const{address:n,publicKey:s}=cc(t).fromMnemonic(e.join(" "));return{type:"tron",address:n,publicKey:s,index:0}}function Dc(t){const e=cc(t).isConnected();return Boolean(e)}const Bc={ton:s,tron:r},Cc={};async function Tc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];for(const e of Cc[t]??[])try{await e(...n)}catch(e){(0,N.SJ)(`callHooks:${t}`,e)}}async function _c(){return await Ae.getItem("baseCurrency")??i.wOb}function Rc(t){return Ae.setItem("baseCurrency",t)}let xc;const Nc=new Promise((t=>{xc=t}));function Pc(){xc()}async function Fc(){await Nc}const{ton:Uc}=Bc;function Oc(t,e){const{network:n}=U(t);return Uc.fetchToken(n,e)}function Mc(t,e,n){return Bc.ton.resolveTokenWalletAddress(t,e,n)}function Wc(t,e){return Bc.ton.resolveTokenAddress(t,e)}function Lc(t,e){const n=Bc.ton,s=Xn(t);return n.getToncoinAmountForTransfer(s,e)}let Kc;const{ton:Hc,tron:jc}=Bc;function qc(t){Kc=t}async function zc(t,e,n,s,r){let a;try{return a="ton"===e?await Bc[e].fetchActivitySlice(t,n,s,void 0,r):await Bc[e].getTokenTransactionSlice(t,n,s,void 0,r),a=await Pi(t,a,n),a}catch(t){return(0,N.SJ)("fetchActivitySlice",t),(0,Wa.QS)(t)}}async function Vc(t,e,n,s){try{const r=await Ce(t),[a,o]=await Promise.all(["ton"in r?Hc.fetchActivitySlice(t,void 0,n,void 0,e):[],"tron"in r?jc.getAllTransactionSlice(t,n,e,s):[]]),i=function(t,e){if(!t.length&&!e.length)return[];if(!t.length&&e.length)return e;if(!e.length&&t.length)return t;const n=Math.max(t[t.length-1].timestamp,e[e.length-1].timestamp);return[...t,...e].filter((t=>{let{timestamp:e}=t;return e>=n})).sort(En)}(a,o);return await Pi(t,i)}catch(t){return(0,N.SJ)("fetchAllActivitySlice",t),(0,Wa.QS)(t)}}function Jc(t,e){return Bc[t].checkTransactionDraft(e)}async function $c(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{accountId:s,password:r,toAddress:a,amount:o,tokenAddress:i,comment:c,fee:d,realFee:l,shouldEncrypt:u,isBase64Data:f,withDiesel:h,dieselAmount:p,isGaslessWithStars:m}=e,w="string"==typeof e.stateInit?at.Cell.fromBase64(e.stateInit):e.stateInit,y=await Ee(s,t);let g;if(g=h&&"ton"===t?await Hc.submitTransferWithDiesel({accountId:s,password:r,toAddress:a,amount:o,tokenAddress:i,data:c,shouldEncrypt:u,dieselAmount:p,isGaslessWithStars:m}):await Bc[t].submitTransfer({accountId:s,password:r,toAddress:a,amount:o,tokenAddress:i,data:c,shouldEncrypt:u,isBase64Data:f,stateInit:w,fee:d}),"error"in g)return g;if(!n)return g;const v=i?ts(t,i):ka(t).nativeToken.slug;let A;if("msgHash"in g){const{encryptedComment:e,msgHashNormalized:n}=g;[A]=Yc(s,t,[{txId:n,amount:o,fromAddress:y,toAddress:a,comment:u?void 0:c,encryptedComment:e,fee:l??0n,slug:v,externalMsgHashNorm:n,extra:{..."withW5Gasless"in g&&{withW5Gasless:g.withW5Gasless}}}]),"paymentLink"in g&&g.paymentLink&&Kc({type:"openUrl",url:g.paymentLink,isExternal:!0})}else{const{txId:e}=g;[A]=Yc(s,t,[{txId:e,amount:o,fromAddress:y,toAddress:a,comment:c,fee:l??0n,slug:v}])}return{...g,txId:A.txId}}async function Gc(t){const{network:e}=U(t),{address:n}=await Ie(t);return(await Oa(e,n)).id}async function Qc(t,e,n){const{msgHashNormalized:s}=await Hc.sendSignedMessage(t,e,n),[r]=Yc(t,"ton",[{...e.localActivity,txId:s,externalMsgHashNorm:s}]);return r.txId}function Zc(t){var e;null===(e=Ma(t))||void 0===e||e.resolve()}function Xc(t,e,n,s){return Bc.ton.decryptComment(t,e,n,s)}function Yc(t,e,n){const{network:s}=U(t),r=n.map(((t,n)=>{const{toAddress:r}=t;let a;return a=t.normalizedAddress?t.normalizedAddress:"ton"===e?Hc.normalizeAddress(r,s):r,function(t,e,n){const{amount:s,...r}=t,a=Dn(t.txId??t.externalMsgHashNorm,n);return xs({id:a,isPending:!0,kind:"transaction",timestamp:Date.now(),isIncoming:!1,amount:-s,normalizedAddress:e,...r,txId:a})}(t,a,n)}));return r.length&&Kc({type:"newLocalActivities",activities:r,accountId:t}),r}function td(t,e){return Bc.ton.fetchEstimateDiesel(t,e)}async function ed(t,e){const n=await Bc.ton.fetchActivityDetails(t,e);return(null==n?void 0:n.activity)??e}function nd(t,e,n,s){const r=[];let a=0;return s.forEach((s=>{if(s.shouldHide||s.id===kr)return;const o=function(t,e,n,s,r){const a=Dn(e,n);if("transaction"===t.kind){let n=t.normalizedAddress;if(!n&&"ton"===s&&r){const{network:e}=U(r);n=Bc.ton.normalizeAddress(t.toAddress,e)}return{...t,id:a,txId:a,timestamp:Date.now(),externalMsgHashNorm:e,normalizedAddress:n||t.normalizedAddress,isPending:!0}}return{...t,id:a,timestamp:Date.now(),externalMsgHashNorm:e,status:"pending"}}(s,n,a,e,t);r.push(o),a++})),r.length&&Kc({type:"newLocalActivities",activities:r,accountId:t}),r}const{ton:sd}=Bc;function rd(){}function ad(t,e,n){return sd.checkStakeDraft(t,e,n)}function od(t,e,n){return sd.checkUnstakeDraft(t,e,n)}async function id(t,e,n,s,r){const{address:a}=await Ie(t),o=await sd.submitStake(t,e,n,s);if("error"in o)return!1;let c;return s.tokenSlug,i.Tu9.slug,[c]=Yc(t,"ton",[{txId:o.msgHashNormalized,amount:n,fromAddress:a,toAddress:o.toAddress,fee:r??0n,type:"stake",slug:s.tokenSlug,externalMsgHashNorm:o.msgHashNormalized}]),{...o,txId:c.txId}}async function cd(t,e,n,s,r){const{address:a}=await Ie(t),o=await sd.submitUnstake(t,e,n,s);if("error"in o)return!1;const[c]=Yc(t,"ton",[{txId:o.msgHashNormalized,amount:o.toncoinAmount,fromAddress:a,toAddress:o.toAddress,fee:r??0n,type:"unstakeRequest",slug:i.Tu9.slug,externalMsgHashNorm:o.msgHashNormalized,...o.localActivityParams}]);return{...o,txId:c.txId}}async function dd(t){const{ton:e}=await Ce(t);return e?dn(`/staking/profits/${e.address}`):[]}async function ld(){try{const t=Lt("mainnet"),e=await dn("/staking/common"),n={...e,liquid:{...e.liquid,available:b(e.liquid.available)},jettonPools:await Promise.all(e.jettonPools.map((async e=>{const n=t.open(kt.Ml.createFromAddress(at.Address.parse(e.pool))),s=await n.getStorageData();return{...e,poolConfig:s}})))};n.round.start*=1e3,n.round.end*=1e3,n.round.unlock*=1e3,n.prevRound.start*=1e3,n.prevRound.end*=1e3,n.prevRound.unlock*=1e3,function(t){Yo=t,ti.resolve()}(n)}catch(t){(0,N.SJ)("tryUpdateLiquidStakingState",t)}}async function ud(t,e,n,s){const{address:r}=await Ie(t);let a;switch(n.type){case"jetton":a=await sd.submitTokenStakingClaim(t,e,n);break;case"ethena":a=await sd.submitUnstakeEthenaLocked(t,e,n)}if("error"in a)return a;const[o]=Yc(t,"ton",[{txId:a.msgHashNormalized,amount:a.amount,fromAddress:r,toAddress:a.toAddress,fee:s??0n,slug:i.Tu9.slug,externalMsgHashNorm:a.msgHashNormalized,...a.localActivityParams}]);return{...a,txId:o.txId}}var fd=n(48287).Buffer;const hd=fd.from("MyTonWallet_AuthToken_n6i0k4w8pb");function pd(t,e){return Bc[t].checkApiAvailability(e)}async function md(t,e){const n=await Ie(t);let{authToken:s}=n;const{publicKey:r,isInitialized:a}=n;if(!s){const r=await Bc.ton.fetchPrivateKey(t,e),a=H().sign.detached(hd,r);s=fd.from(a).toString("base64"),await Re(t,{ton:{...n,authToken:s}})}return a||(s+=`:${r}`),s}async function wd(){try{const[t,e,n]=await Promise.all([_e(),Ae.getItem("stateVersion"),Ae.getItem("mnemonicsEncrypted")]);return JSON.stringify({accounts:t,stateVersion:e,mnemonicsEncrypted:n})}catch(t){return void(0,N.SJ)("fetchAccountConfigForDebugPurposesOnly",t)}}function yd(){return!0}function gd(t,e,n){ai(t,e,n)}async function vd(t,e,n){try{return await dn("/onramp-url",{chain:t,address:e,theme:n})}catch(t){return(0,N.SJ)("getMoonpayOnrampUrl",t),(0,Wa.QS)(t)}}const Ad=Bc.ton;let bd;function kd(t){bd=t}async function Sd(t,e,n){const{network:s}=U(t),r=await md(t,e),{address:a,version:o}=await Ie(t);n.walletVersion=o;const{id:i,transfers:c}=await Cd(r,n),d=c.map((t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0})));try{await Ad.validateDexSwapTransfers(s,a,n,d);const e=await Ad.checkMultiTransactionDraft(t,d,n.shouldTryDiesel);return"error"in e?(await _i({address:a,swapId:i,authToken:r,error:e.error}),e):{...e,id:i,transfers:c}}catch(t){throw await _i({address:a,swapId:i,authToken:r,error:Id(t)}),t}}async function Ed(t,e,n,s,r){const a=s.id,o=await Ie(t),{address:c}=o,d=o.authToken??await md(t,e);try{const o=n.map((t=>({...t,amount:BigInt(t.amount),isBase64Payload:!0})));s.from!==i.Tu9.symbol&&(o[0]=await Ad.insertMintlessPayload("mainnet",c,s.from,o[0]));const l=await Ad.submitMultiTransfer({accountId:t,password:e,messages:o,isGasless:r});if("error"in l)return await _i({address:c,swapId:a,authToken:d,error:l.error}),l;delete l.messages[0].stateInit;const u=Ti(s,s.from),f=Ti(s,s.to),h={...s,id:Dn(l.msgHashNormalized),from:u,to:f,kind:"swap",externalMsgHashNorm:l.msgHashNormalized,extra:X({withW5Gasless:l.withW5Gasless})};return bd({type:"newLocalActivities",accountId:t,activities:[h]}),await _i({address:c,swapId:a,authToken:d,msgHash:l.msgHash}),Tc("onSwapCreated",t,h.timestamp-1),{activityId:h.id}}catch(t){throw await _i({address:c,swapId:a,authToken:d,error:Id(t)}),t}}function Id(t){return"string"==typeof t?t:t.stack}async function Dd(t,e){const{address:n}=await Ie(t),s=await Promise.allSettled(e.map((t=>function(t,e){return dn(`/swap/history/${t}/${e}`,{swapVersion:i.AuB})}(n,t.replace("swap:",""))))),r=[],a=s.map(((t,n)=>{if("rejected"!==t.status)return Ci(t.value);t.reason instanceof Wa.K$&&404===t.reason.statusCode&&r.push(e[n])})).filter(Boolean);return{nonExistentIds:r,swaps:a}}async function Bd(t,e){const n=(await Ie(t)).version;return cn("/swap/ton/estimate",{...e,swapVersion:i.AuB,walletVersion:n},{isAllowBadRequest:!0})}function Cd(t,e){return cn("/swap/ton/build",{...e,swapVersion:i.AuB,isMsgHashMode:!0},{authToken:t})}function Td(){return dn("/swap/assets")}function _d(){return dn("/swap/ton/tokens")}function Rd(t){return dn("/swap/pairs",{asset:t})}function xd(t){return cn("/swap/cex/estimate",t,{isAllowBadRequest:!0})}function Nd(t){return dn("/swap/cex/validate-address",t)}async function Pd(t,e,n){const s=await md(t,e),{swap:r}=await cn("/swap/cex/createTransaction",{...n,swapVersion:i.AuB},{authToken:s}),a=Ci(r);return bd({type:"newActivities",accountId:t,activities:[a]}),Tc("onSwapCreated",t,r.timestamp-1),{swap:r,activity:a}}async function Fd(t,e,n){const s=await $c(t,e,!1);if("ton"===t&&"msgHash"in s){const{accountId:t,password:r}=e,{address:a}=await Ie(t),o=await md(t,r);await _i({address:a,authToken:o,msgHash:s.msgHash,swapId:n})}return s}const Ud=30*gr,Od=vr,Md=30*gr,Wd={focused:vr,notFocused:10*vr},Ld=1e3;let Kd,Hd,jd;const qd=i.gmk?function(){const t={};let e;function n(e,n){if(t[e])return;const s=Object.values(Bc).map((t=>t.setupInactivePolling(e,n,Kd)));t[e]=()=>{for(const t of s)t()}}function s(){for(const[e,n]of Object.entries(t))n(),delete t[e]}const r=M.SB;return{setActiveAccount:r((async function(r){var a;if(r===e)return;if(void 0===r)return void s();if(!e||U(r).network!==U(e).network)return void await async function(t){s(),e=t;const{network:r}=U(e),a=await _e(),o=Object.keys(a).filter((t=>t!==e&&U(t).network===r));o.map((t=>n(t,a[t])))}(r);const o=e;e=r,null===(a=t[e])||void 0===a||a.call(t),delete t[e];const i=await Be(o);i&&n(o,i)})),addAccount:r((function(t,s){const r=t===e,a=e&&U(t).network===U(e).network;!r&&a&&n(t,s)})),removeAccount:r((function(e){var n;null===(n=t[e])||void 0===n||n.call(t),delete t[e]})),removeNetworkAccounts:r((function(t){e&&U(e).network===t&&s()})),removeAllAccounts:r((function(){s()}))}}():void 0,zd=function(){const t=new Map;return(e,n,s,r)=>{const a=`${e} ${s}`;let o=t.get(a);o||(o=new Li((t=>{Kd({type:"updatingStatus",kind:s,accountId:e,isUpdating:t})})),t.set(a,o)),o.toggle(n,r)}}();function Vd(t){var e;Kd=t,async function(){const t=await zn.all();await $n(t),Vn.resolve()}(),Promise.allSettled([gn(),Jd(),!i.OuE&&$d(),ld()]).then((()=>Pc())),Gd(),null===(e=Hd)||void 0===e||e(),Hd=function(){const t=[Ir({period:Ud,skipInitialPoll:!0,poll:Jd}).stop,Ir({period:Od,skipInitialPoll:!0,async poll(){await Promise.all([gn(),!i.OuE&&ld(),Gd(),$d()])}}).stop];return()=>{for(const e of t)e()}}()}async function Jd(){try{const t=await _c(),e=await dn("/assets",{base:t});for(const t of e)t.isFromBackend=!0;await Vn.promise;const n=Qn(),s=Object.values(n.bySlug).reduce(((t,e)=>(!e.isFromBackend&&e.tokenAddress&&t.push(e.tokenAddress),t)),[]),r=s.length?await cn(`/assets?base=${t}`,{assets:s.slice(0,Ld)}):void 0;await $n(e,Kd,r,t,!0)}catch(t){(0,N.SJ)("tryUpdateTokens",t)}}async function $d(){try{const t=await Td();await Vn.promise;const e=Qn(),n=t.reduce(((t,n)=>{var s;return t[n.slug]={...Z(n,["blockchain"]),chain:"blockchain"in n?n.blockchain:n.chain,tokenAddress:"contract"in n&&n.contract!==i.Tu9.symbol?n.contract:n.tokenAddress,price:(null===(s=e.bySlug[n.slug])||void 0===s?void 0:s.price)??0},t}),{});Kd({type:"updateSwapTokens",tokens:n})}catch(t){(0,N.SJ)("tryUpdateSwapTokens",t)}}async function Gd(){try{const t=await dn("/utils/get-config");!function(t){ni=t,si.resolve()}(t);const{isLimited:e,isCopyStorageEnabled:n=!1,supportAccountsCount:s=1,now:r,country:a,isUpdateRequired:o}=t;Kd({type:"updateConfig",isLimited:e,isCopyStorageEnabled:n,supportAccountsCount:s,countryCode:a,isAppUpdateRequired:o});const i=(new Date).getTime();Math.abs(r-i)>Md&&Kd({type:"incorrectTime"})}catch(t){(0,N.SJ)("tryUpdateRegion",t)}}async function Qd(t,e){var n;if(null===(n=jd)||void 0===n||n(),jd=void 0,null==qd||qd.setActiveAccount(t),t){const n=await Ce(t),s=[!i.TI6&&Zd(t,n).stop,...Object.keys(Bc).map((s=>Bc[s].setupActivePolling(t,n,Kd,zd.bind(void 0,t,s),function(t,e){const{slug:n}=ka(e).nativeToken;return Object.entries(t).reduce(((t,s)=>{let[r,a]=s;return(r===n||r.startsWith(`${e}-`))&&(t[r]=a),t}),{})}(e,s))))];jd=()=>{for(const t of s)t&&t()}}}function Zd(t,e){let n;const s=Z(e,["mnemonicEncrypted"]);return Ir({period:Wd,async poll(){try{const e=await cn("/account-config",s);Bs(e,n)||(n=e,Kd({type:"updateAccountConfig",accountId:t,accountConfig:e}))}catch(t){(0,N.SJ)("setupBackendAccountPolling",t)}}})}let Xd,Yd;function tl(t){Xd=t}async function el(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await _s;const n=!await Oe();await Ae.setItem("currentAccountId",t),ke(),i.hL1&&Tc("onFirstLogin"),n&&Yn(Xd),Qd(t,e)}async function nl(){Qd(void 0,{}),await Ae.removeItem("currentAccountId"),i.hL1&&Tc("onFullLogout")}function sl(t){return Ie(t)}function rl(t){return Ce(t)}function al(t){Yd=t}async function ol(t,e,n){var s;const r=null===(s=await xe(t,"dapps"))||void 0===s?void 0:s[e];if(r)return r[n]}async function il(t,e,n){const s=await ul(t);s[e.url]||(s[e.url]={}),s[e.url][n]=e,await Pe(t,"dapps",s)}async function cl(t,e,n,s){const r=await ul(t);return e in r&&(delete r[e][n],Wn(r[e])&&delete r[e],await Pe(t,"dapps",r),Yd&&Ns(Yd)&&Yd({type:"dappDisconnect",accountId:t,url:e}),s||await Tc("onDappDisconnected",t,e),await Tc("onDappsChanged"),!0)}async function dl(t){const e=Object.keys(await ul(t));await Pe(t,"dapps",{}),e.forEach((e=>{Yd({type:"dappDisconnect",accountId:t,url:e}),Tc("onDappDisconnected",t,e)})),await Tc("onDappsChanged")}async function ll(t){const e=await ul(t);return Object.values(e).flatMap((t=>Object.values(t)))}async function ul(t){return await xe(t,"dapps")||{}}function fl(){return Ae.getItem("dapps")}async function hl(t){await Ne(t,"dapps"),Tc("onDappsChanged")}async function pl(){await Ae.removeItem("dapps"),await Tc("onDappsChanged")}function ml(t){return Fe(t,"dapps")}function wl(t){let{isLandscape:e}=t;return dn("/v2/dapp/catalog",{isLandscape:e})}const{ton:yl,tron:gl}=Bc;function vl(t){return t?L.we(256).split(" "):yl.generateMnemonic()}function Al(t,e,n,s){return s||(s=i.RoE),kl(t,e,n,s)}function bl(t){return He(t)&&i.iAh||Bc.ton.validateMnemonic(t)}async function kl(t,e,n,s){const r=O(e);let a=He(e);const o=await yl.validateMnemonic(e);if(!(r||o||a&&i.iAh))throw new Error("Invalid mnemonic");const c=await je(e,n),d=await qe(c,n).catch((()=>{}));if(!n||!d)return{error:F.QD.DebugError};let l,u;try{if(a&&o&&(u=await yl.getWalletFromMnemonic(e,t,s),u.lastTxId&&(a=!1)),a){const n=gl.getWalletFromBip39Mnemonic(t,e);u=await yl.getWalletFromBip39Mnemonic(t,e),l={type:"bip39",mnemonicEncrypted:c,tron:n,ton:u}}else u||(u=r?await yl.getWalletFromPrivateKey(e[0],t,s):await yl.getWalletFromMnemonic(e,t,s)),l={type:"ton",mnemonicEncrypted:c,ton:u};const n=await Dl(t,l),d=i.TI6?await Sl({accountId:n,network:t,mnemonic:e,mnemonicEncrypted:c,version:s}):void 0;return el(n),{accountId:n,addressByChain:Me(l),secondNetworkAccount:d}}catch(t){return(0,Wa.QS)(t)}}async function Sl(t){const{mnemonic:e,version:n,mnemonicEncrypted:s}=t,{network:r,accountId:a}=t,o=await yl.getWalletFromMnemonic(e,r,n),i="testnet"===r?"mainnet":"testnet";o.address=Vt(o.address,!1,i);const c={type:"ton",mnemonicEncrypted:s,ton:o};return{accountId:await Dl(i,c,U(a).id),addressByChain:{ton:o.address},network:i}}async function El(t,e){const{publicKey:n,address:s,index:r,driver:a,deviceId:o,deviceName:i,version:c}=e;return{accountId:await Dl(t,{type:"ledger",ton:{type:"ton",address:s,publicKey:n,version:c,index:r},driver:a,deviceId:o,deviceName:i}),address:s,walletInfo:e}}const Il=(0,M.JL)(1);async function Dl(t,e,n){const s=await Il.run((async()=>{const s=await async function(t,e){const n=(await async function(){return Object.keys(await Ae.getItem("accounts")||{})}()).map((t=>U(t).id));return function(t){const{id:e,network:n}=t;return`${e}-${n}`}({id:void 0===e||n.includes(e)?0===n.length?be:Math.max(...n)+1:e,network:t})}(t,n);return await Pe(s,"accounts",e),s}));return function(t,e){null==qd||qd.addAccount(t,e)}(s,e),s}async function Bl(t){!function(t){null==qd||qd.removeNetworkAccounts(t)}(t),await Promise.all([nl(),Fe(t,"accounts"),xt().isDappSupported&&ml(t)])}async function Cl(){null==qd||qd.removeAllAccounts(),await Promise.all([nl(),Ae.removeItem("accounts"),xt().isDappSupported&&pl(),zn.clear()])}async function Tl(t,e,n){!function(t){null==qd||qd.removeAccount(t)}(t),await Promise.all([Ne(t,"accounts"),xt().isDappSupported&&hl(t)]),await el(e,n)}async function _l(t,e){for(const[n,s]of Object.entries(await _e())){if(!("mnemonicEncrypted"in s))continue;const r=await qe(s.mnemonicEncrypted,t),a=await je(r,e);await Re(n,{mnemonicEncrypted:a})}}async function Rl(t,e){try{const n={type:"view"};let s;if(e.ton){const r=await yl.getWalletFromAddress(t,e.ton);if("error"in r)return{...r,chain:"ton"};n.ton=r.wallet,s=r.title}e.tron&&(n.tron={type:"tron",address:e.tron,index:0});const r=await Dl(t,n);return el(r),{accountId:r,title:s,resolvedAddresses:Me(n)}}catch(t){return(0,Wa.QS)(t)}}async function xl(t,e){const{network:n}=U(t),s=await Te(t),r={...s,ton:yl.getOtherVersionWallet(n,s.ton,e)},a=await _e(),o=Object.entries(a).find((t=>{var e;let[,n]=t;return(null===(e=n.ton)||void 0===e?void 0:e.address)===r.ton.address&&n.type===r.type}));if(o)return{isNew:!1,accountId:o[0]};const i="ledger"===s.type?{index:s.ton.index,driver:s.driver}:void 0;return{isNew:!0,accountId:await Dl(n,r),address:r.ton.address,ledger:i}}const Nl=new Map;class Pl{promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}function Fl(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce();const e=new Pl;Nl.set(t,e);const{promise:n}=e;return{promiseId:t,promise:n}}function Ul(t,e){const n=Nl.get(t);n&&(n.resolve(e),Nl.delete(t))}var Ol=n(48287).Buffer;const Ml=Bc.ton;async function Wl(t,e){const n=await Ce(t),s=await fa(t,e,n);return Ol.from(s).toString("hex")}async function Ll(t,e){return ze(t,e,await Ce(t))}function Kl(){return W.wordlists.default}async function Hl(){try{const t=await _e();return!!t&&"object"==typeof t&&Object.keys(t).length>0}catch{return!1}}async function jl(t){try{const[e,n]=await async function(){const t=await _e();return Object.entries(t).find((t=>{let[,{type:e}]=t;return"ledger"!==e&&"view"!==e}))}()??[];if(!e||!n)return!1;const s=await ze(e,t,n);return Boolean(s)}catch{return!1}}function ql(t,e){Ul(t,e)}function zl(t,e){Ul(t,e)}function Vl(t,e){!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown rejection reason";const n=Nl.get(t);n&&(n.reject(new Wa.KB(e)),Nl.delete(t))}(t,e)}async function Jl(t,e){const{network:n}=U(t);return e||({address:e}=await Ie(t)),Ml.getWalletSeqno(n,e)}function $l(t,e){return Ee(t,e)}function Gl(t,e){return Bc.ton.isAddressInitialized(t,e)}function Ql(t,e,n){return Bc[t].getWalletBalance(e,n)}function Zl(t,e){return Bc.ton.getContractInfo(t,e)}function Xl(t,e){return Bc.ton.getWalletInfo(t,e)}async function Yl(t,e){try{return await mo(t,e)}catch(t){return(0,Wa.QS)(t)}}const{ton:tu}=Bc;async function eu(t){return"ton"in await Ce(t)?tu.getAccountNfts(t):[]}function nu(t){return tu.checkNftTransferDraft(t)}async function su(t,e,n,s,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0n;const{address:o}=await Ie(t),c=await tu.submitNftTransfers({accountId:t,password:e,nfts:n,toAddress:s,comment:r});if("error"in c)return c;const d=C(a,Object.keys(c.messages).length);return Yc(t,"ton",c.messages.map(((t,e)=>({txId:c.msgHashNormalized,amount:0n,fromAddress:o,toAddress:s,comment:r,fee:d,normalizedAddress:t.toAddress,slug:i.Tu9.slug,externalMsgHashNorm:c.msgHashNormalized,nft:null==n?void 0:n[e]})))),c}async function ru(t,e){return"ton"in await Ce(t)&&tu.checkNftOwnership(t,e)}const{ton:au}=Bc;function ou(t,e){const n=st(e,"address");return au.checkDnsRenewalDraft(t,n)}async function iu(t,e,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0n;const{address:r}=await Ie(t),a=G(n,"address"),o=[];for await(const{addresses:c,result:d}of au.submitDnsRenewal(t,e,Object.keys(a))){if("error"in d){o.push(d);continue}const e=Yc(t,"ton",c.map((t=>{const e=a[t];return{txId:d.msgHashNormalized,amount:0n,fromAddress:r,toAddress:e.address,fee:s/BigInt(n.length),normalizedAddress:e.address,slug:i.Tu9.slug,externalMsgHashNorm:d.msgHashNormalized,nft:e,type:"dnsRenew"}})));o.push({activityIds:st(e,"id")})}return o}function cu(t,e,n){return au.checkDnsChangeWalletDraft(t,e.address,n)}async function du(t,e,n,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0n;const{address:a}=await Ie(t),o=await au.submitDnsChangeWallet(t,e,n.address,s);if("error"in o)return o;const[c]=Yc(t,"ton",[{txId:o.msgHashNormalized,amount:0n,fromAddress:a,toAddress:n.address,fee:r,normalizedAddress:n.address,slug:i.Tu9.slug,externalMsgHashNorm:o.msgHashNormalized,nft:n,type:"dnsChangeAddress"}]);return{activityId:c.id}}let lu=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",t[t.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),uu=function(t){return t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",t[t.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",t[t.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",t[t.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",t}({}),fu=function(t){return t.MAINNET="-239",t.TESTNET="-3",t}({});const hu={rE:"4.0.3"};function pu(t){const e=["SendTransaction",{name:"SendTransaction",maxMessages:t?mu(t):Nt.Bm}];return t&&"ledger"===t.type||e.push({name:"SignData",types:["text","binary","cell"]}),{platform:wu(),appName:i.C39,appVersion:hu.rE,maxProtocolVersion:i.gY_,features:e}}function mu(t){const{type:e}=t;return"ledger"===e?Nt.EV:qo(t)}function wu(){var t;const{userAgent:e}=navigator,n=navigator.platform||(null===(t=navigator)||void 0===t||null===(t=t.userAgentData)||void 0===t?void 0:t.platform)||"";let s;return s=i.hL1||i.tKX?"browser":/Android/.test(e)?"android":-1!==["iPhone"].indexOf(n)?"iphone":-1!==["iPad","iPod"].indexOf(n)?"ipad":-1!==["macOS","Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(n)?"mac":-1!==["Win32","Win64","Windows","WinCE"].indexOf(n)?"windows":/Linux/.test(n)?"linux":"browser",s}class yu extends Wa.aU{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;super(t),this.code=e,this.displayError=n}}class gu extends yu{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Manifest content error",lu.MANIFEST_CONTENT_ERROR)}}class vu extends yu{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown error.",uu.UNKNOWN_ERROR)}}class Au extends yu{constructor(){let t=arguments.length>1?arguments[1]:void 0;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Bad request",uu.BAD_REQUEST_ERROR,t)}}class bu extends yu{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown app error",uu.UNKNOWN_APP_ERROR)}}class ku extends yu{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The method is not supported",uu.METHOD_NOT_SUPPORTED)}}var Su=n(48287).Buffer;let Eu;function Iu(){if(!Eu){let t;Eu=new Uint32Array(256);for(let e=0;e<256;e++){t=e;for(let e=0;e<8;e++)t=1&t?3988292384^t>>>1:t>>>1;Eu[e]=t}}return Eu}var Du=n(48287).Buffer;async function Bu(t,e,n,s,r){const a=t instanceof at.Address?t:at.Address.parse(t),o=await("cell"===s.type?function(t,e,n,s){const r=(0,at.beginCell)().storeUint(1968607266,32).storeUint((o=s.schema,function(t){const e=Iu();let n=-1;for(let s=0;s<t.length;s++)n=n>>>8^e[255&(n^t[s])];return(-1^n)>>>0}(Su.from(o))),32).storeUint(e,64).storeAddress(t).storeStringRefTail((0,Je.Xy)(n)).storeRef(at.Cell.fromBase64(s.cell)).endCell(),a=r.hash();var o;return new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}(a,e,n,s):async function(t,e,n,s){const r=Du.concat([Du.from([255,255]),Du.from("ton-connect/sign-data/"),Cu(t),Tu(Du.from(n),!0),_u(e,!0),Du.from("text"===s.type?"txt":"bin"),Tu("text"===s.type?Du.from(s.text,"utf8"):Du.from(s.bytes,"base64"),!0)]);return new Uint8Array(await It(r))}(a,e,n,s));return H().sign.detached(o,r)}function Cu(t){const e=Du.allocUnsafe(4+t.hash.length);return e.writeInt32BE(t.workChain),t.hash.copy(e,4),e}function Tu(t,e){const n=Du.allocUnsafe(4+t.length);return e?n.writeInt32BE(t.length):n.writeInt32LE(t.length),t.copy(n,4),n}function _u(t,e){const n=Du.allocUnsafe(8),s=BigInt(t);return e?n.writeBigInt64BE(s):n.writeBigInt64LE(s),n}const Ru=2e3;function xu(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return"string"==typeof t&&t.length<=e}function Nu(t){if(!xu(t,Ru))return!1;try{return new URL(t),!0}catch(t){return!1}}function Pu(t,e){return function(t){return"nft:transfer"===(null==t?void 0:t.type)}(e)?e.newOwner:jo(e)?e.destination:t}function Fu(t){return"unknown"===(null==t?void 0:t.type)}var Uu=n(48287).Buffer;const Ou="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Mu=Bc.ton;let Wu;const Lu=new Promise((t=>{Wu=t}));let Ku;function Hu(t){Ku=t,Wu()}async function ju(t,e,n){try{await tf(!0),Ku({type:"dappLoading",connectionType:"connect",isSse:t&&"sseOptions"in t});const s=await Xu(e.manifestUrl),r=t.url||s.url,a=e.items.find((t=>{let{name:e}=t;return"ton_addr"===e})),o=e.items.find((t=>{let{name:e}=t;return"ton_proof"===e})),i=o?{timestamp:Math.round(Date.now()/1e3),domain:new URL(r).host,payload:o.payload}:void 0;if(!a)throw new Au("Missing 'ton_addr'");if(i&&!i.domain.includes("."))throw new Au("Invalid domain");let c=await async function(){const t=await Oe();if(!t)throw new Au("The user is not authorized in the wallet");return t}();const{promiseId:d,promise:l}=Fl(),u={...s,url:r,connectedAt:Date.now(),...t.isUrlEnsured&&{isUrlEnsured:!0},..."sseOptions"in t&&{sse:t.sseOptions}},f=Ts(t);Ku({type:"dappConnect",identifier:"identifier"in t?t.identifier:void 0,promiseId:d,accountId:c,dapp:u,permissions:{address:!0,proof:!!i},proof:i});const h=await l;c=h.accountId,t.accountId=c,await il(c,u,f);const p=await Te(c),{address:m}=p.ton,w=pu(p),y=[await Qu(c,p.ton)];if(i){const{password:t,signature:e}=h;let n;n=t?await async function(t,e,n,s,r){const a=await ha(t,n,e),o=await async function(t,e,n){const{timestamp:s,domain:r,payload:a}=n,o=t instanceof at.Address?t:at.Address.parse(t),i=Du.concat([Du.from("ton-proof-item-v2/"),Cu(o),Tu(Du.from(r),!1),_u(s,!1),Du.from(a)]),c=Du.concat([Du.from([255,255]),Du.from("ton-connect"),Du.from(await It(i))]);return H().sign.detached(new Uint8Array(await It(c)),e)}(s,a.secretKey,r);return Zu(r,Ct(o))}(c,p,t,m,i):Zu(i,e),y.push(n)}return Ku({type:"updateDapps"}),Ku({type:"dappConnectComplete"}),{event:"connect",id:n,payload:{items:y,device:w}}}catch(t){return(0,N.SJ)("tonConnect:connect",t),(0,xn.A)((()=>{Ku({type:"dappCloseLoading",connectionType:"connect"})})),Gu(n,t)}}async function qu(t,e){try{const{url:n,accountId:s}=await Yu(t),r=Ts(t);if(!await ol(s,n,r))throw new bu;await async function(t,e,n,s){const r=await ol(t,e,n);r&&await il(t,{...r,...s},n)}(s,n,r,{connectedAt:Date.now()});const a=await Te(s),o=pu(a);return{event:"connect",id:e,payload:{items:[await Qu(s,a.ton)],device:o}}}catch(t){return(0,N.SJ)("tonConnect:reconnect",t),Gu(e,t)}}async function zu(t,e){try{const{url:e,accountId:n}=await Yu(t),s=Ts(t);await cl(n,e,s,!0),Ku({type:"updateDapps"})}catch(t){(0,N.SJ)("tonConnect:disconnect",t)}return{id:e.id,result:{}}}async function Vu(t,e){try{var n;const{url:s,accountId:r}=await Yu(t),{network:a}=U(r),o=JSON.parse(e.params[0]),{messages:c,network:d}=o,l=await Te(r),{type:u,ton:{address:f,publicKey:h}}=l,p=mu(l);if(c.length>p)throw new Au(`Payload contains more than ${p} messages, which exceeds limit`);const m=d?d===fu.MAINNET?"mainnet":"testnet":void 0;let w=o.valid_until;w&&w>10**10&&(w=Math.round(w/1e3));const y="ledger"===u;let g;if(o.from&&Vt(o.from)!==Vt(f)){const t=Bt(h);if(!y||!await async function(t,e,n){var s;const[r,a]=await Promise.all([Yr(t,n),jt(t,n)]);return"vesting"===(null===(s=r.contractInfo)||void 0===s?void 0:s.name)&&Bs(e,a)}(a,t,o.from))throw new Au(void 0,F.jf.WrongAddress);g=o.from}if(m&&a!==m)throw new Au(void 0,F.jf.WrongNetwork);await tf(!0),Ku({type:"dappLoading",connectionType:"sendTransaction",accountId:r,isSse:Boolean("sseOptions"in t&&t.sseOptions)});const{preparedMessages:v,checkResult:A}=await async function(t,e,n){const s=e.map((t=>{const{address:e,amount:s,payload:r,stateInit:a}=t;return{toAddress:ee(e)?Vt(e,!0,n):e,amount:BigInt(s),payload:r?at.Cell.fromBase64(r):void 0,stateInit:a?at.Cell.fromBase64(a):void 0}})),r=await Mu.checkMultiTransactionDraft(t,s);return"error"in r&&r.error===F.KL.InsufficientBalance&&r.emulation?{preparedMessages:s,checkResult:{emulation:{isFallback:!0,networkFee:r.emulation.networkFee},parsedPayloads:r.parsedPayloads}}:{preparedMessages:s,checkResult:r}}(r,c,a);if("error"in A)throw new Au(A.error,A.error);const b=Ts(t),k=await ol(r,s,b),S=await function(t,e,n,s){return Promise.all(e.map((async(r,a)=>{let{address:o,amount:i,payload:c,stateInit:d}=r;const l=BigInt(i),u=ee(o)?Vt(o,!0,t):o,f=Vt(o,void 0,t),h=(null==s?void 0:s[a])??(c?await As(t,u,c):void 0),{isScam:p}=bn(f)||{},m=n.isFallback?void 0:n.byTransactionIndex[a];return{toAddress:u,amount:l,rawPayload:c,payload:h,stateInit:d,normalizedAddress:f,isScam:p,isDangerous:Fu(h),displayedToAddress:Pu(u,h),networkFee:(null==m?void 0:m.networkFee)??C(n.networkFee,e.length)}})))}(a,c,A.emulation,A.parsedPayloads),{promiseId:E,promise:I}=Fl();Ku({type:"dappSendTransactions",promiseId:E,accountId:r,dapp:k,transactions:S,emulation:A.emulation.isFallback?void 0:Q(A.emulation,["activities","realFee"]),vestingAddress:g});const D=await I;if(w&&w<Date.now()/1e3)throw new Au("The confirmation timeout has expired");let B,T,_;if(y){const t=D,e=await Mu.sendSignedMessages(r,t);B=e.firstBoc,_=e.msgHashesNormalized[0],e.successNumber>0?e.successNumber<c.length&&Ku({type:"showError",error:F.jf.PartialTransactionFailure}):T="Failed transfers"}else{const t=D,e=await Mu.submitMultiTransfer({accountId:r,password:t,messages:v,expireAt:w});"error"in e?T=e.error:({boc:B,msgHashNormalized:_}=e)}if(T)throw new vu(T);return!A.emulation.isFallback&&(null===(n=A.emulation.activities)||void 0===n?void 0:n.length)>0?nd(r,"ton",_,A.emulation.activities):Yc(r,"ton",S.map((t=>{const{amount:e,normalizedAddress:n,payload:s,networkFee:r}=t,a="comment"===(null==s?void 0:s.type)?s.comment:void 0;return{txId:_,amount:e,fromAddress:f,toAddress:n,comment:a,fee:r,slug:i.Tu9.slug,externalMsgHashNorm:_}}))),Ku({type:"dappTransferComplete",accountId:r}),{result:B,id:e.id}}catch(t){return(0,N.SJ)("tonConnect:sendTransaction",t),Ju(t,e.id,"sendTransaction")}}function Ju(t,e,n){(0,xn.A)((()=>{Ku({type:"dappCloseLoading",connectionType:n})}));let s,r=uu.UNKNOWN_ERROR,a="Unhandled error";return t instanceof Wa.KB?(r=uu.USER_REJECTS_ERROR,a=t.message):t instanceof yu?(r=t.code,a=t.message,s=t.displayError):s=t instanceof Wa.K$?t.displayError:F.QD.Unexpected,Ku&&Ns(Ku)&&s&&Ku({type:"showError",error:s}),{error:{code:r,message:a},id:e}}async function $u(t,e){try{const{url:n,accountId:s}=await Yu(t),r=await Te(s);if("view"===r.type)throw new ku("Not supported by view-only accounts");if("ledger"===r.type)throw new ku("Not supported by Ledger");await tf(!0),Ku({type:"dappLoading",connectionType:"signData",accountId:s,isSse:Boolean("sseOptions"in t&&t.sseOptions)});const{promiseId:a,promise:o}=Fl(),i=Ts(t),c=await ol(s,n,i),d=JSON.parse(e.params[0]);Ku({type:"dappSignData",promiseId:a,accountId:s,dapp:c,payloadToSign:d});const l=await o,u=await async function(t,e,n,s,r){const{address:a}=e.ton,o=Math.floor(Date.now()/1e3),i=new URL(n.url).host,c=await ha(t,r,e);return{signature:Ct(await Bu(a,o,i,s,c.secretKey)),address:a,timestamp:o,domain:i,payload:s}}(s,r,c,d,l);return Ku({type:"dappSignDataComplete",accountId:s}),{result:u,id:e.id}}catch(t){return(0,N.SJ)("tonConnect:signData",t),Ju(t,e.id,"signData")}}function Gu(t,e){let n=lu.UNKNOWN_ERROR,s="Unhandled error";return e instanceof Wa.KB?(n=lu.USER_REJECTS_ERROR,s=e.message):e instanceof yu&&(n=e.code,s=e.message),{id:t,event:"connect_error",payload:{code:n,message:s}}}async function Qu(t,e){const{network:n}=U(t),{publicKey:s,address:r}=e,a=await Mu.getWalletStateInit(t,e);return{name:"ton_addr",address:Jt(r),network:"mainnet"===n?fu.MAINNET:fu.TESTNET,publicKey:s,walletStateInit:a.toBoc({idx:!0,crc32:!0}).toString("base64")}}function Zu(t,e){const{timestamp:n,domain:s,payload:r}=t,a=Uu.from(s);return{name:"ton_proof",proof:{timestamp:n,domain:{lengthBytes:a.byteLength,value:a.toString("utf8")},signature:e,payload:r}}}async function Xu(t){try{const{url:e,name:n,iconUrl:s}=await(0,an.x3)(t),r=s.startsWith("data:")||""===s?Ou:s;if(!Nu(e)||!xu(n)||!Nu(r))throw new Error("Invalid data");return{url:e,name:n,iconUrl:r,manifestUrl:t}}catch(t){throw(0,N.SJ)("fetchDapp",t),new gu}}async function Yu(t){if(!t.url)throw new Au("Missing `url` in request");if(t.accountId)return t;const{network:e}=U(await async function(){const t=await Oe();if(!t)throw new Error("The user is not authorized in the wallet");return t}()),n=await async function(t,e){const n=await fl()||{};let s,r=0;return Object.entries(n).forEach((n=>{let[a,o]=n;const i=o[e];i&&U(a).network===t&&Object.values(i).forEach((t=>{t.connectedAt>r&&(r=t.connectedAt,s=a)}))})),s}(e,t.url);if(!n)throw new Au("The connection is outdated, try relogin");return{...t,accountId:n}}async function tf(t){return!(!i.hL1||!t&&Ku&&Ns(Ku)||(await Tc("onWindowNeeded"),await Lu,0))}var ef=n(48287).Buffer;const nf=300,sf=24,rf=6e4;let af,of,cf,df=[];async function lf(t){let{url:e,isFromInAppBrowser:n,identifier:s}=t;const{searchParams:r,origin:a}=new URL(e),o=r.get("ret")||"back",i=Number(r.get("v")),c=r.get("id"),d="back"!==o&&"none"!==o,l=r.get("r");if(!l)return void(d&&(of={validUntil:Date.now()+rf,url:o,isFromInAppBrowser:n}));const u=(0,xn.A)((()=>JSON.parse(l)))||JSON.parse(decodeURIComponent(l));(0,N.MD)("SSE Start connection:",{version:i,appClientId:c,connectRequest:u,ret:o,connectionOrigin:a,identifier:s});const{secretKey:f,publicKey:h}=H().box.keyPair(),p=Dt(f),m=Dt(h),w={url:void 0,identifier:s,sseOptions:{clientId:m,appClientId:c,secretKey:p,lastOutputId:0}};if(await Se,!u)return void cf({type:"showError",error:"Invalid TON Connect link"});const y=await ju(w,u,0);if("connect_error"===y.event){const{code:t}=y.payload;[lu.MANIFEST_CONTENT_ERROR,lu.MANIFEST_NOT_FOUND_ERROR,lu.BAD_REQUEST_ERROR,lu.UNKNOWN_APP_ERROR,lu.METHOD_NOT_SUPPORTED].includes(t)&&cf({type:"showError",error:y.payload.message})}return await ff(y,p,m,c),"connect_error"!==y.event&&await uf(),d?o:void 0}async function uf(){const[t,e,n]=await Promise.all([Ae.getItem("sseLastEventId"),fl(),Ue()]);if(!e||!n)return;df=Object.entries(e).reduce(((t,e)=>{let[s,r]=e;if(U(s).network!==n)return t;for(const e of Object.values(r))for(const n of Object.values(e)){var a;null!==(a=n.sse)&&void 0!==a&&a.clientId&&t.push({...n.sse,accountId:s,url:n.url})}return t}),[]);const s=st(df,"clientId").filter(Boolean);s.length&&(af&&((0,xn.A)((()=>{af.close()})),af=void 0),af=function(t,e){const n=new URL(`${i.Qxf}events`);return n.searchParams.set("client_id",t.join(",")),e&&n.searchParams.set("last_event_id",e),new EventSource(n)}(s,t),af.onopen=()=>{(0,N.MD)("EventSource opened")},af.onerror=t=>{(0,N.SJ)("EventSource",t.type)},af.onmessage=async t=>{const{from:e,message:n}=JSON.parse(t.data),s=df.find((t=>{let{appClientId:n}=t;return n===e}));if(!s)return void(0,N.MD)(`Dapp with clientId ${e} not found`);const{accountId:r,clientId:o,appClientId:i,secretKey:c,url:d,lastOutputId:l}=s,u=function(t,e,n){const s=ef.from(t,"base64"),r=s.subarray(0,sf),a=s.subarray(sf),o=H().box.open(a,r,ef.from(e,"hex"),ef.from(n,"hex")),i=new TextDecoder("utf-8").decode(o);return JSON.parse(i)}(n,i,c);(0,N.MD)("SSE Event:",u),await function(t){return Ae.setItem("sseLastEventId",t)}(t.lastEventId);const f={clientId:o,appClientId:i,secretKey:c,lastOutputId:l},h=await a[u.method]({url:d,accountId:r,sseOptions:f},u);if(await ff(h,c,o,i),of){const{validUntil:t,url:e,isFromInAppBrowser:n}=of;t>Date.now()&&cf({type:"openUrl",url:e,isExternal:!n}),of=void 0}})}function ff(t,e,n,s,r){const a=function(t,e,n){const s=(0,K.randomBytes)(sf),r=H().box(t,s,ef.from(e,"hex"),ef.from(n,"hex"));return ef.concat([s,r]).toString("base64")}(ef.from(JSON.stringify(t)),s,e);return async function(t,e,n,s){const r=new URL(`${i.Qxf}message`);r.searchParams.set("client_id",e),r.searchParams.set("to",n),r.searchParams.set("ttl",nf.toString()),s&&r.searchParams.set("topic",s);const a=await fetch(r,{method:"POST",body:t});await(0,an.EQ)(a)}(a,n,s,r)}async function hf(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.wOb;await Vn.promise;const s=Zn(t);return s?dn(`/prices/chart/${s.chain===i.Tu9.chain&&s.tokenAddress?s.tokenAddress:s.symbol}`,{base:n,period:e}):[]}async function pf(t){try{return await cn("/notifications/subscribe",t,{shouldRetry:!0})}catch(t){return(0,N.SJ)("subscribeNotifications",t),(0,Wa.QS)(t)}}async function mf(t){try{return await cn("/notifications/unsubscribe",t,{shouldRetry:!0})}catch(t){return(0,N.SJ)("unsubscribeNotifications",t),(0,Wa.QS)(t)}}async function wf(t,e){!function(t){Rs=t}(t);const n=Rt(e);oe||(oe=function(t,e,n){const s=new de(t,void 0,n,void 0,void 0);function r(t){let{data:e}=t;s.onMessage(e)}return t.addEventListener("message",r),s.destroy=()=>{t.removeEventListener("message",r)},s}(self,0,i.Pcx),oe.init()),tl(t),Vd(t),qc(t),kd(t),n.isDappSupported&&(al(t),Hu(t)),n.isSseSupported&&(cf=t),await function(t,e,n){return _s=async function(t,e,n){let s=Number(await Ae.getItem("stateVersion",!0));if(19===s)return;if(i.TI6&&!s&&await async function(t){const e=i.hL1?Ae:ve,[n="v3R2",s,r,a,o,c,d]=await Promise.all([e.getItem("walletVersion"),e.getItem("isTestnet"),e.getItem("address"),e.getItem("words"),e.getItem("publicKey"),e.getItem("proxy"),e.getItem("magic")]);s&&t({type:"updateSettings",settings:{isTestnet:!0}});const l=s?"testnet":"mainnet",u=`0-ton-${l}`;if(r&&a&&o){const i="mainnet"===l?"testnet":"mainnet",f=`0-ton-${i}`,h=Vt(r,!1,i),p={};p[u]={type:"ton",mnemonicEncrypted:a,ton:{type:"ton",address:r,version:n,publicKey:o,index:0}},p[f]={type:"ton",mnemonicEncrypted:a,ton:{type:"ton",address:h,version:n,publicKey:o,index:0}},await Ae.setItem("accounts",p),t({type:"migrateCoreApplication",isTestnet:s,accountId:u,address:r,secondAccountId:f,secondAddress:h,isTonProxyEnabled:c,isTonMagicEnabled:d}),["walletVersion","isTestnet","words","address","publicKey","magic","proxy","isLedger","ledgerTransportType","__time","isDebug"].forEach((t=>{e.removeItem(t)}))}}(t),i.UMQ&&!s)if(await Ae.getItem("accounts",!0))s=10;else{const t=await ye.getItem("stateVersion");t&&(s=Number(t))}if(i.hL1&&!s&&!await Ae.getItem("addresses")&&(s=await ye.getItem("stateVersion"),s)){const t=await ye.getAll();await Ae.setMany(t)}if(!s)return void await Ae.setItem("stateVersion",19);if(!s){const t=await Ae.getItem("mnemonicEncrypted");if(t&&(await Ae.setItem("mnemonicsEncrypted",JSON.stringify({[i.Kih]:t})),await Ae.removeItem("mnemonicEncrypted")),!t)for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=await Ae.getItem(t);if(!e)continue;const n=JSON.parse(e),s=Object.entries(n).reduce(((t,e)=>{let[n,s]=e;const[r,a="ton"]=n.split("-");return t[[r,a].join("-")]=s,t}),{});await Ae.setItem(t,JSON.stringify(s))}s=1,await Ae.setItem("stateVersion",s)}if(1===s){const t=await Ae.getItem("addresses");if(t&&t.includes("-undefined"))for(const t of["mnemonicsEncrypted","addresses","publicKeys"]){const e=(await Ae.getItem(t)).replace("-undefined","-ton");await Ae.setItem(t,e)}s=2,await Ae.setItem("stateVersion",s)}if(s>=2&&s<=4){for(const t of["addresses","mnemonicsEncrypted","publicKeys","dapps"]){const e=await Ae.getItem(t);"string"==typeof e&&await Ae.setItem(t,JSON.parse(e))}s=5,await Ae.setItem("stateVersion",s)}if(5===s){const t=await Ae.getItem("dapps");if(t){for(const e of Object.values(t))for(const t of Object.values(e))t.connectedAt=1;await Ae.setItem("dapps",t)}s=6,await Ae.setItem("stateVersion",s)}if(6===s){for(const t of["addresses","mnemonicsEncrypted","publicKeys","accounts","dapps"]){let e=await Ae.getItem(t);e&&(e=Object.entries(e).reduce(((t,e)=>{let[n,s]=e;const r=U(n),a=Ps({...r,network:"mainnet"}),o=Ps({...r,network:"testnet"});return{...t,[a]:s,[o]:s}}),{}),await Ae.setItem(t,e))}s=7,await Ae.setItem("stateVersion",s)}if(7===s){const e=await Ae.getItem("addresses");if(e){const n=await Ae.getItem("publicKeys"),s=await Ae.getItem("accounts")??{};for(const[r,a]of Object.entries(e)){const e=Vt(a,!1);s[r]={...s[r],address:e,publicKey:n[r]},t({type:"updateAccount",accountId:r,chain:"ton",address:e})}await Ae.setItem("accounts",s),await Ae.removeItem("addresses"),await Ae.removeItem("publicKeys")}s=8,await Ae.setItem("stateVersion",s)}if(8===s){if(xt().isSseSupported){const t=await Ae.getItem("dapps");if(t){const e=[];for(const n of Object.values(t))for(const t of Object.values(n)){var r,a;null!==(r=t.sse)&&void 0!==r&&r.appClientId&&e.push({clientId:null===(a=t.sse)||void 0===a?void 0:a.appClientId})}}}s=9,await Ae.setItem("stateVersion",s)}if(9===s){if(i.UMQ){const t=await ye.getAll();for(const[e,n]of Object.entries(t))if(await fe.setItem(e,n),!Bs(n,await fe.getItem(e,!0)))throw new Error("Migration error!");await ye.clear()}s=10,await Ae.setItem("stateVersion",s)}let o=!1;if(xt().isIosApp&&s>=10&&s<=13&&(await Fs(),o=!0),10===s||11===s||12===s){const t=await Ae.getItem("accounts",!0);if(t){for(const n of Object.values(t)){const{publicKey:t,address:s,version:r}=n;if(r||!t)continue;const a=Bt(t),o=e.pickWalletByAddress("mainnet",a,s);n.version=o.version}await Ae.setItem("accounts",t)}s=13,await Ae.setItem("stateVersion",s)}if(13===s){const e=await Ae.getItem("accounts",!0);if(e){for(const[n,s]of Object.entries(e)){const{network:e}=U(n);"testnet"===e&&(s.address=Vt(s.address,!1,e),t({type:"updateAccount",accountId:n,chain:"ton",address:s.address}))}s=14,await Ae.setItem("accounts",e)}}14!==s&&15!==s||(xt().isIosApp&&!o&&await Fs(),s=16,await Ae.setItem("stateVersion",s)),16===s&&(await async function(){const t=await Ae.getItem("accounts");if(!t)return;const e=await Ae.getItem("mnemonicsEncrypted"),n={};for(const[s,r]of Object.entries(t)){const{address:t,version:a,publicKey:o,authToken:i,ledger:c,isInitialized:d}=r,l={type:"ton",address:t,version:a,publicKey:o,authToken:i,isInitialized:d,index:(null==c?void 0:c.index)??0};n[s]=c?{type:"ledger",ton:l,driver:c.driver,deviceId:c.deviceId,deviceName:c.deviceName}:{type:"ton",mnemonicEncrypted:e[s],ton:l}}await Ae.setItem("accounts",n)}(),s=17,await Ae.setItem("stateVersion",s)),17===s&&(await async function(){const t=await Ae.getItem("dapps");if(!t)return;const e={};for(const[n,s]of Object.entries(t)){e[n]={};for(const[t,r]of Object.entries(s)){const s=Ts(r);e[n][t]={[s]:r}}}await Ae.setItem("dapps",e)}(),s=18,await Ae.setItem("stateVersion",s)),18===s&&(await async function(t){if(!t||0===t.length)return;const e=await Ae.getItem("accounts");e&&await Ae.setItem("accounts",Q(e,t))}(n),s=19,await Ae.setItem("stateVersion",s))}(t,e,n).catch((t=>{var e;(0,N.SJ)("Migration error",t),null===(e=Rs)||void 0===e||e({type:"showError",error:"Migration error"})})),_s}(t,Bc.ton,e.accountIds),n.isSseSupported&&uf(),async function(t){let e=await Ae.getItem("referrer");void 0===e&&(t.referrer?e=t.referrer:({referrer:e}=await dn("/referrer/get")),await Ae.setItem("referrer",e??""))}(e)}!function(t){for(const[e,n]of Object.entries(t))Cc[e]=(Cc[e]??[]).concat([n])}({onDappDisconnected:async function(t,e){const n=df.find((n=>n.url===e&&n.accountId===t));if(!n)return;const{secretKey:s,clientId:r,appClientId:a}=n,o={event:"disconnect",id:n.lastOutputId+1,payload:{}};await ff(o,s,r,a)},onDappsChanged:uf}),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self;function s(t,s){t.channel=e,s?n.postMessage(t,s):n.postMessage(t)}(arguments.length>3?arguments[3]:void 0)||function(t){self.onerror=e=>{var n,s;const r=(null===(n=e.error)||void 0===n?void 0:n.message)||"Uncaught exception in worker";(0,N.SJ)(r,e.error),t({type:"unhandledError",error:{message:r,stack:null===(s=e.error)||void 0===s?void 0:s.stack}})},self.addEventListener("unhandledrejection",(e=>{var n,s;const r=(null===(n=e.reason)||void 0===n?void 0:n.message)||"Unhandled rejection in worker";(0,N.SJ)(r,e.reason),t({type:"unhandledError",error:{message:r,stack:null===(s=e.reason)||void 0===s?void 0:s.stack}})}))}(s),n.addEventListener("message",(function(n){var r;(null===(r=n.data)||void 0===r?void 0:r.channel)===e&&async function(t,e,n,s,r){switch(s||(s=t=>{n({type:"update",update:t})}),e.type){case"init":{var a;const{args:n}=e,o="function"==typeof t?t("init",r,s,...n):null===(a=t.init)||void 0===a?void 0:a.call(t,s,...n);await o;break}case"callMethod":{const{messageId:s,name:a,args:o,withCallback:i}=e;try{if("function"!=typeof t&&!t[a])return;if(s&&i){const t=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const a=e[e.length-1];var o;n({type:"methodCallback",messageId:s,callbackArgs:e},(o=a)instanceof ArrayBuffer||o instanceof ImageBitmap?[a]:void 0)};P.set(s,t),o.push(t)}const e="function"==typeof t?await t(a,r,...o):await t[a](...o),{arrayBuffer:c}="object"==typeof e&&e&&"arrayBuffer"in e||{};s&&n({type:"methodResponse",messageId:s,response:e},c?[c]:void 0)}catch(t){(0,N.SJ)(a,t),s&&n({type:"methodResponse",messageId:s,error:{message:t.message}})}s&&P.delete(s);break}case"cancelProgress":{const t=P.get(e.messageId);t&&(t.isCanceled=!0);break}}}(t,n.data,s)}))}((function(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];return"init"===t?wf(s[0],s[1]):t.startsWith("tonConnect_")?(t=t.replace("tonConnect_",""),(0,a[t])(...s)):(0,o[t])(...s)}))},15340:()=>{},19314:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const s=new WeakMap;function r(t){return function(){let e=s.get(t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];const o=r.map(String).join("_");if(e){const t=e.get(o);if(t)return t}else e=new Map,s.set(t,e);const i=t(...r);return e.set(o,i),i}}},23174:(t,e,n)=>{"use strict";n.d(e,{Dn:()=>s.D,KL:()=>r.KL,Nu:()=>r.Nu,QD:()=>r.QD,jf:()=>r.jf});var s=n(10428),r=n(56051)},31481:(t,e,n)=>{"use strict";n.d(e,{APY:()=>St,AuB:()=>Bt,BV6:()=>tt,C39:()=>o,FHx:()=>w,Guj:()=>r,HGV:()=>I,HUv:()=>C,InW:()=>m,Irq:()=>b,Kih:()=>v,KmP:()=>kt,Kzb:()=>W,MVx:()=>d,N7B:()=>U,NFS:()=>N,Oig:()=>c,OuE:()=>x,PcM:()=>g,Pcx:()=>ft,Pjb:()=>j,Q$0:()=>D,Qxf:()=>R,RoE:()=>mt,SKs:()=>B,TI6:()=>a,TUC:()=>vt,Tu9:()=>V,UMQ:()=>u,VG8:()=>it,WRE:()=>At,WVU:()=>Et,X1K:()=>P,X6R:()=>q,X7L:()=>st,X7T:()=>J,_$E:()=>T,_J8:()=>A,aPk:()=>O,cSq:()=>gt,dGN:()=>et,dL4:()=>L,dqR:()=>F,eO4:()=>_,eZ2:()=>wt,eaP:()=>Ct,gR8:()=>bt,gY_:()=>K,gmk:()=>f,gs5:()=>_t,hL1:()=>l,hl5:()=>i,iAh:()=>y,iQn:()=>yt,kNZ:()=>It,lHX:()=>S,lfO:()=>dt,oWZ:()=>nt,pV9:()=>pt,pyR:()=>E,q5n:()=>H,qL:()=>z,qMf:()=>M,rQT:()=>ut,rUK:()=>X,rcB:()=>Dt,tKX:()=>h,vPi:()=>lt,wOb:()=>ht,wpN:()=>ot,xlJ:()=>k,xrY:()=>Y,yTE:()=>p,zll:()=>G});var s=n(65606);const r="production",a=!0,o=a?"TON Wallet":"MyTonWallet",i="4.0.3",c="production"!==r&&"perf"!==r&&"test"!==r,d=!1,l=!1,u=(s.env.IS_OPERA_EXTENSION,!1),f=!1,h=!1,p="UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp",m="UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG",w="Shoot!\nSomething went wrong, please see the error details in Dev Tools Console.",y=!a,g=64,v="0-ton-mainnet",A="https://toncenter.mytonwallet.org",b="",k="",S="https://tonapiio.mytonwallet.org",E="https://toncenter-testnet.mytonwallet.org",I="",D="",B="https://tonapiio-testnet.mytonwallet.org",C="https://api.mytonwallet.org",T="https://api.mytonwallet.org/proxy",_="https://ipfs.io/ipfs/",R="https://tonconnectbridge.mytonwallet.org/bridge/",x=a,N=65536e3,P=1000000000n,F=15000000n,U=12e5,O=[],M="EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o",W="EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE",L=100000000n,K=2,H=["0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2","0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2"],j=/^https?:\/\/nft\.(fragment\.com\/gift\/[\w-]+-\d+)\.\w+$/i,q="super:telegram-gifts",z="EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM",V={name:"Toncoin",symbol:"TON",slug:"toncoin",decimals:9,chain:"ton",cmcSlug:"toncoin"},J={name:"TRON",symbol:"TRX",slug:"trx",decimals:6,chain:"tron",cmcSlug:"tron"},$={name:"MyTonWallet Coin",symbol:"MY",slug:"ton-eqcfvnlrbn",decimals:9,chain:"ton",minterAddress:"EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w"},G={ton:{isMemoSupported:!0,isDnsSupported:!0,addressRegex:/^([-\w_]{48}|0:[\da-h]{64})$/i,addressPrefixRegex:/^([-\w_]{1,48}|0:[\da-h]{0,64})$/i,nativeToken:V},tron:{isMemoSupported:!1,isDnsSupported:!1,addressRegex:/^T[1-9A-HJ-NP-Za-km-z]{33}$/,addressPrefixRegex:/^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,nativeToken:J,mainnet:{apiUrl:"https://tronapi.mytonwallet.org",usdtAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"},testnet:{apiUrl:"https://api.shasta.trongrid.io",usdtAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs"}}},Q="tron-tr7nhqjekq",Z="tron-tg3xxyexbk",X="ton-eqcxe6mutq",Y="EQC3roTiRRsoLzfYVK7yVVoIZjTEqAjQU3ju7aQ7HWTVL5o5",tt="EQChGuD1u0e7KUWHH5FaYh_ygcLXhsdG2nSHPXHW8qqnpZXW",et=new Set([V.slug,X,J.slug,Q]),nt="EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez",st="https://dns-image.mytonwallet.org/img?d=",rt={name:"Tether USD",symbol:"USDT",decimals:6,chain:"tron"},at={name:"Tether USD",symbol:"USD₮",chain:"ton",slug:X,decimals:6,tokenAddress:"EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs"},ot={name:"Ethena USDe",symbol:"USDe",chain:"ton",tokenAddress:"EQAIb6KmdfdDR7CN1GBqVJuP25iCnLKCvBlJ07Evuu2dzP5f",slug:"ton-eqaib6kmdf",decimals:6,image:"https://imgproxy.toncenter.com/binMwUmcnFtjvgjp4wSEbsECXwfXUwbPkhVvsvpubNw/pr:small/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvVVNEZS5wbmc"},it={name:"Ethena tsUSDe",symbol:"tsUSDe",chain:"ton",tokenAddress:"EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr",slug:"ton-eqdq5uuyph",decimals:6,image:"https://cache.tonapi.io/imgproxy/vGZJ7erwsWPo7DpVG_V7ygNn7VGs0szZXcNLHB_l0ms/rs:fill:200:200:1/g:no/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvdHNVU0RlLnBuZw.webp"},ct=(it.tokenAddress,V.slug,J.slug,V.slug,J.slug,{isFromBackend:!0,price:0,priceUsd:0,percentChange24h:0}),dt={toncoin:{...V,isFromBackend:!0,price:3.1,priceUsd:3.1,percentChange24h:0},trx:{...J,...ct},[Q]:{...rt,slug:Q,tokenAddress:"TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",...ct},[Z]:{...rt,slug:Z,tokenAddress:"TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs",...ct},[X]:{...at,image:"https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp",slug:X,...ct},[$.slug]:{...$,image:"https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp",...ct},[ot.slug]:{...ot,...ct},[it.slug]:{...it,...ct}},lt=(V.symbol,V.chain,V.slug,V.decimals,V.slug,V.slug,V.slug,"keyval-store"),ut="keyval",ft="windowProvider",ht="USD",pt=(V.symbol,"UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ"),mt="W5",wt=["v3R1","v3R2","v4R2","W5"],yt=["v3R2","v4R2"],gt=1e4,vt=3,At=500,bt=4,kt="EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW",St=30000000n,Et=["EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2","EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ","EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s","EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm","EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd","EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD","EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p","EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO","EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe","EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-","EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu","EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH","EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy","EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT","EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu","EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw"],It=/((ftp|https?):\/\/)?(?<host>(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z][-a-zA-Z0-9]{1,62})\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g,Dt=/telegram[:\s-]*((@[a-z0-9_]+)|(https:\/\/)?(t\.me|telegram\.me|telegram\.dog)\/[a-z0-9_]+)/gim,Bt=(new Set(["173e31eee054cb0c76f77edc7956bed766bf48a1f63bd062d87040dcd3df700f","5226dd4e6db9af26b24d5ca822bc4053b7e08152f923932abf25030c7e38bb42","fea2c08a704e5192b7f37434927170440d445b87aab865c3ea2a68abe7168204","e691cf9081a8aeb22ed4d94829f6626c9d822752e035800b5543c43f83d134b5","301ce25925830d713b326824e552e962925c4ff45b1e3ea21fc363a459a49b43","02250f83fbb8624d859c2c045ac70ee2b3b959688c3d843aec773be9b36dbfc3","dba3adb2c917db80fd71a6a68c1fc9e12976491a8309d5910f9722efc084ce4d","7da9223b90984d6a144e71611a8d7c65a6298cad734faed79438dc0f7a8e53d1","ddf80de336d580ab3c11d194f189c362e2ca1225cae224ea921deeaba7eca818"]),new Set(["ton-eqcqc6ehrj","ton-eqcbzvsfwq",it.slug]),V.slug,V.slug,2),Ct="v1",Tt=[{suffixes:["ton"],baseFormat:/^([-\da-z]+\.){0,2}[-\da-z]{4,126}$/i,resolver:"EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz",collectionName:"TON DNS Domains"},{suffixes:["t.me"],baseFormat:/^([-\da-z]+\.){0,2}[-_\da-z]{4,32}$/i,resolver:"EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi",isTelemint:!0,collectionName:"Telegram Usernames"},{suffixes:["vip","ton.vip","vip.ton"],baseFormat:/^([-\da-z]+\.){0,2}?[\da-z]{1,24}$/i,resolver:"EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS",collectionName:"VIP DNS Domains",isUnofficial:!0},{suffixes:["gram"],baseFormat:/^([-\da-z]+\.){0,2}[\da-z]{1,127}$/i,resolver:"EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ",collectionName:"GRAM DNS Domains",isUnofficial:!0}],_t=a?Tt.filter((t=>{let{isUnofficial:e}=t;return!e})):Tt},37836:(t,e,n)=>{"use strict";n.d(e,{Gf:()=>o,JL:()=>i,SB:()=>c,nF:()=>a,v7:()=>r});var s=n(9705);const r=t=>new Promise((e=>{setTimeout((()=>e()),t)}));function a(t,e){let n,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!1;async function o(){await("function"==typeof e?e():r(e)),i()}async function i(){if(n)try{const e=n;n=void 0,await t(...e)}finally{o()}else a=!1}return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n=e,a||(a=!0,s?i():o())}}function o(t,e){const n=setTimeout(e,t);return()=>clearTimeout(n)}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=[];let n=0;const r=r=>{const a=new s.A;return e.push((async()=>{try{a.resolve(await r())}catch(t){a.reject(t)}})),n<t&&(async()=>{for(n++;e.length;){const t=e.shift();await t()}n--})(),a.promise};return{run:r,wrap:t=>function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return r((()=>t(...n)))}}}function c(t){return i(1).wrap(t)}},39989:(t,e,n)=>{"use strict";n.d(e,{K$:()=>o,KB:()=>a,QS:()=>i,aU:()=>r});var s=n(23174);class r extends Error{constructor(t,e){super(t),this.displayError=e,this.name=this.constructor.name}}class a extends r{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Canceled by the user")}}class o extends r{constructor(t,e){super(t,s.QD.ServerError),this.statusCode=e}}function i(t){if(t instanceof o)return{error:t.displayError};throw t}},45232:(t,e,n)=>{"use strict";n.d(e,{EQ:()=>f,I5:()=>p,J5:()=>l,fU:()=>m,x3:()=>c,x6:()=>d});var s=n(31481),r=n(39989),a=n(55029),o=n(37836);const i=3e4;function c(t,e,n){return d(function(t){return`${s._$E}/download-json?url=${encodeURIComponent(t)}`}(t.toString()),e,n)}async function d(t,e,n){const s=new URL(t);return e&&Object.entries(e).forEach((t=>{let[e,n]=t;void 0!==n&&(Array.isArray(n)?n.forEach((t=>{s.searchParams.append(e,t.toString())})):s.searchParams.set(e,n.toString()))})),(await l(s,n)).json()}async function l(t,e,n){const{retries:c=s.TUC,timeouts:d=s.cSq,shouldSkipRetryFn:l=h}=n??{};let f,p="Unknown error.";for(let n=1;n<=c;n++)try{n>1&&(0,a.MD)(`Retry request #${n}:`,t.toString(),f);const s=Array.isArray(d)?d[n-1]??d[d.length-1]:Math.min(d*n,i),r=await u(t,e,s);if(f=r.status,f>=400){const{error:t}=await r.json().catch((()=>{}));throw new Error(t??`HTTP Error ${f}`)}return r}catch(t){if(p="string"==typeof t?t:t.message??p,l(p,f))throw new r.K$(p,f);n<c&&await(0,o.v7)(s.WRE*n)}throw new r.K$(p)}async function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.cSq;const r=new AbortController,a=setTimeout((()=>{r.abort()}),n);try{return await fetch(t,{...e,signal:r.signal})}finally{clearTimeout(a)}}async function f(t,e){if(!(t.ok||null!=e&&e.includes(t.status))){let{error:e,errors:s}=await t.json().catch((()=>{}));var n;throw!e&&s&&s.length&&(e=null===(n=s[0])||void 0===n?void 0:n.msg),new r.K$(e??`HTTP Error ${t.status}`,t.status)}return t}function h(t,e){return e&&[400,404].includes(e)}function p(t){return`${s._$E}/download-lottie?url=${encodeURIComponent(t)}`}function m(t){return t.replace("ipfs://",s.eO4)}},50110:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var s=n(31481),r=n(2188);const a=!s.MVx;function o(t,e){if(!a)return t();const{rescue:n,always:s,shouldIgnoreError:o}=e??{};try{return t()}catch(t){return null==n||n(t),void(o||(0,r.H)(t))}finally{null==s||s()}}},52598:function(t,e){!function(t){"use strict";const e=Object.freeze({__proto__:null,default:{}}),n=BigInt(0),s=BigInt(1),r=BigInt(2),a=BigInt(8),o=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),i=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:o,n:o,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),c=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),d=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const l=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),u=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),f=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),h=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class p{constructor(t,e,n,s){this.x=t,this.y=e,this.z=n,this.t=s}static fromAffine(t){if(!(t instanceof b))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(b.ZERO)?p.ZERO:new p(t.x,t.y,s,N(t.x*t.y))}static toAffineBatch(t){const e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const r=new Array(t.length),a=P(t.reduce(((t,s,a)=>s===n?t:(r[a]=t,N(t*s,e))),s),e);return t.reduceRight(((t,s,a)=>s===n?t:(r[a]=N(t*r[a],e),N(t*s,e))),a),r}(t.map((t=>t.z)));return t.map(((t,n)=>t.toAffine(e[n])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){w(t);const{x:e,y:n,z:s}=this,{x:r,y:a,z:o}=t,i=N(e*o),c=N(r*s),d=N(n*o),l=N(a*s);return i===c&&d===l}negate(){return new p(N(-this.x),this.y,this.z,N(-this.t))}double(){const{x:t,y:e,z:n}=this,{a:s}=i,a=N(t*t),o=N(e*e),c=N(r*N(n*n)),d=N(s*a),l=t+e,u=N(N(l*l)-a-o),f=d+o,h=f-c,m=d-o,w=N(u*h),y=N(f*m),g=N(u*m),v=N(h*f);return new p(w,y,v,g)}add(t){w(t);const{x:e,y:s,z:a,t:o}=this,{x:i,y:c,z:d,t:l}=t,u=N((s-e)*(c+i)),f=N((s+e)*(c-i)),h=N(f-u);if(h===n)return this.double();const m=N(a*r*l),y=N(o*r*d),g=y+m,v=f+u,A=y-m,b=N(g*h),k=N(v*A),S=N(g*A),E=N(h*v);return new p(b,k,E,S)}subtract(t){return this.add(t.negate())}precomputeWindow(t){const e=1+256/t,n=[];let s=this,r=s;for(let a=0;a<e;a++){r=s,n.push(r);for(let e=1;e<2**(t-1);e++)r=r.add(s),n.push(r);s=r.double()}return n}wNAF(t,e){!e&&this.equals(p.BASE)&&(e=b.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&A.get(e);r||(r=this.precomputeWindow(n),e&&1!==n&&(r=p.normalizeZ(r),A.set(e,r)));let a=p.ZERO,o=p.BASE;const i=1+256/n,c=2**(n-1),d=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let e=0;e<i;e++){const n=e*c;let i=Number(t&d);t>>=u,i>c&&(i-=l,t+=s);const f=n,h=n+Math.abs(i)-1,p=e%2!=0,w=i<0;0===i?o=o.add(m(p,r[f])):a=a.add(m(w,r[h]))}return p.normalizeZ([a,o])[0]}multiply(t,e){return this.wNAF(K(t,i.l),e)}multiplyUnsafe(t){let e=K(t,i.l,!1);const r=p.BASE,a=p.ZERO;if(e===n)return a;if(this.equals(a)||e===s)return this;if(this.equals(r))return this.wNAF(e);let o=a,c=this;for(;e>n;)e&s&&(o=o.add(c)),c=c.double(),e>>=s;return o}isSmallOrder(){return this.multiplyUnsafe(i.h).equals(p.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(i.l/r).double();return i.l%r&&(t=t.add(this)),t.equals(p.ZERO)}toAffine(t){const{x:e,y:n,z:r}=this,o=this.equals(p.ZERO);null==t&&(t=o?a:P(r));const i=N(e*t),c=N(n*t),d=N(r*t);if(o)return b.ZERO;if(d!==s)throw new Error("invZ was invalid");return new b(i,c)}fromRistrettoBytes(){g()}toRistrettoBytes(){g()}fromRistrettoHash(){g()}}function m(t,e){const n=e.negate();return t?n:e}function w(t){if(!(t instanceof p))throw new TypeError("ExtendedPoint expected")}function y(t){if(!(t instanceof v))throw new TypeError("RistrettoPoint expected")}function g(){throw new Error("Legacy method: switch to RistrettoPoint")}p.BASE=new p(i.Gx,i.Gy,s,N(i.Gx*i.Gy)),p.ZERO=new p(n,s,s,n);class v{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){const{d:e}=i,n=N(d*t*t),r=N((n+s)*f);let a=BigInt(-1);const o=N((a-e*n)*N(n+e));let{isValid:c,value:u}=O(r,o),m=N(u*t);T(m)||(m=N(-m)),c||(u=m),c||(a=n);const w=N(a*(n-s)*h-o),y=u*u,g=N((u+u)*o),v=N(w*l),A=N(s-y),b=N(s+y);return new p(N(g*b),N(A*v),N(v*b),N(g*A))}static hashToCurve(t){const e=x((t=L(t,64)).slice(0,32)),n=this.calcElligatorRistrettoMap(e),s=x(t.slice(32,64)),r=this.calcElligatorRistrettoMap(s);return new v(n.add(r))}static fromHex(t){t=L(t,32);const{a:e,d:r}=i,a="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=x(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(C(o),t)||T(o))throw new Error(a);const c=N(o*o),d=N(s+e*c),l=N(s-e*c),u=N(d*d),f=N(l*l),h=N(e*r*u-f),{isValid:m,value:w}=M(N(h*f)),y=N(w*l),g=N(w*y*h);let A=N((o+o)*y);T(A)&&(A=N(-A));const b=N(d*g),k=N(A*b);if(!m||T(k)||b===n)throw new Error(a);return new v(new p(A,b,s,k))}toRawBytes(){let{x:t,y:e,z:n,t:s}=this.ep;const r=N(N(n+e)*N(n-e)),a=N(t*e),o=N(a*a),{value:i}=M(N(r*o)),c=N(i*r),l=N(i*a),f=N(c*l*s);let h;if(T(s*f)){let n=N(e*d),s=N(t*d);t=n,e=s,h=N(c*u)}else h=l;T(t*f)&&(e=N(-e));let p=N((n-e)*h);return T(p)&&(p=N(-p)),C(p)}toHex(){return I(this.toRawBytes())}toString(){return this.toHex()}equals(t){y(t);const e=this.ep,n=t.ep,s=N(e.x*n.y)===N(e.y*n.x),r=N(e.y*n.y)===N(e.x*n.x);return s||r}add(t){return y(t),new v(this.ep.add(t.ep))}subtract(t){return y(t),new v(this.ep.subtract(t.ep))}multiply(t){return new v(this.ep.multiply(t))}multiplyUnsafe(t){return new v(this.ep.multiplyUnsafe(t))}}v.BASE=new v(p.BASE),v.ZERO=new v(p.ZERO);const A=new WeakMap;class b{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,A.delete(this)}static fromHex(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{d:n,P:r}=i,a=(t=L(t,32)).slice();a[31]=-129&t[31];const o=_(a);if(e&&o>=r)throw new Error("Expected 0 < hex < P");if(!e&&o>=c)throw new Error("Expected 0 < hex < 2**256");const d=N(o*o),l=N(d-s),u=N(n*d+s);let{isValid:f,value:h}=O(l,u);if(!f)throw new Error("Point.fromHex: invalid y coordinate");const p=(h&s)===s;return!!(128&t[31])!==p&&(h=N(-h)),new b(h,o)}static async fromPrivateKey(t){return(await J(t)).point}toRawBytes(){const t=C(this.y);return t[31]|=this.x&s?128:0,t}toHex(){return I(this.toRawBytes())}toX25519(){const{y:t}=this;return C(N((s+t)*P(s-t)))}isTorsionFree(){return p.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new b(N(-this.x),this.y)}add(t){return p.fromAffine(this).add(p.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return p.fromAffine(this).multiply(t,this).toAffine()}}b.BASE=new b(i.Gx,i.Gy),b.ZERO=new b(n,s);class k{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromHex(t){const e=L(t,64),n=b.fromHex(e.slice(0,32),!1),s=_(e.slice(32,64));return new k(n,s)}assertValidity(){const{r:t,s:e}=this;if(!(t instanceof b))throw new Error("Expected Point instance");return K(e,i.l,!1),this}toRawBytes(){const t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(C(this.s),32),t}toHex(){return I(this.toRawBytes())}}function S(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!e.every((t=>t instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const s=e.reduce(((t,e)=>t+e.length),0),r=new Uint8Array(s);for(let t=0,n=0;t<e.length;t++){const s=e[t];r.set(s,n),n+=s.length}return r}const E=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function I(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=E[t[n]];return e}function D(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const s=2*n,r=t.slice(s,s+2),a=Number.parseInt(r,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");e[n]=a}return e}function B(t){return D(t.toString(16).padStart(64,"0"))}function C(t){return B(t).reverse()}function T(t){return(N(t)&s)===s}function _(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+I(Uint8Array.from(t).reverse()))}const R=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function x(t){return N(_(t)&R)}function N(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;const s=t%e;return s>=n?s:e+s}function P(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;if(t===n||e<=n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=N(t,e),a=e,o=n,c=s;for(;r!==n;){const t=a%r,e=o-c*(a/r);a=r,r=t,o=c,c=e}if(a!==s)throw new Error("invert: does not exist");return N(o,e)}function F(t,e){const{P:s}=i;let r=t;for(;e-- >n;)r*=r,r%=s;return r}function U(t){const{P:e}=i,n=BigInt(5),a=BigInt(10),o=BigInt(20),c=BigInt(40),d=BigInt(80),l=t*t%e*t%e,u=F(l,r)*l%e,f=F(u,s)*t%e,h=F(f,n)*f%e,p=F(h,a)*h%e,m=F(p,o)*p%e,w=F(m,c)*m%e,y=F(w,d)*w%e,g=F(y,d)*w%e,v=F(g,a)*h%e;return{pow_p_5_8:F(v,r)*t%e,b2:l}}function O(t,e){const n=N(e*e*e),s=N(n*n*e);let r=N(t*n*U(t*s).pow_p_5_8);const a=N(e*r*r),o=r,i=N(r*d),c=a===t,l=a===N(-t),u=a===N(-t*d);return c&&(r=o),(l||u)&&(r=i),T(r)&&(r=N(-r)),{isValid:c||l,value:r}}function M(t){return O(s,t)}function W(t){return N(_(t),i.l)}function L(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):D(t);if("number"==typeof e&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function K(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)throw new TypeError("Specify max value");if("number"==typeof t&&Number.isSafeInteger(t)&&(t=BigInt(t)),"bigint"==typeof t&&t<e)if(s){if(n<t)return t}else if(n<=t)return t;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function H(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function j(t){if(32!==(t="bigint"==typeof t||"number"==typeof t?B(K(t,c)):L(t)).length)throw new Error("Expected 32 bytes");return t}function q(t){const e=H(t.slice(0,32)),n=t.slice(32,64),s=W(e),r=b.BASE.multiply(s),a=r.toRawBytes();return{head:e,prefix:n,scalar:s,point:r,pointBytes:a}}let z;function V(){if("function"!=typeof z)throw new Error("utils.sha512Sync must be set to use sync methods");return z(...arguments)}async function J(t){return q(await et.sha512(j(t)))}function $(t){return q(V(j(t)))}function G(t,e,n){e=L(e),n instanceof b||(n=b.fromHex(n,!1));const{r:s,s:r}=t instanceof k?t.assertValidity():k.fromHex(t);return{r:s,s:r,SB:p.BASE.multiplyUnsafe(r),pub:n,msg:e}}function Q(t,e,n,s){const r=W(s),a=p.fromAffine(t).multiplyUnsafe(r);return p.fromAffine(e).add(a).subtract(n).multiplyUnsafe(i.h).equals(p.ZERO)}const Z={getExtendedPublicKey:$,getPublicKey:function(t){return $(t).pointBytes},sign:function(t,e){t=L(t);const{prefix:n,scalar:s,pointBytes:r}=$(e),a=W(V(n,t)),o=b.BASE.multiply(a),c=N(a+W(V(o.toRawBytes(),r,t))*s,i.l);return new k(o,c).toRawBytes()},verify:function(t,e,n){const{r:s,SB:r,msg:a,pub:o}=G(t,e,n),i=V(s.toRawBytes(),o.toRawBytes(),a);return Q(o,s,r,i)}};function X(t,e,n){const s=N(t*(e-n));return[e=N(e-s),n=N(n+s)]}b.BASE._setWindowSize(8);const Y={BASE_POINT_U:"0900000000000000000000000000000000000000000000000000000000000000",scalarMult(t,e){const r=function(t,e){const{P:r}=i,a=K(t,r),o=K(e,r),c=BigInt(121665),d=a;let l,u=s,f=n,h=a,p=s,m=n;for(let t=BigInt(254);t>=n;t--){const e=o>>t&s;m^=e,l=X(m,u,h),u=l[0],h=l[1],l=X(m,f,p),f=l[0],p=l[1],m=e;const n=u+f,r=N(n*n),a=u-f,i=N(a*a),w=r-i,y=h+p,g=N((h-p)*n),v=N(y*a),A=g+v,b=g-v;h=N(A*A),p=N(d*N(b*b)),u=N(r*i),f=N(w*(r+N(c*w)))}l=X(m,u,h),u=l[0],h=l[1],l=X(m,f,p),f=l[0],p=l[1];const{pow_p_5_8:w,b2:y}=U(f),g=N(F(w,BigInt(3))*y);return N(u*g)}(function(t){const e=L(t,32);return e[31]&=127,_(e)}(e),_(H(L(t,32))));if(r===n)throw new Error("Invalid private or public key received");return C(N(r,i.P))},scalarMultBase:t=>Y.scalarMult(t,Y.BASE_POINT_U)},tt={node:e,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},et={bytesToHex:I,hexToBytes:D,concatBytes:S,getExtendedPublicKey:J,mod:N,invert:P,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if((t=L(t)).length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return N(_(t),i.l-s)+s},randomBytes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(tt.web)return tt.web.getRandomValues(new Uint8Array(t));if(tt.node){const{randomBytes:e}=tt.node;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>et.randomBytes(32),sha512:async function(){const t=S(...arguments);if(tt.web){const e=await tt.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(tt.node)return Uint8Array.from(tt.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.BASE;const n=e.equals(b.BASE)?e:new b(e.x,e.y);return n._setWindowSize(t),n.multiply(r),n},sha512Sync:void 0};Object.defineProperties(et,{sha512Sync:{configurable:!1,get:()=>z,set(t){z||(z=t)}}}),t.CURVE=i,t.ExtendedPoint=p,t.Point=b,t.RistrettoPoint=v,t.Signature=k,t.curve25519=Y,t.getPublicKey=async function(t){return(await J(t)).pointBytes},t.getSharedSecret=async function(t,e){const{head:n}=await J(t),s=b.fromHex(e).toX25519();return Y.scalarMult(n,s)},t.sign=async function(t,e){t=L(t);const{prefix:n,scalar:s,pointBytes:r}=await J(e),a=W(await et.sha512(n,t)),o=b.BASE.multiply(a),c=N(a+W(await et.sha512(o.toRawBytes(),r,t))*s,i.l);return new k(o,c).toRawBytes()},t.sync=Z,t.utils=et,t.verify=async function(t,e,n){const{r:s,SB:r,msg:a,pub:o}=G(t,e,n),i=await et.sha512(s.toRawBytes(),o.toRawBytes(),a);return Q(o,s,r,i)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},55029:(t,e,n)=>{"use strict";n.d(e,{MD:()=>u,SJ:()=>l,ao:()=>d});var s=n(31481),r=n(59288);const a=999,o=[];function i(t,e){return e instanceof Error?{name:e.name,message:e.message,stack:e.stack,metadata:e instanceof r.p?e.metadata:void 0}:e}function c(t){o.length>a&&o.shift(),o.push({...t,args:t.args.map((t=>JSON.stringify(t,i))),time:Date.now()})}function d(){return o}function l(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];c({message:t,level:"debugError",args:n}),s.Oig&&console.error(`[DEBUG][${t}]`,...n)}function u(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];c({message:t,level:"debug",args:n}),s.Oig&&console.log(`[DEBUG] ${t}`,...n)}},56051:(t,e,n)=>{"use strict";n.d(e,{KL:()=>a,Nu:()=>r,QD:()=>s,jf:()=>o});let s=function(t){return t.Unexpected="Unexpected",t.ServerError="ServerError",t.DebugError="DebugError",t.UnsupportedVersion="UnsupportedVersion",t}({}),r=function(t){return t.InvalidMnemonic="InvalidMnemonic",t.InvalidAddress="InvalidAddress",t.DomainNotResolved="DomainNotResolved",t}({}),a=function(t){return t.InvalidAmount="InvalidAmount",t.InvalidToAddress="InvalidToAddress",t.InsufficientBalance="InsufficientBalance",t.InvalidStateInit="InvalidStateInit",t.StateInitWithoutBin="StateInitWithoutBin",t.DomainNotResolved="DomainNotResolved",t.WalletNotInitialized="WalletNotInitialized",t.InvalidAddressFormat="InvalidAddressFormat",t.InactiveContract="InactiveContract",t}({}),o=function(t){return t.PartialTransactionFailure="PartialTransactionFailure",t.IncorrectDeviceTime="IncorrectDeviceTime",t.InsufficientBalance="InsufficientBalance",t.UnsuccesfulTransfer="UnsuccesfulTransfer",t.NotSupportedHardwareOperation="NotSupportedHardwareOperation",t.HardwareBlindSigningNotEnabled="HardwareBlindSigningNotEnabled",t.WrongAddress="WrongAddress",t.WrongNetwork="WrongNetwork",t}({})},59288:(t,e,n)=>{"use strict";n.d(e,{p:()=>s,v:()=>r});class s extends Error{constructor(t,e){super(t),this.metadata=e}}function r(t,e,n){if(!t)throw new s(e,n)}},61995:(t,e,n)=>{"use strict";n.d(e,{Hc:()=>a,Hx:()=>s,xT:()=>r});const s={GET_STATIC_DATA:801842850,REPORT_STATIC_DATA:2339837749,GET_STORAGE_DATA:1535698380,REPORT_STORAGE_DATA:2863966447,EXCESSES:3576854235,TRANSFER_JETTON:260734629,INTERNAL_TRANSFER:395134233,TRANSFER_NOTIFICATION:1935855772,PROVIDE_WALLET_ADDRESS:745978227,TAKE_WALLET_ADDRESS:3513996288,BURN_JETTON:1499400124,STAKE_JETTONS:3818940809,ADD_REWARDS:3675696277,SEND_CLAIMED_REWARDS:1153179619,SEND_UNSTAKED_JETTONS:4213386179,APPROVE_STAKE:2443044737,CANCEL_STAKE:2662179289,ADD_REWARD_JETTONS:275213031,CLAIM_COMMISSIONS:3165188199,REQUEST_UPDATE_REWARDS:4123376291,CLAIM_REWARDS:2027548937,RECEIVE_JETTONS:3599387329,UNSTAKE_JETTONS:1234866786,UNSTAKE_REQUEST:23647415,CANCEL_UNSTAKE_REQUEST:2760970010,UPDATE_REWARDS:2928871374,CONFIRM_TRANSFER:3162893073,DEPLOY_NEW_POOL:3666222871,SEND_COMMISSIONS:3110787818,SET_CODE:3805467153,CHANGE_CREATION_FEE:1725256331,CHANGE_CONTENT:247632384,UPDATE_CODES:2244551631},r={MIN_RESERVE:20000000n,DEPLOY_POOL:340000000n,NOTIFICATION:340000000n,JETTON_TRANSFER:55000000n,BURN_JETTONS:340000000n,STAKE_JETTONS:300000000n,UNSTAKE_JETTONS:340000000n,CANCEL_UNSTAKE:340000000n,SEND_COMMISSIONS:340000000n,SIMPLE_UPDATE_REQUEST:340000000n,ADD_REWARDS:340000000n,APPROVE_TRANSFER:340000000n,SAVE_UPDATED_REWARDS:340000000n,MIN_EXCESS:10000000n,SEND_STAKED_JETTONS:630000000n},a={COMMISSION_DIVIDER:10000n,REWARDS_DIVIDER:1e3,DISTRIBUTION_SPEED_DIVIDER:BigInt(86400),DISTRIBUTED_REWARDS_DIVIDER:100000000000000000000000000000000000000n}},79838:()=>{},87963:function(t){!function(){"use strict";function e(t){return parseInt(t)===t}function n(t){if(!e(t.length))return!1;for(var n=0;n<t.length;n++)if(!e(t[n])||t[n]<0||t[n]>255)return!1;return!0}function s(t,s){if(t.buffer&&"Uint8Array"===t.name)return s&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!n(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(e(t.length)&&n(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function r(t){return new Uint8Array(t)}function a(t,e,n,s,r){null==s&&null==r||(t=t.slice?t.slice(s,r):Array.prototype.slice.call(t,s,r)),e.set(t,n)}var o,i={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var r=t.charCodeAt(n++);37===r?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(r)}return s(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var s=t[n];s<128?(e.push(String.fromCharCode(s)),n++):s>191&&s<224?(e.push(String.fromCharCode((31&s)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&s)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},c=(o="0123456789abcdef",{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(t){for(var e=[],n=0;n<t.length;n++){var s=t[n];e.push(o[(240&s)>>4]+o[15&s])}return e.join("")}}),d={16:10,24:12,32:14},l=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],u=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],h=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],w=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],y=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],g=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],b=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],k=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],S=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],E=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function I(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var D=function(t){if(!(this instanceof D))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(t,!0)}),this._prepare()};D.prototype._prepare=function(){var t=d[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,s=4*(t+1),r=this.key.length/4,a=I(this.key);for(e=0;e<r;e++)n=e>>2,this._Ke[n][e%4]=a[e],this._Kd[t-n][e%4]=a[e];for(var o,i=0,c=r;c<s;){if(o=a[r-1],a[0]^=u[o>>16&255]<<24^u[o>>8&255]<<16^u[255&o]<<8^u[o>>24&255]^l[i]<<24,i+=1,8!=r)for(e=1;e<r;e++)a[e]^=a[e-1];else{for(e=1;e<r/2;e++)a[e]^=a[e-1];for(o=a[r/2-1],a[r/2]^=u[255&o]^u[o>>8&255]<<8^u[o>>16&255]<<16^u[o>>24&255]<<24,e=r/2+1;e<r;e++)a[e]^=a[e-1]}for(e=0;e<r&&c<s;)f=c>>2,h=c%4,this._Ke[f][h]=a[e],this._Kd[t-f][h]=a[e++],c++}for(var f=1;f<t;f++)for(var h=0;h<4;h++)o=this._Kd[f][h],this._Kd[f][h]=b[o>>24&255]^k[o>>16&255]^S[o>>8&255]^E[255&o]},D.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],s=I(t),a=0;a<4;a++)s[a]^=this._Ke[0][a];for(var o=1;o<e;o++){for(a=0;a<4;a++)n[a]=h[s[a]>>24&255]^p[s[(a+1)%4]>>16&255]^m[s[(a+2)%4]>>8&255]^w[255&s[(a+3)%4]]^this._Ke[o][a];s=n.slice()}var i,c=r(16);for(a=0;a<4;a++)i=this._Ke[e][a],c[4*a]=255&(u[s[a]>>24&255]^i>>24),c[4*a+1]=255&(u[s[(a+1)%4]>>16&255]^i>>16),c[4*a+2]=255&(u[s[(a+2)%4]>>8&255]^i>>8),c[4*a+3]=255&(u[255&s[(a+3)%4]]^i);return c},D.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],s=I(t),a=0;a<4;a++)s[a]^=this._Kd[0][a];for(var o=1;o<e;o++){for(a=0;a<4;a++)n[a]=y[s[a]>>24&255]^g[s[(a+3)%4]>>16&255]^v[s[(a+2)%4]>>8&255]^A[255&s[(a+1)%4]]^this._Kd[o][a];s=n.slice()}var i,c=r(16);for(a=0;a<4;a++)i=this._Kd[e][a],c[4*a]=255&(f[s[a]>>24&255]^i>>24),c[4*a+1]=255&(f[s[(a+3)%4]>>16&255]^i>>16),c[4*a+2]=255&(f[s[(a+2)%4]>>8&255]^i>>8),c[4*a+3]=255&(f[255&s[(a+1)%4]]^i);return c};var B=function(t){if(!(this instanceof B))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new D(t)};B.prototype.encrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),o=0;o<t.length;o+=16)a(t,n,0,o,o+16),a(n=this._aes.encrypt(n),e,o);return e},B.prototype.decrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),o=0;o<t.length;o+=16)a(t,n,0,o,o+16),a(n=this._aes.decrypt(n),e,o);return e};var C=function(t,e){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=r(16);this._lastCipherblock=s(e,!0),this._aes=new D(t)};C.prototype.encrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),o=0;o<t.length;o+=16){a(t,n,0,o,o+16);for(var i=0;i<16;i++)n[i]^=this._lastCipherblock[i];this._lastCipherblock=this._aes.encrypt(n),a(this._lastCipherblock,e,o)}return e},C.prototype.decrypt=function(t){if((t=s(t)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=r(t.length),n=r(16),o=0;o<t.length;o+=16){a(t,n,0,o,o+16),n=this._aes.decrypt(n);for(var i=0;i<16;i++)e[o+i]=n[i]^this._lastCipherblock[i];a(t,this._lastCipherblock,0,o,o+16)}return e};var T=function(t,e,n){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 size)")}else e=r(16);n||(n=1),this.segmentSize=n,this._shiftRegister=s(e,!0),this._aes=new D(t)};T.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=s(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[r+o]^=e[o];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n},T.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=s(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[r+o]^=e[o];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(t,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n};var _=function(t,e){if(!(this instanceof _))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",e){if(16!=e.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else e=r(16);this._lastPrecipher=s(e,!0),this._lastPrecipherIndex=16,this._aes=new D(t)};_.prototype.encrypt=function(t){for(var e=s(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},_.prototype.decrypt=_.prototype.encrypt;var R=function(t){if(!(this instanceof R))throw Error("Counter must be instanitated with `new`");0===t||t||(t=1),"number"==typeof t?(this._counter=r(16),this.setValue(t)):this.setBytes(t)};R.prototype.setValue=function(t){if("number"!=typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");if(t>Number.MAX_SAFE_INTEGER)throw new Error("integer value out of safe range");for(var e=15;e>=0;--e)this._counter[e]=t%256,t=parseInt(t/256)},R.prototype.setBytes=function(t){if(16!=(t=s(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},R.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var x=function(t,e){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",e instanceof R||(e=new R(e)),this._counter=e,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new D(t)};x.prototype.encrypt=function(t){for(var e=s(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},x.prototype.decrypt=x.prototype.encrypt;var N={AES:D,Counter:R,ModeOfOperation:{ecb:B,cbc:C,cfb:T,ofb:_,ctr:x},utils:{hex:c,utf8:i},padding:{pkcs7:{pad:function(t){var e=16-(t=s(t,!0)).length%16,n=r(t.length+e);a(t,n);for(var o=t.length;o<n.length;o++)n[o]=e;return n},strip:function(t){if((t=s(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,o=0;o<e;o++)if(t[n+o]!==e)throw new Error("PKCS#7 invalid padding byte");var i=r(n);return a(t,i,0,0,n),i}}},_arrayTest:{coerceArray:s,createArray:r,copyArray:a}};t.exports=N}()}},s={};function r(t){var e=s[t];if(void 0!==e)return e.exports;var a=s[t]={exports:{}};return n[t].call(a.exports,a,a.exports,r),a.exports}r.m=n,r.x=()=>{var t=r.O(void 0,[973,508,115],(()=>r(12332)));return r.O(t)},t=[],r.O=(e,n,s,a)=>{if(!n){var o=1/0;for(l=0;l<t.length;l++){for(var[n,s,a]=t[l],i=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(r.O).every((t=>r.O[t](n[c])))?n.splice(c--,1):(i=!1,a<o&&(o=a));if(i){t.splice(l--,1);var d=s();void 0!==d&&(e=d)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,s,a]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.f={},r.e=t=>Promise.all(Object.keys(r.f).reduce(((e,n)=>(r.f[n](t,e),e)),[])),r.u=t=>t+"."+{115:"91298d679585917d2a7c",508:"0e2a432f09617cb8831c",973:"8069d508cb08d6a3b5f3"}[t]+".js",r.miniCssF=t=>{},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=n[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t={941:1};r.f.i=(e,n)=>{t[e]||importScripts(r.p+r.u(e))};var e=self.webpackChunkmytonwallet=self.webpackChunkmytonwallet||[],n=e.push.bind(e);e.push=e=>{var[s,a,o]=e;for(var i in a)r.o(a,i)&&(r.m[i]=a[i]);for(o&&o(r);s.length;)t[s.pop()]=1;n(e)}})(),e=r.x,r.x=()=>Promise.all([973,508,115].map(r.e,r)).then(e),r.x()})();
//# sourceMappingURL=941.683488c878ee093fbd00.js.map