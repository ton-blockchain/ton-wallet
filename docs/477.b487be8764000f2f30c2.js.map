{"version":3,"file":"477.b487be8764000f2f30c2.js","mappings":"+KAAO,MAAMA,EACT,WAAAC,CAAYC,GACRC,KAAKD,MAAQA,CACjB,ECDG,MAAME,UAAuB,KAChC,WAAAH,GACII,OACJ,CACA,YAAMC,CAAOC,GACT,MAAML,EAAQC,KAAKK,cAAcD,EAAQE,SAASP,MAClD,GAAIA,EAAMQ,OACN,OAAOR,EAAMS,MAErB,CACA,WAAMC,CAAML,GAER,OADcJ,KAAKK,cAAcD,EAAQE,SAASP,MACrCU,OACjB,CACA,oBAAMC,CAAeN,GACHJ,KAAKK,cAAcD,EAAQE,SAASP,MAC5CY,YAAcP,EAAQQ,IAEhC,CACA,oBAAMC,CAAeT,GAEjB,MAAO,CAAEO,YADKX,KAAKK,cAAcD,EAAQE,SAASP,MACtBY,YAChC,CACA,iBAAMG,CAAYV,GACd,MAAML,EAAQC,KAAKK,cAAcD,EAAQE,SAASP,MAClD,GAAIgB,OAAOC,MAAMjB,EAAMkB,UACnB,KAAM,wBAEV,IAAKF,OAAOG,SAASnB,EAAMkB,UACvB,KAAM,wDAEV,MAAO,CAAEA,SAAUlB,EAAMkB,SAC7B,CACA,eAAME,CAAUf,GACZ,KAAM,uCAAuCgB,KAAKC,UAAUjB,IAChE,CACA,iBAAMkB,CAAYlB,GACd,IACI,MAAO,CAAEmB,QAASvB,KAAKK,cAAcD,EAAQE,SACjD,CACA,MAAOkB,GACH,MAAO,CAAED,OAAO,EACpB,CACJ,CACA,aAAME,CAAQrB,GACV,IAAIsB,EACJ,GAAIzB,EAAe0B,wBAAwBC,IAAIxB,EAAQE,SACnD,KAAM,0DAEV,KAAmC,QAA5BoB,EAAKtB,EAAQyB,iBAA8B,IAAPH,OAAgB,EAASA,EAAGI,QACnE,KAAM,wBAEV,IAAK1B,EAAQ2B,QACR,IAAIC,OAAO,MAAQ/B,EAAegC,eAAeC,KAAK9B,EAAQyB,WAAY,CAC3E,MAAMM,EAAc/B,EAAQyB,UAAUO,WAAW,KAAO,GAAK,IAC7DhC,EAAQyB,UAAY,GAAG5B,EAAegC,gBAAgBE,IAAc/B,EAAQyB,WAChF,CACA,MAAM9B,EAAQ,IAAIsC,MAAMjC,EAAQyB,WAChC9B,EAAMuC,UAAW,EACjBvC,EAAMwC,MAAO,EACbxC,EAAM0B,QAAU,OACZrB,EAAQoC,SACRzC,EAAMyC,OAASpC,EAAQoC,QAE3BvC,EAAe0B,wBAAwBc,IAAIrC,EAAQE,QAAS,IAAIT,EAAWE,GAC/E,CACA,OAAA2C,CAAQpC,GACJN,KAAK2C,gBAAgB,WAAY,CAAErC,WACvC,CACA,UAAME,CAAKJ,GACP,MAAM,QAAEE,EAAO,KAAEM,EAAO,GAAMR,EACxBL,EAAQC,KAAKK,cAAcC,GAASP,MAO1C,aANMC,KAAK4C,KAAKxC,GAChBL,EAAMwC,MAAO,EACbxC,EAAMY,YAAcC,EACpBb,EAAM8C,iBAAiB,SAAS,IAAM7C,KAAK0C,QAAQpC,IAAU,CACzDwC,MAAM,IAEH/C,EAAMS,MACjB,CACA,UAAM+B,CAAKnC,GACP,MAAML,EAAQC,KAAKK,cAAcD,EAAQE,SAASP,MAGlD,aAFMC,KAAK4C,KAAKxC,GAChBL,EAAMwC,MAAO,EACNxC,EAAMS,MACjB,CACA,UAAMoC,CAAKxC,GACP,MAAML,EAAQC,KAAKK,cAAcD,EAAQE,SAASP,MAClDA,EAAMU,QACNV,EAAMwC,MAAO,EACbxC,EAAMY,YAAc,CACxB,CACA,YAAMoC,CAAO3C,SACHJ,KAAK4C,KAAKxC,GAChBH,EAAe0B,wBAAwBqB,OAAO5C,EAAQE,QAC1D,CACA,eAAM2C,CAAU7C,GACZ,GAAkF,iBAAtEA,aAAyC,EAASA,EAAQoC,QAClE,KAAM,qBAEIxC,KAAKK,cAAcD,EAAQE,SAASP,MAC5CyC,OAASpC,EAAQoC,MAC3B,CACA,aAAMU,CAAQ9C,GACV,GAAgF,iBAApEA,aAAyC,EAASA,EAAQ+C,MAClE,KAAM,mBAEInD,KAAKK,cAAcD,EAAQE,SAASP,MAC5CqD,aAAehD,EAAQ+C,IACjC,CACA,eAAME,CAAUjD,GAEZ,MAAO,CAAEiD,WADKrD,KAAKK,cAAcD,EAAQE,SAASP,MACvBQ,OAC/B,CACA,aAAAF,CAAcC,GAEV,GADAN,KAAKsD,aAAahD,IACbL,EAAe0B,wBAAwBC,IAAItB,GAC5C,KAAM,yBAAyBA,oCAEnC,OAAOL,EAAe0B,wBAAwB4B,IAAIjD,EACtD,CACA,YAAAgD,CAAahD,GACT,GAAuB,iBAAZA,EACP,KAAM,2BAEV,KAAMA,aAAyC,EAASA,EAAQwB,QAC5D,KAAM,qBAEd,EAEJ7B,EAAegC,cAAgB,GAC/BhC,EAAe0B,wBAA0B,IAAI6B,IAC7C,MAAMC,EAAc,IAAIxD,C","sources":["webpack://mytonwallet/./node_modules/@capgo/native-audio/dist/esm/audio-asset.js","webpack://mytonwallet/./node_modules/@capgo/native-audio/dist/esm/web.js"],"sourcesContent":["export class AudioAsset {\n    constructor(audio) {\n        this.audio = audio;\n    }\n}\n//# sourceMappingURL=audio-asset.js.map","import { WebPlugin } from \"@capacitor/core\";\nimport { AudioAsset } from \"./audio-asset\";\nexport class NativeAudioWeb extends WebPlugin {\n    constructor() {\n        super();\n    }\n    async resume(options) {\n        const audio = this.getAudioAsset(options.assetId).audio;\n        if (audio.paused) {\n            return audio.play();\n        }\n    }\n    async pause(options) {\n        const audio = this.getAudioAsset(options.assetId).audio;\n        return audio.pause();\n    }\n    async setCurrentTime(options) {\n        const audio = this.getAudioAsset(options.assetId).audio;\n        audio.currentTime = options.time;\n        return;\n    }\n    async getCurrentTime(options) {\n        const audio = this.getAudioAsset(options.assetId).audio;\n        return { currentTime: audio.currentTime };\n    }\n    async getDuration(options) {\n        const audio = this.getAudioAsset(options.assetId).audio;\n        if (Number.isNaN(audio.duration)) {\n            throw \"no duration available\";\n        }\n        if (!Number.isFinite(audio.duration)) {\n            throw \"duration not available => media resource is streaming\";\n        }\n        return { duration: audio.duration };\n    }\n    async configure(options) {\n        throw `configure is not supported for web: ${JSON.stringify(options)}`;\n    }\n    async isPreloaded(options) {\n        try {\n            return { found: !!this.getAudioAsset(options.assetId) };\n        }\n        catch (e) {\n            return { found: false };\n        }\n    }\n    async preload(options) {\n        var _a;\n        if (NativeAudioWeb.AUDIO_ASSET_BY_ASSET_ID.has(options.assetId)) {\n            throw \"AssetId already exists. Unload first if like to change!\";\n        }\n        if (!((_a = options.assetPath) === null || _a === void 0 ? void 0 : _a.length)) {\n            throw \"no assetPath provided\";\n        }\n        if (!options.isUrl &&\n            !new RegExp(\"^/?\" + NativeAudioWeb.FILE_LOCATION).test(options.assetPath)) {\n            const slashPrefix = options.assetPath.startsWith(\"/\") ? \"\" : \"/\";\n            options.assetPath = `${NativeAudioWeb.FILE_LOCATION}${slashPrefix}${options.assetPath}`;\n        }\n        const audio = new Audio(options.assetPath);\n        audio.autoplay = false;\n        audio.loop = false;\n        audio.preload = \"auto\";\n        if (options.volume) {\n            audio.volume = options.volume;\n        }\n        NativeAudioWeb.AUDIO_ASSET_BY_ASSET_ID.set(options.assetId, new AudioAsset(audio));\n    }\n    onEnded(assetId) {\n        this.notifyListeners(\"complete\", { assetId });\n    }\n    async play(options) {\n        const { assetId, time = 0 } = options;\n        const audio = this.getAudioAsset(assetId).audio;\n        await this.stop(options);\n        audio.loop = false;\n        audio.currentTime = time;\n        audio.addEventListener(\"ended\", () => this.onEnded(assetId), {\n            once: true,\n        });\n        return audio.play();\n    }\n    async loop(options) {\n        const audio = this.getAudioAsset(options.assetId).audio;\n        await this.stop(options);\n        audio.loop = true;\n        return audio.play();\n    }\n    async stop(options) {\n        const audio = this.getAudioAsset(options.assetId).audio;\n        audio.pause();\n        audio.loop = false;\n        audio.currentTime = 0;\n    }\n    async unload(options) {\n        await this.stop(options);\n        NativeAudioWeb.AUDIO_ASSET_BY_ASSET_ID.delete(options.assetId);\n    }\n    async setVolume(options) {\n        if (typeof (options === null || options === void 0 ? void 0 : options.volume) !== \"number\") {\n            throw \"no volume provided\";\n        }\n        const audio = this.getAudioAsset(options.assetId).audio;\n        audio.volume = options.volume;\n    }\n    async setRate(options) {\n        if (typeof (options === null || options === void 0 ? void 0 : options.rate) !== \"number\") {\n            throw \"no rate provided\";\n        }\n        const audio = this.getAudioAsset(options.assetId).audio;\n        audio.playbackRate = options.rate;\n    }\n    async isPlaying(options) {\n        const audio = this.getAudioAsset(options.assetId).audio;\n        return { isPlaying: !audio.paused };\n    }\n    getAudioAsset(assetId) {\n        this.checkAssetId(assetId);\n        if (!NativeAudioWeb.AUDIO_ASSET_BY_ASSET_ID.has(assetId)) {\n            throw `no asset for assetId \"${assetId}\" available. Call preload first!`;\n        }\n        return NativeAudioWeb.AUDIO_ASSET_BY_ASSET_ID.get(assetId);\n    }\n    checkAssetId(assetId) {\n        if (typeof assetId !== \"string\") {\n            throw \"assetId must be a string\";\n        }\n        if (!(assetId === null || assetId === void 0 ? void 0 : assetId.length)) {\n            throw \"no assetId provided\";\n        }\n    }\n}\nNativeAudioWeb.FILE_LOCATION = \"\";\nNativeAudioWeb.AUDIO_ASSET_BY_ASSET_ID = new Map();\nconst NativeAudio = new NativeAudioWeb();\nexport { NativeAudio };\n//# sourceMappingURL=web.js.map"],"names":["AudioAsset","constructor","audio","this","NativeAudioWeb","super","resume","options","getAudioAsset","assetId","paused","play","pause","setCurrentTime","currentTime","time","getCurrentTime","getDuration","Number","isNaN","duration","isFinite","configure","JSON","stringify","isPreloaded","found","e","preload","_a","AUDIO_ASSET_BY_ASSET_ID","has","assetPath","length","isUrl","RegExp","FILE_LOCATION","test","slashPrefix","startsWith","Audio","autoplay","loop","volume","set","onEnded","notifyListeners","stop","addEventListener","once","unload","delete","setVolume","setRate","rate","playbackRate","isPlaying","checkAssetId","get","Map","NativeAudio"],"sourceRoot":""}