{"version":3,"file":"main.e1a5c6320c5f38cb7344.js","mappings":"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","sources":["webpack://mytonwallet/webpack/runtime/create fake namespace object","webpack://mytonwallet/webpack/runtime/load script","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/ieee754/index.js","webpack://mytonwallet/./src/util/decimals.ts","webpack://mytonwallet/./src/util/bigint.ts","webpack://mytonwallet/./src/util/environment.ts","webpack://mytonwallet/./src/util/handleError.ts","webpack://mytonwallet/./src/api/chains/ton/constants.ts","webpack://mytonwallet/./src/util/PostMessageConnector.ts","webpack://mytonwallet/./src/util/Deferred.ts","webpack://mytonwallet/./src/util/dateFormat.ts","webpack://mytonwallet/./src/api/types/misc.ts","webpack://mytonwallet/./src/util/generateUniqueId.ts","webpack://mytonwallet/./node_modules/@capacitor/core/dist/index.js","webpack://mytonwallet/./src/util/withCache.ts","webpack://mytonwallet/./src/util/animation.ts","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/definitions.js","webpack://mytonwallet/./src/util/extensionMessageSerializer.ts","webpack://mytonwallet/./src/config.ts","webpack://mytonwallet/./src/util/getPlatform.ts","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/definitions.js","webpack://mytonwallet/./src/util/schedulers.ts","webpack://mytonwallet/./src/api/errors.ts","webpack://mytonwallet/./src/util/launchMediaWorkers.ts","webpack://mytonwallet/./node_modules/buffer/index.js","webpack://mytonwallet/./src/lib/big.js/index.js","webpack://mytonwallet/./src/util/safeExec.ts","webpack://mytonwallet/./src/util/ledger/tab.ts","webpack://mytonwallet/./src/util/createPostMessageInterface.ts","webpack://mytonwallet/./src/util/logs.ts","webpack://mytonwallet/./src/api/types/errors.ts","webpack://mytonwallet/./src/util/random.ts","webpack://mytonwallet/./src/util/assert.ts","webpack://mytonwallet/./src/api/chains/ton/contracts/JettonStaking/imports/constants.ts","webpack://mytonwallet/./node_modules/process/browser.js","webpack://mytonwallet/./src/lib/fasterdom/fasterdom.ts","webpack://mytonwallet/./src/util/dns.ts","webpack://mytonwallet/./node_modules/base64-js/index.js","webpack://mytonwallet/./src/lib/fasterdom/layoutCauses.ts","webpack://mytonwallet/./src/lib/fasterdom/stricterdom.ts","webpack://mytonwallet/./src/api/providers/extension/config.ts","webpack://mytonwallet/./src/api/providers/worker/connector.ts","webpack://mytonwallet/./src/util/windowProvider/index.ts","webpack://mytonwallet/./src/util/windowEnvironment.ts","webpack://mytonwallet/./src/util/account.ts","webpack://mytonwallet/./src/util/iteratees.ts","webpack://mytonwallet/./src/util/shortenAddress.ts","webpack://mytonwallet/./src/util/windowProvider/methods/capacitorStorage.ts","webpack://mytonwallet/./src/util/windowProvider/methods/localStorage.ts","webpack://mytonwallet/./src/util/ledger/utils.ts","webpack://mytonwallet/./src/util/stringFormat.ts","webpack://mytonwallet/webpack/bootstrap","webpack://mytonwallet/webpack/runtime/compat get default export","webpack://mytonwallet/webpack/runtime/define property getters","webpack://mytonwallet/webpack/runtime/ensure chunk","webpack://mytonwallet/webpack/runtime/get javascript chunk filename","webpack://mytonwallet/webpack/runtime/get mini-css chunk filename","webpack://mytonwallet/webpack/runtime/global","webpack://mytonwallet/webpack/runtime/hasOwnProperty shorthand","webpack://mytonwallet/webpack/runtime/make namespace object","webpack://mytonwallet/webpack/runtime/publicPath","webpack://mytonwallet/webpack/runtime/jsonp chunk loading","webpack://mytonwallet/./src/util/arePropsShallowEqual.ts","webpack://mytonwallet/./src/util/debugOverlay.ts","webpack://mytonwallet/./src/util/callbacks.ts","webpack://mytonwallet/./src/util/signals.ts","webpack://mytonwallet/./src/lib/teact/heavyAnimation.ts","webpack://mytonwallet/./src/lib/teact/teact.ts","webpack://mytonwallet/./src/hooks/useForceUpdate.ts","webpack://mytonwallet/./src/hooks/useEffectOnce.ts","webpack://mytonwallet/./src/hooks/usePrevious.ts","webpack://mytonwallet/./src/hooks/useSyncEffect.ts","webpack://mytonwallet/./src/hooks/useUniqueId.ts","webpack://mytonwallet/./src/lib/teact/teactn.tsx","webpack://mytonwallet/./src/global/index.ts","webpack://mytonwallet/./src/util/isEmptyObject.ts","webpack://mytonwallet/./src/util/isViewAccount.ts","webpack://mytonwallet/./src/util/memoize.ts","webpack://mytonwallet/./src/global/selectors/accounts.ts","webpack://mytonwallet/./src/util/ton/transfer.ts","webpack://mytonwallet/./src/global/selectors/dapp.ts","webpack://mytonwallet/./src/util/round.ts","webpack://mytonwallet/./src/global/selectors/tokens.ts","webpack://mytonwallet/./src/util/compareActivities.ts","webpack://mytonwallet/./src/util/poisoningHash.ts","webpack://mytonwallet/./src/util/activities/index.ts","webpack://mytonwallet/./src/global/selectors/activities.ts","webpack://mytonwallet/./src/global/types.ts","webpack://mytonwallet/./src/util/chain.ts","webpack://mytonwallet/./src/util/tokens.ts","webpack://mytonwallet/./src/global/selectors/swap.ts","webpack://mytonwallet/./src/util/fee/transferFee.ts","webpack://mytonwallet/./src/util/isValidAddressOrDomain.ts","webpack://mytonwallet/./src/global/selectors/transfer.ts","webpack://mytonwallet/./src/global/selectors/staking.ts","webpack://mytonwallet/./src/global/selectors/domains.ts","webpack://mytonwallet/./src/global/actions/api/initial.ts","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capgo/capacitor-native-biometric/dist/esm/index.js","webpack://mytonwallet/./src/util/windowSize.ts","webpack://mytonwallet/./src/util/telegram/index.ts","webpack://mytonwallet/./src/util/authApi/telegram.ts","webpack://mytonwallet/./src/util/authApi/webAuthn.ts","webpack://mytonwallet/./src/util/authApi/index.ts","webpack://mytonwallet/./node_modules/@capacitor/app/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/splash-screen/dist/esm/index.js","webpack://mytonwallet/./node_modules/capacitor-plugin-safe-area/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/app-launcher/dist/esm/index.js","webpack://mytonwallet/../../src/index.ts","webpack://mytonwallet/./src/util/domEvents.ts","webpack://mytonwallet/./src/util/tonConnectEnvironment.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/connector/connector.ts","webpack://mytonwallet/./src/api/tonConnect/types/index.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/tonConnectBridgeApi.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/bridgeApi.ts","webpack://mytonwallet/./src/hooks/useStateRef.ts","webpack://mytonwallet/./src/hooks/useLastCallback.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/InAppBrowserPostMessageAdapter.ts","webpack://mytonwallet/./src/util/url.ts","webpack://mytonwallet/./src/util/base64toHex.ts","webpack://mytonwallet/./src/global/helpers/renderText.tsx","webpack://mytonwallet/./src/util/cacheApi.ts","webpack://mytonwallet/./src/util/formatNumber.ts","webpack://mytonwallet/./src/util/langProvider.ts","webpack://mytonwallet/./src/util/regex.ts","webpack://mytonwallet/./src/hooks/useLang.ts","webpack://mytonwallet/./src/util/buildClassName.ts","webpack://mytonwallet/./src/util/math.ts","webpack://mytonwallet/./src/util/captureEvents.ts","webpack://mytonwallet/./src/util/lethargy.ts","webpack://mytonwallet/./src/util/captureKeyboardListeners.ts","webpack://mytonwallet/./src/util/modalSwipeManager.ts","webpack://mytonwallet/./src/util/trapFocus.ts","webpack://mytonwallet/./src/util/cssColorToHex.ts","webpack://mytonwallet/./node_modules/@capacitor/status-bar/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/@capacitor/status-bar/dist/esm/index.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/navigationbar.events.js","webpack://mytonwallet/./node_modules/@mauricewegner/capacitor-navigation-bar/dist/esm/index.js","webpack://mytonwallet/./src/util/switchTheme.ts","webpack://mytonwallet/./src/util/capacitor/switchStatusBar.ts","webpack://mytonwallet/./src/hooks/useMediaQuery.ts","webpack://mytonwallet/./src/hooks/useDeviceScreen.ts","webpack://mytonwallet/./src/hooks/useEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useDelegatedBottomSheet.ts","webpack://mytonwallet/./src/hooks/useDelegatingBottomSheet.ts","webpack://mytonwallet/./src/util/telegram/backButtonManager.ts","webpack://mytonwallet/./src/hooks/useHistoryBack.ts","webpack://mytonwallet/./src/lib/teact/dom-events.ts","webpack://mytonwallet/./src/lib/teact/teact-dom.ts","webpack://mytonwallet/./src/hooks/useSignal.ts","webpack://mytonwallet/./src/hooks/useSignalEffect.ts","webpack://mytonwallet/./src/hooks/useDerivedSignal.ts","webpack://mytonwallet/./src/hooks/useDerivedState.ts","webpack://mytonwallet/./src/hooks/useSyncEffectWithPrevDeps.ts","webpack://mytonwallet/./src/hooks/useShowTransition.ts","webpack://mytonwallet/./src/hooks/useToggleClass.ts","webpack://mytonwallet/./src/components/ui/LoadingDots.module.scss?6dd6","webpack://mytonwallet/./src/components/ui/LoadingDots.tsx","webpack://mytonwallet/./src/components/ui/Button.module.scss?78d5","webpack://mytonwallet/./src/components/ui/Button.tsx","webpack://mytonwallet/./src/components/ui/Portal.ts","webpack://mytonwallet/./src/components/ui/Modal.module.scss?b689","webpack://mytonwallet/./src/components/ui/Modal.tsx","webpack://mytonwallet/./src/hooks/freezeWhenClosed.ts","webpack://mytonwallet/./src/hooks/useHideBrowser.ts","webpack://mytonwallet/./src/components/ui/InAppBrowser.tsx","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/useInAppBrowserBridgeProvider.ts","webpack://mytonwallet/./src/util/embeddedDappBridge/connector/inAppBrowserConnector.ts","webpack://mytonwallet/./src/global/helpers/misc.ts","webpack://mytonwallet/./src/util/openUrl.ts","webpack://mytonwallet/./src/util/renderPromise.ts","webpack://mytonwallet/./src/util/deeplink/constants.ts","webpack://mytonwallet/./src/util/deeplink/index.ts","webpack://mytonwallet/./node_modules/@capacitor/push-notifications/dist/esm/index.js","webpack://mytonwallet/./src/global/selectors/notifications.ts","webpack://mytonwallet/./src/util/capacitor/platform.ts","webpack://mytonwallet/./src/util/capacitor/notifications.ts","webpack://mytonwallet/./src/util/capacitor/index.ts","webpack://mytonwallet/./src/util/biometrics.ts","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/web.js","webpack://mytonwallet/./node_modules/@capacitor/clipboard/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/haptics/dist/esm/index.js","webpack://mytonwallet/./src/util/haptics.ts","webpack://mytonwallet/./src/util/clipboard.ts","webpack://mytonwallet/./src/util/isMnemonicPrivateKey.ts","webpack://mytonwallet/./src/util/deepDiff.ts","webpack://mytonwallet/./src/util/deepMerge.ts","webpack://mytonwallet/./src/hooks/useBackgroundMode.ts","webpack://mytonwallet/./src/util/multitab.ts","webpack://mytonwallet/./src/global/initialState.ts","webpack://mytonwallet/./src/util/areDeepEqual.ts","webpack://mytonwallet/./src/util/isPartialDeepEqual.ts","webpack://mytonwallet/./src/global/reducers/misc.ts","webpack://mytonwallet/./src/global/helpers/swap.ts","webpack://mytonwallet/./src/global/reducers/swap.ts","webpack://mytonwallet/./src/global/reducers/transfer.ts","webpack://mytonwallet/./src/global/reducers/wallet.ts","webpack://mytonwallet/./src/global/reducers/staking.ts","webpack://mytonwallet/./src/global/reducers/dapp.ts","webpack://mytonwallet/./src/global/reducers/activities.ts","webpack://mytonwallet/./src/global/reducers/nfts.ts","webpack://mytonwallet/./src/global/reducers/vesting.ts","webpack://mytonwallet/./src/global/reducers/cards.ts","webpack://mytonwallet/./src/global/reducers/domains.ts","webpack://mytonwallet/./src/global/reducers/hardware.ts","webpack://mytonwallet/./src/global/actions/api/auth.ts","webpack://mytonwallet/./src/global/helpers/index.ts","webpack://mytonwallet/./src/global/reducers/tokens.ts","webpack://mytonwallet/./src/util/fee/getTonOperationFees.ts","webpack://mytonwallet/./src/util/staking/index.ts","webpack://mytonwallet/./src/global/actions/api/wallet.ts","webpack://mytonwallet/./src/util/getDappConnectionUniqueId.ts","webpack://mytonwallet/./src/global/actions/api/dapps.ts","webpack://mytonwallet/./src/util/fee/swapFee.ts","webpack://mytonwallet/./src/util/bigNumber.ts","webpack://mytonwallet/./src/global/actions/api/staking.ts","webpack://mytonwallet/./src/global/actions/api/swap.ts","webpack://mytonwallet/./src/global/actions/api/tokens.ts","webpack://mytonwallet/./src/global/actions/api/transfer.tsx","webpack://mytonwallet/./src/util/scamDetection.ts","webpack://mytonwallet/./src/global/actions/api/nfts.ts","webpack://mytonwallet/./src/global/actions/api/cards.ts","webpack://mytonwallet/./src/global/actions/api/vesting.ts","webpack://mytonwallet/./src/util/createAbortableFunction.ts","webpack://mytonwallet/./src/global/reducers/notifications.ts","webpack://mytonwallet/./src/global/actions/api/notifications.ts","webpack://mytonwallet/./src/global/actions/api/domains.ts","webpack://mytonwallet/./src/global/actions/api/activity.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/initial.ts","webpack://mytonwallet/./node_modules/@capgo/native-audio/dist/esm/index.js","webpack://mytonwallet/./src/util/notificationSound.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/activities.ts","webpack://mytonwallet/./src/global/actions/apiUpdates/dapp.ts","webpack://mytonwallet/./src/util/switchAnimationLevel.ts","webpack://mytonwallet/./src/global/actions/ui/initial.ts","webpack://mytonwallet/./node_modules/@capacitor-mlkit/barcode-scanning/dist/esm/index.js","webpack://mytonwallet/./src/util/getIsAppUpdateNeeded.ts","webpack://mytonwallet/./src/hooks/useFlag.ts","webpack://mytonwallet/./src/hooks/useHotkeys.ts","webpack://mytonwallet/./src/util/parseHotkey.ts","webpack://mytonwallet/./src/hooks/useThrottledCallback.ts","webpack://mytonwallet/./src/hooks/useDebouncedCallback.ts","webpack://mytonwallet/./src/hooks/useWindowSize.ts","webpack://mytonwallet/./src/util/authApi/inMemoryPasswordStore.ts","webpack://mytonwallet/./src/util/setReliableTimeout.ts","webpack://mytonwallet/./src/components/ui/helpers/animatedAssets.ts","webpack://mytonwallet/./src/hooks/useFocusAfterAnimation.tsx","webpack://mytonwallet/./src/hooks/useMatchCount.ts","webpack://mytonwallet/./src/components/ui/Checkbox.module.scss?4964","webpack://mytonwallet/./src/components/ui/Checkbox.tsx","webpack://mytonwallet/./src/components/main/modals/LogOutModal.module.scss?5651","webpack://mytonwallet/./src/components/main/modals/LogOutModal.tsx","webpack://mytonwallet/./src/util/buildStyle.ts","webpack://mytonwallet/./src/hooks/useMediaTransition.ts","webpack://mytonwallet/./src/lib/rlottie/RLottie.async.ts","webpack://mytonwallet/./src/util/colors.ts","webpack://mytonwallet/./src/hooks/useHeavyAnimation.ts","webpack://mytonwallet/./src/hooks/usePriorityPlaybackCheck.ts","webpack://mytonwallet/./src/hooks/useSharedIntersectionObserver.ts","webpack://mytonwallet/./src/components/ui/AnimatedSticker.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIcon.tsx","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.module.scss?9243","webpack://mytonwallet/./src/components/ui/AnimatedIconWithPreview.tsx","webpack://mytonwallet/./src/components/ui/Input.module.scss?4fb9","webpack://mytonwallet/./src/components/ui/Input.tsx","webpack://mytonwallet/./src/util/cssAnimationEndListeners.ts","webpack://mytonwallet/./src/util/swipeController.ts","webpack://mytonwallet/./src/components/ui/PinPad.module.scss?228e","webpack://mytonwallet/./src/components/ui/PinPadButton.tsx","webpack://mytonwallet/./src/components/ui/Transition.tsx","webpack://mytonwallet/./src/util/forceReflow.ts","webpack://mytonwallet/./src/components/ui/PinPad.tsx","webpack://mytonwallet/./src/components/ui/PasswordForm.module.scss?0d24","webpack://mytonwallet/./src/components/ui/PasswordForm.tsx","webpack://mytonwallet/./src/hooks/useAppTheme.ts","webpack://mytonwallet/./src/util/preloadImage.ts","webpack://mytonwallet/./src/components/ui/Image.tsx","webpack://mytonwallet/./src/components/appLocked/AppLocked.module.scss?8d6b","webpack://mytonwallet/./src/components/appLocked/Logo.tsx","webpack://mytonwallet/./src/components/appLocked/PasswordFormSlide.tsx","webpack://mytonwallet/./src/components/appLocked/UnlockButtonSlide.tsx","webpack://mytonwallet/./src/components/appLocked/AppLocked.tsx","webpack://mytonwallet/./src/global/actions/ui/misc.ts","webpack://mytonwallet/./src/global/actions/ui/dapps.ts","webpack://mytonwallet/./src/global/actions/ui/hardware.ts","webpack://mytonwallet/./src/global/actions/ui/settings.ts","webpack://mytonwallet/./src/global/actions/ui/nfts.ts","webpack://mytonwallet/./src/global/actions/ui/vesting.ts","webpack://mytonwallet/./src/global/actions/ui/tokens.ts","webpack://mytonwallet/./src/global/actions/ui/transfer.ts","webpack://mytonwallet/./src/global/actions/ui/shared.ts","webpack://mytonwallet/./src/global/actions/ui/notifications.ts","webpack://mytonwallet/./src/util/accentColor/constants.ts","webpack://mytonwallet/./src/util/accentColor/index.ts","webpack://mytonwallet/./src/global/actions/ui/cards.ts","webpack://mytonwallet/./src/global/actions/ui/domains.ts","webpack://mytonwallet/./src/global/cache.ts","webpack://mytonwallet/./src/global/init.ts","webpack://mytonwallet/./src/util/bigintPatch.ts","webpack://mytonwallet/./src/util/betterView.ts","webpack://mytonwallet/./src/electron/types.ts","webpack://mytonwallet/./src/util/focusScroll.ts","webpack://mytonwallet/./src/util/activeTabMonitor.ts","webpack://mytonwallet/./node_modules/@capacitor/filesystem/dist/esm/index.js","webpack://mytonwallet/./node_modules/@capacitor/share/dist/esm/index.js","webpack://mytonwallet/./src/util/share.ts","webpack://mytonwallet/./src/hooks/useCurrentOrPrev.ts","webpack://mytonwallet/./src/components/ui/Dropdown.module.scss?3afe","webpack://mytonwallet/./src/components/ui/DropdownItemContent.tsx","webpack://mytonwallet/./src/util/captureEscKeyListener.ts","webpack://mytonwallet/./src/components/ui/Menu.module.scss?ed87","webpack://mytonwallet/./src/hooks/useMenuPosition.ts","webpack://mytonwallet/./src/components/ui/Menu.tsx","webpack://mytonwallet/./src/hooks/useVirtualBackdrop.ts","webpack://mytonwallet/./src/components/ui/DropdownMenu.tsx","webpack://mytonwallet/./src/components/ui/ModalHeader.tsx","webpack://mytonwallet/./src/components/ui/IFrameBrowser.tsx","webpack://mytonwallet/./src/util/embeddedDappBridge/provider/useIFrameBridgeProvider.ts","webpack://mytonwallet/./src/components/ui/IFrameBrowser.module.scss?ece8","webpack://mytonwallet/./src/hooks/useIntersectionObserver.ts","webpack://mytonwallet/./src/hooks/useAppIntersectionObserver.ts","webpack://mytonwallet/./src/hooks/useInterval.ts","webpack://mytonwallet/./src/hooks/useTimeout.ts","webpack://mytonwallet/./src/components/AppInactive.module.scss?fa93","webpack://mytonwallet/./src/components/AppInactive.tsx","webpack://mytonwallet/./src/hooks/useScrolledState.ts","webpack://mytonwallet/./src/components/ui/Emoji.module.scss?1c66","webpack://mytonwallet/./src/components/ui/Emoji.tsx","webpack://mytonwallet/./src/components/settings/Settings.module.scss?98b7","webpack://mytonwallet/./src/components/settings/SettingsAbout.tsx","webpack://mytonwallet/./src/components/auth/Auth.module.scss?dc00","webpack://mytonwallet/./src/components/auth/AuthCheckPassword.tsx","webpack://mytonwallet/./src/components/ui/SuggestionList.module.scss?e7a6","webpack://mytonwallet/./src/components/ui/SuggestionList.tsx","webpack://mytonwallet/./src/components/common/InputMnemonic.module.scss?8c11","webpack://mytonwallet/./src/components/common/InputMnemonic.tsx","webpack://mytonwallet/./src/components/common/backup/BackUpContent.module.scss?30c9","webpack://mytonwallet/./src/components/common/backup/CheckWordsForm.tsx","webpack://mytonwallet/./src/components/common/backup/CheckWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthCheckWords.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthConfirmPin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBackup.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateBiometrics.tsx","webpack://mytonwallet/./src/components/auth/AuthCreateNativeBiometrics.tsx","webpack://mytonwallet/./src/hooks/usePasswordValidation.ts","webpack://mytonwallet/./src/components/ui/CreatePasswordForm.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePassword.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatePin.tsx","webpack://mytonwallet/./src/components/auth/AuthCreatingWallet.tsx","webpack://mytonwallet/./src/components/auth/AuthBackupWarning.tsx","webpack://mytonwallet/./src/components/auth/AuthDisclaimer.tsx","webpack://mytonwallet/./src/components/auth/AuthImportMnemonic.tsx","webpack://mytonwallet/./src/hooks/useClipboardPaste.ts","webpack://mytonwallet/./src/components/auth/AuthImportViewAccount.tsx","webpack://mytonwallet/./src/components/common/backup/SafetyRulesContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSafetyRules.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsList.tsx","webpack://mytonwallet/./src/components/common/backup/SecretWordsContent.tsx","webpack://mytonwallet/./src/components/auth/AuthSecretWords.tsx","webpack://mytonwallet/./src/components/auth/AuthStart.tsx","webpack://mytonwallet/./src/components/auth/Auth.tsx","webpack://mytonwallet/./src/components/ui/Spinner.module.scss?099b","webpack://mytonwallet/./src/components/ui/Spinner.tsx","webpack://mytonwallet/./src/components/ui/ListItem.module.scss?d4c4","webpack://mytonwallet/./src/components/ui/ListItem.tsx","webpack://mytonwallet/./src/components/auth/AuthImportWalletModal.tsx","webpack://mytonwallet/./src/util/resolveSlideTransitionName.ts","webpack://mytonwallet/./src/hooks/useModalTransitionKeys.ts","webpack://mytonwallet/./src/hooks/useCachedImage.ts","webpack://mytonwallet/./src/hooks/useAsync.ts","webpack://mytonwallet/./src/util/getCachedImageUrl.ts","webpack://mytonwallet/./src/hooks/useCardCustomization.ts","webpack://mytonwallet/./src/components/main/sections/Header/AccountButton.module.scss?95ab","webpack://mytonwallet/./src/components/main/sections/Header/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButton.module.scss?29d1","webpack://mytonwallet/./src/components/common/AccountButton.tsx","webpack://mytonwallet/./src/components/common/AccountButtonWrapper.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.module.scss?bcee","webpack://mytonwallet/./src/components/ledger/LedgerConfirmOperation.tsx","webpack://mytonwallet/./src/components/ui/Dropdown.tsx","webpack://mytonwallet/./src/components/ledger/LedgerConnect.tsx","webpack://mytonwallet/./src/components/ui/Skeleton.tsx","webpack://mytonwallet/./src/components/ui/Skeleton.module.scss?021e","webpack://mytonwallet/./src/components/ui/IconWithTooltip.module.scss?91f0","webpack://mytonwallet/./src/components/ui/IconWithTooltip.tsx","webpack://mytonwallet/./src/components/dapps/Dapp.module.scss?bf14","webpack://mytonwallet/./src/components/dapps/DappInfo.tsx","webpack://mytonwallet/./src/components/dapps/DappPassword.tsx","webpack://mytonwallet/./src/components/dapps/DappConnectModal.tsx","webpack://mytonwallet/./src/components/dapps/DappInfoWithAccount.tsx","webpack://mytonwallet/./src/components/dapps/DappSkeletonWithContent.tsx","webpack://mytonwallet/./src/components/dapps/DappSignDataInitial.tsx","webpack://mytonwallet/./src/components/common/TransferResult.module.scss?a52a","webpack://mytonwallet/./src/components/dapps/DappTransferComplete.tsx","webpack://mytonwallet/./src/components/dapps/DappSignDataModal.tsx","webpack://mytonwallet/./src/util/getPseudoRandomNumber.ts","webpack://mytonwallet/./src/util/swap/getSwapRate.ts","webpack://mytonwallet/./src/util/swap/getChainNetworkIcon.ts","webpack://mytonwallet/./src/components/ui/helpers/assetLogos.ts","webpack://mytonwallet/./src/components/common/TokenIcon.module.scss?68c8","webpack://mytonwallet/./src/components/common/TokenIcon.tsx","webpack://mytonwallet/./src/components/common/SensitiveDataMask.tsx","webpack://mytonwallet/./src/components/common/SensitiveDataMask.module.scss?6696","webpack://mytonwallet/./src/components/ui/SensitiveData.module.scss?5be5","webpack://mytonwallet/./src/components/ui/SensitiveData.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activity.module.scss?f503","webpack://mytonwallet/./src/components/main/sections/Content/ActivityPendingIndicator.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Swap.tsx","webpack://mytonwallet/./src/util/getLocalAddressName.ts","webpack://mytonwallet/./src/components/main/sections/Content/Transaction.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activity.tsx","webpack://mytonwallet/./src/components/dapps/DappLedgerWarning.tsx","webpack://mytonwallet/./src/components/transfer/NftInfo.module.scss?aa0a","webpack://mytonwallet/./src/components/transfer/NftInfo.tsx","webpack://mytonwallet/./src/hooks/useLongPress.ts","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.module.scss?f4ba","webpack://mytonwallet/./src/components/main/modals/DeleteSavedAddressModal.tsx","webpack://mytonwallet/./src/components/ui/MenuBackdrop.tsx","webpack://mytonwallet/./src/components/ui/MenuBackdrop.module.scss?85b7","webpack://mytonwallet/./src/components/ui/InteractiveTextField.module.scss?844c","webpack://mytonwallet/./src/components/ui/InteractiveTextField.tsx","webpack://mytonwallet/./src/components/dapps/DappAmountField.tsx","webpack://mytonwallet/./src/components/dapps/DappTransactionPayload.tsx","webpack://mytonwallet/./src/components/dapps/DappTransaction.tsx","webpack://mytonwallet/./src/components/ui/Fee.module.scss?5335","webpack://mytonwallet/./src/components/ui/Fee.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.tsx","webpack://mytonwallet/./src/components/ui/FeeLine.module.scss?c0f3","webpack://mytonwallet/./src/components/dapps/DappTransferInitial.tsx","webpack://mytonwallet/./src/components/dapps/DappTransferModal.tsx","webpack://mytonwallet/./src/components/Dialogs.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.tsx","webpack://mytonwallet/./src/components/electron/UpdateApp.module.scss?0ba5","webpack://mytonwallet/./src/components/electron/ElectronHeader.module.scss?adc9","webpack://mytonwallet/./src/components/electron/ElectronHeader.tsx","webpack://mytonwallet/./src/hooks/useElectronDrag.ts","webpack://mytonwallet/./src/util/telegram/hooks/useTelegramMiniAppSwipeToClose.ts","webpack://mytonwallet/./src/components/explore/helpers/utils.ts","webpack://mytonwallet/./src/hooks/useHorizontalScroll.ts","webpack://mytonwallet/./src/hooks/usePrevious2.ts","webpack://mytonwallet/./src/components/explore/Category.module.scss?4c23","webpack://mytonwallet/./src/components/explore/Category.tsx","webpack://mytonwallet/./src/util/memo.ts","webpack://mytonwallet/./src/components/explore/DappFeed.module.scss?4d73","webpack://mytonwallet/./src/components/explore/DappFeedItem.tsx","webpack://mytonwallet/./src/components/explore/Explore.module.scss?3005","webpack://mytonwallet/./src/components/explore/DappFeed.tsx","webpack://mytonwallet/./src/components/ui/MenuItem.module.scss?fd35","webpack://mytonwallet/./src/components/ui/MenuItem.tsx","webpack://mytonwallet/./src/components/explore/Site.tsx","webpack://mytonwallet/./src/components/explore/ExploreSearchSuggestions.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.tsx","webpack://mytonwallet/./src/components/explore/CategoryHeader.module.scss?9a46","webpack://mytonwallet/./src/components/explore/SiteList.tsx","webpack://mytonwallet/./src/components/explore/SiteList.module.scss?5590","webpack://mytonwallet/./src/components/explore/Explore.tsx","webpack://mytonwallet/./src/components/ledger/LedgerSelectWallets.tsx","webpack://mytonwallet/./src/components/ledger/LedgerModal.tsx","webpack://mytonwallet/./src/hooks/useElementVisibility.ts","webpack://mytonwallet/./src/hooks/usePreventPinchZoomGesture.ts","webpack://mytonwallet/./src/components/common/TransactionBanner.module.scss?99c4","webpack://mytonwallet/./src/components/common/TransactionBanner.tsx","webpack://mytonwallet/./src/hooks/useQrScannerSupport.ts","webpack://mytonwallet/./src/components/transfer/Transfer.module.scss?40cb","webpack://mytonwallet/./src/components/ui/AddressBookItem.tsx","webpack://mytonwallet/./src/components/ui/AddressBook.tsx","webpack://mytonwallet/./src/components/ui/AddressInput.module.scss?066a","webpack://mytonwallet/./src/components/ui/AddressInput.tsx","webpack://mytonwallet/./src/components/domain/RenewDomainModal.module.scss?bf4b","webpack://mytonwallet/./src/components/domain/LinkingDomainModal.tsx","webpack://mytonwallet/./src/components/transfer/NftChips.tsx","webpack://mytonwallet/./src/components/transfer/NftChips.module.scss?1471","webpack://mytonwallet/./src/components/domain/RenewDomainModal.tsx","webpack://mytonwallet/./src/util/ton/formatTransferUrl.ts","webpack://mytonwallet/./src/components/common/SelectTokenButton.module.scss?97ef","webpack://mytonwallet/./src/components/common/SelectTokenButton.tsx","webpack://mytonwallet/./src/util/swap/getChainNetworkName.ts","webpack://mytonwallet/./src/components/common/TokenSelector.module.scss?759b","webpack://mytonwallet/./src/components/common/TokenSelector.tsx","webpack://mytonwallet/./src/components/ui/helpers/buildContentHtml.ts","webpack://mytonwallet/./src/hooks/useFontScale.ts","webpack://mytonwallet/./src/components/ui/RichNumberInput.tsx","webpack://mytonwallet/./src/util/saveCaretPosition.ts","webpack://mytonwallet/./src/components/receive/ReceiveModal.module.scss?beea","webpack://mytonwallet/./src/components/receive/InvoiceModal.tsx","webpack://mytonwallet/./src/util/animateHorizontalScroll.ts","webpack://mytonwallet/./src/components/ui/Tab.tsx","webpack://mytonwallet/./src/components/ui/Tab.module.scss?eb4d","webpack://mytonwallet/./src/components/ui/TabList.tsx","webpack://mytonwallet/./src/components/ui/TabList.module.scss?8978","webpack://mytonwallet/./src/components/receive/content/TonActions.module.scss?fcb4","webpack://mytonwallet/./src/components/receive/content/TonActions.tsx","webpack://mytonwallet/./src/hooks/useQrCode.ts","webpack://mytonwallet/./src/components/receive/content/TonContent.tsx","webpack://mytonwallet/./src/components/receive/content/TronActions.tsx","webpack://mytonwallet/./src/components/receive/content/TronContent.tsx","webpack://mytonwallet/./src/components/receive/Content.tsx","webpack://mytonwallet/./src/components/receive/ReceiveModal.tsx","webpack://mytonwallet/./src/components/common/TransferResult.tsx","webpack://mytonwallet/./src/components/ui/hooks/useAmountInputState.ts","webpack://mytonwallet/./src/components/staking/hooks/useTokenDropdown.ts","webpack://mytonwallet/./src/hooks/useTransitionActiveKey.ts","webpack://mytonwallet/./src/components/ui/AmountInputMaxButton.module.scss?2744","webpack://mytonwallet/./src/components/ui/AmountInputMaxButton.tsx","webpack://mytonwallet/./src/components/ui/TokenDropdown.module.scss?d4fd","webpack://mytonwallet/./src/components/ui/TokenDropdown.tsx","webpack://mytonwallet/./src/components/ui/AmountInput.module.scss?1bdd","webpack://mytonwallet/./src/components/ui/AmountInput.tsx","webpack://mytonwallet/./src/global/helpers/number.ts","webpack://mytonwallet/./src/components/ui/RichNumberField.tsx","webpack://mytonwallet/./src/components/staking/Staking.module.scss?5f25","webpack://mytonwallet/./src/components/staking/StakingInitial.tsx","webpack://mytonwallet/./src/util/ton/calcJettonStakingApr.ts","webpack://mytonwallet/./src/api/constants.ts","webpack://mytonwallet/./src/components/staking/StakeModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.tsx","webpack://mytonwallet/./src/components/staking/StakingClaimModal.module.scss?734c","webpack://mytonwallet/./src/components/staking/StakingProfitItem.tsx","webpack://mytonwallet/./src/components/staking/StakingProfileItem.module.scss?092e","webpack://mytonwallet/./src/components/staking/StakingInfoContent.tsx","webpack://mytonwallet/./src/components/staking/StakingInfoModal.tsx","webpack://mytonwallet/./src/components/staking/UnstakeModal.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.tsx","webpack://mytonwallet/./src/components/ui/UpdateAvailable.module.scss?8e42","webpack://mytonwallet/./src/components/main/helpers/calcVestingAmountByStatus.ts","webpack://mytonwallet/./src/components/vesting/VestingModal.module.scss?2a82","webpack://mytonwallet/./src/components/vesting/VestingModal.tsx","webpack://mytonwallet/./src/components/vesting/VestingPasswordModal.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/helpers/sendMenu.ts","webpack://mytonwallet/./src/components/common/FeeDetailsModal.module.scss?8cde","webpack://mytonwallet/./src/components/common/FeeDetailsModal.tsx","webpack://mytonwallet/./src/components/swap/Swap.module.scss?9ed7","webpack://mytonwallet/./src/components/swap/components/SwapSubmitButton.tsx","webpack://mytonwallet/./src/hooks/useAsyncResolvers.ts","webpack://mytonwallet/./src/components/swap/SwapDexChooser.module.scss?b649","webpack://mytonwallet/./src/components/swap/SwapDexChooser.tsx","webpack://mytonwallet/./src/components/swap/SwapSettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapInitial.tsx","webpack://mytonwallet/./src/util/text.ts","webpack://mytonwallet/./src/components/transfer/CommentSection.tsx","webpack://mytonwallet/./src/components/transfer/TransferInitial.tsx","webpack://mytonwallet/./src/hooks/useContextMenuHandlers.ts","webpack://mytonwallet/./src/components/ui/WithContextMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.module.scss?b2d4","webpack://mytonwallet/./src/components/main/sections/Actions/LandscapeActions.tsx","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.module.scss?a3a8","webpack://mytonwallet/./src/components/main/sections/Actions/PortraitActions.tsx","webpack://mytonwallet/./src/util/calcChangeValue.ts","webpack://mytonwallet/./src/components/main/sections/Card/helpers/calculateFullBalance.ts","webpack://mytonwallet/./src/hooks/useUpdateIndicator.ts","webpack://mytonwallet/./src/components/ui/ClockIcon.module.scss?42cd","webpack://mytonwallet/./src/components/ui/ClockIcon.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardButton.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardButton.module.scss?f674","webpack://mytonwallet/./src/components/ui/AnimatedCounter.tsx","webpack://mytonwallet/./src/components/ui/AnimatedCounter.module.scss?5cb5","webpack://mytonwallet/./src/components/main/sections/Card/Card.module.scss?fdf3","webpack://mytonwallet/./src/components/main/sections/Card/CardAddress.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CurrencySwitcherMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.module.scss?8b12","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardBackground.tsx","webpack://mytonwallet/./src/components/main/sections/Card/CustomCardManager.tsx","webpack://mytonwallet/./src/components/main/helpers/cardColors.ts","webpack://mytonwallet/./src/components/common/TokenPriceChart.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.tsx","webpack://mytonwallet/./src/components/main/sections/Card/ChartHistorySwitcher.module.scss?014e","webpack://mytonwallet/./src/components/main/sections/Card/TokenCard.tsx","webpack://mytonwallet/./src/components/main/sections/Card/Card.tsx","webpack://mytonwallet/./src/components/main/sections/Card/helpers/getSensitiveDataMaskSkinFromCardNft.ts","webpack://mytonwallet/./src/components/main/helpers/scrollableContainer.ts","webpack://mytonwallet/./src/components/main/modals/HideNftModal.tsx","webpack://mytonwallet/./src/hooks/useInfiniteScroll.ts","webpack://mytonwallet/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://mytonwallet/./src/components/ui/InfiniteScroll.tsx","webpack://mytonwallet/./src/util/resetScroll.ts","webpack://mytonwallet/./src/components/main/sections/Content/Activities.module.scss?215b","webpack://mytonwallet/./src/components/main/sections/Content/hooks/useActivityListEntry.ts","webpack://mytonwallet/./src/components/main/sections/Content/ActivityListItem.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.module.scss?1d3d","webpack://mytonwallet/./src/components/main/sections/Content/NewWalletGreeting.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Activities.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Token.module.scss?2972","webpack://mytonwallet/./src/components/main/sections/Content/Token.tsx","webpack://mytonwallet/./src/components/main/sections/Content/hooks/useTokenContextMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/Assets.module.scss?2b3b","webpack://mytonwallet/./src/components/main/sections/Content/Assets.tsx","webpack://mytonwallet/./src/hooks/useVesting.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.module.scss?fecc","webpack://mytonwallet/./src/components/main/sections/Content/NftCollectionHeader.tsx","webpack://mytonwallet/./src/components/ui/Radio.tsx","webpack://mytonwallet/./src/components/ui/Radio.module.scss?1611","webpack://mytonwallet/./src/hooks/usePrevDuringAnimationSimple.ts","webpack://mytonwallet/./src/components/mediaViewer/hooks/useNftMenu.ts","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.module.scss?7d45","webpack://mytonwallet/./src/components/main/sections/Content/NftMenu.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nft.module.scss?a2fa","webpack://mytonwallet/./src/components/main/sections/Content/Nft.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Nfts.tsx","webpack://mytonwallet/./src/components/main/sections/Content/NftSelectionHeader.tsx","webpack://mytonwallet/./src/components/main/sections/Content/Content.module.scss?df0c","webpack://mytonwallet/./src/components/main/sections/Content/Content.tsx","webpack://mytonwallet/./src/components/main/sections/Header/AccountRenameModal.tsx","webpack://mytonwallet/./src/components/main/sections/Header/AccountSelector.module.scss?89af","webpack://mytonwallet/./src/components/main/sections/Header/AccountSelector.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/Buttons.module.scss?78bd","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/AppLockButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/QrScannerButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/SettingsButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleFullscreenButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleLayoutButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/actionButtons/ToggleSensitiveDataButton.tsx","webpack://mytonwallet/./src/components/main/sections/Header/Header.module.scss?b631","webpack://mytonwallet/./src/components/main/sections/Header/Header.tsx","webpack://mytonwallet/./src/hooks/useBrowserUiColor.ts","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.module.scss?104f","webpack://mytonwallet/./src/components/main/sections/Warnings/BackupWarning.tsx","webpack://mytonwallet/./src/components/ui/Collapsible.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/RenewDomainWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/SecurityWarning.tsx","webpack://mytonwallet/./src/components/main/sections/Warnings/Warnings.tsx","webpack://mytonwallet/./src/components/main/Main.tsx","webpack://mytonwallet/./src/components/main/Main.module.scss?6d95","webpack://mytonwallet/./src/components/main/modals/AddAccountPasswordModal.tsx","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.module.scss?8d66","webpack://mytonwallet/./src/components/main/modals/AddAccountModal.tsx","webpack://mytonwallet/./src/components/auth/MnemonicCheck.tsx","webpack://mytonwallet/./src/components/auth/MnemonicList.tsx","webpack://mytonwallet/./src/components/auth/MnemonicPrivateKey.tsx","webpack://mytonwallet/./src/components/auth/SafetyRules.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.tsx","webpack://mytonwallet/./src/components/main/modals/BackupModal.module.scss?7942","webpack://mytonwallet/./src/components/main/modals/NftAttributesModal.module.scss?d684","webpack://mytonwallet/./src/components/main/modals/NftAttributesModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.tsx","webpack://mytonwallet/./src/components/main/modals/OnRampWidgetModal.module.scss?8236","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.module.scss?87fb","webpack://mytonwallet/./src/components/main/modals/QrScannerModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.tsx","webpack://mytonwallet/./src/components/main/modals/SignatureModal.module.scss?77a6","webpack://mytonwallet/./src/hooks/usePrevDuringAnimation.ts","webpack://mytonwallet/./src/components/common/Countdown.module.scss?d513","webpack://mytonwallet/./src/components/common/Countdown.tsx","webpack://mytonwallet/./src/components/common/SwapTokensInfo.module.scss?7d2b","webpack://mytonwallet/./src/components/common/SwapTokensInfo.tsx","webpack://mytonwallet/./src/components/common/TransactionFee.tsx","webpack://mytonwallet/./src/components/common/TransactionFee.module.scss?5d5d","webpack://mytonwallet/./src/components/main/modals/TransactionModal.module.scss?6dca","webpack://mytonwallet/./src/components/main/modals/SwapActivityModal.tsx","webpack://mytonwallet/./src/components/common/TransactionAmount.module.scss?8894","webpack://mytonwallet/./src/components/common/TransactionAmount.tsx","webpack://mytonwallet/./src/components/main/modals/TransactionModal.tsx","webpack://mytonwallet/./src/components/main/modals/UnhideNftModal.tsx","webpack://mytonwallet/./src/components/ui/Notification.tsx","webpack://mytonwallet/./src/components/ui/Notification.module.scss?743a","webpack://mytonwallet/./src/components/main/Notifications.tsx","webpack://mytonwallet/./src/hooks/useHideBottomBar.ts","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.module.scss?e839","webpack://mytonwallet/./src/components/main/sections/Actions/BottomBar.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.module.scss?afa2","webpack://mytonwallet/./src/components/mediaViewer/helpers/ghostAnimation.ts","webpack://mytonwallet/./src/components/ui/ShowTransition.tsx","webpack://mytonwallet/./src/components/mediaViewer/Actions.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaInfo.tsx","webpack://mytonwallet/./src/hooks/useSignalRef.ts","webpack://mytonwallet/./src/components/mediaViewer/hooks/useZoomChangeSignal.ts","webpack://mytonwallet/./src/components/mediaViewer/Media.tsx","webpack://mytonwallet/./src/components/mediaViewer/Slides.tsx","webpack://mytonwallet/./src/components/mediaViewer/MediaViewer.tsx","webpack://mytonwallet/./src/util/isElementInViewport.ts","webpack://mytonwallet/./src/components/mintCard/CardPros.module.scss?2970","webpack://mytonwallet/./src/components/mintCard/CardPros.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardModal.module.scss?777c","webpack://mytonwallet/./src/components/mintCard/CardRoster.tsx","webpack://mytonwallet/./src/components/mintCard/MintCardModal.tsx","webpack://mytonwallet/./src/components/ui/Switcher.tsx","webpack://mytonwallet/./src/components/ui/Switcher.module.scss?8b13","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.module.scss?14ce","webpack://mytonwallet/./src/components/settings/biometrics/TurnOff.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOffWarning.tsx","webpack://mytonwallet/./src/components/settings/biometrics/TurnOn.tsx","webpack://mytonwallet/./src/components/settings/biometrics/Biometrics.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsTurnOn.tsx","webpack://mytonwallet/./src/components/settings/SettingsAppearance.tsx","webpack://mytonwallet/./src/util/getAccentColorsFromNfts.ts","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.tsx","webpack://mytonwallet/./src/components/main/modals/DeleteTokenModal.module.scss?34ea","webpack://mytonwallet/./src/components/ui/Draggable.tsx","webpack://mytonwallet/./src/components/ui/Draggable.module.scss?804f","webpack://mytonwallet/./src/components/settings/SettingsTokens.tsx","webpack://mytonwallet/./src/components/settings/SettingsAssets.tsx","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.module.scss?141f","webpack://mytonwallet/./src/components/main/modals/DisconnectDappModal.tsx","webpack://mytonwallet/./src/components/settings/SettingsDapps.tsx","webpack://mytonwallet/./src/util/getBuildPlatform.ts","webpack://mytonwallet/./src/components/settings/SettingsDeveloperOptions.tsx","webpack://mytonwallet/./src/components/settings/SettingsDisclaimer.tsx","webpack://mytonwallet/./src/components/settings/nfts/HiddenByUserNft.tsx","webpack://mytonwallet/./src/components/settings/nfts/ProbablyScamNft.tsx","webpack://mytonwallet/./src/components/settings/SettingsHiddenNfts.tsx","webpack://mytonwallet/./src/components/settings/SettingsLanguage.tsx","webpack://mytonwallet/./src/components/settings/SettingsPushNotifications.tsx","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/definitions.js","webpack://mytonwallet/./node_modules/capacitor-native-settings/dist/esm/index.js","webpack://mytonwallet/./src/components/settings/backup/Backup.tsx","webpack://mytonwallet/./src/components/common/backup/PrivateKeyContent.tsx","webpack://mytonwallet/./src/components/settings/backup/Backup.module.scss?612f","webpack://mytonwallet/./src/components/settings/backup/BackupPrivateKey.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSafetyRules.tsx","webpack://mytonwallet/./src/components/settings/backup/BackupSecretWords.tsx","webpack://mytonwallet/./src/components/settings/biometrics/NativeBiometricsToggle.tsx","webpack://mytonwallet/./src/components/settings/SettingsSecurity.tsx","webpack://mytonwallet/./src/components/settings/SettingsTokenList.tsx","webpack://mytonwallet/./src/components/settings/SettingsWalletVersion.tsx","webpack://mytonwallet/./src/components/settings/Settings.tsx","webpack://mytonwallet/./src/components/settings/SettingsModal.tsx","webpack://mytonwallet/./src/components/swap/SwapBlockchain.tsx","webpack://mytonwallet/./src/components/common/SwapResult.module.scss?5045","webpack://mytonwallet/./src/components/common/SwapResult.tsx","webpack://mytonwallet/./src/components/swap/SwapComplete.tsx","webpack://mytonwallet/./src/components/swap/SwapPassword.tsx","webpack://mytonwallet/./src/components/swap/SwapWaitTokens.tsx","webpack://mytonwallet/./src/components/swap/SwapModal.tsx","webpack://mytonwallet/./src/components/transfer/TransferComplete.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.tsx","webpack://mytonwallet/./src/components/ui/AmountWithFeeTextField.module.scss?aa7f","webpack://mytonwallet/./src/components/transfer/TransferConfirm.tsx","webpack://mytonwallet/./src/components/transfer/TransferMultiNftProcess.tsx","webpack://mytonwallet/./src/components/transfer/TransferPassword.tsx","webpack://mytonwallet/./src/components/transfer/TransferModal.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.tsx","webpack://mytonwallet/./src/components/ui/ConfettiContainer.module.scss?8c12","webpack://mytonwallet/./src/components/ui/LoadingOverlay.tsx","webpack://mytonwallet/./src/components/ui/LoadingOverlay.module.scss?7efd","webpack://mytonwallet/./src/components/App.module.scss?a9d3","webpack://mytonwallet/./src/components/App.tsx","webpack://mytonwallet/./src/util/electron.ts","webpack://mytonwallet/./src/index.tsx","webpack://mytonwallet/./src/util/fonts.ts"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"mytonwallet:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/**\n * @since 0.0.1\n */\nexport var BarcodeFormat;\n(function (BarcodeFormat) {\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Aztec\"] = \"AZTEC\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Codabar\"] = \"CODABAR\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code39\"] = \"CODE_39\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code93\"] = \"CODE_93\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Code128\"] = \"CODE_128\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"DataMatrix\"] = \"DATA_MATRIX\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean8\"] = \"EAN_8\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Ean13\"] = \"EAN_13\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Itf\"] = \"ITF\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"Pdf417\"] = \"PDF_417\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"QrCode\"] = \"QR_CODE\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcA\"] = \"UPC_A\";\n    /**\n     * Only available on Android and iOS.\n     *\n     * @since 0.0.1\n     */\n    BarcodeFormat[\"UpcE\"] = \"UPC_E\";\n})(BarcodeFormat || (BarcodeFormat = {}));\n/**\n * @since 0.0.1\n */\nexport var BarcodeValueType;\n(function (BarcodeValueType) {\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"CalendarEvent\"] = \"CALENDAR_EVENT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"ContactInfo\"] = \"CONTACT_INFO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"DriversLicense\"] = \"DRIVERS_LICENSE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Email\"] = \"EMAIL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Geo\"] = \"GEO\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Isbn\"] = \"ISBN\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Phone\"] = \"PHONE\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Product\"] = \"PRODUCT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Sms\"] = \"SMS\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Text\"] = \"TEXT\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Url\"] = \"URL\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Wifi\"] = \"WIFI\";\n    /**\n     * @since 0.0.1\n     */\n    BarcodeValueType[\"Unknown\"] = \"UNKNOWN\";\n})(BarcodeValueType || (BarcodeValueType = {}));\n/**\n * @since 7.0.0\n */\nexport var Resolution;\n(function (Resolution) {\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"640x480\"] = 0] = \"640x480\";\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"1280x720\"] = 1] = \"1280x720\";\n    /**\n     * @since 7.0.0\n     */\n    Resolution[Resolution[\"1920x1080\"] = 2] = \"1920x1080\";\n    /**\n     * @since 7.2.0\n     */\n    Resolution[Resolution[\"3840x2160\"] = 3] = \"3840x2160\";\n})(Resolution || (Resolution = {}));\n/**\n * @since 0.0.1\n */\nexport var LensFacing;\n(function (LensFacing) {\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Front\"] = \"FRONT\";\n    /**\n     * @since 0.0.1\n     */\n    LensFacing[\"Back\"] = \"BACK\";\n})(LensFacing || (LensFacing = {}));\n/**\n * @since 5.1.0\n */\nexport var GoogleBarcodeScannerModuleInstallState;\n(function (GoogleBarcodeScannerModuleInstallState) {\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"PENDING\"] = 1] = \"PENDING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOADING\"] = 2] = \"DOWNLOADING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"CANCELED\"] = 3] = \"CANCELED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"COMPLETED\"] = 4] = \"COMPLETED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"FAILED\"] = 5] = \"FAILED\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"INSTALLING\"] = 6] = \"INSTALLING\";\n    /**\n     * @since 5.1.0\n     */\n    GoogleBarcodeScannerModuleInstallState[GoogleBarcodeScannerModuleInstallState[\"DOWNLOAD_PAUSED\"] = 7] = \"DOWNLOAD_PAUSED\";\n})(GoogleBarcodeScannerModuleInstallState || (GoogleBarcodeScannerModuleInstallState = {}));\n/**\n * @since 7.0.0\n */\nexport var AddressType;\n(function (AddressType) {\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"HOME\"] = 0] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"UNKNOWN\"] = 1] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    AddressType[AddressType[\"WORK\"] = 2] = \"WORK\";\n})(AddressType || (AddressType = {}));\n/**\n * @since 7.0.0\n */\nexport var EmailFormatType;\n(function (EmailFormatType) {\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"HOME\"] = 0] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"UNKNOWN\"] = 1] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    EmailFormatType[EmailFormatType[\"WORK\"] = 2] = \"WORK\";\n})(EmailFormatType || (EmailFormatType = {}));\n/**\n * @since 7.0.0\n */\nexport var PhoneFormatType;\n(function (PhoneFormatType) {\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"FAX\"] = 0] = \"FAX\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"HOME\"] = 1] = \"HOME\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"MOBILE\"] = 2] = \"MOBILE\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"UNKNOWN\"] = 3] = \"UNKNOWN\";\n    /**\n     * @since 7.0.0\n     */\n    PhoneFormatType[PhoneFormatType[\"WORK\"] = 4] = \"WORK\";\n})(PhoneFormatType || (PhoneFormatType = {}));\n/**\n * @since 7.0.0\n */\nexport var WifiEncryptionType;\n(function (WifiEncryptionType) {\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"OPEN\"] = 1] = \"OPEN\";\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"WEP\"] = 2] = \"WEP\";\n    /**\n     * @since 7.0.0\n     */\n    WifiEncryptionType[WifiEncryptionType[\"WPA\"] = 3] = \"WPA\";\n})(WifiEncryptionType || (WifiEncryptionType = {}));\n//# sourceMappingURL=definitions.js.map","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","import { TONCOIN } from '../config';\nimport { Big } from '../lib/big.js';\n\nBig.RM = 0; // RoundDown\nBig.NE = -100000; // Disable exponential form\nBig.PE = 100000; // Disable exponential form\n\nconst ten = Big(10);\n\nexport function fromDecimal(value: string | number, decimals?: number) {\n  return BigInt(Big(value).mul(ten.pow(decimals ?? TONCOIN.decimals)).round().toString());\n}\n\nexport function toDecimal(value: bigint | number, decimals?: number, noFloor = false) {\n  return toBig(value, decimals ?? TONCOIN.decimals, noFloor).toString();\n}\n\nexport function toBig(value: bigint | number, decimals: number = TONCOIN.decimals, noFloor = false) {\n  return Big(value.toString()).div(ten.pow(decimals)).round(decimals, noFloor ? Big.roundHalfUp : undefined);\n}\n\nexport function roundDecimal(value: string, decimals: number) {\n  return Big(value).round(decimals).toString();\n}\n","import { ONE_TON } from '../config';\nimport { fromDecimal } from './decimals';\nimport { randomBytes } from './random';\n\nexport const BIGINT_PREFIX = 'bigint:';\n\nexport function bigintReviver(this: any, key: string, value: any) {\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(7));\n  }\n  return value;\n}\n\nexport function bigintAbs(value: bigint) {\n  return value === -0n || value < 0n ? -value : value;\n}\n\nexport function bigintSum(values: bigint[]) {\n  let result = 0n;\n  for (const value of values) result += value;\n  return result;\n}\n\nexport function bigintDivideToNumber(value: bigint, num: number) {\n  return (value * ONE_TON) / fromDecimal(num);\n}\n\nexport function bigintMultiplyToNumber(value: bigint, num: number) {\n  return (value * fromDecimal(num)) / ONE_TON;\n}\n\nexport function bigintRandom(bytes: number) {\n  let value = BigInt(0);\n  for (const randomNumber of randomBytes(bytes)) {\n    const randomBigInt = BigInt(randomNumber);\n    value = (value << BigInt(8)) + randomBigInt;\n  }\n  return value;\n}\n\nexport function bigintCountBits(value: bigint) {\n  const binaryString = value.toString(2);\n  return binaryString.length;\n}\n\nexport function bigintMax(value0: bigint, value1: bigint) {\n  return value0 > value1 ? value0 : value1;\n}\n\nexport function bigintMin(value0: bigint, value1: bigint) {\n  return value0 < value1 ? value0 : value1;\n}\n\nexport function bigintMultiplePercent(value: bigint, percent: number) {\n  return (value * fromDecimal(percent / 100)) / ONE_TON;\n}\n","import { IS_EXTENSION } from '../config';\n\nexport const IS_EXTENSION_PAGE_SCRIPT = IS_EXTENSION\n  && !['chrome-extension:', 'moz-extension:'].includes(self.location.protocol);\n","import { APP_ENV, DEBUG_ALERT_MSG } from '../config';\nimport { SECOND } from './dateFormat';\nimport { IS_EXTENSION_PAGE_SCRIPT } from './environment';\nimport { logDebugError } from './logs';\nimport { throttle } from './schedulers';\n\nconst shouldShowAlert = (APP_ENV === 'development' || APP_ENV === 'staging')\n  && typeof window === 'object'\n  && !IS_EXTENSION_PAGE_SCRIPT;\n\nconst throttledAlert = throttle((message) => window.alert(message), 10 * SECOND);\n\nself.addEventListener('error', handleErrorEvent);\nself.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error | string) {\n  logDebugError('handleError', err);\n\n  const message = typeof err === 'string' ? err : err.message;\n  const stack = typeof err === 'object' ? err.stack : undefined;\n\n  if (message.endsWith('Failed to import rlottie-wasm.js')) {\n    return;\n  }\n\n  if (shouldShowAlert) {\n    throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(message) || err}\\n${stack}`);\n  }\n}\n","import type { ApiTonWalletVersion, ContractInfo, ContractName } from './types';\n\nimport { JettonStakingGas } from './contracts/JettonStaking/imports/constants';\n\nexport const TON_BIP39_PATH = 'm/44\\'/607\\'/0\\'';\n\nexport const ONE_TON = 1_000_000_000n;\nexport const TOKEN_TRANSFER_AMOUNT = 50000000n; // 0.05 TON\nexport const TINY_TOKEN_TRANSFER_AMOUNT = 18000000n; // 0.018 TON\nexport const TOKEN_TRANSFER_REAL_AMOUNT = 32100000n; // 0.0321 TON\nexport const TINY_TOKEN_TRANSFER_REAL_AMOUNT = 8000000n; // 0.008 TON\nexport const TINIEST_TOKEN_TRANSFER_REAL_AMOUNT = 3000000n; // 0.003 TON\nexport const TOKEN_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\nexport const CLAIM_MINTLESS_AMOUNT = 20000000n; // 0.02 TON\n\n/** The amount that MyTonWallet attaches to NFT transfers */\nexport const NFT_TRANSFER_AMOUNT = 100000000n; // 0.1 TON\nexport const NFT_TRANSFER_REAL_AMOUNT = 5000000n; // 0.005 TON\nexport const NFT_TRANSFER_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n/**\n * When the NFT contract handles the payload we send, it simply adds its data to the payload. If the resulting payload\n * size becomes greater than the cell capacity, the contract fails to send the NFT. To avoid that, we keep some free\n * space in the payload cell we send. This constant is the size of the free space in bits.\n */\nexport const NFT_PAYLOAD_SAFE_MARGIN = 14 * 8;\n\nexport const TON_GAS = {\n  stakeNominators: ONE_TON,\n  unstakeNominators: ONE_TON,\n  stakeLiquid: ONE_TON,\n  unstakeLiquid: ONE_TON,\n  stakeJettonsForward: JettonStakingGas.STAKE_JETTONS,\n  stakeJettons: JettonStakingGas.STAKE_JETTONS + TOKEN_TRANSFER_AMOUNT,\n  unstakeJettons: JettonStakingGas.UNSTAKE_JETTONS,\n  claimJettons: JettonStakingGas.JETTON_TRANSFER + JettonStakingGas.SIMPLE_UPDATE_REQUEST,\n  changeDns: 15_000_000n, // 0.015 TON\n  stakeEthena: TOKEN_TRANSFER_AMOUNT + 100_000_000n, // 0.15 TON\n  stakeEthenaForward: 100_000_000n, // 0.1 TON\n  unstakeEthena: TOKEN_TRANSFER_AMOUNT + 100_000_000n, // 0.15 TON\n  unstakeEthenaForward: 100_000_000n, // 0.1 TON\n  unstakeEthenaLocked: 150_000_000n, // 0.15 TON\n  unstakeEthenaLockedForward: 70_000_000n, // 0.07 TON\n} as const;\n\nexport const TON_GAS_REAL = {\n  stakeNominators: 1_000_052_853n,\n  unstakeNominators: 148_337_433n,\n  stakeLiquid: 20_251_387n,\n  unstakeLiquid: 18_625_604n,\n  stakeJettons: 74_879_996n,\n  unstakeJettons: 59_971_662n,\n  claimJettons: 57_053_859n,\n  stakeEthena: 116_690_790n,\n  unstakeEthena: 113_210_330n,\n  unstakeEthenaLocked: 37_612_000n,\n};\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\nexport const DEFAULT_IS_BOUNCEABLE = true;\nexport const WALLET_IS_BOUNCEABLE = false;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nexport const FEE_FACTOR = 1.05;\n\nexport const ALL_WALLET_VERSIONS: ApiTonWalletVersion[] = [\n  'simpleR1', 'simpleR2', 'simpleR3', 'v2R1', 'v2R2', 'v3R1', 'v3R2', 'v4R2', 'W5',\n];\n\nexport const OUR_FEE_PAYLOAD_BOC = 'te6cckEBAQEABgAACE0jhUPUcYAL';\n\nexport const RAW_ADDRESS_LENGTH = 66;\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 600; // 10 min.\n\nexport const DEFAULT_MAX_MESSAGES = 4;\nexport const LEDGER_MAX_MESSAGES = 1;\nexport const W5_MAX_MESSAGES = 255;\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n  OurFee = 0x4d238543,\n  Bounced = 0xffffffff,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n  OwnershipAssigned = 0x05138d91,\n  Excesses = 0xd53276db,\n}\n\nexport enum LiquidStakingOpCode {\n  // Pool\n  RequestLoan = 0xe642c965,\n  LoanRepayment = 0xdfdca27b,\n  Deposit = 0x47d54391,\n  Withdraw = 0x319B0CDC,\n  Withdrawal = 0x0a77535c,\n  DeployController = 0xb27edcad,\n  Touch = 0x4bc7c2df,\n  Donate = 0x73affe21,\n  // NFT\n  DistributedAsset = 0xdb3b8abd,\n  // Jetton\n  Vote = 0x69fb306c,\n}\n\nexport enum JettonStakingOpCode {\n  UnstakeRequest = 0x499a9262,\n  ClaimRewards = 0x78d9f109,\n}\n\nexport enum VestingV1OpCode {\n  AddWhitelist = 0x7258a69b,\n}\n\nexport enum SingleNominatorOpCode {\n  Withdraw = 0x1000,\n  ChangeValidator = 0x1001,\n}\n\nexport enum DnsOpCode {\n  ChangeRecord = 0x4eb1f0f9,\n}\n\nexport enum TeleitemOpCode {\n  Ok = 0xa37a0983,\n}\n\nexport enum OtherOpCode {\n  TokenBridgePaySwap = 0x8,\n}\n\nexport enum ContractType {\n  Wallet = 'wallet',\n  Staking = 'staking',\n}\n\nexport enum DnsCategory {\n  DnsNextResolver = 'dns_next_resolver',\n  Wallet = 'wallet',\n  Site = 'site',\n  BagId = 'storage',\n  Unknown = 'unknown',\n}\n\nexport const EXCESS_OP_CODES = [\n  JettonOpCode.Excesses,\n  TeleitemOpCode.Ok,\n];\n\nexport const DNS_CATEGORY_HASH_MAP = {\n  dns_next_resolver: '19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff',\n  wallet: 'e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b',\n  site: 'fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe',\n  storage: '49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7',\n} as const;\n\nexport const KnownContracts: Record<ContractName, ContractInfo> = {\n  simpleR1: {\n    name: 'simpleR1',\n    hash: '3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd',\n    type: ContractType.Wallet,\n  },\n  simpleR2: {\n    name: 'simpleR2',\n    hash: '672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df',\n    type: ContractType.Wallet,\n  },\n  simpleR3: {\n    name: 'simpleR3',\n    hash: 'd95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52',\n    type: ContractType.Wallet,\n  },\n  v2R1: {\n    name: 'v2R1',\n    hash: 'fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029',\n    type: ContractType.Wallet,\n  },\n  v2R2: {\n    name: 'v2R2',\n    hash: 'b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983',\n    type: ContractType.Wallet,\n  },\n  v3R1: {\n    name: 'v3R1',\n    hash: '11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6',\n    type: ContractType.Wallet,\n  },\n  v3R2: {\n    name: 'v3R2',\n    hash: 'df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14',\n    type: ContractType.Wallet,\n  },\n  v4R1: {\n    name: 'v4R1',\n    hash: '1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf',\n    type: ContractType.Wallet,\n  },\n  v4R2: {\n    name: 'v4R2',\n    hash: '5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1',\n    type: ContractType.Wallet,\n  },\n  W5: {\n    name: 'W5',\n    hash: '7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5',\n    type: ContractType.Wallet,\n  },\n  highloadV2: {\n    name: 'highloadV2',\n    hash: 'fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e',\n    type: ContractType.Wallet,\n  },\n  nominatorPool: {\n    name: 'nominatorPool',\n    hash: '26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff',\n    type: ContractType.Staking,\n  },\n  multisig: {\n    name: 'multisig',\n    hash: '45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2',\n    type: ContractType.Wallet,\n  },\n  multisigV2: {\n    name: 'multisigV2',\n    hash: 'eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97',\n    type: ContractType.Wallet,\n  },\n  vesting: {\n    name: 'vesting',\n    hash: '69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83',\n    type: ContractType.Wallet,\n  },\n  multisigNew: {\n    name: 'multisigNew',\n    hash: '7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f',\n    type: ContractType.Wallet,\n  },\n  dedustPool: {\n    name: 'dedustPool',\n    hash: 'f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62',\n    isSwapAllowed: true,\n  },\n  dedustVaultNative: {\n    name: 'dedustVaultNative',\n    hash: '64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQAYqo4u7VF0fa4DPAebk4g9lBytj2VFny7pzXR0trjtXQaO\n  dedustVaultJetton: {\n    name: 'dedustVaultJetton',\n    hash: '5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307',\n    isSwapAllowed: true,\n  },\n  stonPtonWallet: {\n    name: 'stonPtonWallet',\n    hash: '6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880',\n    isSwapAllowed: true,\n  },\n  stonRouter: {\n    name: 'stonRouter',\n    hash: '14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da',\n    isSwapAllowed: true,\n  },\n  stonRouterV2_1: {\n    name: 'stonRouterV2_1',\n    hash: 'd61cb7fb7bee0cc414286a482fccdec53c3f8717e4aae4fc362d98ab6254e6cd',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_1: {\n    name: 'stonPoolV2_1',\n    hash: '16cc513c380e329f45d54f294787e2030e289799eca138961c1cd7e26e882c7c',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQCS4UEa5UaJLzOyyKieqQOQ2P9M-7kXpkO5HnP3Bv250cN3\n  stonRouterV2_2: {\n    name: 'stonRouterV2_2',\n    hash: '094b5084111addda1b6fac7007c8a8f85ff4ccc63475815ab3dfa3b5b4c6b102',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQBSNX_5mSikBVttWhIaIb0f8jJU7fL6kvyyFVppd7dWRO6M\n  stonRouterV2_2_alt: {\n    name: 'stonRouterV2_2_alt',\n    hash: 'd41e7563afa05ee008655e190920d3f53de9cab4c2d4e10ee1d0f158e95e52e5',\n    isSwapAllowed: true,\n  },\n  stonPoolV2_2: {\n    name: 'stonPoolV2_2',\n    hash: '11eaf6db706e63adf9327897aaa845c77a631856abfc14375837f19b617cacb4',\n    isSwapAllowed: true,\n  },\n  // Example: https://tonscan.org/address/EQBiLHuQjDj4fNyCD7Ch5HwpNGldlb5g-LMwQ1kStQ4NM5kv\n  stonPtonWalletV2: {\n    name: 'stonPtonWalletV2',\n    hash: '2761042202032258de9eb1b672e1ec2e4f13b2af00700195801ada33f7ced1b6',\n    isSwapAllowed: true,\n  },\n};\n","import { decodeExtensionMessage, encodeExtensionMessage } from './extensionMessageSerializer';\nimport generateUniqueId from './generateUniqueId';\nimport { logDebugError } from './logs';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  args: any[];\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent extends MessageEvent {\n  data: OriginMessageData;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nexport type ApiUpdate = { type: string } & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string; stack?: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: AnyToVoidFunction;\n  reject: AnyToVoidFunction;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | chrome.runtime.Port | DedicatedWorkerGlobalScope,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private shouldUseJson?: boolean,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise = new Promise<any>((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData | string) {\n    try {\n      data = decodeExtensionMessage(data);\n    } catch (err: any) {\n      logDebugError('PostMessageConnector: Failed to parse message', err);\n      return;\n    }\n\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      const error = new Error(data.error?.message);\n      if (data.error?.stack) {\n        error.stack = data.error.stack;\n      }\n      throw error;\n    }\n  }\n\n  private postMessage(data: OriginMessageData) {\n    data.channel = this.channel;\n\n    let rawData: OriginMessageData | string = data;\n    if (this.shouldUseJson) {\n      rawData = encodeExtensionMessage(data);\n    }\n\n    if ('open' in this.target) { // Is Window\n      this.target.postMessage(rawData, this.targetOrigin);\n    } else {\n      this.target.postMessage(rawData);\n    }\n  }\n}\n\n/**\n * Allows to call functions, provided by another messenger (a window, a worker), in this messenger.\n * The other messenger must provide the functions using `createPostMessageInterface`.\n */\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window | DedicatedWorkerGlobalScope,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, undefined, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\n/**\n * Allows to call functions, provided by the extension service worker, in this window.\n * The service worker must provide the functions using `createExtensionInterface`.\n */\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel, true);\n\n  function connect() {\n    const port = self.chrome.runtime.connect({ name });\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\n/**\n * Allows to call functions, provided by a window, in this service worker.\n * The window must provide the functions using `createReverseExtensionInterface`.\n *\n * Warning: the connector is able to send messages only when the popup window is open.\n */\nexport function createReverseExtensionConnector(portName: string) {\n  const nullWorker = {\n    postMessage() {\n      throw new Error('The popup window is not connected');\n    },\n  } as Pick<Worker, 'postMessage'> as Worker;\n\n  const connector = new ConnectorClass(nullWorker, undefined, undefined, true);\n\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    connector.target = port;\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    port.onDisconnect.addListener(() => {\n      connector.target = nullWorker;\n    });\n  });\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import type { LangCode } from '../global/types';\nimport type { LangFn } from './langProvider';\n\nimport withCache from './withCache';\n\nexport const SECOND = 1000;\nexport const MINUTE = SECOND * 60;\nexport const HOUR = MINUTE * 60;\nexport const DAY = HOUR * 24;\nexport const YEAR = 365 * DAY;\n\nconst formatDayToStringWithCache = withCache((\n  langCode: LangCode,\n  dayStartAt: number,\n  noYear?: boolean,\n  monthFormat: 'short' | 'long' | 'numeric' | false = 'short',\n  noDay?: boolean,\n  withTime = false,\n) => {\n  return new Date(dayStartAt).toLocaleString(\n    langCode,\n    {\n      year: noYear ? undefined : 'numeric',\n      month: monthFormat || undefined,\n      day: noDay ? undefined : 'numeric',\n      hour: withTime ? 'numeric' : undefined,\n      minute: withTime ? 'numeric' : undefined,\n      hourCycle: 'h23',\n    },\n  );\n});\n\nexport function formatRelativeHumanDateTime(\n  langCode: LangCode = 'en',\n  time: number,\n) {\n  const total = time - Date.now();\n  const minutes = Math.floor((total / 1000 / 60) % 60);\n  const hours = Math.floor((total / (1000 * 3600)) % 24);\n  const days = Math.floor(total / 1000 / 3600 / 24);\n\n  const rtf = new Intl.RelativeTimeFormat(langCode, {\n    localeMatcher: 'best fit',\n    numeric: 'always',\n    style: 'long',\n  });\n\n  const result: string[] = [];\n\n  if (days > 0) {\n    const [daysPlural, daysValue] = rtf.formatToParts(days, 'day').reverse();\n    result.push(`${daysValue.value}${daysPlural.value}`.replace(' ', '\\u00A0'));\n  }\n  if (hours > 0) {\n    const [hoursPlural, hoursValue] = rtf.formatToParts(hours, 'hour').reverse();\n    result.push(`${hoursValue.value}${hoursPlural.value}`.replace(' ', '\\u00A0'));\n  }\n  if (minutes > 0) {\n    const [minutesPlural, minutesValue] = rtf.formatToParts(minutes, 'minute').reverse();\n    result.push(`${minutesValue.value}${minutesPlural.value}`.replace(' ', '\\u00A0'));\n  }\n\n  return result.join(' ');\n}\n\nexport function formatHumanDay(lang: LangFn, datetime: string | number) {\n  if (isToday(datetime)) {\n    return lang('Today');\n  }\n\n  if (isYesterday(datetime)) {\n    return lang('Yesterday');\n  }\n\n  return formatFullDay(lang.code!, datetime);\n}\n\nexport function formatFullDay(langCode: LangCode, datetime: string | number | Date) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const noYear = date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, dayStartAt, noYear, 'long');\n}\n\nexport function formatShortDay(langCode: LangCode, datetime: string | number | Date, withTime = false, noYear = false) {\n  const date = new Date(datetime);\n  const dayStartAt = getDayStartAt(date);\n  const today = getDayStart(new Date());\n  const todayStartAt = getDayStartAt(today);\n  const noDate = withTime && dayStartAt === todayStartAt;\n  const targetAt = withTime ? getMinuteStart(date).getTime() : dayStartAt;\n\n  noYear ||= date.getFullYear() === today.getFullYear();\n\n  return formatDayToStringWithCache(langCode, targetAt, noYear, !noDate && 'short', noDate, withTime);\n}\n\nexport function formatTime(datetime: string | number) {\n  const date = new Date(datetime);\n\n  return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n}\n\nexport function getCountDaysToDate(datetime: string | number | Date) {\n  const today = new Date();\n  const date = datetime instanceof Date ? datetime\n    : new Date(datetime);\n\n  return Math.ceil((date.getTime() - today.getTime()) / DAY);\n}\n\nexport function getDayStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}\n\nexport function getDayStartAt(datetime: number | Date) {\n  return getDayStart(datetime).getTime();\n}\n\nexport function getMinuteStart(datetime: number | Date) {\n  const date = new Date(datetime);\n  date.setSeconds(0, 0);\n  return date;\n}\n\nfunction isToday(datetime: string | number) {\n  return getDayStartAt(new Date()) === getDayStartAt(new Date(datetime));\n}\n\nfunction isYesterday(datetime: string | number) {\n  const yesterday = new Date();\n  yesterday.setDate(yesterday.getDate() - 1);\n\n  return getDayStartAt(yesterday) === getDayStartAt(new Date(datetime));\n}\n","import type { NftItem } from 'tonapi-sdk-js';\n\nimport type { ApiTonWalletVersion } from '../chains/ton/types';\nimport type { ApiTransactionActivity } from './activity';\nimport type { ApiParsedPayload } from './payload';\nimport type { ApiSseOptions } from './storage';\n\nexport type ApiChain = 'ton' | 'tron';\nexport type ApiNetwork = 'mainnet' | 'testnet';\nexport type ApiLedgerDriver = 'HID' | 'USB';\nexport type ApiTokenType = 'lp_token';\nexport type ApiDappConnectionType = 'connect' | 'sendTransaction' | 'signData';\n\nexport interface AccountIdParsed {\n  id: number;\n  network: ApiNetwork;\n}\n\nexport interface ApiInitArgs {\n  isElectron?: boolean;\n  isNativeBottomSheet?: boolean;\n  isIosApp?: boolean;\n  isAndroidApp?: boolean;\n  referrer?: string;\n  accountIds?: string[];\n}\n\nexport interface ApiToken {\n  name: string;\n  symbol: string;\n  slug: string;\n  decimals: number;\n  chain: ApiChain;\n  type?: ApiTokenType;\n  tokenAddress?: string;\n  image?: string;\n  isPopular?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  color?: string;\n  isGaslessEnabled?: boolean;\n  isStarsEnabled?: boolean;\n  isTiny?: boolean;\n  customPayloadApiUrl?: string;\n  codeHash?: string;\n  /* Means the token is fetched from the backend by default and already includes price\n  and other details (`ApiTokenDetails`), so no separate requests are needed. */\n  isFromBackend?: boolean;\n}\n\nexport type ApiTokenWithPrice = ApiToken & {\n  price: number;\n  priceUsd: number;\n  percentChange24h: number;\n};\n\nexport type ApiKnownAddresses = Record<string, ApiAddressInfo>;\n\nexport interface ApiAddressInfo {\n  name?: string;\n  isScam?: boolean;\n  isMemoRequired?: boolean;\n}\n\nexport interface ApiNftSuperCollection {\n  id: string;\n  name: string;\n  icon?: 'gift';\n}\n\nexport type ApiActivityTimestamps = Record<string, number | undefined>;\nexport type ApiTransactionType = 'stake' | 'unstake' | 'unstakeRequest'\n  | 'callContract' | 'excess' | 'contractDeploy' | 'bounced'\n  | 'mint' | 'burn' | 'auctionBid' | 'nftTrade'\n  | 'dnsChangeAddress' | 'dnsChangeSite' | 'dnsChangeSubdomains' | 'dnsChangeStorage' | 'dnsDelete' | 'dnsRenew'\n  | 'liquidityDeposit' | 'liquidityWithdraw'\n  | undefined;\n\nexport interface ApiTransaction {\n  txId: string;\n  timestamp: number;\n  /** The amount to show in the UI (may mismatch the actual attached TON amount) */\n  amount: bigint;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  encryptedComment?: string;\n  /**\n   * The fee to show in the UI (not the same as the network fee). When not 0, should be shown even for incoming\n   * transactions. It means that there was a hidden outgoing transaction with the given fee.\n   */\n  fee: bigint;\n  slug: string;\n  isIncoming: boolean;\n  normalizedAddress: string; // Only for TON now\n  /** Trace external message hash normalized. Only for TON. */\n  externalMsgHashNorm?: string;\n  shouldHide?: boolean;\n  type?: ApiTransactionType;\n  metadata?: ApiTransactionMetadata;\n  nft?: ApiNft;\n  /** True if awaiting confirmation by the blockchain */\n  isPending?: true;\n}\n\nexport type ApiTransactionMetadata = ApiAddressInfo;\n\nexport type ApiMtwCardType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\nexport type ApiMtwCardTextType = 'light' | 'dark';\nexport type ApiMtwCardBorderShineType = 'up' | 'down' | 'left' | 'right' | 'radioactive';\n\nexport interface ApiNftAttribute {\n  trait_type: string;\n  value: string;\n}\n\nexport interface ApiNftMetadata {\n  attributes?: ApiNftAttribute[];\n  lottie?: string;\n  imageUrl?: string;\n  fragmentUrl?: string;\n  mtwCardId?: number;\n  mtwCardType?: ApiMtwCardType;\n  mtwCardTextType?: ApiMtwCardTextType;\n  mtwCardBorderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport interface ApiNft {\n  index: number;\n  ownerAddress?: string;\n  name?: string;\n  address: string;\n  thumbnail: string;\n  image: string;\n  description?: string;\n  collectionName?: string;\n  collectionAddress?: string;\n  isOnSale: boolean;\n  isHidden?: boolean;\n  isOnFragment?: boolean;\n  isTelegramGift?: boolean;\n  isScam?: boolean;\n  metadata: ApiNftMetadata;\n}\n\nexport interface ApiDomainData {\n  domain: string;\n  linkedAddress?: string;\n  lastFillUpTime: string;\n  nft: NftItem;\n}\n\nexport type ApiHistoryList = Array<[number, number]>;\n\nexport type ApiStakingType = ApiStakingState['type'];\nexport type ApiBackendStakingType = 'nominators' | 'liquid';\n\ntype BaseStakingState = {\n  id: string;\n  tokenSlug: string;\n  annualYield: number;\n  yieldType: ApiYieldType;\n  balance: bigint;\n  pool: string;\n  unstakeRequestAmount?: bigint;\n};\n\nexport type ApiNominatorsStakingState = BaseStakingState & {\n  type: 'nominators';\n  start: number;\n  end: number;\n  pendingDepositAmount: bigint;\n};\n\nexport type ApiLiquidStakingState = BaseStakingState & {\n  type: 'liquid';\n  tokenBalance: bigint;\n  instantAvailable: bigint;\n  start: number;\n  end: number;\n};\n\nexport type ApiJettonStakingState = BaseStakingState & {\n  type: 'jetton';\n  tokenAddress: string;\n  unclaimedRewards: bigint;\n  stakeWalletAddress: string;\n  tokenAmount: bigint;\n  period: number;\n  tvl: bigint;\n  dailyReward: bigint;\n  poolWallets?: string[];\n};\n\nexport type ApiEthenaStakingState = BaseStakingState & {\n  type: 'ethena';\n  tokenBalance: bigint;\n  tsUsdeWalletAddress: string;\n  lockedBalance: bigint;\n  unstakeRequestAmount: bigint;\n  unlockTime?: number;\n  annualYieldStandard?: number;\n  annualYieldVerified?: number;\n};\n\nexport type ApiYieldType = 'APY' | 'APR';\nexport type ApiStakingState = ApiNominatorsStakingState\n  | ApiLiquidStakingState\n  | ApiJettonStakingState\n  | ApiEthenaStakingState;\nexport type ApiToncoinStakingState = ApiNominatorsStakingState | ApiLiquidStakingState;\n\nexport interface ApiNominatorsPool {\n  address: string;\n  apy: number;\n  start: number;\n  end: number;\n}\n\nexport interface ApiBackendStakingState {\n  balance: bigint;\n  totalProfit: bigint;\n  type?: ApiBackendStakingType;\n  nominatorsPool: ApiNominatorsPool;\n  loyaltyType?: ApiLoyaltyType;\n  shouldUseNominators?: boolean;\n  stakedAt?: number;\n  ethena: {\n    /**\n     * - undefined  never passed the verification;\n     * - true  passed the verification and eligible for the boosted APY;\n     * - false  passed the verification and not eligible for the boosted APY;\n     */\n    isVerified?: boolean;\n  };\n  liquid?: {\n    unstakeRequestAmount?: string;\n  };\n}\n\nexport type ApiStakingHistory = {\n  timestamp: number;\n  profit: string;\n}[];\n\nexport interface ApiDappPermissions {\n  isAddressRequired?: boolean;\n  isPasswordRequired?: boolean;\n}\n\nexport type ApiDappRequest = {\n  url: string | undefined; // `undefined` is a special case for SSE connect request\n  isUrlEnsured?: boolean;\n  accountId?: string;\n  identifier?: string;\n  sseOptions?: ApiSseOptions;\n};\n\nexport interface ApiTransferToSign {\n  toAddress: string;\n  amount: bigint;\n  rawPayload?: string;\n  payload?: ApiParsedPayload;\n  stateInit?: string;\n}\n\nexport interface ApiDappTransfer extends ApiTransferToSign {\n  isScam?: boolean;\n  /** Whether the transfer should be treated with cautiousness, because its payload is unclear */\n  isDangerous: boolean;\n  normalizedAddress: string;\n  /** The transfer address to show in the UI */\n  displayedToAddress: string;\n  networkFee: bigint;\n}\n\nexport interface ApiSignedTransfer {\n  base64: string;\n  seqno: number;\n  /** Will be used to create a local activity in the global state after the transfer is sent */\n  localActivity: Omit<ApiLocalTransactionParams, 'externalMsgHashNorm' | 'txId'>;\n}\n\n/**\n * The `fee` field should contain the final (real) fee, because we want to show the real fee in local transactions\n */\nexport type ApiLocalTransactionParams = Omit<\n  ApiTransactionActivity, 'id' | 'timestamp' | 'isIncoming' | 'normalizedAddress' | 'kind' | 'shouldLoadDetails'\n> & {\n  normalizedAddress?: string;\n  isIncoming?: boolean;\n};\n\nexport type ApiBaseCurrency = 'USD' | 'EUR' | 'RUB' | 'CNY' | 'BTC' | 'TON';\n\nexport enum ApiLiquidUnstakeMode {\n  Default,\n  Instant,\n  BestRate,\n}\n\nexport type ApiLoyaltyType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\n\nexport type ApiBalanceBySlug = Record<string, bigint>;\n\nexport type ApiWalletInfo = {\n  /** The user-friendly address of this wallet (may differ from the requested address) */\n  address: string;\n  /** Undefined when the address is not initialized or not a wallet */\n  version?: ApiTonWalletVersion;\n  balance: bigint;\n  isInitialized: boolean;\n  seqno: number;\n  lastTxId?: string;\n  domain?: string;\n};\n\nexport type ApiWalletWithVersionInfo = ApiWalletInfo & Required<Pick<ApiWalletInfo, 'version'>>;\n\n// Country codes from ISO-3166-1 spec\nexport type ApiCountryCode = 'AF' | 'AX' | 'AL' | 'DZ' | 'AS' | 'AD' | 'AO' | 'AI' | 'AQ' | 'AG' | 'AR'\n  | 'AM' | 'AW' | 'AU' | 'AT' | 'AZ' | 'BS' | 'BH' | 'BD' | 'BB' | 'BY' | 'BE' | 'BZ' | 'BJ' | 'BM'\n  | 'BT' | 'BO' | 'BQ' | 'BA' | 'BW' | 'BV' | 'BR' | 'IO' | 'BN' | 'BG' | 'BF' | 'BI' | 'CV' | 'KH'\n  | 'CM' | 'CA' | 'KY' | 'CF' | 'TD' | 'CL' | 'CN' | 'CX' | 'CC' | 'CO' | 'KM' | 'CG' | 'CD' | 'CK'\n  | 'CR' | 'CI' | 'HR' | 'CU' | 'CW' | 'CY' | 'CZ' | 'DK' | 'DJ' | 'DM' | 'DO' | 'EC' | 'EG' | 'SV'\n  | 'GQ' | 'ER' | 'EE' | 'SZ' | 'ET' | 'FK' | 'FO' | 'FJ' | 'FI' | 'FR' | 'GF' | 'PF' | 'TF' | 'GA'\n  | 'GM' | 'GE' | 'DE' | 'GH' | 'GI' | 'GR' | 'GL' | 'GD' | 'GP' | 'GU' | 'GT' | 'GG' | 'GN' | 'GW'\n  | 'GY' | 'HT' | 'HM' | 'VA' | 'HN' | 'HK' | 'HU' | 'IS' | 'IN' | 'ID' | 'IR' | 'IQ' | 'IE' | 'IM'\n  | 'IL' | 'IT' | 'JM' | 'JP' | 'JE' | 'JO' | 'KZ' | 'KE' | 'KI' | 'KP' | 'KR' | 'KW' | 'KG' | 'LA'\n  | 'LV' | 'LB' | 'LS' | 'LR' | 'LY' | 'LI' | 'LT' | 'LU' | 'MO' | 'MG' | 'MW' | 'MY' | 'MV' | 'ML'\n  | 'MT' | 'MH' | 'MQ' | 'MR' | 'MU' | 'YT' | 'MX' | 'FM' | 'MD' | 'MC' | 'MN' | 'ME' | 'MS' | 'MA'\n  | 'MZ' | 'MM' | 'NA' | 'NR' | 'NP' | 'NL' | 'NC' | 'NZ' | 'NI' | 'NE' | 'NG' | 'NU' | 'NF' | 'MP'\n  | 'NO' | 'OM' | 'PK' | 'PW' | 'PS' | 'PA' | 'PG' | 'PY' | 'PE' | 'PH' | 'PN' | 'PL' | 'PT' | 'PR'\n  | 'QA' | 'MK' | 'RO' | 'RU' | 'RW' | 'RE' | 'BL' | 'SH' | 'KN' | 'LC' | 'MF' | 'PM' | 'VC' | 'WS'\n  | 'SM' | 'ST' | 'SA' | 'SN' | 'RS' | 'SC' | 'SL' | 'SG' | 'SX' | 'SK' | 'SI' | 'SB' | 'SO' | 'ZA'\n  | 'GS' | 'SS' | 'ES' | 'LK' | 'SD' | 'SR' | 'SJ' | 'SE' | 'CH' | 'SY' | 'TW' | 'TJ' | 'TZ' | 'TH'\n  | 'TL' | 'TG' | 'TK' | 'TO' | 'TT' | 'TN' | 'TR' | 'TM' | 'TC' | 'TV' | 'UG' | 'UA' | 'AE' | 'GB'\n  | 'US' | 'UM' | 'UY' | 'UZ' | 'VU' | 'VE' | 'VN' | 'VG' | 'VI' | 'WF' | 'EH' | 'YE' | 'ZM' | 'ZW';\n\n/** Each string value can be either an address or a domain name */\nexport type ApiImportAddressByChain = Partial<Record<ApiChain, string>>;\n\nexport type ApiNftMarketplace = 'fragment' | 'getgems';\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","/*! Capacitor: https://capacitorjs.com/ - MIT License */\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    const getPlatform = () => {\n        return capCustomPlatform !== null ? capCustomPlatform.name : getPlatformId(win);\n    };\n    const isNativePlatform = () => getPlatform() !== 'web';\n    const isPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const getPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find((h) => h.name === pluginName); };\n    const handleError = (err) => win.console.error(err);\n    const registeredPlugins = new Map();\n    const registerPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null && !jsImplementation && 'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find((m) => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then((impl) => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair \n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise((resolve) => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([...Object.keys(jsImplementations), ...(pluginHeader ? [platform] : [])]),\n        });\n        return proxy;\n    };\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = (filePath) => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor() {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach((listener) => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: (event) => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach((arg) => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach((cookie) => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0 ? `domain=${options.url}` : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie.replace(/^ +/, '').replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0 ? base64String.split(',')[1] : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map((k) => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach((str) => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') || options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') || typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, ExceptionCode, WebPlugin, WebView, buildRequestInit, registerPlugin };\n//# sourceMappingURL=index.js.map\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCache<T extends AnyFunction>(fn: T) {\n  return (...args: Parameters<T>): ReturnType<T> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = args.map(String).join('_');\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = fn(...args);\n\n    fnCache.set(cacheKey, newValue);\n\n    return newValue;\n  };\n}\n","import type { Scheduler } from './schedulers';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n}\n\ntype TickFunction = () => boolean | undefined;\n\nlet currentInstance: AnimationInstance | undefined;\n\nexport function animateSingle(tick: TickFunction, schedulerFn: Scheduler, instance?: AnimationInstance) {\n  if (!instance) {\n    if (currentInstance && !currentInstance.isCancelled) {\n      currentInstance.isCancelled = true;\n    }\n\n    instance = { isCancelled: false };\n    currentInstance = instance;\n  }\n\n  if (!instance.isCancelled && tick()) {\n    schedulerFn(() => {\n      animateSingle(tick, schedulerFn, instance);\n    });\n  }\n}\n\nexport function cancelSingleAnimation() {\n  const dumbScheduler = (cb: AnyFunction) => cb;\n  const dumbCb = () => undefined;\n\n  animateSingle(dumbCb, dumbScheduler);\n}\n\nexport function animate(tick: TickFunction, schedulerFn: Scheduler) {\n  schedulerFn(() => {\n    if (tick()) {\n      animate(tick, schedulerFn);\n    }\n  });\n}\n\nexport function animateInstantly(tick: TickFunction, schedulerFn: Scheduler) {\n  if (tick()) {\n    schedulerFn(() => {\n      animateInstantly(tick, schedulerFn);\n    });\n  }\n}\n\ntype TimingFn = (t: number) => number;\n\ntype AnimateNumberProps<T extends number | number[]> = {\n  to: T;\n  from: T;\n  duration: number;\n  onUpdate: (value: T) => void;\n  timing?: TimingFn;\n  onEnd?: (isCanceled?: boolean) => void;\n};\n\nexport const timingFunctions = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t ** 1.675,\n  easeOut: (t: number) => -1 * t ** 1.675,\n  easeInOut: (t: number) => 0.5 * (Math.sin((t - 0.5) * Math.PI) + 1),\n  easeInQuad: (t: number) => t * t,\n  easeOutQuad: (t: number) => t * (2 - t),\n  easeInOutQuad: (t: number) => (t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t),\n  easeInCubic: (t: number) => t ** 3,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => (t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1),\n  easeInQuart: (t: number) => t ** 4,\n  easeOutQuart: (t: number) => 1 - (--t) * t ** 3,\n  easeInOutQuart: (t: number) => (t < 0.5 ? 8 * t ** 4 : 1 - 8 * (--t) * t ** 3),\n  easeInQuint: (t: number) => t ** 5,\n  easeOutQuint: (t: number) => 1 + (--t) * t ** 4,\n  easeInOutQuint: (t: number) => (t < 0.5 ? 16 * t ** 5 : 1 + 16 * (--t) * t ** 4),\n};\n\nexport function animateNumber<T extends number | number[]>({\n  timing = timingFunctions.linear,\n  onUpdate,\n  duration,\n  onEnd,\n  from,\n  to,\n}: AnimateNumberProps<T>) {\n  const t0 = Date.now();\n\n  let isCanceled = false;\n\n  animateInstantly(() => {\n    if (isCanceled) return false;\n\n    const t1 = Date.now();\n    const t = Math.min((t1 - t0) / duration, 1);\n\n    const progress = timing(t);\n    if (typeof from === 'number' && typeof to === 'number') {\n      onUpdate((from + ((to - from) * progress)) as T);\n    } else if (Array.isArray(from) && Array.isArray(to)) {\n      const result = from.map((f, i) => f + ((to[i] - f) * progress));\n      onUpdate(result as T);\n    }\n\n    if (t === 1) {\n      onEnd?.();\n    }\n\n    return t < 1;\n  }, requestMeasure);\n\n  return () => {\n    isCanceled = true;\n    onEnd?.(true);\n  };\n}\n\nexport function applyStyles(element: HTMLElement, css: Record<string, string>) {\n  Object.assign(element.style, css);\n}\n","export var ImpactStyle;\n(function (ImpactStyle) {\n    /**\n     * A collision between large, heavy user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Heavy\"] = \"HEAVY\";\n    /**\n     * A collision between moderately sized user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Medium\"] = \"MEDIUM\";\n    /**\n     * A collision between small, light user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Light\"] = \"LIGHT\";\n})(ImpactStyle || (ImpactStyle = {}));\nexport var NotificationType;\n(function (NotificationType) {\n    /**\n     * A notification feedback type indicating that a task has completed successfully\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Success\"] = \"SUCCESS\";\n    /**\n     * A notification feedback type indicating that a task has produced a warning\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Warning\"] = \"WARNING\";\n    /**\n     * A notification feedback type indicating that a task has failed\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Error\"] = \"ERROR\";\n})(NotificationType || (NotificationType = {}));\n//# sourceMappingURL=definitions.js.map","import type { OriginMessageData, WorkerMessageData } from './PostMessageConnector';\n\nimport { BIGINT_PREFIX } from './bigint';\n\nexport const UNDEFINED_PREFIX = 'undefined:';\n\nfunction extensionMessageReplacer(this: any, key: string, value: any) {\n  if (value === undefined) {\n    return `${UNDEFINED_PREFIX}marker`;\n  }\n\n  // Bigint is replaced by patching `toJSON` method\n\n  return value;\n}\n\nfunction extensionMessageReviver(this: any, key: string, value: any) {\n  // Handle bigint values\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(BIGINT_PREFIX.length));\n  }\n\n  // Handle undefined values\n  if (typeof value === 'string' && value.startsWith(UNDEFINED_PREFIX)) {\n    return undefined;\n  }\n\n  return value;\n}\n\nexport function encodeExtensionMessage(data: OriginMessageData | WorkerMessageData) {\n  return JSON.stringify(data, extensionMessageReplacer);\n}\n\nexport function decodeExtensionMessage<T extends OriginMessageData | WorkerMessageData>(data: string | T): T {\n  if (typeof data === 'string') {\n    return JSON.parse(data, extensionMessageReviver);\n  }\n  return data;\n}\n","import type { ApiTonWalletVersion } from './api/chains/ton/types';\nimport type {\n  ApiBaseCurrency,\n  ApiLiquidStakingState,\n  ApiNftMarketplace,\n  ApiNominatorsStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiTokenWithPrice,\n} from './api/types';\nimport type { AutolockValueType, LangCode, LangItem, TokenPeriod } from './global/types';\n\nexport const APP_ENV = process.env.APP_ENV;\n\nexport const IS_CORE_WALLET = process.env.IS_CORE_WALLET === '1';\nexport const APP_NAME = process.env.APP_NAME || (IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet');\nexport const APP_VERSION = process.env.APP_VERSION!;\nexport const APP_COMMIT_HASH = process.env.APP_COMMIT_HASH!;\nexport const APP_ENV_MARKER = APP_ENV === 'staging' ? 'Beta' : APP_ENV === 'development' ? 'Dev' : undefined;\nexport const EXTENSION_NAME = IS_CORE_WALLET ? 'TON Wallet' : 'MyTonWallet  My TON Wallet';\nexport const EXTENSION_DESCRIPTION = IS_CORE_WALLET\n  ? 'Set up your own TON Wallet on The Open Network'\n  // eslint-disable-next-line @stylistic/max-len\n  : 'The most feature-rich TON+TRON wallet: multi-accounts, multi-send, Telegram Gifts and other collectibles, TON DNS+Proxy, and more.';\n\nexport const DEBUG = APP_ENV !== 'production' && APP_ENV !== 'perf' && APP_ENV !== 'test';\nexport const DEBUG_MORE = false;\nexport const DEBUG_API = false;\nexport const DEBUG_VIEW_ACCOUNTS = false;\n\nexport const IS_PRODUCTION = APP_ENV === 'production';\nexport const IS_TEST = APP_ENV === 'test';\nexport const IS_PERF = APP_ENV === 'perf';\nexport const IS_EXTENSION = process.env.IS_EXTENSION === '1';\nexport const IS_FIREFOX_EXTENSION = process.env.IS_FIREFOX_EXTENSION === '1';\nexport const IS_OPERA_EXTENSION = process.env.IS_OPERA_EXTENSION === '1';\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON === '1';\nexport const IS_CAPACITOR = process.env.IS_CAPACITOR === '1';\nexport const IS_ANDROID_DIRECT = process.env.IS_ANDROID_DIRECT === '1';\nexport const IS_AIR_APP = process.env.IS_AIR_APP === '1';\nexport const IS_TELEGRAM_APP = process.env.IS_TELEGRAM_APP === '1';\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\nexport const PRODUCTION_URL = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\nexport const BETA_URL = IS_CORE_WALLET ? 'https://beta.wallet.ton.org' : 'https://beta.mytonwallet.app';\nexport const APP_INSTALL_URL = 'https://get.mytonwallet.io/';\nexport const APP_REPO_URL = 'https://github.com/mytonwallet-org/mytonwallet';\nexport const BASE_URL = process.env.BASE_URL;\n\nexport const BOT_USERNAME = process.env.BOT_USERNAME || 'MyTonWalletBot';\n\nexport const SWAP_FEE_ADDRESS = process.env.SWAP_FEE_ADDRESS || 'UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp';\nexport const DIESEL_ADDRESS = process.env.DIESEL_ADDRESS || 'UQC9lQOaEHC6YASiJJ2NrKEOlITMMQmc8j0_iZEHy-4sl3tG';\n\nexport const STRICTERDOM_ENABLED = DEBUG && !IS_PACKAGED_ELECTRON;\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const PIN_LENGTH = 4;\nexport const NATIVE_BIOMETRICS_USERNAME = IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet';\nexport const NATIVE_BIOMETRICS_SERVER = IS_CORE_WALLET ? 'https://wallet.ton.org' : 'https://mytonwallet.app';\n\nexport const IS_BIP39_MNEMONIC_ENABLED = !IS_CORE_WALLET;\nexport const MNEMONIC_COUNT = 24;\nexport const MNEMONIC_COUNTS = IS_BIP39_MNEMONIC_ENABLED ? [12, 24] : [24];\n\nexport const PRIVATE_KEY_HEX_LENGTH = 64;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_TINY_ICON_PX = 16;\nexport const ANIMATED_STICKER_ICON_PX = 30;\nexport const ANIMATED_STICKER_TINY_SIZE_PX = 70;\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\nexport const ANIMATED_STICKER_HUGE_SIZE_PX = 192;\n\nexport const DEFAULT_PORTRAIT_WINDOW_SIZE = { width: 368, height: 770 };\nexport const DEFAULT_LANDSCAPE_WINDOW_SIZE = { width: 980, height: 788 };\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 0;\nexport const TRANSACTION_ADDRESS_SHIFT = 4;\n\nexport const WHOLE_PART_DELIMITER = ''; // https://www.compart.com/en/unicode/U+202F\n\nexport const DEFAULT_SLIPPAGE_VALUE = 5;\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = IS_CORE_WALLET ? 'tonwallet-global-state' : 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONCENTER_MAINNET_URL = process.env.TONCENTER_MAINNET_URL || 'https://toncenter.mytonwallet.org';\nexport const TONCENTER_MAINNET_KEY = process.env.TONCENTER_MAINNET_KEY;\nexport const ELECTRON_TONCENTER_MAINNET_KEY = process.env.ELECTRON_TONCENTER_MAINNET_KEY;\nexport const TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapiio.mytonwallet.org';\n\nexport const TONCENTER_TESTNET_URL = process.env.TONCENTER_TESTNET_URL || 'https://toncenter-testnet.mytonwallet.org';\nexport const TONCENTER_TESTNET_KEY = process.env.TONCENTER_TESTNET_KEY;\nexport const ELECTRON_TONCENTER_TESTNET_KEY = process.env.ELECTRON_TONCENTER_TESTNET_KEY;\nexport const TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://tonapiio-testnet.mytonwallet.org';\n\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://api.mytonwallet.org';\nexport const PROXY_API_BASE_URL = process.env.PROXY_API_BASE_URL || 'https://api.mytonwallet.org/proxy';\nexport const IPFS_GATEWAY_BASE_URL = 'https://ipfs.io/ipfs/';\nexport const SSE_BRIDGE_URL = 'https://tonconnectbridge.mytonwallet.org/bridge/';\n\nexport const TRON_MAINNET_API_URL = process.env.TRON_MAINNET_API_URL || 'https://tronapi.mytonwallet.org';\nexport const TRON_TESTNET_API_URL = process.env.TRON_TESTNET_API_URL || 'https://api.shasta.trongrid.io';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT = 3;\n\nexport const SUPPORT_USERNAME = 'mysupport';\nexport const MTW_TIPS_CHANNEL_NAME: Partial<Record<LangCode, string>> = {\n  en: 'MyTonWalletTips',\n  ru: 'MyTonWalletTipsRu',\n};\nexport const NFT_MARKETPLACE_TITLES: Record<ApiNftMarketplace, string> = {\n  getgems: 'Getgems',\n  fragment: 'Fragment',\n};\nexport const MTW_STATIC_BASE_URL = 'https://static.mytonwallet.org';\nexport const MTW_CARDS_BASE_URL = `${MTW_STATIC_BASE_URL}/cards/`;\nexport const MTW_CARDS_MINT_BASE_URL = `${MTW_STATIC_BASE_URL}/mint-cards/`;\nexport const MYTONWALLET_PROMO_URL = 'https://mytonwallet.io/';\nexport const MYTONWALLET_MULTISEND_DAPP_URL = 'https://multisend.mytonwallet.io/';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const NFT_MARKETPLACE_URL = 'https://getgems.io/';\nexport const NFT_MARKETPLACE_TITLE = NFT_MARKETPLACE_TITLES.getgems;\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\nexport const HELPCENTER_URL = { en: 'https://help.mytonwallet.io/', ru: 'https://help.mytonwallet.io/ru' };\nexport const EMPTY_HASH_VALUE = 'NOHASH';\n\nexport const IFRAME_WHITELIST = [\n  'http://localhost:*', 'https://tonscan.org',\n];\nexport const SUBPROJECT_URL_MASK = 'https://*.mytonwallet.io';\n\nexport const CHANGELLY_SUPPORT_EMAIL = 'support@changelly.com';\nexport const CHANGELLY_LIVE_CHAT_URL = 'https://changelly.com/';\nexport const CHANGELLY_SECURITY_EMAIL = 'security@changelly.com';\nexport const CHANGELLY_TERMS_OF_USE = 'https://changelly.com/terms-of-use';\nexport const CHANGELLY_PRIVACY_POLICY = 'https://changelly.com/privacy-policy';\nexport const CHANGELLY_AML_KYC = 'https://changelly.com/aml-kyc';\nexport const CHANGELLY_WAITING_DEADLINE = 3 * 60 * 60 * 1000; // 3 hours\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_COST = 0.01;\n\nexport const IMAGE_CACHE_NAME = 'mtw-image';\nexport const LANG_CACHE_NAME = 'mtw-lang-222';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Espaol',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'tr',\n  name: 'Turkish',\n  nativeName: 'Trke',\n  rtl: false,\n}, {\n  langCode: 'de',\n  name: 'German',\n  nativeName: 'Deutsch',\n  rtl: false,\n}, {\n  langCode: 'th',\n  name: 'Thai',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'uk',\n  name: 'Ukrainian',\n  nativeName: '',\n  rtl: false,\n}, {\n  langCode: 'pl',\n  name: 'Polish',\n  nativeName: 'Polski',\n  rtl: false,\n}];\n\nexport const IS_STAKING_DISABLED = IS_CORE_WALLET;\nexport const VALIDATION_PERIOD_MS = 65_536_000; // 18.2 h.\nexport const ONE_TON = 1_000_000_000n;\nexport const DEFAULT_FEE = 15_000_000n; // 0.015 TON\nexport const UNSTAKE_TON_GRACE_PERIOD = 20 * 60 * 1000; // 20 m.\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\nexport const LIQUID_POOL = process.env.LIQUID_POOL || 'EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o';\nexport const LIQUID_JETTON = process.env.LIQUID_JETTON || 'EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE';\nexport const STAKING_MIN_AMOUNT = ONE_TON;\nexport const NOMINATORS_STAKING_MIN_AMOUNT = 10_000n * ONE_TON;\nexport const MIN_ACTIVE_STAKING_REWARDS = 100_000_000n; // 0.1 MY\n\nexport const TONCONNECT_PROTOCOL_VERSION = 2;\nexport const TONCONNECT_WALLET_JSBRIDGE_KEY = IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet';\nexport const EMBEDDED_DAPP_BRIDGE_CHANNEL = 'embedded-dapp-bridge';\n\nexport const NFT_FRAGMENT_COLLECTIONS = [\n  '0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2', // Anonymous Telegram Numbers\n  '0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2', // Telegram Usernames\n];\nexport const NFT_FRAGMENT_GIFT_IMAGE_TO_URL_REGEX = /^https?:\\/\\/nft\\.(fragment\\.com\\/gift\\/[\\w-]+-\\d+)\\.\\w+$/i;\nexport const TELEGRAM_GIFTS_SUPER_COLLECTION = 'super:telegram-gifts';\n\nexport const MTW_CARDS_WEBSITE = 'https://cards.mytonwallet.io';\nexport const MTW_CARDS_COLLECTION = 'EQCQE2L9hfwx1V8sgmF9keraHx1rNK9VmgR1ctVvINBGykyM';\nexport const TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\nexport const TON_DNS_RENEWAL_WARNING_DAYS = 14;\nexport const TON_DNS_RENEWAL_NFT_WARNING_DAYS = 30;\n\nexport const TONCOIN = {\n  name: 'Toncoin',\n  symbol: 'TON',\n  slug: 'toncoin',\n  decimals: 9,\n  chain: 'ton',\n  cmcSlug: 'toncoin',\n} as const;\n\nexport const TRX = {\n  name: 'TRON',\n  symbol: 'TRX',\n  slug: 'trx',\n  decimals: 6,\n  chain: 'tron',\n  cmcSlug: 'tron',\n} as const;\n\nexport const MYCOIN = {\n  name: 'MyTonWallet Coin',\n  symbol: 'MY',\n  slug: 'ton-eqcfvnlrbn',\n  decimals: 9,\n  chain: 'ton',\n  minterAddress: 'EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w',\n} as const;\n\nexport const MYCOIN_TESTNET = {\n  ...MYCOIN,\n  slug: 'ton-kqawlxpebw',\n  minterAddress: 'kQAWlxpEbwhCDFX9gp824ee2xVBhAh5VRSGWfbNFDddAbQoQ',\n} as const;\n\nexport const CHAIN_CONFIG = {\n  ton: {\n    isMemoSupported: true,\n    isDnsSupported: true,\n    addressRegex: /^([-\\w_]{48}|0:[\\da-h]{64})$/i,\n    addressPrefixRegex: /^([-\\w_]{1,48}|0:[\\da-h]{0,64})$/i,\n    nativeToken: TONCOIN,\n  },\n  tron: {\n    isMemoSupported: false,\n    isDnsSupported: false,\n    addressRegex: /^T[1-9A-HJ-NP-Za-km-z]{33}$/,\n    addressPrefixRegex: /^T[1-9A-HJ-NP-Za-km-z]{0,33}$/,\n    nativeToken: TRX,\n    mainnet: {\n      apiUrl: TRON_MAINNET_API_URL,\n      usdtAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    },\n    testnet: {\n      apiUrl: TRON_TESTNET_API_URL,\n      usdtAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    },\n  },\n} as const;\n\nexport const TRC20_USDT_MAINNET_SLUG = 'tron-tr7nhqjekq';\nexport const TRC20_USDT_TESTNET_SLUG = 'tron-tg3xxyexbk';\nexport const TON_USDT_SLUG = 'ton-eqcxe6mutq';\nexport const STAKED_TON_SLUG = 'ton-eqcqc6ehrj';\nexport const STAKED_MYCOIN_SLUG = 'ton-eqcbzvsfwq';\nexport const TRX_SWAP_COUNT_FEE_ADDRESS = 'TW2LXSebZ7Br1zHaiA2W1zRojDkDwjGmpw';\nexport const MYCOIN_STAKING_POOL = 'EQC3roTiRRsoLzfYVK7yVVoIZjTEqAjQU3ju7aQ7HWTVL5o5';\n\nexport const ETHENA_STAKING_VAULT = 'EQChGuD1u0e7KUWHH5FaYh_ygcLXhsdG2nSHPXHW8qqnpZXW';\nexport const ETHENA_STAKING_MIN_AMOUNT = 1_000_000; // 1 USDe\n// eslint-disable-next-line @stylistic/max-len\nexport const ETHENA_ELIGIBILITY_CHECK_URL = 'https://t.me/id_app/start?startapp=cQeewNnc3pVphUcwY63WruKMQDpgePd1E7eMVoqphMZAdGoU9jwS4qRqrM1kSeaqrAiiDiC3EYAJPwZDGWqxZpw5vtGxmHma59XEt';\n\n// In cross-chain swaps, only a few TON/TRON tokens are available.\n// Its not optimal to request swap history for all the others.\nexport const SWAP_CROSSCHAIN_SLUGS = new Set([\n  TONCOIN.slug,\n  TON_USDT_SLUG,\n  TRX.slug,\n  TRC20_USDT_MAINNET_SLUG,\n]);\n\nexport const STON_PTON_ADDRESS = 'EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez';\nexport const STON_PTON_SLUG = 'ton-eqcm3b12qk';\n\nexport const DNS_IMAGE_GEN_URL = 'https://dns-image.mytonwallet.org/img?d=';\n\nconst TRC20_USDT = {\n  name: 'Tether USD',\n  symbol: 'USDT',\n  decimals: 6,\n  chain: 'tron',\n} as const;\n\nconst TON_USDT = {\n  name: 'Tether USD',\n  symbol: 'USD',\n  chain: 'ton',\n  slug: TON_USDT_SLUG,\n  decimals: 6,\n  tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n} as const;\n\nexport const TON_USDE = {\n  name: 'Ethena USDe',\n  symbol: 'USDe',\n  chain: 'ton',\n  tokenAddress: 'EQAIb6KmdfdDR7CN1GBqVJuP25iCnLKCvBlJ07Evuu2dzP5f',\n  slug: 'ton-eqaib6kmdf',\n  decimals: 6,\n  // eslint-disable-next-line @stylistic/max-len\n  image: 'https://imgproxy.toncenter.com/binMwUmcnFtjvgjp4wSEbsECXwfXUwbPkhVvsvpubNw/pr:small/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvVVNEZS5wbmc',\n} as const;\n\nexport const TON_TSUSDE = {\n  name: 'Ethena tsUSDe',\n  symbol: 'tsUSDe',\n  chain: 'ton',\n  tokenAddress: 'EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr',\n  slug: 'ton-eqdq5uuyph',\n  decimals: 6,\n  // eslint-disable-next-line @stylistic/max-len\n  image: 'https://cache.tonapi.io/imgproxy/vGZJ7erwsWPo7DpVG_V7ygNn7VGs0szZXcNLHB_l0ms/rs:fill:200:200:1/g:no/aHR0cHM6Ly9tZXRhZGF0YS5sYXllcnplcm8tYXBpLmNvbS9hc3NldHMvdHNVU0RlLnBuZw.webp',\n} as const;\n\nexport const ALL_STAKING_POOLS = [\n  LIQUID_POOL,\n  MYCOIN_STAKING_POOL,\n  ETHENA_STAKING_VAULT,\n  TON_TSUSDE.tokenAddress,\n];\n\nexport const DEFAULT_ENABLED_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug, TRC20_USDT_TESTNET_SLUG, TRC20_USDT_MAINNET_SLUG,\n] as string[];\n\n// Toncoin, USDT TON, TRX, USDT TRC20\nexport const DEFAULT_ENABLED_TOKEN_COUNT = 4;\n\nexport const PRIORITY_TOKEN_SLUGS = [\n  TONCOIN.slug, TON_USDT_SLUG, TRX.slug,\n] as string[];\n\nconst COMMON_TOKEN = {\n  isFromBackend: true,\n  price: 0,\n  priceUsd: 0,\n  percentChange24h: 0,\n};\n\nexport const TOKEN_INFO: Record<string, ApiTokenWithPrice> = {\n  toncoin: {\n    ...TONCOIN,\n    isFromBackend: true,\n    price: 3.1,\n    priceUsd: 3.1,\n    percentChange24h: 0,\n  },\n  trx: {\n    ...TRX,\n    ...COMMON_TOKEN,\n  },\n  [TRC20_USDT_MAINNET_SLUG]: { // mainnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_MAINNET_SLUG,\n    tokenAddress: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t',\n    ...COMMON_TOKEN,\n  },\n  [TRC20_USDT_TESTNET_SLUG]: { // testnet\n    ...TRC20_USDT,\n    slug: TRC20_USDT_TESTNET_SLUG,\n    tokenAddress: 'TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs',\n    ...COMMON_TOKEN,\n  },\n  [TON_USDT_SLUG]: {\n    ...TON_USDT,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    slug: TON_USDT_SLUG,\n    ...COMMON_TOKEN,\n  },\n  [MYCOIN.slug]: {\n    ...MYCOIN,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/Qy038wCBKISofJ0hYMlj6COWma330cx3Ju1ZSPM2LRU/rs:fill:200:200:1/g:no/aHR0cHM6Ly9teXRvbndhbGxldC5pby9sb2dvLTI1Ni1ibHVlLnBuZw.webp',\n    ...COMMON_TOKEN,\n  },\n  [TON_USDE.slug]: {\n    ...TON_USDE,\n    ...COMMON_TOKEN,\n  },\n  [TON_TSUSDE.slug]: {\n    ...TON_TSUSDE,\n    ...COMMON_TOKEN,\n  },\n};\n\nexport const TOKEN_WITH_LABEL: Record<string, string> = {\n  [TRC20_USDT_MAINNET_SLUG]: 'TRC-20',\n  [TRC20_USDT_TESTNET_SLUG]: 'TRC-20',\n  [TON_USDT_SLUG]: 'TON',\n};\n\nexport const INIT_SWAP_ASSETS: Record<string, ApiSwapAsset> = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TONCOIN.symbol,\n    chain: TONCOIN.chain,\n    slug: TONCOIN.slug,\n    decimals: TONCOIN.decimals,\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n  [TON_USDT_SLUG]: {\n    name: 'Tether USD',\n    symbol: 'USD',\n    chain: 'ton',\n    slug: TON_USDT_SLUG,\n    decimals: 9,\n    // eslint-disable-next-line @stylistic/max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    tokenAddress: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n};\n\nexport const DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_FIRST_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_SWAP_SECOND_TOKEN_SLUG = TON_USDT_SLUG;\nexport const DEFAULT_TRANSFER_TOKEN_SLUG = TONCOIN.slug;\nexport const DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG = TRC20_USDT_MAINNET_SLUG;\nexport const SWAP_DEX_LABELS: Record<ApiSwapDexLabel, string> = {\n  dedust: 'DeDust',\n  ston: 'STON.fi',\n};\n\nexport const MULTITAB_DATA_CHANNEL_NAME = IS_CORE_WALLET ? 'tw-multitab' : 'mtw-multitab';\nexport const ACTIVE_TAB_STORAGE_KEY = IS_CORE_WALLET ? 'tw-active-tab' : 'mtw-active-tab';\n\nexport const INDEXED_DB_NAME = 'keyval-store';\nexport const INDEXED_DB_STORE_NAME = 'keyval';\n\nexport const WINDOW_PROVIDER_CHANNEL = 'windowProvider';\nexport const WINDOW_PROVIDER_PORT = `${IS_CORE_WALLET ? 'TonWallet' : 'MyTonWallet'}_popup_reversed`;\n\nexport const SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY = IS_CORE_WALLET;\nexport const PORTRAIT_MIN_ASSETS_TAB_VIEW = 4;\nexport const LANDSCAPE_MIN_ASSETS_TAB_VIEW = 6;\n\nexport const DEFAULT_PRICE_CURRENCY = 'USD';\nexport const CURRENCIES: Record<ApiBaseCurrency, { name: string; decimals: number; shortSymbol?: string }> = {\n  USD: { name: 'US Dollar', decimals: 2, shortSymbol: '$' },\n  EUR: { name: 'Euro', decimals: 2, shortSymbol: '' },\n  RUB: { name: 'Ruble', decimals: 2, shortSymbol: '' },\n  CNY: { name: 'Yuan', decimals: 2, shortSymbol: '' },\n  BTC: { name: 'Bitcoin', decimals: 9 },\n  [TONCOIN.symbol]: { name: 'Toncoin', decimals: 9 },\n};\n\nexport const BURN_ADDRESS = 'UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ';\n\nexport const DEFAULT_WALLET_VERSION: ApiTonWalletVersion = 'W5';\nexport const POPULAR_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R1', 'v3R2', 'v4R2', 'W5'];\nexport const LEDGER_WALLET_VERSIONS: ApiTonWalletVersion[] = ['v3R2', 'v4R2'];\n\nexport const DEFAULT_TIMEOUT = 10000;\nexport const DEFAULT_RETRIES = 3;\nexport const DEFAULT_ERROR_PAUSE = 500;\n\nexport const HISTORY_PERIODS: TokenPeriod[] = ['1D', '7D', '1M', '3M', '1Y', 'ALL'];\n\nexport const BROWSER_HISTORY_LIMIT = 10;\n\nexport const NFT_BATCH_SIZE = 4;\nexport const NOTCOIN_VOUCHERS_ADDRESS = 'EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW';\nexport const BURN_CHUNK_DURATION_APPROX_SEC = 30;\nexport const NOTCOIN_FORWARD_TON_AMOUNT = 30000000n; // 0.03 TON\nexport const NOTCOIN_EXCHANGERS = [\n  'EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2',\n  'EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ',\n  'EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s',\n  'EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm',\n  'EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd',\n  'EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD',\n  'EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p',\n  'EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO',\n  'EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe',\n  'EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-',\n  'EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu',\n  'EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH',\n  'EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy',\n  'EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT',\n  'EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu',\n  'EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw',\n] as const;\n\nexport const CLAIM_ADDRESS = 'EQB3zOTvPi1PmwdcTpqSfFKZnhi1GNKEVJM-LdoAirdLtash';\nexport const CLAIM_AMOUNT = 30000000n; // 0.03 TON\nexport const CLAIM_COMMENT = 'claim';\n\nexport const MINT_CARD_ADDRESS = 'EQBpst3ZWJ9Dqq5gE2YH-yPsFK_BqMOmgi7Z_qK6v7WbrPWv';\nexport const MINT_CARD_COMMENT = 'Mint card';\nexport const MINT_CARD_REFUND_COMMENT = 'Refund';\n\n// eslint-disable-next-line @stylistic/max-len\nexport const RE_LINK_TEMPLATE = /((ftp|https?):\\/\\/)?(?<host>(www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g;\n// eslint-disable-next-line @stylistic/max-len\nexport const RE_TG_BOT_MENTION = /telegram[:\\s-]*((@[a-z0-9_]+)|(https:\\/\\/)?(t\\.me|telegram\\.me|telegram\\.dog)\\/[a-z0-9_]+)/mig;\n\nexport const STARS_SYMBOL = '';\n\nexport const GIVEAWAY_CHECKIN_URL = process.env.GIVEAWAY_CHECKIN_URL || 'https://giveaway.mytonwallet.io';\n\nexport const AUTOLOCK_OPTIONS_LIST = [\n  {\n    value: 'never',\n    name: 'Disabled',\n    selectedName: 'Disabled',\n    period: 0,\n  },\n  {\n    value: '1',\n    name: '30 seconds',\n    selectedName: 'If away for 30 sec',\n    period: 30_000,\n  },\n  {\n    value: '2',\n    name: '3 minutes',\n    selectedName: 'If away for 3 min',\n    period: 60_000 * 3,\n  },\n  {\n    value: '3',\n    name: '10 minutes',\n    selectedName: 'If away for 10 min',\n    period: 60_000 * 10,\n  },\n] as const;\n\nexport const AUTO_CONFIRM_DURATION_MINUTES = 5;\n\nexport const PRICELESS_TOKEN_HASHES = new Set([\n  '173e31eee054cb0c76f77edc7956bed766bf48a1f63bd062d87040dcd3df700f', // FIVA SY tsTON EQAxGi9Al7hamLAORroxGkvfap6knGyzI50ThkP3CLPLTtOZ\n  '5226dd4e6db9af26b24d5ca822bc4053b7e08152f923932abf25030c7e38bb42', // FIVA PT tsTON EQAkxIRGXgs2vD2zjt334MBjD3mXg2GsyEZHfzuYX_trQkFL\n  'fea2c08a704e5192b7f37434927170440d445b87aab865c3ea2a68abe7168204', // FIVA YT tsTON EQAcy60qg22RCq87A_qgYK8hooEgjCZ44yxhdnKYdlWIfKXL\n  'e691cf9081a8aeb22ed4d94829f6626c9d822752e035800b5543c43f83d134b5', // FIVA LP tsTON EQD3BjCjxuf8mu5kvxajVbe-Ila1ScZZlAi03oS7lMmAJjM3\n  '301ce25925830d713b326824e552e962925c4ff45b1e3ea21fc363a459a49b43', // FIVA SY eUSDT EQDi9blCcyT-k8iMpFMYY0t7mHVyiCB50ZsRgyUECJDuGvIl\n  '02250f83fbb8624d859c2c045ac70ee2b3b959688c3d843aec773be9b36dbfc3', // FIVA PT eUSDT EQBzVrYkYPHx8D_HPfQacm1xONa4XSRxl826vHkx_laP2HOe\n  'dba3adb2c917db80fd71a6a68c1fc9e12976491a8309d5910f9722efc084ce4d', // FIVA YT eUSDT EQCwUSc2qrY5rn9BfFBG9ARAHePTUvITDl97UD0zOreWzLru\n  '7da9223b90984d6a144e71611a8d7c65a6298cad734faed79438dc0f7a8e53d1', // FIVA LP eUSDT EQBNlIZxIbQGQ78cXgG3VRcyl8A0kLn_6BM9kabiHHhWC4qY\n  'ddf80de336d580ab3c11d194f189c362e2ca1225cae224ea921deeaba7eca818', // tsUSDe EQDQ5UUyPHrLcQJlPAczd_fjxn8SLrlNQwolBznxCdSlfQwr\n]);\n\nexport const STAKED_TOKEN_SLUGS = new Set([\n  STAKED_TON_SLUG,\n  STAKED_MYCOIN_SLUG,\n  TON_TSUSDE.slug,\n]);\n\nexport const DEFAULT_OUR_SWAP_FEE = 0.875;\n\nexport const DEFAULT_STAKING_STATE: ApiLiquidStakingState = {\n  type: 'liquid',\n  id: 'liquid',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: LIQUID_POOL,\n  tokenBalance: 0n,\n  unstakeRequestAmount: 0n,\n  instantAvailable: 0n,\n  start: 0,\n  end: 0,\n};\n\nexport const DEFAULT_NOMINATORS_STAKING_STATE: ApiNominatorsStakingState = {\n  type: 'nominators',\n  id: 'nominators',\n  tokenSlug: TONCOIN.slug,\n  annualYield: 3.9,\n  yieldType: 'APY',\n  balance: 0n,\n  pool: 'Ef8dgIOIRyCLU0NEvF8TD6Me3wrbrkS1z3Gpjk3ppd8m8-s_',\n  start: 0,\n  end: 0,\n  pendingDepositAmount: 0n,\n};\n\nexport const SWAP_API_VERSION = 2;\nexport const TONCENTER_ACTIONS_VERSION = 'v1';\n\nexport const JVAULT_URL = 'https://jvault.xyz';\n\nexport const HELP_CENTER_SEED_SCAM_URL = {\n  en: 'https://help.mytonwallet.io/intro/scams/leaked-seed-phrases',\n  ru: 'https://help.mytonwallet.io/ru/baza-znanii/moshennichestvo-i-skamy/slitye-sid-frazy',\n};\n\nexport const HELP_CENTER_ETHENA_URL = {\n  en: 'https://help.mytonwallet.io/intro/staking/what-is-usde-how-does-usde-staking-work',\n  ru: 'https://help.mytonwallet.io/ru/baza-znanii/steiking/chto-takoe-usde-kak-rabotaet-steiking-usde',\n};\n\nconst ALL_TON_DNS_ZONES = [\n  {\n    suffixes: ['ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-\\da-z]{4,126}$/i,\n    resolver: 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz',\n    collectionName: 'TON DNS Domains',\n  },\n  {\n    suffixes: ['t.me'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[-_\\da-z]{4,32}$/i,\n    resolver: 'EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi',\n    isTelemint: true,\n    collectionName: 'Telegram Usernames',\n  },\n  {\n    suffixes: ['vip', 'ton.vip', 'vip.ton'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}?[\\da-z]{1,24}$/i,\n    resolver: 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS',\n    collectionName: 'VIP DNS Domains',\n    isUnofficial: true,\n  },\n  {\n    suffixes: ['gram'],\n    baseFormat: /^([-\\da-z]+\\.){0,2}[\\da-z]{1,127}$/i,\n    resolver: 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ',\n    collectionName: 'GRAM DNS Domains',\n    isUnofficial: true,\n  },\n];\n\nexport const TON_DNS_ZONES = IS_CORE_WALLET\n  ? ALL_TON_DNS_ZONES.filter(({ isUnofficial }) => !isUnofficial)\n  : ALL_TON_DNS_ZONES;\n\nexport const DEFAULT_AUTOLOCK_OPTION: AutolockValueType = '3';\nexport const WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION = 2;\n","export function getPlatform() {\n  const { userAgent, platform } = window.navigator;\n\n  if (/Android/.test(userAgent)) return 'Android';\n\n  if (/Linux/.test(platform)) return 'Linux';\n\n  const iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (\n    iosPlatforms.indexOf(platform) !== -1\n    // For new IPads with M1 chip and IPadOS platform returns \"MacIntel\"\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2))\n  ) {\n    return 'iOS';\n  }\n\n  const macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  if (macosPlatforms.indexOf(platform) !== -1) return 'macOS';\n\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  if (windowsPlatforms.indexOf(platform) !== -1) return 'Windows';\n\n  return undefined;\n}\n","export var Directory;\n(function (Directory) {\n    /**\n     * The Documents directory.\n     * On iOS it's the app's documents directory.\n     * Use this directory to store user-generated content.\n     * On Android it's the Public Documents folder, so it's accessible from other apps.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * On Android 11 or newer the app can only access the files/folders the app created.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Documents\"] = \"DOCUMENTS\";\n    /**\n     * The Data directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Data\"] = \"DATA\";\n    /**\n     * The Library directory.\n     * On iOS it will use the Library directory.\n     * On Android it's the directory holding application files.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.1.0\n     */\n    Directory[\"Library\"] = \"LIBRARY\";\n    /**\n     * The Cache directory.\n     * Can be deleted in cases of low memory, so use this directory to write app-specific files.\n     * that your app can re-create easily.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"Cache\"] = \"CACHE\";\n    /**\n     * The external directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the directory on the primary shared/external\n     * storage device where the application can place persistent files it owns.\n     * These files are internal to the applications, and not typically visible\n     * to the user as media.\n     * Files will be deleted when the application is uninstalled.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"External\"] = \"EXTERNAL\";\n    /**\n     * The external storage directory.\n     * On iOS it will use the Documents directory.\n     * On Android it's the primary shared/external storage directory.\n     * It's not accesible on Android 10 unless the app enables legacy External Storage\n     * by adding `android:requestLegacyExternalStorage=\"true\"` in the `application` tag\n     * in the `AndroidManifest.xml`.\n     * It's not accesible on Android 11 or newer.\n     *\n     * @since 1.0.0\n     */\n    Directory[\"ExternalStorage\"] = \"EXTERNAL_STORAGE\";\n})(Directory || (Directory = {}));\nexport var Encoding;\n(function (Encoding) {\n    /**\n     * Eight-bit UCS Transformation Format\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF8\"] = \"utf8\";\n    /**\n     * Seven-bit ASCII, a.k.a. ISO646-US, a.k.a. the Basic Latin block of the\n     * Unicode character set\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"ASCII\"] = \"ascii\";\n    /**\n     * Sixteen-bit UCS Transformation Format, byte order identified by an\n     * optional byte-order mark\n     * This encoding is only supported on Android.\n     *\n     * @since 1.0.0\n     */\n    Encoding[\"UTF16\"] = \"utf16\";\n})(Encoding || (Encoding = {}));\n/**\n * @deprecated Use `Directory`.\n * @since 1.0.0\n */\nexport const FilesystemDirectory = Directory;\n/**\n * @deprecated Use `Encoding`.\n * @since 1.0.0\n */\nexport const FilesystemEncoding = Encoding;\n//# sourceMappingURL=definitions.js.map","import Deferred from './Deferred';\n\nexport type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\n/**\n * An important feature of this throttle implementation is that it waits for `fn` to finish before scheduling the new\n * execution. That is, `fn` never gets executed in parallel with itself.\n */\nexport function throttle<F extends AnyFunction>(\n  fn: F,\n  ms: number | (() => Promise<void>),\n  shouldRunFirst = true,\n) {\n  let args: Parameters<F> | undefined;\n  let isRunning = false;\n\n  async function scheduleFn() {\n    await (typeof ms === 'function' ? ms() : pause(ms));\n    void runFn();\n  }\n\n  async function runFn() {\n    if (!args) {\n      isRunning = false;\n      return;\n    }\n\n    try {\n      const localArgs = args;\n      args = undefined;\n      await fn(...localArgs);\n    } finally {\n      // Voiding the promise to let the error produced by `fn` be thrown immediately\n      void scheduleFn();\n    }\n  }\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!isRunning) {\n      isRunning = true;\n\n      if (shouldRunFirst) {\n        void runFn();\n      } else {\n        void scheduleFn();\n      }\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    void Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nconst IDLE_TIMEOUT = 500;\n\nlet onIdleCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onIdle(callback: NoneToVoidFunction) {\n  if (!self.requestIdleCallback) {\n    onTickEnd(callback);\n    return;\n  }\n\n  if (!onIdleCallbacks) {\n    onIdleCallbacks = [callback];\n\n    requestIdleCallback((deadline) => {\n      const currentCallbacks = onIdleCallbacks!;\n      onIdleCallbacks = undefined;\n\n      while (currentCallbacks.length) {\n        const cb = currentCallbacks.shift()!;\n        cb();\n\n        if (!deadline.timeRemaining()) break;\n      }\n\n      if (currentCallbacks.length) {\n        if (onIdleCallbacks) {\n          // Prepend the remaining callbacks if the next pass is already planned\n          onIdleCallbacks = currentCallbacks.concat(onIdleCallbacks);\n        } else {\n          currentCallbacks.forEach(onIdle);\n        }\n      }\n    }, { timeout: IDLE_TIMEOUT });\n  } else {\n    onIdleCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n\nexport async function waitFor(cb: () => boolean, interval: number, attempts: number) {\n  let i = 0;\n  let result = cb();\n\n  while (!result && i < attempts) {\n    await pause(interval);\n\n    i++;\n    result = cb();\n  }\n\n  return result;\n}\n\nexport function setCancellableTimeout(ms: number, cb: NoneToVoidFunction) {\n  const timeoutId = setTimeout(cb, ms);\n  return () => clearTimeout(timeoutId);\n}\n\n/**\n * Returns a function that executes every given functions (tasks) with limited concurrency (not more than\n * `maxConcurrency` at a time). The tasks are executed in the same order that they are given. Unlike throttle, executes\n * every given task.\n */\nexport function createTaskQueue(maxConcurrency = 1) {\n  const queue: AnyAsyncFunction[] = [];\n  let concurrency = 0;\n\n  const runTasks = async () => {\n    concurrency++;\n    while (queue.length) {\n      const task = queue.shift()!;\n      await task(); // Expected never to throw, because the errors are caught below\n    }\n    concurrency--;\n  };\n\n  /** Schedules execution of the given function right now. The returned promise settles with the task result. */\n  const run = <T>(task: () => MaybePromise<T>): Promise<T> => {\n    const deferred = new Deferred<T>();\n    queue.push(async () => {\n      try {\n        deferred.resolve(await task());\n      } catch (err) {\n        deferred.reject(err);\n      }\n    });\n\n    if (concurrency < maxConcurrency) {\n      void runTasks();\n    }\n\n    return deferred.promise;\n  };\n\n  /** Returns the same task function, but with limited concurrency */\n  const wrap = <Args extends unknown[], Return>(\n    task: (...args: Args) => MaybePromise<Return>,\n  ): (...args: Args) => Promise<Return> => {\n    return (...args: Args) => run(() => task(...args));\n  };\n\n  return { run, wrap };\n}\n\n/**\n * Returns a function that prevents `actions` from running in parallel with itself. If the `action` is already running,\n * queues, the next call will be queued. Unlike `throttle`, never skips the calls.\n */\nexport function forbidConcurrency<Args extends unknown[], Return>(\n  action: (...args: Args) => MaybePromise<Return>,\n): (...args: Args) => Promise<Return> {\n  return createTaskQueue(1).wrap(action);\n}\n","import type { ApiAnyDisplayError } from './types';\nimport { ApiCommonError, ApiTransactionError } from './types';\n\nexport class ApiBaseError extends Error {\n  constructor(message?: string, public displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.name = this.constructor.name;\n  }\n}\n\nexport class ApiUserRejectsError extends ApiBaseError {\n  constructor(message: string = 'Canceled by the user') {\n    super(message);\n  }\n}\n\nexport class ApiServerError extends ApiBaseError {\n  constructor(message: string, public statusCode?: number) {\n    super(message, ApiCommonError.ServerError);\n  }\n}\n\nexport class ApiUnsupportedVersionError extends ApiBaseError {\n  constructor(message: string) {\n    super(message, ApiCommonError.UnsupportedVersion);\n  }\n}\n\nexport class ApiHardwareBlindSigningNotEnabled extends ApiBaseError {\n  constructor(message: string = 'Blind signing not enabled') {\n    super(message, ApiTransactionError.HardwareBlindSigningNotEnabled);\n  }\n}\n\nexport class AbortOperationError extends ApiBaseError {\n  constructor(message: string = 'Abort operation') {\n    super(message);\n  }\n}\n\nexport class NotImplemented extends ApiBaseError {\n  constructor(message: string = 'Not implemented') {\n    super(message);\n  }\n}\n\nexport function maybeApiErrors(fn: AnyAsyncFunction) {\n  return async (...args: any) => {\n    try {\n      return await fn(...args);\n    } catch (err) {\n      return handleServerError(err);\n    }\n  };\n}\n\nexport function handleServerError(err: any) {\n  if (err instanceof ApiServerError) {\n    return { error: err.displayError! };\n  }\n  throw err;\n}\n","import type { MediaWorkerApi } from '../lib/mediaWorker/index.worker';\nimport type { Connector } from './PostMessageConnector';\n\nimport { IS_TEST } from '../config';\n\nimport { createConnector } from './PostMessageConnector';\n\nexport const MAX_WORKERS = Math.min(navigator.hardwareConcurrency || 4, 4);\n\nlet instances: {\n  worker: Worker;\n  connector: Connector<MediaWorkerApi>;\n}[] | undefined;\n\nexport default function launchMediaWorkers() {\n  if (IS_TEST) return [];\n  if (!instances) {\n    instances = new Array(MAX_WORKERS).fill(undefined).map(\n      () => {\n        const worker = new Worker(new URL('../lib/mediaWorker/index.worker.ts', import.meta.url));\n        const connector = createConnector<MediaWorkerApi>(worker);\n        return { worker, connector };\n      },\n    );\n  }\n\n  return instances;\n}\n\nexport function requestMediaWorker(payload: Parameters<Connector<MediaWorkerApi>['request']>[0], index: number) {\n  return launchMediaWorkers()[index].connector.request(payload);\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/*\n *  big.js v6.2.1\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n *  Copyright (c) 2022 Michael Mclaughlin\n *  https://github.com/MikeMcl/big.js/LICENCE.md\n */\n\n\n/************************************** EDITABLE DEFAULTS *****************************************/\n\n\n  // The default values below must be integers within the stated ranges.\n\n  /*\n   * The maximum number of decimal places (DP) of the results of operations involving division:\n   * div and sqrt, and pow with negative exponents.\n   */\nvar DP = 20,          // 0 to MAX_DP\n\n  /*\n   * The rounding mode (RM) used when rounding to the above decimal places.\n   *\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n   *  3  Away from zero.                                  (ROUND_UP)\n   */\n  RM = 1,             // 0, 1, 2 or 3\n\n  // The maximum value of DP and Big.DP.\n  MAX_DP = 1E6,       // 0 to 1000000\n\n  // The maximum magnitude of the exponent argument to the pow method.\n  MAX_POWER = 1E6,    // 1 to 1000000\n\n  /*\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\n   * (JavaScript numbers: -7)\n   * -1000000 is the minimum recommended exponent value of a Big.\n   */\n  NE = -7,            // 0 to -1000000\n\n  /*\n   * The positive exponent (PE) at and above which toString returns exponential notation.\n   * (JavaScript numbers: 21)\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\n   */\n  PE = 21,            // 0 to 1000000\n\n  /*\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\n   * primitive number without a loss of precision.\n   */\n  STRICT = false,     // true or false\n\n\n/**************************************************************************************************/\n\n\n  // Error messages.\n  NAME = '[big.js] ',\n  INVALID = NAME + 'Invalid ',\n  INVALID_DP = INVALID + 'decimal places',\n  INVALID_RM = INVALID + 'rounding mode',\n  DIV_BY_ZERO = NAME + 'Division by zero',\n\n  // The shared prototype object.\n  P = {},\n  UNDEFINED = void 0,\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\n\n\n/*\n * Create and return a Big constructor.\n */\nfunction _Big_() {\n\n  /*\n   * The Big constructor and exported function.\n   * Create and return a new instance of a Big number object.\n   *\n   * n {number|string|Big} A numeric value.\n   */\n  function Big(n) {\n    var x = this;\n\n    // Enable constructor usage without new.\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\n\n    // Duplicate.\n    if (n instanceof Big) {\n      x.s = n.s;\n      x.e = n.e;\n      x.c = n.c.slice();\n    } else {\n      if (typeof n !== 'string') {\n        if (Big.strict === true && typeof n !== 'bigint') {\n          throw TypeError(INVALID + 'value');\n        }\n\n        // Minus zero?\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\n      }\n\n      parse(x, n);\n    }\n\n    // Retain a reference to this Big constructor.\n    // Shadow Big.prototype.constructor which points to Object.\n    x.constructor = Big;\n  }\n\n  Big.prototype = P;\n  Big.DP = DP;\n  Big.RM = RM;\n  Big.NE = NE;\n  Big.PE = PE;\n  Big.strict = STRICT;\n  Big.roundDown = 0;\n  Big.roundHalfUp = 1;\n  Big.roundHalfEven = 2;\n  Big.roundUp = 3;\n\n  return Big;\n}\n\n\n/*\n * Parse the number or string value passed to a Big constructor.\n *\n * x {Big} A Big number instance.\n * n {number|string} A numeric value.\n */\nfunction parse(x, n) {\n  var e, i, nl;\n\n  if (!NUMERIC.test(n)) {\n    throw Error(INVALID + 'number');\n  }\n\n  // Determine sign.\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n  // Decimal point?\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\n\n  // Exponential form?\n  if ((i = n.search(/e/i)) > 0) {\n\n    // Determine exponent.\n    if (e < 0) e = i;\n    e += +n.slice(i + 1);\n    n = n.substring(0, i);\n  } else if (e < 0) {\n\n    // Integer.\n    e = n.length;\n  }\n\n  nl = n.length;\n\n  // Determine leading zeros.\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\n\n  if (i == nl) {\n\n    // Zero.\n    x.c = [x.e = 0];\n  } else {\n\n    // Determine trailing zeros.\n    for (; nl > 0 && n.charAt(--nl) == '0';);\n    x.e = e - i - 1;\n    x.c = [];\n\n    // Convert string to array of digits without leading/trailing zeros.\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\n  }\n\n  return x;\n}\n\n\n/*\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\n *\n * x {Big} The Big to round.\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n * [more] {boolean} Whether the result of division was truncated.\n */\nfunction round(x, sd, rm, more) {\n  var xc = x.c;\n\n  if (rm === UNDEFINED) rm = x.constructor.RM;\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\n    throw Error(INVALID_RM);\n  }\n\n  if (sd < 1) {\n    more =\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\n      rm === 1 && xc[0] >= 5 ||\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\n    );\n\n    xc.length = 1;\n\n    if (more) {\n\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n      x.e = x.e - sd + 1;\n      xc[0] = 1;\n    } else {\n\n      // Zero.\n      xc[0] = x.e = 0;\n    }\n  } else if (sd < xc.length) {\n\n    // xc[sd] is the digit after the digit that may be rounded up.\n    more =\n      rm === 1 && xc[sd] >= 5 ||\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\n      rm === 3 && (more || !!xc[0]);\n\n    // Remove any digits after the required precision.\n    xc.length = sd;\n\n    // Round up?\n    if (more) {\n\n      // Rounding up may mean the previous digit has to be rounded up.\n      for (; ++xc[--sd] > 9;) {\n        xc[sd] = 0;\n        if (sd === 0) {\n          ++x.e;\n          xc.unshift(1);\n          break;\n        }\n      }\n    }\n\n    // Remove trailing zeros.\n    for (sd = xc.length; !xc[--sd];) xc.pop();\n  }\n\n  return x;\n}\n\n\n/*\n * Return a string representing the value of Big x in normal or exponential notation.\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\n */\nfunction stringify(x, doExponential, isNonzero) {\n  var e = x.e,\n    s = x.c.join(''),\n    n = s.length;\n\n  // Exponential notation?\n  if (doExponential) {\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\n\n  // Normal notation.\n  } else if (e < 0) {\n    for (; ++e;) s = '0' + s;\n    s = '0.' + s;\n  } else if (e > 0) {\n    if (++e > n) {\n      for (e -= n; e--;) s += '0';\n    } else if (e < n) {\n      s = s.slice(0, e) + '.' + s.slice(e);\n    }\n  } else if (n > 1) {\n    s = s.charAt(0) + '.' + s.slice(1);\n  }\n\n  return x.s < 0 && isNonzero ? '-' + s : s;\n}\n\n\n// Prototype/instance methods\n\n\n/*\n * Return a new Big whose value is the absolute value of this Big.\n */\nP.abs = function () {\n  var x = new this.constructor(this);\n  x.s = 1;\n  return x;\n};\n\n\n/*\n * Return 1 if the value of this Big is greater than the value of Big y,\n *       -1 if the value of this Big is less than the value of Big y, or\n *        0 if they have the same value.\n */\nP.cmp = function (y) {\n  var isneg,\n    x = this,\n    xc = x.c,\n    yc = (y = new x.constructor(y)).c,\n    i = x.s,\n    j = y.s,\n    k = x.e,\n    l = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\n\n  // Signs differ?\n  if (i != j) return i;\n\n  isneg = i < 0;\n\n  // Compare exponents.\n  if (k != l) return k > l ^ isneg ? 1 : -1;\n\n  j = (k = xc.length) < (l = yc.length) ? k : l;\n\n  // Compare digit by digit.\n  for (i = -1; ++i < j;) {\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\n  }\n\n  // Compare lengths.\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.div = function (y) {\n  var x = this,\n    Big = x.constructor,\n    a = x.c,                  // dividend\n    b = (y = new Big(y)).c,   // divisor\n    k = x.s == y.s ? 1 : -1,\n    dp = Big.DP;\n\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n\n  // Divisor is zero?\n  if (!b[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  // Dividend is 0? Return +-0.\n  if (!a[0]) {\n    y.s = k;\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  var bl, bt, n, cmp, ri,\n    bz = b.slice(),\n    ai = bl = b.length,\n    al = a.length,\n    r = a.slice(0, bl),   // remainder\n    rl = r.length,\n    q = y,                // quotient\n    qc = q.c = [],\n    qi = 0,\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\n\n  q.s = k;\n  k = p < 0 ? 0 : p;\n\n  // Create version of divisor with leading zero.\n  bz.unshift(0);\n\n  // Add zeros to make remainder as long as divisor.\n  for (; rl++ < bl;) r.push(0);\n\n  do {\n\n    // n is how many times the divisor goes into current remainder.\n    for (n = 0; n < 10; n++) {\n\n      // Compare divisor and remainder.\n      if (bl != (rl = r.length)) {\n        cmp = bl > rl ? 1 : -1;\n      } else {\n        for (ri = -1, cmp = 0; ++ri < bl;) {\n          if (b[ri] != r[ri]) {\n            cmp = b[ri] > r[ri] ? 1 : -1;\n            break;\n          }\n        }\n      }\n\n      // If divisor < remainder, subtract divisor from remainder.\n      if (cmp < 0) {\n\n        // Remainder can't be more than 1 digit longer than divisor.\n        // Equalise lengths using divisor with extra leading zero?\n        for (bt = rl == bl ? b : bz; rl;) {\n          if (r[--rl] < bt[rl]) {\n            ri = rl;\n            for (; ri && !r[--ri];) r[ri] = 9;\n            --r[ri];\n            r[rl] += 10;\n          }\n          r[rl] -= bt[rl];\n        }\n\n        for (; !r[0];) r.shift();\n      } else {\n        break;\n      }\n    }\n\n    // Add the digit n to the result array.\n    qc[qi++] = cmp ? n : ++n;\n\n    // Update the remainder.\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\n    else r = [a[ai]];\n\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\n\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\n  if (!qc[0] && qi != 1) {\n\n    // There can't be more than one zero.\n    qc.shift();\n    q.e--;\n    p--;\n  }\n\n  // Round?\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\n\n  return q;\n};\n\n\n/*\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\n */\nP.eq = function (y) {\n  return this.cmp(y) === 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\n * false.\n */\nP.gt = function (y) {\n  return this.cmp(y) > 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\n * return false.\n */\nP.gte = function (y) {\n  return this.cmp(y) > -1;\n};\n\n\n/*\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\n */\nP.lt = function (y) {\n  return this.cmp(y) < 0;\n};\n\n\n/*\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\n * return false.\n */\nP.lte = function (y) {\n  return this.cmp(y) < 1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big minus the value of Big y.\n */\nP.minus = P.sub = function (y) {\n  var i, j, t, xlty,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  // Signs differ?\n  if (a != b) {\n    y.s = -b;\n    return x.plus(y);\n  }\n\n  var xc = x.c.slice(),\n    xe = x.e,\n    yc = y.c,\n    ye = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (yc[0]) {\n      y.s = -b;\n    } else if (xc[0]) {\n      y = new Big(x);\n    } else {\n      y.s = 1;\n    }\n    return y;\n  }\n\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\n  if (a = xe - ye) {\n\n    if (xlty = a < 0) {\n      a = -a;\n      t = xc;\n    } else {\n      ye = xe;\n      t = yc;\n    }\n\n    t.reverse();\n    for (b = a; b--;) t.push(0);\n    t.reverse();\n  } else {\n\n    // Exponents equal. Check digit by digit.\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\n\n    for (a = b = 0; b < j; b++) {\n      if (xc[b] != yc[b]) {\n        xlty = xc[b] < yc[b];\n        break;\n      }\n    }\n  }\n\n  // x < y? Point xc to the array of the bigger number.\n  if (xlty) {\n    t = xc;\n    xc = yc;\n    yc = t;\n    y.s = -y.s;\n  }\n\n  /*\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\n   * needs to start at yc.length.\n   */\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\n\n  // Subtract yc from xc.\n  for (b = i; j > a;) {\n    if (xc[--j] < yc[j]) {\n      for (i = j; i && !xc[--i];) xc[i] = 9;\n      --xc[i];\n      xc[j] += 10;\n    }\n\n    xc[j] -= yc[j];\n  }\n\n  // Remove trailing zeros.\n  for (; xc[--b] === 0;) xc.pop();\n\n  // Remove leading zeros and adjust exponent accordingly.\n  for (; xc[0] === 0;) {\n    xc.shift();\n    --ye;\n  }\n\n  if (!xc[0]) {\n\n    // n - n = +0\n    y.s = 1;\n\n    // Result must be zero.\n    xc = [ye = 0];\n  }\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\n */\nP.mod = function (y) {\n  var ygtx,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  if (!y.c[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  x.s = y.s = 1;\n  ygtx = y.cmp(x) == 1;\n  x.s = a;\n  y.s = b;\n\n  if (ygtx) return new Big(x);\n\n  a = Big.DP;\n  b = Big.RM;\n  Big.DP = Big.RM = 0;\n  x = x.div(y);\n  Big.DP = a;\n  Big.RM = b;\n\n  return this.minus(x.times(y));\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big negated.\n */\nP.neg = function () {\n  var x = new this.constructor(this);\n  x.s = -x.s;\n  return x;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big plus the value of Big y.\n */\nP.plus = P.add = function (y) {\n  var e, k, t,\n    x = this,\n    Big = x.constructor;\n\n  y = new Big(y);\n\n  // Signs differ?\n  if (x.s != y.s) {\n    y.s = -y.s;\n    return x.minus(y);\n  }\n\n  var xe = x.e,\n    xc = x.c,\n    ye = y.e,\n    yc = y.c;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (!yc[0]) {\n      if (xc[0]) {\n        y = new Big(x);\n      } else {\n        y.s = x.s;\n      }\n    }\n    return y;\n  }\n\n  xc = xc.slice();\n\n  // Prepend zeros to equalise exponents.\n  // Note: reverse faster than unshifts.\n  if (e = xe - ye) {\n    if (e > 0) {\n      ye = xe;\n      t = yc;\n    } else {\n      e = -e;\n      t = xc;\n    }\n\n    t.reverse();\n    for (; e--;) t.push(0);\n    t.reverse();\n  }\n\n  // Point xc to the longer array.\n  if (xc.length - yc.length < 0) {\n    t = yc;\n    yc = xc;\n    xc = t;\n  }\n\n  e = yc.length;\n\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\n\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n  if (k) {\n    xc.unshift(k);\n    ++ye;\n  }\n\n  // Remove trailing zeros.\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a Big whose value is the value of this Big raised to the power n.\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\n * mode Big.RM.\n *\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n */\nP.pow = function (n) {\n  var x = this,\n    one = new x.constructor('1'),\n    y = one,\n    isneg = n < 0;\n\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n    throw Error(INVALID + 'exponent');\n  }\n\n  if (isneg) n = -n;\n\n  for (;;) {\n    if (n & 1) y = y.times(x);\n    n >>= 1;\n    if (!n) break;\n    x = x.times(x);\n  }\n\n  return isneg ? one.div(y) : y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.prec = function (sd, rm) {\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n    throw Error(INVALID + 'precision');\n  }\n  return round(new this.constructor(this), sd, rm);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\n * using rounding mode rm, or Big.RM if rm is not specified.\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\n * If dp is not specified, round to 0 decimal places.\n *\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.round = function (dp, rm) {\n  if (dp === UNDEFINED) dp = 0;\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n  return round(new this.constructor(this), dp + this.e + 1, rm);\n};\n\n\n/*\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.sqrt = function () {\n  var r, c, t,\n    x = this,\n    Big = x.constructor,\n    s = x.s,\n    e = x.e,\n    half = new Big('0.5');\n\n  // Zero?\n  if (!x.c[0]) return new Big(x);\n\n  // Negative?\n  if (s < 0) {\n    throw Error(NAME + 'No square root');\n  }\n\n  // Estimate.\n  s = Math.sqrt(x + '');\n\n  // Math.sqrt underflow/overflow?\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\n  if (s === 0 || s === 1 / 0) {\n    c = x.c.join('');\n    if (!(c.length + e & 1)) c += '0';\n    s = Math.sqrt(c);\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\n  } else {\n    r = new Big(s + '');\n  }\n\n  e = r.e + (Big.DP += 4);\n\n  // Newton-Raphson iteration.\n  do {\n    t = r;\n    r = half.times(t.plus(x.div(t)));\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\n\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big times the value of Big y.\n */\nP.times = P.mul = function (y) {\n  var c,\n    x = this,\n    Big = x.constructor,\n    xc = x.c,\n    yc = (y = new Big(y)).c,\n    a = xc.length,\n    b = yc.length,\n    i = x.e,\n    j = y.e;\n\n  // Determine sign of result.\n  y.s = x.s == y.s ? 1 : -1;\n\n  // Return signed 0 if either 0.\n  if (!xc[0] || !yc[0]) {\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  // Initialise exponent of result as x.e + y.e.\n  y.e = i + j;\n\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n  if (a < b) {\n    c = xc;\n    xc = yc;\n    yc = c;\n    j = a;\n    a = b;\n    b = j;\n  }\n\n  // Initialise coefficient array of result with zeros.\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\n\n  // Multiply.\n\n  // i is initially xc.length.\n  for (i = b; i--;) {\n    b = 0;\n\n    // a is yc.length.\n    for (j = a + i; j > i;) {\n\n      // Current sum of products at this digit position, plus carry.\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\n      c[j--] = b % 10;\n\n      // carry\n      b = b / 10 | 0;\n    }\n\n    c[j] = b;\n  }\n\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\n  if (b) ++y.e;\n  else c.shift();\n\n  // Remove trailing zeros.\n  for (i = c.length; !c[--i];) c.pop();\n  y.c = c;\n\n  return y;\n};\n\n\n/*\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toExponential = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), ++dp, rm);\n    for (; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, true, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n *\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n */\nP.toFixed = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\n\n    // x.e may have changed if the value is rounded up.\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, false, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Omit the sign for negative zero.\n */\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\n  var x = this,\n    Big = x.constructor;\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\n};\n\n\n/*\n * Return the value of this Big as a primitve number.\n */\nP.toNumber = function () {\n  var n = Number(stringify(this, true, true));\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\n    throw Error(NAME + 'Imprecise conversion');\n  }\n  return n;\n};\n\n\n/*\n * Return a string representing the value of this Big rounded to sd significant digits using\n * rounding mode rm, or Big.RM if rm is not specified.\n * Use exponential notation if sd is less than the number of digits necessary to represent\n * the integer part of the value in normal notation.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toPrecision = function (sd, rm) {\n  var x = this,\n    Big = x.constructor,\n    n = x.c[0];\n\n  if (sd !== UNDEFINED) {\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n      throw Error(INVALID + 'precision');\n    }\n    x = round(new Big(x), sd, rm);\n    for (; x.c.length < sd;) x.c.push(0);\n  }\n\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Include the sign for negative zero.\n */\nP.valueOf = function () {\n  var x = this,\n    Big = x.constructor;\n  if (Big.strict === true) {\n    throw Error(NAME + 'valueOf disallowed');\n  }\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\n};\n\n\n// Export\n\n\nexport var Big = _Big_();\n\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\nexport default Big;\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\ntype SafeExecOptions = {\n  rescue?: (err: Error) => void;\n  always?: NoneToVoidFunction;\n  shouldIgnoreError?: boolean;\n};\n\nexport async function safeExecAsync<T extends AnyAsyncFunction>(\n  cb: T,\n  options?: SafeExecOptions,\n): Promise<ReturnType<T> | undefined> {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return await cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n\nexport default function safeExec<T extends AnyFunction>(cb: T, options?: SafeExecOptions): ReturnType<T> | undefined {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  const { rescue, always, shouldIgnoreError } = options ?? {};\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    if (!shouldIgnoreError) {\n      handleError(err);\n    }\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export const DETACHED_TAB_URL = '#detached';\n\nlet ledgerTabId: number | undefined;\n\n/**\n * In order to connect to Ledger, the webapp needs to get the user permission to use the HID device. Chrome doesn't ask\n * the user to choose a device when the code runs in the extension popup: https://issues.chromium.org/issues/40233645.\n * So in case of extension we open a browser tab which asks the permission. The tab runs the same webapp but with a\n * limited UI. Once the user grants the permission, the extension can continue connecting to Ledger inside the popup.\n */\nexport function openLedgerTab() {\n  return createLedgerTab();\n}\n\nexport function closeLedgerTab() {\n  if (!ledgerTabId) return;\n\n  chrome.tabs.query({ active: true }, () => {\n    if (!ledgerTabId) return;\n\n    void chrome.tabs.remove(ledgerTabId);\n  });\n}\n\nexport async function closeThisTab() {\n  const tab = await chrome.tabs.getCurrent();\n  if (!tab?.id) return;\n  await chrome.tabs.remove(tab.id);\n}\n\nexport function onLedgerTabClose(id: number, onClose: () => void) {\n  const listener = (closedTabId: number) => {\n    if (closedTabId !== id) {\n      return;\n    }\n\n    ledgerTabId = undefined;\n    chrome.tabs.onRemoved.removeListener(listener);\n    onClose();\n  };\n\n  chrome.tabs.onRemoved.addListener(listener);\n}\n\nasync function createLedgerTab() {\n  const tab = await chrome.tabs.create({ url: `index.html${DETACHED_TAB_URL}`, active: true });\n  await chrome.windows.update(tab.windowId, { focused: true });\n\n  ledgerTabId = tab.id!;\n\n  return ledgerTabId;\n}\n","import type InAppBrowserPostMessageAdapter from './embeddedDappBridge/provider/InAppBrowserPostMessageAdapter';\nimport type {\n  ApiUpdate,\n  CancellableCallback,\n  OriginMessageData,\n  OriginMessageEvent,\n  WorkerMessageData,\n} from './PostMessageConnector';\n\nimport { decodeExtensionMessage, encodeExtensionMessage } from './extensionMessageSerializer';\nimport { logDebugError } from './logs';\n\ndeclare const self: WorkerGlobalScope;\n\nconst callbackState = new Map<string, CancellableCallback>();\n\ntype ApiConfig =\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\n  ((name: string, ...args: any[]) => any | [any, ArrayBuffer[]])\n  | Record<string, AnyFunction>;\ntype SendToOrigin = (data: WorkerMessageData, transferables?: Transferable[]) => void;\n\n/**\n * Provides functions, defined in this messenger (a window, a worker), to another messenger.\n * The other messenger can call the functions using `createConnector`.\n */\nexport function createPostMessageInterface(\n  api: ApiConfig,\n  channel?: string,\n  target: DedicatedWorkerGlobalScope | Worker | InAppBrowserPostMessageAdapter = self as DedicatedWorkerGlobalScope,\n  shouldIgnoreErrors?: boolean,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      target.postMessage(data, transferables);\n    } else {\n      target.postMessage(data);\n    }\n  }\n\n  if (!shouldIgnoreErrors) {\n    handleErrors(sendToOrigin);\n  }\n\n  function handleMessage(e: OriginMessageEvent) {\n    if (e.data?.channel === channel) {\n      void onMessage(api, e.data, sendToOrigin);\n    }\n  }\n\n  // Correct for any target, but TypeScript weirdly complains\n  (target as DedicatedWorkerGlobalScope).addEventListener('message', handleMessage);\n\n  return () => {\n    (target as DedicatedWorkerGlobalScope).removeEventListener('message', handleMessage);\n  };\n}\n\n/**\n * Provides functions, defined in the main window, to an IFrame.\n */\nexport function createReverseIFrameInterface(\n  api: ApiConfig,\n  targetOrigin: string,\n  target: Window,\n  channel?: string,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      throw new Error('Cannot send `Transferable` to `Window`');\n    } else {\n      target.postMessage(data, targetOrigin);\n    }\n  }\n\n  function handleMessage(e: OriginMessageEvent) {\n    if (targetOrigin && e.origin !== targetOrigin) return;\n\n    if (e.data?.channel === channel) {\n      void onMessage(api, e.data, sendToOrigin);\n    }\n  }\n\n  window.addEventListener('message', handleMessage);\n\n  return () => {\n    window.removeEventListener('message', handleMessage);\n  };\n}\n\n/**\n * Provides functions, defined in this extension service worker, to a window.\n * The window can call the functions using `createExtensionConnector`.\n */\nexport function createExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n  channel?: string,\n  cleanUpdater?: (onUpdate: (update: ApiUpdate) => void) => void,\n  withAutoInit = false,\n) {\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    const url = port.sender?.url;\n    const origin = url ? new URL(url).origin : undefined;\n\n    const dAppUpdater = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n\n    function sendToOrigin(data: WorkerMessageData) {\n      data.channel = channel;\n      port.postMessage(encodeExtensionMessage(data));\n    }\n\n    handleErrors(sendToOrigin);\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      data = decodeExtensionMessage(data);\n      if (data.channel === channel) {\n        void onMessage(api, data, sendToOrigin, dAppUpdater, origin);\n      }\n    });\n\n    port.onDisconnect.addListener(() => {\n      cleanUpdater?.(dAppUpdater);\n    });\n\n    if (withAutoInit) {\n      void onMessage(api, { type: 'init', args: [] }, sendToOrigin, dAppUpdater);\n    }\n  });\n}\n\n/**\n * Provides functions, defined in this window, to the extension service worker.\n * The service worker can call the functions using `createReverseExtensionConnector`.\n */\nexport function createReverseExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n) {\n  let port: chrome.runtime.Port;\n\n  function sendToServiceWorker(data: WorkerMessageData) {\n    port.postMessage(encodeExtensionMessage(data));\n  }\n\n  function connect() {\n    port = chrome.runtime.connect({ name: portName });\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      data = decodeExtensionMessage(data);\n      void onMessage(api, data, sendToServiceWorker);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connect();\n    });\n  }\n\n  connect();\n}\n\nasync function onMessage(\n  api: ApiConfig,\n  data: OriginMessageData,\n  sendToOrigin: SendToOrigin,\n  onUpdate?: (update: ApiUpdate) => void,\n  origin?: string,\n) {\n  if (!onUpdate) {\n    onUpdate = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n  }\n\n  switch (data.type) {\n    case 'init': {\n      const { args } = data;\n      const promise = typeof api === 'function'\n        ? api('init', origin, onUpdate, ...args)\n        : api.init?.(onUpdate, ...args);\n      await promise;\n\n      break;\n    }\n    case 'callMethod': {\n      const {\n        messageId, name, args, withCallback,\n      } = data;\n      try {\n        // This method is probably from another worker\n        if (typeof api !== 'function' && !api[name]) return;\n\n        if (messageId && withCallback) {\n          const callback = (...callbackArgs: any[]) => {\n            const lastArg = callbackArgs[callbackArgs.length - 1];\n\n            sendToOrigin({\n              type: 'methodCallback',\n              messageId,\n              callbackArgs,\n            }, isTransferable(lastArg) ? [lastArg] : undefined);\n          };\n\n          callbackState.set(messageId, callback);\n\n          args.push(callback as never);\n        }\n\n        const response = typeof api === 'function'\n          ? await api(name, origin, ...args)\n          : await api[name](...args);\n        const { arrayBuffer } = (typeof response === 'object' && response && 'arrayBuffer' in response) || {};\n\n        if (messageId) {\n          sendToOrigin(\n            {\n              type: 'methodResponse',\n              messageId,\n              response,\n            },\n            arrayBuffer ? [arrayBuffer] : undefined,\n          );\n        }\n      } catch (err: any) {\n        logDebugError(name, err);\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            error: { message: err.message },\n          });\n        }\n      }\n\n      if (messageId) {\n        callbackState.delete(messageId);\n      }\n\n      break;\n    }\n    case 'cancelProgress': {\n      const callback = callbackState.get(data.messageId);\n      if (callback) {\n        callback.isCanceled = true;\n      }\n\n      break;\n    }\n  }\n}\n\nfunction isTransferable(obj: any) {\n  return obj instanceof ArrayBuffer || obj instanceof ImageBitmap;\n}\n\nfunction handleErrors(sendToOrigin: SendToOrigin) {\n  self.onerror = (e) => {\n    const message = e.error?.message || 'Uncaught exception in worker';\n    logDebugError(message, e.error);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.error?.stack,\n      },\n    });\n  };\n\n  self.addEventListener('unhandledrejection', (e) => {\n    const message = e.reason?.message || 'Unhandled rejection in worker';\n    logDebugError(message, e.reason);\n\n    sendToOrigin({\n      type: 'unhandledError',\n      error: {\n        message,\n        stack: e.reason?.stack,\n      },\n    });\n  });\n}\n","import { DEBUG, DEBUG_API } from '../config';\nimport { AssertionError } from './assert';\n\nexport interface Log {\n  message: string;\n  args: any[];\n  time: number; // Passing data from the worker to the application as a date object is not supported\n  level: 'debug' | 'debugError';\n}\n\nconst MAX_LOG_LENGTH = 999;\nconst logs: Log[] = [];\n\nexport function errorReplacer(_: string, value: any) {\n  if (value instanceof Error) {\n    return {\n      name: value.name,\n      message: value.message,\n      stack: value.stack,\n      metadata: value instanceof AssertionError ? value.metadata : undefined,\n    };\n  }\n  return value;\n}\n\nexport function addLog(log: Omit<Log, 'time'>) {\n  if (logs.length > MAX_LOG_LENGTH) {\n    logs.shift();\n  }\n\n  logs.push({\n    ...log,\n    args: log.args.map((arg) => JSON.stringify(arg, errorReplacer)),\n    time: Date.now(),\n  });\n}\n\nexport function getLogs() {\n  return logs;\n}\n\nexport function logDebugError(message: string, ...args: any[]) {\n  addLog({ message, level: 'debugError', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  addLog({ message, level: 'debug', args });\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(`[DEBUG] ${message}`, ...args);\n  }\n}\n\nexport function logDebugApi(message: any, obj1: any, obj2?: any) {\n  if (DEBUG_API) {\n    // eslint-disable-next-line no-console\n    console.debug(`[DEBUG] ${message}`);\n    // eslint-disable-next-line no-console\n    if (obj1) console.dir(obj1);\n    // eslint-disable-next-line no-console\n    if (obj2) console.dir(obj2);\n  }\n}\n\nexport function logSelfXssWarnings() {\n  const selfXssWarnings: AnyLiteral = {\n    en: 'WARNING! This console can be a way for bad people to take over your crypto wallet through something called '\n      + 'a Self-XSS attack. So, don\\'t put in or paste code you don\\'t understand. Stay safe!',\n    ru: '!             '\n      + '  Self-XSS.       ,    .  !',\n    es: 'ADVERTENCIA! Esta consola puede ser una forma en que las personas malintencionadas se apoderen de su '\n      + 'billetera de criptomonedas mediante un ataque llamado Self-XSS. Por lo tanto, '\n      + 'no introduzca ni pegue cdigo que no comprenda. Cudese!',\n    zh: 'Self-XSS',\n  };\n\n  const langCode = navigator.language.split('-')[0];\n  const text = selfXssWarnings[langCode] || selfXssWarnings.en;\n\n  // eslint-disable-next-line no-console\n  console.log('%c%s', 'color: red; background: yellow; font-size: 18px;', text);\n}\n","export enum ApiCommonError {\n  Unexpected = 'Unexpected',\n  ServerError = 'ServerError',\n  DebugError = 'DebugError',\n  UnsupportedVersion = 'UnsupportedVersion',\n}\n\nexport enum ApiAuthError {\n  InvalidMnemonic = 'InvalidMnemonic',\n  InvalidAddress = 'InvalidAddress',\n  DomainNotResolved = 'DomainNotResolved',\n}\n\nexport enum ApiTransactionDraftError {\n  InvalidAmount = 'InvalidAmount',\n  InvalidToAddress = 'InvalidToAddress',\n  InsufficientBalance = 'InsufficientBalance',\n  InvalidStateInit = 'InvalidStateInit',\n  StateInitWithoutBin = 'StateInitWithoutBin',\n  DomainNotResolved = 'DomainNotResolved',\n  WalletNotInitialized = 'WalletNotInitialized',\n  InvalidAddressFormat = 'InvalidAddressFormat',\n  InactiveContract = 'InactiveContract',\n}\n\nexport enum ApiTransactionError {\n  PartialTransactionFailure = 'PartialTransactionFailure',\n  IncorrectDeviceTime = 'IncorrectDeviceTime',\n  InsufficientBalance = 'InsufficientBalance',\n  UnsuccesfulTransfer = 'UnsuccesfulTransfer',\n  NotSupportedHardwareOperation = 'NotSupportedHardwareOperation',\n  HardwareBlindSigningNotEnabled = 'HardwareBlindSigningNotEnabled',\n  WrongAddress = 'WrongAddress',\n  WrongNetwork = 'WrongNetwork',\n}\n\nexport type ApiAnyDisplayError = ApiCommonError | ApiAuthError | ApiTransactionDraftError | ApiTransactionError;\n","export function random(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function sample<T>(arr: T[]) {\n  return arr[random(0, arr.length - 1)];\n}\n\nexport function randomBytes(size: number) {\n  return self.crypto.getRandomValues(new Uint8Array(size));\n}\n\nexport function randomBase64(byteSize: number) {\n  return Buffer.from(randomBytes(byteSize)).toString('base64');\n}\n","export class AssertionError extends Error {\n  constructor(\n    message: string,\n    // Any additional information for the error to help debug it. Don't put sensitive information here.\n    public metadata?: unknown,\n  ) {\n    super(message);\n  }\n}\n\nexport function assert(condition: boolean, message: string, metadata?: unknown) {\n  if (!condition) {\n    throw new AssertionError(message, metadata);\n  }\n}\n","import type { Address, Dictionary } from '@ton/core';\n\nexport type AddrList = Dictionary<Address, boolean>;\n\nexport const JettonStakingOpCodes = {\n  GET_STATIC_DATA: 0X2FCB26A2,\n  REPORT_STATIC_DATA: 0X8B771735,\n  GET_STORAGE_DATA: 0X5B88E5CC,\n  REPORT_STORAGE_DATA: 0XAAB4A8EF,\n  EXCESSES: 0XD53276DB,\n\n  // Jettons,\n  TRANSFER_JETTON: 0X0F8A7EA5,\n  INTERNAL_TRANSFER: 0X178D4519,\n  TRANSFER_NOTIFICATION: 0X7362D09C,\n  PROVIDE_WALLET_ADDRESS: 0X2C76B973,\n  TAKE_WALLET_ADDRESS: 0XD1735400,\n  BURN_JETTON: 0X595F07BC,\n\n  // Staking pool,\n  STAKE_JETTONS: 0XE3A06989,\n  ADD_REWARDS: 0XDB16AC95,\n  SEND_CLAIMED_REWARDS: 0X44BC1FE3,\n  SEND_UNSTAKED_JETTONS: 0XFB232BC3,\n  APPROVE_STAKE: 0X919DE781,\n  CANCEL_STAKE: 0X9EADA1D9,\n  ADD_REWARD_JETTONS: 0X10676AE7,\n  CLAIM_COMMISSIONS: 0XBCA8F067,\n  REQUEST_UPDATE_REWARDS: 0XF5C5BAA3,\n\n  // Staked jetton wallet,\n  CLAIM_REWARDS: 0X78D9F109,\n  RECEIVE_JETTONS: 0XD68A4AC1,\n  UNSTAKE_JETTONS: 0X499A9262,\n  UNSTAKE_REQUEST: 0X0168D4B7,\n  CANCEL_UNSTAKE_REQUEST: 0XA4910F1A,\n  UPDATE_REWARDS: 0XAE9307CE,\n  CONFIRM_TRANSFER: 0XBC85EB11,\n\n  // Pools admin,\n  DEPLOY_NEW_POOL: 0XDA861F17,\n  SEND_COMMISSIONS: 0XB96ADAEA,\n  SET_CODE: 0xe2d2d211,\n  CHANGE_CREATION_FEE: 0x66D5528B,\n  CHANGE_CONTENT: 0x0ec29200,\n  UPDATE_CODES: 0x85c923cf,\n};\n\nexport const JettonStakingGas = {\n  MIN_RESERVE: 20_000_000n,\n  DEPLOY_POOL: 340_000_000n,\n  NOTIFICATION: 340_000_000n,\n  JETTON_TRANSFER: 55_000_000n,\n  BURN_JETTONS: 340_000_000n,\n  STAKE_JETTONS: 300_000_000n, // It was 340000000n\n  UNSTAKE_JETTONS: 340_000_000n,\n  CANCEL_UNSTAKE: 340_000_000n,\n  SEND_COMMISSIONS: 340_000_000n,\n  SIMPLE_UPDATE_REQUEST: 340_000_000n,\n  ADD_REWARDS: 340_000_000n,\n  APPROVE_TRANSFER: 340_000_000n,\n  SAVE_UPDATED_REWARDS: 340_000_000n,\n  MIN_EXCESS: 10_000_000n,\n  SEND_STAKED_JETTONS: 630_000_000n,\n};\n\nexport const Dividers = {\n  COMMISSION_DIVIDER: 10000n,\n  REWARDS_DIVIDER: 1000,\n  DISTRIBUTION_SPEED_DIVIDER: BigInt(24 * 60 * 60),\n  DISTRIBUTED_REWARDS_DIVIDER: 100000000000000000000000000000000000000n,\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import safeExec from '../../util/safeExec';\nimport { fastRaf, throttleWith } from '../../util/schedulers';\nimport { setPhase } from './stricterdom';\n\nlet pendingMeasureTasks: NoneToVoidFunction[] = [];\nlet pendingMutationTasks: NoneToVoidFunction[] = [];\nlet pendingForceReflowTasks: (() => NoneToVoidFunction | void)[] = [];\n\nconst runUpdatePassOnRaf = throttleWithRafFallback(() => {\n  const currentMeasureTasks = pendingMeasureTasks;\n  pendingMeasureTasks = [];\n  currentMeasureTasks.forEach((task) => {\n    safeExec(task);\n  });\n\n  // We use promises to provide correct order for Mutation Observer callback microtasks\n  void Promise.resolve()\n    .then(() => {\n      setPhase('mutate');\n\n      const currentMutationTasks = pendingMutationTasks;\n      pendingMutationTasks = [];\n\n      currentMutationTasks.forEach((task) => {\n        safeExec(task);\n      });\n    })\n    .then(() => {\n      setPhase('measure');\n\n      const pendingForceReflowMutationTasks: NoneToVoidFunction[] = [];\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowTasks) {\n        safeExec(() => {\n          const mutationTask = task();\n          if (mutationTask) {\n            pendingForceReflowMutationTasks.push(mutationTask);\n          }\n        });\n      }\n      pendingForceReflowTasks = [];\n\n      return pendingForceReflowMutationTasks;\n    })\n    .then((pendingForceReflowMutationTasks) => {\n      setPhase('mutate');\n\n      // Will include tasks created during the loop\n      for (const task of pendingForceReflowMutationTasks) {\n        safeExec(task);\n      }\n    })\n    .then(() => {\n      setPhase('measure');\n    });\n});\n\nexport function requestMeasure(cb: NoneToVoidFunction) {\n  pendingMeasureTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestMutation(cb: NoneToVoidFunction) {\n  pendingMutationTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nexport function requestNextMutation(cb: () => (NoneToVoidFunction | void)) {\n  requestMeasure(() => {\n    requestMutation(cb);\n  });\n}\n\nexport function requestForcedReflow(cb: () => (NoneToVoidFunction | void)) {\n  pendingForceReflowTasks.push(cb);\n  runUpdatePassOnRaf();\n}\n\nfunction throttleWithRafFallback<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith((throttledFn: NoneToVoidFunction) => {\n    fastRaf(throttledFn, true);\n  }, fn);\n}\n\nexport * from './stricterdom';\n","import type { ApiNft } from '../api/types';\n\nimport { TON_DNS_COLLECTION, TON_DNS_RENEWAL_WARNING_DAYS, TON_DNS_ZONES } from '../config';\nimport { getCountDaysToDate } from './dateFormat';\n\nexport function isDnsDomain(value: string) {\n  return getDnsDomainZone(value) !== undefined;\n}\n\nexport function getDnsDomainZone(domain: string) {\n  for (const zone of TON_DNS_ZONES) {\n    const { suffixes, baseFormat } = zone;\n\n    // Iterating the zones in reverse to prioritize longer zones when multiple zones match (assuming the zones go from\n    // the shortest to the longest). For example, `test.ton.vip` matches both `vip` and `ton.vip`, and `ton.vip` must be\n    // used.\n    for (let i = suffixes.length - 1; i >= 0; i--) {\n      const suffix = suffixes[i];\n      if (!domain.endsWith(`.${suffix}`)) {\n        continue;\n      }\n\n      const base = domain.slice(0, -suffix.length - 1);\n      if (!baseFormat.test(base)) {\n        continue;\n      }\n\n      return { base, zone };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getDnsZoneByCollection(collectionAddress: string) {\n  return TON_DNS_ZONES.find((zone) => zone.resolver === collectionAddress);\n}\n\nexport function isTonDnsNft(nft: ApiNft | undefined): nft is ApiNft {\n  return nft?.collectionAddress === TON_DNS_COLLECTION;\n}\n\nexport function getTonDnsExpirationDate(nft: ApiNft | undefined, dnsExpiration: Record<string, number> | undefined) {\n  return isTonDnsNft(nft) ? dnsExpiration?.[nft.address] : undefined;\n}\n\nexport function filterExpiringDomains(\n  nftAddresses: string[],\n  nftByAddress?: Record<string, ApiNft>,\n  dnsExpiration?: Record<string, number>,\n) {\n  const expiringDomains: ApiNft[] = [];\n\n  if (nftByAddress && dnsExpiration) {\n    for (const address of nftAddresses) {\n      const nft = nftByAddress[address];\n      if (getCountDaysToDate(getTonDnsExpirationDate(nft, dnsExpiration) ?? Infinity) <= TON_DNS_RENEWAL_WARNING_DAYS) {\n        expiringDomains.push(nft);\n      }\n    }\n  }\n\n  return expiringDomains;\n}\n\nexport function getDomainsExpirationDate(\n  nfts: (string | ApiNft)[],\n  nftByAddress?: Record<string, ApiNft>,\n  dnsExpiration?: Record<string, number>,\n) {\n  if (!dnsExpiration) {\n    return undefined;\n  }\n\n  return nfts.reduce<number | undefined>(\n    (minDate, nftOrAddress) => {\n      const nft = typeof nftOrAddress === 'string' ? nftByAddress?.[nftOrAddress] : nftOrAddress;\n      const expirationDate = getTonDnsExpirationDate(nft, dnsExpiration);\n      return expirationDate\n        ? Math.min(expirationDate, minDate ?? Infinity)\n        : minDate;\n    },\n    undefined,\n  );\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","// https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n\nexport default {\n  Element: {\n    props: [\n      'clientLeft', 'clientTop', 'clientWidth', 'clientHeight',\n      'scrollWidth', 'scrollHeight', 'scrollLeft', 'scrollTop',\n    ] as const,\n    methods: [\n      'getClientRects', 'getBoundingClientRect',\n      'scrollBy', 'scrollTo', 'scrollIntoView', 'scrollIntoViewIfNeeded',\n    ] as const,\n  },\n  HTMLElement: {\n    props: [\n      'offsetLeft', 'offsetTop', 'offsetWidth', 'offsetHeight', 'offsetParent',\n      'innerText',\n    ] as const,\n    methods: ['focus'] as const,\n  },\n  window: {\n    props: [\n      'scrollX', 'scrollY',\n      'innerHeight', 'innerWidth',\n    ] as const,\n    methods: ['getComputedStyle'] as const,\n  },\n  VisualViewport: {\n    props: [\n      'height', 'width', 'offsetTop', 'offsetLeft',\n    ] as const,\n  },\n  Document: {\n    props: ['scrollingElement'] as const,\n    methods: ['elementFromPoint'] as const,\n  },\n  HTMLInputElement: {\n    methods: ['select'] as const,\n  },\n  MouseEvent: {\n    props: ['layerX', 'layerY', 'offsetX', 'offsetY'] as const,\n  },\n  Range: {\n    methods: ['getClientRects', 'getBoundingClientRect'] as const,\n  },\n};\n","import LAYOUT_CAUSES from './layoutCauses';\n\ntype Entities = keyof typeof LAYOUT_CAUSES;\ntype Phase =\n  'measure'\n  | 'mutate';\ntype ErrorHandler = (error: Error) => any;\n\n// eslint-disable-next-line no-console\nconst DEFAULT_ERROR_HANDLER = console.error;\n\nlet onError: ErrorHandler = DEFAULT_ERROR_HANDLER;\n\nconst nativeMethods = new Map<string, AnyFunction>();\n\nlet phase: Phase = 'measure';\nlet isStrict = false;\nlet observer: MutationObserver | undefined;\n\nexport function setPhase(newPhase: Phase) {\n  phase = newPhase;\n}\n\nexport function getPhase() {\n  return phase;\n}\n\nexport function enableStrict() {\n  if (isStrict) return;\n\n  isStrict = true;\n  setupLayoutDetectors();\n  setupMutationObserver();\n}\n\nexport function disableStrict() {\n  if (!isStrict) return;\n\n  clearMutationObserver();\n  clearLayoutDetectors();\n  isStrict = false;\n}\n\nexport function forceMeasure(cb: () => any) {\n  if (phase !== 'mutate') {\n    throw new Error('The current phase is \\'measure\\'');\n  }\n\n  phase = 'measure';\n  const result = cb();\n  phase = 'mutate';\n\n  return result;\n}\n\nconst forcedMutationAllowedFor = new Set<Node>();\n\nexport function forceMutation(cb: () => any, nodes: Node | Node[]) {\n  if (phase !== 'measure') {\n    throw new Error('The current phase is \\'mutate\\'');\n  }\n\n  if (isStrict) {\n    if (Array.isArray(nodes)) {\n      nodes.forEach((node) => {\n        forcedMutationAllowedFor.add(node);\n      });\n    } else {\n      forcedMutationAllowedFor.add(nodes);\n    }\n  }\n\n  return cb();\n}\n\nexport function suppressStrict(cb: () => any) {\n  if (!isStrict) {\n    return cb();\n  }\n\n  disableStrict();\n  const result = cb();\n  enableStrict();\n  return result;\n}\n\nexport function setHandler(handler?: ErrorHandler) {\n  onError = handler || DEFAULT_ERROR_HANDLER;\n}\n\nfunction setupLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = Object.getOwnPropertyDescriptor(prototype, prop)?.get;\n        if (!nativeGetter) {\n          return;\n        }\n\n        nativeMethods.set(`${name}#${prop}`, nativeGetter);\n\n        Object.defineProperty(prototype, prop, {\n          get() {\n            onMeasure(prop);\n\n            return nativeGetter.call(this);\n          },\n        });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        const nativeMethod = (prototype as any)[method]!;\n        nativeMethods.set(`${name}#${method}`, nativeMethod);\n\n        (prototype as any)[method] = function (...args: any[]) {\n          onMeasure(method);\n\n          return nativeMethod.apply(this, args);\n        };\n      });\n    }\n  });\n}\n\nfunction clearLayoutDetectors() {\n  Object.entries(LAYOUT_CAUSES).forEach(([name, causes]) => {\n    const entity = window[name as Entities];\n    if (!entity) return;\n    const prototype = typeof entity === 'object' ? entity : entity.prototype;\n\n    if ('props' in causes) {\n      causes.props.forEach((prop) => {\n        const nativeGetter = nativeMethods.get(`${name}#${prop}`);\n        if (!nativeGetter) {\n          return;\n        }\n\n        Object.defineProperty(prototype, prop, { get: nativeGetter });\n      });\n    }\n\n    if ('methods' in causes) {\n      causes.methods.forEach((method) => {\n        (prototype as any)[method] = nativeMethods.get(`${name}#${method}`)!;\n      });\n    }\n  });\n\n  nativeMethods.clear();\n}\n\nfunction setupMutationObserver() {\n  observer = new MutationObserver((mutations) => {\n    if (phase !== 'mutate') {\n      mutations.forEach(({ target, type, attributeName }) => {\n        if (!document.contains(target)) {\n          return;\n        }\n\n        if (forcedMutationAllowedFor.has(target)) {\n          return;\n        }\n\n        if (type === 'childList' && target instanceof HTMLElement && target.contentEditable) {\n          return;\n        }\n\n        if (attributeName?.startsWith('data-')) {\n          return;\n        }\n\n        onError(new Error(`Unexpected mutation detected: \\`${type === 'attributes' ? attributeName : type}\\``));\n      });\n    }\n\n    forcedMutationAllowedFor.clear();\n  });\n\n  observer.observe(document.body, {\n    childList: true,\n    attributes: true,\n    subtree: true,\n    characterData: false,\n  });\n}\n\nfunction clearMutationObserver() {\n  observer?.disconnect();\n  observer = undefined;\n}\n\nfunction onMeasure(propName: string) {\n  if (phase !== 'measure') {\n    onError(new Error(`Unexpected measurement detected: \\`${propName}\\``));\n  }\n}\n","import { IS_CORE_WALLET } from '../../../config';\n\nexport const POPUP_PORT = IS_CORE_WALLET ? 'TonWallet_popup' : 'MyTonWallet_popup';\nexport const CONTENT_SCRIPT_PORT = IS_CORE_WALLET ? 'TonWallet_contentScript' : 'MyTonWallet_contentScript';\nexport const PAGE_CONNECTOR_CHANNEL = IS_CORE_WALLET ? 'TonWallet_pageConnector' : 'MyTonWallet_pageConnector';\n","import type { Connector } from '../../../util/PostMessageConnector';\nimport type { ApiInitArgs, OnApiUpdate } from '../../types';\nimport type { AllMethodArgs, AllMethodResponse, AllMethods } from '../../types/methods';\n\nimport { logDebugApi, logDebugError } from '../../../util/logs';\nimport { createConnector, createExtensionConnector } from '../../../util/PostMessageConnector';\nimport { pause } from '../../../util/schedulers';\nimport { IS_IOS } from '../../../util/windowEnvironment';\nimport { createWindowProvider, createWindowProviderForExtension } from '../../../util/windowProvider';\nimport { POPUP_PORT } from '../extension/config';\n\nconst HEALTH_CHECK_TIMEOUT = 150;\nconst HEALTH_CHECK_MIN_DELAY = 5000; // 5 sec\n\nlet updateCallback: OnApiUpdate;\nlet worker: Worker | undefined;\nlet connector: Connector | undefined;\nlet isInitialized = false;\n\nexport function initApi(onUpdate: OnApiUpdate, initArgs: ApiInitArgs | (() => ApiInitArgs)) {\n  updateCallback = onUpdate;\n\n  if (!connector) {\n    // We use process.env.IS_EXTENSION instead of IS_EXTENSION in order to remove the irrelevant code during bundling\n    if (process.env.IS_EXTENSION) {\n      const getInitArgs = typeof initArgs === 'function' ? initArgs : () => initArgs;\n      connector = createExtensionConnector(POPUP_PORT, onUpdate, getInitArgs as () => ApiInitArgs);\n\n      createWindowProviderForExtension();\n    } else {\n      worker = new Worker(\n        /* webpackChunkName: \"worker\" */ new URL('./provider.ts', import.meta.url),\n      );\n      connector = createConnector(worker, onUpdate);\n\n      createWindowProvider(worker);\n    }\n  }\n\n  if (!isInitialized) {\n    if (!process.env.IS_EXTENSION && IS_IOS) {\n      setupIosHealthCheck();\n    }\n    isInitialized = true;\n  }\n\n  const args = typeof initArgs === 'function' ? initArgs() : initArgs;\n  return connector.init(args);\n}\n\nexport async function callApi<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized when calling', fnName);\n    return undefined;\n  }\n\n  try {\n    const result = await (connector.request({\n      name: fnName,\n      args,\n    }) as Promise<AllMethodResponse<T>>);\n\n    logDebugApi(`callApi: ${fnName}`, args, result);\n\n    return result;\n  } catch (err) {\n    return undefined;\n  }\n}\n\nexport function callApiWithThrow<T extends keyof AllMethods>(fnName: T, ...args: AllMethodArgs<T>) {\n  return (connector!.request({\n    name: fnName,\n    args,\n  }) as AllMethodResponse<T>);\n}\n\nconst startedAt = Date.now();\n\n// Workaround for iOS sometimes stops interacting with worker\nfunction setupIosHealthCheck() {\n  window.addEventListener('focus', () => {\n    void ensureWorkerPing();\n    // Sometimes a single check is not enough\n    setTimeout(() => ensureWorkerPing(), 1000);\n  });\n}\n\nasync function ensureWorkerPing() {\n  let isResolved = false;\n\n  try {\n    await Promise.race([\n      callApiWithThrow('ping'),\n      pause(HEALTH_CHECK_TIMEOUT)\n        .then(() => (isResolved ? undefined : Promise.reject(new Error('HEALTH_CHECK_TIMEOUT')))),\n    ]);\n  } catch (err) {\n    logDebugError('ensureWorkerPing', err);\n\n    if (Date.now() - startedAt >= HEALTH_CHECK_MIN_DELAY) {\n      worker?.terminate();\n      worker = undefined;\n      connector = undefined;\n      updateCallback({ type: 'requestReconnectApi' });\n    }\n  } finally {\n    isResolved = true;\n  }\n}\n","import { WINDOW_PROVIDER_CHANNEL, WINDOW_PROVIDER_PORT } from '../../config';\nimport { createPostMessageInterface, createReverseExtensionInterface } from '../createPostMessageInterface';\nimport * as windowMethods from './methods';\n\nexport function createWindowProvider(worker: Worker) {\n  createPostMessageInterface(windowMethods, WINDOW_PROVIDER_CHANNEL, worker, true);\n}\n\nexport function createWindowProviderForExtension() {\n  createReverseExtensionInterface(WINDOW_PROVIDER_PORT, windowMethods);\n}\n","import type { LangCode } from '../global/types';\n\nimport {\n  IS_CAPACITOR, IS_CORE_WALLET, IS_EXTENSION, IS_FIREFOX_EXTENSION, IS_TELEGRAM_APP, LANG_LIST,\n} from '../config';\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { DETACHED_TAB_URL } from './ledger/tab';\nimport { getPlatform } from './getPlatform';\n\nconst TELEGRAM_MOBILE_PLATFORM = new Set(['android', 'android_x', 'ios']);\n\nfunction isIPad() {\n  const { userAgent, platform } = window.navigator;\n  return platform === 'iPad'\n    || userAgent.includes('iPad')\n    || (platform === 'MacIntel' && ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 2));\n}\n\nfunction getBrowserLanguage(): LangCode {\n  if (IS_CORE_WALLET) return 'en';\n\n  const { language } = navigator;\n  const lang = language.startsWith('zh')\n    ? (language.endsWith('TW') || language.endsWith('HK') ? 'zh-Hant' : 'zh-Hans')\n    : language.substring(0, 2);\n\n  return (LANG_LIST.some(({ langCode }) => langCode === lang) ? lang : 'en') as LangCode;\n}\n\nexport const IS_PWA = (\n  window.matchMedia('(display-mode: standalone)').matches\n  || (window.navigator as any).standalone\n  || document.referrer.includes('android-app://')\n);\n\nexport const PLATFORM_ENV = getPlatform();\nexport const IS_MAC_OS = PLATFORM_ENV === 'macOS';\nexport const IS_WINDOWS = PLATFORM_ENV === 'Windows';\nexport const IS_LINUX = PLATFORM_ENV === 'Linux';\nexport const IS_IOS = PLATFORM_ENV === 'iOS';\nexport const IS_ANDROID = PLATFORM_ENV === 'Android';\nexport const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nexport const IS_OPERA = navigator.userAgent.includes(' OPR/');\nexport const IS_EDGE = navigator.userAgent.includes(' Edg/');\nexport const IS_FIREFOX = navigator.userAgent.includes('Firefox/');\nexport const IS_TOUCH_ENV = window.matchMedia('(pointer: coarse)').matches;\nexport const IS_CHROME_EXTENSION = Boolean(window.chrome?.system);\nexport const IS_ELECTRON = Boolean(window.electron);\nexport const IS_WEB = !IS_CAPACITOR && !IS_ELECTRON && !IS_EXTENSION && !IS_TELEGRAM_APP;\nexport const DEFAULT_LANG_CODE = 'en';\nexport const USER_AGENT_LANG_CODE = getBrowserLanguage();\nexport const DPR = window.devicePixelRatio || 1;\nexport const IS_LEDGER_SUPPORTED = IS_CAPACITOR\n  || !(IS_CORE_WALLET || IS_IOS || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\nexport const IS_LEDGER_EXTENSION_TAB = global.location.hash.startsWith(DETACHED_TAB_URL);\n// Disable biometric auth on electron for now until this issue is fixed:\n// https://github.com/electron/electron/issues/24573\nexport const IS_BIOMETRIC_AUTH_SUPPORTED = Boolean(\n  !IS_CAPACITOR && !IS_TELEGRAM_APP && window.navigator.credentials && (!IS_ELECTRON || IS_MAC_OS),\n);\nexport const IS_DELEGATED_BOTTOM_SHEET = IS_CAPACITOR && global.location.search.startsWith('?bottom-sheet');\nexport const IS_DELEGATING_BOTTOM_SHEET = IS_CAPACITOR && IS_IOS && !IS_DELEGATED_BOTTOM_SHEET && !isIPad();\nexport const IS_MULTITAB_SUPPORTED = 'BroadcastChannel' in window && !IS_LEDGER_EXTENSION_TAB;\nexport const IS_DAPP_SUPPORTED = IS_EXTENSION || IS_ELECTRON || IS_CAPACITOR;\nexport const IS_IOS_APP = IS_IOS && IS_CAPACITOR;\nexport const IS_ANDROID_APP = IS_ANDROID && IS_CAPACITOR;\n\n// Note: As of 27-11-2023, Firefox does not support readText()\n// Note: As of 22-02-2023, clipboard functionality is only available to the Telegram partners\n// https://github.com/Telegram-Mini-Apps/telegram-apps/issues/609#issuecomment-2571435311\nexport const IS_CLIPBOARDS_SUPPORTED = !(IS_FIREFOX || IS_FIREFOX_EXTENSION || IS_TELEGRAM_APP);\n\nexport const REM = parseInt(getComputedStyle(document.documentElement).fontSize, 10);\nexport const STICKY_CARD_INTERSECTION_THRESHOLD = (IS_MAC_OS && IS_ELECTRON ? -3 : -3.75) * REM;\n\nexport function setScrollbarWidthProperty() {\n  const el = document.createElement('div');\n  el.style.cssText = 'overflow-x: hidden; overflow-y: scroll; visibility:hidden; position:absolute;';\n  el.classList.add('custom-scroll');\n  document.body.appendChild(el);\n\n  requestForcedReflow(() => {\n    const width = el.offsetWidth - el.clientWidth;\n\n    return () => {\n      document.documentElement.style.setProperty('--scrollbar-width', `${width}px`);\n      el.remove();\n    };\n  });\n}\n\nexport function getIsMobileTelegramApp() {\n  return IS_TELEGRAM_APP && TELEGRAM_MOBILE_PLATFORM.has(window.Telegram?.WebApp.platform ?? '');\n}\n","import type { AccountIdParsed, ApiNetwork } from '../api/types';\nimport type { Account } from '../global/types';\n\nimport { shortenAddress } from './shortenAddress';\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const parts = accountId.split('-');\n  const [id, network = 'mainnet'] = (parts.length === 3 ? [parts[0], parts[2]] : parts) as [string, ApiNetwork];\n  return { id: Number(id), network };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network } = account;\n  return `${id}-${network}`;\n}\n\nexport function getMainAccountAddress(addressByChain: Account['addressByChain']) {\n  return addressByChain.ton ?? Object.values(addressByChain).find(Boolean);\n}\n\nexport function getAccountTitle(account: Account) {\n  return account.title || shortenAddress(getMainAccountAddress(account.addressByChain) ?? '');\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\ntype GroupedByKey<Member> = Record<number | string, Member[]>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ntype OrderCallback<T> = (member: T) => unknown;\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: readonly T[], key: keyof T): CollectionByKey<T> {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function groupBy<T extends AnyLiteral>(collection: readonly T[], key: keyof T): GroupedByKey<T> {\n  return collection.reduce((byKey: GroupedByKey<T>, member: T) => {\n    const groupKey = member[key];\n\n    if (!byKey[groupKey]) {\n      byKey[groupKey] = [member];\n    } else {\n      byKey[groupKey].push(member);\n    }\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R, M>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    if (aValue === bValue) return 0;\n\n    const condition = isAsc ? aValue > bValue : aValue < bValue;\n    return condition ? 1 : -1;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual<T>(array1: readonly T[], array2: readonly T[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: readonly T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n\nexport function findDifference<T>(array1: Iterable<T>, array2: Iterable<T>): T[] {\n  const set2 = new Set(array2);\n  const diff: T[] = [];\n\n  for (const element of array1) {\n    if (!set2.has(element)) {\n      diff.push(element);\n    }\n  }\n\n  return diff;\n}\n\nexport function filterValues<M>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => boolean,\n): CollectionByKey<M> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<M>, key, index) => {\n    if (callback(byKey[key], key, index, byKey)) {\n      newByKey[key] = byKey[key];\n    }\n\n    return newByKey;\n  }, {});\n}\n\nexport function uniqueByKey<T>(array: T[], key: keyof T, shouldKeepFirst?: boolean) {\n  if (shouldKeepFirst) {\n    array = Array.from(array);\n    array.reverse();\n  }\n\n  const result = [...new Map(array.map((item) => [item[key], item])).values()];\n\n  if (shouldKeepFirst) {\n    result.reverse();\n  }\n\n  return result;\n}\n\nexport function intersection<T>(x: Set<T>, y: Set<T>): Set<T> {\n  const result = new Set<T>();\n  for (const elem of y) {\n    if (x.has(elem)) {\n      result.add(elem);\n    }\n  }\n  return result;\n}\n\nexport function swapKeysAndValues<\n  K extends string | number,\n  V extends keyof any,\n>(object: Record<K, V>): Record<V, `${K}`> {\n  const result = {} as any;\n  for (const [key, value] of Object.entries(object)) {\n    result[value as any] = key;\n  }\n  return result;\n}\n","import withCache from './withCache';\n\nexport const MEANINGFUL_CHAR_LENGTH = 6;\nconst FILLER = '';\nconst FILLER_LENGTH = FILLER.length;\n\nexport const shortenAddress = withCache((address: string, shift = MEANINGFUL_CHAR_LENGTH, fromRight = shift) => {\n  if (!address) return undefined;\n\n  if (address.length <= shift + fromRight + FILLER_LENGTH) return address;\n\n  return `${address.slice(0, shift)}${FILLER}${address.slice(-fromRight)}`;\n});\n","import type { SecureStoragePluginPlugin } from 'capacitor-secure-storage-plugin';\n\nimport type { StorageKey } from '../../../api/storages/types';\n\nimport { IS_CAPACITOR } from '../../../config';\n\nlet SecureStoragePlugin: SecureStoragePluginPlugin | undefined;\nlet resolvePromise: AnyFunction;\n\nconst promise = new Promise((resolve) => {\n  resolvePromise = resolve;\n});\n\nexport async function init() {\n  if (IS_CAPACITOR && !SecureStoragePlugin) {\n    ({ SecureStoragePlugin } = await import(\n      /* webpackChunkName: \"capacitorSecureStorage\" */ 'capacitor-secure-storage-plugin',\n    ));\n    resolvePromise();\n  }\n}\n\nexport async function capacitorStorageGetItem(key: StorageKey) {\n  await promise;\n  return (await SecureStoragePlugin!.get({ key }).catch((err) => {\n    const message = typeof err === 'string' ? err : err.message;\n    if (message.includes('key does not exist')) {\n      return undefined;\n    } else {\n      throw err;\n    }\n  }))?.value;\n}\n\nexport async function capacitorStorageSetItem(key: StorageKey, value: string) {\n  await promise;\n  return SecureStoragePlugin!.set({ key, value });\n}\n\nexport async function capacitorStorageRemoveItem(key: StorageKey) {\n  await promise;\n  return SecureStoragePlugin!.remove({ key });\n}\n\nexport async function capacitorStorageClear() {\n  await promise;\n  return SecureStoragePlugin!.clear();\n}\n\nexport async function capacitorStorageKeys() {\n  await promise;\n  return SecureStoragePlugin!.keys();\n}\n","import { pick } from '../../iteratees';\n\nexport function localStorageGetItem(key: string) {\n  return localStorage.getItem(key);\n}\n\nexport function localStorageSetItem(key: string, value: string) {\n  return localStorage.setItem(key, value);\n}\n\nexport function localStorageRemoveItem(key: string) {\n  return localStorage.removeItem(key);\n}\n\nexport function localStorageClear() {\n  return localStorage.clear();\n}\n\nexport function localStorageGetAll() {\n  return { ...localStorage };\n}\n\nexport function localStorageGetMany(keys: string[]) {\n  return pick(localStorage, keys);\n}\n\nexport function localStorageSetMany(items: AnyLiteral) {\n  Object.assign(localStorage, items);\n}\n","import { isAscii } from '../stringFormat';\n\nconst MAX_COMMENT_SIZE = 120;\nconst BROKEN_CONNECTION_ERRORS = new Set(['DisconnectedDeviceDuringOperation', 'TransportRaceCondition']);\n\nexport function isValidLedgerComment(comment: string) {\n  return isAscii(comment) && isLedgerCommentLengthValid(comment);\n}\n\nexport function isLedgerCommentLengthValid(comment: string) {\n  return comment.length <= MAX_COMMENT_SIZE;\n}\n\nexport function isLedgerConnectionBroken(error: string) {\n  return BROKEN_CONNECTION_ERRORS.has(error);\n}\n","export function isAscii(str: string) {\n  for (let i = 0; i < str.length; i++) {\n    if (str.charCodeAt(i) > 127) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function insertSubstring(str: string, start: number, newSubStr: string) {\n  if (start < 0) {\n    start = str.length - start;\n  }\n  return str.slice(0, start) + newSubStr + str.slice(start);\n}\n\nexport function hexToString(hex: string): string {\n  let result = '';\n  for (let i = 0; i < hex.length; i += 2) {\n    result += String.fromCharCode(parseInt(hex.slice(i, i + 2), 16));\n  }\n\n  return result;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"88\":\"624986b76c0ad075690b\",\"104\":\"d3d0658321759c7a1c20\",\"106\":\"4f3d72aecd28d192bbee\",\"115\":\"91298d679585917d2a7c\",\"148\":\"d4136b6a5ecf56ede3d7\",\"168\":\"f08bfcfdc8c60a24e8ed\",\"196\":\"47374b197e148f7562b8\",\"201\":\"a9df2475054636d04195\",\"215\":\"02897e46fb157ff77165\",\"283\":\"8137301fc53480049325\",\"355\":\"2c726ad1bf56ac5011de\",\"408\":\"4a5a307a8a814b280078\",\"411\":\"f3fddccbfc7a4f1d09cc\",\"477\":\"b487be8764000f2f30c2\",\"513\":\"ebadc095aa3ee931d37b\",\"524\":\"e96398ed8fa2620171f0\",\"542\":\"8b97033f3a252281472f\",\"564\":\"652088edade4d9ed67f5\",\"580\":\"82f879326ce5b9c846f1\",\"612\":\"209737ae0d82b434ab41\",\"642\":\"0cbff8d83531f17fc7b4\",\"789\":\"ee1e19d801c1e8bfab4d\",\"884\":\"b0155df7dd4719a9838e\",\"895\":\"91b32485bcc6a9f2cef6\",\"897\":\"b0aa8daaa0f11c289b24\",\"941\":\"683488c878ee093fbd00\",\"949\":\"10c81af08aa931279b35\",\"956\":\"1c3822f193a3d67e6aa6\",\"973\":\"8069d508cb08d6a3b5f3\",\"988\":\"5ebba37989fff908c5a9\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0,\n\t840: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmytonwallet\"] = self[\"webpackChunkmytonwallet\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","export default function arePropsShallowEqual(currentProps: AnyLiteral, newProps: AnyLiteral) {\n  if (currentProps === newProps) {\n    return true;\n  }\n\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    return false;\n  }\n\n  if (currentKeysLength === 0) {\n    return true;\n  }\n\n  for (let i = 0; i < currentKeysLength; i++) {\n    const prop = currentKeys[i];\n    if (currentProps[prop] !== newProps[prop]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function logUnequalProps(currentProps: AnyLiteral, newProps: AnyLiteral, msg: string, debugKey = '') {\n  const currentKeys = Object.keys(currentProps);\n  const currentKeysLength = currentKeys.length;\n  const newKeysLength = Object.keys(newProps).length;\n\n  if (currentKeysLength !== newKeysLength) {\n    // eslint-disable-next-line no-console\n    console.log(`${msg} LENGTH`);\n    return;\n  }\n\n  // eslint-disable-next-line no-console\n  console.log(msg);\n  currentKeys.forEach((prop) => {\n    if (currentProps[prop] !== newProps[prop]) {\n      // eslint-disable-next-line no-console\n      console.log(debugKey, prop, ':', currentProps[prop], '=>', newProps[prop]);\n    }\n  });\n}\n","import { animate } from './animation';\nimport { fastRaf, throttle } from './schedulers';\n\nconst KEYS_TO_IGNORE = new Set([\n  'TeactMemoWrapper renders',\n  'TeactNContainer renders',\n  'Button renders',\n]);\nconst MIN_RENDERS_TO_SHOW = 5;\nconst MIN_DURATION_TO_SHOW = 2;\n\nlet counters: Record<string, {\n  value: number;\n  lastUpdateAt: number;\n}> = {};\n\nconst renderCountersThrottled = throttle(renderCounters, 500, false);\n\nlet loggerEl: HTMLDivElement;\n\nexport function debugToOverlay(text: string) {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const date = new Date();\n  const dateFormatted = `${date.toLocaleTimeString()}.${date.getMilliseconds()}`;\n  const wasAtBottom = loggerEl.scrollTop + 10 >= loggerEl.scrollHeight - loggerEl.offsetHeight;\n\n  loggerEl.append(`${dateFormatted}: ${text}`, document.createElement('br'));\n\n  if (wasAtBottom) {\n    loggerEl.scrollTop = loggerEl.scrollHeight;\n  }\n}\n\nexport function incrementOverlayCounter(key: string, value = 1) {\n  const now = Date.now();\n  if (!counters[key]) {\n    counters[key] = { value, lastUpdateAt: now };\n  } else {\n    counters[key].value += value;\n    counters[key].lastUpdateAt = now;\n  }\n\n  renderCountersThrottled();\n}\n\nexport function renderCounters() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  const halfSecondAgo = Date.now() - 500;\n  const [maxRenders, maxDuration] = Object.entries(counters).reduce((acc, [key, { value }]) => {\n    if (KEYS_TO_IGNORE.has(key)) {\n      return acc;\n    }\n\n    if (key.includes('renders') && value > acc[0]) {\n      acc[0] = value;\n    }\n\n    if (key.includes('duration') && value > acc[1]) {\n      acc[1] = value;\n    }\n\n    return acc;\n  }, [0, 0]);\n\n  loggerEl.innerHTML = '';\n  Object\n    .entries(counters)\n    .filter(([key, { value }]) => (\n      (!KEYS_TO_IGNORE.has(key)) && (\n        (key.includes('renders') && value > MIN_RENDERS_TO_SHOW)\n        || (key.includes('duration') && value > MIN_DURATION_TO_SHOW)\n      )\n    ))\n    .sort((a, b) => (\n      b[1].lastUpdateAt - a[1].lastUpdateAt\n    ))\n    .forEach(([key, { value, lastUpdateAt }]) => {\n      const content = document.createElement('span');\n      content.style.background = lastUpdateAt > halfSecondAgo ? 'lightgreen' : '';\n      content.textContent = `${key}: ${Math.round(value)}`;\n      const parent = document.createElement('div');\n      parent.style.background = `#ff0000${factorToHex(value / (key.includes('renders') ? maxRenders : maxDuration))}`;\n      parent.append(content);\n      loggerEl.append(parent);\n    });\n}\n\nexport function debugFps() {\n  if (!loggerEl) {\n    setupOverlay();\n  }\n\n  let ticks: number[] = [];\n  let lastFrameAt = performance.now();\n\n  animate(() => {\n    const now = performance.now();\n    ticks.push(now - lastFrameAt);\n    lastFrameAt = now;\n\n    if (ticks.length > 100) {\n      ticks = ticks.slice(-100);\n    }\n\n    const avg = ticks.reduce((acc, t) => acc + t, 0) / ticks.length;\n    loggerEl!.textContent = `${Math.round(1000 / avg)} FPS`;\n    return true;\n  }, fastRaf);\n}\n\nfunction setupOverlay() {\n  loggerEl = document.createElement('div');\n  loggerEl.style.cssText = 'position: absolute; left: 0; bottom: 25px; z-index: 9998; width: 260px; height: 200px;'\n    + ' border: 1px solid #555; background: rgba(255, 255, 255, 0.9); overflow: auto; font-size: 12px; color: black;';\n  document.body.appendChild(loggerEl);\n\n  const clearEl = document.createElement('a');\n  clearEl.style.cssText = 'position: absolute; left: 222px; bottom: 198px; z-index: 9999; font-size: 20px; '\n    + 'cursor: pointer;';\n  clearEl.innerText = '';\n  clearEl.addEventListener('click', () => {\n    counters = {};\n    renderCountersThrottled();\n  });\n  document.body.appendChild(clearEl);\n}\n\nfunction factorToHex(factor: number) {\n  return Math.round(255 * factor).toString(16).padStart(2, '0');\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n\nexport class EventEmitter {\n  private channels = new Map<string, CallbackManager>();\n\n  on(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).addCallback(handler);\n    return this;\n  }\n\n  removeListener(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).removeCallback(handler);\n    return this;\n  }\n\n  emit(name: string, ...args: any) {\n    this.resolveChannel(name).runCallbacks(...args);\n    return this;\n  }\n\n  private resolveChannel(name: string) {\n    let channel = this.channels.get(name);\n    if (!channel) {\n      channel = createCallbackManager();\n      this.channels.set(name, channel);\n    }\n\n    return channel;\n  }\n}\n","import type { CallbackManager } from './callbacks';\n\nimport { createCallbackManager } from './callbacks';\n\ninterface SignalState<T> {\n  value: T;\n  effects: CallbackManager;\n}\n\nconst SIGNAL_MARK = Symbol('SIGNAL_MARK');\n\nexport type Signal<T = any> = ((() => T) & {\n  readonly [SIGNAL_MARK]: symbol;\n  subscribe: (cb: NoneToVoidFunction) => NoneToVoidFunction;\n  once: (cb: NoneToVoidFunction) => NoneToVoidFunction;\n});\n\nexport type SignalSetter = (newValue: any) => void;\n\nexport function isSignal(obj: any): obj is Signal {\n  return typeof obj === 'function' && SIGNAL_MARK in obj;\n}\n\n// A shorthand to unsubscribe effect from all signals\nconst unsubscribesByEffect = new Map<NoneToVoidFunction, Set<NoneToVoidFunction>>();\n\nlet currentEffect: NoneToVoidFunction | undefined;\n\nexport function createSignal<T>(defaultValue?: T) {\n  const state: SignalState<typeof defaultValue> = {\n    value: defaultValue,\n    effects: createCallbackManager(),\n  };\n\n  function subscribe(effect: NoneToVoidFunction) {\n    const unsubscribe = state.effects.addCallback(effect);\n\n    if (!unsubscribesByEffect.has(effect)) {\n      unsubscribesByEffect.set(effect, new Set([unsubscribe]));\n    } else {\n      unsubscribesByEffect.get(effect)!.add(unsubscribe);\n    }\n\n    return () => {\n      unsubscribe();\n\n      const unsubscribes = unsubscribesByEffect.get(effect)!;\n      unsubscribes.delete(unsubscribe);\n      if (!unsubscribes.size) {\n        unsubscribesByEffect.delete(effect);\n      }\n    };\n  }\n\n  function once(effect: NoneToVoidFunction) {\n    const unsub = subscribe(() => {\n      unsub();\n      effect();\n    });\n\n    return unsub;\n  }\n\n  function getter() {\n    if (currentEffect) {\n      subscribe(currentEffect);\n    }\n\n    return state.value;\n  }\n\n  function setter(newValue: T) {\n    if (state.value === newValue) {\n      return;\n    }\n\n    state.value = newValue;\n    state.effects.runCallbacks();\n  }\n\n  const signal = Object.assign(getter as Signal<T>, {\n    [SIGNAL_MARK]: SIGNAL_MARK,\n    subscribe,\n    once,\n  });\n\n  return [signal, setter] as const;\n}\n\nexport function cleanupEffect(effect: NoneToVoidFunction) {\n  unsubscribesByEffect.get(effect)?.forEach((unsubscribe) => {\n    unsubscribe();\n  });\n  unsubscribesByEffect.delete(effect);\n}\n","import { onIdle, throttleWith } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { requestMeasure } from '../fasterdom/fasterdom';\n\nconst AUTO_END_TIMEOUT = 1000;\n\nlet counter = 0;\nlet counterBlocking = 0;\n\nconst [getIsAnimating, setIsAnimating] = createSignal(false);\nconst [getIsBlockingAnimating, setIsBlockingAnimating] = createSignal(false);\n\nexport const getIsHeavyAnimating = getIsAnimating;\nexport { getIsBlockingAnimating };\n\nexport function beginHeavyAnimation(duration = AUTO_END_TIMEOUT, isBlocking = false) {\n  counter++;\n\n  if (counter === 1) {\n    setIsAnimating(true);\n  }\n\n  if (isBlocking) {\n    counterBlocking++;\n\n    if (counterBlocking === 1) {\n      setIsBlockingAnimating(true);\n    }\n  }\n\n  const timeout = window.setTimeout(onEnd, duration);\n\n  let hasEnded = false;\n\n  function onEnd() {\n    if (hasEnded) return;\n    hasEnded = true;\n\n    clearTimeout(timeout);\n\n    counter--;\n\n    if (counter === 0) {\n      setIsAnimating(false);\n    }\n\n    if (isBlocking) {\n      counterBlocking--;\n\n      if (counterBlocking === 0) {\n        setIsBlockingAnimating(false);\n      }\n    }\n  }\n\n  return onEnd;\n}\n\nexport function onFullyIdle(cb: NoneToVoidFunction) {\n  onIdle(() => {\n    if (getIsAnimating()) {\n      requestMeasure(() => {\n        onFullyIdle(cb);\n      });\n    } else {\n      cb();\n    }\n  });\n}\n\nexport function throttleWithFullyIdle<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onFullyIdle, fn);\n}\n","import type { ReactElement } from 'react';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { incrementOverlayCounter } from '../../util/debugOverlay';\nimport { orderBy } from '../../util/iteratees';\nimport safeExec from '../../util/safeExec';\nimport { throttleWith } from '../../util/schedulers';\nimport { createSignal, isSignal, type Signal } from '../../util/signals';\nimport { requestMeasure, requestMutation } from '../fasterdom/fasterdom';\nimport { getIsBlockingAnimating } from './heavyAnimation';\n\nexport { getIsHeavyAnimating, beginHeavyAnimation, onFullyIdle } from './heavyAnimation';\n\nexport type Props = AnyLiteral;\nexport type FC<P extends Props = any> = (props: P) => any;\n\nexport type FC_withDebug =\n  FC\n  & { DEBUG_contentComponentName?: string };\n\nexport enum VirtualType {\n  Empty,\n  Text,\n  Tag,\n  Component,\n  Fragment,\n}\n\ninterface VirtualElementEmpty {\n  type: VirtualType.Empty;\n  target?: Node;\n}\n\ninterface VirtualElementText {\n  type: VirtualType.Text;\n  target?: Node;\n  value: string;\n}\n\nexport interface VirtualElementTag {\n  type: VirtualType.Tag;\n  target?: HTMLElement | SVGElement;\n  tag: string;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementComponent {\n  type: VirtualType.Component;\n  componentInstance: ComponentInstance;\n  props: Props;\n  children: VirtualElementChildren;\n}\n\nexport interface VirtualElementFragment {\n  type: VirtualType.Fragment;\n  children: VirtualElementChildren;\n  placeholderTarget?: Comment;\n}\n\nexport type StateHookSetter<T> = (newValue: ((current: T) => T) | T) => void;\n\nexport interface RefObject<T = unknown> {\n  current: T;\n  onChange?: NoneToVoidFunction;\n}\n\nexport type ElementRef<T = HTMLElement> = RefObject<T | undefined>;\n\nexport enum MountState {\n  Mounting,\n  Mounted,\n  Unmounted,\n}\n\ninterface ComponentInstance {\n  id: number;\n  $element: VirtualElementComponent;\n  Component: FC;\n  name: string;\n  props: Props;\n  renderedValue?: any;\n  mountState: MountState;\n  context?: Record<string, Signal<unknown>>;\n  hooks?: {\n    state?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        nextValue: any;\n        setter: StateHookSetter<any>;\n      }[];\n    };\n    effects?: {\n      cursor: number;\n      byCursor: {\n        dependencies?: readonly unknown[];\n        schedule?: NoneToVoidFunction;\n        cleanup?: NoneToVoidFunction;\n        releaseSignals?: NoneToVoidFunction;\n      }[];\n    };\n    memos?: {\n      cursor: number;\n      byCursor: {\n        value: any;\n        dependencies: readonly unknown[];\n      }[];\n    };\n    refs?: {\n      cursor: number;\n      byCursor: RefObject[];\n    };\n  };\n  prepareForFrame?: () => void;\n  forceUpdate?: () => void;\n  onUpdate?: () => void;\n}\n\nexport type VirtualElement =\n  VirtualElementEmpty\n  | VirtualElementText\n  | VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementParent =\n  VirtualElementTag\n  | VirtualElementComponent\n  | VirtualElementFragment;\nexport type VirtualElementChildren = VirtualElement[];\nexport type VirtualElementReal = Exclude<VirtualElement, VirtualElementComponent | VirtualElementFragment>;\n\n// Compatibility with JSX types\nexport type TeactNode =\n  ReactElement\n  | string\n  | number\n  | boolean\n  | undefined\n  | TeactNode[];\n\ntype Effect = () => (NoneToVoidFunction | void);\ntype EffectCleanup = NoneToVoidFunction;\n\nexport type Context<T> = {\n  defaultValue?: T;\n  contextId: string;\n  Provider: FC<{ value: T; children: TeactNode }>;\n};\n\nconst Fragment = Symbol('Fragment');\n\nconst DEBUG_RENDER_THRESHOLD = 7;\nconst DEBUG_EFFECT_THRESHOLD = 7;\nconst DEBUG_SILENT_RENDERS_FOR = new Set(['TeactMemoWrapper', 'TeactNContainer', 'Button', 'ListItem', 'MenuItem']);\n\nlet contextCounter = 0;\n\nlet lastComponentId = 0;\nlet renderingInstance: ComponentInstance;\n\nexport function isParentElement($element: VirtualElement): $element is VirtualElementParent {\n  return (\n    $element.type === VirtualType.Tag\n    || $element.type === VirtualType.Component\n    || $element.type === VirtualType.Fragment\n  );\n}\n\nfunction createElement(\n  source: string | FC | typeof Fragment,\n  props: Props,\n  ...children: any[]\n): VirtualElementParent | VirtualElementChildren {\n  if (source === Fragment) {\n    return buildFragmentElement(children);\n  } else if (typeof source === 'function') {\n    return createComponentInstance(source, props || {}, children);\n  } else {\n    return buildTagElement(source, props || {}, children);\n  }\n}\n\nfunction buildFragmentElement(children: any[]): VirtualElementFragment {\n  return {\n    type: VirtualType.Fragment,\n    children: buildChildren(children, true),\n  };\n}\n\nfunction createComponentInstance(Component: FC, props: Props, children: any[]): VirtualElementComponent {\n  if (children?.length) {\n    props.children = children.length === 1 ? children[0] : children;\n  }\n\n  const componentInstance: ComponentInstance = {\n    id: -1,\n    $element: undefined as unknown as VirtualElementComponent,\n    Component,\n    name: Component.name,\n    props,\n    mountState: MountState.Unmounted,\n  };\n\n  componentInstance.$element = buildComponentElement(componentInstance);\n\n  return componentInstance.$element;\n}\n\nfunction buildComponentElement(\n  componentInstance: ComponentInstance,\n  children?: VirtualElementChildren,\n): VirtualElementComponent {\n  return {\n    type: VirtualType.Component,\n    componentInstance,\n    props: componentInstance.props,\n    children: children ? buildChildren(children, true) : [],\n  };\n}\n\nfunction buildTagElement(tag: string, props: Props, children: any[]): VirtualElementTag {\n  return {\n    type: VirtualType.Tag,\n    tag,\n    props,\n    children: buildChildren(children),\n  };\n}\n\nfunction buildChildren(children: any[], noEmpty = false): VirtualElement[] {\n  const cleanChildren = dropEmptyTail(children, noEmpty);\n  const newChildren = [];\n\n  for (let i = 0, l = cleanChildren.length; i < l; i++) {\n    const child = cleanChildren[i];\n    if (Array.isArray(child)) {\n      newChildren.push(...buildChildren(child, noEmpty));\n    } else {\n      newChildren.push(buildChildElement(child));\n    }\n  }\n\n  return newChildren;\n}\n\n// We only need placeholders in the middle of collection (to ensure other elements order).\nfunction dropEmptyTail(children: any[], noEmpty = false) {\n  let i = children.length - 1;\n\n  for (; i >= 0; i--) {\n    if (!isEmptyPlaceholder(children[i])) {\n      break;\n    }\n  }\n\n  if (i === children.length - 1) {\n    return children;\n  }\n\n  if (i === -1 && noEmpty) {\n    return children.slice(0, 1);\n  }\n\n  return children.slice(0, i + 1);\n}\n\nfunction isEmptyPlaceholder(child: any) {\n  return !child && child !== 0;\n}\n\nfunction buildChildElement(child: any): VirtualElement {\n  if (isEmptyPlaceholder(child)) {\n    return { type: VirtualType.Empty };\n  } else if (isParentElement(child)) {\n    return child;\n  } else {\n    return {\n      type: VirtualType.Text,\n      value: String(child),\n    };\n  }\n}\n\nconst DEBUG_components: AnyLiteral = { TOTAL: { name: 'TOTAL', renders: 0 } };\n\nconst DEBUG_memos: Record<string, { key: string; calls: number; misses: number; hitRate: number }> = {};\nconst DEBUG_MEMOS_CALLS_THRESHOLD = 20;\n\ndocument.addEventListener('dblclick', () => {\n  // eslint-disable-next-line no-console\n  console.warn('COMPONENTS', orderBy(\n    Object\n      .values(DEBUG_components)\n      .map(({ avgRenderTime, ...state }) => {\n        return { ...state, ...(avgRenderTime !== undefined && { avgRenderTime: Number(avgRenderTime.toFixed(2)) }) };\n      }),\n    'renders',\n    'desc',\n  ));\n\n  // eslint-disable-next-line no-console\n  console.warn('MEMOS', orderBy(\n    Object\n      .values(DEBUG_memos)\n      .filter(({ calls }) => calls >= DEBUG_MEMOS_CALLS_THRESHOLD)\n      .map((state) => ({ ...state, hitRate: Number(state.hitRate.toFixed(2)) })),\n    'hitRate',\n    'asc',\n  ));\n});\n\nlet instancesPendingUpdate = new Set<ComponentInstance>();\nlet idsToExcludeFromUpdate = new Set<number>();\nlet pendingEffects = new Map<string, Effect>();\nlet pendingCleanups = new Map<string, EffectCleanup>();\nlet pendingLayoutEffects = new Map<string, Effect>();\nlet pendingLayoutCleanups = new Map<string, EffectCleanup>();\nlet areImmediateEffectsCaptured = false;\n\n/*\n  Order:\n  - component effect cleanups\n  - component effects\n  - measure tasks\n  - mutation tasks\n  - component updates\n  - component layout effect cleanups\n  - component layout effects\n  - forced layout measure tasks\n  - forced layout mutation tasks\n */\n\nconst runUpdatePassOnRaf = throttleWith(requestMeasure, () => {\n  if (getIsBlockingAnimating()) {\n    getIsBlockingAnimating.once(runUpdatePassOnRaf);\n    return;\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n\n  idsToExcludeFromUpdate = new Set();\n  const instancesToUpdate = Array\n    .from(instancesPendingUpdate)\n    .sort((a, b) => a.id - b.id);\n  instancesPendingUpdate = new Set();\n\n  const currentCleanups = pendingCleanups;\n  pendingCleanups = new Map();\n  currentCleanups.forEach((cb) => cb());\n\n  const currentEffects = pendingEffects;\n  pendingEffects = new Map();\n  currentEffects.forEach((cb) => cb());\n\n  requestMutation(() => {\n    instancesToUpdate.forEach(prepareComponentForFrame);\n    instancesToUpdate.forEach((instance) => {\n      if (idsToExcludeFromUpdate.has(instance.id)) {\n        return;\n      }\n\n      forceUpdateComponent(instance);\n    });\n\n    runImmediateEffects?.();\n  });\n});\n\nexport function captureImmediateEffects() {\n  if (areImmediateEffectsCaptured) {\n    return undefined;\n  }\n\n  areImmediateEffectsCaptured = true;\n  return runCapturedImmediateEffects;\n}\n\nfunction runCapturedImmediateEffects() {\n  const currentLayoutCleanups = pendingLayoutCleanups;\n  pendingLayoutCleanups = new Map();\n  currentLayoutCleanups.forEach((cb) => cb());\n\n  const currentLayoutEffects = pendingLayoutEffects;\n  pendingLayoutEffects = new Map();\n  currentLayoutEffects.forEach((cb) => cb());\n\n  areImmediateEffectsCaptured = false;\n}\n\nexport function renderComponent(componentInstance: ComponentInstance) {\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  const { Component, props } = componentInstance;\n  let newRenderedValue: unknown;\n\n  safeExec(() => {\n    renderingInstance = componentInstance;\n    if (componentInstance.hooks) {\n      if (componentInstance.hooks.state) {\n        componentInstance.hooks.state.cursor = 0;\n      }\n      if (componentInstance.hooks.effects) {\n        componentInstance.hooks.effects.cursor = 0;\n      }\n      if (componentInstance.hooks.memos) {\n        componentInstance.hooks.memos.cursor = 0;\n      }\n      if (componentInstance.hooks.refs) {\n        componentInstance.hooks.refs.cursor = 0;\n      }\n    }\n\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (!DEBUG_components[componentName]) {\n        DEBUG_components[componentName] = {\n          name: componentName,\n          renders: 0,\n          avgRenderTime: 0,\n        };\n      }\n\n      if (DEBUG_MORE) {\n        if (!DEBUG_SILENT_RENDERS_FOR.has(componentName)) {\n          // eslint-disable-next-line no-console\n          console.log(`[Teact] Render ${componentName}`);\n        }\n      }\n\n      DEBUG_startAt = performance.now();\n    }\n\n    newRenderedValue = Component(props);\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(Component);\n      if (duration > DEBUG_RENDER_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow component render: ${componentName}, ${Math.round(duration)} ms`);\n      }\n\n      const { renders, avgRenderTime } = DEBUG_components[componentName];\n      DEBUG_components[componentName].avgRenderTime = (avgRenderTime * renders + duration) / (renders + 1);\n      DEBUG_components[componentName].renders++;\n      DEBUG_components.TOTAL.renders++;\n\n      if (DEBUG_MORE) {\n        incrementOverlayCounter(`${componentName} renders`);\n        incrementOverlayCounter(`${componentName} duration`, duration);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error while rendering component ${componentInstance.name}`, componentInstance);\n\n      newRenderedValue = componentInstance.renderedValue;\n    },\n  });\n\n  if (componentInstance.mountState === MountState.Mounted && newRenderedValue === componentInstance.renderedValue) {\n    return componentInstance.$element;\n  }\n\n  componentInstance.renderedValue = newRenderedValue;\n  const children = Array.isArray(newRenderedValue) ? newRenderedValue : [newRenderedValue];\n  componentInstance.$element = buildComponentElement(componentInstance, children);\n\n  return componentInstance.$element;\n}\n\nexport function hasElementChanged($old: VirtualElement, $new: VirtualElement) {\n  if (typeof $old !== typeof $new) {\n    return true;\n  } else if ($old.type !== $new.type) {\n    return true;\n  } else if ($old.type === VirtualType.Text && $new.type === VirtualType.Text) {\n    return $old.value !== $new.value;\n  } else if ($old.type === VirtualType.Tag && $new.type === VirtualType.Tag) {\n    return ($old.tag !== $new.tag) || ($old.props.key !== $new.props.key);\n  } else if ($old.type === VirtualType.Component && $new.type === VirtualType.Component) {\n    return (\n      $old.componentInstance.Component !== $new.componentInstance.Component\n    ) || (\n      $old.props.key !== $new.props.key\n    );\n  }\n\n  return false;\n}\n\nexport function mountComponent(componentInstance: ComponentInstance) {\n  componentInstance.id = ++lastComponentId;\n  componentInstance.mountState = MountState.Mounting;\n  renderComponent(componentInstance);\n  componentInstance.mountState = MountState.Mounted;\n  return componentInstance.$element;\n}\n\nexport function unmountComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  idsToExcludeFromUpdate.add(componentInstance.id);\n\n  if (componentInstance.hooks?.effects) {\n    for (const effect of componentInstance.hooks.effects.byCursor) {\n      if (effect.cleanup) {\n        safeExec(effect.cleanup);\n      }\n\n      effect.cleanup = undefined;\n      effect.releaseSignals?.();\n    }\n  }\n\n  componentInstance.mountState = MountState.Unmounted;\n\n  helpGc(componentInstance);\n}\n\n// We need to remove all references to DOM objects. We also clean all other references, just in case\nfunction helpGc(componentInstance: ComponentInstance) {\n  const {\n    effects, state, memos, refs,\n  } = componentInstance.hooks || {};\n\n  if (effects) {\n    for (const hook of effects.byCursor) {\n      hook.schedule = undefined;\n      hook.cleanup = undefined;\n      hook.releaseSignals = undefined;\n      hook.dependencies = undefined;\n    }\n  }\n\n  if (state) {\n    for (const hook of state.byCursor) {\n      hook.value = undefined;\n      hook.nextValue = undefined;\n\n      hook.setter = undefined as any;\n    }\n  }\n\n  if (memos) {\n    for (const hook of memos.byCursor) {\n      hook.value = undefined;\n\n      hook.dependencies = undefined as any;\n    }\n  }\n\n  if (refs) {\n    for (const hook of refs.byCursor) {\n      hook.current = undefined;\n      hook.onChange = undefined;\n    }\n  }\n\n  componentInstance.hooks = undefined;\n\n  componentInstance.$element = undefined as any;\n  componentInstance.renderedValue = undefined;\n  componentInstance.onUpdate = undefined;\n}\n\nfunction prepareComponentForFrame(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted) {\n    return;\n  }\n\n  if (componentInstance.hooks?.state) {\n    for (const hook of componentInstance.hooks.state.byCursor) {\n      hook.value = hook.nextValue;\n    }\n  }\n}\n\nfunction forceUpdateComponent(componentInstance: ComponentInstance) {\n  if (componentInstance.mountState === MountState.Unmounted || !componentInstance.onUpdate) {\n    return;\n  }\n\n  const currentElement = componentInstance.$element;\n\n  renderComponent(componentInstance);\n\n  if (componentInstance.$element !== currentElement) {\n    componentInstance.onUpdate();\n  }\n}\n\nexport function useState<T>(): [T | undefined, StateHookSetter<T | undefined>];\nexport function useState<T>(initial: T, debugKey?: string): [T, StateHookSetter<T>];\nexport function useState<T>(initial?: T, debugKey?: string): [T, StateHookSetter<T>] {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.state) {\n    renderingInstance.hooks.state = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.state;\n  const componentInstance = renderingInstance;\n\n  if (byCursor[cursor] === undefined) {\n    byCursor[cursor] = {\n      value: initial,\n      nextValue: initial,\n      setter: (newValue: ((current: T) => T) | T) => {\n        if (componentInstance.mountState === MountState.Unmounted) {\n          return;\n        }\n\n        if (typeof newValue === 'function') {\n          newValue = (newValue as (current: T) => T)(byCursor[cursor].nextValue);\n        }\n\n        if (byCursor[cursor].nextValue === newValue) {\n          return;\n        }\n\n        byCursor[cursor].nextValue = newValue;\n\n        instancesPendingUpdate.add(componentInstance);\n        runUpdatePassOnRaf();\n\n        if (DEBUG_MORE) {\n          // eslint-disable-next-line no-console\n          console.log(\n            '[Teact.useState]',\n            DEBUG_resolveComponentName(componentInstance.Component),\n            `State update at cursor #${cursor}${debugKey ? ` (${debugKey})` : ''}, next value: `,\n            byCursor[cursor].nextValue,\n          );\n        }\n      },\n    };\n  }\n\n  renderingInstance.hooks.state.cursor++;\n\n  return [\n    byCursor[cursor].value,\n    byCursor[cursor].setter,\n  ];\n}\n\nfunction useEffectBase(\n  isLayout: boolean,\n  effect: Effect,\n  dependencies?: readonly unknown[],\n  debugKey?: string,\n) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n  const effectConfig = byCursor[cursor];\n  const componentInstance = renderingInstance;\n\n  function schedule() {\n    scheduleEffect(componentInstance, cursor, effect, isLayout);\n  }\n\n  if (dependencies && effectConfig?.dependencies) {\n    if (dependencies.some((dependency, i) => dependency !== effectConfig.dependencies![i])) {\n      if (DEBUG && debugKey) {\n        const causedBy = dependencies.reduce<string[]>((res, newValue, i) => {\n          const prevValue = effectConfig.dependencies![i];\n          if (newValue !== prevValue) {\n            res.push(`${i}: ${String(prevValue)} => ${String(newValue)}`);\n          }\n\n          return res;\n        }, []);\n\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by dependencies.`, causedBy.join(', '));\n      }\n\n      schedule();\n    }\n  } else {\n    if (debugKey) {\n      // eslint-disable-next-line no-console\n      console.log(`[Teact] Effect \"${debugKey}\" caused by missing dependencies.`);\n    }\n\n    schedule();\n  }\n\n  function setupSignals() {\n    const cleanups = dependencies?.filter(isSignal).map((signal, i) => signal.subscribe(() => {\n      if (debugKey) {\n        // eslint-disable-next-line no-console\n        console.log(`[Teact] Effect \"${debugKey}\" caused by signal #${i} new value:`, signal());\n      }\n\n      byCursor[cursor].schedule!();\n    }));\n\n    if (!cleanups?.length) {\n      return undefined;\n    }\n\n    return () => {\n      for (const cleanup of cleanups) {\n        cleanup();\n      }\n    };\n  }\n\n  if (effectConfig) effectConfig.schedule = undefined; // Help GC\n\n  byCursor[cursor] = {\n    ...effectConfig,\n    dependencies,\n    schedule,\n  };\n\n  if (!effectConfig) {\n    byCursor[cursor].releaseSignals = setupSignals();\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nfunction scheduleEffect(\n  componentInstance: ComponentInstance,\n  cursor: number,\n  effect: Effect,\n  isLayout: boolean,\n) {\n  const { byCursor } = componentInstance.hooks!.effects!;\n  const cleanup = byCursor[cursor]?.cleanup;\n  const cleanupsContainer = isLayout ? pendingLayoutCleanups : pendingCleanups;\n  const effectsContainer = isLayout ? pendingLayoutEffects : pendingEffects;\n  const effectId = `${componentInstance.id}_${cursor}`;\n\n  if (cleanup) {\n    const runEffectCleanup = () => safeExec(() => {\n      if (componentInstance.mountState === MountState.Unmounted) {\n        return;\n      }\n\n      let DEBUG_startAt: number | undefined;\n      if (DEBUG) {\n        DEBUG_startAt = performance.now();\n      }\n\n      cleanup();\n\n      if (DEBUG) {\n        const duration = performance.now() - DEBUG_startAt!;\n        const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n        if (duration > DEBUG_EFFECT_THRESHOLD) {\n          // eslint-disable-next-line no-console\n          console.warn(\n            `[Teact] Slow cleanup at effect cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`,\n          );\n        }\n      }\n    }, {\n      rescue: () => {\n        // eslint-disable-next-line no-console\n        console.error(`[Teact] Error in effect cleanup at cursor #${cursor} in ${componentInstance.name}`,\n          componentInstance);\n      },\n      always: () => {\n        byCursor[cursor].cleanup = undefined;\n      },\n    });\n\n    cleanupsContainer.set(effectId, runEffectCleanup);\n  }\n\n  const runEffect = () => safeExec(() => {\n    if (componentInstance.mountState === MountState.Unmounted) {\n      return;\n    }\n\n    let DEBUG_startAt: number | undefined;\n    if (DEBUG) {\n      DEBUG_startAt = performance.now();\n    }\n\n    const result = effect();\n    if (typeof result === 'function') {\n      byCursor[cursor].cleanup = result;\n    }\n\n    if (DEBUG) {\n      const duration = performance.now() - DEBUG_startAt!;\n      const componentName = DEBUG_resolveComponentName(componentInstance.Component);\n      if (duration > DEBUG_EFFECT_THRESHOLD) {\n        // eslint-disable-next-line no-console\n        console.warn(`[Teact] Slow effect at cursor #${cursor}: ${componentName}, ${Math.round(duration)} ms`);\n      }\n    }\n  }, {\n    rescue: () => {\n      // eslint-disable-next-line no-console\n      console.error(`[Teact] Error in effect at cursor #${cursor} in ${componentInstance.name}`, componentInstance);\n    },\n  });\n\n  effectsContainer.set(effectId, runEffect);\n\n  runUpdatePassOnRaf();\n}\n\nexport function useEffect(effect: Effect, dependencies?: readonly unknown[], debugKey?: string) {\n  return useEffectBase(false, effect, dependencies, debugKey);\n}\n\nexport function useLayoutEffect(effect: Effect, dependencies?: readonly unknown[], debugKey?: string) {\n  return useEffectBase(true, effect, dependencies, debugKey);\n}\n\nexport function useUnmountCleanup(cleanup: NoneToVoidFunction) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n\n  if (!renderingInstance.hooks.effects) {\n    renderingInstance.hooks.effects = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.effects;\n\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      cleanup,\n    };\n  }\n\n  renderingInstance.hooks.effects.cursor++;\n}\n\nexport function useMemo<T>(\n  resolver: () => T,\n  dependencies: readonly unknown[],\n  debugKey?: string,\n  debugHitRateKey?: string,\n): T {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.memos) {\n    renderingInstance.hooks.memos = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.memos;\n  let { value } = byCursor[cursor] || {};\n\n  let DEBUG_state: typeof DEBUG_memos[string] | undefined;\n  if (DEBUG && debugHitRateKey) {\n    const instanceKey = `${debugHitRateKey}#${renderingInstance.id}`;\n\n    DEBUG_state = DEBUG_memos[instanceKey];\n    if (!DEBUG_state) {\n      DEBUG_state = {\n        key: instanceKey, calls: 0, misses: 0, hitRate: 0,\n      };\n      DEBUG_memos[instanceKey] = DEBUG_state;\n    }\n\n    DEBUG_state.calls++;\n    DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n  }\n\n  if (\n    byCursor[cursor] === undefined\n    || dependencies.length !== byCursor[cursor].dependencies.length\n    || dependencies.some((dependency, i) => dependency !== byCursor[cursor].dependencies[i])\n  ) {\n    if (DEBUG) {\n      if (debugKey) {\n        const msg = `[Teact.useMemo] ${renderingInstance.name} (${debugKey}): Update is caused by:`;\n        if (!byCursor[cursor]) {\n          // eslint-disable-next-line no-console\n          console.log(`${msg} [first render]`);\n        } else {\n          logUnequalProps(byCursor[cursor].dependencies, dependencies, msg, debugKey);\n        }\n      }\n\n      if (DEBUG_state) {\n        DEBUG_state.misses++;\n        DEBUG_state.hitRate = (DEBUG_state.calls - DEBUG_state.misses) / DEBUG_state.calls;\n\n        if (\n          DEBUG_state.calls % 10 === 0\n          && DEBUG_state.calls >= DEBUG_MEMOS_CALLS_THRESHOLD\n          && DEBUG_state.hitRate < 0.25\n        ) {\n          // eslint-disable-next-line no-console\n          console.warn(\n\n            `[Teact] ${DEBUG_state.key}: Hit rate is ${DEBUG_state.hitRate.toFixed(2)} for ${DEBUG_state.calls} calls`,\n          );\n        }\n      }\n    }\n\n    value = resolver();\n  }\n\n  byCursor[cursor] = {\n    value,\n    dependencies,\n  };\n\n  renderingInstance.hooks.memos.cursor++;\n\n  return value;\n}\n\nexport function useCallback<F extends AnyFunction>(newCallback: F, dependencies: unknown[], debugKey?: string): F {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useMemo(() => newCallback, dependencies, debugKey);\n}\n\nexport function useRef<T>(initial: T): RefObject<T>;\nexport function useRef<T>(): RefObject<T | undefined>; // TT way (empty is `undefined`)\nexport function useRef<T>(initial: null): RefObject<T | null>; // React way (empty is `null`)\n\nexport function useRef<T>(initial?: T | null) {\n  if (!renderingInstance.hooks) {\n    renderingInstance.hooks = {};\n  }\n  if (!renderingInstance.hooks.refs) {\n    renderingInstance.hooks.refs = { cursor: 0, byCursor: [] };\n  }\n\n  const { cursor, byCursor } = renderingInstance.hooks.refs;\n  if (!byCursor[cursor]) {\n    byCursor[cursor] = {\n      current: initial,\n    };\n  }\n\n  renderingInstance.hooks.refs.cursor++;\n\n  return byCursor[cursor];\n}\n\nexport function createContext<T>(defaultValue?: T): Context<T> {\n  const contextId = String(contextCounter++);\n\n  function TeactContextProvider(props: { value: T; children: TeactNode }) {\n    const [getValue, setValue] = useSignal(props.value ?? defaultValue);\n    // Create a new object to avoid mutations in the parent context\n    renderingInstance.context = { ...renderingInstance.context };\n\n    renderingInstance.context[contextId] = getValue;\n    setValue(props.value);\n    return props.children;\n  }\n\n  TeactContextProvider.DEBUG_contentComponentName = contextId;\n\n  const context = {\n    defaultValue,\n    contextId,\n    Provider: TeactContextProvider,\n  };\n\n  return context;\n}\n\nexport function useContextSignal<T>(context: Context<T>) {\n  const [getDefaultValue] = useSignal(context.defaultValue);\n\n  return renderingInstance.context?.[context.contextId] as Signal<T> || getDefaultValue;\n}\n\nexport function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n\nexport function memo<T extends FC_withDebug>(Component: T, debugKey?: string) {\n  function TeactMemoWrapper(props: Props) {\n    return useMemo(\n      () => createElement(Component, props),\n      // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n      Object.values(props),\n      debugKey,\n      DEBUG_MORE ? DEBUG_resolveComponentName(renderingInstance.Component) : undefined,\n    );\n  }\n\n  TeactMemoWrapper.DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n  return TeactMemoWrapper as T;\n}\n\nexport function DEBUG_resolveComponentName(Component: FC_withDebug) {\n  const { name, DEBUG_contentComponentName } = Component;\n\n  if (name === 'TeactNContainer') {\n    return `container>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactMemoWrapper') {\n    return `memo>${DEBUG_contentComponentName}`;\n  }\n\n  if (name === 'TeactContextProvider') {\n    return `context>id${DEBUG_contentComponentName}`;\n  }\n\n  return name + (DEBUG_contentComponentName ? `>${DEBUG_contentComponentName}` : '');\n}\n\nexport default {\n  createElement,\n  Fragment,\n};\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useForceUpdate = () => {\n  const [, setTrigger] = useState<boolean>(false);\n\n  return useCallback(() => {\n    setTrigger((trigger) => !trigger);\n  }, []);\n};\n\nexport default useForceUpdate;\n","import { useEffect } from '../lib/teact/teact';\n\nfunction useEffectOnce(effect: React.EffectCallback) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useEffect(effect, []);\n}\n\nexport default useEffectOnce;\n","import { useRef } from '../lib/teact/teact';\n\n// Deprecated. Use `usePrevious2` instead\nfunction usePrevious<T>(next: T): T | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined: true): Exclude<T, undefined> | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined?: boolean): Exclude<T, undefined> | undefined;\nfunction usePrevious<T>(next: T, shouldSkipUndefined?: boolean) {\n  const ref = useRef<T>();\n  const { current } = ref;\n  if (!shouldSkipUndefined || next !== undefined) {\n    ref.current = next;\n  }\n\n  return current;\n}\n\nexport default usePrevious;\n","import { useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\nimport usePrevious from './usePrevious';\n\nexport default function useSyncEffect<const T extends readonly any[]>(\n  effect: (args: T | readonly []) => NoneToVoidFunction | void,\n  dependencies: T,\n) {\n  const prevDeps = usePrevious<T>(dependencies);\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  if (!prevDeps || dependencies.some((d, i) => d !== prevDeps[i])) {\n    cleanupRef.current?.();\n    cleanupRef.current = effect(prevDeps || []) ?? undefined;\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupRef.current?.();\n    };\n  });\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport generateUniqueId from '../util/generateUniqueId';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function useUniqueId(prefix = '') {\n  const idRef = useRef<string>();\n\n  useSyncEffect(() => {\n    idRef.current = prefix + generateUniqueId();\n  }, [prefix]);\n\n  return idRef.current!;\n}\n","import type { FC, FC_withDebug, Props } from './teact';\n\nimport { DEBUG, DEBUG_MORE } from '../../config';\nimport arePropsShallowEqual, { logUnequalProps } from '../../util/arePropsShallowEqual';\nimport { handleError } from '../../util/handleError';\nimport { orderBy } from '../../util/iteratees';\nimport { throttleWithTickEnd } from '../../util/schedulers';\nimport React, { DEBUG_resolveComponentName, getIsHeavyAnimating, useUnmountCleanup } from './teact';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport default React;\n\ninterface Container {\n  mapStateToProps: MapStateToProps<any>;\n  activationFn?: ActivationFn<any>;\n  stuckTo?: any;\n  ownProps: Props;\n  mappedProps?: Props;\n  forceUpdate: VoidFunction;\n  DEBUG_updates: number;\n  DEBUG_componentName: string;\n}\n\ntype GlobalState =\n  AnyLiteral\n  & { DEBUG_randomId?: number };\ntype ActionNames = string;\ntype ActionPayload = any;\n\nexport interface ActionOptions {\n  forceOnHeavyAnimation?: boolean;\n  // Workaround for iOS gesture history navigation\n  forceSyncOnIOs?: boolean;\n  forceOutdated?: boolean;\n}\n\ntype Actions = Record<ActionNames, (payload?: ActionPayload, options?: ActionOptions) => void>;\n\ntype ActionHandler = (\n  global: GlobalState,\n  actions: Actions,\n  payload: any,\n) => GlobalState | void | Promise<void>;\n\ntype MapStateToProps<OwnProps = undefined> = (global: GlobalState, ownProps: OwnProps) => AnyLiteral;\ntype StickToFirstFn = (value: any) => boolean;\ntype ActivationFn<OwnProps = undefined> = (\n  global: GlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn,\n) => boolean;\n// TODO: Add callback to typify\ntype GlobalCallback = (global: any) => void;\n\nlet currentGlobal = {\n  isInited: false,\n} as GlobalState;\n\nlet DEBUG_currentRandomId: number | undefined;\n\nconst DEBUG_invalidateGlobalOnTickEnd = throttleWithTickEnd(() => {\n  DEBUG_currentRandomId = Math.random();\n});\n\nconst actionHandlers: Record<string, ActionHandler[]> = {};\nconst callbacks: GlobalCallback[] = [updateContainers];\nconst actions = {} as Actions;\nconst containers = new Map<string, Container>();\n\nconst runCallbacksThrottled = throttleWithTickEnd(runCallbacks);\n\nlet forceOnHeavyAnimation = true;\n\nfunction runCallbacks() {\n  if (forceOnHeavyAnimation) {\n    forceOnHeavyAnimation = false;\n  } else if (getIsHeavyAnimating()) {\n    getIsHeavyAnimating.once(runCallbacksThrottled);\n    return;\n  }\n\n  callbacks.forEach((cb) => cb(currentGlobal));\n}\n\nexport function setUntypedGlobal(newGlobal?: GlobalState, options?: ActionOptions) {\n  if (typeof newGlobal === 'object' && newGlobal !== currentGlobal) {\n    if (DEBUG) {\n      if (\n        !options?.forceOutdated\n        && newGlobal.DEBUG_randomId && newGlobal.DEBUG_randomId !== DEBUG_currentRandomId\n      ) {\n        throw new Error('[TeactN.setGlobal] Attempt to set an outdated global');\n      }\n\n      DEBUG_currentRandomId = Math.random();\n    }\n\n    currentGlobal = newGlobal;\n\n    if (options?.forceSyncOnIOs) {\n      forceOnHeavyAnimation = true;\n      runCallbacks();\n    } else {\n      if (options?.forceOnHeavyAnimation) {\n        forceOnHeavyAnimation = true;\n      }\n\n      runCallbacksThrottled();\n    }\n  }\n}\n\nexport function getUntypedGlobal() {\n  if (DEBUG) {\n    currentGlobal = {\n      ...currentGlobal,\n      DEBUG_randomId: DEBUG_currentRandomId,\n    };\n    DEBUG_invalidateGlobalOnTickEnd();\n  }\n\n  return currentGlobal;\n}\n\nexport function getUntypedActions() {\n  return actions;\n}\n\nexport function forceOnHeavyAnimationOnce() {\n  forceOnHeavyAnimation = true;\n}\n\nlet actionQueue: NoneToVoidFunction[] = [];\n\nfunction handleAction(name: string, payload?: ActionPayload, options?: ActionOptions) {\n  actionQueue.push(() => {\n    actionHandlers[name]?.forEach((handler) => {\n      const response = handler(DEBUG ? getUntypedGlobal() : currentGlobal, actions, payload);\n      if (!response || typeof response.then === 'function') {\n        return;\n      }\n\n      setUntypedGlobal(response as GlobalState, options);\n    });\n  });\n\n  if (actionQueue.length === 1) {\n    try {\n      while (actionQueue.length) {\n        actionQueue[0]();\n        actionQueue.shift();\n      }\n    } finally {\n      actionQueue = [];\n    }\n  }\n}\n\nfunction updateContainers() {\n  let DEBUG_startAt: number | undefined;\n  if (DEBUG) {\n    DEBUG_startAt = performance.now();\n  }\n\n  for (const container of containers.values()) {\n    const {\n      mapStateToProps, ownProps, mappedProps, forceUpdate,\n    } = container;\n\n    if (!activateContainer(container, currentGlobal, ownProps)) {\n      continue;\n    }\n\n    let newMappedProps;\n\n    try {\n      newMappedProps = mapStateToProps(currentGlobal, ownProps);\n    } catch (err: any) {\n      handleError(err);\n\n      return;\n    }\n\n    if (DEBUG) {\n      if (Object.values(newMappedProps).some(Number.isNaN)) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          // eslint-disable-next-line @stylistic/max-len\n          `[TeactN] Some of \\`${container.DEBUG_componentName}\\` mappers contain NaN values. This may cause redundant updates because of incorrect equality check.`,\n        );\n      }\n    }\n\n    if (Object.keys(newMappedProps).length && !arePropsShallowEqual(mappedProps!, newMappedProps)) {\n      if (DEBUG_MORE) {\n        logUnequalProps(\n          mappedProps!,\n          newMappedProps,\n          `[TeactN] Will update ${container.DEBUG_componentName} caused by:`,\n        );\n      }\n\n      container.mappedProps = newMappedProps;\n      container.DEBUG_updates++;\n\n      forceUpdate();\n    }\n  }\n\n  if (DEBUG) {\n    const updateTime = performance.now() - DEBUG_startAt!;\n    if (updateTime > 7) {\n      // eslint-disable-next-line no-console\n      console.warn(`[TeactN] Slow containers update: ${Math.round(updateTime)} ms`);\n    }\n  }\n}\n\nexport function addUntypedActionHandler(name: ActionNames, handler: ActionHandler) {\n  if (!actionHandlers[name]) {\n    actionHandlers[name] = [];\n\n    actions[name] = (payload?: ActionPayload, options?: ActionOptions) => {\n      handleAction(name, payload, options);\n    };\n  }\n\n  actionHandlers[name].push(handler);\n}\n\nexport function addCallback(cb: GlobalCallback) {\n  callbacks.push(cb);\n}\n\nexport function removeCallback(cb: GlobalCallback) {\n  const index = callbacks.indexOf(cb);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n  }\n}\n\nexport function withUntypedGlobal<OwnProps extends AnyLiteral>(\n  mapStateToProps: MapStateToProps<OwnProps> = () => ({}),\n  activationFn?: ActivationFn<OwnProps>,\n) {\n  return (Component: FC) => {\n    function TeactNContainer(props: OwnProps) {\n      const id = useUniqueId();\n      const forceUpdate = useForceUpdate();\n\n      useUnmountCleanup(() => {\n        containers.delete(id);\n      });\n\n      let container = containers.get(id)!;\n      if (!container) {\n        container = {\n          mapStateToProps,\n          activationFn,\n          ownProps: props,\n          forceUpdate,\n          DEBUG_updates: 0,\n          DEBUG_componentName: Component.name,\n        };\n\n        containers.set(id, container);\n      }\n\n      if (\n        (!container.mappedProps || !arePropsShallowEqual(container.ownProps, props))\n        && activateContainer(container, currentGlobal, props)\n      ) {\n        try {\n          container.mappedProps = mapStateToProps(currentGlobal, props);\n        } catch (err: any) {\n          handleError(err);\n        }\n      }\n\n      container.ownProps = props;\n\n      return <Component {...container.mappedProps} {...props} />;\n    }\n\n    (TeactNContainer as FC_withDebug).DEBUG_contentComponentName = DEBUG_resolveComponentName(Component);\n\n    return TeactNContainer;\n  };\n}\n\nfunction activateContainer(container: Container, global: GlobalState, props: Props) {\n  const { activationFn, stuckTo } = container;\n  if (!activationFn) {\n    return true;\n  }\n\n  return activationFn(global, props, (stickTo: any) => {\n    if (stuckTo) {\n      return stuckTo === stickTo;\n    } else if (stickTo !== undefined) {\n      container.stuckTo = stickTo;\n    }\n\n    return true;\n  });\n}\n\nexport function typify<\n  ProjectGlobalState,\n  ActionPayloads,\n>() {\n  type ProjectActionNames = keyof ActionPayloads;\n\n  // When payload is allowed to be `undefined` we consider it optional\n  type ProjectActions = {\n    [ActionName in ProjectActionNames]:\n    (undefined extends ActionPayloads[ActionName] ? (\n      (payload?: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ) : (\n      (payload: ActionPayloads[ActionName], options?: ActionOptions) => void\n    ))\n  };\n\n  type ActionHandlers = {\n    [ActionName in keyof ActionPayloads]: (\n      global: ProjectGlobalState,\n      actions: ProjectActions,\n      payload: ActionPayloads[ActionName],\n    ) => ProjectGlobalState | void | Promise<void>;\n  };\n\n  return {\n    getGlobal: getUntypedGlobal as <T extends ProjectGlobalState>() => T,\n    setGlobal: setUntypedGlobal as (state: ProjectGlobalState, options?: ActionOptions) => void,\n    getActions: getUntypedActions as () => ProjectActions,\n    addActionHandler: addUntypedActionHandler as <ActionName extends ProjectActionNames>(\n      name: ActionName,\n      handler: ActionHandlers[ActionName],\n    ) => void,\n    withGlobal: withUntypedGlobal as <OwnProps extends AnyLiteral>(\n      mapStateToProps: (global: ProjectGlobalState, ownProps: OwnProps) => AnyLiteral,\n      activationFn?: (global: ProjectGlobalState, ownProps: OwnProps, stickToFirst: StickToFirstFn) => boolean,\n    ) => (Component: FC) => FC<OwnProps>,\n  };\n}\n\nif (DEBUG) {\n  (window as any).getGlobal = getUntypedGlobal;\n  (window as any).setGlobal = setUntypedGlobal;\n  (window as any).getActions = getUntypedActions;\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn(\n      'GLOBAL CONTAINERS',\n      orderBy(\n        Array.from(containers.values())\n          .map(({ DEBUG_componentName, DEBUG_updates }) => ({ DEBUG_componentName, DEBUG_updates })),\n        'DEBUG_updates',\n        'desc',\n      ),\n    );\n  });\n}\n","import { typify } from '../lib/teact/teactn';\n\nimport type { ActionPayloads, GlobalState } from './types';\n\nconst typed = typify<GlobalState, ActionPayloads>();\n\nexport const getGlobal = typed.getGlobal;\nexport const setGlobal = typed.setGlobal;\nexport const getActions = typed.getActions;\nexport const addActionHandler = typed.addActionHandler;\nexport const withGlobal = typed.withGlobal;\n","export default function isEmptyObject(obj: object) {\n  return !isKeyCountGreater(obj, 0);\n}\n\nexport function isKeyCountGreater(obj: object, countToOutnumber: number) {\n  if (countToOutnumber < 0) return true;\n  let keyCount = 0;\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      keyCount++;\n      if (keyCount > countToOutnumber) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n","import type { AccountType } from '../global/types';\n\nimport { DEBUG_VIEW_ACCOUNTS } from '../config';\n\nexport default function isViewAccount(accountType?: AccountType) {\n  return !DEBUG_VIEW_ACCOUNTS && accountType === 'view';\n}\n","import { areSortedArraysEqual } from './iteratees';\n\nconst cache = new WeakMap<AnyFunction, {\n  lastArgs: any[];\n  lastResult: any;\n  lastTime: number;\n  isDisabledUntil?: number;\n}>();\n\nexport default function memoize<F extends AnyFunction>(fn: F, ttlSeconds?: number) {\n  const wrapper = (...args: Parameters<F>): ReturnType<F> => {\n    const cached = cache.get(fn);\n    const now = Date.now();\n\n    if (cached) {\n      const isCacheDisabled = cached.isDisabledUntil && cached.isDisabledUntil > now;\n      const isStale = ttlSeconds && cached.lastTime + (ttlSeconds * 1000) < now;\n\n      if (!isCacheDisabled && !isStale && areSortedArraysEqual(cached.lastArgs, args)) {\n        return cached.lastResult;\n      }\n    }\n\n    const result = fn(...args);\n    cache.set(fn, {\n      ...cached,\n      lastArgs: args,\n      lastResult: result,\n      lastTime: now,\n    });\n    return result;\n  };\n\n  wrapper.disableCache = (seconds: number) => {\n    const cached = cache.get(fn);\n    if (cached) {\n      cached.isDisabledUntil = Date.now() + (seconds * 1000);\n    }\n  };\n\n  return wrapper;\n}\n","import type { ApiChain, ApiNetwork } from '../../api/types';\nimport type {\n  Account, AccountSettings, AccountState, GlobalState, UserToken,\n} from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\nimport isViewAccount from '../../util/isViewAccount';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\n\nexport function selectIsNewWallet(global: GlobalState, isFirstTransactionsLoaded: boolean) {\n  const { activities } = selectCurrentAccountState(global) ?? {};\n\n  if (activities?.idsMain?.length) {\n    return false;\n  }\n\n  return isFirstTransactionsLoaded;\n}\n\nexport function selectAccounts(global: GlobalState) {\n  return global.accounts?.byId;\n}\n\nexport const selectNetworkAccountsMemoized = memoize((network: ApiNetwork, accountsById?: Record<string, Account>) => {\n  if (!accountsById) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    Object.entries(accountsById).filter(([accountId]) => parseAccountId(accountId).network === network),\n  );\n});\n\nexport function selectNetworkAccounts(global: GlobalState) {\n  return selectNetworkAccountsMemoized(selectCurrentNetwork(global), global.accounts?.byId);\n}\n\nexport function selectCurrentNetwork(global: GlobalState) {\n  return global.settings.isTestnet ? 'testnet' : 'mainnet';\n}\n\nexport function selectCurrentAccount(global: GlobalState) {\n  return selectAccount(global, global.currentAccountId!);\n}\n\nexport function selectAccount(global: GlobalState, accountId: string) {\n  return selectAccounts(global)?.[accountId];\n}\n\nexport function selectCurrentAccountState(global: GlobalState) {\n  return selectAccountState(global, global.currentAccountId!);\n}\n\nexport function selectAccountState(global: GlobalState, accountId: string): AccountState | undefined {\n  return global.byAccountId[accountId];\n}\n\nexport function selectAccountSettings(global: GlobalState, accountId: string): AccountSettings | undefined {\n  return global.settings.byAccountId[accountId];\n}\n\nexport function selectCurrentAccountSettings(global: GlobalState) {\n  return selectAccountSettings(global, global.currentAccountId!);\n}\n\nfunction isHardwareAccount(account: Account) {\n  return account.type === 'hardware';\n}\n\nexport function selectIsHardwareAccount(global: GlobalState) {\n  const account = selectCurrentAccount(global);\n  return Boolean(account) && isHardwareAccount(account);\n}\n\nexport function selectAllHardwareAccounts(global: GlobalState, network: ApiNetwork) {\n  const accounts = selectAccounts(global);\n\n  return Object.entries(accounts ?? {}).reduce<Account[]>((accounts, [accountId, account]) => {\n    if (isHardwareAccount(account) && parseAccountId(accountId).network === network) {\n      accounts.push(account);\n    }\n    return accounts;\n  }, []);\n}\n\nexport function selectIsOneAccount(global: GlobalState) {\n  return Object.keys(selectAccounts(global) || {}).length === 1;\n}\n\nexport const selectEnabledTokensCountMemoizedFor = withCache((accountId: string) => memoize((tokens?: UserToken[]) => {\n  return (tokens ?? []).filter(({ isDisabled }) => !isDisabled).length;\n}));\n\nexport function selectLedgerAccountIndexToImport(global: GlobalState, network: ApiNetwork) {\n  const hardwareAccounts = selectAllHardwareAccounts(global, network);\n  const hardwareAccountIndexes = hardwareAccounts?.map((account) => account.ledger!.index)\n    .sort((a, b) => a - b);\n\n  if (hardwareAccountIndexes.length === 0 || hardwareAccountIndexes[0] !== 0) {\n    return -1;\n  }\n\n  if (hardwareAccountIndexes.length === 1) {\n    return 0;\n  }\n\n  for (let i = 1; i < hardwareAccountIndexes.length; i++) {\n    if (hardwareAccountIndexes[i] - hardwareAccountIndexes[i - 1] !== 1) {\n      return i - 1;\n    }\n  }\n\n  return hardwareAccountIndexes.length - 1;\n}\n\nfunction isMnemonicAccount(account: Account) {\n  return account.type === 'mnemonic';\n}\n\nexport function selectIsMnemonicAccount(global: GlobalState) {\n  const account = selectCurrentAccount(global);\n  return Boolean(account) && isMnemonicAccount(account);\n}\n\nconst selectIsPasswordPresentMemoized = memoize((accounts: Record<string, Account> | undefined) => {\n  return Object.values(accounts ?? {}).some(isMnemonicAccount);\n});\n\nexport function selectIsPasswordPresent(global: GlobalState) {\n  return selectIsPasswordPresentMemoized(selectAccounts(global));\n}\n\nexport function selectAccountIdByAddress(\n  global: GlobalState,\n  chain: ApiChain,\n  address: string,\n): string | undefined {\n  const accounts = selectAccounts(global);\n\n  if (!accounts) return undefined;\n\n  const requiredAccount = Object.entries(accounts)\n    .find(([accountId, account]) => (account.addressByChain[chain] === address ? accountId : undefined));\n\n  return requiredAccount?.[0];\n}\n\n// Slow, not to be used in `withGlobal`\nexport function selectVestingPartsReadyToUnfreeze(global: GlobalState, accountId: string) {\n  const vesting = selectAccountState(global, accountId)?.vesting?.info || [];\n\n  return vesting.reduce((acc, currentVesting) => {\n    currentVesting.parts.forEach((part) => {\n      if (part.status === 'ready') {\n        acc.push({\n          id: currentVesting.id,\n          partId: part.id,\n        });\n      }\n    });\n\n    return acc;\n  }, [] as { id: number; partId: number }[]);\n}\n\nexport function selectCurrentAccountNftByAddress(global: GlobalState, nftAddress: string) {\n  return selectAccountNftByAddress(global, global.currentAccountId!, nftAddress);\n}\n\nexport function selectAccountNftByAddress(global: GlobalState, accountId: string, nftAddress: string) {\n  return selectAccountState(global, accountId)?.nfts?.byAddress?.[nftAddress];\n}\n\nexport function selectIsMultichainAccount(global: GlobalState, accountId: string) {\n  const addressByChain = selectAccount(global, accountId)?.addressByChain;\n  return Boolean(addressByChain) && isKeyCountGreater(addressByChain, 1);\n}\n\nexport function selectHasSession(global: GlobalState) {\n  return Boolean(global.currentAccountId);\n}\n\nexport function selectIsBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind !== 'password';\n}\n\nexport function selectIsNativeBiometricAuthEnabled(global: GlobalState) {\n  const { authConfig } = global.settings;\n\n  return !!authConfig && authConfig.kind === 'native-biometrics';\n}\n\nexport function selectIsCurrentAccountViewMode(global: GlobalState) {\n  const { type } = selectCurrentAccount(global) || {};\n\n  return isViewAccount(type);\n}\n\nexport function selectDoesAccountSupportNft(global: GlobalState) {\n  const account = selectCurrentAccount(global);\n  return Boolean(account?.addressByChain.ton);\n}\n","import type {\n  ApiAccountWithTon,\n  ApiNftTransferPayload,\n  ApiParsedPayload,\n  ApiTokensTransferNonStandardPayload,\n  ApiTokensTransferPayload,\n} from '../../api/types';\n\nimport { DEFAULT_MAX_MESSAGES, LEDGER_MAX_MESSAGES, W5_MAX_MESSAGES } from '../../api/chains/ton/constants';\n\nexport function isNftTransferPayload(payload: ApiParsedPayload | undefined): payload is ApiNftTransferPayload {\n  return payload?.type === 'nft:transfer';\n}\n\nexport function isTokenTransferPayload(\n  payload: ApiParsedPayload | undefined,\n): payload is ApiTokensTransferPayload | ApiTokensTransferNonStandardPayload {\n  return payload?.type === 'tokens:transfer' || payload?.type === 'tokens:transfer-non-standard';\n}\n\n/** How many messages can be sent in a single transaction */\nexport function getMaxMessagesInTransaction(account: ApiAccountWithTon) {\n  const { type, ton: { version } } = account;\n\n  if (type === 'ledger') {\n    return LEDGER_MAX_MESSAGES;\n  } else if (version === 'W5') {\n    return W5_MAX_MESSAGES;\n  } else {\n    return DEFAULT_MAX_MESSAGES;\n  }\n}\n","import type { ApiDappTransfer, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { STON_PTON_SLUG, TONCOIN } from '../../config';\nimport memoize from '../../util/memoize';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { selectCurrentAccountState } from './accounts';\n\nconst selectCurrentDappTransferTotalsMemoized = memoize((\n  transactions: ApiDappTransfer[] | undefined,\n) => {\n  const amountsBySlug: Record<string, bigint> = {};\n  const addSlugAmount = (tokenSlug: string, amount: bigint) => {\n    amountsBySlug[tokenSlug] = (amountsBySlug[tokenSlug] ?? 0n) + amount;\n  };\n\n  let isScam = false;\n  let isDangerous = false;\n  let nftCount = 0;\n\n  for (const transaction of transactions ?? []) {\n    if (transaction.isScam) isScam = true;\n    if (transaction.isDangerous) isDangerous = true;\n\n    addSlugAmount(TONCOIN.slug, transaction.amount + transaction.networkFee);\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      addSlugAmount(transaction.payload.slug, transaction.payload.amount);\n    } else if (isNftTransferPayload(transaction.payload)) {\n      nftCount++;\n    }\n  }\n\n  return {\n    amountsBySlug,\n    isScam,\n    isDangerous,\n    nftCount,\n  };\n});\n\nconst selectDappTransferInsufficientTokensMemoized = memoize((\n  amountsBySlug: Record<string, bigint>,\n  balances: Record<string, bigint> | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice> | undefined,\n): string | undefined => {\n  if (!balances || !tokensBySlug) {\n    return undefined;\n  }\n\n  const insufficientTokens: string[] = [];\n\n  for (const [slug, requiredAmount] of Object.entries(amountsBySlug)) {\n    const token = tokensBySlug[slug];\n\n    const balanceSlug = slug === STON_PTON_SLUG ? TONCOIN.slug : slug;\n    const availableBalance = balances[balanceSlug] ?? 0n;\n\n    if (availableBalance < requiredAmount) {\n      const symbol = slug === STON_PTON_SLUG ? TONCOIN.symbol : (token?.symbol || slug);\n      insufficientTokens.push(symbol);\n    }\n  }\n\n  return insufficientTokens.length > 0 ? insufficientTokens.join(', ') : undefined;\n});\n\nexport function selectCurrentDappTransferTotals(global: GlobalState) {\n  const { transactions } = global.currentDappTransfer;\n  return selectCurrentDappTransferTotalsMemoized(transactions);\n}\n\nexport function selectDappTransferInsufficientTokens(global: GlobalState): string | undefined {\n  const accountState = selectCurrentAccountState(global);\n  const balances = accountState?.balances?.bySlug;\n  const tokensBySlug = global.tokenInfo.bySlug;\n  const { amountsBySlug } = selectCurrentDappTransferTotals(global);\n\n  return selectDappTransferInsufficientTokensMemoized(amountsBySlug, balances, tokensBySlug);\n}\n","import type { RoundingMode } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function round(value: number | string, precision = 0, roundingMode: RoundingMode = Big.roundHalfUp) {\n  const bn = new Big(value);\n\n  return bn.round(precision, roundingMode).toNumber();\n}\n\nexport function floor(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundDown);\n}\n\nexport function ceil(value: number | string, precision = 0) {\n  return round(value, precision, Big.roundUp);\n}\n","import type { ApiBalanceBySlug, ApiChain } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserToken } from '../types';\n\nimport {\n  DEFAULT_ENABLED_TOKEN_COUNT,\n  DEFAULT_ENABLED_TOKEN_SLUGS,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  PRICELESS_TOKEN_HASHES,\n  PRIORITY_TOKEN_SLUGS,\n  TINY_TRANSFER_MAX_COST,\n  TONCOIN,\n} from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { round } from '../../util/round';\nimport withCache from '../../util/withCache';\nimport { selectAccountSettings, selectAccountState, selectCurrentAccountState } from './accounts';\n\nfunction getIsNewAccount(balancesBySlug: ApiBalanceBySlug, tokenInfo: GlobalState['tokenInfo']) {\n  return Object.keys(balancesBySlug).length === DEFAULT_ENABLED_TOKEN_COUNT && (\n    Object.entries(balancesBySlug).every(([slug, balance]) => {\n      const { decimals, priceUsd } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const hasCost = balanceBig.mul(priceUsd ?? 0).lt(TINY_TRANSFER_MAX_COST);\n\n      return hasCost;\n    })\n  );\n}\n\nexport const selectAccountTokensMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  accountSettings: AccountSettings = {},\n  isSortByValueEnabled: boolean = false,\n  areTokensWithNoCostHidden: boolean = false,\n) => {\n  const isNewAccount = getIsNewAccount(balancesBySlug, tokenInfo);\n\n  return Object\n    .entries(balancesBySlug)\n    .filter(([slug]) => (slug in tokenInfo.bySlug && !accountSettings.deletedSlugs?.includes(slug)))\n    .map(([slug, balance]) => {\n      const {\n        symbol, name, image, decimals, cmcSlug, color, chain, tokenAddress, codeHash,\n        type, price = 0, percentChange24h = 0, priceUsd,\n      } = tokenInfo.bySlug[slug];\n\n      const balanceBig = toBig(balance, decimals);\n      const totalValue = balanceBig.mul(price).round(decimals).toString();\n      const hasCost = balanceBig.mul(priceUsd ?? 0).gte(TINY_TRANSFER_MAX_COST);\n      const isPricelessTokenWithBalance = PRICELESS_TOKEN_HASHES.has(codeHash!) && balance > 0n;\n\n      const isEnabled = (\n        (isNewAccount && DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug))\n        || !areTokensWithNoCostHidden\n        || (areTokensWithNoCostHidden && hasCost)\n        || isPricelessTokenWithBalance\n        || accountSettings.alwaysShownSlugs?.includes(slug)\n      );\n\n      const isDisabled = !isEnabled || accountSettings.alwaysHiddenSlugs?.includes(slug);\n\n      return {\n        chain,\n        symbol,\n        slug,\n        amount: balance,\n        name,\n        image,\n        price,\n        priceUsd,\n        decimals,\n        change24h: round(percentChange24h / 100, 4),\n        isDisabled,\n        cmcSlug,\n        totalValue,\n        color,\n        tokenAddress,\n        codeHash,\n        type,\n      } satisfies UserToken as UserToken;\n    })\n    .sort((tokenA, tokenB) => {\n      if (isSortByValueEnabled || !accountSettings.orderedSlugs) {\n        const priorityA = PRIORITY_TOKEN_SLUGS.indexOf(tokenA.slug);\n        const priorityB = PRIORITY_TOKEN_SLUGS.indexOf(tokenB.slug);\n\n        // If both tokens are prioritized and their balances match\n        if (priorityA !== -1 && priorityB !== -1 && tokenA.totalValue === tokenB.totalValue) {\n          return priorityA - priorityB;\n        }\n\n        // If one token is prioritized and the other is not\n        if (priorityA !== -1 && priorityB === -1) return -1;\n        if (priorityB !== -1 && priorityA === -1) return 1;\n\n        return Number(tokenB.totalValue) - Number(tokenA.totalValue);\n      }\n\n      const indexA = accountSettings.orderedSlugs.indexOf(tokenA.slug);\n      const indexB = accountSettings.orderedSlugs.indexOf(tokenB.slug);\n      return indexA - indexB;\n    });\n}));\n\nexport function selectCurrentAccountTokens(global: GlobalState) {\n  return selectAccountTokens(global, global.currentAccountId!);\n}\n\nexport function selectCurrentAccountTokenBalance(global: GlobalState, slug: string) {\n  return selectCurrentAccountState(global)?.balances?.bySlug[slug] ?? 0n;\n}\n\nexport function selectCurrentToncoinBalance(global: GlobalState) {\n  return selectCurrentAccountTokenBalance(global, TONCOIN.slug);\n}\n\nexport function selectAccountTokens(global: GlobalState, accountId: string) {\n  const balancesBySlug = selectAccountState(global, accountId)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectAccountSettings(global, accountId);\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    global.tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectAccountTokenBySlug(global: GlobalState, slug: string) {\n  const accountTokens = selectCurrentAccountTokens(global);\n  return accountTokens?.find((token) => token.slug === slug);\n}\n\nexport function selectTokenAddress(global: GlobalState, slug: string) {\n  if (slug === TONCOIN.slug) return undefined;\n  return selectToken(global, slug).tokenAddress!;\n}\n\nexport function selectToken(global: GlobalState, slug: string) {\n  return global.tokenInfo.bySlug[slug];\n}\n\nexport function selectMycoin(global: GlobalState) {\n  const { isTestnet } = global.settings;\n  return selectToken(global, isTestnet ? MYCOIN_TESTNET.slug : MYCOIN.slug);\n}\n\nexport function selectTokenByMinterAddress(global: GlobalState, minter: string) {\n  return Object.values(global.tokenInfo.bySlug).find((token) => token.tokenAddress === minter);\n}\n\nexport function selectChainTokenWithMaxBalanceSlow(global: GlobalState, chain: ApiChain): UserToken | undefined {\n  return (selectCurrentAccountTokens(global) ?? [])\n    .filter((token) => token.chain === chain)\n    .reduce((maxToken, currentToken) => {\n      const currentBalance = currentToken.priceUsd * Number(currentToken.amount);\n      const maxBalance = maxToken ? maxToken.priceUsd * Number(maxToken.amount) : 0;\n\n      return currentBalance > maxBalance ? currentToken : maxToken;\n    });\n}\n","import type { ApiActivity } from '../api/types';\n\nimport { getIsActivityPending } from './activities';\n\nexport function compareActivities(a: ApiActivity, b: ApiActivity, isAsc = false) {\n  // The activity sorting is tuned to match the Toncenter API sorting as close as possible.\n  // Putting the pending activities first, because when they get confirmed, their timestamp gets bigger than any current\n  // confirmed activity timestamp. This reduces the movement in the activity list.\n  let value = (getIsActivityPending(a) ? 1 : 0) - (getIsActivityPending(b) ? 1 : 0);\n  if (value === 0) {\n    value = a.timestamp - b.timestamp;\n    if (value === 0) {\n      value = a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n    }\n  }\n  return isAsc ? value : -value;\n}\n","import type { ApiTransaction } from '../api/types';\n\nimport { TRANSACTION_ADDRESS_SHIFT } from '../config';\nimport { shortenAddress } from './shortenAddress';\n\nconst cache = new Map<string, {\n  timestamp: number;\n  amount: bigint;\n  address: string;\n}>();\n\nfunction getKey(address: string) {\n  return shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)!;\n}\n\nfunction addToCache(address: string, amount: bigint, timestamp: number) {\n  const key = getKey(address);\n\n  cache.set(key, {\n    address,\n    amount,\n    timestamp,\n  });\n}\n\nfunction getFromCache(address: string) {\n  const key = getKey(address);\n\n  return cache.get(key);\n}\n\nexport function updatePoisoningCache(tx: ApiTransaction) {\n  const { fromAddress: address, amount, timestamp } = tx;\n\n  const cached = getFromCache(address);\n\n  if (!cached || cached.timestamp < timestamp || (cached.timestamp === timestamp && cached.amount > amount)) {\n    addToCache(address, amount, timestamp);\n  }\n}\n\nexport function getIsTransactionWithPoisoning(tx: ApiTransaction) {\n  const { fromAddress: address } = tx;\n\n  const cached = getFromCache(address);\n\n  return cached && cached.address !== address;\n}\n\nexport function clearPoisoningCache() {\n  cache.clear();\n}\n","import type { ApiActivity, ApiTransaction, ApiTransactionActivity, ApiTransactionType } from '../../api/types';\nimport type { LangFn } from '../langProvider';\n\nimport { ALL_STAKING_POOLS, BURN_ADDRESS } from '../../config';\nimport { compareActivities } from '../compareActivities';\nimport { extractKey, groupBy, unique } from '../iteratees';\nimport { getIsTransactionWithPoisoning } from '../poisoningHash';\n\ntype UnusualTxType = 'backend-swap' | 'local' | 'additional';\n\ntype TranslationTenses = [past: string, present: string, future: string];\n\nconst TRANSACTION_TYPE_TITLES: Partial<Record<ApiTransactionType & keyof any, TranslationTenses>> = {\n  stake: ['Staked', 'Staking', '$stake_action'],\n  unstake: ['Unstaked', 'Unstaking', '$unstake_action'],\n  unstakeRequest: ['Unstake Requested', 'Requesting Unstake', '$request_unstake_action'],\n  callContract: ['Contract Called', 'Calling Contract', '$call_contract_action'],\n  excess: ['Excess', 'Excess', 'Excess'],\n  contractDeploy: ['Contract Deployed', 'Deploying Contract', '$deploy_contract_action'],\n  bounced: ['Bounced', 'Bouncing', '$bounce_action'],\n  mint: ['Minted', 'Minting', '$mint_action'],\n  burn: ['Burned', 'Burning', '$burn_action'],\n  auctionBid: ['NFT Auction Bid', 'Bidding at NFT Auction', 'NFT Auction Bid'],\n  dnsChangeAddress: ['Address Updated', 'Updating Address', '$update_address_action'],\n  dnsChangeSite: ['Site Updated', 'Updating Site', '$update_site_action'],\n  dnsChangeSubdomains: ['Subdomains Updated', 'Updating Subdomains', '$update_subdomains_action'],\n  dnsChangeStorage: ['Storage Updated', 'Updating Storage', '$update_storage_action'],\n  dnsDelete: ['Domain Record Deleted', 'Deleting Domain Record', '$delete_domain_record_action'],\n  dnsRenew: ['Domain Renewed', 'Renewing Domain', '$renew_domain_action'],\n  liquidityDeposit: ['Liquidity Provided', 'Providing Liquidity', '$provide_liquidity_action'],\n  liquidityWithdraw: ['Liquidity Withdrawn', 'Withdrawing Liquidity', '$withdraw_liquidity_action'],\n};\n\nexport const STAKING_TRANSACTION_TYPES = new Set<ApiTransactionType | undefined>([\n  'stake', 'unstake', 'unstakeRequest',\n]);\n\nexport const DNS_TRANSACTION_TYPES = new Set<ApiTransactionType | undefined>([\n  'dnsChangeAddress', 'dnsChangeSite', 'dnsChangeStorage', 'dnsChangeSubdomains', 'dnsDelete', 'dnsRenew',\n]);\n\nexport function parseTxId(txId: string): {\n  hash: string;\n  subId?: string;\n  type?: UnusualTxType;\n} {\n  const [hash, subId, type] = txId.split(':') as [string, string | undefined, UnusualTxType | undefined];\n  return { hash, type, subId };\n}\n\nexport function getIsTxIdLocal(txId: string) {\n  return txId.endsWith(':local');\n}\n\nexport function getIsBackendSwapId(id: string) {\n  return id.endsWith(':backend-swap');\n}\n\nexport function buildBackendSwapId(backendId: string) {\n  return buildTxId(backendId, undefined, 'backend-swap');\n}\n\nexport function buildLocalTxId(hash: string, subId?: number) {\n  return buildTxId(hash, subId, 'local');\n}\n\nexport function buildTxId(hash: string, subId?: number | string, type?: UnusualTxType) {\n  if (!type && subId === undefined) return hash;\n  if (type === undefined) return `${hash}:${subId}`;\n  return `${hash}:${subId ?? ''}:${type}`;\n}\n\nexport function getActivityTokenSlugs(activity: ApiActivity): string[] {\n  switch (activity.kind) {\n    case 'transaction': {\n      if (activity.nft) return []; // We don't want NFT activities to get into any token activity list\n      return [activity.slug];\n    }\n    case 'swap': {\n      return [activity.from, activity.to];\n    }\n  }\n}\n\nexport function getIsActivitySuitableForFetchingTimestamp(activity: ApiActivity | undefined) {\n  return !!activity\n    && !getIsTxIdLocal(activity.id)\n    && !getIsBackendSwapId(activity.id)\n    && !getIsActivityPending(activity);\n}\n\nexport function getTransactionTitle(\n  { type, isIncoming, nft }: ApiTransaction,\n  tense: 'past' | 'present' | 'future',\n  translate: LangFn,\n) {\n  const tenseIndex = tense === 'past' ? 0 : tense === 'present' ? 1 : 2;\n  let titles: TranslationTenses;\n\n  if (type === 'nftTrade') {\n    titles = isIncoming\n      ? ['NFT Sold', 'Selling NFT', '$sell_nft_action']\n      : ['NFT Bought', 'Buying NFT', '$buy_nft_action'];\n  } else if (type && TRANSACTION_TYPE_TITLES[type]) {\n    titles = TRANSACTION_TYPE_TITLES[type];\n  } else {\n    titles = isIncoming\n      ? ['Received', 'Receiving', '$receive_action']\n      : ['Sent', 'Sending', '$send_action'];\n  }\n\n  let title = translate(titles[tenseIndex]);\n\n  if (nft && (!type || type === 'mint' || type === 'burn')) {\n    title += ' NFT';\n  }\n\n  return title;\n}\n\nexport function isScamTransaction(transaction: ApiTransaction) {\n  return Boolean(transaction.metadata?.isScam)\n    || (transaction.isIncoming && getIsTransactionWithPoisoning(transaction));\n}\n\nexport function shouldShowTransactionComment(transaction: ApiTransaction) {\n  return Boolean(transaction.comment || transaction.encryptedComment)\n    && !STAKING_TRANSACTION_TYPES.has(transaction.type)\n    && !isScamTransaction(transaction);\n}\n\nexport function getTransactionAmountDisplayMode({ type, amount, nft }: ApiTransaction) {\n  const isPlainTransfer = type === undefined && !nft;\n  if (!amount && !isPlainTransfer) {\n    return 'hide';\n  }\n  return type === 'stake' || type === 'unstake'\n    ? 'noSign'\n    : 'normal';\n}\n\n/** Returns the UI sections where the address should be shown */\nexport function shouldShowTransactionAddress(transaction: ApiTransactionActivity): ('list' | 'modal')[] {\n  const { type, isIncoming, nft, toAddress, fromAddress, extra } = transaction;\n\n  if (type === 'nftTrade') {\n    return extra?.marketplace ? ['list'] : [];\n  }\n\n  const shouldHide = isOurStakingTransaction(transaction)\n    || type === 'burn'\n    || (!isIncoming && nft && toAddress === nft.address)\n    || (isIncoming && type === 'excess' && fromAddress === BURN_ADDRESS);\n\n  return shouldHide ? [] : ['list', 'modal'];\n}\n\n/** \"Our\" is staking that can be controlled with MyTonWallet app */\nexport function isOurStakingTransaction({ type, isIncoming, toAddress, fromAddress }: ApiTransaction) {\n  return STAKING_TRANSACTION_TYPES.has(type) && ALL_STAKING_POOLS.includes(isIncoming ? fromAddress : toAddress);\n}\n\nexport function shouldShowTransactionAnnualYield(transaction: ApiTransaction) {\n  return transaction.type === 'stake' && isOurStakingTransaction(transaction);\n}\n\nexport function mergeActivitiesToMaxTime(array1: ApiActivity[], array2: ApiActivity[]) {\n  if (!array1.length && !array2.length) {\n    return [];\n  } else if (!array1.length && array2.length) {\n    return array2;\n  } else if (!array2.length && array1.length) {\n    return array1;\n  }\n\n  const fromTimestamp = Math.max(\n    array1[array1.length - 1].timestamp,\n    array2[array2.length - 1].timestamp,\n  );\n\n  return [...array1, ...array2]\n    .filter(({ timestamp }) => timestamp >= fromTimestamp)\n    .sort(compareActivities);\n}\n\nexport function mergeActivityIdsToMaxTime(array1: string[], array2: string[], byId: Record<string, ApiActivity>) {\n  if (!array1.length && !array2.length) {\n    return [];\n  } else if (!array1.length && array2.length) {\n    return array2;\n  } else if (!array2.length && array1.length) {\n    return array1;\n  }\n\n  const fromTimestamp = Math.max(\n    byId[array1[array1.length - 1]].timestamp,\n    byId[array2[array2.length - 1]].timestamp,\n  );\n\n  return unique([...array1, ...array2])\n    .filter((id) => byId[id].timestamp >= fromTimestamp)\n    .sort((a, b) => compareActivities(byId[a], byId[b]));\n}\n\nexport function getIsActivityWithHash(activity: ApiTransactionActivity) {\n  return !getIsTxIdLocal(activity.id) || !activity.extra?.withW5Gasless;\n}\n\nexport function getIsActivityPending(activity: ApiActivity) {\n  if (activity.kind === 'swap') {\n    // \"Pending\" is a blockchain term.\n    // CEX activities are never considered pending, because they are originated by the backend instead of the blockchains.\n    return !activity.cex && activity.status === 'pending';\n  } else {\n    return !!activity.isPending;\n  }\n}\n\n/**\n * Sometimes activity ids change. This function finds the new id withing `nextActivities` for each activity in\n * `prevActivities`. Currently only local and pending activity ids change, so it's enough to provide only such\n * activities in `prevActivities`.\n *\n * The ids should be unique within each input array. The returned map has previous activity ids as keys and next\n * activity ids as values. If the map has no value for a previous id, it means that there is no matching next activity.\n * The values may be not unique.\n */\nexport function getActivityIdReplacements(prevActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  // Each previous activity must fall into either of the groups, otherwise the resulting map will falsely miss previous ids\n  const prevLocalActivities: ApiActivity[] = [];\n  const prevChainActivities: ApiActivity[] = [];\n\n  for (const activity of prevActivities) {\n    const group = getIsTxIdLocal(activity.id) ? prevLocalActivities : prevChainActivities;\n    group.push(activity);\n  }\n\n  return {\n    ...getLocalActivityIdReplacements(prevLocalActivities, nextActivities),\n    ...getChainActivityIdReplacements(prevChainActivities, nextActivities),\n  };\n}\n\n/** Replaces local activity ids. See `getActivityIdReplacements` for more details. */\nfunction getLocalActivityIdReplacements(prevLocalActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  const idReplacements: Record<string, string> = {};\n\n  if (!prevLocalActivities.length) {\n    return idReplacements;\n  }\n\n  const nextActivityIds = new Set(extractKey(nextActivities, 'id'));\n  const nextChainActivities = nextActivities.filter((activity) => !getIsTxIdLocal(activity.id));\n\n  for (const localActivity of prevLocalActivities) {\n    const { id: prevId } = localActivity;\n\n    // Try a direct id match\n    if (nextActivityIds.has(prevId)) {\n      idReplacements[prevId] = prevId;\n      continue;\n    }\n\n    // Otherwise, try to find a match by a heuristic\n    const chainActivity = nextChainActivities.find((chainActivity) => {\n      return doesLocalActivityMatch(localActivity, chainActivity);\n    });\n    if (chainActivity) {\n      idReplacements[prevId] = chainActivity.id;\n    }\n\n    // Otherwise, there is no match\n  }\n\n  return idReplacements;\n}\n\n/** Replaces chain (i.e. not local) activity ids. See `getActivityIdReplacements` for more details. */\nfunction getChainActivityIdReplacements(prevActivities: ApiActivity[], nextActivities: ApiActivity[]) {\n  const idReplacements: Record<string, string> = {};\n\n  if (!prevActivities.length) {\n    return idReplacements;\n  }\n\n  const nextActivityIds = new Set(extractKey(nextActivities, 'id'));\n  const nextActivitiesByMessageHash = groupBy(nextActivities, 'externalMsgHashNorm');\n\n  for (const { id: prevId, externalMsgHashNorm } of prevActivities) {\n    // Try a direct id match\n    if (nextActivityIds.has(prevId)) {\n      idReplacements[prevId] = prevId;\n      continue;\n    }\n\n    // Otherwise, match by the message hash\n    if (externalMsgHashNorm) {\n      const nextSubActivities = nextActivitiesByMessageHash[externalMsgHashNorm];\n      if (nextSubActivities?.length) {\n        idReplacements[prevId] = nextSubActivities[0].id;\n\n        // Leaving 1 activity in each group to ensure there is a match for the further prev activities with the same hash\n        if (nextSubActivities.length > 1) {\n          nextSubActivities.shift();\n        }\n      }\n    }\n\n    // Otherwise, there is no match\n  }\n\n  return idReplacements;\n}\n\n/** Decides whether the local activity matches the activity from the blockchain */\nexport function doesLocalActivityMatch(localActivity: ApiActivity, chainActivity: ApiActivity) {\n  if (localActivity.extra?.withW5Gasless) {\n    if (localActivity.kind === 'transaction' && chainActivity.kind === 'transaction') {\n      return !chainActivity.isIncoming && localActivity.normalizedAddress === chainActivity.normalizedAddress\n        && localActivity.amount === chainActivity.amount\n        && localActivity.slug === chainActivity.slug;\n    } else if (localActivity.kind === 'swap' && chainActivity.kind === 'swap') {\n      return localActivity.from === chainActivity.from\n        && localActivity.to === chainActivity.to\n        && localActivity.fromAmount === chainActivity.fromAmount;\n    }\n  }\n\n  if (localActivity.externalMsgHashNorm) {\n    return localActivity.externalMsgHashNorm === chainActivity.externalMsgHashNorm && !chainActivity.shouldHide;\n  }\n\n  return parseTxId(localActivity.id).hash === parseTxId(chainActivity.id).hash;\n}\n","import type { ApiActivity, ApiActivityTimestamps, ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { getIsActivitySuitableForFetchingTimestamp, getIsTxIdLocal } from '../../util/activities';\nimport { compact, findLast, mapValues } from '../../util/iteratees';\nimport { selectAccount, selectAccountState } from './accounts';\n\nexport function selectNewestActivityTimestamps(global: GlobalState, accountId: string): ApiActivityTimestamps {\n  return mapValues(\n    selectAccountState(global, accountId)?.activities?.newestActivitiesBySlug || {},\n    ({ timestamp }) => timestamp,\n  );\n}\n\nexport function selectLastMainTxTimestamp(global: GlobalState, accountId: string): number | undefined {\n  const activities = selectAccountState(global, accountId)?.activities;\n  if (!activities) return undefined;\n\n  const { byId, idsMain = [] } = activities;\n  const txId = findLast(idsMain, (id) => getIsActivitySuitableForFetchingTimestamp(byId[id]));\n  if (!txId) return undefined;\n\n  return byId[txId].timestamp;\n}\n\nexport function selectAccountTxTokenSlugs(global: GlobalState, accountId: string, chain: ApiChain) {\n  const idsBySlug = selectAccountState(global, accountId)?.activities?.idsBySlug;\n  if (!idsBySlug) return undefined;\n\n  return Object.keys(idsBySlug).filter((slug) => slug.startsWith(`${chain}-`));\n}\n\nexport function selectLocalActivitiesSlow(global: GlobalState, accountId: string) {\n  const { byId = {}, localActivityIds = [] } = global.byAccountId[accountId]?.activities ?? {};\n\n  return compact(localActivityIds.map((id) => byId[id]));\n}\n\n/** Doesn't include local activities */\nexport function selectPendingActivitiesSlow(global: GlobalState, accountId: string, chain: ApiChain) {\n  const { byId = {}, pendingActivityIds = {} } = global.byAccountId[accountId]?.activities ?? {};\n  const ids = pendingActivityIds[chain] ?? [];\n\n  return compact(ids.map((id) => byId[id]));\n}\n\nexport function selectRecentNonLocalActivitiesSlow(global: GlobalState, accountId: string, maxCount: number) {\n  const { byId = {}, idsMain = [] } = global.byAccountId[accountId]?.activities ?? {};\n  const result: ApiActivity[] = [];\n\n  for (const id of idsMain) {\n    if (result.length >= maxCount) {\n      break;\n    }\n    if (getIsTxIdLocal(id)) {\n      continue;\n    }\n    const activity = byId[id];\n    if (activity) {\n      result.push(activity);\n    }\n  }\n\n  return result;\n}\n\nexport function selectIsFirstTransactionsLoaded(global: GlobalState, accountId: string) {\n  const { isFirstTransactionsLoaded } = selectAccountState(global, accountId)?.activities ?? {};\n  const { addressByChain } = selectAccount(global, accountId) ?? {};\n\n  if (!isFirstTransactionsLoaded || !addressByChain) {\n    return false;\n  }\n\n  return Object.keys(addressByChain).every((chain) => isFirstTransactionsLoaded[chain as ApiChain]);\n}\n","import type { SignDataPayload } from '@tonconnect/protocol';\nimport type { TeactNode } from '../lib/teact/teact';\n\nimport type { ApiFetchEstimateDieselResult, ApiTonWalletVersion } from '../api/chains/ton/types';\nimport type { ApiTonConnectProof } from '../api/tonConnect/types';\nimport type {\n  ApiAccountConfig,\n  ApiActivity,\n  ApiAnyDisplayError,\n  ApiBalanceBySlug,\n  ApiBaseCurrency,\n  ApiChain,\n  ApiCountryCode,\n  ApiDapp,\n  ApiDappPermissions,\n  ApiDappTransfer,\n  ApiEmulationResult,\n  ApiHistoryList,\n  ApiImportAddressByChain,\n  ApiLedgerDriver,\n  ApiMtwCardType,\n  ApiNetwork,\n  ApiNft,\n  ApiNotificationsAccountValue,\n  ApiParsedPayload,\n  ApiPriceHistoryPeriod,\n  ApiSignedTransfer,\n  ApiSite,\n  ApiSiteCategory,\n  ApiStakingHistory,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiSwapDexLabel,\n  ApiSwapEstimateVariant,\n  ApiTokenType,\n  ApiTokenWithPrice,\n  ApiUpdate,\n  ApiUpdateDappCloseLoading,\n  ApiUpdateDappConnect,\n  ApiUpdateDappLoading,\n  ApiUpdateDappSendTransactions,\n  ApiUpdateDappSignData,\n  ApiUpdateWalletVersions,\n  ApiVestingInfo,\n  ApiWalletWithVersionInfo,\n} from '../api/types';\nimport type { AUTOLOCK_OPTIONS_LIST } from '../config';\nimport type { AuthConfig } from '../util/authApi/types';\nimport type { CapacitorPlatform } from '../util/capacitor/platform';\nimport type { LedgerTransport, LedgerWalletInfo } from '../util/ledger/types';\n\nexport type IAnchorPosition = {\n  x: number;\n  y: number;\n};\n\nexport type AnimationLevel = 0 | 1 | 2;\nexport type Theme = 'light' | 'dark' | 'system';\nexport type AppTheme = 'dark' | 'light';\nexport type AppLayout = 'portrait' | 'landscape';\n\nexport type NotificationType = {\n  icon?: string;\n  message: string;\n};\nexport type DialogType = {\n  title?: string;\n  message: string | TeactNode;\n  entities?: Record<string, any>;\n  noBackdropClose?: boolean;\n  isInAppLock?: boolean;\n  footerButtons?: TeactNode[];\n};\n\nexport type LangCode = 'en' | 'es' | 'ru' | 'zh-Hant' | 'zh-Hans' | 'tr' | 'de' | 'th' | 'uk' | 'pl';\n\nexport interface LangItem {\n  langCode: LangCode;\n  name: string;\n  nativeName: string;\n  rtl: boolean;\n}\n\nexport interface LangString {\n  zeroValue?: string;\n  oneValue?: string;\n  twoValue?: string;\n  fewValue?: string;\n  manyValue?: string;\n  otherValue?: string;\n}\n\nexport type LangPack = Record<string, string | LangString>;\n\nexport type StakingStatus = 'active' | 'unstakeRequested';\n\nexport type AuthMethod = 'createAccount' | 'importMnemonic' | 'importHardwareWallet';\n\ninterface AuthAccount {\n  accountId: string;\n  addressByChain: Partial<Record<ApiChain, string>>;\n  network?: ApiNetwork;\n}\n\ntype SignOutLevel = 'account' | 'network' | 'all';\n\nexport enum AppState {\n  Auth,\n  Main,\n  Explore,\n  Settings,\n  Ledger,\n  Inactive,\n}\n\nexport enum AuthState {\n  none,\n  createWallet,\n  checkPassword,\n  createPin,\n  confirmPin,\n  createBiometrics,\n  confirmBiometrics,\n  createNativeBiometrics,\n  createPassword,\n  createBackup,\n  disclaimerAndBackup,\n  importWalletCheckPassword,\n  importWallet,\n  importWalletCreatePin,\n  importWalletConfirmPin,\n  importWalletCreateNativeBiometrics,\n  importWalletCreateBiometrics,\n  importWalletConfirmBiometrics,\n  importWalletCreatePassword,\n  disclaimer,\n  ready,\n  about,\n  safetyRules,\n  mnemonicPage,\n  checkWords,\n  importViewAccount,\n}\n\nexport enum BiometricsState {\n  None,\n  TurnOnPasswordConfirmation,\n  TurnOnRegistration,\n  TurnOnVerification,\n  TurnOnComplete,\n  TurnOffWarning,\n  TurnOffBiometricConfirmation,\n  TurnOffCreatePassword,\n  TurnOffComplete,\n}\n\nexport enum TransferState {\n  None,\n  WarningHardware,\n  Initial,\n  Confirm,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum SignDataState {\n  None,\n  Initial,\n  Password,\n  Complete,\n}\n\nexport enum DomainRenewalState {\n  None,\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum DomainLinkingState {\n  None,\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Complete,\n}\n\nexport enum SwapState {\n  None,\n  Initial,\n  Blockchain,\n  Password,\n  WaitTokens,\n  Complete,\n  SelectTokenFrom,\n  SelectTokenTo,\n}\n\nexport enum SwapInputSource {\n  In,\n  Out,\n}\n\nexport enum SwapErrorType {\n  UnexpectedError,\n  InvalidPair,\n  NotEnoughLiquidity,\n\n  ChangellyMinSwap,\n  ChangellyMaxSwap,\n  NotEnoughForFee,\n  TooSmallAmount,\n}\n\nexport enum SwapType {\n  OnChain,\n  CrosschainFromWallet,\n  CrosschainToWallet,\n}\n\nexport enum DappConnectState {\n  Info,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum HardwareConnectState {\n  Connect,\n  Connecting,\n  Failed,\n  ConnectedWithSeveralWallets,\n  ConnectedWithSingleWallet,\n  WaitingForRemoteTab,\n}\n\nexport enum StakingState {\n  None,\n\n  StakeInitial,\n  StakePassword,\n  StakeConnectHardware,\n  StakeConfirmHardware,\n  StakeComplete,\n\n  UnstakeInitial,\n  UnstakePassword,\n  UnstakeConnectHardware,\n  UnstakeConfirmHardware,\n  UnstakeComplete,\n\n  ClaimPassword,\n  ClaimConnectHardware,\n  ClaimConfirmHardware,\n  ClaimComplete,\n}\n\nexport enum VestingUnfreezeState {\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n}\n\nexport enum SettingsState {\n  Initial,\n  PushNotifications,\n  Appearance,\n  Assets,\n  Security,\n  Dapps,\n  Language,\n  About,\n  Disclaimer,\n  NativeBiometricsTurnOn,\n  SelectTokenList,\n  WalletVersion,\n  LedgerConnectHardware,\n  LedgerSelectWallets,\n  HiddenNfts,\n  BackupWallet,\n}\n\nexport enum MintCardState {\n  Initial,\n  Password,\n  ConnectHardware,\n  ConfirmHardware,\n  Done,\n}\n\nexport enum ActiveTab {\n  Receive,\n  Transfer,\n  Swap,\n  Stake,\n}\n\nexport enum ContentTab {\n  Assets,\n  Activity,\n  Explore,\n  Nft,\n}\n\nexport enum MediaType {\n  Nft,\n}\n\nexport type UserToken = {\n  amount: bigint;\n  name: string;\n  symbol: string;\n  image?: string;\n  slug: string;\n  price: number;\n  priceUsd: number;\n  decimals: number;\n  change24h: number;\n  chain: ApiChain;\n  tokenAddress?: string;\n  isDisabled?: boolean;\n  canSwap?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  totalValue: string;\n  type?: ApiTokenType;\n  color?: string;\n  codeHash?: string;\n};\n\nexport type UserSwapToken = Omit<UserToken, 'change24h' | 'chain'> & {\n  chain: ApiChain | (string & {});\n  isPopular: boolean;\n};\n\nexport type TokenPeriod = '1D' | '7D' | '1M' | '3M' | '1Y' | 'ALL';\n\nexport type PriceHistoryPeriods = Partial<Record<ApiPriceHistoryPeriod, ApiHistoryList>>;\n\nexport type DieselStatus = 'not-available' | 'not-authorized' | 'pending-previous' | 'available' | 'stars-fee';\n\nexport type AccountType = 'mnemonic' | 'hardware' | 'view';\n\nexport interface Account {\n  title?: string;\n  type: AccountType;\n  addressByChain: Partial<Record<ApiChain, string>>;\n  domainByChain?: Partial<Record<ApiChain, string>>;\n  importedAt?: number;\n  ledger?: {\n    index: number;\n    driver: ApiLedgerDriver;\n  };\n}\n\nexport type AssetPairs = Record<string, {\n  isReverseProhibited?: boolean;\n  isMultichain?: boolean;\n}>;\n\nexport interface AccountState {\n  balances?: {\n    bySlug: ApiBalanceBySlug;\n  };\n  activities?: {\n    isLoading?: boolean;\n    byId: Record<string, ApiActivity>;\n    /** The array values are sorted by the activity type (newest to oldest) */\n    idsBySlug?: Record<string, string[]>;\n    /** The array values are sorted by the activity type (newest to oldest) */\n    idsMain?: string[];\n    newestActivitiesBySlug?: Record<string, ApiActivity>;\n    isMainHistoryEndReached?: boolean;\n    isHistoryEndReachedBySlug?: Record<string, boolean>;\n    localActivityIds?: string[];\n    /** Doesn't include the local activities */\n    pendingActivityIds?: Partial<Record<ApiChain, string[]>>;\n    isFirstTransactionsLoaded?: Partial<Record<ApiChain, boolean>>;\n  };\n  nfts?: {\n    byAddress?: Record<string, ApiNft>;\n    orderedAddresses?: string[];\n    currentCollectionAddress?: string;\n    selectedAddresses?: string[];\n    dnsExpiration?: Record<string, number>;\n    linkedAddressByAddress?: Record<string, string>;\n    collectionTabs?: string[];\n    wasTelegramGiftsAutoAdded?: boolean;\n  };\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  isUnhideNftModalOpen?: boolean;\n  selectedNftToUnhide?: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  currentNftForAttributes?: ApiNft;\n  dappLastOpenedDatesByUrl?: Record<string, number>;\n  isBackupRequired?: boolean;\n  currentTokenSlug?: string;\n  currentActivityId?: string;\n  currentTokenPeriod?: TokenPeriod;\n  savedAddresses?: SavedAddress[];\n  activeContentTab?: ContentTab;\n  landscapeActionsActiveTabIndex?: ActiveTab;\n  activitiesUpdateStartedAt?: number;\n  balanceUpdateStartedAt?: number;\n\n  // Staking\n  staking?: {\n    stakingId?: string;\n    stateById?: Record<string, ApiStakingState>;\n    totalProfit?: bigint;\n    shouldUseNominators?: boolean;\n  };\n\n  vesting?: {\n    info: ApiVestingInfo[];\n    isLoading?: boolean;\n    isConfirmRequested?: boolean;\n    error?: string;\n    unfreezeRequestedIds?: { id: number; partId: number }[];\n    unfreezeState?: VestingUnfreezeState;\n  };\n\n  stakingHistory?: ApiStakingHistory;\n  browserHistory?: string[];\n\n  isDieselAuthorizationStarted?: boolean;\n  isLongUnstakeRequested?: boolean;\n  isCardMinting?: boolean;\n  receiveModalChain?: ApiChain;\n  invoiceTokenSlug?: string;\n\n  dapps?: ApiDapp[];\n  currentSiteCategoryId?: number;\n\n  config?: ApiAccountConfig;\n}\n\nexport interface AccountSettings {\n  orderedSlugs?: string[];\n  alwaysShownSlugs?: string[];\n  alwaysHiddenSlugs?: string[];\n  deletedSlugs?: string[];\n  importedSlugs?: string[];\n  // These NFTs should be saved in the settings for immediate use after launching the application,\n  // without synchronizing the wallet history or complex state caching\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  accentColorIndex?: number;\n}\n\nexport interface SavedAddress {\n  name: string;\n  address: string;\n  chain: ApiChain;\n}\n\nexport interface NftTransfer {\n  name?: string;\n  address: string;\n  thumbnail: string;\n  collectionName?: string;\n}\n\nexport type GlobalState = {\n  DEBUG_randomId?: number;\n\n  appState: AppState;\n\n  auth: {\n    state: AuthState;\n    biometricsStep?: 1 | 2;\n    method?: AuthMethod;\n    isLoading?: boolean;\n    mnemonic?: string[];\n    mnemonicCheckIndexes?: number[];\n    hardwareSelectedIndices?: number[];\n    error?: string;\n    password?: string;\n    isImportModalOpen?: boolean;\n    firstNetworkAccount?: AuthAccount;\n    secondNetworkAccount?: AuthAccount;\n    forceAddingTonOnlyAccount?: boolean;\n  };\n\n  biometrics: {\n    state: BiometricsState;\n    error?: string;\n    password?: string;\n  };\n\n  nativeBiometricsError?: string;\n\n  hardware: {\n    hardwareState: HardwareConnectState;\n    hardwareWallets?: LedgerWalletInfo[];\n    isLedgerConnected?: boolean;\n    isTonAppConnected?: boolean;\n    availableTransports?: LedgerTransport[];\n    lastUsedTransport?: LedgerTransport;\n  };\n\n  currentTransfer: {\n    state: TransferState;\n    isLoading?: boolean;\n    // Should be ignored when `nfts` is defined and not empty\n    tokenSlug: string;\n    toAddress?: string;\n    toAddressName?: string;\n    resolvedAddress?: string;\n    error?: string;\n    // Should be ignored when `nfts` is defined and not empty\n    amount?: bigint;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    fee?: bigint;\n    realFee?: bigint;\n    comment?: string;\n    binPayload?: string;\n    promiseId?: string;\n    txId?: string;\n    rawPayload?: string;\n    parsedPayload?: ApiParsedPayload;\n    stateInit?: string;\n    shouldEncrypt?: boolean;\n    isToNewAddress?: boolean;\n    isScam?: boolean;\n    nfts?: ApiNft[];\n    sentNftsCount?: number;\n    isMemoRequired?: boolean;\n    // Every time this field value changes, the `amount` value should be actualized using `preserveMaxTransferAmount`\n    diesel?: ApiFetchEstimateDieselResult;\n    withDiesel?: boolean;\n    isGaslessWithStars?: boolean;\n    // This field is used to display a scam warning in the UI only because `Dialogs` are not displayed in iOS due to NBS specifics\n    shouldShowScamWarning?: true;\n  };\n\n  currentSwap: {\n    isMaxAmount?: boolean;\n    state: SwapState;\n    swapId?: string;\n    slippage: number;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    amountOut?: string;\n    amountOutMin?: string;\n    priceImpact?: number;\n    activityId?: string;\n    error?: string;\n    errorType?: SwapErrorType;\n    shouldResetOnClose?: boolean;\n    isLoading?: boolean;\n    /**\n     * When is `true`, does several things: shows the estimating indicator in the UI, blocks the form submission, and\n     * instructs the UI and the actions to perform an estimation regardless.\n     */\n    isEstimating?: boolean;\n    inputSource?: SwapInputSource;\n    toAddress?: string;\n    payinAddress?: string;\n    payoutAddress?: string;\n    payinExtraId?: string;\n    limits?: {\n      fromMin?: string;\n      fromMax?: string;\n    };\n    dieselStatus?: DieselStatus;\n    estimates?: ApiSwapEstimateVariant[];\n    // This property is necessary to ensure that when the DEX with the best rate changes,\n    // the user's selection remains unchanged\n    isDexLabelChanged?: true;\n    currentDexLabel?: ApiSwapDexLabel;\n    bestRateDexLabel?: ApiSwapDexLabel;\n    // Fees. Undefined values mean that these fields are unknown.\n    networkFee?: string;\n    realNetworkFee?: string;\n    swapFee?: string;\n    swapFeePercent?: number;\n    ourFee?: string;\n    ourFeePercent?: number;\n    dieselFee?: string;\n  };\n\n  currentSignature?: {\n    promiseId: string;\n    dataHex: string;\n    error?: string;\n    isSigned?: boolean;\n  };\n\n  exploreData?: {\n    categories: ApiSiteCategory[];\n    sites: ApiSite[];\n  };\n\n  currentDappTransfer: {\n    state: TransferState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    transactions?: ApiDappTransfer[];\n    /** What else should happen after submitting the transactions (in addition to the transactions) */\n    emulation?: Pick<ApiEmulationResult, 'activities' | 'realFee'>;\n    vestingAddress?: string;\n    viewTransactionOnIdx?: number;\n    dapp?: ApiDapp;\n    error?: string;\n  };\n\n  currentDappSignData: {\n    state: SignDataState;\n    isSse?: boolean;\n    promiseId?: string;\n    isLoading?: boolean;\n    dapp?: ApiDapp;\n    payloadToSign?: SignDataPayload;\n    error?: string;\n  };\n\n  currentDomainRenewal: {\n    addresses?: string[];\n    state: DomainRenewalState;\n    isLoading?: boolean;\n    error?: string;\n    // There's only one commission because the transaction has no change\n    realFee?: bigint;\n    txId?: string;\n  };\n\n  currentDomainLinking: {\n    address?: string;\n    state: DomainLinkingState;\n    isLoading?: boolean;\n    error?: string;\n    realFee?: bigint;\n    walletAddress?: string;\n    walletAddressName?: string;\n    resolvedWalletAddress?: string;\n    txId?: string;\n  };\n\n  dappConnectRequest?: {\n    state: DappConnectState;\n    isSse?: boolean;\n    promiseId?: string;\n    accountId?: string;\n    dapp: ApiDapp;\n    permissions?: ApiDappPermissions;\n    proof?: ApiTonConnectProof;\n    error?: string;\n  };\n\n  currentStaking: {\n    state: StakingState;\n    isLoading?: boolean;\n    isUnstaking?: boolean;\n    amount?: bigint;\n    tokenAmount?: bigint;\n    fee?: bigint;\n    error?: string;\n  };\n\n  stakingDefault: ApiStakingState;\n\n  accounts?: {\n    byId: Record<string, Account>;\n    isLoading?: boolean;\n    error?: string;\n  };\n\n  tokenInfo: {\n    bySlug: Record<string, ApiTokenWithPrice>;\n  };\n\n  swapTokenInfo: {\n    bySlug: Record<string, ApiSwapAsset>;\n    /** Whether the API has loaded and provided the tokens */\n    isLoaded?: true;\n  };\n\n  swapPairs?: {\n    bySlug: Record<string, AssetPairs>;\n  };\n\n  tokenPriceHistory: {\n    bySlug: Record<string, PriceHistoryPeriods>;\n  };\n\n  byAccountId: Record<string, AccountState>;\n\n  walletVersions?: {\n    currentVersion: ApiTonWalletVersion;\n    byId: Record<string, ApiWalletWithVersionInfo[]>;\n  };\n\n  settings: {\n    state: SettingsState;\n    theme: Theme;\n    animationLevel: AnimationLevel;\n    langCode: LangCode;\n    byAccountId: Record<string, AccountSettings>;\n    areTinyTransfersHidden?: boolean;\n    canPlaySounds?: boolean;\n    isInvestorViewEnabled?: boolean;\n    isTonProxyEnabled?: boolean;\n    isTonMagicEnabled?: boolean;\n    isDeeplinkHookEnabled?: boolean;\n    isPasswordNumeric?: boolean; // Backwards compatibility for non-numeric passwords from older versions\n    isTestnet?: boolean;\n    isSecurityWarningHidden?: boolean;\n    areTokensWithNoCostHidden: boolean;\n    isSortByValueEnabled?: boolean;\n    importToken?: {\n      isLoading?: boolean;\n      token?: UserToken | UserSwapToken;\n    };\n    authConfig?: AuthConfig;\n    baseCurrency?: ApiBaseCurrency;\n    isAppLockEnabled?: boolean;\n    autolockValue?: AutolockValueType;\n    isAutoConfirmEnabled?: boolean;\n    isSensitiveDataHidden?: true;\n  };\n\n  dialogs: DialogType[];\n  notifications: NotificationType[];\n  currentAccountId?: string;\n  isAddAccountModalOpen?: boolean;\n  isBackupWalletModalOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  areSettingsOpen?: boolean;\n  isExploreOpen?: boolean;\n  isAppUpdateAvailable?: boolean;\n  // Force show the \"Update MyTonWallet\" pop-up on all platforms\n  isAppUpdateRequired?: boolean;\n  confettiRequestedAt?: number;\n  isPinAccepted?: boolean;\n  chainForOnRampWidgetModal?: ApiChain;\n  isInvoiceModalOpen?: boolean;\n  isReceiveModalOpen?: boolean;\n  isVestingModalOpen?: boolean;\n  shouldForceAccountEdit?: boolean;\n  isIncorrectTimeNotificationReceived?: boolean;\n  currentBrowserOptions?: {\n    url: string;\n    title?: string;\n    subtitle?: string;\n    keepNBSOpen?: boolean;\n  };\n\n  currentMintCard?: {\n    type?: ApiMtwCardType;\n    state?: MintCardState;\n    error?: string;\n    isLoading?: boolean;\n  };\n\n  currentQrScan?: {\n    currentTransfer?: GlobalState['currentTransfer'];\n    currentSwap?: GlobalState['currentSwap'];\n    currentDomainLinking?: GlobalState['currentDomainLinking'];\n  };\n\n  latestAppVersion?: string;\n  stateVersion: number;\n  restrictions: {\n    isLimitedRegion: boolean;\n    isSwapDisabled: boolean;\n    isOnRampDisabled: boolean;\n    isNftBuyingDisabled: boolean;\n    isCopyStorageEnabled?: boolean;\n    supportAccountsCount?: number;\n    countryCode?: ApiCountryCode;\n  };\n\n  mediaViewer: {\n    mediaId?: string;\n    mediaType?: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n\n  isLoadingOverlayOpen?: boolean;\n\n  pushNotifications: {\n    isAvailable?: boolean;\n    userToken?: string;\n    platform?: CapacitorPlatform;\n    enabledAccounts: Record<string, Partial<ApiNotificationsAccountValue>>;\n  };\n\n  isAppLockActive?: boolean;\n  isManualLockActive?: boolean;\n  appLockHideBiometrics?: boolean;\n  // The app is open in fullscreen mode in Telegram MiniApp on mobile\n  isFullscreen?: boolean;\n};\n\nexport interface ActionPayloads {\n  // Initial\n  init: undefined;\n  initApi: undefined;\n  afterInit: undefined;\n  apiUpdate: ApiUpdate;\n  resetAuth: undefined;\n  startCreatingWallet: undefined;\n  afterCheckMnemonic: undefined;\n  skipCheckMnemonic: undefined;\n  restartCheckMnemonicIndexes: { worldsCount: number };\n  cancelDisclaimer: undefined;\n  afterCreatePassword: { password: string; isPasswordNumeric?: boolean };\n  startCreatingBiometrics: undefined;\n  afterCreateBiometrics: undefined;\n  skipCreateBiometrics: undefined;\n  cancelCreateBiometrics: undefined;\n  afterCreateNativeBiometrics: undefined;\n  skipCreateNativeBiometrics: undefined;\n  createPin: { pin: string; isImporting: boolean };\n  confirmPin: { isImporting: boolean };\n  cancelConfirmPin: { isImporting: boolean };\n  startImportingWallet: undefined;\n  afterImportMnemonic: { mnemonic: string[] };\n  startImportingHardwareWallet: { driver: ApiLedgerDriver };\n  confirmDisclaimer: undefined;\n  afterConfirmDisclaimer: undefined;\n  cleanAuthError: undefined;\n  openAbout: undefined;\n  closeAbout: undefined;\n  startImportViewAccount: undefined;\n  closeImportViewAccount: undefined;\n  openAuthImportWalletModal: undefined;\n  closeAuthImportWalletModal: undefined;\n  openAuthBackupWalletModal: undefined;\n  openMnemonicPage: undefined;\n  openCreateBackUpPage: undefined;\n  openCheckWordsPage: undefined;\n  closeCheckWordsPage: { isBackupCreated?: boolean } | undefined;\n  initializeHardwareWalletModal: undefined;\n  initializeHardwareWalletConnection: { transport: LedgerTransport };\n  createHardwareAccounts: undefined;\n  addHardwareAccounts: {\n    wallets: ({ accountId: string; address: string; walletInfo: LedgerWalletInfo } | undefined)[];\n  };\n  loadMoreHardwareWallets: { lastIndex: number };\n  createAccount: { password: string; isImporting: boolean; isPasswordNumeric?: boolean; version?: ApiTonWalletVersion };\n  afterSelectHardwareWallets: { hardwareSelectedIndices: number[] };\n  resetApiSettings: { areAllDisabled?: boolean } | undefined;\n  checkAppVersion: undefined;\n  importAccountByVersion: { version: ApiTonWalletVersion };\n  importViewAccount: { addressByChain: ApiImportAddressByChain };\n\n  selectToken: { slug?: string } | undefined;\n  openBackupWalletModal: undefined;\n  closeBackupWalletModal: undefined;\n  setIsBackupRequired: { isMnemonicChecked: boolean };\n  openHardwareWalletModal: undefined;\n  closeHardwareWalletModal: undefined;\n  resetHardwareWalletConnect: undefined;\n  setTransferScreen: { state: TransferState };\n  setTransferAmount: { amount?: bigint };\n  setTransferToAddress: { toAddress?: string };\n  setTransferComment: { comment?: string };\n  setTransferShouldEncrypt: { shouldEncrypt?: boolean };\n  startTransfer: {\n    isPortrait?: boolean;\n    tokenSlug?: string;\n    amount?: bigint;\n    toAddress?: string;\n    comment?: string;\n    nfts?: ApiNft[];\n    binPayload?: string;\n    stateInit?: string;\n  } | undefined;\n  changeTransferToken: { tokenSlug: string; withResetAmount?: boolean };\n  fetchTransferFee: {\n    tokenSlug: string;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    binPayload?: string;\n    stateInit?: string;\n  };\n  fetchNftFee: {\n    toAddress: string;\n    nfts: ApiNft[];\n    comment?: string;\n  };\n  submitTransferInitial: {\n    tokenSlug: string;\n    amount: bigint;\n    toAddress: string;\n    comment?: string;\n    shouldEncrypt?: boolean;\n    nfts?: ApiNft[];\n    withDiesel?: boolean;\n    isBase64Data?: boolean;\n    binPayload?: string;\n    isGaslessWithStars?: boolean;\n    stateInit?: string;\n  };\n  submitTransferConfirm: undefined;\n  submitTransferPassword: { password: string };\n  submitTransferHardware: undefined;\n  clearTransferError: undefined;\n  cancelTransfer: { shouldReset?: boolean } | undefined;\n  dismissTransferScamWarning: undefined;\n  showDialog: DialogType;\n  dismissDialog: undefined;\n  showError: { error?: ApiAnyDisplayError | string };\n  showNotification: { message: string; icon?: string };\n  dismissNotification: undefined;\n  initLedgerPage: undefined;\n  afterSignIn: undefined;\n  signOut: { level: SignOutLevel };\n  cancelCaching: undefined;\n  afterSignOut: { shouldReset?: boolean } | undefined;\n  addAccount: { method: AuthMethod; password: string; isAuthFlow?: boolean };\n  addAccount2: { method: AuthMethod; password: string };\n  switchAccount: { accountId: string; newNetwork?: ApiNetwork };\n  renameAccount: { accountId: string; title: string };\n  clearAccountError: undefined;\n  clearAccountLoading: undefined;\n  setIsAccountLoading: { isLoading: true | undefined };\n  verifyHardwareAddress: undefined;\n  authorizeDiesel: undefined;\n  fetchTransferDieselState: { tokenSlug: string };\n  setIsAuthLoading: { isLoading: true | undefined };\n\n  fetchTokenTransactions: { limit: number; slug: string; shouldLoadWithBudget?: boolean };\n  fetchAllTransactions: { limit: number; shouldLoadWithBudget?: boolean };\n  resetIsHistoryEndReached: { slug: string } | undefined;\n  fetchNfts: undefined;\n  showActivityInfo: { id: string };\n  showAnyAccountTx: { txId: string; accountId: string; network: ApiNetwork };\n  showAnyAccountTokenActivity: { slug: string; accountId: string; network: ApiNetwork };\n  showTokenActivity: { slug: string };\n  closeActivityInfo: { id: string };\n  fetchActivityDetails: { id: string };\n  openNftCollection: { address: string };\n  closeNftCollection: undefined;\n  selectNfts: { addresses: string[] };\n  selectAllNfts: { collectionAddress?: string };\n  clearNftSelection: { address: string };\n  clearNftsSelection: undefined;\n  addCollectionTab: { collectionAddress: string; isAuto?: boolean };\n  removeCollectionTab: { collectionAddress: string };\n  burnNfts: { nfts: ApiNft[] };\n  addNftsToBlacklist: { addresses: ApiNft['address'][] };\n  addNftsToWhitelist: { addresses: ApiNft['address'][] };\n  removeNftSpecialStatus: { address: ApiNft['address'] };\n  openUnhideNftModal: {\n    address: ApiNft['address'];\n    name: ApiNft['name'];\n  };\n  closeUnhideNftModal: undefined;\n  openHideNftModal: {\n    addresses: ApiNft['address'][];\n    isCollection: boolean;\n  };\n  closeHideNftModal: undefined;\n  openNftAttributesModal: { nft: ApiNft };\n  closeNftAttributesModal: undefined;\n\n  openExplore: undefined;\n  closeExplore: undefined;\n\n  closeAnyModal: undefined;\n  submitSignature: { password: string };\n  clearSignatureError: undefined;\n  cancelSignature: undefined;\n\n  addSavedAddress: { address: string; name: string; chain: ApiChain };\n  removeFromSavedAddress: { address: string; chain: ApiChain };\n  checkTransferAddress: { address?: string };\n\n  setCurrentTokenPeriod: { period: TokenPeriod };\n  openAddAccountModal: { forceAddingTonOnlyAccount: boolean } | undefined;\n  closeAddAccountModal: undefined;\n\n  setLandscapeActionsActiveTabIndex: { index: ActiveTab };\n  setActiveContentTab: { tab: ContentTab };\n\n  // BottomBar actions\n  switchToWallet: undefined;\n  switchToExplore: undefined;\n  switchToSettings: undefined;\n\n  requestConfetti: undefined;\n  setIsPinAccepted: undefined;\n  clearIsPinAccepted: undefined;\n\n  requestOpenQrScanner: undefined;\n  closeQrScanner: undefined;\n  handleQrCode: { data: string };\n\n  // Staking\n  startStaking: { tokenSlug: string } | undefined;\n  startUnstaking: { stakingId: string } | undefined;\n  setStakingScreen: { state: StakingState };\n  submitStakingInitial: { amount?: bigint; isUnstaking?: boolean } | undefined;\n  submitStakingPassword: { password: string; isUnstaking?: boolean };\n  submitStakingHardware: { isUnstaking?: boolean } | undefined;\n  clearStakingError: undefined;\n  cancelStaking: undefined;\n  fetchStakingHistory: undefined;\n  fetchStakingFee: { amount: bigint };\n  openStakingInfo: undefined;\n  openAnyAccountStakingInfo: { accountId: string; network: ApiNetwork; stakingId: string };\n  closeStakingInfo: undefined;\n  changeCurrentStaking: { stakingId: string; shouldReopenModal?: boolean };\n  startStakingClaim: { stakingId: string } | undefined;\n  submitStakingClaim: { password: string };\n  submitStakingClaimHardware: undefined;\n  cancelStakingClaim: undefined;\n  openStakingInfoOrStart: undefined;\n\n  // Settings\n  openSettings: undefined;\n  openSettingsWithState: { state: SettingsState };\n  setSettingsState: { state?: SettingsState };\n  closeSettings: undefined;\n  setTheme: { theme: Theme };\n  setAnimationLevel: { level: AnimationLevel };\n  toggleTinyTransfersHidden: { isEnabled?: boolean } | undefined;\n  toggleInvestorView: { isEnabled?: boolean } | undefined;\n  toggleCanPlaySounds: { isEnabled?: boolean } | undefined;\n  toggleTonProxy: { isEnabled: boolean };\n  toggleTonMagic: { isEnabled: boolean };\n  toggleDeeplinkHook: { isEnabled: boolean };\n  startChangingNetwork: { network: ApiNetwork };\n  changeNetwork: { network: ApiNetwork };\n  changeLanguage: { langCode: LangCode };\n  closeSecurityWarning: undefined;\n  toggleTokensWithNoCost: { isEnabled: boolean };\n  toggleSortByValue: { isEnabled: boolean };\n  updateOrderedSlugs: { orderedSlugs: string[] };\n  rebuildOrderedSlugs: undefined;\n  toggleTokenVisibility: { slug: string; shouldShow: boolean };\n  addToken: { token: UserToken };\n  deleteToken: { slug: string };\n  importToken: { address: string; isSwap?: boolean };\n  resetImportToken: undefined;\n  closeBiometricSettings: undefined;\n  openBiometricsTurnOn: undefined;\n  openBiometricsTurnOffWarning: undefined;\n  openBiometricsTurnOff: undefined;\n  enableBiometrics: { password: string };\n  disableBiometrics: { password: string; isPasswordNumeric?: boolean };\n  enableNativeBiometrics: { password: string };\n  disableNativeBiometrics: undefined;\n  changeBaseCurrency: { currency: ApiBaseCurrency };\n  clearNativeBiometricsError: undefined;\n  copyStorageData: undefined;\n  setAppLockValue: { value?: AutolockValueType; isEnabled: boolean };\n  setIsManualLockActive: { isActive?: boolean; shouldHideBiometrics?: boolean };\n  setIsAutoConfirmEnabled: { isEnabled: boolean };\n  setInMemoryPassword: { password?: string; isFinalCall?: boolean; force?: boolean };\n  openSettingsHardwareWallet: undefined;\n  apiUpdateWalletVersions: ApiUpdateWalletVersions;\n\n  // Account Settings\n  setCardBackgroundNft: { nft: ApiNft };\n  clearCardBackgroundNft: undefined;\n  checkCardNftOwnership: undefined;\n  installAccentColorFromNft: { nft: ApiNft };\n  clearAccentColorFromNft: undefined;\n\n  // TON Connect common\n  apiUpdateDappLoading: ApiUpdateDappLoading;\n  apiUpdateDappCloseLoading: ApiUpdateDappCloseLoading;\n\n  // TON Connect connection\n  submitDappConnectRequestConfirm: { accountId: string; password?: string };\n  submitDappConnectRequestConfirmHardware: { accountId: string };\n  submitDappConnectHardware: { accountId: string; signature: string };\n  clearDappConnectRequestError: undefined;\n  cancelDappConnectRequestConfirm: undefined;\n  setDappConnectRequestState: { state: DappConnectState };\n  apiUpdateDappConnect: ApiUpdateDappConnect;\n\n  // TON Connect transfer\n  setDappTransferScreen: { state: TransferState };\n  showDappTransferTransaction: { transactionIdx: number };\n  submitDappTransferConfirm: undefined;\n  submitDappTransferPassword: { password: string };\n  submitDappTransferHardware: undefined;\n  submitDappTransferHardware2: { signedMessages: ApiSignedTransfer[] };\n  clearDappTransferError: undefined;\n  cancelDappTransfer: undefined;\n  closeDappTransfer: undefined;\n  apiUpdateDappSendTransaction: ApiUpdateDappSendTransactions;\n\n  // TON Connect SignData\n  setDappSignDataScreen: { state: SignDataState };\n  submitDappSignDataConfirm: undefined;\n  submitDappSignDataPassword: { password: string };\n  clearDappSignDataError: undefined;\n  cancelDappSignData: undefined;\n  closeDappSignData: undefined;\n  apiUpdateDappSignData: ApiUpdateDappSignData;\n\n  getDapps: undefined;\n  deleteAllDapps: undefined;\n  deleteDapp: { url: string; uniqueId: string };\n  loadExploreSites: { isLandscape: boolean };\n  updateDappLastOpenedAt: { url: string };\n\n  addSiteToBrowserHistory: { url: string };\n  removeSiteFromBrowserHistory: { url: string };\n  openBrowser: { url: string; title?: string; subtitle?: string; keepNBSOpen?: boolean };\n  closeBrowser: undefined;\n  openSiteCategory: { id: number };\n  closeSiteCategory: undefined;\n  switchAccountAndOpenUrl: {\n    accountId?: string;\n    network?: ApiNetwork;\n    url: string;\n    isExternal?: boolean;\n    title?: string;\n    subtitle?: string;\n  };\n\n  // Swap\n  submitSwap: { password: string };\n  startSwap: {\n    state?: SwapState;\n    tokenInSlug?: string;\n    tokenOutSlug?: string;\n    amountIn?: string;\n    toAddress?: string;\n  } | undefined;\n  cancelSwap: { shouldReset?: boolean } | undefined;\n  setDefaultSwapParams: { tokenInSlug?: string; tokenOutSlug?: string; withResetAmount?: boolean } | undefined;\n  switchSwapTokens: undefined;\n  setSwapTokenIn: { tokenSlug: string };\n  setSwapTokenOut: { tokenSlug: string };\n  setSwapAmountIn: { amount?: string; isMaxAmount?: boolean };\n  setSwapAmountOut: { amount?: string };\n  setSlippage: { slippage: number };\n  estimateSwap: undefined;\n  setSwapScreen: { state: SwapState };\n  clearSwapError: undefined;\n  submitSwapCex: { password: string };\n  setSwapCexAddress: { toAddress: string };\n  addSwapToken: { token: UserSwapToken };\n  toggleSwapSettingsModal: { isOpen: boolean };\n  updatePendingSwaps: undefined;\n  setSwapDex: { dexLabel: ApiSwapDexLabel };\n\n  openOnRampWidgetModal: { chain: ApiChain };\n  closeOnRampWidgetModal: undefined;\n\n  // MediaViewer\n  openMediaViewer: {\n    mediaId: string;\n    mediaType: MediaType;\n    txId?: string;\n    hiddenNfts?: 'user' | 'scam';\n    noGhostAnimation?: boolean;\n  };\n  closeMediaViewer: undefined;\n\n  openReceiveModal: { chain: ApiChain } | undefined;\n  closeReceiveModal: undefined;\n  setReceiveActiveTab: { chain: ApiChain };\n  openInvoiceModal: { tokenSlug: string } | undefined;\n  changeInvoiceToken: { tokenSlug: string };\n  closeInvoiceModal: undefined;\n\n  loadPriceHistory: { slug: string; period: ApiPriceHistoryPeriod; currency?: ApiBaseCurrency };\n\n  showIncorrectTimeError: undefined;\n\n  openLoadingOverlay: undefined;\n  closeLoadingOverlay: undefined;\n\n  loadMycoin: undefined;\n  openVestingModal: undefined;\n  closeVestingModal: undefined;\n  startClaimingVesting: undefined;\n  submitClaimingVesting: { password: string };\n  submitClaimingVestingHardware: undefined;\n  clearVestingError: undefined;\n  cancelClaimingVesting: undefined;\n\n  openMintCardModal: undefined;\n  closeMintCardModal: undefined;\n  startCardMinting: { type: ApiMtwCardType };\n  submitMintCard: { password: string };\n  submitMintCardHardware: undefined;\n  clearMintCardError: undefined;\n\n  submitAppLockActivityEvent: undefined;\n\n  toggleNotifications: { isEnabled: boolean };\n  renameNotificationAccount: { accountId: string };\n  toggleNotificationAccount: { accountId: string };\n  createNotificationAccount: { accountId: string; withAbort?: boolean };\n  tryAddNotificationAccount: { accountId: string };\n  deleteNotificationAccount: { accountId: string; withAbort?: boolean };\n  deleteAllNotificationAccounts: undefined | { accountIds: string[] };\n  registerNotifications: { userToken: string; platform: CapacitorPlatform };\n\n  openFullscreen: undefined;\n  closeFullscreen: undefined;\n  setAppLayout: { layout: AppLayout };\n\n  setIsSensitiveDataHidden: { isHidden: boolean };\n\n  openDomainRenewalModal: { accountId?: string; network?: ApiNetwork; addresses: string[] };\n  startDomainsRenewal: undefined;\n  checkDomainsRenewalDraft: { nfts: ApiNft[] };\n  submitDomainsRenewal: { password: string };\n  submitDomainsRenewalHardware: undefined;\n  clearDomainsRenewalError: undefined;\n  cancelDomainsRenewal: undefined;\n\n  openDomainLinkingModal: { address: string };\n  startDomainLinking: undefined;\n  checkDomainLinkingDraft: { nft: ApiNft };\n  submitDomainLinking: { password: string };\n  submitDomainLinkingHardware: undefined;\n  clearDomainLinkingError: undefined;\n  cancelDomainLinking: undefined;\n\n  checkLinkingAddress: { address?: string };\n  setDomainLinkingWalletAddress: { address?: string };\n  setIsAppLockActive: { isActive: boolean };\n}\n\nexport enum LoadMoreDirection {\n  Forwards,\n  Backwards,\n}\n\nexport type AutolockValueType = (typeof AUTOLOCK_OPTIONS_LIST[number])['value'];\n","import type { ApiChain } from '../api/types';\n\nimport { CHAIN_CONFIG } from '../config';\n\nexport function getChainConfig<T extends ApiChain>(chain: T) {\n  return CHAIN_CONFIG[chain];\n}\n\nexport function findChainConfig(chain: any) {\n  return chain in CHAIN_CONFIG ? CHAIN_CONFIG[chain as ApiChain] : undefined;\n}\n","import type { ApiChain, ApiToken, ApiTokenWithPrice } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { CHAIN_CONFIG, PRICELESS_TOKEN_HASHES, STAKED_TOKEN_SLUGS, TONCOIN } from '../config';\nimport { getChainConfig } from './chain';\nimport { pick } from './iteratees';\n\nconst chainByNativeSlug = Object.fromEntries(\n  Object.entries(CHAIN_CONFIG).map(([chain, { nativeToken }]) => [nativeToken.slug, chain]),\n) as Record<string, ApiChain>;\n\nexport function getIsNativeToken(slug?: string) {\n  return slug ? slug in chainByNativeSlug : false;\n}\n\nexport function getIsTonToken(slug: string, withNative?: boolean) {\n  return Boolean(slug.startsWith('ton-') || (withNative && slug === TONCOIN.slug));\n}\n\nexport function getNativeToken(chain: ApiChain): ApiToken {\n  return getChainConfig(chain).nativeToken;\n}\n\nexport function getChainBySlug(slug: string) {\n  const items = slug.split('-');\n  return items.length > 1 ? items[0] as ApiChain : chainByNativeSlug[slug];\n}\n\nexport function getIsServiceToken(token?: ApiToken) {\n  const { type, codeHash = '', slug = '' } = token ?? {};\n\n  return type === 'lp_token'\n    || STAKED_TOKEN_SLUGS.has(slug)\n    || PRICELESS_TOKEN_HASHES.has(codeHash);\n}\n\nexport function buildUserToken(token: ApiTokenWithPrice | ApiToken): UserToken {\n  return {\n    ...pick(token, [\n      'symbol',\n      'slug',\n      'name',\n      'image',\n      'decimals',\n      'keywords',\n      'chain',\n      'tokenAddress',\n      'type',\n    ]),\n    amount: 0n,\n    totalValue: '0',\n    price: 0,\n    priceUsd: 0,\n    change24h: 0,\n  };\n}\n","import type { ApiBalanceBySlug, ApiSwapAsset } from '../../api/types';\nimport type { AccountSettings, GlobalState, UserSwapToken } from '../types';\nimport { SwapType } from '../types';\n\nimport { DEFAULT_SWAP_FIRST_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG, IS_CORE_WALLET } from '../../config';\nimport { toBig } from '../../util/decimals';\nimport memoize from '../../util/memoize';\nimport { getChainBySlug } from '../../util/tokens';\nimport withCache from '../../util/withCache';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsHardwareAccount,\n} from './accounts';\nimport { selectAccountTokensMemoizedFor } from './tokens';\n\nfunction createTokenList(\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  balancesBySlug: ApiBalanceBySlug,\n  sortFn: (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => number,\n  filterFn?: (token: ApiSwapAsset) => boolean,\n): UserSwapToken[] {\n  return Object.entries(swapTokenInfo.bySlug)\n    .filter(([, token]) => !filterFn || filterFn(token))\n    .map(([slug, {\n      symbol, name, image,\n      decimals, keywords, chain,\n      tokenAddress, isPopular, color, price = 0, priceUsd = 0,\n    }]) => {\n      const amount = balancesBySlug[slug] ?? 0n;\n      const totalValue = toBig(amount, decimals).mul(price).toString();\n\n      return {\n        symbol,\n        slug,\n        amount,\n        price,\n        priceUsd,\n        name,\n        image,\n        decimals,\n        isDisabled: false,\n        canSwap: true,\n        isPopular,\n        keywords,\n        totalValue,\n        color,\n        chain,\n        tokenAddress,\n      } satisfies UserSwapToken;\n    })\n    .sort(sortFn);\n}\n\nconst selectPopularTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const popularTokenOrder = [\n      'TON',\n      'USD',\n      'USDT',\n      'BTC',\n      'ETH',\n      'jUSDT',\n      'jWBTC',\n    ];\n    const orderMap = new Map(popularTokenOrder.map((item, index) => [item, index]));\n\n    const filterFn = (token: ApiSwapAsset) => token.isPopular;\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => {\n      const orderIndexA = orderMap.has(tokenA.symbol) ? orderMap.get(tokenA.symbol)! : popularTokenOrder.length;\n      const orderIndexB = orderMap.has(tokenB.symbol) ? orderMap.get(tokenB.symbol)! : popularTokenOrder.length;\n\n      return orderIndexA - orderIndexB;\n    };\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn, filterFn);\n  },\n));\n\nconst selectSwapTokensMemoizedFor = withCache((accountId: string) => memoize(\n  (balancesBySlug: ApiBalanceBySlug, swapTokenInfo: GlobalState['swapTokenInfo']) => {\n    const sortFn = (tokenA: ApiSwapAsset, tokenB: ApiSwapAsset) => (\n      tokenA.name.trim().toLowerCase().localeCompare(tokenB.name.trim().toLowerCase())\n    );\n    return createTokenList(swapTokenInfo, balancesBySlug, sortFn);\n  },\n));\n\nconst selectAccountTokensForSwapMemoizedFor = withCache((accountId: string) => memoize((\n  balancesBySlug: ApiBalanceBySlug,\n  tokenInfo: GlobalState['tokenInfo'],\n  swapTokenInfo: GlobalState['swapTokenInfo'],\n  accountSettings: AccountSettings,\n  isSortByValueEnabled = false,\n  areTokensWithNoCostHidden = false,\n) => {\n  return selectAccountTokensMemoizedFor(accountId)(\n    balancesBySlug,\n    tokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  ).filter((token) => token.slug in swapTokenInfo.bySlug && !token.isDisabled);\n}));\n\nexport function selectAvailableUserForSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.tokenInfo || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { areTokensWithNoCostHidden, isSortByValueEnabled } = global.settings;\n\n  return selectAccountTokensForSwapMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.tokenInfo,\n    global.swapTokenInfo,\n    accountSettings,\n    isSortByValueEnabled,\n    areTokensWithNoCostHidden,\n  );\n}\n\nexport function selectPopularTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectPopularTokensMemoizedFor(global.currentAccountId!)(balancesBySlug, global.swapTokenInfo);\n}\n\nexport function selectSwapTokens(global: GlobalState) {\n  const balancesBySlug = selectCurrentAccountState(global)?.balances?.bySlug;\n  if (!balancesBySlug || !global.swapTokenInfo) {\n    return undefined;\n  }\n\n  return selectSwapTokensMemoizedFor(global.currentAccountId!)(\n    balancesBySlug,\n    global.swapTokenInfo,\n  );\n}\n\nexport function selectCurrentSwapTokenIn(global: GlobalState) {\n  const { tokenInSlug } = global.currentSwap;\n  return tokenInSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenInSlug];\n}\n\nexport function selectCurrentSwapTokenOut(global: GlobalState) {\n  const { tokenOutSlug } = global.currentSwap;\n  return tokenOutSlug === undefined ? undefined : global.swapTokenInfo.bySlug[tokenOutSlug];\n}\n\nexport function selectSwapType(global: GlobalState) {\n  const {\n    tokenInSlug = DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n    tokenOutSlug = DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  } = global.currentSwap;\n  const tokenInChain = getChainBySlug(tokenInSlug);\n  const tokenOutChain = getChainBySlug(tokenOutSlug);\n\n  if (tokenInChain === 'ton' && tokenOutChain === 'ton') {\n    return SwapType.OnChain;\n  }\n\n  const { addressByChain } = selectCurrentAccount(global) ?? { addressByChain: {} };\n\n  if (tokenInChain in addressByChain) {\n    return SwapType.CrosschainFromWallet;\n  }\n\n  return SwapType.CrosschainToWallet;\n}\n\nexport function selectIsSwapDisabled(global: GlobalState) {\n  return IS_CORE_WALLET\n    || global.restrictions.isSwapDisabled\n    || global.settings.isTestnet\n    || selectIsHardwareAccount(global);\n}\n","import type { ApiCheckTransactionDraftResult, ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { FeePrecision, FeeTerms } from './types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintMax, bigintMin } from '../bigint';\nimport { getIsNativeToken } from '../tokens';\n\ntype ApiFee = Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee' | 'diesel'> & {\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n};\n\nexport type ExplainedTransferFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the transfer. The wallet must have it on the balance to send the transfer.\n   * Show this in the transfer form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<bigint>;\n    /** The sum of `terms` measured in the native token */\n    nativeSum: bigint;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: bigint;\n  /**\n   * Whether the full token balance can be transferred despite the fee.\n   * If yes, the fee will be taken from the transferred amount.\n   */\n  canTransferFullBalance: boolean;\n};\n\ntype AvailableDiesel = ApiFetchEstimateDieselResult & { amount: bigint };\ntype ApiFeeWithDiesel = ApiFee & { diesel: AvailableDiesel };\n\ntype MaxTransferAmountInput = {\n  /** The wallet balance of the transferred token. Undefined means that it's unknown. */\n  tokenBalance: bigint | undefined;\n  /** The slug of the token that is being transferred */\n  tokenSlug: string;\n  /** The full fee terms calculated by `explainApiTransferFee`. Undefined means that they're unknown. */\n  fullFee: FeeTerms<bigint> | undefined;\n  /** Whether the full token balance can be transferred despite the fee. */\n  canTransferFullBalance: boolean;\n};\n\ntype BalanceSufficientForTransferInput = Omit<MaxTransferAmountInput, 'tokenSlug'> & {\n  /** The wallet balance of the native token of the transfer chain. Undefined means that it's unknown. */\n  nativeTokenBalance: bigint | undefined;\n  /** The transferred amount. Use 0 for NFT transfers. Undefined means that it's unspecified. */\n  transferAmount: bigint | undefined;\n};\n\n/**\n * Converts the transfer fee data returned from API into data that is ready to be displayed in the transfer form UI.\n */\nexport function explainApiTransferFee(input: ApiFee): ExplainedTransferFee {\n  return shouldUseDiesel(input)\n    ? explainGaslessTransferFee(input)\n    : explainGasfullTransferFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the transfer.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxTransferAmount({\n  tokenBalance,\n  tokenSlug,\n  fullFee,\n  canTransferFullBalance,\n}: MaxTransferAmountInput): bigint | undefined {\n  if (tokenBalance === undefined) {\n    return undefined;\n  }\n\n  // Returning the full balance when the fee is unknown for a better UX\n  if (canTransferFullBalance || !fullFee) {\n    return tokenBalance;\n  }\n\n  let fee = fullFee.token ?? 0n;\n  if (getIsNativeToken(tokenSlug)) {\n    // When the token is native, both `token` and `native` refer to the same currency, so they should be added\n    fee += fullFee.native ?? 0n;\n  }\n\n  return bigintMax(tokenBalance - fee, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to transfer the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForTransfer({\n  tokenBalance,\n  nativeTokenBalance,\n  transferAmount,\n  fullFee,\n  canTransferFullBalance,\n}: BalanceSufficientForTransferInput) {\n  if (transferAmount === undefined || tokenBalance === undefined || nativeTokenBalance === undefined || !fullFee) {\n    return undefined;\n  }\n\n  const isFullTokenTransfer = transferAmount === tokenBalance && canTransferFullBalance;\n  const tokenRequiredAmount = (fullFee.token ?? 0n) + (isFullTokenTransfer ? 0n : transferAmount);\n  const nativeTokenRequiredAmount = fullFee.native ?? 0n;\n\n  return tokenRequiredAmount <= tokenBalance && nativeTokenRequiredAmount <= nativeTokenBalance;\n}\n\nexport function isDieselAvailable(diesel: ApiFetchEstimateDieselResult): diesel is AvailableDiesel {\n  return diesel.status !== 'not-available' && diesel.amount !== undefined;\n}\n\nexport function getDieselTokenAmount(diesel: ApiFetchEstimateDieselResult) {\n  return diesel.status === 'stars-fee' ? 0n : (diesel.amount ?? 0n);\n}\n\nfunction shouldUseDiesel(input: ApiFee): input is ApiFeeWithDiesel {\n  return input.diesel !== undefined && isDieselAvailable(input.diesel);\n}\n\n/**\n * Converts the data of a transfer not involving diesel\n */\nfunction explainGasfullTransferFee(input: ApiFee) {\n  const result: ExplainedTransferFee = {\n    isGasless: false,\n    canTransferFullBalance: input.tokenSlug === TONCOIN.slug,\n  };\n\n  if (input.fee !== undefined) {\n    result.fullFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'lessThan',\n      terms: { native: input.fee },\n      nativeSum: input.fee,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realFee !== undefined) {\n    result.realFee = {\n      precision: input.realFee === input.fee ? 'exact' : 'approximate',\n      terms: { native: input.realFee },\n      nativeSum: input.realFee,\n    };\n  }\n\n  if (input.fee !== undefined && input.realFee !== undefined) {\n    result.excessFee = input.fee - input.realFee;\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel transfer data\n */\nfunction explainGaslessTransferFee({ diesel }: ApiFeeWithDiesel) {\n  const isStarsDiesel = diesel.status === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n  const realFeeInDiesel = convertFee(diesel.realFee, diesel.nativeAmount, diesel.amount);\n  // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n  const dieselRealFee = bigintMin(diesel.amount, realFeeInDiesel);\n  // Cover the remaining real fee with the native token.\n  const nativeRealFee = bigintMax(0n, diesel.realFee - diesel.nativeAmount);\n\n  return {\n    isGasless: true,\n    canTransferFullBalance: false,\n    fullFee: {\n      precision: 'lessThan',\n      terms: {\n        [dieselKey]: diesel.amount,\n        native: diesel.remainingFee,\n      },\n      nativeSum: diesel.nativeAmount + diesel.remainingFee,\n    },\n    realFee: {\n      precision: 'approximate',\n      terms: {\n        [dieselKey]: dieselRealFee,\n        native: nativeRealFee,\n      },\n      nativeSum: diesel.realFee,\n    },\n    excessFee: diesel.nativeAmount + diesel.remainingFee - diesel.realFee,\n  } satisfies ExplainedTransferFee;\n}\n\n/**\n * `exampleFromAmount` and `exampleToAmount` define the exchange rate used to convert `amount`.\n * `exampleFromAmount` is defined in the same currency as `amount`. Mustn't be 0.\n * `exampleToAmount` is defined in the currency you want to get.\n */\nfunction convertFee(\n  amount: bigint,\n  exampleFromAmount: bigint,\n  exampleToAmount: bigint,\n) {\n  const exchangeRate = Big(exampleToAmount.toString()).div(exampleFromAmount.toString());\n  return BigInt(Big(amount.toString()).mul(exchangeRate).round().toString());\n}\n","import type { ApiChain } from '../api/types';\n\nimport { getChainConfig } from './chain';\nimport { isDnsDomain } from './dns';\n\nexport function isValidAddressOrDomain(address: string, chain: ApiChain, allowPrefix?: boolean) {\n  const config = getChainConfig(chain);\n  return address && (\n    config[allowPrefix ? 'addressPrefixRegex' : 'addressRegex'].test(address)\n    || (config.isDnsSupported && isDnsDomain(address))\n  );\n}\n","import type { GlobalState } from '../types';\n\nimport { explainApiTransferFee, getMaxTransferAmount } from '../../util/fee/transferFee';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug } from '../../util/tokens';\nimport { selectCurrentAccount } from './accounts';\nimport { selectChainTokenWithMaxBalanceSlow, selectCurrentAccountTokenBalance } from './tokens';\n\nexport function selectCurrentTransferMaxAmount(global: GlobalState) {\n  const { currentTransfer } = global;\n  const tokenBalance = selectCurrentAccountTokenBalance(global, currentTransfer.tokenSlug);\n  const { fullFee, canTransferFullBalance } = explainApiTransferFee(currentTransfer);\n  return getMaxTransferAmount({\n    tokenBalance,\n    tokenSlug: currentTransfer.tokenSlug,\n    fullFee: fullFee?.terms,\n    canTransferFullBalance,\n  });\n}\n\n/**\n * Returns the token slug that should be set to current transfer form to keep the token in sync with the \"to\" address\n */\nexport function selectTokenMatchingCurrentTransferAddressSlow(global: GlobalState): string {\n  const { tokenSlug: currentTokenSlug, toAddress } = global.currentTransfer;\n  const currentChain = getChainBySlug(currentTokenSlug);\n\n  if (!toAddress) {\n    return currentTokenSlug;\n  }\n\n  // First try to match a chain by the full address, then by the prefix.\n  // Because a valid TRON address is a prefix of a valid TON address, and we want to match TRON in this case.\n  for (const isCheckingPrefix of [false, true]) {\n    // If the current token already matches the address, no need to change it\n    if (!toAddress || isValidAddressOrDomain(toAddress, currentChain, isCheckingPrefix)) {\n      return currentTokenSlug;\n    }\n\n    // Otherwise, find the best token of the address's chain\n    const availableChains = selectCurrentAccount(global)?.addressByChain;\n    if (availableChains) {\n      for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n        if (!isValidAddressOrDomain(toAddress, chain, isCheckingPrefix)) {\n          continue;\n        }\n\n        const token = selectChainTokenWithMaxBalanceSlow(global, chain);\n        if (token) return token.slug;\n      }\n    }\n  }\n\n  // If the address matches no available chain, don't change the selected token\n  return currentTokenSlug;\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { DEFAULT_NOMINATORS_STAKING_STATE, IS_STAKING_DISABLED, TONCOIN } from '../../config';\nimport { buildCollectionByKey } from '../../util/iteratees';\nimport memoize from '../../util/memoize';\nimport withCache from '../../util/withCache';\nimport { selectAccountState } from './accounts';\n\nconst selectAccountStakingStatesMemoizedFor = withCache((accountId: string) => memoize((\n  stateDefault: ApiStakingState,\n  stateById?: Record<string, ApiStakingState>,\n) => {\n  const states = stateById ? Object.values(stateById) : undefined;\n  return states?.length ? states : [stateDefault];\n}));\n\nexport function selectAccountStakingStates(global: GlobalState, accountId: string) {\n  const { stateById } = selectAccountState(global, accountId)?.staking ?? {};\n  return selectAccountStakingStatesMemoizedFor(accountId)(global.stakingDefault, stateById);\n}\n\nconst selectAccountStakingStatesBySlugMemoizedFor = withCache((accountId: string) => memoize(\n  (stakingStates: ApiStakingState[]) => buildCollectionByKey(stakingStates, 'tokenSlug'),\n));\n\nexport function selectAccountStakingStatesBySlug(global: GlobalState, accountId: string) {\n  return selectAccountStakingStatesBySlugMemoizedFor(accountId)(selectAccountStakingStates(global, accountId));\n}\n\nexport function selectAccountStakingState(global: GlobalState, accountId: string): ApiStakingState {\n  const { stateById, stakingId, shouldUseNominators } = selectAccountState(global, accountId)?.staking ?? {};\n\n  if (!stateById || !stakingId || !(stakingId in stateById)) {\n    return shouldUseNominators ? DEFAULT_NOMINATORS_STAKING_STATE : global.stakingDefault;\n  }\n\n  return stateById[stakingId];\n}\n\nexport function selectAccountStakingHistory(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return stakingState.tokenSlug === TONCOIN.slug ? accountState?.stakingHistory : undefined;\n}\n\nexport function selectAccountStakingTotalProfit(global: GlobalState, accountId: string) {\n  const accountState = selectAccountState(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  return (stakingState.tokenSlug === TONCOIN.slug ? accountState?.staking?.totalProfit : undefined) ?? 0n;\n}\n\nexport function selectIsStakingDisabled(global: GlobalState) {\n  return Boolean(IS_STAKING_DISABLED || global.settings.isTestnet);\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isTonDnsNft } from '../../util/dns';\nimport { selectCurrentAccountState } from './accounts';\n\nexport function selectTonDnsLinkedAddress(global: GlobalState, nft: ApiNft | undefined) {\n  const { linkedAddressByAddress } = selectCurrentAccountState(global)?.nfts || {};\n\n  return isTonDnsNft(nft) ? linkedAddressByAddress?.[nft.address] : undefined;\n}\n","import { DEFAULT_PRICE_CURRENCY, IS_EXTENSION } from '../../../config';\nimport { logDebug } from '../../../util/logs';\nimport {\n  IS_ANDROID_APP, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP,\n} from '../../../util/windowEnvironment';\nimport { callApi, initApi } from '../../../api';\nimport { addActionHandler, getGlobal } from '../../index';\nimport { selectNewestActivityTimestamps } from '../../selectors';\n\naddActionHandler('initApi', async (global, actions) => {\n  logDebug('initApi action called');\n  const accountIds = global.accounts?.byId ? Object.keys(global.accounts.byId) : [];\n  initApi(actions.apiUpdate, {\n    isElectron: IS_ELECTRON,\n    isNativeBottomSheet: IS_DELEGATED_BOTTOM_SHEET,\n    isIosApp: IS_IOS_APP,\n    isAndroidApp: IS_ANDROID_APP,\n    referrer: new URLSearchParams(window.location.search).get('r') ?? undefined,\n    accountIds,\n  });\n\n  await callApi('waitDataPreload');\n\n  const { currentAccountId } = getGlobal();\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const newestActivityTimestamps = selectNewestActivityTimestamps(global, currentAccountId);\n\n  void callApi('activateAccount', currentAccountId, newestActivityTimestamps);\n});\n\naddActionHandler('resetApiSettings', (global, actions, params) => {\n  const isDefaultEnabled = !params?.areAllDisabled;\n\n  if (IS_EXTENSION) {\n    actions.toggleTonMagic({ isEnabled: false });\n    actions.toggleTonProxy({ isEnabled: false });\n  }\n  if (IS_EXTENSION || IS_ELECTRON) {\n    actions.toggleDeeplinkHook({ isEnabled: isDefaultEnabled });\n  }\n  actions.changeBaseCurrency({ currency: DEFAULT_PRICE_CURRENCY });\n});\n","export var BiometryType;\n(function (BiometryType) {\n    // Android, iOS\n    BiometryType[BiometryType[\"NONE\"] = 0] = \"NONE\";\n    // iOS\n    BiometryType[BiometryType[\"TOUCH_ID\"] = 1] = \"TOUCH_ID\";\n    // iOS\n    BiometryType[BiometryType[\"FACE_ID\"] = 2] = \"FACE_ID\";\n    // Android\n    BiometryType[BiometryType[\"FINGERPRINT\"] = 3] = \"FINGERPRINT\";\n    // Android\n    BiometryType[BiometryType[\"FACE_AUTHENTICATION\"] = 4] = \"FACE_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"IRIS_AUTHENTICATION\"] = 5] = \"IRIS_AUTHENTICATION\";\n    // Android\n    BiometryType[BiometryType[\"MULTIPLE\"] = 6] = \"MULTIPLE\";\n})(BiometryType || (BiometryType = {}));\n/**\n * Keep this in sync with BiometricAuthError in README.md\n * Update whenever `convertToPluginErrorCode` functions are modified\n */\nexport var BiometricAuthError;\n(function (BiometricAuthError) {\n    BiometricAuthError[BiometricAuthError[\"UNKNOWN_ERROR\"] = 0] = \"UNKNOWN_ERROR\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_UNAVAILABLE\"] = 1] = \"BIOMETRICS_UNAVAILABLE\";\n    BiometricAuthError[BiometricAuthError[\"USER_LOCKOUT\"] = 2] = \"USER_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"BIOMETRICS_NOT_ENROLLED\"] = 3] = \"BIOMETRICS_NOT_ENROLLED\";\n    BiometricAuthError[BiometricAuthError[\"USER_TEMPORARY_LOCKOUT\"] = 4] = \"USER_TEMPORARY_LOCKOUT\";\n    BiometricAuthError[BiometricAuthError[\"AUTHENTICATION_FAILED\"] = 10] = \"AUTHENTICATION_FAILED\";\n    BiometricAuthError[BiometricAuthError[\"APP_CANCEL\"] = 11] = \"APP_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"INVALID_CONTEXT\"] = 12] = \"INVALID_CONTEXT\";\n    BiometricAuthError[BiometricAuthError[\"NOT_INTERACTIVE\"] = 13] = \"NOT_INTERACTIVE\";\n    BiometricAuthError[BiometricAuthError[\"PASSCODE_NOT_SET\"] = 14] = \"PASSCODE_NOT_SET\";\n    BiometricAuthError[BiometricAuthError[\"SYSTEM_CANCEL\"] = 15] = \"SYSTEM_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_CANCEL\"] = 16] = \"USER_CANCEL\";\n    BiometricAuthError[BiometricAuthError[\"USER_FALLBACK\"] = 17] = \"USER_FALLBACK\";\n})(BiometricAuthError || (BiometricAuthError = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from \"@capacitor/core\";\nconst NativeBiometric = registerPlugin(\"NativeBiometric\", {\n    web: () => import(\"./web\").then((m) => new m.NativeBiometricWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeBiometric };\n//# sourceMappingURL=index.js.map","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { applyStyles } from './animation';\nimport { SECOND } from './dateFormat';\nimport safeExec from './safeExec';\nimport { throttle } from './schedulers';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nconst WINDOW_RESIZE_THROTTLE_MS = IS_TELEGRAM_APP ? 25 : 250;\nconst WINDOW_ORIENTATION_CHANGE_THROTTLE_MS = IS_IOS ? 350 : 250;\nconst SAFE_AREA_INITIALIZATION_DELAY = SECOND;\nconst SAFE_AREA_TOLERANCE_HEIGHT_PX = 40;\n\nconst initialHeight = window.innerHeight;\nconst virtualKeyboardOpenListeners: NoneToVoidFunction[] = [];\n\nlet currentWindowSize = updateSizes();\n\nwindow.addEventListener('orientationchange', throttle(() => {\n  currentWindowSize = updateSizes();\n}, WINDOW_ORIENTATION_CHANGE_THROTTLE_MS, false));\n\nif (!IS_IOS) {\n  window.addEventListener('resize', throttle(() => {\n    currentWindowSize = updateSizes();\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nif (IS_CAPACITOR) {\n  void import('@capacitor/keyboard')\n    .then(({ Keyboard }) => {\n      void Keyboard.addListener('keyboardDidShow', async (info) => {\n        await adjustBodyPaddingForKeyboard(info.keyboardHeight);\n\n        for (const cb of virtualKeyboardOpenListeners) {\n          safeExec(cb);\n        }\n      });\n\n      void Keyboard.addListener('keyboardWillHide', () => {\n        void adjustBodyPaddingForKeyboard(0);\n      });\n    });\n}\n\nif ('visualViewport' in window && (IS_IOS || IS_ANDROID)) {\n  window.visualViewport!.addEventListener('resize', throttle((e: Event) => {\n    const target = e.target as VisualViewport;\n\n    // In the TMA application on iOS, the VisualViewport behaves incorrectly,\n    // not taking into account the height of the virtual keyboard.\n    if (IS_IOS && IS_TELEGRAM_APP) {\n      const keyboardHeight = initialHeight - target.height;\n      void adjustBodyPaddingForKeyboard(keyboardHeight > SAFE_AREA_TOLERANCE_HEIGHT_PX ? keyboardHeight : 0)\n        .finally(() => {\n          requestMeasure(() => {\n            currentWindowSize = {\n              ...getWindowSize(),\n              height: target.height,\n            };\n          });\n        });\n    } else {\n      patchVh();\n      currentWindowSize = {\n        ...getWindowSize(),\n        height: target.height,\n      };\n    }\n  }, WINDOW_RESIZE_THROTTLE_MS, true));\n}\n\nexport function updateSizes() {\n  patchVh();\n  patchSafeAreaProperty();\n\n  return getWindowSize();\n}\n\nfunction getWindowSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    screenHeight: window.screen.height,\n    safeAreaTop: getSafeAreaTop(),\n    safeAreaBottom: getSafeAreaBottom(),\n  };\n}\n\nexport default {\n  get: () => currentWindowSize,\n  getIsKeyboardVisible: () => initialHeight > currentWindowSize.height,\n};\n\n// Registers a callback that will be fired each time the virtual keyboard is opened and the <body> size is adjusted\nexport function onVirtualKeyboardOpen(cb: NoneToVoidFunction) {\n  virtualKeyboardOpenListeners.push(cb);\n}\n\nfunction patchVh() {\n  if (!(IS_IOS || IS_ANDROID) || IS_CAPACITOR || (IS_IOS && IS_TELEGRAM_APP)) return;\n\n  const height = IS_IOS ? window.visualViewport!.height + window.visualViewport!.pageTop : window.innerHeight;\n\n  requestMutation(() => {\n    const vh = height * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n  });\n}\n\nfunction adjustBodyPaddingForKeyboard(keyboardHeight: number) {\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      applyStyles(document.body, { paddingBottom: keyboardHeight ? `${keyboardHeight}px` : '' });\n      resolve();\n    });\n  });\n}\n\nfunction patchSafeAreaProperty() {\n  toggleSafeAreaClasses();\n\n  // WebKit has issues with this property on page load\n  // https://bugs.webkit.org/show_bug.cgi?id=191872\n  setTimeout(toggleSafeAreaClasses, SAFE_AREA_INITIALIZATION_DELAY);\n}\n\nfunction getSafeAreaTop() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-top-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction getSafeAreaBottom() {\n  const value = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--safe-area-bottom-value'), 10);\n\n  return Number.isNaN(value) ? 0 : value;\n}\n\nfunction toggleSafeAreaClasses() {\n  const { safeAreaTop, safeAreaBottom } = getWindowSize();\n  const { documentElement } = document;\n\n  requestMutation(() => {\n    documentElement.classList.toggle('with-safe-area-top', !Number.isNaN(safeAreaTop) && safeAreaTop > 0);\n    documentElement.classList.toggle('with-safe-area-bottom', !Number.isNaN(safeAreaBottom) && safeAreaBottom > 0);\n  });\n}\n","import type { Telegram, WebApp } from '@twa-dev/types';\nimport { getActions } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { logDebugError } from '../logs';\nimport { getIsMobileTelegramApp } from '../windowEnvironment';\nimport { updateSizes } from '../windowSize';\n\ndeclare global {\n  interface Window {\n    Telegram: Telegram;\n  }\n}\n\nlet webApp: WebApp | undefined;\nlet isBiometricInited = false;\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet disableSwipeRequests = 0;\n\nexport function initTelegramApp() {\n  webApp = window.Telegram?.WebApp;\n\n  if (!webApp) {\n    logDebugError('[telegram] Can\\'t initialize Telegram Mini-App');\n\n    return;\n  }\n\n  enableTelegramMiniAppSwipeToClose();\n\n  webApp.lockOrientation();\n  webApp.SecondaryButton.setParams({ position: 'bottom' });\n  webApp.BackButton.hide();\n  webApp.SettingsButton.hide();\n  webApp.expand();\n\n  if (getIsMobileTelegramApp()) {\n    webApp.onEvent('safeAreaChanged', updateSafeAreaProperties);\n    webApp.onEvent('contentSafeAreaChanged', updateSafeAreaProperties);\n  }\n\n  webApp.onEvent('viewportChanged', updateViewport);\n  updateSafeAreaProperties();\n  initTelegramAppBiometric();\n\n  webApp.ready();\n}\n\nexport function initTelegramWithGlobal(global: GlobalState) {\n  if (global.isFullscreen) {\n    webApp!.requestFullscreen();\n  }\n\n  webApp!.onEvent('fullscreenChanged', updateFullscreenState);\n  webApp!.onEvent('fullscreenFailed', onFullscreenFailed);\n}\n\nexport function initTelegramAppBiometric() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager || isBiometricInited) return;\n\n  isBiometricInited = true;\n  biometricManager.init(() => {\n    const {\n      isBiometricAvailable, biometricType, isAccessGranted, isAccessRequested,\n    } = biometricManager;\n\n    isNativeBiometricAuthSupported = isBiometricAvailable && (isAccessGranted || !isAccessRequested);\n    if (webApp!.platform === 'ios') {\n      isFaceIdAvailable = biometricType === 'face';\n      isTouchIdAvailable = biometricType === 'finger';\n    }\n  });\n}\n\nexport function getIsTelegramBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsTelegramFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsTelegramTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport function getIsTelegramBiometricsRestricted() {\n  const biometricManager = webApp?.BiometricManager;\n  if (!biometricManager) return undefined;\n\n  const { isBiometricAvailable, isAccessGranted, isAccessRequested } = biometricManager;\n\n  return isBiometricAvailable && isAccessRequested && !isAccessGranted;\n}\n\nexport function getTelegramApp() {\n  return webApp;\n}\n\nexport function getTelegramAppAsync(): Promise<WebApp | undefined> {\n  return new Promise((resolve) => {\n    window.addEventListener('DOMContentLoaded', () => {\n      resolve(getTelegramApp());\n    });\n  });\n}\n\nfunction updateViewport({ isStateStable }: { isStateStable: boolean }) {\n  if (isStateStable) {\n    updateSizes();\n  }\n}\n\nfunction updateSafeAreaProperties() {\n  const {\n    top, left, right, bottom,\n  } = webApp!.safeAreaInset;\n  const {\n    top: contentTop, left: contentLeft, right: contentRight, bottom: contentBottom,\n  } = webApp!.contentSafeAreaInset;\n\n  document.documentElement.style.setProperty('--safe-area-top', `${top + contentTop}px`);\n  document.documentElement.style.setProperty('--safe-area-left', `${left + contentLeft}px`);\n  document.documentElement.style.setProperty('--safe-area-right', `${right + contentRight}px`);\n  document.documentElement.style.setProperty('--safe-area-bottom', `${bottom + contentBottom}px`);\n}\n\nfunction updateFullscreenState() {\n  if (webApp!.isFullscreen) {\n    getActions().openFullscreen();\n    disableTelegramMiniAppSwipeToClose();\n  } else {\n    getActions().closeFullscreen();\n    enableTelegramMiniAppSwipeToClose();\n  }\n}\n\nfunction onFullscreenFailed(params: { error: 'UNSUPPORTED' | 'ALREADY_FULLSCREEN' }) {\n  enableTelegramMiniAppSwipeToClose();\n  // This error occurs when the user has requested fullscreen, but the application is already open fullscreen.\n  // In this case, we just mark in the global that the application is running in fullscreen mode.\n  if (params.error === 'ALREADY_FULLSCREEN') {\n    getActions().openFullscreen();\n    disableTelegramMiniAppSwipeToClose();\n  }\n}\n\nexport function disableTelegramMiniAppSwipeToClose() {\n  disableSwipeRequests += 1;\n\n  if (disableSwipeRequests === 1) {\n    webApp?.disableVerticalSwipes();\n  }\n}\n\nexport function enableTelegramMiniAppSwipeToClose() {\n  disableSwipeRequests = Math.max(0, disableSwipeRequests - 1);\n\n  if (disableSwipeRequests === 0) {\n    webApp?.enableVerticalSwipes();\n  }\n}\n","import type { BiometricRequestAccessParams } from '@twa-dev/types';\n\nimport { APP_NAME } from '../../config';\nimport { mapValues } from '../iteratees';\nimport safeExec from '../safeExec';\nimport { getTelegramApp } from '../telegram';\n\nfunction requestBiometricAccess(options: BiometricRequestAccessParams) {\n  return new Promise((resolve, reject) => {\n    getTelegramApp()!.BiometricManager.requestAccess(options, (accessGranted) => {\n      if (accessGranted) {\n        resolve(accessGranted);\n      } else {\n        reject(new Error('Access denied'));\n      }\n    });\n  });\n}\n\nexport async function setBiometricCredentials(password: string) {\n  const biometricManager = getTelegramApp()!.BiometricManager;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Access to biometric data has not been granted');\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    biometricManager.updateBiometricToken(password, (updated) => {\n      if (updated) {\n        resolve(password);\n      } else {\n        reject(new Error('Failed to update or save the biometric token'));\n      }\n    });\n  });\n}\n\nexport async function verifyIdentity() {\n  const biometricManager = getTelegramApp()!.BiometricManager;\n\n  if (!biometricManager.isAccessGranted) {\n    const isAccessGranted = await requestBiometricAccess({ reason: APP_NAME });\n    if (!isAccessGranted) {\n      throw new Error('Biometric access was denied. Please grant access to proceed.');\n    }\n  }\n\n  return new Promise<{ success: boolean; token: string }>((resolve, reject) => {\n    biometricManager.authenticate(\n      { reason: '' },\n      // @ts-ignore Wrong type signature https://github.com/twa-dev/types/pull/12\n      (success: boolean, token: string) => {\n        if (success) {\n          resolve({ success, token });\n        } else {\n          reject(new Error('Biometric authentication failed. Please try again.'));\n        }\n      },\n    );\n  });\n}\n\nexport function signCustomData(\n  initDataFields: AnyLiteral,\n  payload: string,\n  options?: {\n    shouldSignHash?: boolean;\n    isPayloadBinary?: boolean;\n  },\n): Promise<{ result: string; resultUnsafe: AnyLiteral }> {\n  const app = getTelegramApp()!;\n\n  return new Promise((resolve, reject) => {\n    (app as any).invokeCustomMethod('prepareSignedPayload', {\n      init_data: app.initData,\n      init_data_sign_fields: initDataFields,\n      payload,\n      ...(options?.shouldSignHash && { sign_sha256: true }),\n      ...(options?.isPayloadBinary && { is_payload_binary: true }),\n    }, (err: Error, result: string) => {\n      if (result) {\n        resolve({\n          result,\n          resultUnsafe: parseResultUnsafe(result),\n        });\n      } else {\n        reject(err || 'Unknown Error');\n      }\n    });\n  });\n}\n\nfunction parseResultUnsafe(appData: string) {\n  const resultUnsafe = (window.Telegram as any).Utils.urlParseQueryString(appData);\n\n  return mapValues(resultUnsafe, (value: string) => {\n    if ((value.startsWith('{') && value.endsWith('}')) || (value.startsWith('[') && value.endsWith(']'))) {\n      return safeExec(() => JSON.parse(value));\n    }\n\n    return value;\n  });\n}\n","import type { AuthConfig, WebAuthn } from './types';\n\nimport { APP_NAME } from '../../config';\nimport { randomBytes } from '../random';\nimport { pause } from '../schedulers';\n\ndeclare global {\n  interface AuthenticationExtensionsClientInputs {\n    credBlob?: Uint8Array; // max 32 bytes\n    getCredBlob?: boolean;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { salt1: Uint8Array }; // 32-byte random data\n  }\n\n  interface AuthenticationExtensionsClientOutputs {\n    credBlob?: boolean;\n    getCredBlob?: Uint8Array;\n    hmacCreateSecret?: boolean;\n    hmacGetSecret?: { output1: Uint8Array };\n  }\n\n  interface AuthenticatorResponse {\n    getTransports?: () => AuthenticatorTransport[];\n  }\n}\n\nexport interface CredentialCreationResult {\n  type: 'credBlob' | 'userHandle';\n  password: {\n    credBlob: string;\n    userHandle: string;\n  };\n  credential: PublicKeyCredential;\n}\n\nenum PubkeyAlg {\n  Ed25519 = -8,\n  ES256 = -7,\n  RS256 = -257,\n}\n\nconst CREDENTIAL_SIZE = 32;\nconst RP_NAME = APP_NAME;\nconst USER_NAME = APP_NAME;\nconst PAUSE = 300;\nconst CREDENTIAL_TIMEOUT = 120000;\n\nasync function createCredential() {\n  const rpId = window.location.hostname;\n\n  const userHandle = randomBytes(CREDENTIAL_SIZE);\n  const credBlob = randomBytes(CREDENTIAL_SIZE);\n\n  const options: CredentialCreationOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      rp: {\n        name: RP_NAME,\n        id: rpId,\n      },\n      user: {\n        id: userHandle,\n        name: USER_NAME,\n        displayName: RP_NAME,\n      },\n      pubKeyCredParams: [\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.ES256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.RS256,\n        },\n        {\n          type: 'public-key',\n          alg: PubkeyAlg.Ed25519,\n        },\n      ],\n      authenticatorSelection: {\n        requireResidentKey: true,\n        userVerification: 'preferred',\n      },\n      extensions: {\n        credBlob,\n        hmacCreateSecret: true,\n      },\n      timeout: CREDENTIAL_TIMEOUT,\n      excludeCredentials: [],\n    },\n  };\n\n  const credential = (await navigator.credentials.create(options)) as PublicKeyCredential;\n\n  if (!credential) {\n    throw new Error('Missing credential');\n  }\n\n  const extensions = credential.getClientExtensionResults();\n  const type = extensions.credBlob ? 'credBlob' : 'userHandle';\n\n  return {\n    type,\n    password: {\n      credBlob: Buffer.from(credBlob).toString('hex'),\n      userHandle: Buffer.from(userHandle).toString('hex'),\n    },\n    credential,\n  } as CredentialCreationResult;\n}\n\nasync function verify({ credential, password, type }: CredentialCreationResult) {\n  await pause(PAUSE);\n\n  const transports = credential.response\n    && credential.response.getTransports\n    && credential.response.getTransports();\n\n  const credentialId = Buffer.from(credential.rawId).toString('hex');\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: credential.rawId,\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (!assertion) {\n    throw new Error('Missing authentication');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n  let result: string | undefined;\n  switch (type) {\n    case 'userHandle': {\n      if (!response.userHandle) {\n        throw new Error('Missing stored userHandle');\n      }\n      if (!Buffer.from(password.userHandle, 'hex').equals(Buffer.from(response.userHandle))) {\n        throw new Error('Stored blob not equals passed blob');\n      }\n      result = password.userHandle;\n      break;\n    }\n  }\n\n  if (!result) {\n    throw new Error('Missing stored blob');\n  }\n\n  const config: WebAuthn = {\n    kind: 'webauthn',\n    type,\n    credentialId,\n    transports,\n  };\n\n  return { config, password: result };\n}\n\nasync function getPassword(config: AuthConfig) {\n  if (config.kind !== 'webauthn') {\n    throw new Error('Unexpected auth kind');\n  }\n\n  const { credentialId, transports, type } = config;\n\n  const controller = new AbortController();\n  const signal = controller.signal;\n\n  const options: CredentialRequestOptions = {\n    publicKey: {\n      challenge: randomBytes(CREDENTIAL_SIZE),\n      allowCredentials: [\n        {\n          id: Buffer.from(credentialId, 'hex'),\n          type: 'public-key',\n          transports,\n        },\n      ],\n      userVerification: 'required',\n      extensions: {\n        getCredBlob: true,\n      },\n    },\n    signal,\n  };\n\n  const assertion = (await navigator.credentials.get(options)) as PublicKeyCredential;\n\n  if (signal.aborted) {\n    throw new Error('Verification canceled');\n  }\n\n  const response = assertion.response as AuthenticatorAssertionResponse;\n\n  const extensions = assertion.getClientExtensionResults();\n  if (type === 'userHandle') {\n    if (!response.userHandle) {\n      throw new Error('missing userHandle');\n    }\n    return Buffer.from(response.userHandle).toString('hex');\n  } else {\n    return Buffer.from(extensions.getCredBlob ?? '').toString('hex');\n  }\n}\n\nexport default {\n  createCredential,\n  verify,\n  getPassword,\n};\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { AuthConfig, BiometricsSetupResult } from './types';\nimport type { CredentialCreationResult } from './webAuthn';\n\nimport {\n  APP_NAME, IS_TELEGRAM_APP, NATIVE_BIOMETRICS_SERVER, NATIVE_BIOMETRICS_USERNAME,\n} from '../../config';\nimport { logDebugError } from '../logs';\nimport { randomBytes } from '../random';\nimport {\n  setBiometricCredentials as setTelegramBiometricCredentials,\n  verifyIdentity as verifyTelegramBiometricsIdentity,\n} from './telegram';\nimport webAuthn from './webAuthn';\n\nconst CREDENTIAL_SIZE = 32;\n\nasync function setupBiometrics({ credential }: { credential?: CredentialCreationResult }) {\n  let result: BiometricsSetupResult | undefined;\n\n  try {\n    if (!credential) {\n      const password = Buffer.from(randomBytes(CREDENTIAL_SIZE)).toString('hex');\n      const encryptedPassword = await window.electron?.encryptPassword(password);\n      if (!encryptedPassword) {\n        return result;\n      }\n\n      result = {\n        password,\n        config: {\n          kind: 'electron-safe-storage',\n          encryptedPassword,\n        },\n      };\n    } else {\n      result = await webAuthn.verify(credential);\n    }\n  } catch (err) {\n    logDebugError('setupBiometrics', err);\n  }\n\n  return result;\n}\n\nasync function setupNativeBiometrics(password: string): Promise<BiometricsSetupResult> {\n  if (IS_TELEGRAM_APP) {\n    await setTelegramBiometricCredentials(password);\n\n    return {\n      password,\n      config: { kind: 'native-biometrics' },\n    };\n  }\n\n  await NativeBiometric.setCredentials({\n    username: NATIVE_BIOMETRICS_USERNAME,\n    password,\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n\n  return {\n    password,\n    config: { kind: 'native-biometrics' },\n  };\n}\n\nfunction removeNativeBiometrics() {\n  if (IS_TELEGRAM_APP) {\n    return setTelegramBiometricCredentials('');\n  }\n\n  return NativeBiometric.deleteCredentials({\n    server: NATIVE_BIOMETRICS_SERVER,\n  });\n}\n\nasync function getPassword(config: AuthConfig) {\n  let password: string | undefined;\n\n  try {\n    if (config.kind === 'webauthn') {\n      password = await webAuthn.getPassword(config);\n    } else if (config.kind === 'electron-safe-storage') {\n      password = await window.electron?.decryptPassword(config.encryptedPassword);\n    } else if (IS_TELEGRAM_APP && config.kind === 'native-biometrics') {\n      const { success: isVerified, token } = await verifyTelegramBiometricsIdentity();\n\n      if (!isVerified) return undefined;\n      password = token;\n    } else if (config.kind === 'native-biometrics') {\n      const isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        isWeakAuthenticatorAllowed: true,\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n\n      if (!isVerified) return undefined;\n\n      const credentials = await NativeBiometric.getCredentials({\n        server: NATIVE_BIOMETRICS_SERVER,\n      });\n      password = credentials.password;\n    } else {\n      throw new Error('Unexpected auth kind');\n    }\n  } catch (err) {\n    logDebugError('getPassword', err);\n  }\n\n  return password;\n}\n\nexport default {\n  setupBiometrics,\n  setupNativeBiometrics,\n  removeNativeBiometrics,\n  getPassword,\n  webAuthn,\n};\n","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SplashScreen = registerPlugin('SplashScreen', {\n    web: () => import('./web').then(m => new m.SplashScreenWeb()),\n});\nexport * from './definitions';\nexport { SplashScreen };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst SafeArea = registerPlugin('SafeArea', {\n    web: () => import('./web').then(m => new m.SafeAreaWeb()),\n});\nexport * from './definitions';\nexport { SafeArea };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst AppLauncher = registerPlugin('AppLauncher', {\n    web: () => import('./web').then(m => new m.AppLauncherWeb()),\n});\nexport * from './definitions';\nexport { AppLauncher };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\n\nimport type { BottomSheetPlugin } from './definitions';\n\nconst BottomSheet = registerPlugin<BottomSheetPlugin>('BottomSheet');\n\nexport * from './definitions';\nexport { BottomSheet };\n","import type React from '../lib/teact/teact';\n\nexport const stopEvent = (e: React.UIEvent | Event | React.FormEvent) => {\n  e.stopPropagation();\n  e.preventDefault();\n};\n\nexport function listenOnce<T extends Event = Event>(\n  target: Pick<EventTarget, 'addEventListener' | 'removeEventListener'>,\n  name: string,\n  handler: (event: T) => void,\n) {\n  const handleEvent = (event: Event) => {\n    target.removeEventListener(name, handleEvent);\n    handler(event as T);\n  };\n  target.addEventListener(name, handleEvent);\n}\n","import type { DeviceInfo, Feature } from '@tonconnect/protocol';\n\nimport type { ApiAccountWithTon } from '../api/types';\n\nimport {\n  APP_NAME, IS_EXTENSION, IS_TELEGRAM_APP, TONCONNECT_PROTOCOL_VERSION,\n} from '../config';\nimport packageJson from '../../package.json';\nimport { DEFAULT_MAX_MESSAGES, W5_MAX_MESSAGES } from '../api/chains/ton/constants';\nimport { getMaxMessagesInTransaction } from './ton/transfer';\n\ntype DevicePlatform = DeviceInfo['platform'];\n\n/*\n This function is called in TonConnect `connect` method (where we know the wallet version)\n and in JS Bridge (where no account is selected, so we show maximum number of messages).\n*/\nexport function tonConnectGetDeviceInfo(account?: ApiAccountWithTon): DeviceInfo {\n  const features: Feature[] = [\n    'SendTransaction', // TODO DEPRECATED\n    {\n      name: 'SendTransaction',\n      maxMessages: account ? getTonConnectMaxMessages(account) : W5_MAX_MESSAGES,\n    },\n  ];\n\n  if (!account || account.type !== 'ledger') {\n    features.push({\n      name: 'SignData',\n      types: ['text', 'binary', 'cell'],\n    });\n  }\n\n  return {\n    platform: getPlatform(),\n    appName: APP_NAME,\n    appVersion: packageJson.version,\n    maxProtocolVersion: TONCONNECT_PROTOCOL_VERSION,\n    features,\n  };\n}\n\n/** How many messages can be sent in a single TON Connect transaction sending */\nexport function getTonConnectMaxMessages(account: ApiAccountWithTon) {\n  const { type } = account;\n\n  if (type === 'ledger') {\n    return DEFAULT_MAX_MESSAGES; // TODO Remove after DEXs support the 1 message limit\n  } else {\n    return getMaxMessagesInTransaction(account);\n  }\n}\n\nfunction getPlatform(): DevicePlatform {\n  const { userAgent } = navigator;\n  const platform = navigator.platform || navigator?.userAgentData?.platform || '';\n\n  const macosPlatforms = ['macOS', 'Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  const windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  const iphonePlatforms = ['iPhone'];\n  const ipadPlatforms = ['iPad', 'iPod'];\n\n  let devicePlatform: DevicePlatform | undefined;\n\n  if (IS_EXTENSION || IS_TELEGRAM_APP) {\n    devicePlatform = 'browser';\n  } else if (/Android/.test(userAgent)) {\n    devicePlatform = 'android';\n  } else if (iphonePlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'iphone';\n  } else if (ipadPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'ipad';\n  } else if (macosPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'mac';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    devicePlatform = 'windows';\n  } else if (/Linux/.test(platform)) {\n    devicePlatform = 'linux';\n  } else {\n    devicePlatform = 'browser';\n  }\n\n  return devicePlatform;\n}\n","import type { DeviceInfo } from '@tonconnect/protocol';\n\nimport type { BridgeApi } from '../provider/bridgeApi';\nimport type { BrowserTonConnectBridgeMethods } from '../provider/tonConnectBridgeApi';\n\ninterface TonConnectProperties {\n  deviceInfo: DeviceInfo;\n  protocolVersion: number;\n  isWalletBrowser: boolean;\n}\n\ntype ApiMethodName = keyof BridgeApi;\ntype ApiArgs = Parameters<Required<BridgeApi>[ApiMethodName]>;\ntype ApiMethodResponse = ReturnType<Required<BridgeApi>[ApiMethodName]>;\n\ninterface RequestState {\n  resolve: AnyToVoidFunction;\n  reject: AnyToVoidFunction;\n}\n\ninterface OutMessageData {\n  channel: string;\n  messageId: string;\n  type: 'callMethod';\n  name: ApiMethodName;\n  args: ApiArgs;\n}\n\ntype InMessageData = {\n  channel: string;\n  messageId: string;\n  type: 'methodResponse';\n  response?: ApiMethodResponse;\n  error?: { message: string };\n} | {\n  channel: string;\n  messageId: string;\n  type: 'update';\n  update: string;\n};\n\ntype CordovaPostMessageTarget = { postMessage: AnyToVoidFunction };\ntype Handler = (update: string) => void;\n\n/**\n * Allows calling functions, provided by another messenger (the parent window, or the Capacitor main view), in this messenger.\n * The other messenger must provide the functions using `createReverseIFrameInterface`.\n *\n * `PostMessageConnect` is not used here (as any other dependencies) because this needs to be easily stringified.\n */\nexport function initConnector(\n  bridgeKey: string,\n  channel: string,\n  target: Window | CordovaPostMessageTarget,\n  tonConnectProperties: TonConnectProperties,\n) {\n  if ((window as any)[bridgeKey]) return;\n\n  const TON_CONNECT_BRIDGE_METHODS = ['connect', 'restoreConnection', 'disconnect', 'send'] as const;\n\n  const requestStates = new Map<string, RequestState>();\n  const updateHandlers = new Set<Handler>();\n\n  setupPostMessageHandler();\n  setupGlobalOverrides();\n  initTonConnect();\n\n  function setupPostMessageHandler() {\n    window.addEventListener('message', ({ data }) => {\n      const message = data as InMessageData;\n\n      if (message.channel !== channel) {\n        return;\n      }\n\n      if (message.type === 'methodResponse') {\n        const requestState = requestStates.get(message.messageId);\n        if (!requestState) return;\n\n        requestStates.delete(message.messageId);\n\n        if (message.error) {\n          requestState.reject(message.error);\n        } else {\n          requestState.resolve(message.response);\n        }\n      } else if (message.type === 'update') {\n        updateHandlers.forEach((handler) => handler(message.update));\n      }\n    });\n  }\n\n  function setupGlobalOverrides() {\n    window.open = (url) => {\n      url = sanitizeUrl(url);\n      if (url) {\n        void callApi('window:open', { url });\n      }\n\n      // eslint-disable-next-line no-null/no-null\n      return null;\n    };\n\n    window.close = () => {\n      void callApi('window:close');\n    };\n\n    window.addEventListener('click', (e) => {\n      if (!(e.target instanceof HTMLElement)) return;\n\n      const { href, target } = e.target.closest('a') || {};\n      if (href && (target === '_blank' || !href.startsWith('http'))) {\n        e.preventDefault();\n\n        const url = sanitizeUrl(href);\n        if (url) {\n          void callApi('window:open', { url });\n        }\n      }\n    }, false);\n  }\n\n  function initTonConnect() {\n    const methods = Object.fromEntries(TON_CONNECT_BRIDGE_METHODS.map((name) => {\n      return [\n        name,\n        (...args: Parameters<BrowserTonConnectBridgeMethods[typeof name]>) => callApi(`tonConnect:${name}`, ...args),\n      ];\n    }));\n\n    function addUpdateHandler(cb: Handler) {\n      updateHandlers.add(cb);\n\n      return () => {\n        updateHandlers.delete(cb);\n      };\n    }\n\n    (window as any)[bridgeKey] = {\n      tonconnect: {\n        ...tonConnectProperties,\n        ...methods,\n        listen: addUpdateHandler,\n      },\n    };\n  }\n\n  function callApi<ApiMethodName extends keyof BridgeApi>(\n    name: ApiMethodName,\n    ...args: ApiArgs\n  ) {\n    const messageId = generateUniqueId();\n\n    const promise = new Promise<any>((resolve, reject) => {\n      requestStates.set(messageId, { resolve, reject });\n    });\n\n    const messageData: OutMessageData = {\n      channel,\n      messageId,\n      type: 'callMethod',\n      name,\n      args,\n    };\n\n    if ('parent' in target) {\n      target.postMessage(messageData, '*');\n    } else {\n      target.postMessage(JSON.stringify(messageData));\n    }\n\n    return promise;\n  }\n\n  function generateUniqueId() {\n    return Date.now().toString(36) + Math.random().toString(36).slice(2);\n  }\n\n  function sanitizeUrl(url?: string | URL) {\n    if (!url) return undefined;\n\n    // eslint-disable-next-line no-control-regex\n    url = String(url).trim().replace(/[\\x00-\\x1F\\x7F]/g, '');\n\n    if (url.startsWith('//')) {\n      return `https:${url}`;\n    }\n\n    const UNSAFE_PATTERNS = [\n      /^\\s*javascript\\s*:/i,\n      /^\\s*data\\s*:/i,\n      /^\\s*vbscript\\s*:/i,\n      /^\\s*file\\s*:/i,\n      /^\\s*about\\s*:/i,\n      /^\\s*blob\\s*:/i,\n      /^\\s*filesystem\\s*:/i,\n      /^\\s*chrome(-extension)?\\s*:/i,\n      /^\\s*moz-extension\\s*:/i,\n      /^\\s*ms-browser-extension\\s*:/i,\n    ];\n\n    if (UNSAFE_PATTERNS.some((p) => p.test(url))) {\n      return undefined;\n    }\n\n    if (!/^[a-z][a-z0-9+.-]*:/i.test(url)) {\n      return undefined;\n    }\n\n    return url;\n  }\n}\n\nexport const initConnectorString = initConnector.toString();\n","import type { ConnectEventError, ConnectEventSuccess } from '@tonconnect/protocol';\n\nexport interface TransactionPayload {\n  valid_until?: number;\n  network?: CHAIN;\n  from?: string; // https://github.com/ton-blockchain/ton-connect/blob/main/wallet-guidelines.md#multi-accounts\n  messages: TransactionPayloadMessage[];\n}\n\nexport interface TransactionPayloadMessage {\n  address: string;\n  amount: string;\n  payload?: string;\n  stateInit?: string;\n}\n\n// This and the other enums can be imported from @tonconnect/protocol. We copy the enums instead of importing because\n// importing that module increases the compiled code size significantly.\n\nexport enum CONNECT_EVENT_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  MANIFEST_NOT_FOUND_ERROR = 2,\n  MANIFEST_CONTENT_ERROR = 3,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport enum SEND_TRANSACTION_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport type AllErrorCodes = CONNECT_EVENT_ERROR_CODES | SEND_TRANSACTION_ERROR_CODES;\nexport type ConnectEvent = ConnectEventSuccess | ConnectEventError;\n\nexport interface ApiTonConnectProof {\n  timestamp: number;\n  domain: string;\n  payload: string;\n}\n\nexport enum CHAIN {\n  MAINNET = '-239',\n  TESTNET = '-3',\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type {\n  AppRequest,\n  ConnectEvent,\n  ConnectEventError,\n  ConnectRequest,\n  RpcMethod,\n  WalletResponse,\n} from '@tonconnect/protocol';\nimport { getActions, getGlobal } from '../../../global';\n\nimport { CONNECT_EVENT_ERROR_CODES, SEND_TRANSACTION_ERROR_CODES } from '../../../api/tonConnect/types';\n\nimport { TONCONNECT_PROTOCOL_VERSION } from '../../../config';\nimport { callApi } from '../../../api';\nimport { logDebugError } from '../../logs';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../windowEnvironment';\n\nexport interface BrowserTonConnectBridgeMethods {\n  connect(protocolVersion: number, message: ConnectRequest): Promise<ConnectEvent>;\n\n  restoreConnection(): Promise<ConnectEvent>;\n\n  disconnect(): Promise<void>;\n\n  send<T extends RpcMethod>(message: AppRequest<T>): Promise<WalletResponse<T>>;\n}\n\nlet requestId = 0;\n\nexport function buildTonConnectBridgeApi(pageUrl: string): BrowserTonConnectBridgeMethods | undefined {\n  const {\n    openLoadingOverlay,\n    closeLoadingOverlay,\n  } = getActions();\n\n  const url = new URL(pageUrl).origin.toLowerCase();\n\n  return {\n    connect: async (protocolVersion, request) => {\n      try {\n        if (protocolVersion > TONCONNECT_PROTOCOL_VERSION) {\n          return buildConnectError(\n            requestId,\n            'Unsupported protocol version',\n            CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR,\n          );\n        }\n        verifyConnectRequest(request);\n\n        openLoadingOverlay();\n\n        const response = await callApi(\n          'tonConnect_connect',\n          buildDappRequest(url),\n          request,\n          requestId,\n        );\n\n        closeLoadingOverlay();\n\n        requestId++;\n\n        return response;\n      } catch (err: any) {\n        logDebugError('useDAppBridge:connect', err);\n\n        if ('event' in err && 'id' in err && 'payload' in err) {\n          return err;\n        }\n\n        return buildConnectError(\n          requestId,\n          err?.message,\n          CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n        );\n      }\n    },\n\n    restoreConnection: async () => {\n      try {\n        const response = await callApi(\n          'tonConnect_reconnect',\n          buildDappRequest(url),\n          requestId,\n        );\n\n        requestId++;\n\n        return response;\n      } catch (err: any) {\n        logDebugError('useDAppBridge:reconnect', err);\n\n        if ('event' in err && 'id' in err && 'payload' in err) {\n          return err;\n        }\n\n        return buildConnectError(\n          requestId,\n          err?.message,\n          CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n        );\n      }\n    },\n\n    disconnect: async () => {\n      requestId = 0;\n\n      await callApi(\n        'tonConnect_disconnect',\n        buildDappRequest(url),\n        { id: requestId.toString(), method: 'disconnect', params: [] },\n      );\n    },\n\n    send: async <T extends RpcMethod>(request: AppRequest<T>) => {\n      requestId++;\n\n      const global = getGlobal();\n      const isConnected = global.byAccountId[global.currentAccountId!].dapps?.some((dapp) => dapp.url === url);\n\n      if (!isConnected) {\n        return {\n          error: {\n            code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR,\n            message: 'Unknown app',\n          },\n          id: request.id.toString(),\n        };\n      }\n\n      const dappRequest = buildDappRequest(url);\n\n      try {\n        switch (request.method) {\n          case 'disconnect': {\n            return (await callApi(\n              'tonConnect_disconnect',\n              dappRequest,\n              request,\n            ))!;\n          }\n\n          case 'sendTransaction': {\n            const result = await callApi(\n              'tonConnect_sendTransaction',\n              dappRequest,\n              request,\n            );\n\n            if (IS_DELEGATED_BOTTOM_SHEET) {\n              void BottomSheet.applyScrollPatch();\n            }\n\n            return result!;\n          }\n\n          case 'signData': {\n            return (await callApi(\n              'tonConnect_signData',\n              dappRequest,\n              request,\n            ))!;\n          }\n\n          default: {\n            const anyRequest = request;\n\n            return {\n              id: String(anyRequest.id),\n              error: {\n                code: SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR,\n                message: `Method \"${anyRequest.method}\" is not supported`,\n              },\n            };\n          }\n        }\n      } catch (err: any) {\n        logDebugError('useDAppBridge:send', err);\n\n        return {\n          id: String(request.id),\n          error: {\n            code: SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR,\n            message: err?.message,\n          },\n        };\n      }\n    },\n  };\n}\n\nfunction buildConnectError(\n  id: number,\n  msg = 'Unknown error.',\n  code?: CONNECT_EVENT_ERROR_CODES,\n): ConnectEventError {\n  return {\n    event: 'connect_error',\n    id,\n    payload: {\n      code: code || CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR,\n      message: msg,\n    },\n  };\n}\n\nfunction verifyConnectRequest(request: ConnectRequest) {\n  if (!(request && request.manifestUrl && request.items?.length)) {\n    throw new Error('Wrong request data');\n  }\n}\n\nfunction buildDappRequest(origin: string) {\n  return {\n    url: origin,\n    isUrlEnsured: true,\n    accountId: getGlobal().currentAccountId,\n  };\n}\n","import { getActions } from '../../../global';\n\nimport { openDeeplinkOrUrl } from '../../deeplink';\nimport { buildTonConnectBridgeApi } from './tonConnectBridgeApi';\n\nexport type BridgeApi = ReturnType<typeof buildBridgeApi>;\n\nexport function buildBridgeApi(pageUrl: string) {\n  const { closeBrowser } = getActions();\n\n  const tonConnectApi = buildTonConnectBridgeApi(pageUrl);\n  const prefixedTonConnectApi = tonConnectApi ? prefixApi(tonConnectApi, 'tonConnect:') : undefined;\n\n  return {\n    'window:open'({ url }: { url: string }) {\n      void openDeeplinkOrUrl(url, { isExternal: true, isFromInAppBrowser: true });\n    },\n\n    'window:close'() {\n      closeBrowser();\n    },\n\n    ...prefixedTonConnectApi,\n  };\n}\n\nfunction prefixApi<Api extends { [K in keyof Api]: AnyFunction }, Prefix extends string>(\n  api: Api, prefix: Prefix,\n): { [K in keyof Api as `${Prefix}${string & K}`]: Api[K] } {\n  const newEntries = Object.entries(api).map(([k, v]) => [`${prefix}${k}`, v]);\n\n  return Object.fromEntries(newEntries);\n}\n","import { useRef } from '../lib/teact/teact';\n\n// Allows to use state value as \"silent\" dependency in hooks (not causing updates).\n// Also useful for state values that update frequently (such as controlled input value).\nexport function useStateRef<T>(value: T) {\n  const ref = useRef<T>(value);\n  ref.current = value;\n  return ref;\n}\n","import { useCallback } from '../lib/teact/teact';\n\nimport { useStateRef } from './useStateRef';\n\nexport default function useLastCallback<T extends AnyFunction>(callback?: T) {\n  const ref = useStateRef(callback);\n\n  // No need for ref dependency\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  return useCallback((...args: Parameters<T>) => ref.current?.(...args), []) as T;\n}\n","export default class InAppBrowserPostMessageAdapter {\n  constructor(private inAppBrowser: Cordova['InAppBrowser']) {\n  }\n\n  addEventListener(eventName: 'message', handler: (event: any) => void) {\n    void this.inAppBrowser.addEventListener(eventName, handler);\n  }\n\n  removeEventListener(eventName: 'message', handler: (event: any) => void) {\n    void this.inAppBrowser.removeEventListener(eventName, handler);\n  }\n\n  postMessage(message: any) {\n    void this.inAppBrowser.executeScript({\n      code: `window.dispatchEvent(new MessageEvent('message', { data: ${JSON.stringify(message)} }));`,\n    });\n  }\n}\n","import type { ApiChain, ApiNft } from '../api/types';\n\nimport { EMPTY_HASH_VALUE, MTW_CARDS_BASE_URL } from '../config';\nimport { base64ToHex } from './base64toHex';\nimport { logDebugError } from './logs';\n\n// Regexp from https://stackoverflow.com/a/3809435\nconst URL_REGEX = /[-a-z0-9@:%._+~#=]{1,256}\\.[a-z0-9()]{1,6}\\b([-a-z0-9()@:%_+.~#?&/=]*)/gi;\nconst VALID_PROTOCOLS = new Set(['http:', 'https:']);\n\n// The configuration does not contain data for NFT addresses, they must be configured separately\nconst EXPLORER_CONFIGURATIONS = {\n  ton: {\n    name: 'Tonscan',\n    base: {\n      mainnet: 'https://tonscan.org/',\n      testnet: 'https://testnet.tonscan.org/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}jetton/{address}',\n    transaction: '{base}tx/{hash}',\n  },\n  tron: {\n    name: 'Tronscan',\n    base: {\n      mainnet: 'https://tronscan.org/#/',\n      testnet: 'https://shasta.tronscan.org/#/',\n    },\n    address: '{base}address/{address}',\n    explorer: '{base}token20/{address}',\n    transaction: '{base}transaction/{hash}',\n  },\n};\n\nexport function isValidUrl(url: string, validProtocols = VALID_PROTOCOLS) {\n  try {\n    const match = url.match(URL_REGEX);\n    if (!match) return false;\n\n    const urlObject = new URL(url);\n\n    return validProtocols.has(urlObject.protocol);\n  } catch (e) {\n    logDebugError('isValidUrl', e);\n    return false;\n  }\n}\n\nexport function getHostnameFromUrl(url: string) {\n  try {\n    const urlObject = new URL(url);\n\n    return urlObject.hostname;\n  } catch (e) {\n    logDebugError('getHostnameFromUrl', e);\n    return url;\n  }\n}\n\nexport function getExplorerName(chain: ApiChain) {\n  return EXPLORER_CONFIGURATIONS[chain].name;\n}\n\nfunction getExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].base[isTestnet ? 'testnet' : 'mainnet'];\n}\n\nfunction getTokenExplorerBaseUrl(chain: ApiChain, isTestnet = false) {\n  return EXPLORER_CONFIGURATIONS[chain].explorer.replace('{base}', getExplorerBaseUrl(chain, isTestnet));\n}\n\nexport function getExplorerTransactionUrl(\n  chain: ApiChain,\n  transactionHash: string | undefined,\n  isTestnet?: boolean,\n) {\n  if (!transactionHash || transactionHash === EMPTY_HASH_VALUE) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].transaction\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{hash}', chain === 'ton' ? base64ToHex(transactionHash) : transactionHash);\n}\n\nexport function getExplorerAddressUrl(chain: ApiChain, address?: string, isTestnet?: boolean) {\n  if (!address) return undefined;\n\n  return EXPLORER_CONFIGURATIONS[chain].address\n    .replace('{base}', getExplorerBaseUrl(chain, isTestnet))\n    .replace('{address}', address);\n}\n\nexport function getExplorerNftCollectionUrl(nftCollectionAddress?: string, isTestnet?: boolean) {\n  if (!nftCollectionAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftCollectionAddress}`;\n}\n\nexport function getExplorerNftUrl(nftAddress?: string, isTestnet?: boolean) {\n  if (!nftAddress) return undefined;\n\n  return `${getExplorerBaseUrl('ton', isTestnet)}nft/${nftAddress}`;\n}\n\nexport function getExplorerTokenUrl(chain: ApiChain, slug?: string, address?: string, isTestnet?: boolean) {\n  if (!slug && !address) return undefined;\n\n  return address\n    ? getTokenExplorerBaseUrl(chain, isTestnet).replace('{address}', address)\n    : `https://coinmarketcap.com/currencies/${slug}/`;\n}\n\nexport function isTelegramUrl(url: string) {\n  return url.startsWith('https://t.me/');\n}\n\nexport function getCardNftImageUrl(nft: ApiNft): string | undefined {\n  return `${MTW_CARDS_BASE_URL}${nft.metadata.mtwCardId}.webp`;\n}\n","export function base64ToHex(base64: string): string {\n  const buffer = Buffer.from(base64, 'base64');\n  return buffer.toString('hex');\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport { compact } from '../../util/iteratees';\n\nexport type TextFilter = ('simple_markdown' | 'br');\n\nconst SIMPLE_MARKDOWN_REGEX = /(\\*\\*|__).+?\\1/g;\n\nexport default function renderText(\n  part: TeactNode,\n  filters: Array<TextFilter> = ['simple_markdown', 'br'],\n): TeactNode[] {\n  if (typeof part !== 'string') {\n    return [part];\n  }\n\n  return compact(filters.reduce((text, filter) => {\n    switch (filter) {\n      case 'simple_markdown':\n        return replaceSimpleMarkdown(text);\n\n      case 'br':\n        return addLineBreaks(text);\n    }\n\n    return text;\n  }, [part] as TeactNode[]));\n}\n\nfunction replaceSimpleMarkdown(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce<TeactNode[]>((result, part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const parts = part.split(SIMPLE_MARKDOWN_REGEX);\n    const entities: string[] = part.match(SIMPLE_MARKDOWN_REGEX) || [];\n    result.push(parts[0]);\n\n    return entities.reduce((entityResult: TeactNode[], entity, i) => {\n      entityResult.push(\n        entity.startsWith('**')\n          ? <b>{entity.replace(/\\*\\*/g, '')}</b>\n          : <i>{entity.replace(/__/g, '')}</i>,\n      );\n\n      const index = i * 2 + 2;\n      if (parts[index]) {\n        entityResult.push(parts[index]);\n      }\n\n      return entityResult;\n    }, result);\n  }, []);\n}\n\nfunction addLineBreaks(textParts: TeactNode[]): TeactNode[] {\n  return textParts.reduce((result: TeactNode[], part) => {\n    if (typeof part !== 'string') {\n      result.push(part);\n      return result;\n    }\n\n    const splittenParts = part\n      .split(/\\r\\n|\\r|\\n/g)\n      .reduce((parts: TeactNode[], line: string, i, source) => {\n        // This adds non-breaking space if line was indented with spaces, to preserve the indentation\n        const trimmedLine = line.trimStart();\n        const indentLength = line.length - trimmedLine.length;\n        parts.push(String.fromCharCode(160).repeat(indentLength) + trimmedLine);\n\n        if (i !== source.length - 1) {\n          parts.push(<br />);\n        }\n\n        return parts;\n      }, []);\n\n    return [...result, ...splittenParts];\n  }, []);\n}\n","import { ELECTRON_HOST_URL, IS_PACKAGED_ELECTRON } from '../config';\n\nconst cacheApi = self.caches;\n\nexport async function fetch(cacheName: string, key: string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const cache = await cacheApi.open(cacheName);\n    const response = await cache.match(request);\n    if (!response) {\n      return undefined;\n    }\n\n    return await response.json();\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function save(cacheName: string, key: string, data: AnyLiteral | Blob | ArrayBuffer | string) {\n  if (!cacheApi) {\n    return undefined;\n  }\n\n  try {\n    const cacheData = typeof data === 'string' || data instanceof Blob || data instanceof ArrayBuffer\n      ? data\n      : JSON.stringify(data);\n    // To avoid the error \"Request scheme 'webdocument' is unsupported\"\n    const request = IS_PACKAGED_ELECTRON\n      ? `${ELECTRON_HOST_URL}/${key.replace(/:/g, '_')}`\n      : new Request(key.replace(/:/g, '_'));\n    const response = new Response(cacheData);\n\n    // To avoid the error \"Request scheme 'chrome-extension' is unsupported\"\n    // https://github.com/iamshaunjp/pwa-tutorial/issues/1\n    if (request instanceof Request && request.url.indexOf('chrome-extension') === 0) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.put(request, response);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function remove(cacheName: string, key: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    const cache = await cacheApi.open(cacheName);\n    return await cache.delete(key);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n\nexport async function clear(cacheName: string) {\n  try {\n    if (!cacheApi) {\n      return undefined;\n    }\n\n    return await cacheApi.delete(cacheName);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(err);\n    return undefined;\n  }\n}\n","import type { ApiBaseCurrency, ApiTokenWithPrice } from '../api/types';\n\nimport { CURRENCIES, DEFAULT_PRICE_CURRENCY, WHOLE_PART_DELIMITER } from '../config';\nimport { Big } from '../lib/big.js';\nimport { bigintAbs } from './bigint';\nimport { toDecimal } from './decimals';\nimport withCache from './withCache';\n\nconst SHORT_SYMBOLS = new Set(\n  Object.values(CURRENCIES)\n    .map((currency) => currency.shortSymbol)\n    .filter(Boolean),\n);\n\nexport const formatNumber = withCache((\n  value: number | Big | string,\n  fractionDigits = 2,\n  noTruncate?: boolean,\n) => {\n  let bigValue = new Big(value);\n\n  if (bigValue.eq(0)) return '0';\n\n  const isNegative = bigValue.lt(0);\n  if (isNegative) bigValue = bigValue.neg();\n\n  const method = bigValue.lt(1) ? 'toPrecision' : 'round';\n  let formatted = bigValue[method](fractionDigits, noTruncate ? Big.roundHalfUp : Big.roundDown)\n    .toString()\n    // Remove extra zeros after rounding to the specified accuracy\n    .replace(/(\\.\\d*?)0+$/, '$1')\n    .replace(/\\.$/, '');\n\n  formatted = applyThousandsGrouping(formatted);\n\n  if (isNegative) formatted = `-${formatted}`;\n\n  return formatted;\n});\n\nexport function formatCurrency(\n  value: number | string | Big,\n  currency: string,\n  fractionDigits?: number,\n  noTruncate?: boolean,\n) {\n  const formatted = formatNumber(value, fractionDigits, noTruncate);\n  return addCurrency(formatted, currency);\n}\n\nexport function formatCurrencyExtended(\n  value: number | string, currency: string, noSign = false, fractionDigits?: number, isZeroNegative?: boolean,\n) {\n  const numericValue = Number(value);\n  const isNegative = numericValue === 0 ? isZeroNegative : (numericValue < 0);\n  const prefix = !noSign ? (!isNegative ? '+\\u202F' : '\\u2212\\u202F') : '';\n\n  value = value.toString();\n  return prefix + formatCurrency(noSign ? value : value.replace(/^-/, ''), currency, fractionDigits);\n}\n\nexport function formatCurrencySimple(value: number | bigint | string, currency: string, decimals?: number) {\n  if (typeof value !== 'string') {\n    value = toDecimal(value, decimals);\n  }\n  return addCurrency(value, currency);\n}\n\nfunction addCurrency(value: number | string, currency: string) {\n  return SHORT_SYMBOLS.has(currency)\n    ? `${currency}${value}`.replace(`${currency}-`, `-${currency}`)\n    : `${value} ${currency}`;\n}\n\nexport function getShortCurrencySymbol(currency?: ApiBaseCurrency) {\n  if (!currency) currency = DEFAULT_PRICE_CURRENCY;\n  return CURRENCIES[currency].shortSymbol ?? currency;\n}\n\nfunction applyThousandsGrouping(str: string) {\n  const [wholePart, fractionPart = ''] = str.split('.');\n  const groupedWhole = wholePart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return [groupedWhole, fractionPart].filter(Boolean).join('.');\n}\n\n/** Formats the base currency amount of a transaction */\nexport function formatBaseCurrencyAmount(\n  amount: bigint,\n  baseCurrency: ApiBaseCurrency | undefined,\n  token: Pick<ApiTokenWithPrice, 'decimals' | 'price'>,\n) {\n  const baseCurrencyAmount = Big(toDecimal(bigintAbs(amount), token.decimals, true)).mul(token.price);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  // The rounding logic should match the original amount rounding logic implemented by formatCurrencyExtended.\n  // It's for cases when the base currency matches the transaction currency.\n  return formatCurrency(baseCurrencyAmount, shortBaseSymbol);\n}\n","import type { TeactNode } from '../lib/teact/teact';\n\nimport type { LangCode, LangPack, LangString } from '../global/types';\n\nimport { IS_PACKAGED_ELECTRON, LANG_CACHE_NAME, LANG_LIST } from '../config';\nimport renderText from '../global/helpers/renderText';\n// @ts-ignore this file is autogenerated\nimport defaultLangPackJson from '../i18n/en.json';\nimport * as cacheApi from './cacheApi';\nimport { createCallbackManager } from './callbacks';\nimport { formatNumber } from './formatNumber';\nimport { escapeStringRegexp } from './regex';\nimport { DEFAULT_LANG_CODE } from './windowEnvironment';\n\nconst defaultLangPack: LangPack = defaultLangPackJson;\n\nexport interface LangFn {\n  (key: string): string;\n\n  (key: string, value: any, format?: 'i', pluralValue?: number): string | TeactNode[];\n\n  isRtl?: boolean;\n  code?: LangCode;\n  langName?: string;\n}\n\nconst {\n  addCallback,\n  removeCallback,\n  runCallbacks,\n} = createCallbackManager();\n\nexport { addCallback, removeCallback };\n\nconst SUBSTITUTION_REGEX = /%\\d?\\$?[sdf@]/g;\nconst PLURAL_OPTIONS = ['value', 'zeroValue', 'oneValue', 'twoValue', 'fewValue', 'manyValue', 'otherValue'] as const;\n// Some rules edited from https://github.com/eemeli/make-plural/blob/master/packages/plurals/cardinals.js\n// de - zeroValue, oneValue, otherValue\n// en - zeroValue, oneValue, otherValue\n// es - zeroValue, oneValue, otherValue\n// pl - zeroValue, oneValue, fewValue, manyValue\n// ru - zeroValue, oneValue, fewValue, manyValue\n// th - zeroValue, otherValue\n// tr - zeroValue, oneValue, otherValue\n// uk - zeroValue, oneValue, fewValue, manyValue\n// zh-Hans - zeroValue, otherValue\n// zh-Hant - zeroValue, otherValue\nconst PLURAL_RULES = {\n  /* eslint-disable @stylistic/max-len */\n  de: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  en: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  es: (n: number) => (n === 0 ? 1 : (n !== 1 ? 6 : 2)),\n  pl: (n: number) => (n === 0 ? 1 : (n === 1 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  ru: (n: number) => (n === 0 ? 1 : (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  th: (n: number) => (n === 0 ? 1 : 6),\n  tr: (n: number) => (n === 0 ? 1 : (n > 1 ? 6 : 2)),\n  uk: (n: number) => (n === 0 ? 1 : (n % 10 === 1 && n % 100 !== 11 ? 2 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 4 : 5)),\n  'zh-Hans': (n: number) => (n === 0 ? 1 : 6),\n  'zh-Hant': (n: number) => (n === 0 ? 1 : 6),\n  /* eslint-enable @stylistic/max-len */\n};\nconst cache = new Map<string, string>();\nlet langPack: LangPack | undefined;\nlet currentLangCode: string | undefined;\n\nfunction createLangFn() {\n  return ((key: string, value?: any, format?: 'i', pluralValue?: number) => {\n    if (value !== undefined && (typeof value !== 'object' || Array.isArray(value))) {\n      const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n      const cached = cache.get(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`);\n      if (cached) {\n        return cached;\n      }\n    }\n\n    if (!langPack && !defaultLangPack) {\n      return key;\n    }\n\n    const langString = (langPack?.[key]) || (defaultLangPack?.[key]) || key;\n\n    return processTranslation(langString, key, value, format, pluralValue);\n  }) as LangFn;\n}\n\nexport let getTranslation: LangFn = createLangFn();\n\nexport async function setLanguage(langCode: LangCode, callback?: NoneToVoidFunction) {\n  if (langPack && langCode === currentLangCode) {\n    if (callback) {\n      callback();\n    }\n\n    return;\n  }\n\n  let newLangPack = await cacheApi.fetch(LANG_CACHE_NAME, langCode);\n\n  if (!newLangPack) {\n    newLangPack = await fetchRemote(langCode);\n    if (!newLangPack) {\n      return;\n    }\n  }\n\n  cache.clear();\n\n  currentLangCode = langCode;\n  langPack = newLangPack;\n  document.documentElement.lang = langCode;\n\n  const langInfo = LANG_LIST?.find((l) => l.langCode === langCode);\n  getTranslation = createLangFn();\n  getTranslation.isRtl = Boolean(langInfo?.rtl);\n  getTranslation.code = langCode.replace('-raw', '') as LangCode;\n  getTranslation.langName = langInfo?.nativeName;\n\n  if (callback) {\n    callback();\n  }\n\n  runCallbacks();\n}\n\nexport function clearPreviousLangpacks() {\n  const langCachePrefix = LANG_CACHE_NAME.replace(/\\d+$/, '');\n  const langCacheVersion = Number((LANG_CACHE_NAME.match(/\\d+$/) || [0])[0]);\n  for (let i = 0; i < langCacheVersion; i++) {\n    void cacheApi.clear(`${langCachePrefix}${i === 0 ? '' : i}`);\n  }\n}\n\nasync function fetchRemote(langCode: string): Promise<LangPack | undefined> {\n  if (langCode === DEFAULT_LANG_CODE) {\n    return defaultLangPack;\n  }\n\n  const response = await fetch(`${IS_PACKAGED_ELECTRON ? '.' : '..'}/i18n/${langCode}.json`);\n\n  if (!response.ok) {\n    const message = `An error has occured: ${response.status}`;\n    throw new Error(message);\n  }\n\n  const remote = await response.json();\n\n  if (remote) {\n    await cacheApi.save(LANG_CACHE_NAME, langCode, remote);\n    return remote;\n  }\n\n  return undefined;\n}\n\nfunction getPluralOption(amount: number) {\n  const langCode = currentLangCode || DEFAULT_LANG_CODE;\n  const optionIndex = PLURAL_RULES[langCode as keyof typeof PLURAL_RULES]\n    ? PLURAL_RULES[langCode as keyof typeof PLURAL_RULES](amount)\n    : 0;\n\n  return PLURAL_OPTIONS[optionIndex];\n}\n\nfunction processTemplate(template: string, value: any) {\n  value = Array.isArray(value) ? value : [value];\n  const translationSlices = template.split(SUBSTITUTION_REGEX);\n  const initialValue = translationSlices.shift();\n\n  return translationSlices.reduce((result, str, index) => {\n    return `${result}${String(value[index] ?? '')}${str}`;\n  }, initialValue || '');\n}\n\n// Export a function for testing purposes\nexport function processTemplateJsx(template: string, value: Record<string, TeactNode>): TeactNode[] {\n  // Replace all primitive values (strings and numbers)\n  let processedTemplate = template;\n\n  Object.entries(value).forEach(([key, val]) => {\n    if (typeof val === 'string' || typeof val === 'number') {\n      processedTemplate = processedTemplate.replace(\n        new RegExp(`%${escapeStringRegexp(key)}%`, 'g'),\n        String(val),\n      );\n    }\n  });\n\n  // Check if there are any components\n  const hasComponents = Object.values(value).some((val) =>\n    typeof val !== 'string' && typeof val !== 'number',\n  );\n\n  // If no components, just process through renderText\n  if (!hasComponents) {\n    return renderText(processedTemplate);\n  }\n\n  // If there are components, process in parts\n  const parts = processedTemplate.split(/%(\\w+)%/);\n  const result: TeactNode[] = [];\n\n  for (let i = 0; i < parts.length; i++) {\n    if (i % 2 === 0) {\n      // Text part\n      if (parts[i]) {\n        result.push(...renderText(parts[i]));\n      }\n    } else {\n      // Token (between % symbols)\n      const tokenValue = value[parts[i]];\n      if (tokenValue !== undefined) {\n        result.push(tokenValue);\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction processTranslation(\n  langString: LangString | string | undefined, key: string, value?: any, format?: 'i', pluralValue?: number,\n) {\n  const preferredPluralOption = typeof value === 'number' || pluralValue !== undefined\n    ? getPluralOption(pluralValue ?? value)\n    : 'value';\n\n  const template = typeof langString === 'string'\n    ? langString\n    : preferredPluralOption === 'value'\n      // Support cached older `langString` interface\n      ? (typeof langString === 'object' ? (langString as any).value : langString)\n      : typeof langString === 'object'\n        ? langString?.[preferredPluralOption] || langString.otherValue\n        : undefined;\n\n  if (!template || !template.trim() || value === undefined) {\n    return template;\n  }\n\n  const formattedValue = format === 'i' ? formatNumber(value) : value;\n  const result = typeof value === 'object' && !Array.isArray(value)\n    ? processTemplateJsx(template, formattedValue)\n    : processTemplate(template, formattedValue);\n  if (typeof value !== 'object' && typeof result === 'string') {\n    const cacheValue = Array.isArray(value) ? JSON.stringify(value) : value;\n    cache.set(`${key}_${cacheValue}_${format}${pluralValue ? `_${pluralValue}` : ''}`, result);\n  }\n\n  return result;\n}\n","// Source: https://github.com/sindresorhus/escape-string-regexp\n\nexport function escapeStringRegexp(string: string) {\n  // Escape characters with special meaning either inside or outside character sets.\n  // Use a simple backslash escape when its always valid, and a `\\xnn` escape when the simpler form would be disallowed by Unicode patterns stricter grammar.\n  return string\n    .replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\n    .replace(/-/g, '\\\\x2d');\n}\n","import * as langProvider from '../util/langProvider';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nexport type LangFn = langProvider.LangFn;\n\nconst useLang = (): LangFn => {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    return langProvider.addCallback(forceUpdate);\n  });\n\n  return langProvider.getTranslation;\n};\n\nexport default useLang;\n","type Parts = (string | false | undefined)[];\ntype PartsWithGlobals = (string | false | undefined | string[])[];\ntype ClassNameBuilder =\n  ((elementName: string, ...modifiers: PartsWithGlobals) => string)\n  & Record<string, string>;\n\nexport default function buildClassName(...parts: Parts) {\n  return parts.filter(Boolean).join(' ');\n}\n\nexport function createClassNameBuilder(componentName: string) {\n  return ((elementName: string, ...modifiers: PartsWithGlobals) => {\n    const baseName = elementName === '&' ? componentName : `${componentName}__${elementName}`;\n\n    return modifiers.reduce<string[]>((acc, modifier) => {\n      if (modifier) {\n        // A bit hacky way to pass global class names\n        if (Array.isArray(modifier)) {\n          acc.push(...modifier);\n        } else {\n          acc.push(`${baseName}--${modifier}`);\n        }\n      }\n\n      return acc;\n    }, [baseName]).join(' ');\n  }) as ClassNameBuilder;\n}\n","export const clamp = (num: number, min: number, max: number) => (Math.min(max, Math.max(min, num)));\nexport const isBetween = (num: number, min: number, max: number) => (num >= min && num <= max);\nexport const round = (num: number, decimals: number = 0) => Math.round(num * 10 ** decimals) / 10 ** decimals;\nexport const lerp = (start: number, end: number, interpolationRatio: number) => {\n  return (1 - interpolationRatio) * start + interpolationRatio * end;\n};\n\n// Fractional values cause blurry text & canvas. Round to even to keep whole numbers while centering\nexport function roundToNearestEven(value: number) {\n  return Math.round(value / 2) * 2;\n}\n","import { forceMutation } from '../lib/fasterdom/stricterdom';\nimport { Lethargy } from './lethargy';\nimport { clamp, round } from './math';\nimport { debounce } from './schedulers';\nimport { IS_IOS, IS_WINDOWS } from './windowEnvironment';\nimport windowSize from './windowSize';\n\nexport enum SwipeDirection {\n  Up,\n  Down,\n  Left,\n  Right,\n}\n\nexport interface MoveOffsets {\n  dragOffsetX: number;\n  dragOffsetY: number;\n}\n\ninterface CaptureOptions {\n  onCapture?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onRelease?: (e: MouseEvent | TouchEvent | WheelEvent) => void;\n  onDrag?: (\n    e: MouseEvent | TouchEvent | WheelEvent,\n    captureEvent: MouseEvent | TouchEvent | WheelEvent,\n    offsets: MoveOffsets,\n    cancelDrag?: (x: boolean, y: boolean) => void,\n  ) => void;\n  onSwipe?: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean;\n  onZoom?: (e: TouchEvent | WheelEvent, params: {\n    // Absolute zoom level\n    zoom?: number;\n    // Relative zoom factor\n    zoomFactor?: number;\n\n    // center coordinate of the initial pinch\n    initialCenterX: number;\n    initialCenterY: number;\n\n    // offset of the pinch center (current from initial)\n    dragOffsetX: number;\n    dragOffsetY: number;\n\n    // center coordinate of the current pinch\n    currentCenterX: number;\n    currentCenterY: number;\n  }) => void;\n  onClick?: (e: MouseEvent | TouchEvent) => void;\n  onDoubleClick?: (e: MouseEvent | RealTouchEvent | WheelEvent, params: { centerX: number; centerY: number }) => void;\n  excludedClosestSelector?: string;\n  includedClosestSelector?: string;\n  selectorToPreventScroll?: string;\n  withNativeDrag?: boolean;\n  maxZoom?: number;\n  minZoom?: number;\n  doubleTapZoom?: number;\n  initialZoom?: number;\n  isNotPassive?: boolean;\n  withCursor?: boolean;\n  swipeThreshold?: number;\n  withWheelDrag?: boolean;\n}\n\n// https://stackoverflow.com/questions/11287877/how-can-i-get-e-offsetx-on-mobile-ipad\n// Android does not have this value, and iOS has it but as read-only\nexport interface RealTouchEvent extends TouchEvent {\n  pageX?: number;\n  pageY?: number;\n}\n\ntype TSwipeAxis =\n  'x'\n  | 'y'\n  | undefined;\n\nexport const IOS_SCREEN_EDGE_THRESHOLD = 20;\nexport const SWIPE_DIRECTION_THRESHOLD = 10;\nexport const SWIPE_DIRECTION_TOLERANCE = 1.5;\n\nconst MOVE_THRESHOLD = 15;\nconst SWIPE_THRESHOLD_DEFAULT = 20;\nconst RELEASE_WHEEL_ZOOM_DELAY = 150;\nconst RELEASE_WHEEL_DRAG_DELAY = 150;\n\nfunction getDistance(a: Touch, b?: Touch) {\n  if (!b) return 0;\n  return Math.hypot((b.pageX - a.pageX), (b.pageY - a.pageY));\n}\n\nfunction getTouchCenter(a: Touch, b: Touch) {\n  return {\n    x: (a.pageX + b.pageX) / 2,\n    y: (a.pageY + b.pageY) / 2,\n  };\n}\n\nlet lastClickTime = 0;\nconst lethargy = new Lethargy({\n  stability: 5,\n  sensitivity: 25,\n  tolerance: IS_WINDOWS ? 1 : 0.6, // Windows `scrollDelta` does not die down to 0\n  delay: 150,\n});\n\nexport function captureEvents(element: HTMLElement, options: CaptureOptions) {\n  let captureEvent: MouseEvent | RealTouchEvent | WheelEvent | undefined;\n  let hasMoved = false;\n  let hasSwiped = false;\n  let isZooming = false;\n  let initialDistance = 0;\n  let wheelZoom = options.initialZoom ?? 1;\n  let initialDragOffset = {\n    x: 0,\n    y: 0,\n  };\n  let isDragCanceled = {\n    x: false,\n    y: false,\n  };\n  const currentWindowSize = windowSize.get();\n  let initialTouchCenter = {\n    x: currentWindowSize.width / 2,\n    y: currentWindowSize.height / 2,\n  };\n  let initialSwipeAxis: TSwipeAxis | undefined;\n  const minZoom = options.minZoom ?? 1;\n  const maxZoom = options.maxZoom ?? 4;\n\n  function onCapture(e: MouseEvent | RealTouchEvent) {\n    const target = e.target as HTMLElement;\n    const {\n      excludedClosestSelector,\n      includedClosestSelector,\n      withNativeDrag,\n      withCursor,\n      onDrag,\n    } = options;\n\n    if (element !== target && !element.contains(target)) {\n      return;\n    }\n\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {\n      return;\n    }\n\n    if (\n      (excludedClosestSelector && (target.matches(excludedClosestSelector) || target.closest(excludedClosestSelector)))\n      || (\n        includedClosestSelector && !(target.matches(includedClosestSelector) || target.closest(includedClosestSelector))\n      )\n    ) {\n      return;\n    }\n\n    captureEvent = e;\n\n    if (e.type === 'mousedown') {\n      if (!withNativeDrag && onDrag) {\n        e.preventDefault();\n      }\n\n      document.addEventListener('mousemove', onMove);\n      document.addEventListener('mouseup', onRelease);\n    } else if (e.type === 'touchstart') {\n      // We need to always listen on `touchstart` target:\n      // https://stackoverflow.com/questions/33298828/touch-move-event-dont-fire-after-touch-start-target-is-removed\n      target.addEventListener('touchmove', onMove, { passive: true });\n      target.addEventListener('touchend', onRelease, { passive: true });\n      target.addEventListener('touchcancel', onRelease, { passive: true });\n\n      if ('touches' in e) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (e.touches.length === 2) {\n          initialDistance = getDistance(e.touches[0], e.touches[1]);\n          initialTouchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n        }\n      }\n    }\n\n    if (withCursor) {\n      document.body.classList.add('cursor-grabbing');\n    }\n\n    options.onCapture?.(e);\n  }\n\n  function onRelease(e?: MouseEvent | TouchEvent) {\n    if (captureEvent) {\n      if (options.withCursor) {\n        document.body.classList.remove('cursor-grabbing');\n      }\n\n      document.removeEventListener('mouseup', onRelease);\n      document.removeEventListener('mousemove', onMove);\n      (captureEvent.target as HTMLElement).removeEventListener('touchcancel', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchend', onRelease);\n      (captureEvent.target as HTMLElement).removeEventListener('touchmove', onMove);\n\n      if (IS_IOS && options.selectorToPreventScroll) {\n        const nodes = Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll));\n\n        forceMutation(() => {\n          nodes.forEach((scrollable) => {\n            scrollable.style.overflow = '';\n          });\n        }, nodes);\n      }\n\n      if (e) {\n        if (hasMoved) {\n          if (options.onRelease) {\n            options.onRelease(e);\n          }\n        } else if (e.type === 'mouseup') {\n          if (options.onDoubleClick && Date.now() - lastClickTime < 300) {\n            options.onDoubleClick(e, {\n              centerX: captureEvent.pageX!,\n              centerY: captureEvent.pageY!,\n            });\n          } else if (options.onClick && (!('button' in e) || e.button === 0)) {\n            options.onClick(e);\n          }\n          lastClickTime = Date.now();\n        }\n      }\n    }\n\n    hasMoved = false;\n    hasSwiped = false;\n    isZooming = false;\n    initialDistance = 0;\n    wheelZoom = clamp(wheelZoom, minZoom, maxZoom);\n    initialSwipeAxis = undefined;\n    initialDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    isDragCanceled = {\n      x: false,\n      y: false,\n    };\n    const newWindowSize = windowSize.get();\n    initialTouchCenter = {\n      x: newWindowSize.width / 2,\n      y: newWindowSize.height / 2,\n    };\n    captureEvent = undefined;\n  }\n\n  function onMove(e: MouseEvent | RealTouchEvent) {\n    if (captureEvent) {\n      if (e.type === 'touchmove' && ('touches' in e)) {\n        if (e.pageX === undefined) {\n          e.pageX = e.touches[0].pageX;\n        }\n\n        if (e.pageY === undefined) {\n          e.pageY = e.touches[0].pageY;\n        }\n\n        if (options.onZoom && initialDistance > 0 && e.touches.length === 2) {\n          const endDistance = getDistance(e.touches[0], e.touches[1]);\n          const touchCenter = getTouchCenter(e.touches[0], e.touches[1]);\n          const dragOffsetX = touchCenter.x - initialTouchCenter.x;\n          const dragOffsetY = touchCenter.y - initialTouchCenter.y;\n          const zoomFactor = endDistance / initialDistance;\n          options.onZoom(e, {\n            zoomFactor,\n            initialCenterX: initialTouchCenter.x,\n            initialCenterY: initialTouchCenter.y,\n            dragOffsetX,\n            dragOffsetY,\n            currentCenterX: touchCenter.x,\n            currentCenterY: touchCenter.y,\n          });\n          if (zoomFactor !== 1) hasMoved = true;\n        }\n      }\n\n      const dragOffsetX = e.pageX! - captureEvent.pageX!;\n      const dragOffsetY = e.pageY! - captureEvent.pageY!;\n\n      if (Math.abs(dragOffsetX) >= MOVE_THRESHOLD || Math.abs(dragOffsetY) >= MOVE_THRESHOLD) {\n        hasMoved = true;\n      }\n\n      let shouldPreventScroll = false;\n\n      if (options.onDrag) {\n        options.onDrag(e, captureEvent, {\n          dragOffsetX,\n          dragOffsetY,\n        });\n        shouldPreventScroll = true;\n      }\n\n      if (options.onSwipe && !hasSwiped) {\n        hasSwiped = onSwipe(e, dragOffsetX, dragOffsetY);\n        shouldPreventScroll = hasSwiped;\n      }\n\n      if (IS_IOS && shouldPreventScroll && options.selectorToPreventScroll) {\n        const nodes = Array.from(document.querySelectorAll<HTMLElement>(options.selectorToPreventScroll));\n\n        forceMutation(() => {\n          nodes.forEach((scrollable) => {\n            scrollable.style.overflow = 'hidden';\n          });\n        }, nodes);\n      }\n    }\n  }\n\n  function onSwipe(e: MouseEvent | RealTouchEvent, dragOffsetX: number, dragOffsetY: number) {\n    // Avoid conflicts with swipe-to-back gestures\n    if (IS_IOS) {\n      const x = 'touches' in e\n        ? e.touches[0].pageX // RealTouchEvent\n        : e.pageX; // Event on iPad or iPhone with connected mouse\n      if (x <= IOS_SCREEN_EDGE_THRESHOLD || x >= windowSize.get().width - IOS_SCREEN_EDGE_THRESHOLD) {\n        return false;\n      }\n    }\n\n    const xAbs = Math.abs(dragOffsetX);\n    const yAbs = Math.abs(dragOffsetY);\n    const threshold = options.swipeThreshold ?? SWIPE_THRESHOLD_DEFAULT;\n\n    let axis: TSwipeAxis | undefined;\n    if (xAbs > yAbs && xAbs >= threshold) {\n      axis = 'x';\n    } else if (yAbs > xAbs && yAbs >= threshold) {\n      axis = 'y';\n    }\n\n    if (!axis) {\n      return false;\n    }\n\n    if (!initialSwipeAxis) {\n      initialSwipeAxis = axis;\n    } else if (initialSwipeAxis !== axis) {\n      // Prevent horizontal swipe after vertical to prioritize scroll\n      return false;\n    }\n\n    return processSwipe(e, axis, dragOffsetX, dragOffsetY, options.onSwipe!);\n  }\n\n  const releaseWheelDrag = debounce(onRelease, RELEASE_WHEEL_DRAG_DELAY, false);\n  const releaseWheelZoom = debounce(onRelease, RELEASE_WHEEL_ZOOM_DELAY, false);\n\n  function onWheelCapture(e: WheelEvent) {\n    if (hasMoved) return;\n    onCapture(e);\n    hasMoved = true;\n    initialTouchCenter = { x: e.x, y: e.y };\n  }\n\n  function onWheelZoom(e: WheelEvent) {\n    if (!options.onZoom) return;\n    onWheelCapture(e);\n    const dragOffsetX = e.x - initialTouchCenter.x;\n    const dragOffsetY = e.y - initialTouchCenter.y;\n    const delta = clamp(e.deltaY, -25, 25);\n    wheelZoom -= delta * 0.01;\n    wheelZoom = clamp(wheelZoom, minZoom * 0.5, maxZoom * 3);\n    isZooming = true;\n    options.onZoom(e, {\n      zoom: round(wheelZoom, 2),\n      initialCenterX: initialTouchCenter.x,\n      initialCenterY: initialTouchCenter.y,\n      dragOffsetX,\n      dragOffsetY,\n      currentCenterX: e.x,\n      currentCenterY: e.y,\n    });\n    releaseWheelZoom(e);\n  }\n\n  function onWheelDrag(e: WheelEvent) {\n    if (!options.onDrag) return;\n    onWheelCapture(e);\n    // Ignore wheel inertia if drag is canceled in this direction\n    if (!isDragCanceled.x || Math.sign(initialDragOffset.x) === Math.sign(e.deltaX)) {\n      initialDragOffset.x -= e.deltaX;\n    }\n    if (!isDragCanceled.y || Math.sign(initialDragOffset.y) === Math.sign(e.deltaY)) {\n      initialDragOffset.y -= e.deltaY;\n    }\n    const { x, y } = initialDragOffset;\n    options.onDrag(e, captureEvent!, {\n      dragOffsetX: x,\n      dragOffsetY: y,\n    }, (dx, dy) => {\n      isDragCanceled = { x: dx, y: dy };\n    });\n    releaseWheelDrag(e);\n  }\n\n  function onWheel(e: WheelEvent) {\n    if (!options.onZoom && !options.onDrag) return;\n    if (options.excludedClosestSelector && (\n      (e.target as HTMLElement).matches(options.excludedClosestSelector)\n      || (e.target as HTMLElement).closest(options.excludedClosestSelector)\n    )) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const { doubleTapZoom = 3 } = options;\n    if (options.onDoubleClick && Object.is(e.deltaX, -0) && Object.is(e.deltaY, -0) && e.ctrlKey) {\n      onWheelCapture(e);\n      wheelZoom = wheelZoom > 1 ? 1 : doubleTapZoom;\n      options.onDoubleClick(e, { centerX: e.pageX, centerY: e.pageY });\n      hasMoved = false;\n      return;\n    }\n    const metaKeyPressed = e.metaKey || e.ctrlKey || e.shiftKey;\n    if (metaKeyPressed) {\n      onWheelZoom(e);\n    }\n    if (!metaKeyPressed && !isZooming) {\n      // Check if this event produced by user scroll and not by inertia\n      const isUserEvent = lethargy.check(e);\n      if (wheelZoom !== 1 || isUserEvent) {\n        onWheelDrag(e);\n      }\n    }\n  }\n\n  if (options.withWheelDrag) {\n    element.addEventListener('wheel', onWheel);\n  }\n\n  element.addEventListener('mousedown', onCapture);\n  document.body.addEventListener('touchstart', onCapture, { passive: !options.isNotPassive });\n\n  return () => {\n    onRelease();\n    document.body.removeEventListener('touchstart', onCapture);\n    element.removeEventListener('mousedown', onCapture);\n    element.removeEventListener('wheel', onWheel);\n  };\n}\n\nfunction processSwipe(\n  e: Event,\n  currentSwipeAxis: TSwipeAxis,\n  dragOffsetX: number,\n  dragOffsetY: number,\n  onSwipe: (e: Event, direction: SwipeDirection, offsets: MoveOffsets) => boolean,\n) {\n  const offsets = { dragOffsetX, dragOffsetY };\n\n  if (currentSwipeAxis === 'x') {\n    if (dragOffsetX < 0) {\n      return onSwipe(e, SwipeDirection.Left, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Right, offsets);\n    }\n  } else if (currentSwipeAxis === 'y') {\n    if (dragOffsetY < 0) {\n      return onSwipe(e, SwipeDirection.Up, offsets);\n    } else {\n      return onSwipe(e, SwipeDirection.Down, offsets);\n    }\n  }\n\n  return false;\n}\n","/**\n * Lethargy help distinguish between scroll events initiated by the user, and those by inertial scrolling.\n * Lethargy does not have external dependencies.\n *\n * @param stability - Specifies the length of the rolling average.\n * In effect, the larger the value, the smoother the curve will be.\n * This attempts to prevent anomalies from firing 'real' events. Valid values are all positive integers,\n * but in most cases, you would need to stay between 5 and around 30.\n *\n * @param sensitivity - Specifies the minimum value for wheelDelta for it to register as a valid scroll event.\n * Because the tail of the curve have low wheelDelta values,\n * this will stop them from registering as valid scroll events.\n * The unofficial standard wheelDelta is 120, so valid values are positive integers below 120.\n *\n * @param tolerance - Prevent small fluctuations from affecting results.\n * Valid values are decimals from 0, but should ideally be between 0.05 and 0.3.\n *\n * Based on https://github.com/d4nyll/lethargy\n */\n\nexport type LethargyConfig = {\n  stability?: number;\n  sensitivity?: number;\n  tolerance?: number;\n  delay?: number;\n};\n\nexport class Lethargy {\n  stability: number;\n\n  sensitivity: number;\n\n  tolerance: number;\n\n  delay: number;\n\n  lastUpDeltas: Array<number>;\n\n  lastDownDeltas: Array<number>;\n\n  deltasTimestamp: Array<number>;\n\n  constructor({\n    stability = 8,\n    sensitivity = 100,\n    tolerance = 1.1,\n    delay = 150,\n  }: LethargyConfig = {}) {\n    this.stability = stability;\n    this.sensitivity = sensitivity;\n    this.tolerance = tolerance;\n    this.delay = delay;\n    this.lastUpDeltas = new Array(this.stability * 2).fill(0);\n    this.lastDownDeltas = new Array(this.stability * 2).fill(0);\n    this.deltasTimestamp = new Array(this.stability * 2).fill(0);\n  }\n\n  check(e: any) {\n    let lastDelta;\n    e = e.originalEvent || e;\n    if (e.wheelDelta !== undefined) {\n      lastDelta = e.wheelDelta;\n    } else if (e.deltaY !== undefined) {\n      lastDelta = e.deltaY * -40;\n    } else if (e.detail !== undefined || e.detail === 0) {\n      lastDelta = e.detail * -40;\n    }\n    this.deltasTimestamp.push(Date.now());\n    this.deltasTimestamp.shift();\n    if (lastDelta > 0) {\n      this.lastUpDeltas.push(lastDelta);\n      this.lastUpDeltas.shift();\n      return this.isInertia(1);\n    } else {\n      this.lastDownDeltas.push(lastDelta);\n      this.lastDownDeltas.shift();\n      return this.isInertia(-1);\n    }\n  }\n\n  isInertia(direction: number) {\n    const lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n    if (lastDeltas[0] === undefined) return direction;\n    if (\n      this.deltasTimestamp[this.stability * 2 - 2] + this.delay > Date.now()\n      && lastDeltas[0] === lastDeltas[this.stability * 2 - 1]\n    ) {\n      return false;\n    }\n    const lastDeltasOld = lastDeltas.slice(0, this.stability);\n    const lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n    const oldSum = lastDeltasOld.reduce((t, s) => t + s);\n    const newSum = lastDeltasNew.reduce((t, s) => t + s);\n    const oldAverage = oldSum / lastDeltasOld.length;\n    const newAverage = newSum / lastDeltasNew.length;\n    return Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance)\n      && this.sensitivity < Math.abs(newAverage);\n  }\n}\n","type HandlerName = 'onEnter' | 'onBackspace' | 'onDelete' | 'onEsc' | 'onUp' | 'onDown' | 'onLeft' | 'onRight'\n  | 'onTab';\ntype EventHandler = (e: KeyboardEvent) => boolean | void | Promise<void>;\ntype HandlerWithOptions = {\n  handler: (e: KeyboardEvent) => void;\n  shouldPreventDefault?: boolean;\n  noStopPropagation?: boolean;\n};\n\ntype Handler = EventHandler | HandlerWithOptions;\n\ntype CaptureOptions = Partial<Record<HandlerName, Handler>>;\n\nconst keyToHandlerName: Record<string, HandlerName> = {\n  Enter: 'onEnter',\n  Backspace: 'onBackspace',\n  Delete: 'onDelete',\n  Esc: 'onEsc',\n  Escape: 'onEsc',\n  ArrowUp: 'onUp',\n  ArrowDown: 'onDown',\n  ArrowLeft: 'onLeft',\n  ArrowRight: 'onRight',\n  Tab: 'onTab',\n};\n\nconst handlers: Record<HandlerName, Handler[]> = {\n  onEnter: [],\n  onDelete: [],\n  onBackspace: [],\n  onEsc: [],\n  onUp: [],\n  onDown: [],\n  onLeft: [],\n  onRight: [],\n  onTab: [],\n};\n\nexport default function captureKeyboardListeners(options: CaptureOptions) {\n  if (!hasActiveHandlers()) {\n    document.addEventListener('keydown', handleKeyDown, true);\n  }\n\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    if (!option) {\n      return;\n    }\n\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      currentEventHandlers.push(option);\n    }\n  });\n\n  return () => {\n    releaseKeyboardListener(options);\n  };\n}\n\nfunction hasActiveHandlers() {\n  return Object.values(handlers).some((keyHandlers) => Boolean(keyHandlers.length));\n}\n\nfunction handleKeyDown(e: KeyboardEvent) {\n  const handlerName = keyToHandlerName[e.key];\n  if (!handlerName) {\n    return;\n  }\n\n  const { length } = handlers[handlerName];\n  if (!length) {\n    return;\n  }\n\n  const handlerOrOptions = handlers[handlerName][length - 1];\n\n  if (typeof handlerOrOptions === 'function') {\n    void handlerOrOptions(e);\n\n    e.stopPropagation();\n  } else {\n    const { handler, noStopPropagation, shouldPreventDefault } = handlerOrOptions;\n    if (!noStopPropagation) {\n      e.stopPropagation();\n    }\n    if (shouldPreventDefault) {\n      e.preventDefault();\n    }\n    handler(e);\n  }\n}\n\nfunction releaseKeyboardListener(options: CaptureOptions) {\n  (Object.keys(options) as Array<HandlerName>).forEach((handlerName) => {\n    const option = options[handlerName];\n    const currentEventHandlers = handlers[handlerName];\n    if (currentEventHandlers) {\n      const index = currentEventHandlers.findIndex((cb) => {\n        if (typeof cb === 'function') {\n          return cb === option;\n        } else {\n          return option && 'handler' in option && cb.handler === option.handler;\n        }\n      });\n\n      if (index !== -1) {\n        currentEventHandlers.splice(index, 1);\n      }\n    }\n  });\n\n  if (!hasActiveHandlers()) {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  }\n}\n","let counter = 0;\n\nexport function disableSwipeToClose() {\n  counter += 1;\n}\n\nexport function enableSwipeToClose() {\n  counter -= 1;\n}\n\nexport function getIsSwipeToCloseDisabled() {\n  return counter > 0;\n}\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll<HTMLElement>('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    );\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","export default function cssColorToHex(cssColor: string) {\n  if (/^#[0-9A-F]{6}$/i.test(cssColor)) return cssColor;\n\n  return `#${cssColor.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+\\.{0,1}\\d*))?\\)$/)!\n    .slice(1)\n    .map((n: string, i: number) => (i === 3 ? Math.round(parseFloat(n) * 255) : parseFloat(n))\n      .toString(16)\n      .padStart(2, '0')\n      .replace('NaN', ''))\n    .join('')}`;\n}\n","/// <reference types=\"@capacitor/cli\" />\nexport var Style;\n(function (Style) {\n    /**\n     * Light text for dark backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Dark\"] = \"DARK\";\n    /**\n     * Dark text for light backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Light\"] = \"LIGHT\";\n    /**\n     * The style is based on the device appearance.\n     * If the device is using Dark mode, the statusbar text will be light.\n     * If the device is using Light mode, the statusbar text will be dark.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Default\"] = \"DEFAULT\";\n})(Style || (Style = {}));\nexport var Animation;\n(function (Animation) {\n    /**\n     * No animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"None\"] = \"NONE\";\n    /**\n     * Slide animation during show/hide.\n     * It doesn't work on iOS 15+.\n     *\n     * @deprecated Use Animation.Fade or Animation.None instead.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Slide\"] = \"SLIDE\";\n    /**\n     * Fade animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Fade\"] = \"FADE\";\n})(Animation || (Animation = {}));\n/**\n * @deprecated Use `Animation`.\n * @since 1.0.0\n */\nexport const StatusBarAnimation = Animation;\n/**\n * @deprecated Use `Style`.\n * @since 1.0.0\n */\nexport const StatusBarStyle = Style;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst StatusBar = registerPlugin('StatusBar');\nexport * from './definitions';\nexport { StatusBar };\n//# sourceMappingURL=index.js.map","export var NavigationBarPluginEvents;\n(function (NavigationBarPluginEvents) {\n    /**\n     * Called after the navigation bar is displayed\n     */\n    NavigationBarPluginEvents[\"SHOW\"] = \"onShow\";\n    /**\n     * Called after navigation bar is hidden\n     */\n    NavigationBarPluginEvents[\"HIDE\"] = \"onHide\";\n    /**\n     * Called after navigation bar color is changed\n     */\n    NavigationBarPluginEvents[\"COLOR_CHANGE\"] = \"onColorChange\";\n})(NavigationBarPluginEvents || (NavigationBarPluginEvents = {}));\n//# sourceMappingURL=navigationbar.events.js.map","import { registerPlugin } from '@capacitor/core';\nconst NavigationBar = registerPlugin('NavigationBar', {\n    web: () => import('./web').then(m => new m.NavigationBarWeb()),\n});\nexport * from './definitions';\nexport * from './navigationbar.events';\nexport { NavigationBar };\n//# sourceMappingURL=index.js.map","import { getGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport { switchStatusBar } from './capacitor/switchStatusBar';\nimport cssColorToHex from './cssColorToHex';\nimport { getTelegramApp, getTelegramAppAsync } from './telegram';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\nlet currentTheme: Theme;\nlet forcedDarkStatusBarBackground: boolean | undefined;\n\nexport default function switchTheme(theme: Theme, isInModal?: boolean) {\n  currentTheme = theme;\n\n  setThemeValue();\n  setStatusBarStyle({ isInModal });\n  setThemeColor();\n}\n\nfunction setThemeValue() {\n  const isDarkTheme = currentTheme === 'dark'\n    || (currentTheme === 'system'\n      && (IS_TELEGRAM_APP\n        ? getTelegramApp()?.colorScheme === 'dark'\n        : prefersDark.matches)\n    );\n\n  document.documentElement.classList.toggle('theme-dark', isDarkTheme);\n}\n\nfunction handlePrefersColorSchemeChange() {\n  setThemeValue();\n  setStatusBarStyle();\n}\n\nfunction setThemeColor() {\n  requestMeasure(() => {\n    const color = getComputedStyle(document.documentElement)\n      .getPropertyValue('--color-background-second');\n\n    document\n      .querySelector('meta[name=\"theme-color\"]')\n      ?.setAttribute('content', color);\n  });\n}\n\nexport function setStatusBarStyle(options?: { forceDarkBackground?: boolean; isInModal?: boolean }) {\n  if (IS_TELEGRAM_APP) {\n    requestMeasure(() => {\n      const color = getComputedStyle(document.documentElement)\n        .getPropertyValue('--color-background-second');\n      if (!color) return;\n\n      const hexColor = cssColorToHex(color) as `#${string}`;\n\n      getTelegramApp()?.setHeaderColor(hexColor);\n      getTelegramApp()?.setBackgroundColor(hexColor);\n      getTelegramApp()?.setBottomBarColor(hexColor);\n    });\n\n    return;\n  }\n  if (!IS_CAPACITOR) return;\n\n  if (options?.forceDarkBackground !== undefined) forcedDarkStatusBarBackground = options.forceDarkBackground;\n  switchStatusBar(currentTheme, prefersDark.matches, forcedDarkStatusBarBackground, options?.isInModal);\n}\n\nprefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('themeChanged', onThemeChanged);\n  });\n}\n\nexport function unsubscribeOnTelegramThemeChange() {\n  getTelegramApp()?.offEvent('themeChanged', onThemeChanged);\n}\n\nfunction onThemeChanged() {\n  if (getGlobal().settings.theme === 'system') {\n    handlePrefersColorSchemeChange();\n  }\n}\n","import { StatusBar, Style } from '@capacitor/status-bar';\nimport { NavigationBar } from '@mauricewegner/capacitor-navigation-bar';\n\nimport type { Theme } from '../../global/types';\n\nimport {\n  IS_ANDROID_APP,\n} from '../windowEnvironment';\n\nexport function switchStatusBar(\n  currentAppTheme: Theme, isSystemDark: boolean, forceDarkBackground?: boolean, isModalOpen?: boolean,\n) {\n  const style = forceDarkBackground || currentAppTheme === 'dark'\n    ? Style.Dark\n    : (isSystemDark && currentAppTheme === 'system' ? Style.Dark : Style.Light);\n\n  void StatusBar.setStyle({ style, isModalOpen });\n  if (IS_ANDROID_APP) {\n    void NavigationBar.setColor({\n      color: '#00000000',\n      darkButtons: currentAppTheme === 'light' || (!isSystemDark && currentAppTheme === 'system'),\n    });\n  }\n}\n","/**\n * Pulled from @react-hookz/web library source with some edits to match the code-style and use Teact\n * See https://github.com/react-hookz/web/blob/master/src/useMediaQuery/useMediaQuery.ts\n */\n\nimport type { Dispatch } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ntype QueryStateSetter = (matches: boolean) => void;\n\n// eslint-disable-next-line @stylistic/max-len\nconst queriesMap = new Map<string, { mql: MediaQueryList; dispatchers: Set<Dispatch<boolean>>; listener: () => void }>();\n\nconst createQueryEntry = (query: string) => {\n  const mql = matchMedia(query);\n  const dispatchers = new Set<QueryStateSetter>();\n  const listener = () => {\n    dispatchers.forEach((d) => d(mql.matches));\n  };\n\n  if (mql.addEventListener) mql.addEventListener('change', listener, { passive: true });\n  else mql.addListener(listener);\n\n  return {\n    mql,\n    dispatchers,\n    listener,\n  };\n};\n\nconst querySubscribe = (query: string, setState: QueryStateSetter) => {\n  let entry = queriesMap.get(query);\n\n  if (!entry) {\n    entry = createQueryEntry(query);\n    queriesMap.set(query, entry);\n  }\n\n  entry.dispatchers.add(setState);\n  setState(entry.mql.matches);\n};\n\nconst queryUnsubscribe = (query: string, setState: QueryStateSetter): void => {\n  const entry = queriesMap.get(query);\n\n  if (!entry) {\n    return;\n  }\n\n  const { mql, dispatchers, listener } = entry;\n  dispatchers.delete(setState);\n\n  if (!dispatchers.size) {\n    queriesMap.delete(query);\n\n    if (mql.removeEventListener) mql.removeEventListener('change', listener);\n    else mql.removeListener(listener);\n  }\n};\n\ninterface UseMediaQueryOptions {\n  initializeWithValue?: boolean;\n}\n\n/**\n * Tracks the state of CSS media query.\n *\n * @param query CSS media query to track.\n * @param options Hook options:\n * `initializeWithValue` (default: `true`) - Determine media query match state on first render. Setting\n * this to false will make the hook yield `undefined` on first render.\n */\nexport function useMediaQuery(query: string, options?: UseMediaQueryOptions): boolean | undefined {\n  function getInitialState() {\n    if (options?.initializeWithValue ?? true) {\n      let entry = queriesMap.get(query);\n      if (!entry) {\n        entry = createQueryEntry(query);\n        queriesMap.set(query, entry);\n      }\n      return entry.mql.matches;\n    }\n\n    return undefined;\n  }\n\n  const [state, setState] = useState<boolean | undefined>(getInitialState());\n\n  useEffect(() => {\n    querySubscribe(query, setState);\n\n    return () => queryUnsubscribe(query, setState);\n  }, [query]);\n\n  return state;\n}\n","import { MOBILE_SCREEN_MAX_WIDTH } from '../config';\nimport { useMediaQuery } from './useMediaQuery';\n\nlet isPortrait: boolean | undefined;\n\nexport function useDeviceScreen() {\n  isPortrait = useMediaQuery(`(max-width: ${MOBILE_SCREEN_MAX_WIDTH - 0.02}px)`);\n  const isSmallHeight = useMediaQuery('(max-height: 43.5rem)');\n\n  return {\n    isPortrait: Boolean(isPortrait),\n    isSmallHeight,\n    isLandscape: !isPortrait,\n    screenHeight: window.screen.height,\n  };\n}\n\nexport function getIsPortrait() {\n  return isPortrait;\n}\n\nexport function getIsLandscape() {\n  return !isPortrait;\n}\n","import { useEffect, useRef } from '../lib/teact/teact';\n\nconst useEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useEffectWithPrevDeps;\n","import type { HTMLInputTypeAttribute } from 'react';\nimport type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { type ElementRef, useEffect, useLayoutEffect, useState } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { setGlobal } from '../global';\n\nimport type { GlobalState } from '../global/types';\n\nimport { bigintReviver } from '../util/bigint';\nimport cssColorToHex from '../util/cssColorToHex';\nimport { setStatusBarStyle } from '../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport { useDeviceScreen } from './useDeviceScreen';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst BLUR_TIMEOUT = 50;\nconst COMPACT_MODAL_CSS_SELECTOR = '.is-compact-modal';\n\nconst controlledByMain = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nconst textInputTypes = new Set<HTMLInputTypeAttribute>([\n  'color', 'date', 'datetime-local', 'email', 'month', 'number',\n  'password', 'search', 'tel', 'text', 'time', 'url', 'week',\n]);\n\nlet safeAreaCache: SafeAreaInsets['insets'] | undefined;\nconst safeAreaPromise = SafeArea.getSafeAreaInsets().then(({ insets }) => {\n  safeAreaCache = insets;\n  return safeAreaCache;\n});\n\nlet currentKey: BottomSheetKeys | undefined;\n\nif (IS_DELEGATED_BOTTOM_SHEET) {\n  void BottomSheet.addListener('delegate', ({ key, globalJson }: { key: BottomSheetKeys; globalJson: string }) => {\n    currentKey = key;\n    controlledByMain.get(key)?.();\n\n    setGlobal(\n      JSON.parse(globalJson, bigintReviver) as GlobalState,\n      { forceOutdated: true, forceSyncOnIOs: true },\n    );\n  });\n\n  void BottomSheet.addListener('move', () => {\n    window.dispatchEvent(new Event('viewportmove'));\n  });\n}\n\nlet isForcedFullSize: boolean;\n\nexport function getIsForcedFullSize() {\n  return isForcedFullSize;\n}\n\nexport function useDelegatedBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n  dialogRef: ElementRef<HTMLDivElement>,\n  forceFullNative = false,\n  noResetHeightOnBlur = false,\n) {\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET || !key || key !== currentKey) return;\n\n    if (isOpen) {\n      const dialogEl = dialogRef.current!;\n\n      void BottomSheet.openSelf({\n        key,\n        height: String(dialogEl.offsetHeight),\n        backgroundColor: cssColorToHex(getComputedStyle(dialogEl).backgroundColor),\n      }).then(() => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      });\n    } else if (prevIsOpen) {\n      void BottomSheet.closeSelf({ key });\n      setStatusBarStyle({\n        forceDarkBackground: false,\n      });\n    }\n  }, [isOpen, dialogRef, key, onClose]);\n\n  const isDelegatedAndOpen = IS_DELEGATED_BOTTOM_SHEET && key && isOpen;\n\n  const { screenHeight } = useDeviceScreen();\n  const [safeArea, setSafeArea] = useState(safeAreaCache);\n  void safeAreaPromise.then(setSafeArea);\n  // We use Safe Area plugin instead of CSS `env()` function as it does not depend on modal position\n  const maxHeight = screenHeight - (safeArea?.top || 0);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return;\n\n    dialogRef.current!.style[forceFullNative ? 'maxHeight' : 'height'] = '';\n    dialogRef.current!.style[forceFullNative ? 'height' : 'maxHeight'] = `${maxHeight}px`;\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, maxHeight]);\n\n  useEffectWithPrevDeps(([prevForceFullNative]) => {\n    if (!isDelegatedAndOpen) return;\n\n    isForcedFullSize = forceFullNative;\n\n    // Skip initial opening\n    if (forceFullNative !== undefined && prevForceFullNative === undefined) return;\n\n    void BottomSheet.toggleSelfFullSize({ isFullSize: forceFullNative });\n  }, [forceFullNative, isDelegatedAndOpen]);\n\n  useLayoutEffect(() => {\n    if (!isDelegatedAndOpen) return undefined;\n\n    const dialogEl = dialogRef.current!;\n    let blurTimeout: number | undefined;\n\n    function onFocus(e: FocusEvent) {\n      if (!isInput(e.target)) {\n        return;\n      }\n\n      if (blurTimeout) {\n        clearTimeout(blurTimeout);\n        blurTimeout = undefined;\n        return;\n      }\n\n      preventScrollOnFocus(dialogEl);\n\n      void BottomSheet.toggleSelfFullSize({ isFullSize: true });\n    }\n\n    function onBlur(e: FocusEvent) {\n      if (!isInput(e.target) || noResetHeightOnBlur || forceFullNative || isInCompactModal(e.target)) {\n        return;\n      }\n\n      blurTimeout = window.setTimeout(() => {\n        blurTimeout = undefined;\n        void BottomSheet.toggleSelfFullSize({ isFullSize: false });\n      }, BLUR_TIMEOUT);\n    }\n\n    document.addEventListener('focusin', onFocus);\n    document.addEventListener('focusout', onBlur);\n\n    return () => {\n      document.removeEventListener('focusout', onBlur);\n      document.removeEventListener('focusin', onFocus);\n    };\n  }, [dialogRef, forceFullNative, isDelegatedAndOpen, noResetHeightOnBlur]);\n}\n\nexport function useOpenFromMainBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    controlledByMain.set(key, open);\n\n    if (currentKey === key) {\n      open();\n    }\n\n    return () => {\n      if (controlledByMain.get(key) === open) {\n        controlledByMain.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n\nexport function openInMain(key: BottomSheetKeys) {\n  void BottomSheet.openInMain({ key });\n}\n\nfunction isInput(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return (el.tagName === 'INPUT' && textInputTypes.has((el as HTMLInputElement).type))\n    || el.tagName === 'TEXTAREA'\n    || (el.tagName === 'DIV' && el.isContentEditable);\n}\n\nfunction isInCompactModal(el?: EventTarget | null) {\n  if (!el || !(el instanceof HTMLElement)) return false;\n\n  return el.matches(COMPACT_MODAL_CSS_SELECTOR) || !!el.closest('.is-compact-modal');\n}\n\nfunction preventScrollOnFocus(el: HTMLDivElement) {\n  el.style.opacity = '0';\n  setTimeout(() => {\n    el.style.opacity = '1';\n  });\n\n  document.documentElement.scrollTop = 0;\n}\n","import type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport { useEffect } from '../lib/teact/teact';\nimport { forceOnHeavyAnimationOnce } from '../lib/teact/teactn';\nimport { getGlobal } from '../global';\n\nimport { pause } from '../util/schedulers';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useEffectWithPrevDeps from './useEffectWithPrevDeps';\n\nconst RACE_TIMEOUT = 1000;\nconst CLOSING_DURATION = 100;\n\nconst controlledByNative = new Map<BottomSheetKeys, NoneToVoidFunction>();\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  void BottomSheet.prepare();\n\n  void BottomSheet.addListener(\n    'openInMain',\n    ({ key }: { key: BottomSheetKeys }) => {\n      controlledByNative.get(key)?.();\n    },\n  );\n}\n\nlet lastOpenCall = Promise.resolve();\nlet closeCurrent: NoneToVoidFunction | undefined;\n\nexport function useDelegatingBottomSheet(\n  key: BottomSheetKeys | undefined,\n  isPortrait: boolean | undefined,\n  isOpen: boolean | undefined,\n  onClose: AnyToVoidFunction,\n) {\n  const isDelegating = IS_DELEGATING_BOTTOM_SHEET && key;\n  const shouldOpen = isOpen && isPortrait;\n\n  useEffectWithPrevDeps(([prevShouldOpen]) => {\n    if (!isDelegating) return;\n\n    if (shouldOpen) {\n      closeCurrent?.();\n\n      const closeNext = () => {\n        forceOnHeavyAnimationOnce();\n        onClose();\n      };\n\n      closeCurrent = closeNext;\n\n      // Wait until previous call resolves to get an up-to-date global\n      lastOpenCall = Promise.race([\n        lastOpenCall,\n        pause(RACE_TIMEOUT), // Sometimes the last open call is stuck for some unknown reason\n      ])\n        .then(() => {\n          return BottomSheet.delegate({\n            key,\n            globalJson: JSON.stringify(getGlobal()),\n          });\n        })\n        .then(() => {\n          if (closeCurrent === closeNext) {\n            closeCurrent();\n            closeCurrent = undefined;\n          }\n        })\n        .then(() => pause(CLOSING_DURATION));\n    } else if (prevShouldOpen) {\n      void BottomSheet.release({ key });\n    }\n  }, [shouldOpen, isDelegating, key, onClose]);\n\n  return isDelegating && isPortrait;\n}\n\nexport function useOpenFromNativeBottomSheet(\n  key: BottomSheetKeys,\n  open: NoneToVoidFunction,\n) {\n  useEffect(() => {\n    if (!IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    controlledByNative.set(key, open);\n\n    return () => {\n      if (controlledByNative.get(key) === open) {\n        controlledByNative.delete(key);\n      }\n    };\n  }, [key, open]);\n}\n","import { logDebugError } from '../logs';\nimport { debounce } from '../schedulers';\nimport { getTelegramApp } from './index';\n\ninterface CallbackEntry {\n  id: number;\n  callback: NoneToVoidFunction;\n}\n\nconst runDebounce = debounce((cb) => cb(), 300, false);\nconst callbacks: CallbackEntry[] = [];\nlet isGlobalHandlerAttached = false;\nlet uniqueId = 0;\n\nfunction getNextId() {\n  uniqueId += 1;\n  return uniqueId;\n}\n\nfunction updateBackButtonState() {\n  const backButton = getTelegramApp()!.BackButton;\n\n  if (callbacks.length > 0 && !isGlobalHandlerAttached) {\n    backButton.show();\n    backButton.onClick(handleBackButtonClick);\n    isGlobalHandlerAttached = true;\n  } else if (!callbacks.length && isGlobalHandlerAttached) {\n    backButton.hide();\n    backButton.offClick(handleBackButtonClick);\n    isGlobalHandlerAttached = false;\n  }\n}\n\nexport function registerCallback(cb: NoneToVoidFunction) {\n  const id = getNextId();\n  callbacks.push({ id, callback: cb });\n  runDebounce(updateBackButtonState);\n  return id;\n}\n\nexport function unregisterCallback(id: number) {\n  const index = callbacks.findIndex((entry) => entry.id === id);\n  if (index !== -1) {\n    callbacks.splice(index, 1);\n    runDebounce(updateBackButtonState);\n  }\n}\n\nfunction handleBackButtonClick() {\n  if (callbacks.length > 0) {\n    const entry = callbacks.pop()!;\n    try {\n      entry.callback();\n    } catch (err: any) {\n      logDebugError('[handleBackButtonClick]', err);\n    }\n  }\n\n  runDebounce(updateBackButtonState);\n}\n","import { useCallback, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP, IS_TEST } from '../config';\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport {\n  registerCallback as registerTelegramCallback,\n  unregisterCallback as unregisterTelegramCallback,\n} from '../util/telegram/backButtonManager';\nimport { IS_IOS, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useLastCallback from './useLastCallback';\nimport useSyncEffect from './useSyncEffect';\n\nconst PATH_BASE = `${window.location.pathname}${window.location.search}`;\n\ntype HistoryRecord = {\n  index: number;\n  // Should this record be replaced by the next record (for example Menu)\n  shouldBeReplaced?: boolean;\n  // Mark this record as replaced by the next record. Only used to check if needed to perform effectBack\n  markReplaced?: NoneToVoidFunction;\n  onBack?: NoneToVoidFunction;\n  // Set if the element is closed in the UI, but not in the real history\n  isClosed?: boolean;\n};\n\ntype HistoryOperationGo = {\n  type: 'go';\n  delta: number;\n};\n\ntype HistoryOperationState = {\n  type: 'pushState' | 'replaceState';\n  data: any;\n};\n\ntype HistoryOperation = HistoryOperationGo | HistoryOperationState;\n\n// Needed to dismiss any 'trashed' history records from the previous page reloads.\nconst historyUniqueSessionId = Number(new Date());\n// Reflects real history state, but also contains information on which records should be replaced by the next record and\n// which records are deferred to close on the next operation\nlet historyState: HistoryRecord[];\n// Reflects current real history index\nlet historyCursor: number;\n// If we alter real history programmatically, the popstate event will be fired, which we don't need\nlet isAlteringHistory = false;\n// Unfortunately Safari doesn't really like when there's 2+ consequent history operations in one frame, so we need\n// to delay them to the next raf\nlet deferredHistoryOperations: HistoryOperation[] = [];\nlet deferredPopstateOperations: HistoryOperationState[] = [];\n\n// Do not remove: used for history unit tests\nif (IS_TEST) {\n  (window as any).TEST_getHistoryState = () => historyState;\n  (window as any).TEST_getHistoryCursor = () => historyCursor;\n}\n\nfunction applyDeferredHistoryOperations() {\n  const goOperations = deferredHistoryOperations.filter((op) => op.type === 'go');\n  const stateOperations = deferredHistoryOperations.filter((op) => op.type !== 'go');\n  const goCount = goOperations.reduce((acc, op) => acc + op.delta, 0);\n\n  deferredHistoryOperations = [];\n\n  if (goCount) {\n    window.history.go(goCount);\n\n    // If we have some `state` operations after the `go` operations, we need to wait until the popstate event\n    // so the order of operations is correctly preserved\n    if (stateOperations.length) {\n      deferredPopstateOperations.push(...stateOperations);\n      return;\n    }\n  }\n\n  processStateOperations(stateOperations);\n}\n\nfunction processStateOperations(stateOperations: HistoryOperationState[]) {\n  stateOperations.forEach((op) => window.history[op.type](op.data, ''));\n}\n\nfunction deferHistoryOperation(historyOperation: HistoryOperation) {\n  if (!deferredHistoryOperations.length) {\n    requestMeasure(applyDeferredHistoryOperations);\n  }\n\n  deferredHistoryOperations.push(historyOperation);\n}\n\n// Resets history to the `root` state\nfunction resetHistory() {\n  historyCursor = 0;\n  historyState = [{\n    index: 0,\n    onBack: () => window.history.back(),\n  }];\n\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    window.history.replaceState({ index: 0, historyUniqueSessionId }, '', PATH_BASE);\n  }\n}\n\nresetHistory();\n\nfunction cleanupClosed(alreadyClosedCount = 1) {\n  let countClosed = alreadyClosedCount;\n  for (let i = historyCursor - 1; i > 0; i--) {\n    if (!historyState[i].isClosed) break;\n    countClosed++;\n  }\n  if (countClosed) {\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -countClosed,\n    });\n  }\n  return countClosed;\n}\n\nfunction cleanupTrashedState() {\n  for (let i = historyState.length - 1; i > 0; i--) {\n    if (historyState[i].isClosed) {\n      continue;\n    }\n    historyState[i].onBack?.();\n  }\n\n  resetHistory();\n}\n\nwindow.addEventListener('popstate', ({ state }: PopStateEvent) => {\n  if (isAlteringHistory) {\n    isAlteringHistory = false;\n    if (deferredPopstateOperations.length) {\n      processStateOperations(deferredPopstateOperations);\n      deferredPopstateOperations = [];\n    }\n    return;\n  }\n\n  if (!state) {\n    cleanupTrashedState();\n    return;\n  }\n\n  const { index, historyUniqueSessionId: previousUniqueSessionId } = state;\n  if (previousUniqueSessionId !== historyUniqueSessionId) {\n    cleanupTrashedState();\n    return;\n  }\n\n  // New real history state matches the old virtual one. Not possible in theory, but in practice we have Safari\n  if (index === historyCursor) {\n    return;\n  }\n\n  if (index < historyCursor) {\n    // Navigating back\n    let alreadyClosedCount = 0;\n    for (let i = historyCursor; i > index - alreadyClosedCount; i--) {\n      if (historyState[i].isClosed) {\n        alreadyClosedCount++;\n        continue;\n      }\n      historyState[i].onBack?.();\n    }\n\n    const countClosed = cleanupClosed(alreadyClosedCount);\n    historyCursor += index - historyCursor - countClosed;\n\n    // Can happen when we have deferred a real back for some element (for example Menu), closed via UI,\n    // pressed back button and caused a pushState.\n    if (historyCursor < 0) {\n      historyCursor = 0;\n    }\n  } else if (index > historyCursor) {\n    // Forward navigation is not yet supported\n    isAlteringHistory = true;\n    deferHistoryOperation({\n      type: 'go',\n      delta: -(index - historyCursor),\n    });\n  }\n});\n\nexport default function useHistoryBack({\n  isActive,\n  shouldBeReplaced,\n  shouldIgnoreForTelegram,\n  onBack,\n}: {\n  isActive?: boolean;\n  shouldBeReplaced?: boolean;\n  shouldIgnoreForTelegram?: boolean;\n  onBack: NoneToVoidFunction;\n}) {\n  const lastOnBack = useLastCallback(onBack);\n\n  // Active index of the record\n  const indexRef = useRef<number>();\n  const telegramIdRef = useRef<number>();\n  const wasReplaced = useRef(false);\n\n  const isFirstRender = useRef(true);\n\n  const pushState = useCallback((forceReplace = false) => {\n    // Check if the old state should be replaced\n    const shouldReplace = forceReplace || historyState[historyCursor].shouldBeReplaced;\n    indexRef.current = shouldReplace ? historyCursor : ++historyCursor;\n\n    historyCursor = indexRef.current;\n\n    // Mark the previous record as replaced so effectBack doesn't perform back operation on the new record\n    const previousRecord = historyState[indexRef.current];\n    if (previousRecord && !previousRecord.isClosed) {\n      previousRecord.markReplaced?.();\n    }\n\n    historyState[indexRef.current] = {\n      index: indexRef.current,\n      onBack: lastOnBack,\n      shouldBeReplaced,\n      markReplaced: () => {\n        wasReplaced.current = true;\n      },\n    };\n\n    deferHistoryOperation({\n      type: shouldReplace ? 'replaceState' : 'pushState',\n      data: {\n        index: indexRef.current,\n        historyUniqueSessionId,\n      },\n    });\n  }, [lastOnBack, shouldBeReplaced]);\n\n  const processBack = useCallback(() => {\n    // Only process back on open records\n    if (indexRef.current && historyState[indexRef.current] && !wasReplaced.current) {\n      historyState[indexRef.current].isClosed = true;\n      wasReplaced.current = true;\n      if (indexRef.current === historyCursor && !shouldBeReplaced) {\n        historyCursor -= cleanupClosed();\n      }\n    }\n  }, [shouldBeReplaced]);\n\n  // Process back navigation when element is unmounted\n  useEffectOnce(() => {\n    if (IS_IOS) return undefined;\n\n    isFirstRender.current = false;\n    return () => {\n      if (!isActive || wasReplaced.current) return;\n      processBack();\n    };\n  });\n\n  useSyncEffect(([prevIsActive]) => {\n    if (IS_IOS) return;\n    if (prevIsActive === isActive) return;\n    if (isFirstRender.current && !isActive) return;\n\n    if (isActive) {\n      pushState();\n    } else {\n      processBack();\n    }\n  }, [isActive, processBack, pushState]);\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || shouldIgnoreForTelegram || !isActive) return undefined;\n\n    telegramIdRef.current = registerTelegramCallback(lastOnBack);\n\n    return () => {\n      if (telegramIdRef.current !== undefined) {\n        unregisterTelegramCallback(telegramIdRef.current);\n        telegramIdRef.current = undefined;\n      }\n    };\n  }, [isActive, shouldIgnoreForTelegram, onBack]);\n}\n","import { DEBUG } from '../../config';\n\ntype Handler = (e: Event) => void;\ntype DelegationRegistry = Map<Element, Handler>;\n\nconst NON_BUBBLEABLE_EVENTS = new Set(['scroll', 'mouseenter', 'mouseleave', 'load', 'error']);\n\nconst documentEventCounters: Record<string, number> = {};\nconst delegationRegistryByEventType: Record<string, DelegationRegistry> = {};\nconst delegatedEventTypesByElement = new Map<Element, Set<string>>();\n\nexport function addEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    addDelegatedListener(eventType, element, handler);\n  } else {\n    element.addEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function removeEventListener(element: Element, propName: string, handler: Handler, asCapture = false) {\n  const eventType = resolveEventType(propName, element);\n  if (canUseEventDelegation(eventType, element, asCapture)) {\n    removeDelegatedListener(eventType, element);\n  } else {\n    element.removeEventListener(eventType, handler, asCapture);\n  }\n}\n\nexport function resolveEventType(propName: string, element: Element) {\n  const eventType = propName\n    .replace(/^on/, '')\n    .replace(/Capture$/, '').toLowerCase();\n\n  if (eventType === 'change' && element.tagName !== 'SELECT') {\n    // React behavior repeated here.\n    // https://stackoverflow.com/questions/38256332/in-react-whats-the-difference-between-onchange-and-oninput\n    return 'input';\n  }\n\n  if (eventType === 'doubleclick') {\n    return 'dblclick';\n  }\n\n  // Replace focus/blur by their \"bubbleable\" versions\n  if (eventType === 'focus') {\n    return 'focusin';\n  }\n\n  if (eventType === 'blur') {\n    return 'focusout';\n  }\n\n  return eventType;\n}\n\nfunction canUseEventDelegation(realEventType: string, element: Element, asCapture: boolean) {\n  return (\n    !asCapture\n    && !NON_BUBBLEABLE_EVENTS.has(realEventType)\n    && element.tagName !== 'VIDEO'\n    && element.tagName !== 'IFRAME'\n  );\n}\n\nfunction addDelegatedListener(eventType: string, element: Element, handler: Handler) {\n  if (!documentEventCounters[eventType]) {\n    documentEventCounters[eventType] = 0;\n    document.addEventListener(eventType, handleEvent);\n  }\n\n  resolveDelegationRegistry(eventType).set(element, handler);\n  resolveDelegatedEventTypes(element).add(eventType);\n  documentEventCounters[eventType]++;\n}\n\nfunction removeDelegatedListener(eventType: string, element: Element) {\n  documentEventCounters[eventType]--;\n  if (!documentEventCounters[eventType]) {\n    // Synchronous deletion on 0 will cause perf degradation in the case of 1 element\n    // which is not a real case, so it's ok to do it this way\n    document.removeEventListener(eventType, handleEvent);\n  }\n\n  delegationRegistryByEventType[eventType].delete(element);\n  delegatedEventTypesByElement.get(element)!.delete(eventType);\n}\n\nexport function removeAllDelegatedListeners(element: Element) {\n  const eventTypes = delegatedEventTypesByElement.get(element);\n  if (!eventTypes) {\n    return;\n  }\n\n  eventTypes.forEach((eventType) => removeDelegatedListener(eventType, element));\n  delegatedEventTypesByElement.delete(element);\n}\n\nfunction handleEvent(realEvent: Event) {\n  const events = delegationRegistryByEventType[realEvent.type];\n\n  if (events) {\n    let furtherCallsPrevented = false;\n    let current: Element = realEvent.target as Element;\n\n    const stopPropagation = () => {\n      furtherCallsPrevented = true;\n    };\n\n    const preventDefault = () => {\n      realEvent.preventDefault();\n    };\n\n    // Proxy is a simplest way to provide an access to the event property\n    const event = new Proxy(realEvent, {\n      get(target, p) {\n        if (p === 'currentTarget') {\n          return current;\n        }\n        if (p === 'stopPropagation' || p === 'stopImmediatePropagation') {\n          return stopPropagation;\n        }\n        if (p === 'preventDefault') {\n          // \"this\" is changed to proxy and one can't call methods via it\n          return preventDefault;\n        }\n        return Reflect.get(target, p);\n      },\n    });\n\n    // This can also be limited by teact root\n    while (current && current !== document.body) {\n      const handler = events.get(current);\n      if (handler) {\n        handler(event);\n        if (furtherCallsPrevented) {\n          return;\n        }\n      }\n\n      current = current.parentNode as Element;\n    }\n  }\n}\n\nfunction resolveDelegationRegistry(eventType: string) {\n  if (!delegationRegistryByEventType[eventType]) {\n    delegationRegistryByEventType[eventType] = new Map();\n  }\n\n  return delegationRegistryByEventType[eventType];\n}\n\nfunction resolveDelegatedEventTypes(element: Element) {\n  const existing = delegatedEventTypesByElement.get(element);\n  if (existing) {\n    return existing;\n  }\n\n  const newSet = new Set<string>();\n  delegatedEventTypesByElement.set(element, newSet);\n\n  return newSet;\n}\n\nif (DEBUG) {\n  document.addEventListener('dblclick', () => {\n    const documentListenersCount = Object.keys(documentEventCounters).length;\n    const delegatedHandlersCount1 = Object.values(documentEventCounters)\n      .reduce((acc, counter) => acc + counter, 0);\n    const delegationRegistriesCount = Object.keys(delegationRegistryByEventType).length;\n    const delegatedHandlersCount2 = Object.values(delegationRegistryByEventType)\n      .reduce((acc, delegationRegistry) => acc + delegationRegistry.size, 0);\n    const delegationElementsCount = delegatedEventTypesByElement.size;\n    const delegatedEventTypesCount = Array.from(delegatedEventTypesByElement.values())\n      .reduce((acc, eventTypes) => acc + eventTypes.size, 0);\n\n    // eslint-disable-next-line no-console\n    console.warn('DELEGATED EVENTS STATS', {\n      delegatedHandlersCount1,\n      delegatedHandlersCount2,\n      delegatedEventTypesCount,\n      delegationRegistriesCount,\n      delegationElementsCount,\n      documentListenersCount,\n    });\n  });\n}\n","import type { ChangeEvent, FocusEvent } from 'react';\n\nimport type { Signal } from '../../util/signals';\nimport type {\n  VirtualElement,\n  VirtualElementChildren,\n  VirtualElementComponent,\n  VirtualElementFragment,\n  VirtualElementParent,\n  VirtualElementReal,\n  VirtualElementTag,\n} from './teact';\n\nimport { DEBUG } from '../../config';\nimport { unique } from '../../util/iteratees';\nimport { addEventListener, removeAllDelegatedListeners, removeEventListener } from './dom-events';\nimport {\n  captureImmediateEffects,\n  hasElementChanged,\n  isParentElement,\n  mountComponent,\n  MountState,\n  renderComponent,\n  unmountComponent,\n  VirtualType,\n} from './teact';\n\ninterface VirtualDomHead {\n  children: [VirtualElement] | [];\n}\n\ninterface SelectionState {\n  selectionStart: number | null;\n  selectionEnd: number | null;\n  isCaretAtEnd: boolean;\n}\n\ntype CurrentContext = Record<string, Signal<unknown>>;\n\ntype DOMElement = HTMLElement | SVGElement;\n\nconst SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nconst HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n\nconst FILTERED_ATTRIBUTES = new Set(['key', 'ref', 'teactFastList', 'teactOrderKey']);\nconst HTML_ATTRIBUTES = new Set(['dir', 'role', 'form']);\nconst CONTROLLABLE_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nconst MAPPED_ATTRIBUTES: Record<string, string> = {\n  autoCapitalize: 'autocapitalize',\n  autoComplete: 'autocomplete',\n  autoCorrect: 'autocorrect',\n  autoPlay: 'autoplay',\n  spellCheck: 'spellcheck',\n};\nconst INDEX_KEY_PREFIX = '__indexKey#';\nconst SELECTION_STATE_ATTRIBUTE = '__teactSelectionState';\n\nconst headsByElement = new WeakMap<Element, VirtualDomHead>();\nconst extraClasses = new WeakMap<Element, Set<string>>();\nconst extraStyles = new WeakMap<Element, Record<string, string>>();\n\nlet DEBUG_virtualTreeSize = 1;\n\nfunction render($element: VirtualElement | undefined, parentEl: HTMLElement) {\n  if (!headsByElement.has(parentEl)) {\n    headsByElement.set(parentEl, { children: [] });\n  }\n\n  const runImmediateEffects = captureImmediateEffects();\n  const $head = headsByElement.get(parentEl)!;\n  const $renderedChild = renderWithVirtual(parentEl, $head.children[0], $element, $head, {}, 0);\n  runImmediateEffects?.();\n\n  $head.children = $renderedChild ? [$renderedChild] : [];\n\n  if (process.env.APP_ENV === 'perf') {\n    DEBUG_virtualTreeSize = 0;\n    DEBUG_addToVirtualTreeSize($head);\n\n    return DEBUG_virtualTreeSize;\n  }\n\n  return undefined;\n}\n\nfunction renderWithVirtual<T extends VirtualElement | undefined>(\n  parentEl: DOMElement,\n  $current: VirtualElement | undefined,\n  $new: T,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n  options: {\n    skipComponentUpdate?: boolean;\n    nextSibling?: ChildNode;\n    forceMoveToEnd?: boolean;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  } = {},\n): T {\n  const { skipComponentUpdate, fragment } = options;\n  let { nextSibling, namespace } = options;\n\n  const isCurrentComponent = $current?.type === VirtualType.Component;\n  const isNewComponent = $new?.type === VirtualType.Component;\n  const $newAsReal = $new as VirtualElementReal;\n\n  const isCurrentFragment = !isCurrentComponent && $current?.type === VirtualType.Fragment;\n  const isNewFragment = !isNewComponent && $new?.type === VirtualType.Fragment;\n\n  if ($new?.type === VirtualType.Tag) {\n    if ($new.tag === 'svg') namespace = SVG_NAMESPACE;\n    if ($new.props.xmlns) namespace = $new.props.xmlns;\n  }\n\n  if (\n    !skipComponentUpdate\n    && isCurrentComponent && isNewComponent\n    && !hasElementChanged($current, $new!)\n  ) {\n    $new = updateComponent($current, $new as VirtualElementComponent) as typeof $new;\n  }\n\n  // Parent element may have changed, so we need to update the listener closure.\n  if (\n    !skipComponentUpdate\n    && isNewComponent\n    && ($new as VirtualElementComponent).componentInstance.mountState === MountState.Mounted\n  ) {\n    setupComponentUpdateListener(parentEl, $new as VirtualElementComponent, $parent, currentContext, index);\n  }\n\n  if ($current === $new) {\n    return $new;\n  }\n\n  if (DEBUG && $new) {\n    const newTarget = 'target' in $new && $new.target;\n    if (newTarget && (!$current || ('target' in $current && newTarget !== $current.target))) {\n      throw new Error('[Teact] Cached virtual element was moved within tree');\n    }\n  }\n\n  if (!$current && $new) {\n    if (isNewComponent || isNewFragment) {\n      if (isNewComponent) {\n        $new = initComponent(\n          parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n        ) as unknown as typeof $new;\n        currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n      }\n\n      mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n        nextSibling, fragment, namespace,\n      });\n    } else {\n      const canSetTextContent = !fragment\n        && !nextSibling\n        && $newAsReal.type === VirtualType.Text\n        && $parent.children.length === 1\n        && !parentEl.firstChild;\n\n      if (canSetTextContent) {\n        parentEl.textContent = $newAsReal.value;\n        $newAsReal.target = parentEl.firstChild!;\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        insertBefore(fragment || parentEl, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    }\n  } else if ($current && !$new) {\n    remount(parentEl, $current, currentContext, undefined);\n  } else if ($current && $new) {\n    if (hasElementChanged($current, $new)) {\n      if (!nextSibling) {\n        nextSibling = getNextSibling($current);\n      }\n\n      if (isNewComponent || isNewFragment) {\n        if (isNewComponent) {\n          $new = initComponent(\n            parentEl, $new as VirtualElementComponent, $parent, currentContext, index,\n          ) as unknown as typeof $new;\n          currentContext = ($new as VirtualElementComponent).componentInstance.context ?? currentContext;\n        }\n\n        remount(parentEl, $current, currentContext, undefined);\n        mountChildren(parentEl, $new as VirtualElementComponent | VirtualElementFragment, currentContext, {\n          nextSibling, fragment, namespace,\n        });\n      } else {\n        const node = createNode($newAsReal, currentContext, namespace);\n        $newAsReal.target = node;\n        remount(parentEl, $current, currentContext, node, nextSibling);\n\n        if ($newAsReal.type === VirtualType.Tag) {\n          setElementRef($newAsReal, node as DOMElement);\n        }\n      }\n    } else {\n      const isComponent = isCurrentComponent && isNewComponent;\n      const isFragment = isCurrentFragment && isNewFragment;\n\n      if (isComponent || isFragment) {\n        renderChildren(\n          $current,\n          $new as VirtualElementComponent | VirtualElementFragment,\n          currentContext,\n          parentEl,\n          nextSibling,\n          options.forceMoveToEnd,\n        );\n      } else {\n        const $currentAsReal = $current as VirtualElementReal;\n        const currentTarget = $currentAsReal.target!;\n\n        $newAsReal.target = currentTarget;\n        $currentAsReal.target = undefined; // Help GC\n\n        const isTag = $current.type === VirtualType.Tag;\n        if (isTag) {\n          const $newAsTag = $new as VirtualElementTag;\n\n          setElementRef($current, undefined);\n          setElementRef($newAsTag, currentTarget as DOMElement);\n\n          if (nextSibling || options.forceMoveToEnd) {\n            insertBefore(parentEl, currentTarget, nextSibling);\n          }\n\n          updateAttributes($current, $newAsTag, currentTarget as DOMElement, namespace);\n          renderChildren(\n            $current, $newAsTag, currentContext, currentTarget as DOMElement, undefined, undefined, namespace,\n          );\n        }\n      }\n    }\n  }\n\n  return $new;\n}\n\nfunction initComponent(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  $element.componentInstance.context = currentContext;\n\n  if (componentInstance.mountState === MountState.Unmounted) {\n    $element = mountComponent(componentInstance);\n    setupComponentUpdateListener(parentEl, $element, $parent, currentContext, index);\n  }\n\n  return $element;\n}\n\nfunction updateComponent($current: VirtualElementComponent, $new: VirtualElementComponent) {\n  $current.componentInstance.props = $new.componentInstance.props;\n\n  return renderComponent($current.componentInstance);\n}\n\nfunction setupComponentUpdateListener(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent,\n  $parent: VirtualElementParent | VirtualDomHead,\n  currentContext: CurrentContext,\n  index: number,\n) {\n  const { componentInstance } = $element;\n\n  componentInstance.onUpdate = () => {\n    $parent.children[index] = renderWithVirtual(\n      parentEl,\n      $parent.children[index],\n      componentInstance.$element,\n      $parent,\n      currentContext,\n      index,\n      { skipComponentUpdate: true },\n    );\n  };\n}\n\nfunction mountChildren(\n  parentEl: DOMElement,\n  $element: VirtualElementComponent | VirtualElementFragment,\n  currentContext: CurrentContext,\n  options: {\n    nextSibling?: ChildNode;\n    fragment?: DocumentFragment;\n    namespace?: string;\n  },\n) {\n  const { children } = $element;\n\n  // Add a placeholder comment node for empty fragments to maintain position\n  if ($element.type === VirtualType.Fragment && children.length === 0) {\n    const fragmentEl = $element;\n    fragmentEl.placeholderTarget = document.createComment('empty-fragment');\n    insertBefore(options.fragment || parentEl, fragmentEl.placeholderTarget, options.nextSibling);\n    return;\n  }\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $element, currentContext, i, options);\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n}\n\nfunction unmountChildren(\n  parentEl: DOMElement, $element: VirtualElementComponent | VirtualElementFragment, currentContext: CurrentContext,\n) {\n  for (const $child of $element.children) {\n    renderWithVirtual(parentEl, $child, undefined, $element, currentContext, -1);\n  }\n}\n\nfunction createNode($element: VirtualElementReal, currentContext: CurrentContext, namespace = HTML_NAMESPACE): Node {\n  if ($element.type === VirtualType.Empty) {\n    return document.createTextNode('');\n  }\n\n  if ($element.type === VirtualType.Text) {\n    return document.createTextNode($element.value);\n  }\n\n  const { tag, props, children } = $element;\n  const element = document.createElementNS(namespace, tag) as DOMElement;\n\n  processControlled(tag, props);\n\n  for (const key in props) {\n    if (!props.hasOwnProperty(key)) continue;\n\n    if (props[key] !== undefined) {\n      setAttribute(element, key, props[key], namespace);\n    }\n  }\n\n  processUncontrolledOnMount(element, props);\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    const $child = children[i];\n    const $renderedChild = renderWithVirtual(element, undefined, $child, $element, currentContext, i, { namespace });\n    if ($renderedChild !== $child) {\n      children[i] = $renderedChild;\n    }\n  }\n\n  return element;\n}\n\nfunction remount(\n  parentEl: DOMElement,\n  $current: VirtualElement,\n  currentContext: CurrentContext,\n  node: Node | undefined,\n  componentNextSibling?: ChildNode,\n) {\n  const isComponent = $current.type === VirtualType.Component;\n  const isFragment = !isComponent && $current.type === VirtualType.Fragment;\n\n  if (isComponent || isFragment) {\n    if (isComponent) {\n      unmountComponent($current.componentInstance);\n    }\n\n    unmountChildren(parentEl, $current, currentContext);\n\n    if (node) {\n      insertBefore(parentEl, node, componentNextSibling);\n    }\n  } else {\n    if (node) {\n      parentEl.replaceChild(node, $current.target!);\n    } else {\n      parentEl.removeChild($current.target!);\n    }\n\n    unmountRealTree($current);\n  }\n}\n\nfunction unmountRealTree($element: VirtualElement) {\n  if ($element.type === VirtualType.Component) {\n    unmountComponent($element.componentInstance);\n  } else if ($element.type === VirtualType.Fragment) {\n    // Remove placeholder for empty fragments\n    const fragment = $element;\n    if (fragment.placeholderTarget && fragment.children.length === 0) {\n      fragment.placeholderTarget.parentNode?.removeChild(fragment.placeholderTarget);\n      fragment.placeholderTarget = undefined;\n    }\n  } else {\n    if ($element.type === VirtualType.Tag) {\n      extraClasses.delete($element.target!);\n      setElementRef($element, undefined);\n      removeAllDelegatedListeners($element.target!);\n    }\n\n    $element.target = undefined; // Help GC\n\n    if ($element.type !== VirtualType.Tag) {\n      return;\n    }\n  }\n\n  for (const $child of $element.children) {\n    unmountRealTree($child);\n  }\n}\n\nfunction insertBefore(parentEl: DOMElement | DocumentFragment, node: Node, nextSibling?: ChildNode) {\n  if (nextSibling) {\n    parentEl.insertBefore(node, nextSibling);\n  } else {\n    parentEl.appendChild(node);\n  }\n}\n\nfunction getNextSibling($current: VirtualElement): ChildNode | undefined {\n  if ($current.type === VirtualType.Component || $current.type === VirtualType.Fragment) {\n    if ($current.children.length === 0) {\n      // For empty fragments, use the placeholder node to track position\n      const fragment = $current as VirtualElementFragment;\n      if (fragment.placeholderTarget) {\n        return fragment.placeholderTarget.nextSibling || undefined;\n      }\n      return undefined;\n    }\n\n    const lastChild = $current.children[$current.children.length - 1];\n    return getNextSibling(lastChild);\n  }\n\n  return $current.target!.nextSibling || undefined;\n}\n\nfunction renderChildren(\n  $current: VirtualElementParent,\n  $new: VirtualElementParent,\n  currentContext: CurrentContext,\n  currentEl: DOMElement,\n  nextSibling?: ChildNode,\n  forceMoveToEnd = false,\n  namespace?: string,\n) {\n  if (DEBUG) {\n    DEBUG_checkKeyUniqueness($new.children);\n  }\n\n  if (('props' in $new) && $new.props.teactFastList) {\n    renderFastListChildren($current, $new, currentContext, currentEl);\n    return;\n  }\n\n  // Handle transitions between empty and non-empty fragments\n  if ($current.type === VirtualType.Fragment && $new.type === VirtualType.Fragment) {\n    const currentFragment = $current;\n    const newFragment = $new;\n\n    // If transitioning from empty to non-empty, use the placeholder's position\n    if (currentFragment.children.length === 0 && newFragment.children.length > 0 && currentFragment.placeholderTarget) {\n      nextSibling = currentFragment.placeholderTarget.nextSibling || undefined;\n      // Remove the placeholder as we're adding real content\n      currentFragment.placeholderTarget.parentNode?.removeChild(currentFragment.placeholderTarget);\n      currentFragment.placeholderTarget = undefined;\n    }\n\n    // If transitioning from non-empty to empty, add a placeholder\n    if (currentFragment.children.length > 0 && newFragment.children.length === 0) {\n      const lastCurrentChild = currentFragment.children[currentFragment.children.length - 1];\n      const siblingAfterFragment = getNextSibling(lastCurrentChild);\n      newFragment.placeholderTarget = document.createComment('empty-fragment');\n      insertBefore(currentEl, newFragment.placeholderTarget, siblingAfterFragment);\n    }\n  }\n\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const currentChildrenLength = currentChildren.length;\n  const newChildrenLength = newChildren.length;\n  const maxLength = Math.max(currentChildrenLength, newChildrenLength);\n\n  const fragment = newChildrenLength > currentChildrenLength ? document.createDocumentFragment() : undefined;\n  const lastCurrentChild = $current.children[currentChildrenLength - 1];\n  const fragmentNextSibling = fragment && (\n    nextSibling || (lastCurrentChild ? getNextSibling(lastCurrentChild) : undefined)\n  );\n\n  for (let i = 0; i < maxLength; i++) {\n    const $renderedChild = renderWithVirtual(\n      currentEl,\n      currentChildren[i],\n      newChildren[i],\n      $new,\n      currentContext,\n      i,\n      i >= currentChildrenLength ? { fragment, namespace } : { nextSibling, forceMoveToEnd, namespace },\n    );\n\n    if ($renderedChild && $renderedChild !== newChildren[i]) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  if (fragment) {\n    insertBefore(currentEl, fragment, fragmentNextSibling);\n  }\n}\n\n// This function allows to prepend/append a bunch of new DOM nodes to the top/bottom of preserved ones.\n// It also allows to selectively move particular preserved nodes within their DOM list.\nfunction renderFastListChildren(\n  $current: VirtualElementParent, $new: VirtualElementParent, currentContext: CurrentContext, currentEl: DOMElement,\n) {\n  const currentChildren = $current.children;\n  const newChildren = $new.children;\n\n  const newKeys = new Set();\n  for (const $newChild of newChildren) {\n    const key = 'props' in $newChild ? $newChild.props.key : undefined;\n\n    if (DEBUG && isParentElement($newChild)) {\n      // eslint-disable-next-line no-null/no-null\n      if (key === undefined || key === null) {\n        // eslint-disable-next-line no-console\n        console.warn('Missing `key` in `teactFastList`');\n      }\n\n      if ($newChild.type === VirtualType.Fragment) {\n        throw new Error('[Teact] Fragment can not be child of container with `teactFastList`');\n      }\n    }\n\n    newKeys.add(key);\n  }\n\n  // Build a collection of old children that also remain in the new list\n  let currentRemainingIndex = 0;\n  const remainingByKey: Record<string, { $element: VirtualElement; index: number; orderKey?: number }> = {};\n  for (let i = 0, l = currentChildren.length; i < l; i++) {\n    const $currentChild = currentChildren[i];\n\n    let key = 'props' in $currentChild ? $currentChild.props.key : undefined;\n    // eslint-disable-next-line no-null/no-null\n    const isKeyPresent = key !== undefined && key !== null;\n\n    // First we process removed children\n    if (isKeyPresent && !newKeys.has(key)) {\n      renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n      continue;\n    } else if (!isKeyPresent) {\n      const $newChild = newChildren[i];\n      const newChildKey = ($newChild && 'props' in $newChild) ? $newChild.props.key : undefined;\n      // If a non-key element remains at the same index we preserve it with a virtual `key`\n      if ($newChild && !newChildKey) {\n        key = `${INDEX_KEY_PREFIX}${i}`;\n        // Otherwise, we just remove it\n      } else {\n        renderWithVirtual(currentEl, $currentChild, undefined, $new, currentContext, -1);\n\n        continue;\n      }\n    }\n\n    // Then we build up info about remaining children\n    remainingByKey[key] = {\n      $element: $currentChild,\n      index: currentRemainingIndex++,\n      orderKey: 'props' in $currentChild ? $currentChild.props.teactOrderKey : undefined,\n    };\n  }\n\n  let fragmentIndex: number | undefined;\n  let fragmentSize: number | undefined;\n\n  let currentPreservedIndex = 0;\n\n  for (let i = 0, l = newChildren.length; i < l; i++) {\n    const $newChild = newChildren[i];\n    const key = 'props' in $newChild ? $newChild.props.key : `${INDEX_KEY_PREFIX}${i}`;\n    const currentChildInfo = remainingByKey[key];\n\n    if (!currentChildInfo) {\n      if (fragmentSize === undefined) {\n        fragmentIndex = i;\n        fragmentSize = 0;\n      }\n\n      fragmentSize++;\n      continue;\n    }\n\n    // This prepends new children to the top\n    if (fragmentSize) {\n      renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n      fragmentSize = undefined;\n      fragmentIndex = undefined;\n    }\n\n    // Now we check if a preserved node was moved within preserved list\n    const newOrderKey = 'props' in $newChild ? $newChild.props.teactOrderKey : undefined;\n    // That is indicated by a changed `teactOrderKey` value\n    const shouldMoveNode = (\n      currentChildInfo.index !== currentPreservedIndex && (!newOrderKey || currentChildInfo.orderKey !== newOrderKey)\n    );\n    const isMovingDown = shouldMoveNode && currentPreservedIndex > currentChildInfo.index;\n\n    if (!shouldMoveNode || isMovingDown) {\n      currentPreservedIndex++;\n    }\n\n    const nextSibling = currentEl.childNodes[isMovingDown ? i + 1 : i];\n    const options = shouldMoveNode ? (nextSibling ? { nextSibling } : { forceMoveToEnd: true }) : undefined;\n\n    const $renderedChild = renderWithVirtual(\n      currentEl, currentChildInfo.$element, $newChild, $new, currentContext, i, options,\n    );\n    if ($renderedChild !== $newChild) {\n      newChildren[i] = $renderedChild;\n    }\n  }\n\n  // This appends new children to the bottom\n  if (fragmentSize) {\n    renderFragment(fragmentIndex!, fragmentSize, currentEl, $new, currentContext);\n  }\n}\n\nfunction renderFragment(\n  fragmentIndex: number,\n  fragmentSize: number,\n  parentEl: DOMElement,\n  $parent: VirtualElementParent,\n  currentContext: CurrentContext,\n) {\n  const nextSibling = parentEl.childNodes[fragmentIndex];\n\n  if (fragmentSize === 1) {\n    const $child = $parent.children[fragmentIndex];\n    const $renderedChild = renderWithVirtual(\n      parentEl, undefined, $child, $parent, currentContext, fragmentIndex, { nextSibling },\n    );\n    if ($renderedChild !== $child) {\n      $parent.children[fragmentIndex] = $renderedChild;\n    }\n\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  for (let i = fragmentIndex; i < fragmentIndex + fragmentSize; i++) {\n    const $child = $parent.children[i];\n    const $renderedChild = renderWithVirtual(parentEl, undefined, $child, $parent, currentContext, i, { fragment });\n    if ($renderedChild !== $child) {\n      $parent.children[i] = $renderedChild;\n    }\n  }\n\n  insertBefore(parentEl, fragment, nextSibling);\n}\n\nfunction setElementRef($element: VirtualElementTag, element: DOMElement | undefined) {\n  const { ref } = $element.props;\n\n  if (typeof ref === 'object') {\n    ref.current = element;\n    ref.onChange?.();\n  } else if (typeof ref === 'function') {\n    ref(element);\n  }\n}\n\nfunction processControlled(tag: string, props: AnyLiteral) {\n  const isValueControlled = props.value !== undefined;\n  const isCheckedControlled = props.checked !== undefined;\n  const isControlled = (isValueControlled || isCheckedControlled) && CONTROLLABLE_TAGS.includes(tag.toUpperCase());\n  if (!isControlled) {\n    return;\n  }\n\n  const {\n    value, checked, onInput, onChange, onBlur,\n  } = props;\n\n  props.onChange = undefined;\n  props.onInput = (e: ChangeEvent<HTMLInputElement>) => {\n    onInput?.(e);\n    onChange?.(e);\n\n    if (value !== undefined && value !== e.currentTarget.value) {\n      const { selectionStart, selectionEnd } = e.currentTarget;\n      const isCaretAtEnd = selectionStart === selectionEnd && selectionEnd === e.currentTarget.value.length;\n\n      e.currentTarget.value = value;\n\n      if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n        e.currentTarget.setSelectionRange(selectionStart, selectionEnd);\n\n        const selectionState: SelectionState = { selectionStart, selectionEnd, isCaretAtEnd };\n\n        e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE] = JSON.stringify(selectionState);\n      }\n    }\n\n    if (checked !== undefined) {\n      e.currentTarget.checked = checked;\n    }\n  };\n  props.onBlur = (e: FocusEvent<HTMLInputElement>) => {\n    delete e.currentTarget.dataset[SELECTION_STATE_ATTRIBUTE];\n\n    onBlur?.(e);\n  };\n}\n\nfunction processUncontrolledOnMount(element: DOMElement, props: AnyLiteral) {\n  if (!CONTROLLABLE_TAGS.includes(element.tagName)) {\n    return;\n  }\n\n  if (props.defaultValue) {\n    setAttribute(element, 'value', props.defaultValue);\n  }\n\n  if (props.defaultChecked) {\n    setAttribute(element, 'checked', props.defaultChecked);\n  }\n}\n\nfunction updateAttributes(\n  $current: VirtualElementTag, $new: VirtualElementTag, element: DOMElement, namespace?: string,\n) {\n  processControlled(element.tagName, $new.props);\n\n  const currentEntries = Object.entries($current.props);\n  const newEntries = Object.entries($new.props);\n\n  for (const [key, currentValue] of currentEntries) {\n    const newValue = $new.props[key];\n\n    if (\n      currentValue !== undefined\n      && (\n        newValue === undefined\n        || (currentValue !== newValue && key.startsWith('on'))\n      )\n    ) {\n      removeAttribute(element, key, currentValue);\n    }\n  }\n\n  for (const [key, newValue] of newEntries) {\n    const currentValue = $current.props[key];\n\n    if (newValue !== undefined && newValue !== currentValue) {\n      setAttribute(element, key, newValue, namespace);\n    }\n  }\n}\n\nfunction setAttribute(element: DOMElement, key: string, value: any, namespace?: string) {\n  if (key === 'className') {\n    updateClassName(element, value, namespace);\n  } else if (key === 'value') {\n    const inputEl = element as HTMLInputElement;\n\n    if (inputEl.value !== value) {\n      inputEl.value = value;\n\n      const selectionStateJson = inputEl.dataset[SELECTION_STATE_ATTRIBUTE];\n      if (selectionStateJson) {\n        const { selectionStart, selectionEnd, isCaretAtEnd } = JSON.parse(selectionStateJson) as SelectionState;\n\n        if (isCaretAtEnd) {\n          const length = inputEl.value.length;\n          inputEl.setSelectionRange(length, length);\n        } else if (typeof selectionStart === 'number' && typeof selectionEnd === 'number') {\n          inputEl.setSelectionRange(selectionStart, selectionEnd);\n        }\n      }\n    }\n  } else if (key === 'style') {\n    updateStyle(element, value);\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = value.__html;\n  } else if (key.startsWith('on')) {\n    addEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (\n    namespace === SVG_NAMESPACE || key.startsWith('data-') || key.startsWith('aria-') || HTML_ATTRIBUTES.has(key)\n  ) {\n    element.setAttribute(key, value);\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    (element as any)[MAPPED_ATTRIBUTES[key] || key] = value;\n  }\n}\n\nfunction removeAttribute(element: DOMElement, key: string, value: any) {\n  if (key === 'className') {\n    updateClassName(element, '');\n  } else if (key === 'value') {\n    (element as HTMLInputElement).value = '';\n  } else if (key === 'style') {\n    updateStyle(element, '');\n  } else if (key === 'dangerouslySetInnerHTML') {\n    element.innerHTML = '';\n  } else if (key.startsWith('on')) {\n    removeEventListener(element, key, value, key.endsWith('Capture'));\n  } else if (!FILTERED_ATTRIBUTES.has(key)) {\n    element.removeAttribute(key);\n  }\n}\n\nfunction updateClassName(element: DOMElement, value: string, namespace?: string) {\n  if (namespace === SVG_NAMESPACE) {\n    element.setAttribute('class', value);\n    return;\n  }\n\n  const htmlElement = element as HTMLElement;\n  const extra = extraClasses.get(element);\n  if (!extra) {\n    htmlElement.className = value;\n    return;\n  }\n\n  const extraArray = Array.from(extra);\n  if (value) {\n    extraArray.push(value);\n  }\n\n  htmlElement.className = extraArray.join(' ');\n}\n\nfunction updateStyle(element: DOMElement, value: string) {\n  element.style.cssText = value;\n\n  const extraObject = extraStyles.get(element);\n  if (extraObject) {\n    applyExtraStyles(element);\n  }\n}\n\nexport function addExtraClass(element: DOMElement, className: string) {\n  element.classList.add(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.add(className);\n  } else {\n    extraClasses.set(element, new Set([className]));\n  }\n}\n\nexport function removeExtraClass(element: DOMElement, className: string) {\n  element.classList.remove(className);\n\n  const classList = extraClasses.get(element);\n  if (classList) {\n    classList.delete(className);\n\n    if (!classList.size) {\n      extraClasses.delete(element);\n    }\n  }\n}\n\nexport function toggleExtraClass(element: DOMElement, className: string, force?: boolean) {\n  if (force === true) {\n    addExtraClass(element, className);\n  } else if (force === false) {\n    removeExtraClass(element, className);\n  } else if (extraClasses.get(element)?.has(className)) {\n    removeExtraClass(element, className);\n  } else {\n    addExtraClass(element, className);\n  }\n}\n\nexport function setExtraStyles(element: DOMElement, styles: Partial<CSSStyleDeclaration> & AnyLiteral) {\n  extraStyles.set(element, styles);\n  applyExtraStyles(element);\n}\n\nfunction applyExtraStyles(element: DOMElement) {\n  const standardStyles = Object.entries(extraStyles.get(element)!).reduce<Record<string, string>>(\n    (acc, [prop, value]) => {\n      if (prop.startsWith('--')) {\n        element.style.setProperty(prop, value);\n      } else {\n        acc[prop] = value;\n      }\n\n      return acc;\n    },\n    {},\n  );\n\n  Object.assign(element.style, standardStyles);\n}\n\nfunction DEBUG_addToVirtualTreeSize($current: VirtualElementParent | VirtualDomHead) {\n  DEBUG_virtualTreeSize += $current.children.length;\n\n  $current.children.forEach(($child) => {\n    if (isParentElement($child)) {\n      DEBUG_addToVirtualTreeSize($child);\n    }\n  });\n}\n\nfunction DEBUG_checkKeyUniqueness(children: VirtualElementChildren) {\n  const firstChild = children[0];\n  if (firstChild && 'props' in firstChild && firstChild.props.key !== undefined) {\n    const keys = children.reduce((acc: any[], child) => {\n      if ('props' in child && child.props.key) {\n        acc.push(child.props.key);\n      }\n\n      return acc;\n    }, []);\n\n    if (keys.length !== unique(keys).length) {\n      // eslint-disable-next-line no-console\n      console.warn('[Teact] Duplicated keys:', keys.filter((e, i, a) => a.indexOf(e) !== i), children);\n      throw new Error('[Teact] Children keys are not unique');\n    }\n  }\n}\n\nconst TeactDOM = { render };\nexport default TeactDOM;\n","import { useRef } from '../lib/teact/teact';\n\nimport { createSignal } from '../util/signals';\n\nexport default function useSignal<T>(initial?: T) {\n  const signalRef = useRef<ReturnType<typeof createSignal<T>>>();\n  signalRef.current ??= createSignal<T>(initial);\n  return signalRef.current;\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { cleanupEffect, isSignal } from '../util/signals';\nimport useEffectOnce from './useEffectOnce';\n\nexport function useSignalEffect(effect: NoneToVoidFunction, dependencies: readonly any[]) {\n  // The is extracted from `useEffectOnce` to run before all effects\n  const isFirstRun = useRef(true);\n  if (isFirstRun.current) {\n    isFirstRun.current = false;\n\n    dependencies?.forEach((dependency) => {\n      if (isSignal(dependency)) {\n        dependency.subscribe(effect);\n      }\n    });\n  }\n\n  useEffectOnce(() => {\n    return () => {\n      cleanupEffect(effect);\n    };\n  });\n}\n","import type { Signal } from '../util/signals';\n\nimport useSignal from './useSignal';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedSignal<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): Signal<T>;\nfunction useDerivedSignal<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): Signal<T>;\nfunction useDerivedSignal<T>(dependency: T): Signal<T>;\n\nfunction useDerivedSignal<T>(resolverOrDependency: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrDependency as Resolver<T> : () => (resolverOrDependency as T);\n  dependencies ??= [resolverOrDependency];\n\n  const [getValue, setValue] = useSignal<T>();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver() {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)(setValue);\n    } else {\n      setValue((currentResolver as SyncResolver<T>)());\n    }\n  }\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useSyncEffect(runCurrentResolver, dependencies);\n\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return getValue as Signal<T>;\n}\n\nexport default useDerivedSignal;\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useForceUpdate from './useForceUpdate';\nimport { useSignalEffect } from './useSignalEffect';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\n\ntype SyncResolver<T> = () => T;\ntype AsyncResolver<T> = (setter: (newValue: T) => void) => void;\ntype Resolver<T> =\n  SyncResolver<T>\n  | AsyncResolver<T>;\n\nfunction useDerivedState<T>(resolver: SyncResolver<T>, dependencies: readonly any[]): T;\nfunction useDerivedState<T>(resolver: AsyncResolver<T>, dependencies: readonly any[], isAsync: true): T;\nfunction useDerivedState<T>(signal: Signal<T>): T;\n\nfunction useDerivedState<T>(resolverOrSignal: Resolver<T> | T, dependencies?: readonly any[], isAsync = false) {\n  const resolver = dependencies ? resolverOrSignal as Resolver<T> : () => ((resolverOrSignal as Signal<T>)());\n  dependencies ??= [resolverOrSignal];\n\n  const valueRef = useRef<T>();\n  const forceUpdate = useForceUpdate();\n  const resolverRef = useStateRef(resolver);\n\n  function runCurrentResolver(isSync = false) {\n    const currentResolver = resolverRef.current;\n    if (isAsync) {\n      (currentResolver as AsyncResolver<T>)((newValue) => {\n        if (valueRef.current !== newValue) {\n          valueRef.current = newValue;\n          forceUpdate();\n        }\n      });\n    } else {\n      const newValue = (currentResolver as SyncResolver<T>)();\n      if (valueRef.current !== newValue) {\n        valueRef.current = newValue;\n\n        if (!isSync) {\n          forceUpdate();\n        }\n      }\n    }\n  }\n\n  useSyncEffect(() => {\n    runCurrentResolver(true);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n\n  useSignalEffect(runCurrentResolver, dependencies);\n\n  return valueRef.current as T;\n}\n\nexport default useDerivedState;\n","import { useRef } from '../lib/teact/teact';\n\nimport useSyncEffect from './useSyncEffect';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useSyncEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useLayoutEffect, useRef, useSignal } from '../lib/teact/teact';\nimport { addExtraClass, toggleExtraClass } from '../lib/teact/teact-dom';\n\nimport type { Signal } from '../util/signals';\n\nimport { requestMeasure } from '../lib/fasterdom/fasterdom';\nimport useDerivedSignal from './useDerivedSignal';\nimport useDerivedState from './useDerivedState';\nimport useLastCallback from './useLastCallback';\nimport { useStateRef } from './useStateRef';\nimport useSyncEffect from './useSyncEffect';\nimport useSyncEffectWithPrevDeps from './useSyncEffectWithPrevDeps';\n\nconst CLOSE_DURATION = 350;\n\ntype BaseHookParams<RefType extends HTMLElement> = {\n  isOpen: boolean | undefined;\n  ref?: ElementRef<RefType>;\n  noMountTransition?: boolean;\n  noOpenTransition?: boolean;\n  noCloseTransition?: boolean;\n  closeDuration?: number;\n  className?: string | false;\n  prefix?: string;\n  shouldForceOpen?: boolean;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n};\n\nexport type HookParams<RefType extends HTMLElement> = BaseHookParams<RefType> & {\n  withShouldRender?: never;\n};\n\ntype HookParamsWithShouldRender<RefType extends HTMLElement> = BaseHookParams<RefType> & {\n  withShouldRender: true;\n};\n\ntype HookResult<RefType extends HTMLElement> = {\n  ref: ElementRef<RefType>;\n  getIsClosing: Signal<boolean>;\n};\n\ntype HookResultWithShouldRender<RefType extends HTMLElement> = HookResult<RefType> & {\n  shouldRender: boolean;\n};\n\ntype State =\n  'closed'\n  | 'scheduled-open'\n  | 'open'\n  | 'closing';\n\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParams<RefType>\n): HookResult<RefType>;\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParamsWithShouldRender<RefType>\n): HookResultWithShouldRender<RefType>;\nexport default function useShowTransition<RefType extends HTMLElement = HTMLDivElement>(\n  params: HookParams<RefType> | HookParamsWithShouldRender<RefType>,\n): HookResult<RefType> | HookResultWithShouldRender<RefType> {\n  const {\n    isOpen,\n    noMountTransition = false,\n    noOpenTransition = false,\n    noCloseTransition = false,\n    closeDuration = CLOSE_DURATION,\n    className = 'fast',\n    prefix = '',\n    shouldForceOpen,\n    onCloseAnimationEnd,\n  } = params;\n\n  const localRef = useRef<RefType>();\n  const ref = params.ref || localRef;\n  const closingTimeoutRef = useRef<number>();\n  const [getState, setState] = useSignal<State | undefined>();\n  const optionsRef = useStateRef({\n    closeDuration, noMountTransition, noOpenTransition, noCloseTransition,\n  });\n  const onCloseEndLast = useLastCallback(onCloseAnimationEnd);\n\n  useSyncEffectWithPrevDeps(([prevIsOpen]) => {\n    const options = optionsRef.current;\n\n    if (shouldForceOpen) {\n      setState('open');\n      return;\n    }\n\n    if (isOpen) {\n      if (closingTimeoutRef.current) {\n        clearTimeout(closingTimeoutRef.current);\n        closingTimeoutRef.current = undefined;\n      }\n\n      if (options.noOpenTransition || (prevIsOpen === undefined && options.noMountTransition)) {\n        setState('open');\n      } else {\n        setState('scheduled-open');\n        requestMeasure(() => {\n          setState('open');\n        });\n      }\n    } else if (prevIsOpen === undefined || options.noCloseTransition) {\n      setState('closed');\n    } else {\n      setState('closing');\n\n      closingTimeoutRef.current = window.setTimeout(() => {\n        setState('closed');\n        onCloseEndLast();\n      }, options.closeDuration);\n    }\n  }, [isOpen, shouldForceOpen]);\n\n  const applyClassNames = useLastCallback(() => {\n    const element = ref.current;\n    if (!element) return;\n\n    if (className !== false) {\n      addExtraClass(element, 'opacity-transition');\n      addExtraClass(element, className);\n    }\n\n    const state = getState();\n    const shouldRender = state !== 'closed';\n    const hasOpenClass = state === 'open';\n    const isClosing = state === 'closing';\n\n    toggleExtraClass(element, `${prefix}shown`, shouldRender);\n    toggleExtraClass(element, `${prefix}not-shown`, !shouldRender);\n    toggleExtraClass(element, `${prefix}open`, hasOpenClass);\n    toggleExtraClass(element, `${prefix}not-open`, !hasOpenClass);\n    toggleExtraClass(element, `${prefix}closing`, isClosing);\n  });\n\n  // Workaround for Chrome causing forced reflow in the middle of mutation phase when unmounting a focused element.\n  // Due to such forced reflow setting initial class names in the first layout effect causes transitions to start.\n  useSyncEffect(() => {\n    ref.onChange = () => {\n      ref.onChange = undefined;\n      applyClassNames();\n    };\n  }, [applyClassNames, ref]);\n\n  useLayoutEffect(applyClassNames, [applyClassNames, getState]);\n\n  const withShouldRender = 'withShouldRender' in params && params.withShouldRender;\n  const shouldRender = useDerivedState(\n    () => (withShouldRender && getState() !== 'closed'),\n    [withShouldRender, getState],\n  );\n\n  const getIsClosing = useDerivedSignal(() => getState() === 'closing', [getState]);\n\n  if (withShouldRender) {\n    return { ref, shouldRender, getIsClosing };\n  }\n\n  return { ref, getIsClosing };\n}\n","import { useLayoutEffect } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\ninterface Options {\n  className: string;\n  isActive?: boolean;\n  element?: HTMLElement | Document;\n}\n\nexport default function useToggleClass({\n  className,\n  isActive,\n  element = document.documentElement,\n}: Options): void {\n  useLayoutEffect(() => {\n    if (!isActive) return;\n\n    addExtraClass(element as HTMLElement, className);\n\n    return () => {\n      removeExtraClass(element as HTMLElement, className);\n    };\n  }, [className, isActive, element]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"esdydUs1\",\"dot\":\"TUSiLENF\",\"dots\":\"Zft9rPYc\",\"doubled\":\"UJzP4d9r\",\"dots-doubled\":\"vpZtb2OQ\",\"dotsDoubled\":\"vpZtb2OQ\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './LoadingDots.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  className?: string;\n  isDoubled?: boolean;\n}\n\nfunction LoadingDots({ isActive, className, isDoubled }: OwnProps) {\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: isActive,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    // eslint-disable-next-line no-null/no-null\n    return null;\n  }\n\n  return (\n    <div ref={ref} className={buildClassName(styles.root, isDoubled && styles.doubled, className)}>\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n      <span className={styles.dot} />\n    </div>\n  );\n}\n\nexport default memo(LoadingDots);\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"GpDwnAkE\",\"loadingInit\":\"tZ9ppkji\",\"clicked\":\"A1qGzs0x\",\"isSimple\":\"Cw_ElX3O\",\"isText\":\"d3A7BZDx\",\"primary\":\"Pb9B3sBE\",\"secondary\":\"k1jQrbAk\",\"transparent\":\"nxcFq7cM\",\"disabled\":\"zSwp1moR\",\"destructive\":\"tLZabe0e\",\"sizeSmall\":\"ORqfj0CU\",\"round\":\"PJ7EB5_T\",\"loadingStart\":\"pv1HwapI\",\"loadingDots\":\"_2QYUoJe\"};","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport LoadingDots from './LoadingDots';\n\nimport styles from './Button.module.scss';\n\nexport type OwnProps = {\n  ref?: ElementRef<HTMLButtonElement>;\n  children: TeactNode;\n  id?: string;\n  className?: string;\n  style?: string;\n  ariaLabel?: string;\n  forFormId?: string;\n  kind?: 'transparent';\n  isSubmit?: boolean;\n  isPrimary?: boolean;\n  isSecondary?: boolean;\n  isSmall?: boolean;\n  isSimple?: boolean;\n  isText?: boolean;\n  isLoading?: boolean;\n  isDisabled?: boolean;\n  isRound?: boolean;\n  isDestructive?: boolean;\n  shouldStopPropagation?: boolean;\n  onClick?: NoneToVoidFunction;\n  onMouseDown?: (e: React.MouseEvent) => void;\n  onContextMenu?: (e: React.MouseEvent) => void;\n};\n\n// Longest animation duration\nconst CLICKED_TIMEOUT = 400;\n\nfunction Button({\n  ref,\n  children,\n  id,\n  className,\n  style,\n  ariaLabel,\n  forFormId,\n  kind,\n  isSubmit,\n  isPrimary,\n  isSecondary,\n  isSmall,\n  isSimple,\n  isText,\n  isLoading,\n  isDisabled,\n  isRound,\n  isDestructive,\n  shouldStopPropagation,\n  onClick,\n  onMouseDown,\n  onContextMenu,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = useLastCallback((event: React.MouseEvent) => {\n    if (!isDisabled && onClick) {\n      if (shouldStopPropagation) {\n        event.stopPropagation();\n      }\n      onClick();\n    }\n\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT);\n  });\n\n  const loadingClassName = buildClassName(\n    isLoading !== undefined && styles.loadingInit,\n    isLoading && styles.loadingStart,\n  );\n\n  return (\n    <button\n      id={id}\n      ref={ref}\n      type={isSubmit || forFormId ? 'submit' : 'button'}\n      className={buildClassName(\n        styles.button,\n        isPrimary && styles.primary,\n        isSecondary && styles.secondary,\n        isSmall && styles.sizeSmall,\n        isSimple && styles.isSimple,\n        isText && styles.isText,\n        (isDisabled || isLoading) && styles.disabled,\n        loadingClassName,\n        isRound && styles.round,\n        isDestructive && styles.destructive,\n        isClicked && styles.clicked,\n        className,\n        kind && styles[kind],\n      )}\n      style={style}\n      aria-label={ariaLabel}\n      disabled={isDisabled || isLoading}\n      form={forFormId}\n      onClick={handleClick}\n      onMouseDown={onMouseDown}\n      onContextMenu={onContextMenu}\n    >\n      {children}\n      <LoadingDots isActive={isLoading} className={styles.loadingDots} />\n    </button>\n  );\n}\n\nexport default memo(Button);\n","import type { VirtualElement } from '../../lib/teact/teact';\nimport { useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  style?: string;\n  children: VirtualElement;\n};\n\nfunction Portal({\n  containerId, className, style, children,\n}: OwnProps): TeactJsx {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n\n    if (className) {\n      element.className = className;\n    }\n\n    if (style) {\n      element.style.cssText = style;\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, style, containerId]);\n\n  return TeactDOM.render(children, elementRef.current);\n}\n\nexport default Portal;\n","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"bei20BXo\",\"inAppLock\":\"rhy5UM19\",\"error\":\"ycQPrkNy\",\"dialog\":\"lCrWZOJa\",\"backdrop\":\"BRHUYooL\",\"slideUpAnimation\":\"ciD50Ivv\",\"container\":\"pI0zvyZ_\",\"forceBottomSheet\":\"zXbZnJvJ\",\"content\":\"ikANOLRm\",\"noBackdrop\":\"JdyYzya2\",\"compact\":\"OIC6BQI4\",\"header\":\"LB42p81C\",\"header_wideContent\":\"_ijqgHQC\",\"headerWideContent\":\"_ijqgHQC\",\"header_back\":\"F2CCACcS\",\"headerBack\":\"F2CCACcS\",\"header_backIcon\":\"IubryJoO\",\"headerBackIcon\":\"IubryJoO\",\"menuButton\":\"nz22xGPo\",\"menuIcon\":\"NiajLgHY\",\"closeButton\":\"Oj6lWSUo\",\"closeIcon\":\"VPuUZtvp\",\"title\":\"ZDSNp0nr\",\"singleTitle\":\"Sv8Bhg5M\",\"contentCompact\":\"ulAHEr0t\",\"text\":\"FumpDc7T\",\"text_centered\":\"PRVdJNuh\",\"textCentered\":\"PRVdJNuh\",\"text_noExtraMargin\":\"JNEqsMcb\",\"textNoExtraMargin\":\"JNEqsMcb\",\"buttons\":\"PWLeFX8Z\",\"footerButtons\":\"fXtMQ4nZ\",\"footerButtonFullWidth\":\"KMr7BHAz\",\"buttonsInsideContentWithScroll\":\"SCBITBKB\",\"buttonsNoExtraSpace\":\"vyEjC2QK\",\"button\":\"pvjzjt3q\",\"buttonHalfWidth\":\"EhlEYVbZ\",\"buttonFullWidth\":\"zRgM4gqF\",\"shortButton\":\"QFWfMoly\",\"transition\":\"ELmioinr\",\"transitionSlide\":\"OXFBF6TX\",\"transitionContentWrapper\":\"N1r_Lya9\",\"transitionContent\":\"W4ZdBtyi\",\"transitionContent_simple\":\"qGdeWGzL\",\"transitionContentSimple\":\"qGdeWGzL\"};","import type { BottomSheetKeys } from '@mytonwallet/native-bottom-sheet';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { ElementRef, RefObject, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  beginHeavyAnimation,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ANIMATION_END_DELAY, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { getIsSwipeToCloseDisabled } from '../../util/modalSwipeManager';\nimport { createSignal } from '../../util/signals';\nimport {\n  disableTelegramMiniAppSwipeToClose,\n  enableTelegramMiniAppSwipeToClose,\n} from '../../util/telegram';\nimport trapFocus from '../../util/trapFocus';\nimport { IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_TOUCH_ENV } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport freezeWhenClosed from '../../hooks/freezeWhenClosed';\nimport { getIsForcedFullSize, useDelegatedBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDelegatingBottomSheet } from '../../hooks/useDelegatingBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHideBrowser from '../../hooks/useHideBrowser';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport Button from './Button';\nimport { getInAppBrowser } from './InAppBrowser';\nimport Portal from './Portal';\n\nimport styles from './Modal.module.scss';\n\ntype OwnProps = {\n  title?: string | TeactNode;\n  className?: string;\n  dialogClassName?: string;\n  titleClassName?: string;\n  contentClassName?: string;\n  isOpen?: boolean;\n  isCompact?: boolean;\n  nativeBottomSheetKey?: BottomSheetKeys;\n  forceFullNative?: boolean; // Always open in \"full\" size\n  noResetFullNativeOnBlur?: boolean; // Don't reset \"full\" size on blur\n  isInAppLock?: boolean;\n  forceBottomSheet?: boolean;\n  noBackdrop?: boolean;\n  noBackdropClose?: boolean;\n  header?: any;\n  hasCloseButton?: boolean;\n  children: TeactNode;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onEnter?: NoneToVoidFunction;\n  dialogRef?: ElementRef<HTMLDivElement>;\n};\n\ntype StateProps = {\n  isTemporarilyClosed: boolean;\n};\n\nexport const CLOSE_DURATION = 350;\nexport const CLOSE_DURATION_PORTRAIT = IS_ANDROID ? 200 : 500;\nconst SCROLL_CONTENT_CHECK_THRESHOLD_MS = 500;\n\nconst [getModalCloseSignal, setModalCloseSignal] = createSignal<number>(Date.now());\n\nexport function closeModal() {\n  setModalCloseSignal(Date.now());\n}\n\n// Track open modals with nativeBottomSheetKey\nconst openNativeBottomSheetModals = new Set<BottomSheetKeys>();\n\nexport function getIsAnyNativeBottomSheetModalOpen(): boolean {\n  return openNativeBottomSheetModals.size > 0;\n}\n\nfunction Modal({\n  dialogRef,\n  title,\n  className,\n  dialogClassName,\n  titleClassName,\n  contentClassName,\n  isOpen: doesWantToBeOpened,\n  isTemporarilyClosed,\n  isCompact,\n  nativeBottomSheetKey,\n  forceFullNative,\n  forceBottomSheet,\n  isInAppLock,\n  noResetFullNativeOnBlur,\n  noBackdrop,\n  noBackdropClose,\n  header,\n  hasCloseButton,\n  children,\n  onClose: onCloseProp,\n  onCloseAnimationEnd,\n  onEnter,\n}: OwnProps & StateProps): TeactJsx {\n  const isOpen = doesWantToBeOpened && !isTemporarilyClosed;\n  const onClose = useLastCallback(() => {\n    if (isTemporarilyClosed && doesWantToBeOpened) {\n      return undefined;\n    }\n\n    return onCloseProp();\n  });\n\n  const lang = useLang();\n\n  const modalRef = useRef<HTMLDivElement>();\n  const localDialogRef = useRef<HTMLDivElement>();\n  const swipeDownDateRef = useRef<number>();\n  dialogRef ||= localDialogRef;\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHideBrowser(isOpen, isCompact);\n\n  const animationDuration = (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n\n  const isSlideUp = !isCompact && isPortrait;\n\n  useHistoryBack({ isActive: isOpen, onBack: onClose, shouldIgnoreForTelegram: isCompact });\n\n  useEffect(() => {\n    if (!IS_TELEGRAM_APP || !isOpen || isCompact) return undefined;\n\n    disableTelegramMiniAppSwipeToClose();\n\n    return enableTelegramMiniAppSwipeToClose;\n  }, [isCompact, isOpen]);\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    // Expand NBS to full size for a compact modal inside NBS\n    if (IS_DELEGATED_BOTTOM_SHEET && isCompact && (prevIsOpen || isOpen) && !getIsForcedFullSize()) {\n      void BottomSheet.toggleSelfFullSize({ isFullSize: !!isOpen });\n    }\n  }, [isOpen, isCompact]);\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET || !isOpen) return undefined;\n\n    return getModalCloseSignal.subscribe(onClose);\n  }, [isOpen, onClose]);\n\n  useEffect(\n    () => (isOpen ? captureKeyboardListeners({\n      onEsc: { handler: onClose, shouldPreventDefault: IS_EXTENSION },\n      ...(onEnter && { onEnter }),\n    }) : undefined),\n    [isOpen, onClose, onEnter],\n  );\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n  useToggleClass({ className: 'is-modal-open', isActive: !isCompact && isOpen });\n\n  useLayoutEffect(() => (\n    isOpen ? beginHeavyAnimation(animationDuration) : undefined\n  ), [animationDuration, isOpen]);\n\n  // Track modal state for modals with nativeBottomSheetKey\n  useEffect(() => {\n    if (!nativeBottomSheetKey) return;\n\n    if (isOpen) {\n      openNativeBottomSheetModals.add(nativeBottomSheetKey);\n    } else {\n      openNativeBottomSheetModals.delete(nativeBottomSheetKey);\n    }\n\n    return () => {\n      openNativeBottomSheetModals.delete(nativeBottomSheetKey);\n    };\n  }, [isOpen, nativeBottomSheetKey]);\n\n  // Make sure to hide browser before presenting modals\n  const [isBrowserHidden, setIsBrowserHidden] = useState(false);\n  useEffect(() => {\n    const browser = getInAppBrowser();\n    if (!isOpen) {\n      setIsBrowserHidden(false); // Reset to re-hide it next time\n      // Before showing browser, make sure that closed modals are updated state properly\n      requestAnimationFrame(() => {\n        browser?.show();\n      });\n      return;\n    }\n\n    void browser?.hide().then(() => {\n      setIsBrowserHidden(true);\n    });\n  }, [isOpen]);\n\n  const isDelegatingToNative = useDelegatingBottomSheet(\n    nativeBottomSheetKey,\n    isPortrait,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n  );\n\n  useDelegatedBottomSheet(\n    nativeBottomSheetKey,\n    isOpen && (!getInAppBrowser() || isBrowserHidden),\n    onClose,\n    dialogRef,\n    forceFullNative,\n    noResetFullNativeOnBlur,\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isOpen || !isPortrait || !isSlideUp || IS_DELEGATED_BOTTOM_SHEET || isDelegatingToNative) {\n      return undefined;\n    }\n\n    return captureEvents(modalRef.current!, {\n      excludedClosestSelector: '.capture-scroll',\n      onSwipe: (e: Event, direction: SwipeDirection) => {\n        if (direction === SwipeDirection.Down && getCanCloseModal(swipeDownDateRef, e.target as HTMLElement)) {\n          onClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [isOpen, isPortrait, isSlideUp, isDelegatingToNative, onClose]);\n\n  const { shouldRender } = useShowTransition({\n    ref: modalRef,\n    isOpen: isOpen && !isDelegatingToNative,\n    onCloseAnimationEnd,\n    className: false,\n    closeDuration: animationDuration,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.header, styles.header_wideContent, !hasCloseButton && styles.header_noClose)}\n      >\n        <div className={buildClassName(styles.title, styles.singleTitle, titleClassName)}>{title}</div>\n        {hasCloseButton && (\n          <Button isRound className={styles.closeButton} ariaLabel={lang('Close')} onClick={onClose}>\n            <i className={buildClassName(styles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.modal,\n    className,\n    isSlideUp && styles.slideUpAnimation,\n    isCompact && styles.compact,\n    isCompact && 'is-compact-modal',\n    forceBottomSheet && styles.forceBottomSheet,\n    isInAppLock && styles.inAppLock,\n  );\n\n  const backdropFullClass = buildClassName(styles.backdrop, noBackdrop && styles.noBackdrop);\n\n  const contentFullClassName = buildClassName(\n    styles.content,\n    isCompact && styles.contentCompact,\n    'custom-scroll',\n    contentClassName,\n  );\n\n  return (\n    <Portal>\n      <div ref={modalRef} className={fullClassName} tabIndex={-1} role=\"dialog\">\n        <div className={styles.container}>\n          <div className={backdropFullClass} onClick={!noBackdropClose ? onClose : undefined} />\n          <div\n            className={buildClassName(styles.dialog, dialogClassName)}\n            ref={dialogRef}\n          >\n            {renderHeader()}\n            <div className={contentFullClassName}>{children}</div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n}\n\nconst FreezeWhenClosedModal = freezeWhenClosed(Modal);\n\nexport default withGlobal((global, { isInAppLock }: OwnProps): StateProps => {\n  return {\n    // This behavior is intended to prevent NBS from rendering above the app lock screen,\n    // which is an iOS-only issue. We retain this fix on all platforms to unify behavior.\n    isTemporarilyClosed: !(isInAppLock || !global.isAppLockActive),\n  };\n})(FreezeWhenClosedModal);\n\nfunction getCanCloseModal(lastScrollRef: RefObject<number | undefined>, el?: HTMLElement) {\n  if (windowSize.getIsKeyboardVisible() || getIsSwipeToCloseDisabled()) {\n    return false;\n  }\n\n  const now = Date.now();\n  if (lastScrollRef.current && now - lastScrollRef.current < SCROLL_CONTENT_CHECK_THRESHOLD_MS) {\n    return false;\n  }\n\n  lastScrollRef.current = now;\n  const scrollEl = el?.closest('.custom-scroll');\n\n  return !scrollEl || scrollEl.scrollTop === 0;\n}\n","import { type FC, type Props, useRef } from '../lib/teact/teact';\n\nexport default function freezeWhenClosed<T extends FC>(Component: T) {\n  function ComponentWrapper(props: Props) {\n    const newProps = useRef(props);\n\n    if (props.isOpen) {\n      newProps.current = props;\n    } else {\n      newProps.current = {\n        ...newProps.current,\n        isOpen: false,\n      };\n    }\n\n    return Component(newProps.current);\n  }\n\n  return ComponentWrapper as T;\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\n\nimport { IS_CAPACITOR } from '../config';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../util/windowEnvironment';\nimport useSyncEffect from './useSyncEffect';\n\nimport { getInAppBrowser } from '../components/ui/InAppBrowser';\n\nexport default function useHideBrowser(\n  isOpen?: boolean,\n  isCompact?: boolean,\n) {\n  useSyncEffect(() => {\n    if (!IS_CAPACITOR || IS_DELEGATED_BOTTOM_SHEET || isCompact) return;\n\n    const browser = getInAppBrowser();\n    if (!browser) return;\n\n    if (isOpen && browser) {\n      void browser.hide().then(async () => {\n        if (IS_DELEGATING_BOTTOM_SHEET) {\n          await BottomSheet.enable();\n        }\n      });\n    }\n  }, [isCompact, isOpen]);\n}\n","import type { InAppBrowserObject } from '@awesome-cordova-plugins/in-app-browser';\nimport { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_DEFAULT } from '../../config';\nimport { INAPP_BROWSER_OPTIONS } from '../../util/capacitor';\nimport { listenOnce } from '../../util/domEvents';\nimport { buildInAppBrowserBridgeConnectorCode } from '../../util/embeddedDappBridge/connector/inAppBrowserConnector';\nimport { useInAppBrowserBridgeProvider } from '../../util/embeddedDappBridge/provider/useInAppBrowserBridgeProvider';\nimport { compact } from '../../util/iteratees';\nimport { logDebugError } from '../../util/logs';\nimport { waitFor } from '../../util/schedulers';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS, IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport { getIsAnyNativeBottomSheetModalOpen } from './Modal';\n\ntype CustomInAppBrowserObject = Omit<InAppBrowserObject, 'hide' | 'close'> & {\n  hide(): Promise<void>;\n  close(): Promise<void>;\n};\n\ninterface StateProps {\n  title?: string;\n  subtitle?: string;\n  url?: string;\n  theme: string;\n  animationLevel?: number;\n}\n\n// The maximum time the in-app browser will take to close (and a little more as a safe margin)\nconst CLOSE_MAX_DURATION = 900;\n\n// eslint-disable-next-line @typescript-eslint/no-redundant-type-constituents\nlet inAppBrowser: Cordova['InAppBrowser'] | undefined;\n\nfunction InAppBrowser({\n  title, subtitle, url, theme, animationLevel,\n}: StateProps) {\n  const { closeBrowser } = getActions();\n\n  const lang = useLang();\n\n  const { setupDappBridge, cleanupDappBridge } = useInAppBrowserBridgeProvider(url);\n  const bridgeInjectionCode = useMemo(() => buildInAppBrowserBridgeConnectorCode(), []);\n\n  const handleError = useLastCallback((err: any) => {\n    logDebugError('inAppBrowser error', err);\n  });\n\n  const handleBrowserClose = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      await BottomSheet.enable();\n    }\n\n    inAppBrowser.removeEventListener('loaderror', handleError);\n    inAppBrowser.removeEventListener('exit', handleBrowserClose);\n    inAppBrowser = undefined;\n    closeBrowser();\n\n    cleanupDappBridge();\n  });\n\n  const openBrowser = useLastCallback(async () => {\n    if (IS_DELEGATING_BOTTOM_SHEET && !(await BottomSheet.isShown()).value) {\n      await BottomSheet.disable();\n    }\n\n    const browserTitle = !title && url ? getHostnameFromUrl(url) : title;\n    const browserSubtitle = subtitle === browserTitle ? undefined : subtitle;\n\n    const ADDITIONAL_INAPP_BROWSER_OPTIONS = `,${compact([\n      IS_IOS || browserTitle ? `title=${browserTitle || ''}` : undefined,\n      IS_IOS || browserSubtitle ? `subtitle=${browserSubtitle || ''}` : undefined,\n      url ? `shareurl=${encodeURIComponent(url)}` : undefined,\n      `closebuttoncaption=${IS_IOS ? lang('Close') : 'x'}`,\n      `backbuttoncaption=${lang('Back')}`,\n      `reloadcaption=${lang('Reload Page')}`,\n      `openinbrowsercaption=${lang(IS_IOS ? 'Open in Safari' : 'Open in Browser')}`,\n      `copyurlcaption=${lang('CopyURL')}`,\n      `sharecaption=${lang('Share')}`,\n      `theme=${theme}`,\n      `animated=${animationLevel ?? ANIMATION_LEVEL_DEFAULT > 0 ? 'yes' : 'no'}`,\n    ]).join(',')}`;\n    inAppBrowser = cordova.InAppBrowser.open(\n      url,\n      '_blank',\n      INAPP_BROWSER_OPTIONS + ADDITIONAL_INAPP_BROWSER_OPTIONS,\n      bridgeInjectionCode,\n    );\n\n    const originalHide = inAppBrowser.hide;\n    inAppBrowser.hide = () => {\n      return new Promise<void>((resolve) => {\n        originalHide?.();\n        // On iOS, the animation takes some time. We have to ensure it's completed.\n        if (inAppBrowser && IS_IOS_APP) {\n          listenOnce(inAppBrowser, 'hidecompletion', () => resolve());\n        } else {\n          resolve();\n        }\n      });\n    };\n\n    const originalShow = inAppBrowser.show;\n    inAppBrowser.show = () => {\n      if (!getIsAnyNativeBottomSheetModalOpen()) {\n        originalShow?.();\n      }\n    };\n\n    const originalClose = inAppBrowser.close;\n    inAppBrowser.close = () => {\n      if (!inAppBrowser) {\n        return Promise.resolve();\n      }\n\n      originalClose();\n\n      const closedPromise = new Promise<void>((resolve) => {\n        // The `waitFor` is a hack necessary to ensure the browser is fully in the closed state when the promise\n        // resolves. This solves a bug: if a push notification, that opens a modal, was clicked while the in-app browser\n        // was open, the browser would close, but the modal wouldn't open.\n        listenOnce(inAppBrowser, 'exit', async () => {\n          await waitFor(() => !inAppBrowser, 15, 20);\n          resolve();\n        });\n\n        // A backup for cases when the `close()` call doesn't cause the browser to close and fire the `exit` event.\n        setTimeout(resolve, CLOSE_MAX_DURATION);\n      });\n\n      // Calling `show()` while the browser is being closed causes the app to crash. So we disable the `show` method.\n      inAppBrowser.show = () => undefined;\n      inAppBrowser.hide = () => closedPromise;\n\n      return closedPromise;\n    };\n\n    setupDappBridge(inAppBrowser);\n\n    inAppBrowser.addEventListener('loaderror', handleError);\n    inAppBrowser.addEventListener('exit', handleBrowserClose);\n    inAppBrowser.show();\n  });\n\n  useEffect(() => {\n    if (!url) return undefined;\n\n    void openBrowser();\n\n    return () => inAppBrowser?.close();\n  }, [url]);\n\n  return undefined;\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions, settings } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n    subtitle: currentBrowserOptions?.subtitle,\n    theme: settings.theme,\n    animationLevel: settings.animationLevel,\n  };\n})(InAppBrowser));\n\nexport function getInAppBrowser(): CustomInAppBrowserObject | undefined {\n  return inAppBrowser;\n}\n","import type { ElementRef } from '../../../lib/teact/teact';\nimport { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { EMBEDDED_DAPP_BRIDGE_CHANNEL } from '../../../config';\nimport { createPostMessageInterface } from '../../createPostMessageInterface';\nimport { buildBridgeApi } from './bridgeApi';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InAppBrowserPostMessageAdapter from './InAppBrowserPostMessageAdapter';\n\nexport function useInAppBrowserBridgeProvider(pageUrl?: string) {\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  const setupDappBridge = useLastCallback((inAppBrowser: ElementRef<Cordova['InAppBrowser']>) => {\n    cleanupRef.current = createPostMessageInterface(\n      buildBridgeApi(pageUrl!),\n      EMBEDDED_DAPP_BRIDGE_CHANNEL,\n      new InAppBrowserPostMessageAdapter(inAppBrowser),\n    );\n  });\n\n  useEffect(() => {\n    if (!pageUrl) return;\n\n    return () => {\n      cleanupRef.current?.();\n    };\n  }, [pageUrl]);\n\n  return {\n    setupDappBridge,\n    cleanupDappBridge: () => cleanupRef.current?.(),\n  };\n}\n","import {\n  EMBEDDED_DAPP_BRIDGE_CHANNEL,\n  TONCONNECT_PROTOCOL_VERSION,\n  TONCONNECT_WALLET_JSBRIDGE_KEY,\n} from '../../../config';\nimport { tonConnectGetDeviceInfo } from '../../tonConnectEnvironment';\nimport { initConnectorString } from './connector';\n\nexport function buildInAppBrowserBridgeConnectorCode() {\n  return `\n(${initConnectorString})(\n  '${TONCONNECT_WALLET_JSBRIDGE_KEY}',\n  '${EMBEDDED_DAPP_BRIDGE_CHANNEL}',\n  'cordova_iab' in window ? window.cordova_iab : window.webkit.messageHandlers.cordova_iab,\n  {\n    deviceInfo: ${JSON.stringify(tonConnectGetDeviceInfo())},\n    protocolVersion: ${TONCONNECT_PROTOCOL_VERSION},\n    isWalletBrowser: true,\n  }\n);\n  `;\n}\n","import type { ApiChain } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { getChainBySlug, getNativeToken } from '../../util/tokens';\nimport { getActions } from '../index';\nimport { selectCurrentAccount } from '../selectors';\n\nimport { getInAppBrowser } from '../../components/ui/InAppBrowser';\n\n/**\n * Parses the transfer parameters from the given QR content, assuming it's a plain address.\n * Returns `undefined` if this is not a valid address or the account doesn't have the corresponding wallet.\n */\nexport function parsePlainAddressQr(global: GlobalState, qrData: string) {\n  const availableChains = selectCurrentAccount(global)?.addressByChain ?? {};\n  const newChain = getChainFromAddress(qrData, availableChains);\n  if (!newChain) {\n    return undefined;\n  }\n\n  const currentTokenSlug = global.currentTransfer.tokenSlug;\n  const currentChain = getChainBySlug(currentTokenSlug);\n  const newTokenSlug = newChain !== currentChain ? getNativeToken(newChain).slug : currentTokenSlug;\n\n  return {\n    toAddress: qrData,\n    tokenSlug: newTokenSlug,\n  };\n}\n\nfunction getChainFromAddress(\n  address: string,\n  availableChains: Partial<Record<ApiChain, unknown>>,\n): ApiChain | undefined {\n  for (const chain of Object.keys(availableChains) as Array<keyof typeof availableChains>) {\n    if (isValidAddressOrDomain(address, chain)) {\n      return chain;\n    }\n  }\n\n  return undefined;\n}\n\nexport function closeAllOverlays() {\n  return Promise.all([\n    // It's important to close the in-app browser before closing the modal, because when a modal closes, it calls\n    // `show()` on the hidden in-app browser, and calling `close()` right after `show()` causes the app to crash.\n    // Meanwhile, calling `close()` before `show()` makes the in-app browser ignore the `show()` call.\n    // A situation, where it happens, is pressing an \"openUrl\" notification while the app shows a TON Connect modal.\n    getInAppBrowser()?.close(),\n    getActions().closeAnyModal(),\n    getActions().closeMediaViewer(),\n  ]);\n}\n","import { AppLauncher } from '@capacitor/app-launcher';\nimport { getActions, getGlobal } from '../global';\n\nimport { IFRAME_WHITELIST, IS_CAPACITOR, SUBPROJECT_URL_MASK } from '../config';\nimport { closeAllOverlays } from '../global/helpers/misc';\nimport { isTelegramUrl } from './url';\n\nconst [, SUBPROJECT_HOST_ENDING] = SUBPROJECT_URL_MASK.split('*');\n\nexport type OpenUrlOptions = {\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n};\n\nexport async function openUrl(url: string, options?: OpenUrlOptions) {\n  if (isSubproject(url)) {\n    url = `${url}#theme=${getGlobal().settings.theme}`;\n  }\n\n  if (\n    !options?.isExternal\n    && url.startsWith('http')\n    && (IS_CAPACITOR || isSubproject(url) || isInIframeWhitelist(url))\n    && !isTelegramUrl(url)\n  ) {\n    await closeAllOverlays();\n    getActions().openBrowser({\n      url,\n      title: options?.title,\n      subtitle: options?.subtitle,\n    });\n  } else {\n    const couldOpenApp = IS_CAPACITOR && await openAppSafe(url);\n    if (!couldOpenApp) {\n      window.open(url, '_blank', 'noopener');\n    }\n  }\n}\n\nfunction isSubproject(url: string) {\n  const { host } = new URL(url);\n  return host.endsWith(SUBPROJECT_HOST_ENDING) || host.startsWith('localhost:432');\n}\n\nfunction isInIframeWhitelist(url: string) {\n  return IFRAME_WHITELIST.some((allowedOrigin) => url.startsWith(allowedOrigin.replace(/\\*$/, '')));\n}\n\nexport function handleUrlClick(\n  e: React.MouseEvent<HTMLAnchorElement, MouseEvent>,\n) {\n  e.preventDefault();\n  void openUrl(e.currentTarget.href, {\n    isExternal: e.shiftKey || e.ctrlKey || e.metaKey,\n  });\n}\n\nasync function openAppSafe(url: string) {\n  try {\n    return (await AppLauncher.openUrl({ url })).completed;\n  } catch (err) {\n    return false;\n  }\n}\n","let resolveRenderPromise: NoneToVoidFunction;\nconst renderPromise = new Promise<void>((resolve) => {\n  resolveRenderPromise = resolve;\n});\n\nexport function resolveRender() {\n  resolveRenderPromise();\n}\n\nexport function waitRender() {\n  return renderPromise;\n}\n","export const TON_PROTOCOL = 'ton://';\nexport const TONCONNECT_PROTOCOL = 'tc://';\nexport const TONCONNECT_PROTOCOL_SELF = 'mytonwallet-tc://';\nexport const SELF_PROTOCOL = 'mtw://';\nexport const SELF_UNIVERSAL_URLS = ['https://my.tt', 'https://go.mytonwallet.org'];\nexport const TONCONNECT_UNIVERSAL_URL = 'https://connect.mytonwallet.org';\nexport const CHECKIN_URL = 'https://checkin.mytonwallet.org';\n","import { getActions, getGlobal } from '../../global';\n\nimport type { ActionPayloads, GlobalState } from '../../global/types';\nimport type { OpenUrlOptions } from '../openUrl';\nimport { ActiveTab, ContentTab } from '../../global/types';\n\nimport {\n  DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  GIVEAWAY_CHECKIN_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountTokenBySlug,\n  selectCurrentAccount,\n  selectCurrentAccountNftByAddress,\n  selectTokenByMinterAddress,\n} from '../../global/selectors';\nimport { callApi } from '../../api';\nimport { isValidAddressOrDomain } from '../isValidAddressOrDomain';\nimport { omitUndefined } from '../iteratees';\nimport { logDebug, logDebugError } from '../logs';\nimport { openUrl } from '../openUrl';\nimport { waitRender } from '../renderPromise';\nimport { isTelegramUrl } from '../url';\nimport {\n  CHECKIN_URL,\n  SELF_PROTOCOL,\n  SELF_UNIVERSAL_URLS,\n  TON_PROTOCOL,\n  TONCONNECT_PROTOCOL,\n  TONCONNECT_PROTOCOL_SELF,\n  TONCONNECT_UNIVERSAL_URL,\n} from './constants';\n\nimport { getIsLandscape, getIsPortrait } from '../../hooks/useDeviceScreen';\n\nenum DeeplinkCommand {\n  CheckinWithR = 'r',\n  Swap = 'swap',\n  BuyWithCrypto = 'buy-with-crypto',\n  BuyWithCard = 'buy-with-card',\n  Stake = 'stake',\n  Giveaway = 'giveaway',\n  Transfer = 'transfer',\n  Explore = 'explore',\n}\n\nlet urlAfterSignIn: string | undefined;\n\nexport function processDeeplinkAfterSignIn() {\n  if (!urlAfterSignIn) return;\n\n  void processDeeplink(urlAfterSignIn);\n\n  urlAfterSignIn = undefined;\n}\n\nexport async function openDeeplinkOrUrl(\n  url: string,\n  { isFromInAppBrowser, ...urlOptions }: OpenUrlOptions & { isFromInAppBrowser?: boolean },\n) {\n  if (isTonDeeplink(url) || isTonConnectDeeplink(url) || isSelfDeeplink(url)) {\n    await processDeeplink(url, isFromInAppBrowser);\n  } else {\n    await openUrl(url, urlOptions);\n  }\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport function processDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!getGlobal().currentAccountId) {\n    urlAfterSignIn = url;\n  }\n\n  if (isTonConnectDeeplink(url)) {\n    return processTonConnectDeeplink(url, isFromInAppBrowser);\n  } else if (isSelfDeeplink(url)) {\n    return processSelfDeeplink(url);\n  } else {\n    return processTonDeeplink(url);\n  }\n}\n\nexport function isTonDeeplink(url: string) {\n  return url.startsWith(TON_PROTOCOL);\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonDeeplink(url: string): Promise<boolean> {\n  await waitRender();\n\n  const actions = getActions();\n  const global = getGlobal();\n  if (!global.currentAccountId) {\n    return false;\n  }\n\n  const startTransferParams = parseTonDeeplink(url, global);\n\n  if (!startTransferParams) {\n    return false;\n  }\n\n  if ('error' in startTransferParams) {\n    actions.showError({ error: startTransferParams.error });\n    return true;\n  }\n\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    ...startTransferParams,\n  });\n\n  if (getIsLandscape()) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n\n  return true;\n}\n\n/**\n * Parses a TON deeplink and checks whether the transfer can be initiated.\n * Returns `undefined` if the URL is not a TON deeplink.\n * If there is `error` in the result, there is a problem with the deeplink (the string is to translate via `lang`).\n * Otherwise, returned the parsed transfer parameters.\n */\nexport function parseTonDeeplink(url: string, global: GlobalState) {\n  const params = rawParseTonDeeplink(url);\n  if (!params) return undefined;\n\n  const {\n    toAddress,\n    amount,\n    comment,\n    binPayload,\n    jettonAddress,\n    nftAddress,\n    stateInit,\n  } = params;\n\n  const verifiedAddress = isValidAddressOrDomain(toAddress, 'ton') ? toAddress : undefined;\n\n  const transferParams: Omit<NonNullable<ActionPayloads['startTransfer']>, 'isPortrait'> & { error?: string } = {\n    toAddress: verifiedAddress,\n    tokenSlug: TONCOIN.slug,\n    amount,\n    comment,\n    binPayload,\n    stateInit,\n  };\n\n  if (jettonAddress) {\n    const globalToken = jettonAddress\n      ? selectTokenByMinterAddress(global, jettonAddress)\n      : undefined;\n\n    if (!globalToken) {\n      transferParams.error = '$unknown_token_address';\n    } else {\n      const accountToken = selectAccountTokenBySlug(global, globalToken.slug);\n\n      if (!accountToken) {\n        transferParams.error = '$dont_have_required_token';\n      } else {\n        transferParams.tokenSlug = globalToken.slug;\n      }\n    }\n  }\n\n  if (nftAddress) {\n    const accountNft = selectCurrentAccountNftByAddress(global, nftAddress);\n\n    if (!accountNft) {\n      transferParams.error = '$dont_have_required_nft';\n    } else {\n      transferParams.nfts = [accountNft];\n    }\n  }\n\n  return omitUndefined(transferParams);\n}\n\nfunction rawParseTonDeeplink(value?: string) {\n  if (typeof value !== 'string' || !isTonDeeplink(value) || !value.includes('/transfer/')) {\n    return undefined;\n  }\n\n  try {\n    // In some browsers URL module may handle non-standard protocols incorrectly\n    const adaptedDeeplink = value.replace(TON_PROTOCOL, 'https://');\n    const url = new URL(adaptedDeeplink);\n\n    const toAddress = url.pathname.replace(/\\//g, '');\n    const amount = getDeeplinkSearchParam(url, 'amount');\n    const comment = getDeeplinkSearchParam(url, 'text');\n    const binPayload = getDeeplinkSearchParam(url, 'bin');\n    const jettonAddress = getDeeplinkSearchParam(url, 'jetton');\n    const nftAddress = getDeeplinkSearchParam(url, 'nft');\n    const stateInit = getDeeplinkSearchParam(url, 'init') || getDeeplinkSearchParam(url, 'stateInit');\n\n    return {\n      toAddress,\n      amount: amount ? BigInt(amount) : undefined,\n      comment,\n      jettonAddress,\n      nftAddress,\n      binPayload: binPayload ? replaceAllSpacesWithPlus(binPayload) : undefined,\n      stateInit: stateInit ? replaceAllSpacesWithPlus(stateInit) : undefined,\n    };\n  } catch (err) {\n    return undefined;\n  }\n}\n\nfunction isTonConnectDeeplink(url: string) {\n  return url.startsWith(TONCONNECT_PROTOCOL)\n    || url.startsWith(TONCONNECT_PROTOCOL_SELF)\n    || omitProtocol(url).startsWith(omitProtocol(TONCONNECT_UNIVERSAL_URL));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nasync function processTonConnectDeeplink(url: string, isFromInAppBrowser = false): Promise<boolean> {\n  if (!isTonConnectDeeplink(url)) {\n    return false;\n  }\n\n  const { openLoadingOverlay, closeLoadingOverlay } = getActions();\n\n  openLoadingOverlay();\n\n  const returnUrl = await callApi('startSseConnection', {\n    url,\n    isFromInAppBrowser,\n  });\n\n  closeLoadingOverlay();\n\n  if (returnUrl) {\n    void openUrl(returnUrl, { isExternal: !isFromInAppBrowser });\n  }\n\n  return true;\n}\n\nexport function isSelfDeeplink(url: string) {\n  url = forceHttpsProtocol(url);\n\n  return url.startsWith(SELF_PROTOCOL)\n    || SELF_UNIVERSAL_URLS.some((u) => url.startsWith(u));\n}\n\n// Returns `true` if the link has been processed, ideally resulting to a UI action\nexport async function processSelfDeeplink(deeplink: string): Promise<boolean> {\n  try {\n    deeplink = convertSelfDeeplinkToSelfUrl(deeplink);\n\n    const { pathname, searchParams } = new URL(deeplink);\n    const command = pathname.split('/').find(Boolean);\n    const actions = getActions();\n    const global = getGlobal();\n    const { isTestnet } = global.settings;\n    const isLedger = selectCurrentAccount(global)?.ledger;\n\n    logDebug('Processing deeplink', deeplink);\n\n    switch (command) {\n      case DeeplinkCommand.CheckinWithR: {\n        const r = pathname.match(/r\\/(.*)$/)?.[1];\n        const url = `${CHECKIN_URL}${r ? `?r=${r}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Giveaway: {\n        const giveawayId = pathname.match(/giveaway\\/([^/]+)/)?.[1];\n        const url = `${GIVEAWAY_CHECKIN_URL}${giveawayId ? `?giveawayId=${giveawayId}` : ''}`;\n        void openUrl(url);\n        return true;\n      }\n\n      case DeeplinkCommand.Swap: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || TONCOIN.slug,\n            tokenOutSlug: searchParams.get('out') || DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '10',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCrypto: {\n        if (isTestnet) {\n          actions.showError({ error: 'Swap is not supported in Testnet.' });\n        } else if (isLedger) {\n          actions.showError({ error: 'Swap is not yet supported by Ledger.' });\n        } else {\n          actions.startSwap({\n            tokenInSlug: searchParams.get('in') || DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n            tokenOutSlug: searchParams.get('out') || TONCOIN.slug,\n            amountIn: toNumberOrEmptyString(searchParams.get('amount')) || '100',\n          });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.BuyWithCard: {\n        if (isTestnet) {\n          actions.showError({ error: 'Buying with card is not supported in Testnet.' });\n        } else {\n          actions.openOnRampWidgetModal({ chain: 'ton' });\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Stake: {\n        if (isTestnet) {\n          actions.showError({ error: 'Staking is not supported in Testnet.' });\n        } else {\n          actions.startStaking();\n        }\n        return true;\n      }\n\n      case DeeplinkCommand.Transfer: {\n        return await processTonDeeplink(convertSelfUrlToTonDeeplink(deeplink));\n      }\n\n      case DeeplinkCommand.Explore: {\n        actions.closeSettings();\n        actions.openExplore();\n        actions.setActiveContentTab({ tab: ContentTab.Explore });\n\n        const host = pathname.split('/').filter(Boolean)[1];\n        if (host) {\n          const matchingSite = getGlobal().exploreData?.sites.find(({ url }) => {\n            const siteHost = isTelegramUrl(url)\n              ? new URL(url).pathname.split('/').filter(Boolean)[0]\n              : new URL(url).hostname;\n\n            return siteHost === host;\n          });\n\n          if (matchingSite) {\n            void openUrl(matchingSite.url);\n          }\n        }\n\n        return true;\n      }\n    }\n  } catch (err) {\n    logDebugError('processSelfDeeplink', err);\n  }\n\n  return false;\n}\n\n/**\n * Parses a deeplink and checks whether the transfer can be initiated.\n * See `parseTonDeeplink` for information about the returned values.\n */\nexport function parseDeeplinkTransferParams(url: string, global: GlobalState) {\n  let tonDeeplink = url;\n\n  if (isSelfDeeplink(url)) {\n    try {\n      url = convertSelfDeeplinkToSelfUrl(url);\n      const { pathname } = new URL(url);\n      const command = pathname.split('/').find(Boolean);\n\n      if (command === DeeplinkCommand.Transfer) {\n        tonDeeplink = convertSelfUrlToTonDeeplink(url);\n      }\n    } catch (err) {\n      logDebugError('parseDeeplinkTransferParams', err);\n    }\n  }\n\n  return parseTonDeeplink(tonDeeplink, global);\n}\n\nfunction convertSelfDeeplinkToSelfUrl(deeplink: string) {\n  if (deeplink.startsWith(SELF_PROTOCOL)) {\n    return deeplink.replace(SELF_PROTOCOL, `${SELF_UNIVERSAL_URLS[0]}/`);\n  }\n  return deeplink;\n}\n\nfunction convertSelfUrlToTonDeeplink(deeplink: string) {\n  deeplink = forceHttpsProtocol(deeplink);\n\n  for (const selfUniversalUrl of SELF_UNIVERSAL_URLS) {\n    if (deeplink.startsWith(selfUniversalUrl)) {\n      return deeplink.replace(`${selfUniversalUrl}/`, TON_PROTOCOL);\n    }\n  }\n\n  return deeplink;\n}\n\nfunction omitProtocol(url: string) {\n  return url.replace(/^https?:\\/\\//, '');\n}\n\nfunction forceHttpsProtocol(url: string) {\n  return url.replace(/^http:\\/\\//, 'https://');\n}\n\nfunction toNumberOrEmptyString(input?: string | null) {\n  return String(Number(input) || '');\n}\n\nfunction replaceAllSpacesWithPlus(value: string) {\n  return value.replace(/ /g, '+');\n}\n\nfunction getDeeplinkSearchParam(url: URL, param: string) {\n  return url.searchParams.get(param) ?? undefined;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst PushNotifications = registerPlugin('PushNotifications', {});\nexport * from './definitions';\nexport { PushNotifications };\n//# sourceMappingURL=index.js.map","import type { ApiNotificationAddress } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport { selectAccount } from './accounts';\n\n// This selector is not optimized for usage with React components wrapped by withGlobal\nexport function selectNotificationTonAddressesSlow(\n  global: GlobalState,\n  accountIds: string[],\n  maxCount: number = Infinity,\n): Record<string, ApiNotificationAddress> {\n  const result: Record<string, ApiNotificationAddress> = {};\n  let resultCount = 0;\n\n  for (const accountId of accountIds) {\n    if (resultCount >= maxCount) {\n      break;\n    }\n\n    const account = selectAccount(global, accountId);\n    const address = account?.addressByChain.ton;\n\n    if (address) {\n      result[accountId] = {\n        title: account.title,\n        address,\n        chain: 'ton',\n      };\n      resultCount += 1;\n    }\n  }\n\n  return result;\n}\n","export type CapacitorPlatform = 'ios' | 'android';\n\nlet platform: CapacitorPlatform | undefined;\n\nexport function setCapacitorPlatform(newPlatform: CapacitorPlatform) {\n  platform = newPlatform;\n}\n\nexport function getCapacitorPlatform() {\n  return platform;\n}\n","import { Capacitor } from '@capacitor/core';\nimport type { ActionPerformed, Token } from '@capacitor/push-notifications';\nimport { PushNotifications } from '@capacitor/push-notifications';\nimport { getActions, getGlobal, setGlobal } from '../../global';\n\nimport type { ApiStakingType } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\n\nimport { selectAccountIdByAddress } from '../../global/selectors';\nimport { selectNotificationTonAddressesSlow } from '../../global/selectors/notifications';\nimport { callApi } from '../../api';\nimport { MINUTE } from '../../api/constants';\nimport { pick } from '../iteratees';\nimport { logDebugError } from '../logs';\nimport { getCapacitorPlatform } from './platform';\n\ninterface ShowTxMessageData {\n  action: 'swap' | 'nativeTx';\n  address: string;\n  txId: string;\n}\n\ninterface StakingMessageData {\n  action: 'staking';\n  address: string;\n  stakingType: ApiStakingType;\n  stakingId: string;\n  logId: string;\n}\n\ninterface OpenActivityMessageData {\n  action: 'jettonTx';\n  address: string;\n  slug: string;\n}\n\ninterface OpenUrlMessageData {\n  action: 'openUrl';\n  // The wallet address that should be switched to before opening the URL\n  address?: string;\n  url: string;\n  // For the following parameters, see the `openUrl` options\n  isExternal?: boolean;\n  title?: string;\n  subtitle?: string;\n}\n\ninterface ExpiringDnsMessageData {\n  action: 'expiringDns';\n  address: string;\n  domain: string;\n  domainAddress: string;\n  daysUntilExpiration: string;\n}\n\ntype MessageData = StakingMessageData | OpenActivityMessageData | ShowTxMessageData | OpenUrlMessageData\n  | ExpiringDnsMessageData;\n\nlet nextUpdatePushNotifications = 0;\n\nexport async function initNotificationsWithGlobal(global: GlobalState) {\n  const isPushNotificationsAvailable = Capacitor.isPluginAvailable('PushNotifications');\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      isAvailable: isPushNotificationsAvailable,\n    },\n  });\n\n  if (!isPushNotificationsAvailable) {\n    return;\n  }\n\n  await PushNotifications.addListener('pushNotificationActionPerformed', handlePushNotificationActionPerformed);\n\n  await PushNotifications.addListener('registration', handlePushNotificationRegistration);\n\n  await PushNotifications.addListener('registrationError', (err) => {\n    logDebugError('Registration error: ', err.error);\n  });\n\n  let notificationStatus = await PushNotifications.checkPermissions();\n\n  if (notificationStatus.receive === 'prompt-with-rationale') {\n    return;\n  }\n\n  if (notificationStatus.receive === 'prompt') {\n    notificationStatus = await PushNotifications.requestPermissions();\n  }\n\n  if (notificationStatus.receive !== 'granted') {\n    // For request iOS returns 'denied', but 'granted' follows immediately without new requests\n    return;\n  }\n\n  await PushNotifications.register();\n}\n\nfunction handlePushNotificationActionPerformed(notification: ActionPerformed) {\n  const {\n    showAnyAccountTx,\n    showAnyAccountTokenActivity,\n    openAnyAccountStakingInfo,\n    switchAccountAndOpenUrl,\n    openDomainRenewalModal,\n  } = getActions();\n  const global = getGlobal();\n  const notificationData = notification.notification.data as MessageData;\n  const { action, address } = notificationData;\n  const accountId = address === undefined ? undefined : selectAccountIdByAddress(global, 'ton', address);\n  const network = 'mainnet';\n\n  if (action === 'openUrl') {\n    switchAccountAndOpenUrl({\n      accountId,\n      network,\n      ...pick(notificationData, ['url', 'isExternal', 'title', 'subtitle']),\n    });\n    return;\n  }\n\n  if (!accountId) return;\n\n  if (action === 'nativeTx' || action === 'swap') {\n    const { txId } = notificationData;\n    showAnyAccountTx({ accountId, txId, network });\n  } else if (action === 'jettonTx') {\n    const { slug } = notificationData;\n    showAnyAccountTokenActivity({ accountId, slug, network });\n  } else if (action === 'staking') {\n    const { stakingId } = notificationData;\n    openAnyAccountStakingInfo({ accountId, network, stakingId });\n  } else if (action === 'expiringDns') {\n    const { domainAddress } = notificationData;\n    openDomainRenewalModal({ accountId, network, addresses: [domainAddress] });\n  }\n}\n\nfunction handlePushNotificationRegistration(token: Token) {\n  const userToken = token.value;\n\n  getActions().registerNotifications({ userToken, platform: getCapacitorPlatform()! });\n\n  window.addEventListener('focus', async () => {\n    const global = getGlobal();\n    const notificationAccounts = Object.keys(global.pushNotifications.enabledAccounts || []);\n    if (notificationAccounts.length && nextUpdatePushNotifications <= Date.now()) {\n      await callApi('subscribeNotifications', {\n        userToken,\n        platform: getCapacitorPlatform()!,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, notificationAccounts)),\n      });\n      nextUpdatePushNotifications = Date.now() + (60 * MINUTE);\n    }\n  }, { capture: true });\n}\n","import type { URLOpenListenerEvent } from '@capacitor/app';\nimport { App } from '@capacitor/app';\nimport { Capacitor } from '@capacitor/core';\nimport { SplashScreen } from '@capacitor/splash-screen';\nimport { BiometryType, NativeBiometric } from '@capgo/capacitor-native-biometric';\nimport type { SafeAreaInsets } from 'capacitor-plugin-safe-area';\nimport { SafeArea } from 'capacitor-plugin-safe-area';\nimport { getGlobal } from '../../global';\n\nimport type { AuthConfig } from '../authApi/types';\nimport type { CapacitorPlatform } from './platform';\n\nimport { GLOBAL_STATE_CACHE_KEY } from '../../config';\nimport { processDeeplink } from '../deeplink';\nimport { logDebug } from '../logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../windowEnvironment';\nimport * as storageMethods from '../windowProvider/methods';\nimport { initNotificationsWithGlobal } from './notifications';\nimport { getCapacitorPlatform, setCapacitorPlatform } from './platform';\n\n// Full list of options can be found at https://github.com/apache/cordova-plugin-inappbrowser#cordovainappbrowseropen\nexport const INAPP_BROWSER_OPTIONS = [\n  `location=${IS_IOS ? 'no' : 'yes'}`,\n  `lefttoright=${IS_IOS ? 'no' : 'yes'}`,\n  'usewkwebview=yes',\n  'clearcache=no',\n  'clearsessioncache=no',\n  'hidden=yes',\n  'toolbarposition=top',\n  'hidenavigationbuttons=yes',\n  'hideurlbar=no',\n  'backbuttoncaption=Back',\n  'allowInlineMediaPlayback=yes',\n].join(',');\nconst IOS_SPLASH_SCREEN_HIDE_DELAY = 500;\nconst IOS_SPLASH_SCREEN_HIDE_DURATION = 600;\nexport const VIBRATE_SUCCESS_END_PAUSE_MS = 1300;\n\nlet isNativeBiometricAuthSupported = false;\nlet isFaceIdAvailable = false;\nlet isTouchIdAvailable = false;\nlet statusBarHeight = 0;\n\nlet capacitorAppLaunchDeeplinkProcessedAt = 0;\nconst CAPACITOR_APP_URL_OPEN_EVENT_IGNORE_DELAY_MS = 500;\n\nfunction updateSafeAreaValues(safeAreaInsets: SafeAreaInsets) {\n  for (const [key, value] of Object.entries(safeAreaInsets.insets)) {\n    document.documentElement.style.setProperty(\n      `--safe-area-${key}`,\n      `${getCapacitorPlatform() === 'android' && key === 'top' ? value + 8 : value}px`,\n    );\n  }\n}\n\nexport async function initCapacitor() {\n  setCapacitorPlatform(Capacitor.getPlatform() as CapacitorPlatform);\n\n  void SafeArea.getStatusBarHeight().then(({ statusBarHeight: height }) => {\n    statusBarHeight = height;\n    document.documentElement.style.setProperty('--status-bar-height', `${height}px`);\n  });\n\n  void SafeArea.getSafeAreaInsets().then(({ insets: { bottom } }) => {\n    document.documentElement.style.setProperty('--safe-area-bottom', `${bottom}px`);\n  });\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    void SplashScreen.hide({ fadeOutDuration: 0 });\n    return;\n  }\n\n  if (getCapacitorPlatform() === 'ios') {\n    setTimeout(() => {\n      void SplashScreen.hide({ fadeOutDuration: IOS_SPLASH_SCREEN_HIDE_DURATION });\n    }, IOS_SPLASH_SCREEN_HIDE_DELAY);\n  }\n\n  void App.addListener('appUrlOpen', (event: URLOpenListenerEvent) => {\n    // Prevent processing the same deeplink twice on cold start\n    // 1. `app.getLaunchUrl()` returns the deeplink\n    // 2. And the `appUrlOpen` event contains the same deeplink\n    if (Date.now() - capacitorAppLaunchDeeplinkProcessedAt > CAPACITOR_APP_URL_OPEN_EVENT_IGNORE_DELAY_MS) {\n      void processDeeplink(event.url);\n    } else {\n      logDebug(`[CAPACITOR] appUrlOpen event ignored`, event);\n    }\n  });\n\n  void App.addListener('backButton', ({ canGoBack }) => {\n    if (canGoBack) {\n      window.history.back();\n    } else {\n      void App.exitApp();\n    }\n  });\n\n  updateSafeAreaValues(await SafeArea.getSafeAreaInsets());\n\n  await SafeArea.addListener('safeAreaChanged', (data) => {\n    updateSafeAreaValues(data);\n  });\n}\n\nexport async function processCapacitorLaunchDeeplink() {\n  const launchUrl = (await App.getLaunchUrl())?.url;\n\n  if (launchUrl) {\n    void processDeeplink(launchUrl);\n  }\n\n  capacitorAppLaunchDeeplinkProcessedAt = Date.now();\n}\n\nexport async function initCapacitorWithGlobal(authConfig?: AuthConfig) {\n  const isNativeBiometricAuthEnabled = !!authConfig && authConfig.kind === 'native-biometrics';\n\n  const biometricsAvailableResult = await NativeBiometric.isAvailable({\n    isWeakAuthenticatorAllowed: isNativeBiometricAuthEnabled,\n    useFallback: false,\n  });\n\n  isNativeBiometricAuthSupported = biometricsAvailableResult.isAvailable;\n  isFaceIdAvailable = biometricsAvailableResult.biometryType === BiometryType.FACE_ID;\n  isTouchIdAvailable = biometricsAvailableResult.biometryType === BiometryType.TOUCH_ID;\n\n  void initNotificationsWithGlobal(getGlobal());\n}\n\nexport function getStatusBarHeight() {\n  return statusBarHeight;\n}\n\nexport function getIsCapacitorBiometricAuthSupported() {\n  return isNativeBiometricAuthSupported;\n}\n\nexport function getIsCapacitorFaceIdAvailable() {\n  return isFaceIdAvailable;\n}\n\nexport function getIsCapacitorTouchIdAvailable() {\n  return isTouchIdAvailable;\n}\n\nexport async function fixIosAppStorage() {\n  await storageMethods.init();\n\n  const isLocalStorageDataExists = Boolean(window.localStorage.getItem(GLOBAL_STATE_CACHE_KEY));\n  const isApiStorageDataExists = Boolean(await storageMethods.capacitorStorageGetItem('accounts'));\n\n  if (isLocalStorageDataExists && !isApiStorageDataExists) {\n    window.localStorage.clear();\n  }\n\n  if (!isLocalStorageDataExists && isApiStorageDataExists) {\n    await storageMethods.capacitorStorageClear();\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport {\n  getIsCapacitorBiometricAuthSupported,\n  getIsCapacitorFaceIdAvailable,\n  getIsCapacitorTouchIdAvailable,\n} from './capacitor';\nimport {\n  getIsTelegramBiometricAuthSupported,\n  getIsTelegramFaceIdAvailable,\n  getIsTelegramTouchIdAvailable,\n} from './telegram';\nimport { getIsMobileTelegramApp, IS_BIOMETRIC_AUTH_SUPPORTED } from './windowEnvironment';\n\nexport function getIsBiometricAuthSupported() {\n  return IS_BIOMETRIC_AUTH_SUPPORTED || getIsNativeBiometricAuthSupported();\n}\n\nexport function getIsNativeBiometricAuthSupported() {\n  return (IS_CAPACITOR && getIsCapacitorBiometricAuthSupported())\n    || (IS_TELEGRAM_APP && getIsTelegramBiometricAuthSupported());\n}\n\nexport function getIsFaceIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorFaceIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramFaceIdAvailable());\n}\n\nexport function getIsTouchIdAvailable() {\n  return (IS_CAPACITOR && getIsCapacitorTouchIdAvailable()) || (IS_TELEGRAM_APP && getIsTelegramTouchIdAvailable());\n}\n\nexport function getDoesUsePinPad() {\n  return IS_CAPACITOR || getIsMobileTelegramApp();\n}\n","import { WebPlugin } from '@capacitor/core';\nexport class ClipboardWeb extends WebPlugin {\n    async write(options) {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (options.string !== undefined) {\n            await this.writeText(options.string);\n        }\n        else if (options.url) {\n            await this.writeText(options.url);\n        }\n        else if (options.image) {\n            if (typeof ClipboardItem !== 'undefined') {\n                try {\n                    const blob = await (await fetch(options.image)).blob();\n                    const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\n                    await navigator.clipboard.write([clipboardItemInput]);\n                }\n                catch (err) {\n                    throw new Error('Failed to write image');\n                }\n            }\n            else {\n                throw this.unavailable('Writing images to the clipboard is not supported in this browser');\n            }\n        }\n        else {\n            throw new Error('Nothing to write');\n        }\n    }\n    async read() {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (typeof ClipboardItem !== 'undefined') {\n            try {\n                const clipboardItems = await navigator.clipboard.read();\n                const type = clipboardItems[0].types[0];\n                const clipboardBlob = await clipboardItems[0].getType(type);\n                const data = await this._getBlobData(clipboardBlob, type);\n                return { value: data, type };\n            }\n            catch (err) {\n                return this.readText();\n            }\n        }\n        else {\n            return this.readText();\n        }\n    }\n    async readText() {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.readText) {\n            throw this.unavailable('Reading from clipboard not supported in this browser');\n        }\n        const text = await navigator.clipboard.readText();\n        return { value: text, type: 'text/plain' };\n    }\n    async writeText(text) {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.writeText) {\n            throw this.unavailable('Writting to clipboard not supported in this browser');\n        }\n        await navigator.clipboard.writeText(text);\n    }\n    _getBlobData(clipboardBlob, type) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            if (type.includes('image')) {\n                reader.readAsDataURL(clipboardBlob);\n            }\n            else {\n                reader.readAsText(clipboardBlob);\n            }\n            reader.onloadend = () => {\n                const r = reader.result;\n                resolve(r);\n            };\n            reader.onerror = e => {\n                reject(e);\n            };\n        });\n    }\n}\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\nimport { ClipboardWeb } from './web';\nconst Clipboard = registerPlugin('Clipboard', {\n    web: () => new ClipboardWeb(),\n});\nexport * from './definitions';\nexport { Clipboard };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Haptics = registerPlugin('Haptics', {\n    web: () => import('./web').then(m => new m.HapticsWeb()),\n});\nexport * from './definitions';\nexport { Haptics };\n//# sourceMappingURL=index.js.map","import { Haptics, ImpactStyle } from '@capacitor/haptics';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { VIBRATE_SUCCESS_END_PAUSE_MS } from './capacitor';\nimport { pause } from './schedulers';\nimport { getTelegramApp } from './telegram';\n\nexport async function vibrate() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.impactOccurred('soft');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnError() {\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('error');\n  } else if (IS_CAPACITOR) {\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(100);\n    await Haptics.impact({ style: ImpactStyle.Medium });\n    await pause(75);\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n}\n\nexport async function vibrateOnSuccess(withPauseOnEnd = false) {\n  if (!IS_CAPACITOR && !IS_TELEGRAM_APP) return;\n\n  if (IS_TELEGRAM_APP) {\n    getTelegramApp()?.HapticFeedback.notificationOccurred('success');\n  } else {\n    await Haptics.impact({ style: ImpactStyle.Light });\n  }\n\n  if (withPauseOnEnd) {\n    await pause(VIBRATE_SUCCESS_END_PAUSE_MS);\n  }\n}\n","import { Clipboard } from '@capacitor/clipboard';\n\nimport { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { vibrate } from './haptics';\nimport { getTelegramApp } from './telegram';\n\nconst textCopyEl = document.createElement('textarea');\ntextCopyEl.setAttribute('readonly', '');\ntextCopyEl.tabIndex = -1;\ntextCopyEl.className = 'visually-hidden';\n\nexport const copyTextToClipboard = (str: string): Promise<void> => {\n  void vibrate();\n\n  if (IS_CAPACITOR) {\n    return Clipboard.write({\n      string: str,\n    });\n  }\n\n  return navigator.clipboard.writeText(str);\n};\n\nexport async function readClipboardContent() {\n  if (IS_TELEGRAM_APP) {\n    return new Promise((resolve: ({ text, type }: { text: string; type: string | undefined }) => void) => {\n      getTelegramApp()?.readTextFromClipboard((text) => {\n        void vibrate();\n        resolve({ text, type: 'text/plain' });\n      });\n    });\n  } else if (IS_CAPACITOR) {\n    const { value, type } = await Clipboard.read();\n    void vibrate();\n    return { text: value, type };\n  } else {\n    const text = await navigator.clipboard.readText();\n    return { text, type: 'text/plain' };\n  }\n}\n","import { PRIVATE_KEY_HEX_LENGTH } from '../config';\n\nexport default function isMnemonicPrivateKey(mnemonic: string[]) {\n  return mnemonic.length === 1 && mnemonic[0].length === PRIVATE_KEY_HEX_LENGTH;\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nconst EQUAL = Symbol('EQUAL');\nconst DELETE = { __delete: true };\nconst DELETE_ALL_CHILDREN = { __deleteAllChildren: true };\n\nexport function deepDiff<T>(value1: T, value2: T): Partial<T> | typeof EQUAL | typeof DELETE_ALL_CHILDREN {\n  if (value1 === value2) {\n    return EQUAL;\n  }\n\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n\n  if (type1 !== type2) {\n    return value2;\n  }\n\n  if (Array.isArray(value1) && Array.isArray(value2) && areSortedArraysDeepEqual(value1, value2)) {\n    return EQUAL;\n  }\n\n  if (!isLiteralObject(value1) || !isLiteralObject(value2)) {\n    return value2;\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys2.length) {\n    return !keys1.length ? EQUAL : DELETE_ALL_CHILDREN;\n  }\n\n  const allKeys = unique(keys1.concat(keys2));\n\n  const diff = allKeys.reduce((acc: any, key) => {\n    const subValue1 = object1[key];\n    const subValue2 = object2[key];\n\n    if (!object2.hasOwnProperty(key)) {\n      acc[key] = DELETE;\n      return acc;\n    }\n\n    if (!object1.hasOwnProperty(key)) {\n      acc[key] = subValue2;\n      return acc;\n    }\n\n    const subDiff = deepDiff(subValue1, subValue2);\n    if (subDiff !== EQUAL) {\n      acc[key] = subDiff;\n    }\n\n    return acc;\n  }, {});\n\n  if (Object.keys(diff).length === 0) {\n    return EQUAL;\n  }\n\n  return diff;\n}\n\nfunction areSortedArraysDeepEqual<T extends Array<any>>(array1: T, array2: T) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => deepDiff(item, array2[i]) === EQUAL);\n}\n","import { isLiteralObject, unique } from './iteratees';\n\nexport function deepMerge<T>(value1: T, value2: T): T {\n  if (value1 === value2) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value2)) {\n    return value2;\n  }\n\n  if (!isLiteralObject(value1)) {\n    return reduceDiff(value2) as T;\n  }\n\n  if (value2.__deleteAllChildren) {\n    return {} as T;\n  }\n\n  const allKeys = unique(Object.keys(value1).concat(Object.keys(value2)));\n\n  return allKeys.reduce((acc: AnyLiteral, key) => {\n    const oldValue = value1[key];\n\n    if (!value2.hasOwnProperty(key)) {\n      acc[key] = oldValue;\n    } else {\n      const newValue = value2[key];\n\n      if (!newValue?.__delete) {\n        acc[key] = deepMerge(oldValue, newValue);\n      }\n    }\n\n    return acc;\n  }, {}) as T;\n}\n\nfunction reduceDiff(diff: AnyLiteral) {\n  if (diff.__deleteAllChildren) {\n    return {};\n  }\n\n  return Object.entries(diff).reduce((acc: AnyLiteral, [key, value]) => {\n    if (!value?.__delete) {\n      acc[key] = isLiteralObject(value) ? reduceDiff(value) : value;\n    }\n\n    return acc;\n  }, {});\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { IS_TELEGRAM_APP } from '../config';\nimport { createSignal } from '../util/signals';\nimport { getTelegramAppAsync } from '../util/telegram';\nimport useLastCallback from './useLastCallback';\n\nconst [getIsInBackgroundLocal, setIsInBackground] = createSignal(!document.hasFocus());\nexport const getIsInBackground = getIsInBackgroundLocal;\n\nfunction handleBlur() {\n  setIsInBackground(true);\n}\n\nfunction handleFocus() {\n  setIsInBackground(false);\n}\n\nif (IS_TELEGRAM_APP) {\n  void getTelegramAppAsync().then((telegramApp) => {\n    telegramApp!.onEvent('activated', handleFocus);\n    telegramApp!.onEvent('deactivated', handleBlur);\n    setIsInBackground(!telegramApp?.isActive);\n  });\n} else {\n  window.addEventListener('blur', handleBlur);\n  window.addEventListener('focus', handleFocus);\n}\n\nexport default function useBackgroundMode(\n  onBlur?: AnyToVoidFunction,\n  onFocus?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnBlur = useLastCallback(onBlur);\n  const lastOnFocus = useLastCallback(onFocus);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsInBackground()) {\n      lastOnBlur();\n    }\n\n    return getIsInBackground.subscribe(() => {\n      if (getIsInBackground()) {\n        lastOnBlur();\n      } else {\n        lastOnFocus();\n      }\n    });\n  }, [isDisabled, lastOnBlur, lastOnFocus]);\n}\n\nexport function isBackgroundModeActive() {\n  return getIsInBackground();\n}\n","import { addCallback as onGlobalChange } from '../lib/teact/teactn';\nimport { getActions, getGlobal, setGlobal } from '../global';\n\nimport type { ActionPayloads, GlobalState } from '../global/types';\nimport type { Log } from './logs';\n\nimport { MULTITAB_DATA_CHANNEL_NAME } from '../config';\nimport { deepDiff } from './deepDiff';\nimport { deepMerge } from './deepMerge';\nimport { omit } from './iteratees';\nimport { getLogs } from './logs';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_MULTITAB_SUPPORTED } from './windowEnvironment';\n\nimport { isBackgroundModeActive } from '../hooks/useBackgroundMode';\n\ninterface BroadcastChannelGlobalDiff {\n  type: 'globalDiffUpdate';\n  diff: any;\n}\n\ninterface BroadcastChannelCallActionInMain<K extends keyof ActionPayloads> {\n  type: 'callActionInMain';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelCallActionInNative<K extends keyof ActionPayloads> {\n  type: 'callActionInNative';\n  name: K;\n  options?: ActionPayloads[K];\n}\n\ninterface BroadcastChannelNativeLogsRequest {\n  type: 'getLogsFromNative';\n}\n\ninterface BroadcastChannelNativeLogsResponse {\n  type: 'logsFromNative';\n  logs: Log[];\n}\n\ntype BroadcastChannelMessage = BroadcastChannelGlobalDiff\n  | BroadcastChannelCallActionInMain<keyof ActionPayloads>\n  | BroadcastChannelCallActionInNative<keyof ActionPayloads>\n  | BroadcastChannelNativeLogsRequest\n  | BroadcastChannelNativeLogsResponse;\ntype EventListener = (type: 'message', listener: (event: { data: BroadcastChannelMessage }) => void) => void;\n\nexport type TypedBroadcastChannel = {\n  postMessage: (message: BroadcastChannelMessage) => void;\n  addEventListener: EventListener;\n  removeEventListener: EventListener;\n};\n\nconst channel = IS_MULTITAB_SUPPORTED\n  ? new BroadcastChannel(MULTITAB_DATA_CHANNEL_NAME) as TypedBroadcastChannel\n  : undefined;\n\nlet currentGlobal = getGlobal();\n\nexport function initMultitab({ noPubGlobal }: { noPubGlobal?: boolean } = {}) {\n  if (!channel) return;\n\n  if (!noPubGlobal) {\n    onGlobalChange(handleGlobalChange);\n  }\n\n  channel.addEventListener('message', handleMultitabMessage);\n}\n\nfunction handleGlobalChange(global: GlobalState) {\n  if (global === currentGlobal) return;\n\n  // One of the goals of this check is preventing the Delegated Bottom Sheet global state initialization (performed by\n  // src/global/init.ts) from propagating to the main WebView. Normally this is prevented by `isBackgroundModeActive()`\n  // (the Sheet should be out of focus during the initialization), but we suspect that this approach is not fully\n  // reliable, because the focus may be in the Sheet during the initialization. So an extra `isInited` check is used -\n  // `isInited: false` appears only in the initial Teactn global state (see src/lib/teact/teactn.tsx) and we expect the\n  // first global change to be the initialization.\n  if (isBackgroundModeActive() || (currentGlobal as AnyLiteral).isInited === false) {\n    currentGlobal = global;\n    return;\n  }\n\n  const diff = deepDiff(omitLocalOnlyKeys(currentGlobal), omitLocalOnlyKeys(global));\n\n  if (typeof diff !== 'symbol') {\n    channel!.postMessage({\n      type: 'globalDiffUpdate',\n      diff,\n    });\n  }\n\n  currentGlobal = global;\n}\n\nfunction omitLocalOnlyKeys(global: GlobalState) {\n  return omit(global, ['DEBUG_randomId']);\n}\n\nfunction handleMultitabMessage({ data }: { data: BroadcastChannelMessage }) {\n  switch (data.type) {\n    case 'globalDiffUpdate': {\n      if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n      currentGlobal = deepMerge(getGlobal(), data.diff);\n\n      setGlobal(currentGlobal);\n\n      break;\n    }\n\n    case 'callActionInMain': {\n      if (!IS_DELEGATING_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'callActionInNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      const { name, options } = data;\n\n      getActions()[name](options as never);\n      break;\n    }\n\n    case 'getLogsFromNative': {\n      if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n      channel!.postMessage({ type: 'logsFromNative', logs: getLogs() });\n      break;\n    }\n  }\n}\n\nexport function callActionInMain<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInMain',\n    name,\n    options,\n  });\n}\n\nexport function callActionInNative<K extends keyof ActionPayloads>(name: K, options?: ActionPayloads[K]) {\n  channel!.postMessage({\n    type: 'callActionInNative',\n    name,\n    options,\n  });\n}\n\nexport function getLogsFromNative() {\n  if (!IS_DELEGATING_BOTTOM_SHEET) return Promise.resolve([]);\n\n  return new Promise<Log[]>((resolve) => {\n    const handleMessage = ({ data }: { data: BroadcastChannelMessage }) => {\n      if (data.type === 'logsFromNative') {\n        channel!.removeEventListener('message', handleMessage);\n        resolve(data.logs);\n      }\n    };\n\n    channel!.addEventListener('message', handleMessage);\n    channel!.postMessage({ type: 'getLogsFromNative' });\n  });\n}\n","import type { GlobalState } from './types';\nimport {\n  AppState,\n  AuthState,\n  BiometricsState,\n  DomainLinkingState,\n  DomainRenewalState,\n  HardwareConnectState,\n  SettingsState,\n  SignDataState,\n  StakingState,\n  SwapState,\n  TransferState,\n} from './types';\n\nimport {\n  ANIMATION_LEVEL_DEFAULT,\n  DEFAULT_AUTOLOCK_OPTION,\n  DEFAULT_SLIPPAGE_VALUE,\n  DEFAULT_STAKING_STATE,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  INIT_SWAP_ASSETS,\n  IS_CORE_WALLET,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  THEME_DEFAULT,\n  TOKEN_INFO,\n} from '../config';\nimport { IS_IOS_APP, USER_AGENT_LANG_CODE } from '../util/windowEnvironment';\n\nexport const STATE_VERSION = 43;\n\nexport const INITIAL_STATE: GlobalState = {\n  appState: AppState.Auth,\n\n  auth: {\n    state: AuthState.none,\n  },\n\n  biometrics: {\n    state: BiometricsState.None,\n  },\n\n  hardware: {\n    hardwareState: HardwareConnectState.Connect,\n  },\n\n  currentTransfer: {\n    state: TransferState.None,\n    tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG,\n  },\n\n  currentDomainRenewal: {\n    state: DomainRenewalState.None,\n  },\n\n  currentDomainLinking: {\n    state: DomainLinkingState.None,\n  },\n\n  currentSwap: {\n    state: SwapState.None,\n    slippage: DEFAULT_SLIPPAGE_VALUE,\n  },\n\n  currentDappTransfer: {\n    state: TransferState.None,\n  },\n\n  currentDappSignData: {\n    state: SignDataState.None,\n  },\n\n  currentStaking: {\n    state: StakingState.None,\n  },\n\n  stakingDefault: DEFAULT_STAKING_STATE,\n\n  tokenInfo: {\n    bySlug: TOKEN_INFO,\n  },\n\n  swapTokenInfo: {\n    bySlug: INIT_SWAP_ASSETS,\n  },\n\n  tokenPriceHistory: {\n    bySlug: {},\n  },\n\n  settings: {\n    state: SettingsState.Initial,\n    theme: THEME_DEFAULT,\n    animationLevel: ANIMATION_LEVEL_DEFAULT,\n    areTinyTransfersHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    canPlaySounds: true,\n    langCode: USER_AGENT_LANG_CODE,\n    byAccountId: {},\n    areTokensWithNoCostHidden: !SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n    isSortByValueEnabled: true,\n    isAppLockEnabled: true,\n    autolockValue: DEFAULT_AUTOLOCK_OPTION,\n  },\n\n  byAccountId: {},\n\n  dialogs: [],\n  notifications: [],\n\n  stateVersion: STATE_VERSION,\n  restrictions: {\n    isLimitedRegion: false,\n    isSwapDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isOnRampDisabled: IS_IOS_APP || IS_CORE_WALLET,\n    isNftBuyingDisabled: IS_IOS_APP,\n  },\n\n  mediaViewer: {},\n\n  pushNotifications: {\n    enabledAccounts: {},\n  },\n};\n","export function areDeepEqual<T>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (!keys1.every((key1) => object2.hasOwnProperty(key1))) {\n    return false;\n  }\n  if (!keys2.every((key2) => object1.hasOwnProperty(key2))) {\n    return false;\n  }\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","import { areDeepEqual } from './areDeepEqual';\nimport { pick } from './iteratees';\n\nexport default function isPartialDeepEqual<T extends AnyLiteral>(node: T, newPartial: Partial<T>) {\n  const currentPartial = pick(node, Object.keys(newPartial) as (keyof typeof newPartial)[]);\n\n  return areDeepEqual(currentPartial, newPartial);\n}\n","import type {\n  ApiBalanceBySlug,\n  ApiChain, ApiNetwork,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, AccountState, AccountType, GlobalState } from '../types';\n\nimport {\n  APP_NAME, IS_CORE_WALLET, POPULAR_WALLET_VERSIONS, TON_USDT_SLUG, TONCOIN,\n} from '../../config';\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { getChainBySlug } from '../../util/tokens';\nimport {\n  selectAccount,\n  selectAccountSettings,\n  selectAccountState,\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n} from '../selectors';\n\nexport function updateAuth(global: GlobalState, authUpdate: Partial<GlobalState['auth']>) {\n  return {\n    ...global,\n    auth: {\n      ...global.auth,\n      ...authUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccounts(\n  global: GlobalState,\n  state: Partial<GlobalState['accounts']>,\n) {\n  return {\n    ...global,\n    accounts: {\n      ...(global.accounts || { byId: {} }),\n      ...state,\n    },\n  };\n}\n\nexport function setIsPinAccepted(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    isPinAccepted: true,\n  };\n}\n\nexport function clearIsPinAccepted(global: GlobalState): GlobalState {\n  return global.isPinAccepted\n    ? { ...global, isPinAccepted: undefined }\n    : global;\n}\n\nexport function createAccount({\n  global,\n  accountId,\n  type,\n  addressByChain,\n  partial,\n  titlePostfix,\n  network,\n  isMnemonicImported,\n}: {\n  global: GlobalState;\n  accountId: string;\n  type: AccountType;\n  addressByChain: Account['addressByChain'];\n  partial?: Partial<Account>;\n  titlePostfix?: string;\n  network?: ApiNetwork;\n  isMnemonicImported?: boolean;\n}) {\n  const account: Account = {\n    ...partial,\n    type,\n    addressByChain,\n    ...(isMnemonicImported && { importedAt: Date.now() }),\n  };\n  let shouldForceAccountEdit = true;\n\n  if (!account.title) {\n    network = network || selectCurrentNetwork(global);\n    const accounts = selectNetworkAccounts(global) || {};\n    const accountAmount = Object.keys(accounts).length;\n    const isMainnet = network === 'mainnet';\n\n    const viewWalletsCount = Object.values(accounts).filter((acc) => acc.type === 'view').length;\n    const regularWalletsCount = accountAmount - viewWalletsCount;\n\n    const titlePrefix = type === 'view'\n      ? 'View Wallet'\n      : isMainnet ? 'Wallet' : 'Testnet Wallet';\n    const postfix = titlePostfix ? ` ${titlePostfix}` : '';\n\n    const count = type === 'view' ? viewWalletsCount + 1 : regularWalletsCount + 1;\n    account.title = `${titlePrefix} ${count}${postfix}`;\n\n    if (accountAmount === 0) {\n      account.title = isMainnet ? APP_NAME : `Testnet ${APP_NAME}`;\n      shouldForceAccountEdit = false;\n    }\n  } else if (titlePostfix) {\n    const title = account.title?.replace(new RegExp(`\\\\b(${POPULAR_WALLET_VERSIONS.join('|')})\\\\b`, 'g'), '');\n    account.title = `${title.trim()} ${titlePostfix}`;\n  }\n\n  if (!IS_CORE_WALLET) {\n    global = { ...global, shouldForceAccountEdit };\n  }\n\n  if (selectAccount(global, accountId)) {\n    throw new Error(`Account ${accountId} already exists`);\n  }\n\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: account,\n      },\n    },\n  };\n}\n\nexport function updateAccount(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<Account>,\n) {\n  const account = selectAccount(global, accountId);\n\n  if (!account) {\n    throw new Error(`Account ${accountId} doesn't exist`);\n  }\n\n  return {\n    ...global,\n    accounts: {\n      ...global.accounts,\n      byId: {\n        ...global.accounts?.byId,\n        [accountId]: {\n          ...account,\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function renameAccount(global: GlobalState, accountId: string, title: string) {\n  return updateAccount(global, accountId, { title });\n}\n\nexport function createAccountsFromGlobal(global: GlobalState, isMnemonicImported = false): GlobalState {\n  const { firstNetworkAccount, secondNetworkAccount } = global.auth;\n\n  global = createAccount({ global, type: 'mnemonic', ...firstNetworkAccount!, isMnemonicImported });\n  if (secondNetworkAccount) {\n    global = createAccount({ global, type: 'mnemonic', ...secondNetworkAccount, isMnemonicImported });\n  }\n\n  return global;\n}\n\nexport function updateBalances(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  chainBalances: ApiBalanceBySlug,\n): GlobalState {\n  const newBalances: ApiBalanceBySlug = { ...chainBalances };\n  const currentBalances = selectAccountState(global, accountId)?.balances?.bySlug ?? {};\n\n  for (const [slug, currentBalance] of Object.entries(currentBalances)) {\n    if (getChainBySlug(slug) !== chain) {\n      newBalances[slug] = currentBalance;\n    }\n  }\n\n  // Force balance value for USDT-TON and manually imported tokens\n  const importedSlugs = selectAccountSettings(global, accountId)?.importedSlugs ?? [];\n  const hasTonWallet = Boolean(selectAccount(global, accountId)?.addressByChain?.ton);\n\n  let forcedSlugs = importedSlugs;\n  if (hasTonWallet) forcedSlugs = [...forcedSlugs, TON_USDT_SLUG];\n\n  for (const slug of forcedSlugs) {\n    if (!(slug in newBalances)) {\n      newBalances[slug] = 0n;\n    }\n  }\n\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: newBalances,\n    },\n  });\n}\n\nexport function changeBalance(global: GlobalState, accountId: string, slug: string, balance: bigint) {\n  return updateAccountState(global, accountId, {\n    balances: {\n      bySlug: {\n        ...selectAccountState(global, accountId)?.balances?.bySlug,\n        [slug]: balance,\n      },\n    },\n  });\n}\n\nexport function updateTokens(\n  global: GlobalState,\n  partial: Record<string, ApiTokenWithPrice>,\n  withDeepCompare = false,\n): GlobalState {\n  const existingTokens = global.tokenInfo?.bySlug;\n\n  // If the backend does not work, then we won't delete the old prices\n  if (!partial[TONCOIN.slug].price) {\n    partial = Object.values(partial).reduce((result, token) => {\n      const existingToken = existingTokens?.[token.slug];\n\n      result[token.slug] = {\n        ...token,\n        price: existingToken?.price ?? token.price,\n        priceUsd: existingToken?.priceUsd ?? token.priceUsd,\n        percentChange24h: existingToken?.percentChange24h ?? token.percentChange24h,\n      };\n      return result;\n    }, {} as Record<string, ApiTokenWithPrice>);\n  }\n\n  if (withDeepCompare && existingTokens && isPartialDeepEqual(existingTokens, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...existingTokens,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSwapTokens(\n  global: GlobalState,\n  partial: Record<string, ApiSwapAsset>,\n): GlobalState {\n  const currentTokens = global.swapTokenInfo?.bySlug;\n\n  return {\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...currentTokens,\n        ...partial,\n      },\n      isLoaded: true,\n    },\n  };\n}\n\nexport function updateCurrentAccountState(global: GlobalState, partial: Partial<AccountState>): GlobalState {\n  return updateAccountState(global, global.currentAccountId!, partial);\n}\n\nexport function updateAccountState(\n  global: GlobalState, accountId: string, partial: Partial<AccountState>, withDeepCompare = false,\n): GlobalState {\n  // Updates from the API may arrive after the account is removed.\n  // This check prevents that useless data from persisting in the global state.\n  if (!doesAccountExist(global, accountId)) {\n    return global;\n  }\n\n  const accountState = selectAccountState(global, accountId);\n\n  if (withDeepCompare && accountState && isPartialDeepEqual(accountState, partial)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    byAccountId: {\n      ...global.byAccountId,\n      [accountId]: {\n        ...accountState,\n        ...partial,\n      },\n    },\n  };\n}\n\nexport function updateSettings(global: GlobalState, settingsUpdate: Partial<GlobalState['settings']>) {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      ...settingsUpdate,\n    },\n  } as GlobalState;\n}\n\nexport function updateAccountSettings(\n  global: GlobalState,\n  accountId: string,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  // Updates from the API may arrive after the account is removed.\n  // This check prevents that useless data from persisting in the global state.\n  if (!doesAccountExist(global, accountId)) {\n    return global;\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      byAccountId: {\n        ...global.settings.byAccountId,\n        [accountId]: {\n          ...global.settings.byAccountId[accountId],\n          ...settingsUpdate,\n        },\n      },\n    },\n  } as GlobalState;\n}\n\nexport function updateCurrentAccountSettings(\n  global: GlobalState,\n  settingsUpdate: Partial<GlobalState['settings']['byAccountId']['*']>,\n) {\n  return updateAccountSettings(global, global.currentAccountId!, settingsUpdate);\n}\n\nexport function updateBiometrics(global: GlobalState, biometricsUpdate: Partial<GlobalState['biometrics']>) {\n  return {\n    ...global,\n    biometrics: {\n      ...global.biometrics,\n      ...biometricsUpdate,\n    },\n  };\n}\n\nexport function updateRestrictions(global: GlobalState, partial: Partial<GlobalState['restrictions']>) {\n  return {\n    ...global,\n    restrictions: {\n      ...global.restrictions,\n      ...partial,\n    },\n  };\n}\n\nexport function updateCurrentAccountId(global: GlobalState, accountId: string): GlobalState {\n  if (!accountId) {\n    throw Error('Empty accountId!');\n  }\n\n  return {\n    ...global,\n    currentAccountId: accountId,\n  };\n}\n\nexport function doesAccountExist(global: GlobalState, accountId: string) {\n  return !!selectAccount(global, accountId)\n    || accountId === global.auth.firstNetworkAccount?.accountId\n    || accountId === global.auth.secondNetworkAccount?.accountId;\n}\n","import type { GlobalState } from '../types';\nimport { SwapInputSource, SwapState } from '../types';\n\nexport function shouldAvoidSwapEstimation(global: GlobalState) {\n  // For a better UX, we should leave the fees and the other swap data intact during swap confirmation (for example,\n  // to avoid switching from/to gasless mode).\n  // `isEstimating` forces estimation, because by design it means that there was a swap parameter change that\n  // invalidates the current swap estimation.\n  return !global.currentSwap.isEstimating && (\n    global.currentSwap.state === SwapState.Blockchain\n    || global.currentSwap.state === SwapState.Password\n  );\n}\n\n/**\n * Returns true if the swap estimate prepared for the global 1 is suitable for the global 2\n */\nexport function isSwapEstimateInputEqual({ currentSwap: swap1 }: GlobalState, { currentSwap: swap2 }: GlobalState) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug === swap2.tokenInSlug\n    && swap1.tokenOutSlug === swap2.tokenOutSlug\n    && swap1.slippage === swap2.slippage\n    && swap1.inputSource === swap2.inputSource\n    && swap1.isMaxAmount === swap2.isMaxAmount\n    && (swap2.isMaxAmount || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns true is the swap form has enough data to start estimation\n */\nexport function isSwapFormFilled({ currentSwap }: GlobalState) {\n  const amountKey = currentSwap.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return currentSwap.tokenInSlug\n    && currentSwap.tokenOutSlug\n    && Number(currentSwap[amountKey] ?? '0') > 0; // The backend fails if the amount is \"0\", \"0.0\", etc\n}\n\nexport function doesSwapChangeRequireEstimation(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return isSwapFormFilled(globalAfter) && !isSwapEstimateInputEqual(globalBefore, globalAfter);\n}\n\nexport function doesSwapChangeRequireEstimationReset(globalBefore: GlobalState, globalAfter: GlobalState) {\n  return !isSwapFormFilled(globalAfter)\n    || globalBefore.currentSwap.tokenInSlug !== globalAfter.currentSwap.tokenInSlug\n    || globalBefore.currentSwap.tokenOutSlug !== globalAfter.currentSwap.tokenOutSlug;\n}\n\nexport function doesSwapChangeRequireDexUnselect(\n  { currentSwap: swap1 }: GlobalState,\n  { currentSwap: swap2 }: GlobalState,\n) {\n  const amountKey = swap1.inputSource === SwapInputSource.In ? 'amountIn' : 'amountOut';\n\n  return swap1.tokenInSlug !== swap2.tokenInSlug\n    || swap1.tokenOutSlug !== swap2.tokenOutSlug\n    || swap1.inputSource !== swap2.inputSource\n    || !((swap1.isMaxAmount && swap2.isMaxAmount) || swap1[amountKey] === swap2[amountKey]);\n}\n\n/**\n * Returns the `currentSwap` parameters that should be set when it's impossible to estimate the current swap or no\n * estimation has been done.\n */\nexport function getSwapEstimateResetParams(global: GlobalState) {\n  const amountReset = global.currentSwap.inputSource === SwapInputSource.In\n    ? { amountOut: undefined }\n    : { amountIn: undefined };\n\n  return {\n    ...amountReset,\n    amountOutMin: '0',\n    priceImpact: 0,\n    errorType: undefined,\n    limits: undefined,\n    dieselStatus: undefined,\n    estimates: undefined,\n    bestRateDexLabel: undefined,\n    networkFee: undefined,\n    realNetworkFee: undefined,\n    swapFee: undefined,\n    swapFeePercent: undefined,\n    ourFee: undefined,\n    ourFeePercent: undefined,\n    dieselFee: undefined,\n  } satisfies Partial<GlobalState['currentSwap']>;\n}\n","import type { GlobalState } from '../types';\nimport { SwapState } from '../types';\n\nimport { DEFAULT_SLIPPAGE_VALUE } from '../../config';\nimport {\n  doesSwapChangeRequireDexUnselect,\n  doesSwapChangeRequireEstimation,\n  doesSwapChangeRequireEstimationReset,\n  getSwapEstimateResetParams,\n} from '../helpers/swap';\n\nfunction rawUpdateCurrentSwap(global: GlobalState, update: Partial<GlobalState['currentSwap']>) {\n  return {\n    ...global,\n    currentSwap: {\n      ...global.currentSwap,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentSwap(\n  global: GlobalState,\n  update: Partial<GlobalState['currentSwap']>,\n  // Set to true if you want to not trigger the swap estimation, and you are sure estimation is not needed\n  doAvoidEstimation?: boolean,\n) {\n  let newGlobal = rawUpdateCurrentSwap(global, update);\n\n  if (!doAvoidEstimation) {\n    if (doesSwapChangeRequireEstimationReset(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, getSwapEstimateResetParams(newGlobal));\n    }\n\n    if (doesSwapChangeRequireEstimation(global, newGlobal)) {\n      newGlobal = rawUpdateCurrentSwap(newGlobal, { isEstimating: true });\n    }\n  }\n\n  if (doesSwapChangeRequireDexUnselect(global, newGlobal)) {\n    newGlobal = rawUpdateCurrentSwap(newGlobal, {\n      isDexLabelChanged: undefined,\n    });\n  }\n\n  // Applying the update again because the input fields should have a higher priority than the above automatic updates\n  return rawUpdateCurrentSwap(newGlobal, update);\n}\n\nexport function clearCurrentSwap(global: GlobalState) {\n  return {\n    ...global,\n    currentSwap: {\n      state: SwapState.None,\n      slippage: DEFAULT_SLIPPAGE_VALUE,\n    },\n  };\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentSwapId(global: GlobalState, replaceMap: Record<string, string>) {\n  const oldSwapId = global.currentSwap.activityId;\n  const newSwapId = oldSwapId && replaceMap[oldSwapId];\n  if (newSwapId !== oldSwapId) {\n    global = updateCurrentSwap(global, { activityId: newSwapId });\n  }\n  return global;\n}\n","import type { ApiCheckTransactionDraftResult } from '../../api/chains/ton/types';\nimport type { GlobalState } from '../types';\n\nimport { pick } from '../../util/iteratees';\nimport { INITIAL_STATE } from '../initialState';\nimport { selectCurrentTransferMaxAmount, selectTokenMatchingCurrentTransferAddressSlow } from '../selectors';\n\nexport function updateCurrentTransferByCheckResult(global: GlobalState, result: ApiCheckTransactionDraftResult) {\n  const nextGlobal = updateCurrentTransfer(global, {\n    toAddressName: result.addressName,\n    ...pick(result, ['fee', 'realFee', 'isScam', 'isMemoRequired', 'diesel']),\n  });\n  return preserveMaxTransferAmount(global, nextGlobal);\n}\n\nexport function updateCurrentTransfer(global: GlobalState, update: Partial<GlobalState['currentTransfer']>) {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentTransfer(global: GlobalState) {\n  return {\n    ...global,\n    currentTransfer: INITIAL_STATE.currentTransfer,\n  };\n}\n\n/**\n * Preserves the maximum transfer amount, if it was selected.\n * Returns a modified version of `nextGlobal`.\n */\nexport function preserveMaxTransferAmount(prevGlobal: GlobalState, nextGlobal: GlobalState) {\n  const previousMaxAmount = selectCurrentTransferMaxAmount(prevGlobal);\n  const wasMaxAmountSelected = previousMaxAmount && prevGlobal.currentTransfer.amount === previousMaxAmount;\n  if (!wasMaxAmountSelected) {\n    return nextGlobal;\n  }\n  const nextMaxAmount = selectCurrentTransferMaxAmount(nextGlobal);\n  return updateCurrentTransfer(nextGlobal, { amount: nextMaxAmount });\n}\n\nexport function updateCurrentTransferLoading(global: GlobalState, isLoading: boolean): GlobalState {\n  return {\n    ...global,\n    currentTransfer: {\n      ...global.currentTransfer,\n      isLoading,\n    },\n  };\n}\n\nexport function setCurrentTransferAddress(global: GlobalState, toAddress: string | undefined) {\n  global = updateCurrentTransfer(global, { toAddress });\n\n  // Unless the user has filled the amount, the token should change to match the \"to\" address\n  if (!global.currentTransfer.amount) {\n    global = updateCurrentTransfer(global, {\n      tokenSlug: selectTokenMatchingCurrentTransferAddressSlow(global),\n    });\n  }\n\n  return global;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentTransferId(global: GlobalState, replaceMap: Record<string, string>) {\n  const oldTxId = global.currentTransfer.txId;\n  const newTxId = oldTxId && replaceMap[oldTxId];\n  if (newTxId !== oldTxId) {\n    global = updateCurrentTransfer(global, { txId: newTxId });\n  }\n  return global;\n}\n","import type { GlobalState } from '../types';\n\nimport { selectAccountState, selectCurrentAccountState } from '../selectors';\nimport { updateAccountState, updateCurrentAccountId, updateCurrentAccountState } from './misc';\nimport { clearCurrentSwap } from './swap';\nimport { clearCurrentTransfer } from './transfer';\n\nexport function updateCurrentSignature(global: GlobalState, update: Partial<GlobalState['currentSignature']>) {\n  return {\n    ...global,\n    currentSignature: {\n      ...global.currentSignature,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearCurrentSignature(global: GlobalState) {\n  return {\n    ...global,\n    currentSignature: undefined,\n  };\n}\n\nexport function updateActivitiesIsLoading(global: GlobalState, isLoading: boolean) {\n  const { activities } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    activities: {\n      ...activities || { byId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function updateActivitiesIsHistoryEndReached(global: GlobalState, isReached: boolean, slug?: string) {\n  const { activities } = selectCurrentAccountState(global) || {};\n\n  if (slug) {\n    const bySlug = activities?.isHistoryEndReachedBySlug ?? {};\n\n    return updateCurrentAccountState(global, {\n      activities: {\n        ...activities || { byId: {} },\n        isHistoryEndReachedBySlug: {\n          ...bySlug,\n          [slug]: isReached,\n        },\n      },\n    });\n  }\n\n  return updateCurrentAccountState(global, {\n    activities: {\n      ...activities || { byId: {} },\n      isMainHistoryEndReached: isReached,\n    },\n  });\n}\n\nexport function updateActivitiesIsLoadingByAccount(global: GlobalState, accountId: string, isLoading: boolean) {\n  const { activities } = selectAccountState(global, accountId) || {};\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities || { byId: {} },\n      isLoading,\n    },\n  });\n}\n\nexport function switchAccountAndClearGlobal(global: GlobalState, accountId: string) {\n  let newGlobal = updateCurrentAccountId(global, accountId);\n  newGlobal = clearCurrentTransfer(newGlobal);\n\n  return clearCurrentSwap(newGlobal);\n}\n","import type { ApiStakingState } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\nimport { StakingState } from '../types';\n\nimport isPartialDeepEqual from '../../util/isPartialDeepEqual';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateCurrentStaking(global: GlobalState, update: Partial<GlobalState['currentStaking']>): GlobalState {\n  return {\n    ...global,\n    currentStaking: {\n      ...global.currentStaking,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentStaking(global: GlobalState) {\n  return {\n    ...global,\n    currentStaking: {\n      state: StakingState.None,\n    },\n  };\n}\n\nexport function updateAccountStaking(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<NonNullable<AccountState['staking']>>,\n  withDeepCompare = false,\n): GlobalState {\n  const currentStaking = selectAccountState(global, accountId)?.staking;\n\n  if (withDeepCompare && currentStaking && isPartialDeepEqual(currentStaking, partial)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentStaking,\n      ...partial,\n    },\n  });\n}\n\nexport function updateAccountStakingStatePartial(\n  global: GlobalState,\n  accountId: string,\n  partial: Partial<AccountState['staking']>,\n): GlobalState {\n  const currentState = selectAccountState(global, accountId)?.staking;\n\n  if (!currentState) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    staking: {\n      ...currentState,\n      ...partial,\n    },\n  });\n}\n\nexport function updateStakingDefault(global: GlobalState, state: ApiStakingState) {\n  return {\n    ...global,\n    stakingDefault: state,\n  };\n}\n","import type { AccountState, GlobalState } from '../types';\nimport { SignDataState, TransferState } from '../types';\n\nimport { selectCurrentAccountState } from '../selectors';\nimport { updateCurrentAccountState } from './misc';\n\nexport function updateDappConnectRequest(global: GlobalState, update: Partial<GlobalState['dappConnectRequest']>) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      ...update,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequestError(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: {\n      ...global.dappConnectRequest,\n      error: undefined,\n    },\n  } as GlobalState;\n}\n\nexport function clearDappConnectRequest(global: GlobalState) {\n  return {\n    ...global,\n    dappConnectRequest: undefined,\n  } as GlobalState;\n}\n\nexport function updateCurrentDappTransfer(global: GlobalState, update: Partial<GlobalState['currentDappTransfer']>) {\n  return {\n    ...global,\n    currentDappTransfer: {\n      ...global.currentDappTransfer,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappTransfer(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    currentDappTransfer: {\n      state: TransferState.None,\n    },\n  };\n}\n\nexport function updateCurrentDappSignData(global: GlobalState, update: Partial<GlobalState['currentDappSignData']>) {\n  return {\n    ...global,\n    currentDappSignData: {\n      ...global.currentDappSignData,\n      ...update,\n    },\n  };\n}\n\nexport function clearCurrentDappSignData(global: GlobalState): GlobalState {\n  return {\n    ...global,\n    currentDappSignData: {\n      state: SignDataState.None,\n    },\n  };\n}\n\nexport function updateConnectedDapps(global: GlobalState, update: AccountState['dapps']) {\n  return updateCurrentAccountState(global, { dapps: update });\n}\n\nexport function clearConnectedDapps(global: GlobalState) {\n  return updateCurrentAccountState(global, { dapps: undefined, dappLastOpenedDatesByUrl: undefined });\n}\n\nexport function removeConnectedDapp(global: GlobalState, url: string) {\n  const { dapps: connectedDapps, dappLastOpenedDatesByUrl } = selectCurrentAccountState(global) || {};\n  if (dappLastOpenedDatesByUrl) delete dappLastOpenedDatesByUrl[url];\n  return updateCurrentAccountState(global, {\n    dapps: connectedDapps!.filter((d) => d.url !== url),\n    dappLastOpenedDatesByUrl,\n  });\n}\n","import type { ApiActivity, ApiChain } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport {\n  getActivityTokenSlugs,\n  getIsActivityPending,\n  getIsActivitySuitableForFetchingTimestamp,\n  getIsTxIdLocal,\n  mergeActivityIdsToMaxTime,\n} from '../../util/activities';\nimport { compareActivities } from '../../util/compareActivities';\nimport { buildCollectionByKey, extractKey, mapValues, unique } from '../../util/iteratees';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\n/*\n  Used for the initial activities insertion into `global`.\n  Token activity IDs will just be replaced.\n */\nexport function putInitialActivities(\n  global: GlobalState,\n  accountId: string,\n  mainActivities: ApiActivity[],\n  bySlug: Record<string, ApiActivity[]>,\n) {\n  const allActivities = [...mainActivities, ...Object.values(bySlug).flat()];\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(allActivities, 'id') };\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain = mergeActivityIdsToMaxTime(extractKey(mainActivities, 'id'), idsMain ?? [], byId);\n\n  const newIdsBySlug = mapValues(bySlug, (_activities) => extractKey(_activities, 'id'));\n  idsBySlug = mergeIdsBySlug(idsBySlug, newIdsBySlug, byId);\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug(\n    { byId, idsBySlug, newestActivitiesBySlug },\n    Object.keys(newIdsBySlug),\n  );\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      idsBySlug,\n      newestActivitiesBySlug,\n    },\n  });\n}\n\nexport function addNewActivities(\n  global: GlobalState,\n  accountId: string,\n  newActivities: readonly ApiActivity[],\n  // Necessary when adding pending activities\n  chain?: ApiChain,\n) {\n  if (newActivities.length === 0) {\n    return global;\n  }\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug, localActivityIds, pendingActivityIds } = activities || {};\n\n  byId = { ...byId, ...buildCollectionByKey(newActivities, 'id') };\n\n  // Activities from different blockchains arrive separately, which causes the order to be disrupted\n  idsMain = mergeSortedActivityIds(idsMain ?? [], extractKey(newActivities, 'id'), byId);\n\n  const newIdsBySlug = buildActivityIdsBySlug(newActivities);\n  idsBySlug = mergeIdsBySlug(idsBySlug, newIdsBySlug, byId);\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug(\n    { byId, idsBySlug, newestActivitiesBySlug },\n    Object.keys(newIdsBySlug),\n  );\n\n  localActivityIds = unique([\n    ...(localActivityIds ?? []),\n    ...extractKey(newActivities, 'id').filter(getIsTxIdLocal)],\n  );\n\n  if (chain) {\n    pendingActivityIds = {\n      ...pendingActivityIds,\n      [chain]: unique([\n        ...(pendingActivityIds?.[chain] ?? []),\n        ...extractKey(\n          newActivities.filter((activity) => getIsActivityPending(activity) && !getIsTxIdLocal(activity.id)),\n          'id',\n        ),\n      ]),\n    };\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      idsMain,\n      byId,\n      idsBySlug,\n      newestActivitiesBySlug,\n      localActivityIds,\n      pendingActivityIds,\n    },\n  });\n}\n\nfunction buildActivityIdsBySlug(activities: readonly ApiActivity[]) {\n  return activities.reduce<Record<string, string[]>>((acc, activity) => {\n    for (const slug of getActivityTokenSlugs(activity)) {\n      acc[slug] ??= [];\n      acc[slug].push(activity.id);\n    }\n\n    return acc;\n  }, {});\n}\n\nexport function removeActivities(\n  global: GlobalState,\n  accountId: string,\n  _ids: Iterable<string>,\n) {\n  const { activities } = selectAccountState(global, accountId) || {};\n  if (!activities) {\n    return global;\n  }\n\n  const ids = new Set(_ids); // Don't use `_ids` again, because the iterable may be disposable\n  if (ids.size === 0) {\n    return global;\n  }\n\n  let { byId, idsBySlug, idsMain, newestActivitiesBySlug, localActivityIds, pendingActivityIds } = activities;\n  const affectedTokenSlugs = getActivityListTokenSlugs(ids, byId);\n\n  idsBySlug = { ...idsBySlug };\n  for (const tokenSlug of affectedTokenSlugs) {\n    if (tokenSlug in idsBySlug) {\n      idsBySlug[tokenSlug] = idsBySlug[tokenSlug].filter((id) => !ids.has(id));\n\n      if (!idsBySlug[tokenSlug].length) {\n        delete idsBySlug[tokenSlug];\n      }\n    }\n  }\n\n  newestActivitiesBySlug = getNewestActivitiesBySlug({ byId, idsBySlug, newestActivitiesBySlug }, affectedTokenSlugs);\n\n  idsMain = idsMain?.filter((id) => !ids.has(id));\n\n  byId = { ...byId };\n  for (const id of ids) {\n    delete byId[id];\n  }\n\n  localActivityIds = localActivityIds?.filter((id) => !ids.has(id));\n\n  pendingActivityIds = pendingActivityIds\n    && mapValues(pendingActivityIds, (pendingIds) => pendingIds.filter((id) => !ids.has(id)));\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId,\n      idsBySlug,\n      idsMain,\n      newestActivitiesBySlug,\n      localActivityIds,\n      pendingActivityIds,\n    },\n  });\n}\n\nexport function setIsInitialActivitiesLoadedTrue(global: GlobalState, accountId: string, chain: ApiChain) {\n  const { activities } = selectAccountState(global, accountId) ?? {};\n\n  if (activities?.isFirstTransactionsLoaded?.[chain]) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      byId: {},\n      ...activities,\n      isFirstTransactionsLoaded: {\n        ...activities?.isFirstTransactionsLoaded,\n        [chain]: true,\n      },\n    },\n  });\n}\n\nexport function updateActivity(global: GlobalState, accountId: string, activity: ApiActivity) {\n  const { id } = activity;\n\n  const { activities } = selectAccountState(global, accountId) || {};\n  const { byId } = activities ?? {};\n\n  if (!byId || !(id in byId)) {\n    return global;\n  }\n\n  return updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...byId,\n        [id]: activity,\n      },\n    },\n  });\n}\n\n/** Replaces all pending activities in the given account and chain */\nexport function replacePendingActivities(\n  global: GlobalState,\n  accountId: string,\n  chain: ApiChain,\n  pendingActivities: readonly ApiActivity[],\n) {\n  const { pendingActivityIds } = selectAccountState(global, accountId)?.activities || {};\n  global = removeActivities(global, accountId, pendingActivityIds?.[chain] ?? []);\n  global = addNewActivities(global, accountId, pendingActivities, chain);\n  return global;\n}\n\nfunction mergeSortedActivityIds(ids0: string[], ids1: string[], byId: Record<string, ApiActivity>) {\n  if (!ids0.length) return ids1;\n  if (!ids1.length) return ids0;\n  // Not the best performance, but ok for now\n  return unique([...ids0, ...ids1]).sort((id0, id1) => compareActivities(byId[id0], byId[id1]));\n}\n\nfunction getNewestActivitiesBySlug(\n  {\n    byId, idsBySlug, newestActivitiesBySlug,\n  }: Pick<Exclude<AccountState['activities'], undefined>, 'byId' | 'idsBySlug' | 'newestActivitiesBySlug'>,\n  tokenSlugs: Iterable<string>,\n) {\n  newestActivitiesBySlug = { ...newestActivitiesBySlug };\n\n  for (const tokenSlug of tokenSlugs) {\n    // The `idsBySlug` arrays must be sorted from the newest to the oldest\n    const ids = idsBySlug?.[tokenSlug] ?? [];\n    const newestActivityId = ids.find((id) => getIsActivitySuitableForFetchingTimestamp(byId[id]));\n    if (newestActivityId) {\n      newestActivitiesBySlug[tokenSlug] = byId[newestActivityId];\n    } else {\n      delete newestActivitiesBySlug[tokenSlug];\n    }\n  }\n\n  return newestActivitiesBySlug;\n}\n\nfunction getActivityListTokenSlugs(activityIds: Iterable<string>, byId: Record<string, ApiActivity>) {\n  const tokenSlugs = new Set<string>();\n\n  for (const id of activityIds) {\n    const activity = byId[id];\n    if (activity) {\n      for (const tokenSlug of getActivityTokenSlugs(activity)) {\n        tokenSlugs.add(tokenSlug);\n      }\n    }\n  }\n\n  return tokenSlugs;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentActivityId(global: GlobalState, accountId: string, replaceMap: Record<string, string>) {\n  const { currentActivityId } = selectAccountState(global, accountId) || {};\n  const newActivityId = currentActivityId && replaceMap[currentActivityId];\n  if (newActivityId !== currentActivityId) {\n    global = updateAccountState(global, accountId, { currentActivityId: newActivityId });\n  }\n  return global;\n}\n\nfunction mergeIdsBySlug(\n  oldIdsBySlug: Record<string, string[]> | undefined,\n  newIdsBySlug: Record<string, string[]>,\n  activityById: Record<string, ApiActivity>,\n) {\n  return {\n    ...oldIdsBySlug,\n    ...mapValues(newIdsBySlug, (newIds, slug) => {\n      // There may be newer local transactions in `idsBySlug`, so a sorting is needed\n      return mergeSortedActivityIds(newIds, oldIdsBySlug?.[slug] ?? [], activityById);\n    }),\n  };\n}\n","import type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nimport isEmptyObject from '../../util/isEmptyObject';\nimport { selectAccountState } from '../selectors';\nimport { updateAccountSettings, updateAccountState } from './misc';\n\nexport function addNft(global: GlobalState, accountId: string, nft: ApiNft, shouldAppendToEnd?: boolean) {\n  const nftAddress = nft.address;\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: { ...nfts?.byAddress, [nftAddress]: nft },\n      orderedAddresses: shouldAppendToEnd\n        ? orderedAddresses.concat(nftAddress)\n        : [nftAddress, ...orderedAddresses],\n    },\n  });\n}\n\nexport function removeNft(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const orderedAddresses = (nfts?.orderedAddresses ?? []).filter((address) => address !== nftAddress);\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n  const { [nftAddress]: removedNft, ...byAddress } = nfts?.byAddress ?? {};\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress,\n      orderedAddresses,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function updateNft(global: GlobalState, accountId: string, nftAddress: string, partial: Partial<ApiNft>) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const nft = nfts?.byAddress?.[nftAddress];\n  if (!nfts || !nft) return global;\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts,\n      byAddress: {\n        ...nfts.byAddress,\n        [nftAddress]: { ...nft, ...partial },\n      },\n    },\n  });\n}\n\nexport function addToSelectedAddresses(global: GlobalState, accountId: string, nftAddresses: string[]) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = [...(nfts?.selectedAddresses ?? []), ...nftAddresses];\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses,\n    },\n  });\n}\n\nexport function removeFromSelectedAddresses(global: GlobalState, accountId: string, nftAddress: string) {\n  const nfts = selectAccountState(global, accountId)!.nfts;\n  const selectedAddresses = (nfts?.selectedAddresses ?? []).filter((address) => address !== nftAddress);\n\n  return updateAccountState(global, accountId, {\n    nfts: {\n      ...nfts!,\n      selectedAddresses: selectedAddresses.length ? selectedAddresses : undefined,\n    },\n  });\n}\n\n// Updates the account settings to ensure the specified NFT is up-to-date.\nexport function updateAccountSettingsBackgroundNft(global: GlobalState, nft: ApiNft) {\n  Object.entries(global.settings.byAccountId).forEach(([accountId, settings]) => {\n    if (settings.cardBackgroundNft?.address === nft.address) {\n      global = updateAccountSettings(global, accountId, {\n        ...settings,\n        cardBackgroundNft: nft,\n      });\n    }\n  });\n\n  return global;\n}\n\nexport function addUnorderedNfts(\n  global: GlobalState,\n  accountId: string,\n  updatedNfts?: Record<string, ApiNft>,\n): GlobalState {\n  if (!updatedNfts || isEmptyObject(updatedNfts)) {\n    return global;\n  }\n\n  const { byAddress } = selectAccountState(global, accountId)?.nfts || { byAddress: {} };\n\n  Object.values(updatedNfts).forEach((nft) => {\n    const existingNft = byAddress?.[nft.address];\n    if (existingNft) {\n      global = updateNft(global, accountId, nft.address, nft);\n    } else {\n      global = addNft(global, accountId, nft, true);\n    }\n  });\n\n  return global;\n}\n","import type { ApiVestingInfo } from '../../api/types';\nimport type { AccountState, GlobalState } from '../types';\n\nimport { selectAccountState } from '../selectors';\nimport { updateAccountState } from './misc';\n\nexport function updateVestingInfo(global: GlobalState, accountId: string, update: ApiVestingInfo[]): GlobalState {\n  return updateVesting(global, accountId, {\n    info: update,\n  });\n}\n\nexport function updateVesting(\n  global: GlobalState,\n  accountId: string,\n  update: Partial<AccountState['vesting']>,\n): GlobalState {\n  return updateAccountState(global, accountId, {\n    vesting: {\n      ...selectAccountState(global, accountId)?.vesting || { info: [] },\n      ...update,\n    },\n  });\n}\n","import type { GlobalState } from '../types';\n\nexport function updateMintCards(\n  global: GlobalState,\n  update: Partial<GlobalState['currentMintCard']>,\n): GlobalState {\n  return {\n    ...global,\n    currentMintCard: {\n      ...global.currentMintCard,\n      ...update,\n    },\n  };\n}\n","import type { GlobalState } from '../types';\n\nexport function updateCurrentDomainRenewal(\n  global: GlobalState,\n  update: Partial<GlobalState['currentDomainRenewal']>,\n): GlobalState {\n  return {\n    ...global,\n    currentDomainRenewal: {\n      ...global.currentDomainRenewal,\n      ...update,\n    },\n  };\n}\n\nexport function updateCurrentDomainLinking(\n  global: GlobalState,\n  update: Partial<GlobalState['currentDomainLinking']>,\n): GlobalState {\n  return {\n    ...global,\n    currentDomainLinking: {\n      ...global.currentDomainLinking,\n      ...update,\n    },\n  };\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentDomainRenewalId(global: GlobalState, replaceMap: Record<string, string>) {\n  const oldTxId = global.currentDomainRenewal.txId;\n  const newTxId = oldTxId && replaceMap[oldTxId];\n  if (newTxId !== oldTxId) {\n    global = updateCurrentDomainRenewal(global, { txId: newTxId });\n  }\n  return global;\n}\n\n/** replaceMap: keys - old (removed) activity ids, value - new (added) activity ids */\nexport function replaceCurrentDomainLinkingId(global: GlobalState, replaceMap: Record<string, string>) {\n  const oldTxId = global.currentDomainLinking.txId;\n  const newTxId = oldTxId && replaceMap[oldTxId];\n  if (newTxId !== oldTxId) {\n    global = updateCurrentDomainLinking(global, { txId: newTxId });\n  }\n  return global;\n}\n","import type { GlobalState } from '../types';\n\nimport { INITIAL_STATE } from '../initialState';\n\nexport function updateHardware(global: GlobalState, hardwareUpdate: Partial<GlobalState['hardware']>) {\n  return {\n    ...global,\n    hardware: {\n      ...global.hardware,\n      ...hardwareUpdate,\n    },\n  };\n}\n\nexport function resetHardware(global: GlobalState) {\n  return {\n    ...global,\n    hardware: INITIAL_STATE.hardware,\n  };\n}\n","import { NativeBiometric } from '@capgo/capacitor-native-biometric';\n\nimport type { ApiNetwork } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { ApiAuthError, ApiCommonError } from '../../../api/types';\nimport { AppState, AuthState, BiometricsState } from '../../types';\n\nimport {\n  APP_NAME, IS_BIP39_MNEMONIC_ENABLED, IS_TELEGRAM_APP, MNEMONIC_CHECK_COUNT, MNEMONIC_COUNT,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { verifyIdentity as verifyTelegramBiometricIdentity } from '../../../util/authApi/telegram';\nimport webAuthn from '../../../util/authApi/webAuthn';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../../util/biometrics';\nimport { copyTextToClipboard } from '../../../util/clipboard';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isEmptyObject from '../../../util/isEmptyObject';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport { cloneDeep, compact } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { clearPoisoningCache } from '../../../util/poisoningHash';\nimport { pause } from '../../../util/schedulers';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  addActionHandler, getActions, getGlobal, setGlobal,\n} from '../..';\nimport { INITIAL_STATE } from '../../initialState';\nimport {\n  clearIsPinAccepted,\n  createAccount,\n  createAccountsFromGlobal,\n  setIsPinAccepted,\n  switchAccountAndClearGlobal,\n  updateAccounts,\n  updateAuth,\n  updateBiometrics,\n  updateCurrentAccountId,\n  updateCurrentAccountState,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccounts,\n  selectCurrentNetwork,\n  selectIsOneAccount,\n  selectIsPasswordPresent,\n  selectNetworkAccountsMemoized,\n  selectNewestActivityTimestamps,\n} from '../../selectors';\n\nconst CREATING_DURATION = 3300;\nconst NATIVE_BIOMETRICS_PAUSE_MS = 750;\n\nexport async function switchAccount(global: GlobalState, accountId: string, newNetwork?: ApiNetwork) {\n  if (accountId === global.currentAccountId) {\n    return;\n  }\n\n  const actions = getActions();\n\n  const newestActivityTimestamps = selectNewestActivityTimestamps(global, accountId);\n  await callApi('activateAccount', accountId, newestActivityTimestamps);\n\n  global = getGlobal();\n  setGlobal(switchAccountAndClearGlobal(global, accountId));\n\n  clearPoisoningCache();\n\n  if (newNetwork) {\n    actions.changeNetwork({ network: newNetwork });\n  }\n}\n\naddActionHandler('resetAuth', (global) => {\n  if (global.currentAccountId) {\n    global = { ...global, appState: AppState.Main };\n\n    // Restore the network when refreshing the page during the switching networks\n    global = updateSettings(global, {\n      isTestnet: parseAccountId(global.currentAccountId!).network === 'testnet',\n    });\n  }\n\n  global = { ...global, auth: cloneDeep(INITIAL_STATE.auth) };\n\n  setGlobal(global);\n});\n\naddActionHandler('startCreatingWallet', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const nextAuthState = isPasswordPresent\n    ? AuthState.createBackup\n    : (isFirstAccount\n      ? AuthState.createWallet\n      // The app only has hardware wallets accounts, which means we need to create a password or biometrics\n      : getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  global = getGlobal();\n\n  if (isPasswordPresent && !global.auth.password) {\n    setGlobal(updateAuth(global, {\n      state: AuthState.checkPassword,\n      error: undefined,\n    }));\n    return;\n  }\n\n  const promiseCalls = [\n    callApi('generateMnemonic', IS_BIP39_MNEMONIC_ENABLED && !global.auth.forceAddingTonOnlyAccount),\n    ...(!isPasswordPresent ? [pause(CREATING_DURATION)] : []),\n  ] as [Promise<Promise<string[]> | undefined>, Promise<void> | undefined];\n\n  setGlobal(\n    updateAuth(global, {\n      state: nextAuthState,\n      method: 'createAccount',\n      error: undefined,\n    }),\n  );\n\n  const [mnemonic] = await Promise.all(promiseCalls);\n\n  global = updateAuth(getGlobal(), {\n    mnemonic,\n    mnemonicCheckIndexes: selectMnemonicForCheck(mnemonic?.length ?? MNEMONIC_COUNT),\n  });\n\n  if (isPasswordPresent) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n\n  if (isFirstAccount) {\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('startCreatingBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: global.auth.method !== 'createAccount'\n      ? AuthState.importWalletConfirmBiometrics\n      : AuthState.confirmBiometrics,\n    biometricsStep: 1,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelCreateBiometrics', (global) => {\n  global = updateAuth(global, {\n    state: AuthState.createBiometrics,\n    biometricsStep: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('createPin', (global, actions, { pin, isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletConfirmPin : AuthState.confirmPin,\n    password: pin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('confirmPin', (global, actions, { isImporting }) => {\n  if (getIsNativeBiometricAuthSupported()) {\n    global = updateAuth(global, {\n      state: isImporting ? AuthState.importWalletCreateNativeBiometrics : AuthState.createNativeBiometrics,\n    });\n    setGlobal(global);\n  } else {\n    actions.skipCreateNativeBiometrics();\n  }\n});\n\naddActionHandler('cancelConfirmPin', (global, actions, { isImporting }) => {\n  global = updateAuth(global, {\n    state: isImporting ? AuthState.importWalletCreatePin : AuthState.createPin,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelDisclaimer', (global) => {\n  setGlobal(updateAuth(global, {\n    state: getDoesUsePinPad()\n      ? AuthState.createPin\n      : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword),\n  }));\n});\n\naddActionHandler('afterCreatePassword', (global, actions, { password, isPasswordNumeric }) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { method } = getGlobal().auth;\n\n  const isImporting = method !== 'createAccount';\n  const isHardware = method === 'importHardwareWallet';\n\n  if (isHardware) {\n    actions.createHardwareAccounts();\n    return;\n  }\n\n  actions.createAccount({ password, isImporting, isPasswordNumeric });\n});\n\naddActionHandler('afterCreateBiometrics', async (global, actions) => {\n  const withCredential = !IS_ELECTRON;\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n    biometricsStep: withCredential ? 1 : undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const credential = withCredential\n      ? await webAuthn.createCredential()\n      : undefined;\n    global = getGlobal();\n    global = updateAuth(global, { biometricsStep: withCredential ? 2 : undefined });\n    setGlobal(global);\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      biometricsStep: undefined,\n    });\n\n    if (!result) {\n      global = updateAuth(global, { error: 'Biometric setup failed.' });\n      setGlobal(global);\n\n      return;\n    }\n\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: result.password });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n      biometricsStep: undefined,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateBiometrics', (global) => {\n  global = updateAuth(global, { state: AuthState.createPassword });\n  setGlobal(global);\n});\n\naddActionHandler('afterCreateNativeBiometrics', async (global, actions) => {\n  global = updateAuth(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  try {\n    const { password } = global.auth;\n    const result = await authApi.setupNativeBiometrics(password!);\n\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: false });\n    global = updateSettings(global, { authConfig: result.config });\n    setGlobal(global);\n\n    actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateAuth(global, {\n      isLoading: false,\n      error,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('skipCreateNativeBiometrics', (global, actions) => {\n  const { password } = global.auth;\n\n  global = updateAuth(global, { isLoading: false, error: undefined });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n\n  actions.afterCreatePassword({ password: password!, isPasswordNumeric: true });\n});\n\naddActionHandler('createAccount', async (global, actions, {\n  password, isImporting, isPasswordNumeric, version,\n}) => {\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const network = selectCurrentNetwork(getGlobal());\n\n  const result = await callApi(\n    isImporting ? 'importMnemonic' : 'createWallet',\n    network,\n    global.auth.mnemonic!,\n    password,\n    version,\n  );\n\n  global = getGlobal();\n\n  if (!result || 'error' in result) {\n    setGlobal(updateAuth(global, { isLoading: undefined }));\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  const { accountId, addressByChain, secondNetworkAccount } = result;\n\n  if (!isImporting) {\n    global = { ...global, appState: AppState.Auth, isAddAccountModalOpen: undefined };\n  }\n  global = updateAuth(global, {\n    isLoading: undefined,\n    password: undefined,\n    firstNetworkAccount: {\n      addressByChain,\n      accountId,\n    },\n    secondNetworkAccount,\n    ...(isPasswordNumeric && { isPasswordNumeric: true }),\n  });\n  global = clearIsPinAccepted(global);\n\n  if (isImporting) {\n    const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n    if (hasAccounts) {\n      setGlobal(global);\n      actions.afterConfirmDisclaimer();\n\n      return;\n    } else {\n      global = updateAuth(global, { state: AuthState.disclaimer });\n    }\n  } else {\n    const accounts = selectAccounts(global) ?? {};\n    const isFirstAccount = isEmptyObject(accounts);\n    global = updateAuth(global, {\n      state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('createHardwareAccounts', async (global, actions) => {\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n\n  setGlobal(updateAuth(global, { isLoading: true }));\n\n  const { hardwareSelectedIndices = [] } = getGlobal().auth;\n  const network = selectCurrentNetwork(getGlobal());\n\n  const ledgerApi = await import('../../../util/ledger');\n  const wallets = await Promise.all(\n    hardwareSelectedIndices.map(\n      (wallet) => ledgerApi.importLedgerWallet(network, wallet),\n    ),\n  );\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isFirstAccount) {\n    callActionInMain('addHardwareAccounts', { wallets });\n    return;\n  }\n\n  actions.addHardwareAccounts({ wallets });\n});\n\naddActionHandler('addHardwareAccounts', (global, actions, { wallets }) => {\n  const isFirstAccount = !global.currentAccountId;\n  const nextActiveAccountId = wallets[0]?.accountId;\n  if (nextActiveAccountId) {\n    void callApi('activateAccount', nextActiveAccountId);\n  }\n\n  const updatedGlobal = wallets.reduce((currentGlobal, wallet) => {\n    if (!wallet) {\n      return currentGlobal;\n    }\n    const { accountId, address, walletInfo } = wallet;\n    const addressByChain = { ton: address };\n\n    currentGlobal = updateCurrentAccountId(currentGlobal, accountId);\n    currentGlobal = createAccount({\n      global: currentGlobal,\n      accountId,\n      addressByChain,\n      type: 'hardware',\n      partial: {\n        ...(walletInfo && {\n          ledger: {\n            driver: walletInfo.driver,\n            index: walletInfo.index,\n          },\n        }),\n      },\n    });\n\n    return currentGlobal;\n  }, getGlobal());\n\n  if (nextActiveAccountId) {\n    global = updateCurrentAccountId(updatedGlobal, nextActiveAccountId);\n  }\n  global = updateAuth(global, { isLoading: false });\n  global = {\n    ...global,\n    shouldForceAccountEdit: true,\n  };\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  wallets.forEach((hardwareWallet) => {\n    if (hardwareWallet?.accountId) {\n      actions.tryAddNotificationAccount({ accountId: hardwareWallet?.accountId });\n    }\n  });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('afterCheckMnemonic', (global, actions) => {\n  global = createAccountsFromGlobal(global);\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('restartCheckMnemonicIndexes', (global, actions, { worldsCount }) => {\n  setGlobal(\n    updateAuth(global, {\n      mnemonicCheckIndexes: selectMnemonicForCheck(worldsCount),\n    }),\n  );\n});\n\naddActionHandler('skipCheckMnemonic', (global, actions) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('skipCheckMnemonic');\n    return;\n  }\n\n  global = createAccountsFromGlobal(global);\n  global = updateCurrentAccountId(global, global.auth.firstNetworkAccount!.accountId);\n  global = updateCurrentAccountState(global, { isBackupRequired: true });\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: global.auth.firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('startImportingWallet', (global) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const state = isPasswordPresent && !global.auth.password\n    ? AuthState.importWalletCheckPassword\n    : AuthState.importWallet;\n\n  setGlobal(\n    updateAuth(global, {\n      state,\n      error: undefined,\n      method: 'importMnemonic',\n    }),\n  );\n});\n\naddActionHandler('openAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.about, error: undefined }));\n});\n\naddActionHandler('closeAbout', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('afterImportMnemonic', async (global, actions, { mnemonic }) => {\n  mnemonic = compact(mnemonic);\n\n  if (!isMnemonicPrivateKey(mnemonic)) {\n    if (!await callApi('validateMnemonic', mnemonic)) {\n      setGlobal(updateAuth(getGlobal(), {\n        error: ApiAuthError.InvalidMnemonic,\n      }));\n\n      return;\n    }\n  }\n\n  global = getGlobal();\n\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const hasAccounts = Object.keys(selectAccounts(global) || {}).length > 0;\n  const state = getDoesUsePinPad()\n    ? AuthState.importWalletCreatePin\n    : (IS_BIOMETRIC_AUTH_SUPPORTED\n      ? AuthState.importWalletCreateBiometrics\n      : AuthState.importWalletCreatePassword);\n\n  global = updateAuth(global, {\n    mnemonic,\n    error: undefined,\n    ...(!isPasswordPresent && { state }),\n  });\n  setGlobal(global);\n\n  if (!isPasswordPresent) {\n    if (!hasAccounts) {\n      actions.requestConfetti();\n    }\n\n    void vibrateOnSuccess();\n  } else {\n    actions.confirmDisclaimer();\n  }\n});\n\naddActionHandler('confirmDisclaimer', (global, actions) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n\n  if (isPasswordPresent) {\n    setGlobal(global);\n    actions.afterCreatePassword({ password: global.auth.password! });\n\n    return;\n  }\n\n  actions.afterConfirmDisclaimer();\n});\n\naddActionHandler('afterConfirmDisclaimer', (global, actions) => {\n  const { firstNetworkAccount } = global.auth;\n\n  global = createAccountsFromGlobal(global, true);\n  global = updateCurrentAccountId(global, firstNetworkAccount!.accountId);\n  global = updateAuth(global, { state: AuthState.ready });\n  setGlobal(global);\n\n  actions.tryAddNotificationAccount({ accountId: firstNetworkAccount!.accountId });\n\n  actions.afterSignIn();\n  if (selectIsOneAccount(global)) {\n    actions.resetApiSettings();\n  }\n});\n\naddActionHandler('cleanAuthError', (global) => {\n  setGlobal(updateAuth(global, { error: undefined }));\n});\n\nexport function selectMnemonicForCheck(worldsCount: number) {\n  return Array(worldsCount)\n    .fill(0)\n    .map((_, i) => ({ i, rnd: Math.random() }))\n    .sort((a, b) => a.rnd - b.rnd)\n    .map((i) => i.i)\n    .slice(0, Math.min(MNEMONIC_CHECK_COUNT, worldsCount))\n    .sort((a, b) => a - b);\n}\n\naddActionHandler('startChangingNetwork', (global, actions, { network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startChangingNetwork', { network });\n  }\n\n  const accountIds = Object.keys(selectNetworkAccountsMemoized(network, global.accounts!.byId)!);\n\n  if (accountIds.length) {\n    const accountId = accountIds[0];\n    actions.switchAccount({ accountId, newNetwork: network });\n  } else {\n    setGlobal({\n      ...global,\n      areSettingsOpen: false,\n      appState: AppState.Auth,\n    });\n    actions.changeNetwork({ network });\n  }\n});\n\naddActionHandler('switchAccount', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccount', payload);\n    return;\n  }\n\n  const { accountId, newNetwork } = payload;\n  await switchAccount(global, accountId, newNetwork);\n});\n\naddActionHandler('afterSelectHardwareWallets', (global, actions, { hardwareSelectedIndices }) => {\n  setGlobal(updateAuth(global, {\n    method: 'importHardwareWallet',\n    hardwareSelectedIndices,\n    error: undefined,\n  }));\n\n  actions.afterCreatePassword({ password: '' });\n});\n\naddActionHandler('enableBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    error: undefined,\n    state: BiometricsState.TurnOnRegistration,\n  });\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    const credential = IS_ELECTRON\n      ? undefined\n      : await webAuthn.createCredential();\n\n    global = getGlobal();\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnVerification });\n    setGlobal(global);\n\n    const result = await authApi.setupBiometrics({ credential });\n\n    global = getGlobal();\n    if (!result) {\n      global = updateBiometrics(global, {\n        error: 'Biometric setup failed.',\n        state: BiometricsState.TurnOnPasswordConfirmation,\n      });\n      setGlobal(global);\n\n      return;\n    }\n    global = updateBiometrics(global, { state: BiometricsState.TurnOnComplete });\n    setGlobal(global);\n\n    await callApi('changePassword', password, result.password);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n\n    setGlobal(global);\n    actions.setInMemoryPassword({ password: undefined, force: true });\n  } catch (err: any) {\n    const error = err?.message.includes('privacy-considerations-client')\n      ? 'Biometric setup failed.'\n      : (err?.message || 'Biometric setup failed.');\n    global = getGlobal();\n    global = updateBiometrics(global, {\n      error,\n      state: BiometricsState.TurnOnPasswordConfirmation,\n    });\n    setGlobal(global);\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('disableBiometrics', async (global, actions, { password, isPasswordNumeric }) => {\n  const { password: oldPassword } = global.biometrics;\n\n  if (!password || !oldPassword) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAuth(global, { isLoading: true });\n  setGlobal(global);\n\n  try {\n    await callApi('changePassword', oldPassword, password);\n  } catch (err: any) {\n    global = getGlobal();\n    global = updateBiometrics(global, { error: err?.message || 'Failed to disable biometrics.' });\n    setGlobal(global);\n\n    return;\n  } finally {\n    global = getGlobal();\n    global = updateAuth(global, { isLoading: undefined });\n    setGlobal(global);\n  }\n\n  global = getGlobal();\n  global = updateBiometrics(global, {\n    state: BiometricsState.TurnOffComplete,\n    error: undefined,\n  });\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('closeBiometricSettings', (global) => {\n  global = { ...global, biometrics: cloneDeep(INITIAL_STATE.biometrics) };\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOn', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOnPasswordConfirmation });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOffWarning', (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffWarning });\n\n  setGlobal(global);\n});\n\naddActionHandler('openBiometricsTurnOff', async (global) => {\n  global = updateBiometrics(global, { state: BiometricsState.TurnOffBiometricConfirmation });\n  setGlobal(global);\n\n  const password = await authApi.getPassword(global.settings.authConfig!);\n  global = getGlobal();\n\n  if (!password) {\n    global = updateBiometrics(global, { error: 'Biometric confirmation failed.' });\n  } else {\n    global = updateBiometrics(global, {\n      state: BiometricsState.TurnOffCreatePassword,\n      password,\n    });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('disableNativeBiometrics', (global) => {\n  global = updateSettings(global, {\n    authConfig: { kind: 'password' },\n    isPasswordNumeric: true,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('enableNativeBiometrics', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: 'Incorrect code, please try again.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    return;\n  }\n\n  global = getGlobal();\n\n  global = setIsPinAccepted(global);\n  global = {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n  setGlobal(global);\n\n  try {\n    let isVerified: boolean;\n\n    if (IS_TELEGRAM_APP) {\n      const verificationResult = await verifyTelegramBiometricIdentity();\n      isVerified = verificationResult.success;\n    } else {\n      isVerified = await NativeBiometric.verifyIdentity({\n        title: APP_NAME,\n        subtitle: '',\n        maxAttempts: 1,\n      })\n        .then(() => true)\n        .catch(() => false);\n    }\n\n    if (!isVerified) {\n      global = getGlobal();\n      global = {\n        ...global,\n        nativeBiometricsError: 'Failed to enable biometrics.',\n      };\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n      void vibrateOnError();\n\n      return;\n    }\n\n    const result = await authApi.setupNativeBiometrics(password);\n\n    await pause(NATIVE_BIOMETRICS_PAUSE_MS);\n\n    global = getGlobal();\n    global = updateSettings(global, { authConfig: result.config });\n    global = { ...global, nativeBiometricsError: undefined };\n    setGlobal(global);\n    actions.setInMemoryPassword({ password: undefined, force: true });\n\n    void vibrateOnSuccess();\n  } catch (err: any) {\n    global = getGlobal();\n    global = {\n      ...global,\n      nativeBiometricsError: err?.message || 'Failed to enable biometrics.',\n    };\n    global = clearIsPinAccepted(global);\n    setGlobal(global);\n\n    void vibrateOnError();\n  }\n});\n\naddActionHandler('clearNativeBiometricsError', (global) => {\n  return {\n    ...global,\n    nativeBiometricsError: undefined,\n  };\n});\n\naddActionHandler('openAuthBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAuthBackupWalletModal');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.safetyRules });\n  setGlobal(global);\n});\n\naddActionHandler('openMnemonicPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openMnemonicPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.mnemonicPage });\n  setGlobal(global);\n});\n\naddActionHandler('openCreateBackUpPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCreateBackUpPage');\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n\n  const isFirstAccount = isEmptyObject(accounts);\n  global = updateAuth(global, {\n    state: isFirstAccount ? AuthState.disclaimerAndBackup : AuthState.createBackup,\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('openCheckWordsPage', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openCheckWordsPage');\n    return;\n  }\n\n  global = updateAuth(global, { state: AuthState.checkWords });\n  setGlobal(global);\n});\n\naddActionHandler('closeCheckWordsPage', (global, actions, props) => {\n  const { isBackupCreated } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeCheckWordsPage', props);\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && isBackupCreated) {\n    actions.afterCheckMnemonic();\n  }\n});\n\naddActionHandler('copyStorageData', async (global, actions) => {\n  const accountConfigJson = await callApi('fetchAccountConfigForDebugPurposesOnly');\n\n  if (accountConfigJson) {\n    const storageData = JSON.stringify({\n      ...JSON.parse(accountConfigJson),\n      global: reduceGlobalForDebug(),\n    });\n\n    await copyTextToClipboard(storageData);\n\n    actions.showNotification({ message: getTranslation('Copied') });\n  } else {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  }\n});\n\naddActionHandler('importAccountByVersion', async (global, actions, { version }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importAccountByVersion', { version });\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n\n  const wallet = (await callApi('importNewWalletVersion', accountId, version))!;\n  global = getGlobal();\n\n  if (!wallet.isNew) {\n    actions.switchAccount({ accountId: wallet.accountId });\n    return;\n  }\n\n  const { title: currentWalletTitle, type } = selectAccount(global, accountId)!;\n  const addressByChain = { ton: wallet.address };\n  global = updateCurrentAccountId(global, wallet.accountId);\n\n  const ledgerInfo = wallet.ledger ? {\n    ledger: wallet.ledger,\n  } : undefined;\n\n  global = createAccount({\n    global,\n    accountId: wallet.accountId,\n    type,\n    addressByChain,\n    partial: { ...ledgerInfo, title: currentWalletTitle },\n    titlePostfix: version,\n  });\n  setGlobal(global);\n\n  await callApi('activateAccount', wallet.accountId);\n\n  actions.tryAddNotificationAccount({ accountId: wallet.accountId });\n});\n\naddActionHandler('setIsAuthLoading', (global, actions, { isLoading }) => {\n  global = updateAuth(global, { isLoading });\n  setGlobal(global);\n});\n\naddActionHandler('importViewAccount', async (global, actions, { addressByChain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('importViewAccount', { addressByChain });\n    return;\n  }\n\n  const accounts = selectAccounts(global) ?? {};\n  const isFirstAccount = isEmptyObject(accounts);\n  const network = selectCurrentNetwork(getGlobal());\n  if (isFirstAccount) {\n    global = updateAuth(global, { isLoading: true });\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      callActionInNative('setIsAccountLoading', { isLoading: true });\n    }\n  }\n  setGlobal(global);\n\n  const result = await callApi('importViewAccount', network, addressByChain);\n\n  global = getGlobal();\n  if (isFirstAccount) {\n    global = updateAuth(global, { isLoading: undefined });\n  } else {\n    global = updateAccounts(global, { isLoading: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      callActionInNative('setIsAccountLoading', { isLoading: undefined });\n    }\n  }\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = createAccount({\n    global,\n    accountId: result.accountId,\n    addressByChain: result.resolvedAddresses,\n    type: 'view',\n    partial: { title: result.title },\n  });\n  global = updateCurrentAccountId(global, result.accountId);\n  setGlobal(global);\n\n  if (getGlobal().areSettingsOpen) {\n    actions.closeSettings();\n  }\n\n  actions.tryAddNotificationAccount({ accountId: result.accountId });\n\n  actions.afterSignIn();\n  if (isFirstAccount) {\n    actions.resetApiSettings();\n    actions.requestConfetti();\n  } else {\n    actions.closeAddAccountModal();\n  }\n  void vibrateOnSuccess();\n});\n\naddActionHandler('startImportViewAccount', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.importViewAccount, error: undefined }));\n});\n\naddActionHandler('closeImportViewAccount', (global) => {\n  setGlobal(updateAuth(global, { state: AuthState.none, error: undefined }));\n});\n\naddActionHandler('openAuthImportWalletModal', (global) => {\n  global = updateAuth(global, { isImportModalOpen: true });\n  setGlobal(global);\n});\n\naddActionHandler('closeAuthImportWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAuthImportWalletModal');\n  }\n\n  global = updateAuth(global, { isImportModalOpen: undefined });\n  setGlobal(global);\n});\n\nfunction reduceGlobalForDebug() {\n  const reduced = cloneDeep(getGlobal());\n\n  reduced.tokenInfo = {} as any;\n  reduced.swapTokenInfo = {} as any;\n  Object.entries(reduced.byAccountId).forEach(([, state]) => {\n    state.activities = {} as any;\n  });\n\n  return reduced;\n}\n","import type { ApiChain, ApiSwapAsset, ApiTokenWithPrice, ApiTransaction } from '../../api/types';\nimport type { Account, UserSwapToken } from '../types';\n\nimport { CHAIN_CONFIG, TINY_TRANSFER_MAX_COST, TONCOIN } from '../../config';\nimport { isScamTransaction } from '../../util/activities';\nimport { toBig } from '../../util/decimals';\n\nexport function getIsTinyOrScamTransaction(transaction: ApiTransaction, token?: ApiTokenWithPrice) {\n  if (isScamTransaction(transaction)) return true;\n  if (!token || transaction.nft || transaction.type) return false;\n\n  const cost = toBig(transaction.amount, token.decimals).abs().mul(token.priceUsd ?? 0);\n  return cost.lt(TINY_TRANSFER_MAX_COST);\n}\n\nexport function resolveSwapAssetId(asset: ApiSwapAsset) {\n  return asset.slug === TONCOIN.slug ? asset.symbol : (asset.tokenAddress ?? asset.slug);\n}\n\nexport function resolveSwapAsset(bySlug: Record<string, ApiSwapAsset>, anyId: string) {\n  return bySlug[anyId] ?? Object.values(bySlug).find(({ tokenAddress }) => tokenAddress === anyId);\n}\n\nexport function getIsSupportedChain(chain?: string): chain is ApiChain {\n  return chain as ApiChain in CHAIN_CONFIG;\n}\n\nexport function getIsInternalSwap({\n  from,\n  to,\n  toAddress,\n  addressByChain,\n}: {\n  from?: UserSwapToken | ApiSwapAsset;\n  to?: UserSwapToken | ApiSwapAsset;\n  toAddress?: string;\n  addressByChain?: Account['addressByChain'];\n}) {\n  const isMultichain = Boolean(addressByChain?.tron);\n  return (from?.chain === 'ton' && to?.chain === 'ton') || (\n    isMultichain && from && to && addressByChain\n    && getIsSupportedChain(from.chain)\n    && addressByChain[to.chain as ApiChain] === toAddress\n  );\n}\n","import type { ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState, PriceHistoryPeriods } from '../types';\n\nexport function updateTokenPriceHistory(global: GlobalState, slug: string, partial: PriceHistoryPeriods): GlobalState {\n  const { bySlug } = global.tokenPriceHistory;\n\n  return {\n    ...global,\n    tokenPriceHistory: {\n      bySlug: {\n        ...bySlug,\n        [slug]: {\n          ...bySlug[slug],\n          ...partial,\n        },\n      },\n    },\n  };\n}\n\nexport function updateTokenInfo(global: GlobalState, partial: Record<string, ApiTokenWithPrice>): GlobalState {\n  return {\n    ...global,\n    tokenInfo: {\n      ...global.tokenInfo,\n      bySlug: {\n        ...global.tokenInfo.bySlug,\n        ...partial,\n      },\n    },\n  };\n}\n","import type { ApiStakingType } from '../../api/types';\n\nimport { DEFAULT_FEE } from '../../config';\nimport { TON_GAS, TON_GAS_REAL } from '../../api/chains/ton/constants';\n\ntype TonOperationFees = {\n  gas: bigint;\n  real: bigint;\n};\n\nexport default function getTonOperationFees(operation: keyof typeof TON_GAS_REAL): TonOperationFees {\n  return {\n    gas: TON_GAS[operation] + DEFAULT_FEE,\n    real: TON_GAS_REAL[operation],\n  };\n}\n\nexport function getTonStakingFees(type?: ApiStakingType): {\n  stake: TonOperationFees;\n  unstake: TonOperationFees;\n  claim?: TonOperationFees;\n} {\n  switch (type) {\n    case 'nominators': {\n      return {\n        stake: getTonOperationFees('stakeNominators'),\n        unstake: getTonOperationFees('unstakeNominators'),\n      };\n    }\n    case 'liquid': {\n      return {\n        stake: getTonOperationFees('stakeLiquid'),\n        unstake: getTonOperationFees('unstakeLiquid'),\n      };\n    }\n    case 'jetton': {\n      return {\n        stake: getTonOperationFees('stakeJettons'),\n        unstake: getTonOperationFees('unstakeJettons'),\n        claim: getTonOperationFees('claimJettons'),\n      };\n    }\n    case 'ethena': {\n      return {\n        stake: getTonOperationFees('stakeEthena'),\n        unstake: getTonOperationFees('unstakeEthena'),\n        claim: getTonOperationFees('unstakeEthenaLocked'),\n      };\n    }\n  }\n\n  return {\n    stake: { gas: 0n, real: 0n },\n    unstake: { gas: 0n, real: 0n },\n    claim: { gas: 0n, real: 0n },\n  };\n}\n","import type { ApiStakingState, ApiStakingType } from '../../api/types';\n\nimport {\n  ETHENA_STAKING_MIN_AMOUNT,\n  MIN_ACTIVE_STAKING_REWARDS,\n  NOMINATORS_STAKING_MIN_AMOUNT,\n  STAKING_MIN_AMOUNT,\n} from '../../config';\n\nexport function getStakingMinAmount(type?: ApiStakingType) {\n  switch (type) {\n    case 'nominators':\n      return NOMINATORS_STAKING_MIN_AMOUNT;\n    case 'ethena':\n      return ETHENA_STAKING_MIN_AMOUNT;\n    default:\n      return STAKING_MIN_AMOUNT;\n  }\n}\n\nexport function getUnstakeTime(state?: ApiStakingState) {\n  switch (state?.type) {\n    case 'nominators':\n    case 'liquid':\n      return state.end;\n    case 'ethena':\n      return state.unlockTime;\n    default:\n      return undefined;\n  }\n}\n\nexport function getStakingTitle(stakingType?: ApiStakingState['type']) {\n  return stakingType === 'ethena' ? 'How does it work?' : 'Why this is safe';\n}\n\nexport type StakingStateStatus = 'inactive' | 'active' | 'unstakeRequested' | 'readyToClaim';\n\nexport function getStakingStateStatus(state: ApiStakingState): StakingStateStatus {\n  if (state.unstakeRequestAmount) {\n    if (state.type === 'ethena' && state.unlockTime && state.unlockTime <= Date.now()) {\n      return 'readyToClaim';\n    }\n\n    return 'unstakeRequested';\n  }\n  if (getIsActiveStakingState(state)) {\n    return 'active';\n  }\n  return 'inactive';\n}\n\nexport function getIsActiveStakingState(state: ApiStakingState) {\n  return Boolean(\n    state.balance\n    || state.unstakeRequestAmount\n    || ('unclaimedRewards' in state && state.unclaimedRewards > MIN_ACTIVE_STAKING_REWARDS),\n  );\n}\n\nexport function getIsLongUnstake(state: ApiStakingState, amount?: bigint): boolean | undefined {\n  switch (state.type) {\n    case 'nominators': {\n      return true;\n    }\n    case 'liquid': {\n      return amount === undefined ? false : amount > state.instantAvailable;\n    }\n    case 'jetton': {\n      return false;\n    }\n    case 'ethena': {\n      return true;\n    }\n  }\n\n  return undefined;\n}\n\nexport function getFullStakingBalance(state: ApiStakingState): bigint {\n  switch (state.type) {\n    case 'jetton': {\n      return state.balance + state.unclaimedRewards;\n    }\n    case 'ethena': {\n      return state.balance + state.unstakeRequestAmount;\n    }\n  }\n\n  return state.balance;\n}\n","import type {\n  ApiActivity,\n  ApiSwapAsset,\n  ApiToken,\n  ApiTokenWithPrice,\n} from '../../../api/types';\n\nimport { getIsActivitySuitableForFetchingTimestamp } from '../../../util/activities';\nimport { compareActivities } from '../../../util/compareActivities';\nimport {\n  buildCollectionByKey, extractKey, findLast, unique,\n} from '../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { onTickEnd, pause } from '../../../util/schedulers';\nimport { buildUserToken } from '../../../util/tokens';\nimport { callApi } from '../../../api';\nimport { getIsTinyOrScamTransaction } from '../../helpers';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  changeBalance,\n  updateAccountState,\n  updateActivitiesIsHistoryEndReached,\n  updateActivitiesIsLoading,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentSignature,\n  updateSettings,\n} from '../../reducers';\nimport { updateTokenInfo } from '../../reducers/tokens';\nimport {\n  selectAccountState,\n  selectAccountTxTokenSlugs,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectLastMainTxTimestamp,\n  selectToken,\n} from '../../selectors';\n\nconst IMPORT_TOKEN_PAUSE = 250;\n\naddActionHandler('fetchTokenTransactions', async (global, actions, { limit, slug, shouldLoadWithBudget }) => {\n  global = updateActivitiesIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  let { idsBySlug = {}, byId = {} } = selectAccountState(global, accountId)?.activities || {};\n  let shouldFetchMore = true;\n  let fetchedActivities: ApiActivity[] = [];\n  let tokenIds = idsBySlug[slug] || [];\n  const toTxId = findLast(tokenIds, (id) => getIsActivitySuitableForFetchingTimestamp(byId[id]));\n  let toTimestamp = toTxId ? byId[toTxId].timestamp : undefined;\n  const { chain } = selectToken(global, slug);\n\n  while (shouldFetchMore) {\n    const result = await callApi('fetchActivitySlice', accountId, chain, slug, toTimestamp, limit);\n\n    global = getGlobal();\n\n    if (!result || 'error' in result) {\n      break;\n    }\n\n    if (!result.length) {\n      global = updateActivitiesIsHistoryEndReached(global, true, slug);\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities = fetchedActivities.concat(result);\n    shouldFetchMore = filteredResult.length < limit && fetchedActivities.length < limit;\n\n    tokenIds = unique(tokenIds.concat(filteredResult.map((tx) => tx.id)));\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  fetchedActivities.sort(compareActivities);\n\n  global = updateActivitiesIsLoading(global, false);\n\n  const newById = buildCollectionByKey(fetchedActivities, 'id');\n  const newOrderedIds = Object.keys(newById);\n  const currentActivities = selectAccountState(global, accountId)?.activities;\n  byId = { ...(currentActivities?.byId || {}), ...newById };\n\n  idsBySlug = currentActivities?.idsBySlug || {};\n  tokenIds = unique((idsBySlug[slug] || []).concat(newOrderedIds));\n\n  tokenIds.sort((a, b) => compareActivities(byId[a], byId[b]));\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...currentActivities,\n      byId,\n      idsBySlug: { ...idsBySlug, [slug]: tokenIds },\n    },\n  });\n\n  setGlobal(global);\n\n  if (shouldLoadWithBudget) {\n    onTickEnd(() => {\n      actions.fetchTokenTransactions({ limit, slug });\n    });\n  }\n});\n\naddActionHandler('fetchAllTransactions', async (global, actions, { limit, shouldLoadWithBudget }) => {\n  global = updateActivitiesIsLoading(global, true);\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n\n  const tronTokenSlugs = selectAccountTxTokenSlugs(global, accountId, 'tron') ?? [];\n  let toTimestamp = selectLastMainTxTimestamp(global, accountId)!;\n  let shouldFetchMore = true;\n  let fetchedActivities: ApiActivity[] = [];\n\n  while (shouldFetchMore) {\n    const result = await callApi(\n      'fetchAllActivitySlice',\n      accountId,\n      limit,\n      toTimestamp,\n      tronTokenSlugs,\n    );\n\n    global = getGlobal();\n\n    if (!result || 'error' in result) {\n      break;\n    }\n\n    if (!result.length) {\n      global = updateActivitiesIsHistoryEndReached(global, true);\n      break;\n    }\n\n    const { areTinyTransfersHidden } = global.settings;\n\n    const filteredResult = result.filter((tx) => {\n      const shouldHide = tx.kind === 'transaction'\n        && (\n          getIsTransactionWithPoisoning(tx)\n          || (areTinyTransfersHidden && getIsTinyOrScamTransaction(tx))\n        );\n\n      return !shouldHide;\n    });\n\n    fetchedActivities = fetchedActivities.concat(result);\n    shouldFetchMore = filteredResult.length < limit && fetchedActivities.length < limit;\n    toTimestamp = result[result.length - 1].timestamp;\n  }\n\n  global = updateActivitiesIsLoading(global, false);\n\n  const newById = buildCollectionByKey(fetchedActivities, 'id');\n  const currentActivities = selectAccountState(global, accountId)?.activities;\n  const byId = { ...(currentActivities?.byId || {}), ...newById };\n\n  fetchedActivities.sort(compareActivities);\n\n  const idsMain = unique((currentActivities?.idsMain ?? []).concat(extractKey(fetchedActivities, 'id')));\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...currentActivities,\n      byId,\n      idsMain,\n    },\n  });\n\n  setGlobal(global);\n\n  if (shouldLoadWithBudget) {\n    onTickEnd(() => {\n      actions.fetchAllTransactions({ limit });\n    });\n  }\n});\n\naddActionHandler('resetIsHistoryEndReached', (global, actions, payload) => {\n  global = updateActivitiesIsHistoryEndReached(global, false, payload?.slug);\n  setGlobal(global);\n});\n\naddActionHandler('setIsBackupRequired', (global, actions, { isMnemonicChecked }) => {\n  const { isBackupRequired } = selectCurrentAccountState(global) ?? {};\n\n  setGlobal(updateCurrentAccountState(global, {\n    isBackupRequired: isMnemonicChecked ? undefined : isBackupRequired,\n  }));\n});\n\naddActionHandler('submitSignature', async (global, actions, payload) => {\n  const { password } = payload;\n  const { promiseId } = global.currentSignature!;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSignature(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  await callApi('confirmDappRequest', promiseId, password);\n\n  setGlobal(updateCurrentSignature(getGlobal(), { isSigned: true }));\n});\n\naddActionHandler('clearSignatureError', (global) => {\n  setGlobal(updateCurrentSignature(global, { error: undefined }));\n});\n\naddActionHandler('cancelSignature', (global) => {\n  const { promiseId } = global.currentSignature || {};\n\n  if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  setGlobal({\n    ...global,\n    currentSignature: undefined,\n  });\n});\n\naddActionHandler('addToken', (global, actions, { token }) => {\n  if (!global.tokenInfo?.bySlug?.[token.slug]) {\n    global = updateTokenInfo(global, {\n      [token.slug]: {\n        name: token.name,\n        symbol: token.symbol,\n        slug: token.slug,\n        decimals: token.decimals,\n        chain: token.chain,\n        image: token.image,\n        keywords: token.keywords,\n        price: token.price ?? 0,\n        priceUsd: token.priceUsd ?? 0,\n        percentChange24h: token.change24h ?? 0,\n      },\n    });\n  }\n\n  const { balances } = selectCurrentAccountState(global) ?? {};\n\n  if (!balances?.bySlug[token.slug]) {\n    global = updateCurrentAccountState(global, {\n      balances: {\n        ...balances,\n        bySlug: {\n          ...balances?.bySlug,\n          [token.slug]: 0n,\n        },\n      },\n    });\n  }\n\n  const settings = selectCurrentAccountSettings(global);\n  global = updateCurrentAccountSettings(global, {\n    importedSlugs: [...settings?.importedSlugs ?? [], token.slug],\n  });\n\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  global = updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: [...accountSettings.orderedSlugs ?? [], token.slug],\n    alwaysShownSlugs: unique([...accountSettings.alwaysShownSlugs ?? [], token.slug]),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((slug) => slug !== token.slug),\n    deletedSlugs: accountSettings.deletedSlugs?.filter((slug) => slug !== token.slug),\n  });\n\n  return global;\n});\n\naddActionHandler('importToken', async (global, actions, { address }) => {\n  const { currentAccountId } = global;\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: true,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n\n  const slug = (await callApi('buildTokenSlug', 'ton', address))!;\n  global = getGlobal();\n\n  let token: ApiTokenWithPrice | ApiToken | undefined = global.tokenInfo.bySlug?.[slug];\n\n  if (!token) {\n    token = await callApi('fetchToken', global.currentAccountId!, address);\n    await pause(IMPORT_TOKEN_PAUSE);\n\n    global = getGlobal();\n    if (!token) {\n      global = updateSettings(global, {\n        importToken: {\n          isLoading: false,\n          token: undefined,\n        },\n      });\n      setGlobal(global);\n      return;\n    } else {\n      const apiToken: ApiTokenWithPrice = {\n        ...token,\n        price: 0,\n        priceUsd: 0,\n        percentChange24h: 0,\n      };\n      global = updateTokenInfo(global, { [apiToken.slug]: apiToken });\n      setGlobal(global);\n    }\n  }\n\n  const balances = selectAccountState(global, currentAccountId!)?.balances?.bySlug ?? {};\n  const shouldUpdateBalance = !(token.slug in balances);\n\n  const userToken = buildUserToken(token);\n\n  global = getGlobal();\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: userToken,\n    },\n  });\n  if (shouldUpdateBalance) {\n    global = changeBalance(global, global.currentAccountId!, token.slug, 0n);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('resetImportToken', (global) => {\n  global = updateSettings(global, {\n    importToken: {\n      isLoading: false,\n      token: undefined,\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('verifyHardwareAddress', async (global, actions) => {\n  const accountId = global.currentAccountId!;\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (!(await ledgerApi.reconnectLedger())) {\n    actions.showError({ error: '$ledger_not_ready' });\n    return;\n  }\n\n  try {\n    actions.showDialog({ title: 'Ledger', message: '$ledger_verify_address_on_device' });\n    await ledgerApi.verifyAddress(accountId);\n  } catch (err) {\n    actions.showError({ error: err as string });\n  }\n});\n\naddActionHandler('setActiveContentTab', (global, actions, { tab }) => {\n  return updateCurrentAccountState(global, {\n    activeContentTab: tab,\n  });\n});\n\naddActionHandler('addSwapToken', (global, actions, { token }) => {\n  const isAlreadyExist = token.slug in global.swapTokenInfo.bySlug;\n\n  if (isAlreadyExist) {\n    return;\n  }\n\n  const apiSwapAsset: ApiSwapAsset = {\n    name: token.name,\n    symbol: token.symbol,\n    chain: token.chain,\n    slug: token.slug,\n    decimals: token.decimals,\n    image: token.image,\n    tokenAddress: token.tokenAddress,\n    keywords: token.keywords,\n    isPopular: false,\n    price: 0,\n    priceUsd: 0,\n  };\n\n  setGlobal({\n    ...global,\n    swapTokenInfo: {\n      ...global.swapTokenInfo,\n      bySlug: {\n        ...global.swapTokenInfo.bySlug,\n        [apiSwapAsset.slug]: apiSwapAsset,\n      },\n    },\n  });\n});\n\naddActionHandler('apiUpdateWalletVersions', (global, actions, params) => {\n  const { accountId, versions, currentVersion } = params;\n  global = {\n    ...global,\n    walletVersions: {\n      ...global.walletVersions,\n      currentVersion,\n      byId: {\n        ...global.walletVersions?.byId,\n        [accountId]: versions,\n      },\n    },\n  };\n  setGlobal(global);\n});\n","import type { ApiDapp, ApiDappRequest } from '../api/types';\n\nexport function getDappConnectionUniqueId(request: ApiDappRequest | ApiDapp): string {\n  return (request as any).sseOptions?.appClientId ?? (request as any).sse?.appClientId ?? 'jsbridge';\n}\n","import type { ApiDappConnectionType } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { DappConnectState, SignDataState, TransferState } from '../../types';\n\nimport { ANIMATION_END_DELAY, IS_CAPACITOR } from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getDappConnectionUniqueId } from '../../../util/getDappConnectionUniqueId';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport {\n  ApiHardwareBlindSigningNotEnabled,\n  ApiUnsupportedVersionError,\n  ApiUserRejectsError,\n} from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearConnectedDapps,\n  clearCurrentDappSignData,\n  clearCurrentDappTransfer,\n  clearDappConnectRequest,\n  clearIsPinAccepted,\n  removeConnectedDapp,\n  setIsPinAccepted,\n  updateConnectedDapps,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n  updateDappConnectRequest,\n} from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from './auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../../components/ui/Modal';\n\nconst GET_DAPPS_PAUSE = 250;\n\naddActionHandler('submitDappConnectRequestConfirm', async (global, actions, { password, accountId }) => {\n  const {\n    promiseId, permissions,\n  } = global.dappConnectRequest!;\n\n  if (permissions?.isPasswordRequired && (!password || !(await callApi('verifyPassword', password)))) {\n    global = getGlobal();\n    global = updateDappConnectRequest(global, { error: 'Wrong password, please try again.' });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitDappConnectRequestConfirm', { password, accountId });\n\n    return;\n  }\n\n  void vibrateOnSuccess();\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, {\n    accountId,\n    password,\n  });\n\n  global = getGlobal();\n  if (IS_CAPACITOR) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler(\n  'submitDappConnectRequestConfirmHardware',\n  async (global, actions, { accountId: connectAccountId }) => {\n    const { proof } = global.dappConnectRequest!;\n\n    global = getGlobal();\n    global = updateDappConnectRequest(global, {\n      error: undefined,\n      state: DappConnectState.ConfirmHardware,\n    });\n    setGlobal(global);\n\n    const ledgerApi = await import('../../../util/ledger');\n\n    try {\n      const signature = await ledgerApi.signLedgerProof(connectAccountId, proof!);\n      if (IS_DELEGATED_BOTTOM_SHEET) {\n        callActionInMain('submitDappConnectHardware', { accountId: connectAccountId, signature });\n\n        return;\n      }\n\n      actions.submitDappConnectHardware({ accountId: connectAccountId, signature });\n    } catch (err) {\n      // todo: Distinguish user cancellation from other errors. For example, when the proof payload is too long (>256 bytes).\n      // todo: Show a clear message for dapp developers in this case. Requirements: payload size  128 bytes, domain  128 bytes, payload + domain  222 bytes.\n      setGlobal(updateDappConnectRequest(getGlobal(), {\n        error: 'Canceled by the user',\n      }));\n    }\n  },\n);\n\naddActionHandler('submitDappConnectHardware', async (global, actions, { accountId, signature }) => {\n  const { promiseId } = global.dappConnectRequest!;\n\n  actions.switchAccount({ accountId });\n  await callApi('confirmDappRequestConnect', promiseId!, { accountId, signature });\n\n  global = getGlobal();\n  global = clearDappConnectRequest(global);\n  setGlobal(global);\n\n  await pause(GET_DAPPS_PAUSE);\n  actions.getDapps();\n});\n\naddActionHandler('cancelDappConnectRequestConfirm', (global) => {\n  cancelDappOperation(\n    (global) => global.dappConnectRequest,\n    () => callActionInMain('cancelDappConnectRequestConfirm'),\n    clearDappConnectRequest,\n  );\n});\n\naddActionHandler('setDappConnectRequestState', (global, actions, { state }) => {\n  setGlobal(updateDappConnectRequest(global, { state }));\n});\n\naddActionHandler('cancelDappTransfer', (global) => {\n  cancelDappOperation(\n    (global) => global.currentDappTransfer,\n    () => callActionInMain('cancelDappTransfer'),\n    clearCurrentDappTransfer,\n  );\n});\n\nfunction cancelDappOperation(\n  getState: (global: GlobalState) => { promiseId?: string } | undefined,\n  callInMain: NoneToVoidFunction,\n  clearState: (global: GlobalState) => GlobalState,\n) {\n  let global = getGlobal();\n  const { promiseId } = getState(global) ?? {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callInMain();\n  } else if (promiseId) {\n    void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = clearState(global);\n  setGlobal(global);\n}\n\naddActionHandler('submitDappTransferPassword', async (global, actions, { password }) => {\n  await submitDappOperationPassword(\n    password,\n    (global) => global.currentDappTransfer,\n    () => callActionInMain('submitDappTransferPassword', { password }),\n    updateCurrentDappTransfer,\n  );\n});\n\nasync function submitDappOperationPassword(\n  password: string,\n  getState: (global: GlobalState) => { promiseId?: string },\n  callInMain: NoneToVoidFunction,\n  updateState: (global: GlobalState, update: { isLoading?: true; error?: string }) => GlobalState,\n) {\n  let global = getGlobal();\n  const { promiseId } = getState(global);\n\n  if (!promiseId) {\n    return;\n  }\n\n  if (!(await callApi('verifyPassword', password))) {\n    global = getGlobal();\n    global = updateState(global, {\n      error: 'Wrong password, please try again.',\n    });\n    setGlobal(global);\n\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = getGlobal();\n    global = setIsPinAccepted(global);\n    setGlobal(global);\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callInMain();\n    return;\n  }\n\n  global = getGlobal();\n  global = updateState(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  void callApi('confirmDappRequest', promiseId, password);\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(getGlobal());\n    setGlobal(global);\n  }\n}\n\naddActionHandler('submitDappTransferHardware', async (global, actions) => {\n  const { promiseId, transactions, vestingAddress } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDappTransfer(global, {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const accountId = global.currentAccountId!;\n  const ledgerApi = await import('../../../util/ledger');\n\n  try {\n    const signedMessages = await ledgerApi.signLedgerTransactions(accountId, transactions!, {\n      isTonConnect: true,\n      vestingAddress,\n    });\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      callActionInMain('submitDappTransferHardware2', { signedMessages });\n\n      return;\n    }\n\n    actions.submitDappTransferHardware2({ signedMessages });\n  } catch (err) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled',\n      }));\n      return;\n    } else if (err instanceof ApiUnsupportedVersionError) {\n      actions.showError({\n        error: '$ledger_unsupported_ton_connect',\n      });\n      void callApi('cancelDappRequest', promiseId, err.message);\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentDappTransfer(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    } else {\n      void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n    }\n\n    global = getGlobal();\n    global = clearCurrentDappTransfer(global);\n    setGlobal(global);\n  }\n});\n\naddActionHandler('submitDappTransferHardware2', (global, actions, { signedMessages }) => {\n  const { promiseId } = global.currentDappTransfer;\n\n  if (!promiseId) {\n    return;\n  }\n\n  void callApi('confirmDappRequest', promiseId, signedMessages);\n\n  global = getGlobal();\n  global = clearCurrentDappTransfer(global);\n  setGlobal(global);\n});\n\naddActionHandler('submitDappSignDataPassword', async (global, actions, { password }) => {\n  await submitDappOperationPassword(\n    password,\n    (global) => global.currentDappSignData,\n    () => callActionInMain('submitDappSignDataPassword', { password }),\n    updateCurrentDappSignData,\n  );\n});\n\naddActionHandler('getDapps', async (global, actions) => {\n  const { currentAccountId } = global;\n\n  let result = await callApi('getDapps', currentAccountId!);\n\n  if (!result) {\n    return;\n  }\n\n  // Check for broken dapps without URL\n  const brokenDapp = result.find(({ url }) => !url);\n  if (brokenDapp) {\n    actions.deleteDapp({ url: brokenDapp.url, uniqueId: getDappConnectionUniqueId(brokenDapp) });\n    result = result.filter(({ url }) => url);\n  }\n\n  global = getGlobal();\n  global = updateConnectedDapps(global, result);\n  setGlobal(global);\n});\n\naddActionHandler('deleteAllDapps', (global) => {\n  const { currentAccountId } = global;\n\n  void callApi('deleteAllDapps', currentAccountId!);\n\n  global = getGlobal();\n  global = clearConnectedDapps(global);\n  setGlobal(global);\n});\n\naddActionHandler('deleteDapp', (global, actions, { url, uniqueId }) => {\n  const { currentAccountId } = global;\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('deleteDapp', { url, uniqueId });\n  } else {\n    void callApi('deleteDapp', currentAccountId!, url, uniqueId);\n  }\n\n  global = getGlobal();\n  global = removeConnectedDapp(global, url);\n  setGlobal(global);\n});\n\naddActionHandler('cancelDappSignData', (global) => {\n  cancelDappOperation(\n    (global) => global.currentDappSignData,\n    () => callActionInMain('cancelDappSignData'),\n    clearCurrentDappSignData,\n  );\n});\n\naddActionHandler('apiUpdateDappConnect', async (global, actions, {\n  accountId, dapp, permissions, promiseId, proof,\n}) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => Boolean(getGlobal().dappConnectRequest), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  global = updateDappConnectRequest(global, {\n    state: DappConnectState.Info,\n    promiseId,\n    accountId,\n    dapp,\n    permissions: {\n      isAddressRequired: permissions.address,\n      isPasswordRequired: permissions.proof,\n    },\n    proof,\n  });\n  setGlobal(global);\n\n  actions.addSiteToBrowserHistory({ url: dapp.url });\n});\n\naddActionHandler('apiUpdateDappSendTransaction', async (global, actions, payload) => {\n  const { promiseId, transactions, emulation, dapp, vestingAddress } = payload;\n\n  await apiUpdateDappOperation(\n    payload,\n    (global) => global.currentDappTransfer,\n    actions.closeDappTransfer,\n    (global) => global.currentDappTransfer.state !== TransferState.None,\n    clearCurrentDappTransfer,\n    (global) => updateCurrentDappTransfer(global, {\n      state: selectIsHardwareAccount(global) && transactions.length > 1\n        ? TransferState.WarningHardware\n        : TransferState.Initial,\n      promiseId,\n      transactions,\n      emulation,\n      dapp,\n      vestingAddress,\n    }),\n  );\n});\n\naddActionHandler('apiUpdateDappSignData', async (global, actions, payload) => {\n  const { promiseId, dapp, payloadToSign } = payload;\n\n  await apiUpdateDappOperation(\n    payload,\n    (global) => global.currentDappSignData,\n    actions.closeDappSignData,\n    (global) => global.currentDappSignData.state !== SignDataState.None,\n    clearCurrentDappSignData,\n    (global) => updateCurrentDappSignData(global, {\n      state: SignDataState.Initial,\n      promiseId,\n      dapp,\n      payloadToSign,\n    }),\n  );\n});\n\nasync function apiUpdateDappOperation(\n  payload: { accountId: string },\n  getState: (global: GlobalState) => { promiseId?: string },\n  close: NoneToVoidFunction,\n  isStateActive: (global: GlobalState) => boolean,\n  clearState: (global: GlobalState) => GlobalState,\n  updateState: (global: GlobalState) => GlobalState,\n) {\n  let global = getGlobal();\n\n  const { accountId } = payload;\n  const { promiseId: currentPromiseId } = getState(global);\n\n  await switchAccount(global, accountId);\n\n  if (currentPromiseId && !IS_DELEGATED_BOTTOM_SHEET) {\n    close();\n    const closeDuration = getIsPortrait() ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION;\n    await pause(closeDuration + ANIMATION_END_DELAY);\n  }\n\n  // We only need to apply changes in NBS when dapp operation modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isStateActive(getGlobal()), 300, 5))) {\n      return;\n    }\n  }\n\n  global = getGlobal();\n  global = clearState(global);\n  global = updateState(global);\n  setGlobal(global);\n}\n\naddActionHandler('apiUpdateDappLoading', async (global, actions, { connectionType, isSse, accountId }) => {\n  // We only need to apply changes in NBS when Dapp Connect Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isAnyDappModalActive(getGlobal(), connectionType), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  if (!IS_DELEGATED_BOTTOM_SHEET && accountId) {\n    actions.switchAccount({ accountId });\n  }\n\n  if (connectionType === 'connect') {\n    global = updateDappConnectRequest(global, {\n      state: DappConnectState.Info,\n      isSse,\n    });\n  } else if (connectionType === 'sendTransaction') {\n    global = updateCurrentDappTransfer(global, {\n      state: TransferState.Initial,\n      isSse,\n    });\n  } else if (connectionType === 'signData') {\n    global = updateCurrentDappSignData(global, {\n      state: SignDataState.Initial,\n      isSse,\n    });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('apiUpdateDappCloseLoading', async (global, actions, { connectionType }) => {\n  // We only need to apply changes in NBS when Dapp Modal is already open\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    if (!(await waitFor(() => isAnyDappModalActive(getGlobal(), connectionType), 300, 5))) {\n      return;\n    }\n\n    global = getGlobal();\n  }\n\n  // But clear the state if a skeleton is displayed in the Modal\n  if (connectionType === 'connect' && global.dappConnectRequest?.state === DappConnectState.Info) {\n    global = clearDappConnectRequest(global);\n  } else if (connectionType === 'sendTransaction' && global.currentDappTransfer.state === TransferState.Initial) {\n    global = clearCurrentDappTransfer(global);\n  } else if (connectionType === 'signData' && global.currentDappSignData.state === SignDataState.Initial) {\n    global = clearCurrentDappSignData(global);\n  }\n  setGlobal(global);\n});\n\naddActionHandler('loadExploreSites', async (global, _, { isLandscape }) => {\n  const exploreData = await callApi('loadExploreSites', { isLandscape });\n  global = getGlobal();\n  if (areDeepEqual(exploreData, global.exploreData)) {\n    return;\n  }\n\n  global = { ...global, exploreData };\n  setGlobal(global);\n});\n\nfunction isAnyDappModalActive(global: GlobalState, connectionType: ApiDappConnectionType) {\n  return (connectionType === 'connect' && !!global.dappConnectRequest)\n    || (connectionType === 'sendTransaction' && global.currentDappTransfer.state !== TransferState.None)\n    || (connectionType === 'signData' && global.currentDappSignData.state !== SignDataState.None);\n}\n","import type { ApiSwapEstimateVariant, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport type { FeePrecision, FeeTerms } from './types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { bigintDivideToNumber, bigintMax } from '../bigint';\nimport { bigMax, bigMin } from '../bigNumber';\nimport { findChainConfig } from '../chain';\nimport { fromDecimal, toBig } from '../decimals';\nimport { getChainBySlug, getIsNativeToken } from '../tokens';\n\ntype ExplainSwapFeeInput = Pick<GlobalState['currentSwap'],\n'tokenInSlug' | 'networkFee' | 'realNetworkFee' | 'ourFee' | 'dieselStatus' | 'dieselFee'\n> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token blockchain's native token. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\nexport type ExplainedSwapFee = {\n  /** Whether the result implies paying the fee with a diesel */\n  isGasless: boolean;\n  /**\n   * The fee that will be sent with the swap. The wallet must have it on the balance to conduct the swap.\n   * Show this in the swap form when the input amount is  the balance, but the remaining balance can't cover the\n   * full fee; show `realFee` otherwise. Undefined means that it's unknown.\n   */\n  fullFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /**\n   * The real fee (the full fee minus the excess). Undefined means that it's unknown. There is no need to fall back to\n   * `fullFee` when `realFee` is undefined (because it's undefined too in this case).\n   */\n  realFee?: {\n    precision: FeePrecision;\n    terms: FeeTerms<string>;\n    /** Only the network fee terms (like `terms` but excluding our fee) */\n    networkTerms: FeeTerms<string>;\n  };\n  /** The excess fee. Measured in the native token. It's always approximate. Undefined means that it's unknown. */\n  excessFee?: string;\n  shouldShowOurFee: boolean;\n};\n\ntype MaxSwapAmountInput = Pick<GlobalState['currentSwap'], 'ourFeePercent'> & {\n  swapType: SwapType;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The full network fee terms calculated by `explainSwapFee`. Undefined means that they're unknown. */\n  fullNetworkFee: FeeTerms<string> | undefined;\n};\n\ntype BalanceSufficientForSwapInput = MaxSwapAmountInput & {\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n  /** The \"in\" amount to swap. Undefined means that it's unspecified. */\n  amountIn: string | undefined;\n};\n\ntype CanAffordSwapVariant = {\n  variant: ApiSwapEstimateVariant;\n  tokenIn: Pick<ApiToken, 'slug' | 'decimals'> | undefined;\n  /** The balance of the \"in\" token. Undefined means that it's unknown. */\n  tokenInBalance: bigint | undefined;\n  /** The wallet balance of the native token of the \"in\" token chain. Undefined means that it's unknown. */\n  nativeTokenInBalance: bigint | undefined;\n};\n\n/**\n * Converts the swap fee data returned from API into data that is ready to be displayed in the swap form UI.\n */\nexport function explainSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  return shouldSwapBeGasless(input)\n    ? explainGaslessSwapFee(input)\n    : explainGasfullSwapFee(input);\n}\n\n/**\n * Calculates the maximum amount available for the swap.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function getMaxSwapAmount({\n  swapType,\n  tokenInBalance,\n  tokenIn,\n  fullNetworkFee,\n  ourFeePercent,\n}: MaxSwapAmountInput): bigint | undefined {\n  if (swapType === SwapType.CrosschainToWallet || tokenInBalance === undefined) {\n    return undefined;\n  }\n\n  let maxAmount = tokenInBalance;\n\n  // For a better UX, assuming the fee is 0 when it's unknown\n  if (fullNetworkFee) {\n    if (!tokenIn) {\n      return undefined;\n    }\n\n    maxAmount -= fromDecimal(fullNetworkFee.token ?? '0', tokenIn.decimals);\n\n    if (getIsNativeToken(tokenIn.slug)) {\n      // When the \"in\" token is native, both `token` and `native` refer to the same currency, so we consider them both\n      maxAmount -= fromDecimal(fullNetworkFee.native ?? '0', tokenIn.decimals);\n    }\n  }\n\n  ourFeePercent ??= swapType === SwapType.OnChain ? DEFAULT_OUR_SWAP_FEE : 0;\n  maxAmount = bigintDivideToNumber(maxAmount, 1 + (ourFeePercent / 100));\n\n  return bigintMax(maxAmount, 0n);\n}\n\n/**\n * Decides whether the balance is sufficient to swap the amount and pay the fees.\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function isBalanceSufficientForSwap(input: BalanceSufficientForSwapInput) {\n  const {\n    swapType,\n    amountIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n    tokenIn,\n    fullNetworkFee,\n  } = input;\n\n  if (swapType === SwapType.CrosschainToWallet) {\n    return true;\n  }\n\n  if (\n    amountIn === undefined\n    || !tokenIn\n    || tokenInBalance === undefined\n    || nativeTokenInBalance === undefined\n    || !fullNetworkFee\n  ) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  const maxAmount = getMaxSwapAmount(input);\n  if (maxAmount === undefined) {\n    return undefined;\n  }\n\n  const swapAmountInBigint = fromDecimal(amountIn, tokenIn.decimals);\n  const networkNativeFeeBigint = fromDecimal(fullNetworkFee.native ?? '0', nativeTokenIn.decimals);\n\n  return swapAmountInBigint <= maxAmount && networkNativeFeeBigint <= nativeTokenInBalance;\n}\n\n/**\n * Decides whether the balance is sufficient for the given swap estimate variant (DEX).\n * Returns undefined when it can't be calculated because of insufficient input data.\n */\nexport function canAffordSwapEstimateVariant(input: CanAffordSwapVariant) {\n  if (!input.tokenIn || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeTokenIn = findChainConfig(getChainBySlug(input.tokenIn.slug))?.nativeToken;\n  if (!nativeTokenIn) {\n    return undefined;\n  }\n\n  // Try to pay with gas\n  const networkFeeBigint = fromDecimal(input.variant.networkFee, nativeTokenIn.decimals);\n  if (input.nativeTokenInBalance >= networkFeeBigint) {\n    return true;\n  }\n\n  // Otherwise, try to pay with diesel\n  if (input.variant.dieselFee) {\n    if (input.tokenInBalance === undefined) {\n      return undefined;\n    }\n    const dieselFeeBigint = fromDecimal(input.variant.dieselFee, input.tokenIn.decimals);\n    if (input.tokenInBalance >= dieselFeeBigint) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function shouldSwapBeGasless(\n  input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance' | 'networkFee' | 'dieselStatus' | 'swapType'>,\n) {\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const isInsufficientNative = input.networkFee !== undefined && nativeTokenBalance !== undefined\n    && nativeTokenBalance.lt(input.networkFee);\n\n  return (\n    input.swapType === SwapType.OnChain\n    && isInsufficientNative\n    && !isNativeIn\n    && Boolean(input.dieselStatus) && input.dieselStatus !== 'not-available'\n  );\n}\n\n/**\n * Converts the data of a swap not involving diesel\n */\nfunction explainGasfullSwapFee(input: ExplainSwapFeeInput) {\n  const result: ExplainedSwapFee = {\n    isGasless: false,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  const isNativeIn = getIsNativeToken(input.tokenInSlug);\n  const isExact = result.excessFee === '0';\n\n  if (input.networkFee !== undefined) {\n    const networkTerms = { native: input.networkFee };\n    result.fullFee = {\n      precision: isExact ? 'exact' : 'lessThan',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n    result.realFee = result.fullFee;\n  }\n\n  if (input.realNetworkFee !== undefined) {\n    const networkTerms = { native: input.realNetworkFee };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', isNativeIn),\n      networkTerms,\n    };\n  }\n\n  return result;\n}\n\n/**\n * Converts the diesel of semi-diesel swap data\n */\nfunction explainGaslessSwapFee(input: ExplainSwapFeeInput): ExplainedSwapFee {\n  const nativeTokenBalance = getBigNativeTokenInBalance(input);\n  const result: ExplainedSwapFee = {\n    isGasless: true,\n    excessFee: getExcessFee(input),\n    shouldShowOurFee: shouldShowOurFee(input),\n  };\n\n  if (input.networkFee === undefined || input.dieselFee === undefined || nativeTokenBalance === undefined) {\n    return result;\n  }\n\n  const isExact = result.excessFee === '0';\n  const isStarsDiesel = input.dieselStatus === 'stars-fee';\n  const dieselKey = isStarsDiesel ? 'stars' : 'token';\n\n  const networkTerms = {\n    [dieselKey]: input.dieselFee,\n    native: nativeTokenBalance.toString(),\n  };\n  result.fullFee = {\n    precision: isExact ? 'exact' : 'lessThan',\n    terms: addOurFeeToTerms(networkTerms, input.ourFee ?? '0', false),\n    networkTerms,\n  };\n  result.realFee = result.fullFee;\n\n  if (input.realNetworkFee !== undefined) {\n    // We are sure this amount is > 0 because `shouldBeGasless` would return `false` otherwise and this function\n    // wouldn't be called.\n    const networkFeeCoveredByDiesel = Big(input.networkFee).sub(nativeTokenBalance);\n    const realFeeInDiesel = Big(input.dieselFee).div(networkFeeCoveredByDiesel).mul(input.realNetworkFee);\n    // Cover as much displayed real fee as possible with diesel, because in the excess it will return as the native token.\n    const dieselRealFee = bigMin(input.dieselFee, realFeeInDiesel);\n    // Cover the remaining real fee with the native token.\n    const nativeRealFee = bigMax(0, Big(input.realNetworkFee).sub(networkFeeCoveredByDiesel));\n\n    const realNetworkTerms = {\n      [dieselKey]: dieselRealFee.toString(),\n      native: nativeRealFee.toString(),\n    };\n    result.realFee = {\n      precision: isExact ? 'exact' : 'approximate',\n      terms: addOurFeeToTerms(realNetworkTerms, input.ourFee ?? '0', false),\n      networkTerms: realNetworkTerms,\n    };\n  }\n\n  return result;\n}\n\nfunction getBigNativeTokenInBalance(input: Pick<ExplainSwapFeeInput, 'tokenInSlug' | 'nativeTokenInBalance'>) {\n  if (!input.tokenInSlug || input.nativeTokenInBalance === undefined) {\n    return undefined;\n  }\n\n  const nativeToken = findChainConfig(getChainBySlug(input.tokenInSlug))?.nativeToken;\n  return nativeToken ? toBig(input.nativeTokenInBalance, nativeToken.decimals) : undefined;\n}\n\nfunction getExcessFee({ networkFee, realNetworkFee }: Pick<ExplainSwapFeeInput, 'networkFee' | 'realNetworkFee'>) {\n  return networkFee !== undefined && realNetworkFee !== undefined\n    ? Big(networkFee).sub(realNetworkFee).toString()\n    : undefined;\n}\n\nfunction addOurFeeToTerms(terms: FeeTerms<string>, ourFee: string, isOurFeeNative: boolean) {\n  return {\n    ...terms,\n    native: isOurFeeNative ? Big(terms.native ?? '0').add(ourFee).toString() : terms.native,\n    token: isOurFeeNative ? terms.token : Big(terms.token ?? '0').add(ourFee).toString(),\n  };\n}\n\nfunction shouldShowOurFee(input: Pick<ExplainSwapFeeInput, 'swapType'>) {\n  return input.swapType === SwapType.OnChain;\n}\n","import type { BigSource } from '../lib/big.js';\n\nimport { Big } from '../lib/big.js';\n\nexport function bigMin<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).lt(value1) ? value0 : value1;\n}\n\nexport function bigMax<T1 extends BigSource, T2 extends BigSource>(value0: T1, value1: T2): T1 | T2 {\n  return Big(value0).gt(value1) ? value0 : value1;\n}\n","import type { ApiEthenaStakingState, ApiJettonStakingState, ApiTransactionError } from '../../../api/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { StakingState } from '../../types';\n\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { getTonStakingFees } from '../../../util/fee/getTonOperationFees';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { logDebugError } from '../../../util/logs';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause } from '../../../util/schedulers';\nimport { getIsActiveStakingState, getIsLongUnstake } from '../../../util/staking';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentStaking,\n  clearIsPinAccepted,\n  resetHardware,\n  setIsPinAccepted,\n  updateAccountStaking,\n  updateAccountState,\n  updateCurrentStaking,\n} from '../../reducers';\nimport { selectAccountStakingState, selectAccountStakingStatesBySlug, selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from './auth';\n\nconst MODAL_CLOSING_DELAY = 50;\n\naddActionHandler('startStaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  const { tokenSlug } = payload || {};\n\n  if (tokenSlug) {\n    const stakingState = selectAccountStakingStatesBySlug(global, global.currentAccountId!)[tokenSlug];\n    if (stakingState) {\n      global = getGlobal();\n      global = updateAccountStaking(global, global.currentAccountId!, { stakingId: stakingState.id });\n      setGlobal(global);\n\n      global = getGlobal();\n    }\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startStaking', payload);\n    return;\n  }\n\n  const state = StakingState.StakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('startUnstaking', (global, actions, payload) => {\n  const isOpen = global.currentStaking.state !== StakingState.None;\n  const { stakingId } = payload || {};\n\n  if (stakingId) {\n    global = getGlobal();\n    global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n    setGlobal(global);\n\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startUnstaking', payload);\n    return;\n  }\n\n  const state = StakingState.UnstakeInitial;\n\n  setGlobal(updateCurrentStaking(global, {\n    state,\n    error: undefined,\n  }));\n});\n\naddActionHandler('fetchStakingFee', async (global, actions, payload) => {\n  const { amount } = payload;\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  const state = selectAccountStakingState(global, currentAccountId);\n\n  const result = await callApi(\n    'checkStakeDraft',\n    currentAccountId,\n    amount,\n    state,\n  );\n  if (!result || 'error' in result) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    fee: result.fee,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingInitial', async (global, actions, payload) => {\n  const { isUnstaking, amount } = payload ?? {};\n  const { currentAccountId } = global;\n\n  if (!currentAccountId) {\n    return;\n  }\n\n  setGlobal(updateCurrentStaking(global, { isLoading: true, error: undefined }));\n\n  const state = selectAccountStakingState(global, currentAccountId);\n\n  if (isUnstaking) {\n    const result = await callApi('checkUnstakeDraft', currentAccountId, amount!, state);\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        if (selectIsHardwareAccount(global)) {\n          global = resetHardware(global);\n          global = updateCurrentStaking(global, { state: StakingState.UnstakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.UnstakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n          tokenAmount: result.tokenAmount,\n        });\n      }\n    }\n  } else {\n    const result = await callApi(\n      'checkStakeDraft',\n      currentAccountId,\n      amount!,\n      state,\n    );\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n\n    if (result) {\n      if ('error' in result) {\n        global = updateCurrentStaking(global, { error: result.error });\n      } else {\n        if (selectIsHardwareAccount(global)) {\n          global = resetHardware(global);\n          global = updateCurrentStaking(global, { state: StakingState.StakeConnectHardware });\n        } else {\n          global = updateCurrentStaking(global, { state: StakingState.StakePassword });\n        }\n\n        global = updateCurrentStaking(global, {\n          fee: result.fee,\n          amount,\n          error: undefined,\n        });\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingPassword', async (global, actions, payload) => {\n  const { password, isUnstaking } = payload;\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n\n  const state = selectAccountStakingState(global, currentAccountId!);\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  if (isUnstaking) {\n    const unstakeAmount = state.type === 'nominators' ? state.balance : tokenAmount!;\n    const result = await callApi(\n      'submitUnstake',\n      global.currentAccountId!,\n      password,\n      unstakeAmount,\n      state,\n      getTonStakingFees(state.type).unstake.real,\n    );\n\n    const isLongUnstakeRequested = getIsLongUnstake(state, unstakeAmount);\n\n    global = getGlobal();\n    global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      void vibrateOnError();\n      actions.showDialog({\n        message: 'Unstaking was unsuccessful. Try again later.',\n      });\n      global = getGlobal();\n\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      void vibrateOnSuccess();\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.UnstakeComplete });\n    }\n  } else {\n    const result = await callApi(\n      'submitStake',\n      global.currentAccountId!,\n      password,\n      amount!,\n      state,\n      getTonStakingFees(state.type).stake.real,\n    );\n\n    global = getGlobal();\n    global = updateCurrentStaking(global, { isLoading: false });\n    setGlobal(global);\n\n    if (!result) {\n      void vibrateOnError();\n      actions.showDialog({\n        message: 'Staking was unsuccessful. Try again later.',\n      });\n\n      global = getGlobal();\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n    } else {\n      void vibrateOnSuccess();\n      global = getGlobal();\n      global = updateCurrentStaking(global, { state: StakingState.StakeComplete });\n    }\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingHardware', async (global, actions, payload) => {\n  const { isUnstaking } = payload || {};\n  const { amount, tokenAmount } = global.currentStaking;\n  const { currentAccountId } = global;\n\n  const state = selectAccountStakingState(global, currentAccountId!);\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: isUnstaking\n      ? StakingState.UnstakeConfirmHardware\n      : StakingState.StakeConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  const accountId = global.currentAccountId!;\n\n  try {\n    if (isUnstaking) {\n      const stakingBalance = state.balance;\n      const unstakeAmount = state.type === 'nominators' ? stakingBalance : tokenAmount!;\n\n      result = await ledgerApi.submitLedgerUnstake(\n        accountId,\n        state,\n        unstakeAmount,\n        getTonStakingFees(state.type).unstake.real,\n      );\n\n      const isLongUnstakeRequested = getIsLongUnstake(state, unstakeAmount);\n\n      global = getGlobal();\n      global = updateAccountState(global, currentAccountId!, { isLongUnstakeRequested });\n      setGlobal(global);\n    } else {\n      result = await ledgerApi.submitLedgerStake(\n        accountId,\n        amount!,\n        state,\n        getTonStakingFees(state.type).stake.real,\n      );\n    }\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    void vibrateOnError();\n    actions.showDialog({\n      message: isUnstaking\n        ? 'Unstaking was unsuccessful. Try again later.'\n        : 'Staking was unsuccessful. Try again later.',\n    });\n  } else if (typeof result !== 'string' && 'error' in result) {\n    void vibrateOnError();\n    actions.showError({ error: result.error });\n  } else {\n    void vibrateOnSuccess();\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: isUnstaking ? StakingState.UnstakeComplete : StakingState.StakeComplete,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearStakingError', (global) => {\n  setGlobal(updateCurrentStaking(global, { error: undefined }));\n});\n\naddActionHandler('cancelStaking', (global) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = clearCurrentStaking(global);\n  setGlobal(global);\n});\n\naddActionHandler('setStakingScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  setGlobal(updateCurrentStaking(global, { state }));\n});\n\naddActionHandler('fetchStakingHistory', async (global) => {\n  const stakingHistory = await callApi('getStakingHistory', global.currentAccountId!);\n\n  if (!stakingHistory) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateAccountState(global, global.currentAccountId!, { stakingHistory }, true);\n  setGlobal(global);\n});\n\naddActionHandler('openAnyAccountStakingInfo', async (global, actions, { accountId, network, stakingId }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openAnyAccountStakingInfo', { accountId, network, stakingId });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.changeCurrentStaking({ stakingId });\n  actions.openStakingInfo();\n});\n\n// Should be called only when you're sure that the staking is active. Otherwise, call `openStakingInfoOrStart`.\naddActionHandler('openStakingInfo', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openStakingInfo');\n    return;\n  }\n\n  global = { ...global, isStakingInfoModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeStakingInfo', (global) => {\n  global = { ...global, isStakingInfoModalOpen: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('changeCurrentStaking', async (global, actions, { stakingId, shouldReopenModal }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && shouldReopenModal) {\n    callActionInMain('changeCurrentStaking', { stakingId, shouldReopenModal });\n    return;\n  }\n\n  if (shouldReopenModal) {\n    await pause(MODAL_CLOSING_DELAY);\n  }\n\n  global = getGlobal();\n  global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n  setGlobal(global);\n\n  if (shouldReopenModal) {\n    actions.openStakingInfoOrStart();\n  }\n});\n\naddActionHandler('startStakingClaim', (global, actions, payload) => {\n  const { stakingId } = payload || {};\n\n  if (stakingId) {\n    global = getGlobal();\n    global = updateAccountStaking(global, global.currentAccountId!, { stakingId });\n    setGlobal(global);\n\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startStakingClaim', payload);\n    return;\n  }\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentStaking(global, { state: StakingState.ClaimConnectHardware });\n  } else {\n    global = updateCurrentStaking(global, { state: StakingState.ClaimPassword });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('cancelStakingClaim', (global) => {\n  global = updateCurrentStaking(global, { state: StakingState.None });\n  setGlobal(global);\n});\n\naddActionHandler('submitStakingClaim', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentStaking(getGlobal(), { error: 'Wrong password, please try again.' }));\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitStakingClaim', { password });\n    return;\n  }\n\n  global = getGlobal();\n\n  const stakingState = selectAccountStakingState(global, accountId) as ApiEthenaStakingState | ApiJettonStakingState;\n  const isEthenaStaking = stakingState.type === 'ethena';\n\n  const result = await callApi(\n    'submitStakingClaimOrUnlock',\n    accountId,\n    password,\n    stakingState,\n    getTonStakingFees(stakingState.type).claim?.real,\n  );\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, {\n    state: isEthenaStaking ? StakingState.ClaimComplete : StakingState.None,\n  });\n  setGlobal(global);\n\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('setStakingScreen', {\n      state: isEthenaStaking ? StakingState.ClaimComplete : StakingState.None,\n    });\n  }\n});\n\naddActionHandler('submitStakingClaimHardware', async (global, actions) => {\n  global = updateCurrentStaking(global, {\n    isLoading: true,\n    error: undefined,\n    state: StakingState.ClaimConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const stakingState = selectAccountStakingState(global, accountId) as ApiJettonStakingState | ApiEthenaStakingState;\n  const isEthenaStaking = stakingState.type === 'ethena';\n\n  let result: string | { error: ApiTransactionError } | undefined;\n\n  try {\n    result = await ledgerApi.submitLedgerStakingClaimOrUnlock(\n      accountId,\n      stakingState,\n      getTonStakingFees(stakingState.type).claim?.real,\n    );\n  } catch (err: any) {\n    if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: '$hardware_blind_sign_not_enabled_internal',\n      }));\n      return;\n    } else if (err instanceof ApiUserRejectsError) {\n      setGlobal(updateCurrentStaking(getGlobal(), {\n        isLoading: false,\n        error: 'Canceled by the user',\n      }));\n      return;\n    }\n    logDebugError('submitStakingClaimHardware', err);\n  }\n\n  global = getGlobal();\n  global = updateCurrentStaking(global, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({ error: result.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentStaking(global, {\n      state: isEthenaStaking ? StakingState.ClaimComplete : StakingState.None,\n    });\n    setGlobal(global);\n  }\n});\n\n// Opens the staking info modal if the modal is available. Otherwise, opens the staking start modal.\naddActionHandler('openStakingInfoOrStart', (global, actions) => {\n  if (!global.currentAccountId) {\n    return;\n  }\n\n  const stakingState = selectAccountStakingState(global, global.currentAccountId);\n\n  if (getIsActiveStakingState(stakingState)) {\n    actions.openStakingInfo();\n  } else {\n    actions.startStaking();\n  }\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitTransferWithDieselResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport type {\n  ApiChain,\n  ApiSwapActivity,\n  ApiSwapBuildRequest,\n  ApiSwapCexCreateTransactionRequest,\n  ApiSwapDexLabel,\n  ApiSwapEstimateResponse,\n  ApiSwapEstimateVariant,\n  ApiSwapHistoryItem,\n} from '../../../api/types';\nimport type {\n  AssetPairs,\n  GlobalState,\n} from '../../types';\nimport { ApiCommonError } from '../../../api/types';\nimport {\n  ActiveTab,\n  SwapErrorType,\n  SwapInputSource,\n  SwapState,\n  SwapType,\n} from '../../types';\n\nimport {\n  DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n  TRX_SWAP_COUNT_FEE_ADDRESS,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { parseTxId } from '../../../util/activities';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { findChainConfig, getChainConfig } from '../../../util/chain';\nimport { fromDecimal, roundDecimal, toDecimal } from '../../../util/decimals';\nimport { canAffordSwapEstimateVariant, shouldSwapBeGasless } from '../../../util/fee/swapFee';\nimport generateUniqueId from '../../../util/generateUniqueId';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { buildCollectionByKey, pick } from '../../../util/iteratees';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { pause, waitFor } from '../../../util/schedulers';\nimport { getChainBySlug, getIsTonToken, getNativeToken } from '../../../util/tokens';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../..';\nimport { resolveSwapAssetId } from '../../helpers';\nimport {\n  getSwapEstimateResetParams,\n  isSwapEstimateInputEqual,\n  isSwapFormFilled,\n  shouldAvoidSwapEstimation,\n} from '../../helpers/swap';\nimport {\n  clearCurrentSwap,\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountState,\n  updateCurrentSwap,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectCurrentToncoinBalance,\n  selectIsMultichainAccount,\n  selectSwapType,\n} from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst pairsCache: Record<string, { timestamp: number }> = {};\n\nconst CACHE_DURATION = 15 * 60 * 1000; // 15 minutes\nconst WAIT_FOR_CHANGELLY = 5 * 1000;\nconst CLOSING_BOTTOM_SHEET_DURATION = 100; // Like in `useDelegatingBottomSheet`\n\nconst SERVER_ERRORS_MAP = {\n  'Insufficient liquidity': SwapErrorType.NotEnoughLiquidity,\n  'Tokens must be different': SwapErrorType.InvalidPair,\n  'Asset not found': SwapErrorType.InvalidPair,\n  'Pair not found': SwapErrorType.InvalidPair,\n  'Too small amount': SwapErrorType.TooSmallAmount,\n};\n\nfunction buildSwapBuildRequest(global: GlobalState): ApiSwapBuildRequest {\n  const {\n    currentDexLabel,\n    amountIn,\n    amountOut,\n    amountOutMin,\n    slippage,\n    networkFee,\n    swapFee,\n    ourFee,\n    dieselFee,\n    realNetworkFee,\n  } = global.currentSwap;\n\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  const tokenOut = selectCurrentSwapTokenOut(global)!;\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = amountIn!;\n  const toAmount = amountOut!;\n  const account = selectAccount(global, global.currentAccountId!);\n  const nativeTokenIn = findChainConfig(getChainBySlug(tokenIn.slug))?.nativeToken;\n  const nativeTokenInBalance = nativeTokenIn ? selectCurrentAccountTokenBalance(global, nativeTokenIn.slug) : undefined;\n  const swapType = selectSwapType(global);\n\n  return {\n    from,\n    to,\n    fromAmount,\n    toAmount,\n    toMinAmount: amountOutMin!,\n    slippage,\n    fromAddress: (account?.addressByChain[tokenIn.chain as ApiChain] || account?.addressByChain.ton)!,\n    shouldTryDiesel: shouldSwapBeGasless({ ...global.currentSwap, swapType, nativeTokenInBalance }),\n    dexLabel: currentDexLabel!,\n    networkFee: realNetworkFee ?? networkFee!,\n    swapFee: swapFee!,\n    ourFee: ourFee!,\n    dieselFee,\n  };\n}\n\nfunction buildSwapEstimates(estimate: ApiSwapEstimateResponse): ApiSwapEstimateVariant[] {\n  const bestEstimate: ApiSwapEstimateVariant = {\n    ...pick(estimate, [\n      'fromAmount',\n      'toAmount',\n      'toMinAmount',\n      'impact',\n      'dexLabel',\n      'networkFee',\n      'realNetworkFee',\n      'swapFee',\n      'swapFeePercent',\n      'ourFee',\n      'dieselFee',\n      'networkFee',\n    ]),\n  };\n\n  const result: ApiSwapEstimateVariant[] = [\n    bestEstimate,\n    ...(estimate.other ?? []),\n  ];\n\n  return result.sort((a, b) => a.dexLabel.localeCompare(b.dexLabel));\n}\n\nfunction processNativeMaxSwap(global: GlobalState) {\n  const tokenIn = selectCurrentSwapTokenIn(global)!;\n  let fromAmount = global.currentSwap.amountIn ?? '0';\n  let isFromAmountMax = false;\n\n  if (\n    global.currentSwap.amountIn\n    && selectSwapType(global) === SwapType.OnChain\n    && global.currentSwap.inputSource === SwapInputSource.In\n    && global.currentSwap.isMaxAmount\n  ) {\n    const tokenBalance = selectCurrentAccountTokenBalance(global, tokenIn.slug);\n    fromAmount = toDecimal(tokenBalance, tokenIn.decimals);\n    isFromAmountMax = true;\n  }\n  return { fromAmount, isFromAmountMax };\n}\n\nfunction getSupportedChains(global: GlobalState) {\n  return Object.keys(selectAccount(global, global.currentAccountId!)?.addressByChain || { ton: true }) as ApiChain[];\n}\n\naddActionHandler('startSwap', async (global, actions, payload) => {\n  const isOpen = global.currentSwap.state !== SwapState.None;\n  if (IS_DELEGATING_BOTTOM_SHEET && isOpen) {\n    callActionInNative('cancelSwap');\n    await pause(CLOSING_BOTTOM_SHEET_DURATION);\n    global = getGlobal();\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startSwap', payload);\n    return;\n  }\n\n  const { state } = payload ?? {};\n  const isPortrait = getIsPortrait();\n\n  const requiredState = state || (isPortrait ? SwapState.Initial : SwapState.None);\n\n  global = updateCurrentSwap(global, {\n    ...payload,\n    state: requiredState,\n    swapId: generateUniqueId(),\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Swap });\n  }\n});\n\naddActionHandler('setDefaultSwapParams', (global, actions, payload) => {\n  let { tokenInSlug: requiredTokenInSlug, tokenOutSlug: requiredTokenOutSlug } = payload ?? {};\n  const { withResetAmount } = payload ?? {};\n\n  requiredTokenInSlug = requiredTokenInSlug || DEFAULT_SWAP_FIRST_TOKEN_SLUG;\n  requiredTokenOutSlug = requiredTokenOutSlug || DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n  if (\n    global.currentSwap.tokenInSlug === requiredTokenInSlug\n    && global.currentSwap.tokenOutSlug === requiredTokenOutSlug\n    && !withResetAmount\n  ) {\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: requiredTokenInSlug,\n    tokenOutSlug: requiredTokenOutSlug,\n    inputSource: SwapInputSource.In,\n    ...(withResetAmount ? { amountIn: undefined, amountOut: undefined } : undefined),\n  });\n  setGlobal(global);\n});\n\naddActionHandler('cancelSwap', (global, actions, { shouldReset } = {}) => {\n  if (shouldReset) {\n    const { tokenInSlug, tokenOutSlug } = global.currentSwap;\n\n    global = clearCurrentSwap(global);\n    global = updateCurrentSwap(global, {\n      tokenInSlug,\n      tokenOutSlug,\n      amountIn: undefined,\n      amountOut: undefined,\n      inputSource: SwapInputSource.In,\n    });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    state: SwapState.None,\n    swapId: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('submitSwap', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    shouldResetOnClose: undefined,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const buildResult = await callApi(\n    'swapBuildTransfer', global.currentAccountId!, password, swapBuildRequest,\n  );\n  global = getGlobal();\n\n  if (!buildResult || 'error' in buildResult) {\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    global = updateCurrentSwap(global, {\n      shouldResetOnClose: true,\n      isLoading: false,\n    });\n    setGlobal(global);\n\n    actions.showError({ error: buildResult?.error });\n\n    return;\n  }\n\n  const swapHistoryItem: ApiSwapHistoryItem = {\n    id: buildResult.id,\n    timestamp: Date.now(),\n    status: 'pending',\n    from: swapBuildRequest.from,\n    fromAmount: swapBuildRequest.fromAmount,\n    to: swapBuildRequest.to,\n    toAmount: swapBuildRequest.toAmount,\n    networkFee: global.currentSwap.realNetworkFee ?? global.currentSwap.networkFee!,\n    swapFee: global.currentSwap.swapFee!,\n    ourFee: global.currentSwap.ourFee,\n    hashes: [],\n  };\n\n  global = updateCurrentSwap(global, {\n    tokenInSlug: undefined,\n    tokenOutSlug: undefined,\n    amountIn: undefined,\n    amountOut: undefined,\n    isLoading: false,\n    state: SwapState.Complete,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  const result = await callApi(\n    'swapSubmit',\n    global.currentAccountId!,\n    password,\n    buildResult.transfers,\n    swapHistoryItem,\n    swapBuildRequest.shouldTryDiesel,\n  );\n\n  if (!result || 'error' in result) {\n    global = getGlobal();\n    global = updateCurrentSwap(global, { shouldResetOnClose: true });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n\n    setGlobal(global);\n    void vibrateOnError();\n\n    actions.showError({ error: result?.error });\n  } else {\n    global = getGlobal();\n    global = updateCurrentSwap(global, {\n      activityId: result.activityId,\n    });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('submitSwapCex', async (global, actions, { password }) => {\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentSwap(\n      getGlobal(),\n      { error: 'Wrong password, please try again.' },\n    ));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentSwap(global, {\n    isLoading: true,\n    error: undefined,\n    shouldResetOnClose: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n\n  await vibrateOnSuccess(true);\n  global = getGlobal();\n\n  const isMutlichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const account = selectCurrentAccount(global);\n  const supportedChains = getSupportedChains(global);\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const shouldSendTonTransaction = tokenIn.chain === 'ton';\n  const shouldSendTronTransaction = isMutlichainAccount && tokenIn.chain === 'tron';\n  const shouldSendTransaction = shouldSendTonTransaction || shouldSendTronTransaction;\n  const shouldSendTokenToExternalWallet = isMutlichainAccount\n    ? supportedChains.includes(tokenIn.chain as ApiChain)\n    : tokenIn.chain === 'ton';\n\n  const tonAddress = account!.addressByChain.ton!;\n  const toAddress = account?.addressByChain[tokenOut.chain as ApiChain] ?? global.currentSwap.toAddress!;\n\n  const swapBuildRequest = buildSwapBuildRequest(global);\n  const swapTransactionRequest: ApiSwapCexCreateTransactionRequest = {\n    ...pick(swapBuildRequest, ['from', 'fromAmount', 'to', 'swapFee', 'networkFee']),\n    fromAddress: tonAddress,\n    toAddress,\n  };\n\n  const swapItem = await callApi(\n    'swapCexCreateTransaction',\n    global.currentAccountId!,\n    password,\n    swapTransactionRequest,\n  );\n\n  global = getGlobal();\n\n  if (!swapItem) {\n    global = updateCurrentSwap(global, {\n      isLoading: false,\n      shouldResetOnClose: true,\n    });\n    if (getDoesUsePinPad()) {\n      global = clearIsPinAccepted(global);\n    }\n    void vibrateOnError();\n    setGlobal(global);\n\n    actions.showError({ error: ApiCommonError.Unexpected });\n\n    return;\n  }\n\n  global = updateCurrentSwap(global, {\n    isLoading: false,\n    state: shouldSendTokenToExternalWallet ? SwapState.Complete : SwapState.WaitTokens,\n    activityId: swapItem.activity.id,\n    payinAddress: swapItem.swap.cex!.payinAddress,\n    payoutAddress: swapItem.swap.cex!.payoutAddress,\n    payinExtraId: swapItem.swap.cex!.payinExtraId,\n    shouldResetOnClose: true,\n  });\n  setGlobal(global);\n  void vibrateOnSuccess();\n\n  if (shouldSendTransaction) {\n    global = getGlobal();\n    const transferOptions: ApiSubmitTransferOptions = {\n      password,\n      accountId: global.currentAccountId!,\n      fee: fromDecimal(swapItem.swap.networkFee, tokenIn.decimals),\n      amount: fromDecimal(swapItem.swap.fromAmount, tokenIn.decimals),\n      toAddress: swapItem.swap.cex!.payinAddress,\n      tokenAddress: isMutlichainAccount ? tokenIn.tokenAddress : undefined,\n    };\n\n    await pause(WAIT_FOR_CHANGELLY);\n\n    let transferResult: ((ApiSubmitTransferResult | ApiSubmitTransferWithDieselResult) & { txId?: string }) | undefined;\n\n    if (shouldSendTonTransaction) {\n      transferResult = await callApi('swapCexSubmit', 'ton', transferOptions, swapItem.swap.id);\n    } else if (shouldSendTronTransaction) {\n      transferResult = await callApi('swapCexSubmit', 'tron', transferOptions, swapItem.swap.id);\n    }\n\n    if (!transferResult || 'error' in transferResult) {\n      global = getGlobal();\n      global = updateCurrentSwap(global, { shouldResetOnClose: true });\n      if (getDoesUsePinPad()) {\n        global = clearIsPinAccepted(global);\n      }\n\n      setGlobal(global);\n      void vibrateOnError();\n      actions.showError({ error: transferResult?.error });\n    }\n  }\n});\n\naddActionHandler('switchSwapTokens', (global) => {\n  const {\n    tokenInSlug, tokenOutSlug, amountIn, amountOut,\n  } = global.currentSwap;\n\n  global = updateCurrentSwap(global, {\n    isMaxAmount: false,\n    amountIn: amountOut,\n    amountOut: amountIn,\n    tokenInSlug: tokenOutSlug,\n    tokenOutSlug: tokenInSlug,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenIn', (global, actions, { tokenSlug: newTokenInSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenIn = global.swapTokenInfo.bySlug[newTokenInSlug];\n  const adjustedAmountIn = amountIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  // Don't set the same token in both inputs\n  const newTokenOutSlug = newTokenInSlug === tokenOutSlug ? tokenInSlug : tokenOutSlug;\n  const newTokenOut = newTokenOutSlug ? global.swapTokenInfo.bySlug[newTokenOutSlug] : undefined;\n  const adjustedAmountOut = amountOut && newTokenOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  global = updateCurrentSwap(global, {\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    tokenInSlug: newTokenInSlug,\n    tokenOutSlug: newTokenOutSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapTokenOut', (global, actions, { tokenSlug: newTokenOutSlug }) => {\n  const {\n    amountIn,\n    amountOut,\n    tokenInSlug,\n    tokenOutSlug,\n  } = global.currentSwap;\n  const newTokenOut = global.swapTokenInfo.bySlug[newTokenOutSlug];\n  const adjustedAmountOut = amountOut ? roundDecimal(amountOut, newTokenOut.decimals) : amountOut;\n\n  // Don't set the same token in both inputs\n  const newTokenInSlug = newTokenOutSlug === tokenInSlug ? tokenOutSlug : tokenInSlug;\n  const newTokenIn = newTokenInSlug ? global.swapTokenInfo.bySlug[newTokenInSlug] : undefined;\n  const adjustedAmountIn = amountIn && newTokenIn ? roundDecimal(amountIn, newTokenIn.decimals) : amountIn;\n\n  global = updateCurrentSwap(global, {\n    amountOut: adjustedAmountOut === '0' ? undefined : adjustedAmountOut,\n    amountIn: adjustedAmountIn === '0' ? undefined : adjustedAmountIn,\n    tokenOutSlug: newTokenOutSlug,\n    tokenInSlug: newTokenInSlug,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountIn', (global, actions, { amount, isMaxAmount = false }) => {\n  global = updateCurrentSwap(global, {\n    amountIn: amount,\n    isMaxAmount,\n    inputSource: SwapInputSource.In,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSwapAmountOut', (global, actions, { amount }) => {\n  global = updateCurrentSwap(global, {\n    amountOut: amount,\n    isMaxAmount: false,\n    inputSource: SwapInputSource.Out,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setSlippage', (global, actions, { slippage }) => {\n  return updateCurrentSwap(global, { slippage });\n});\n\naddActionHandler('estimateSwap', async () => {\n  await estimateSwapConcurrently(async (global, shouldStop) => {\n    const { tokenInSlug, tokenOutSlug } = global.currentSwap;\n\n    if (tokenInSlug) {\n      await loadSwapPairs(tokenInSlug);\n\n      if (shouldStop()) return;\n      global = getGlobal();\n    }\n\n    if (tokenInSlug && tokenOutSlug) {\n      const isPairValid = global.swapPairs?.bySlug?.[tokenInSlug]?.[tokenOutSlug];\n      if (!isPairValid) {\n        return {\n          ...getSwapEstimateResetParams(global),\n          errorType: SwapErrorType.InvalidPair,\n        };\n      }\n    }\n\n    if (!isSwapFormFilled(global)) {\n      return getSwapEstimateResetParams(global);\n    }\n\n    if (selectSwapType(global) === SwapType.OnChain) {\n      return estimateDexSwap(global);\n    } else {\n      return estimateCexSwap(global, shouldStop);\n    }\n  });\n});\n\nasync function estimateDexSwap(global: GlobalState): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n  const nativeTokenIn = getChainConfig(getChainBySlug(tokenIn.slug)).nativeToken;\n\n  const from = tokenIn.slug === TONCOIN.slug ? tokenIn.symbol : tokenIn.tokenAddress!;\n  const to = tokenOut.slug === TONCOIN.slug ? tokenOut.symbol : tokenOut.tokenAddress!;\n  const { fromAmount, isFromAmountMax } = processNativeMaxSwap(global);\n  const toAmount = global.currentSwap.amountOut ?? '0';\n  const fromAddress = selectCurrentAccount(global)!.addressByChain.ton!;\n\n  const estimateAmount = global.currentSwap.inputSource === SwapInputSource.In ? { fromAmount } : { toAmount };\n\n  const toncoinBalance = selectCurrentToncoinBalance(global);\n  const shouldTryDiesel = toncoinBalance < fromDecimal(global.currentSwap.networkFee ?? '0', nativeTokenIn.decimals);\n\n  const estimate = await callApi('swapEstimate', global.currentAccountId!, {\n    ...estimateAmount,\n    from,\n    to,\n    slippage: global.currentSwap.slippage,\n    fromAddress,\n    shouldTryDiesel,\n    isFromAmountMax,\n    toncoinBalance: toDecimal(toncoinBalance ?? 0n, TONCOIN.decimals),\n  });\n\n  global = getGlobal();\n\n  if (!estimate || 'error' in estimate) {\n    const errorType = SERVER_ERRORS_MAP[estimate?.error as keyof typeof SERVER_ERRORS_MAP]\n      ?? SwapErrorType.UnexpectedError;\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType,\n    };\n  }\n\n  const errorType = estimate.toAmount === '0' && shouldTryDiesel\n    ? SwapErrorType.NotEnoughForFee\n    : undefined;\n\n  const estimates = buildSwapEstimates(estimate);\n  const currentEstimate = chooseSwapEstimate(global, estimates, estimate.dexLabel);\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    ...(global.currentSwap.inputSource === SwapInputSource.In\n      ? { amountOut: currentEstimate.toAmount }\n      : { amountIn: currentEstimate.fromAmount }\n    ),\n    ...(isFromAmountMax ? { amountIn: currentEstimate.fromAmount } : undefined),\n    bestRateDexLabel: estimate.dexLabel,\n    amountOutMin: currentEstimate.toMinAmount,\n    priceImpact: currentEstimate.impact,\n    errorType,\n    dieselStatus: estimate.dieselStatus,\n    estimates,\n    currentDexLabel: currentEstimate.dexLabel,\n    // Fees\n    networkFee: currentEstimate.networkFee,\n    realNetworkFee: currentEstimate.realNetworkFee,\n    swapFee: currentEstimate.swapFee,\n    swapFeePercent: currentEstimate.swapFeePercent,\n    ourFee: currentEstimate.ourFee,\n    ourFeePercent: estimate.ourFeePercent,\n    dieselFee: currentEstimate.dieselFee,\n  };\n}\n\nasync function estimateCexSwap(global: GlobalState, shouldStop: () => boolean): Promise<SwapEstimateResult> {\n  const tokenIn = global.swapTokenInfo.bySlug[global.currentSwap.tokenInSlug!];\n  const tokenOut = global.swapTokenInfo.bySlug[global.currentSwap.tokenOutSlug!];\n\n  const from = resolveSwapAssetId(tokenIn);\n  const to = resolveSwapAssetId(tokenOut);\n  const fromAmount = global.currentSwap.amountIn ?? '0';\n  const swapType = selectSwapType(global);\n\n  const estimate = await callApi('swapCexEstimate', {\n    fromAmount,\n    from,\n    to,\n  });\n\n  if (shouldStop()) return undefined;\n\n  global = getGlobal();\n\n  if (!estimate) {\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: window.navigator.onLine ? SwapErrorType.InvalidPair : SwapErrorType.UnexpectedError,\n    };\n  }\n\n  if ('error' in estimate) {\n    const { error } = estimate as { error: string };\n    if (error.includes('requests limit')) {\n      return 'rateLimited';\n    }\n\n    return {\n      ...getSwapEstimateResetParams(global),\n      errorType: SwapErrorType.UnexpectedError,\n    };\n  }\n\n  const account = global.accounts?.byId[global.currentAccountId!];\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (swapType === SwapType.CrosschainFromWallet) {\n    if (tokenIn.chain !== 'ton' && tokenIn.chain !== 'tron') {\n      throw new Error(`Unexpected chain ${tokenIn.chain}`);\n    }\n\n    const toAddress = {\n      ton: account!.addressByChain.ton!,\n      tron: TRX_SWAP_COUNT_FEE_ADDRESS,\n    }[tokenIn.chain];\n\n    const txDraft = await callApi('checkTransactionDraft', tokenIn.chain, {\n      accountId: global.currentAccountId!,\n      toAddress,\n      tokenAddress: tokenIn.tokenAddress,\n    });\n    if (txDraft) {\n      ({ networkFee, realNetworkFee } = convertTransferFeesToSwapFees(txDraft, tokenIn.chain));\n    }\n  }\n\n  return {\n    ...getSwapEstimateResetParams(global),\n    amountOut: estimate.toAmount === '0' ? undefined : estimate.toAmount,\n    limits: {\n      fromMin: estimate.fromMin,\n      fromMax: estimate.fromMax,\n    },\n    swapFee: estimate.swapFee,\n    networkFee,\n    realNetworkFee,\n    ourFee: '0',\n    ourFeePercent: 0,\n    dieselStatus: 'not-available',\n    amountOutMin: estimate.toAmount,\n    errorType: Big(fromAmount).lt(estimate.fromMin)\n      ? SwapErrorType.ChangellyMinSwap\n      : Big(fromAmount).gt(estimate.fromMax)\n        ? SwapErrorType.ChangellyMaxSwap\n        : undefined,\n  };\n}\n\naddActionHandler('setSwapScreen', (global, actions, { state }) => {\n  if (state === SwapState.Initial) {\n    global = updateCurrentSwap(global, { swapId: generateUniqueId() });\n  }\n  global = updateCurrentSwap(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('clearSwapError', (global) => {\n  global = updateCurrentSwap(global, { error: undefined });\n  setGlobal(global);\n});\n\nasync function loadSwapPairs(tokenSlug: string) {\n  await waitFor(() => {\n    const { swapTokenInfo: { isLoaded, bySlug } } = getGlobal();\n    return !!(isLoaded || bySlug[tokenSlug]);\n  }, 500, 100);\n  let global = getGlobal();\n\n  const tokenIn = global.swapTokenInfo.bySlug[tokenSlug];\n  if (!tokenIn) {\n    return;\n  }\n\n  const assetId = resolveSwapAssetId(tokenIn);\n\n  const cache = pairsCache[tokenSlug];\n  const isCacheValid = cache && (Date.now() - cache.timestamp <= CACHE_DURATION);\n  if (isCacheValid) {\n    return;\n  }\n\n  const pairs = await callApi('swapGetPairs', assetId);\n  global = getGlobal();\n\n  let bySlug: AssetPairs;\n\n  if (pairs) {\n    const isTonTokenIn = tokenIn.chain === 'ton';\n\n    bySlug = pairs.reduce((acc, pair) => {\n      const isTonTokenOut = getIsTonToken(pair.slug, true);\n      const countTonTokens = Number(isTonTokenIn) + (isTonTokenOut ? 1 : 0);\n\n      const isMultichain = !(\n        (countTonTokens === 2) || (countTonTokens === 1 && [tokenIn.slug, pair.slug].includes(TONCOIN.slug))\n      );\n\n      acc[pair.slug] = {\n        ...(isMultichain && {\n          isMultichain,\n        }),\n        ...(pair.isReverseProhibited && {\n          isReverseProhibited: pair.isReverseProhibited,\n        }),\n      };\n      return acc;\n    }, {} as AssetPairs);\n\n    pairsCache[tokenSlug] = { timestamp: Date.now() };\n  } else {\n    bySlug = {};\n  }\n\n  setGlobal({\n    ...global,\n    swapPairs: {\n      bySlug: {\n        ...global.swapPairs?.bySlug,\n        [tokenSlug]: bySlug,\n      },\n    },\n  });\n}\n\naddActionHandler('setSwapCexAddress', (global, actions, { toAddress }) => {\n  global = updateCurrentSwap(global, { toAddress });\n  setGlobal(global);\n});\n\naddActionHandler('updatePendingSwaps', async (global) => {\n  const accountId = global.currentAccountId;\n  if (!accountId) return;\n\n  let { activities } = selectAccountState(global, accountId) ?? {};\n  if (!activities) return;\n\n  const ids = Object.values(activities.byId)\n    .filter((activity) => Boolean(\n      activity.kind === 'swap'\n      && activity.status === 'pending'\n      && activity.cex,\n    ))\n    .map(({ id }) => parseTxId(id).hash);\n  if (!ids.length) return;\n\n  const result = await callApi('fetchSwaps', accountId, ids);\n  if (!result?.swaps.length) return;\n\n  const { swaps, nonExistentIds } = result;\n\n  global = getGlobal();\n  if (global.currentAccountId !== accountId) return;\n\n  ({ activities } = selectAccountState(global, accountId) ?? {});\n\n  for (const swap of result.swaps) {\n    if (swap.isCanceled) {\n      swap.shouldHide = true;\n    }\n  }\n\n  const nonExistentSwaps: Record<string, ApiSwapActivity> = {};\n\n  for (const id of nonExistentIds) {\n    nonExistentSwaps[id] = {\n      ...activities!.byId[id] as ApiSwapActivity,\n      status: 'expired',\n      shouldHide: true,\n    };\n  }\n\n  global = updateAccountState(global, accountId, {\n    activities: {\n      ...activities,\n      byId: {\n        ...activities!.byId,\n        ...nonExistentSwaps,\n        ...buildCollectionByKey(swaps, 'id'),\n      },\n    },\n  });\n\n  setGlobal(global);\n});\n\naddActionHandler('setSwapDex', (global, actions, { dexLabel }) => {\n  const { estimates, bestRateDexLabel } = global.currentSwap;\n  const newEstimate = (estimates || []).find((estimate) => estimate.dexLabel === dexLabel);\n  if (!newEstimate) return;\n\n  global = updateCurrentSwap(global, {\n    amountIn: newEstimate.fromAmount,\n    amountOut: newEstimate.toAmount,\n    amountOutMin: newEstimate.toMinAmount,\n    networkFee: newEstimate.networkFee,\n    realNetworkFee: newEstimate.realNetworkFee,\n    swapFee: newEstimate.swapFee,\n    swapFeePercent: newEstimate.swapFeePercent,\n    ourFee: newEstimate.ourFee,\n    dieselFee: newEstimate.dieselFee,\n    priceImpact: newEstimate.impact,\n    currentDexLabel: dexLabel,\n    // The \"Best Rate\" selection should enable automatic best dex selection mode\n    isDexLabelChanged: dexLabel !== bestRateDexLabel ? true : undefined,\n  }, true);\n  setGlobal(global);\n});\n\nfunction convertTransferFeesToSwapFees(\n  txDraft: Pick<ApiCheckTransactionDraftResult, 'fee' | 'realFee'>,\n  chain: ApiChain,\n) {\n  const nativeToken = getNativeToken(chain);\n  let networkFee: string | undefined;\n  let realNetworkFee: string | undefined;\n\n  if (txDraft?.fee !== undefined) {\n    networkFee = toDecimal(txDraft.fee, nativeToken.decimals);\n  }\n  if (txDraft?.realFee !== undefined) {\n    realNetworkFee = toDecimal(txDraft.realFee, nativeToken.decimals);\n  }\n\n  return { networkFee, realNetworkFee };\n}\n\nexport type SwapEstimateResult = Partial<GlobalState['currentSwap']> | 'rateLimited' | undefined;\n\nlet isEstimatingSwap = false;\n\n/**\n * A boilerplate of swap estimation, ensuring consistent behavior in concurrent usage scenarios.\n * This function is expected to be called periodically, and you may call it as often as you like.\n *\n * You may call the `shouldStop` function to check whether it makes sense to continue estimating (because the result\n * is likely to be ignored). If `shouldStop` returns true, `estimate` may return any value (it will be ignored).\n */\nexport async function estimateSwapConcurrently(\n  estimate: (\n    global: GlobalState,\n    shouldStop: () => boolean,\n  ) => SwapEstimateResult | Promise<SwapEstimateResult>,\n) {\n  const initialGlobal = getGlobal();\n\n  if (shouldAvoidSwapEstimation(initialGlobal)) return;\n\n  // There should be only 1 swap estimation at a time. A timer in SwapInitial will trigger another estimation attempt.\n  if (isEstimatingSwap) {\n    return;\n  }\n\n  try {\n    isEstimatingSwap = true;\n\n    const isEstimateInputIntact = isSwapEstimateInputEqual.bind(undefined, initialGlobal);\n\n    const swapUpdate = await estimate(initialGlobal, () => {\n      const currentGlobal = getGlobal();\n      return shouldAvoidSwapEstimation(currentGlobal) || !isEstimateInputIntact(currentGlobal);\n    });\n\n    const finalGlobal = getGlobal();\n\n    // If the dependencies were changed during the estimation, the estimation result should be ignored and the loading\n    // indicator should stay (in order to avoid showing the outdated fee). A timer in SwapInitial will trigger another\n    // estimation attempt to get the up-to-date fee.\n    if (!isEstimateInputIntact(finalGlobal)) {\n      return;\n    }\n\n    // If the swap estimation request has been rate-limited, we should keep showing the loading indicator\n    if (swapUpdate === 'rateLimited') {\n      return;\n    }\n\n    setGlobal(updateCurrentSwap(finalGlobal, {\n      isEstimating: false,\n      ...(shouldAvoidSwapEstimation(finalGlobal) ? undefined : swapUpdate),\n    }));\n  } finally {\n    isEstimatingSwap = false;\n  }\n}\n\nfunction chooseSwapEstimate(\n  global: GlobalState,\n  newEstimates: ApiSwapEstimateVariant[],\n  proposedBestDexLabel: ApiSwapDexLabel,\n) {\n  if (newEstimates.length === 0) {\n    throw new Error('Unexpected empty `newEstimates` array');\n  }\n\n  const { tokenInSlug, currentDexLabel, isDexLabelChanged } = global.currentSwap;\n\n  // If the user has chosen a Dex manually, respect that choice\n  if (currentDexLabel && isDexLabelChanged) {\n    const selectedEstimate = newEstimates.find(({ dexLabel }) => dexLabel === currentDexLabel);\n    if (selectedEstimate) {\n      return selectedEstimate;\n    }\n  }\n\n  // Otherwise, select automatically\n  const tokenIn = tokenInSlug ? global.swapTokenInfo.bySlug[tokenInSlug] : undefined;\n  const tokenInBalance = tokenInSlug ? selectCurrentAccountTokenBalance(global, tokenInSlug) : undefined;\n  const nativeTokenIn = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n  const nativeTokenInBalance = nativeTokenIn && selectCurrentAccountTokenBalance(global, nativeTokenIn.slug);\n  let availableEstimates = newEstimates.filter((variant) => canAffordSwapEstimateVariant({\n    variant,\n    tokenIn,\n    tokenInBalance,\n    nativeTokenInBalance,\n  }));\n\n  if (availableEstimates.length === 0) {\n    availableEstimates = newEstimates;\n  }\n\n  return availableEstimates.find(({ dexLabel }) => dexLabel === proposedBestDexLabel)\n    ?? availableEstimates[0];\n}\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateTokenPriceHistory } from '../../reducers/tokens';\n\naddActionHandler('loadPriceHistory', async (global, actions, payload) => {\n  const { slug, period, currency = global.settings.baseCurrency } = payload ?? {};\n\n  const history = await callApi('fetchPriceHistory', slug, period, currency);\n\n  if (!history) {\n    return;\n  }\n\n  global = getGlobal();\n  global = updateTokenPriceHistory(global, slug, { [period]: history });\n  setGlobal(global);\n});\n","import type { ApiCheckTransactionDraftResult, ApiSubmitMultiTransferResult } from '../../../api/chains/ton/types';\nimport type { ApiSubmitTransferOptions, ApiSubmitTransferResult } from '../../../api/methods/types';\nimport { ApiTransactionDraftError, type ApiTransactionError, type ApiTransferToSign } from '../../../api/types';\nimport { TransferState } from '../../types';\n\nimport { NFT_BATCH_SIZE } from '../../../config';\nimport { bigintDivideToNumber } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { explainApiTransferFee, getDieselTokenAmount } from '../../../util/fee/transferFee';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInNative } from '../../../util/multitab';\nimport { shouldShowSeedPhraseScamWarning } from '../../../util/scamDetection';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { ApiHardwareBlindSigningNotEnabled, ApiUserRejectsError } from '../../../api/errors';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  preserveMaxTransferAmount,\n  setIsPinAccepted,\n  updateAccount,\n  updateAccountState,\n  updateCurrentTransfer,\n  updateCurrentTransferByCheckResult,\n  updateCurrentTransferLoading,\n} from '../../reducers';\nimport {\n  selectAccountState,\n  selectCurrentAccount,\n  selectCurrentAccountTokens,\n  selectCurrentNetwork,\n  selectToken,\n  selectTokenAddress,\n} from '../../selectors';\n\naddActionHandler('submitTransferInitial', async (global, actions, payload) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('submitTransferInitial', payload);\n    return;\n  }\n\n  const {\n    tokenSlug,\n    toAddress,\n    comment,\n    shouldEncrypt,\n    nfts,\n    withDiesel,\n    stateInit,\n    isGaslessWithStars,\n    binPayload,\n  } = payload;\n  let { amount } = payload;\n\n  setGlobal(updateCurrentTransferLoading(global, true));\n\n  const isNftTransfer = Boolean(nfts?.length);\n  let result: ApiCheckTransactionDraftResult | undefined;\n\n  if (isNftTransfer) {\n    // This assignment is needed only for the amount checking hack in the 'newLocalActivities' handler in\n    // `src/global/actions/apiUpdates/activities.ts` to work.\n    amount = 0n;\n\n    result = await callApi('checkNftTransferDraft', {\n      accountId: global.currentAccountId!,\n      nfts,\n      toAddress,\n      comment,\n    });\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n    result = await callApi('checkTransactionDraft', chain, {\n      accountId: global.currentAccountId!,\n      tokenAddress,\n      toAddress,\n      amount,\n      data: binPayload ?? comment,\n      shouldEncrypt,\n      stateInit,\n      isBase64Data: Boolean(binPayload),\n      allowGasless: true,\n    });\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransferLoading(global, false);\n\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n\n  if (!result || 'error' in result) {\n    setGlobal(global);\n\n    if (result?.error === ApiTransactionDraftError.InsufficientBalance && !isNftTransfer) {\n      actions.showDialog({ message: 'The network fee has slightly changed, try sending again.' });\n    } else {\n      actions.showError({ error: result?.error });\n    }\n\n    return;\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: TransferState.Confirm,\n    error: undefined,\n    toAddress,\n    resolvedAddress: result.resolvedAddress,\n    amount,\n    comment,\n    shouldEncrypt,\n    tokenSlug,\n    isToNewAddress: result.isToAddressNew,\n    withDiesel,\n    isGaslessWithStars,\n  }));\n});\n\naddActionHandler('fetchTransferFee', async (global, actions, payload) => {\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const {\n    tokenSlug, toAddress, comment, shouldEncrypt, binPayload, stateInit,\n  } = payload;\n\n  const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n  const result = await callApi('checkTransactionDraft', chain, {\n    accountId: global.currentAccountId!,\n    toAddress,\n    data: binPayload ?? comment,\n    tokenAddress,\n    shouldEncrypt,\n    isBase64Data: Boolean(binPayload),\n    stateInit,\n    allowGasless: true,\n  });\n\n  global = getGlobal();\n\n  if (tokenSlug !== global.currentTransfer.tokenSlug || global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error && result.error !== ApiTransactionDraftError.InsufficientBalance) {\n    actions.showError({ error: result.error });\n  }\n\n  if (result?.error === ApiTransactionDraftError.InsufficientBalance) {\n    const currentAccount = selectCurrentAccount(global)!;\n    const accountTokens = selectCurrentAccountTokens(global)!;\n    const { chain } = selectToken(global, tokenSlug);\n\n    if (shouldShowSeedPhraseScamWarning(currentAccount, accountTokens, chain)) {\n      global = getGlobal();\n      global = updateCurrentTransfer(global, { shouldShowScamWarning: true });\n      // Clear `importedAt` so the warning only shows once\n      global = updateAccount(global, global.currentAccountId!, { importedAt: undefined });\n      setGlobal(global);\n    }\n  }\n});\n\naddActionHandler('fetchNftFee', async (global, actions, payload) => {\n  const { toAddress, nfts, comment } = payload;\n\n  global = updateCurrentTransfer(global, { isLoading: true, error: undefined });\n  setGlobal(global);\n\n  const result = await callApi('checkNftTransferDraft', {\n    accountId: global.currentAccountId!,\n    nfts,\n    toAddress,\n    comment,\n  });\n\n  global = getGlobal();\n\n  if (!global.currentTransfer.nfts?.length) {\n    // For cases when the user switches the token transfer mode before the result arrives\n    return;\n  }\n\n  global = updateCurrentTransfer(global, { isLoading: false });\n  if (result) {\n    global = updateCurrentTransferByCheckResult(global, result);\n  }\n  setGlobal(global);\n\n  if (result?.error) {\n    actions.showError({\n      error: result?.error === ApiTransactionDraftError.InsufficientBalance\n        ? 'Insufficient TON for fee.'\n        : result.error,\n    });\n  }\n});\n\naddActionHandler('submitTransferPassword', async (global, actions, { password }) => {\n  const {\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    shouldEncrypt,\n    binPayload,\n    nfts,\n    withDiesel,\n    diesel,\n    stateInit,\n    isGaslessWithStars,\n  } = global.currentTransfer;\n\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateCurrentTransfer(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n  });\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (promiseId) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = setIsPinAccepted(global);\n      setGlobal(global);\n    }\n\n    void callApi('confirmDappRequest', promiseId, password);\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const fullNativeFee = explainedFee.fullFee?.nativeSum;\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: ApiSubmitTransferResult | ApiSubmitMultiTransferResult | undefined;\n\n  if (nfts?.length) {\n    const chunks = [];\n    for (let i = 0; i < nfts.length; i += NFT_BATCH_SIZE) {\n      chunks.push(nfts.slice(i, i + NFT_BATCH_SIZE));\n    }\n\n    for (const chunk of chunks) {\n      const batchResult = await callApi(\n        'submitNftTransfers',\n        global.currentAccountId!,\n        password,\n        chunk,\n        resolvedAddress!,\n        comment,\n        realNativeFee && bigintDivideToNumber(realNativeFee, nfts.length / chunk.length),\n      );\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + chunk.length,\n      });\n      setGlobal(global);\n      // TODO - process all responses from the API\n      result = batchResult;\n    }\n  } else {\n    const { tokenAddress, chain } = selectToken(global, tokenSlug);\n\n    const options: ApiSubmitTransferOptions = {\n      accountId: global.currentAccountId!,\n      password,\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment: binPayload ?? comment,\n      tokenAddress,\n      fee: fullNativeFee,\n      realFee: realNativeFee,\n      shouldEncrypt,\n      isBase64Data: Boolean(binPayload),\n      withDiesel,\n      dieselAmount: diesel && getDieselTokenAmount(diesel),\n      stateInit,\n      isGaslessWithStars,\n    };\n\n    result = await callApi('submitTransfer', chain, options);\n  }\n\n  global = getGlobal();\n  global = updateCurrentTransfer(global, {\n    isLoading: false,\n  });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n  } else {\n    void vibrateOnSuccess();\n  }\n});\n\naddActionHandler('submitTransferHardware', async (global, actions) => {\n  const {\n    toAddress,\n    resolvedAddress,\n    comment,\n    amount,\n    promiseId,\n    tokenSlug,\n    rawPayload,\n    parsedPayload,\n    stateInit,\n    nfts,\n  } = global.currentTransfer;\n\n  const accountId = global.currentAccountId!;\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: true,\n    error: undefined,\n    state: TransferState.ConfirmHardware,\n  }));\n\n  const ledgerApi = await import('../../../util/ledger');\n\n  if (promiseId) {\n    const message: ApiTransferToSign = {\n      toAddress: toAddress!,\n      amount: amount!,\n      rawPayload,\n      payload: parsedPayload,\n      stateInit,\n    };\n\n    try {\n      const signedMessage = await ledgerApi.signLedgerTransactions(accountId, [message]);\n      void callApi('confirmDappRequest', promiseId, signedMessage);\n    } catch (err) {\n      if (err instanceof ApiUserRejectsError) {\n        setGlobal(updateCurrentTransfer(getGlobal(), {\n          isLoading: false,\n          error: 'Canceled by the user',\n        }));\n      } else {\n        void callApi('cancelDappRequest', promiseId, 'Unknown error.');\n      }\n    }\n    return;\n  }\n\n  const explainedFee = explainApiTransferFee(global.currentTransfer);\n  const realNativeFee = explainedFee.realFee?.nativeSum;\n\n  let result: string | { error: ApiTransactionError } | undefined;\n  let error: string | undefined;\n\n  if (nfts?.length) {\n    for (const nft of nfts) {\n      const currentResult = await ledgerApi.submitLedgerNftTransfer({\n        accountId: global.currentAccountId!,\n        nftAddress: nft.address,\n        password: '',\n        toAddress: resolvedAddress!,\n        comment,\n        nft,\n        realFee: realNativeFee && realNativeFee / BigInt(nfts.length),\n      });\n\n      global = getGlobal();\n      global = updateCurrentTransfer(global, {\n        sentNftsCount: (global.currentTransfer.sentNftsCount || 0) + 1,\n      });\n      setGlobal(global);\n      result = currentResult;\n    }\n  } else {\n    const tokenAddress = selectTokenAddress(global, tokenSlug);\n    const options = {\n      accountId: global.currentAccountId!,\n      password: '',\n      toAddress: resolvedAddress!,\n      amount: amount!,\n      comment,\n      tokenAddress,\n      realFee: realNativeFee,\n    };\n\n    try {\n      result = await ledgerApi.submitLedgerTransfer(options, tokenSlug);\n    } catch (err: any) {\n      if (err instanceof ApiHardwareBlindSigningNotEnabled) {\n        error = '$hardware_blind_sign_not_enabled';\n      }\n    }\n  }\n\n  if (!error && result === undefined) {\n    error = 'Declined';\n  } else if (typeof result === 'object' && 'error' in result) {\n    actions.showError({\n      error: result.error,\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(getGlobal(), {\n    isLoading: false,\n    error,\n  }));\n});\n\naddActionHandler('cancelTransfer', (global, actions, { shouldReset } = {}) => {\n  const { promiseId, tokenSlug } = global.currentTransfer;\n\n  if (shouldReset) {\n    if (promiseId) {\n      void callApi('cancelDappRequest', promiseId, 'Canceled by the user');\n    }\n\n    global = clearCurrentTransfer(global);\n    global = updateCurrentTransfer(global, { tokenSlug });\n\n    setGlobal(global);\n    return;\n  }\n\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n  global = updateCurrentTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('fetchTransferDieselState', async (global, actions, { tokenSlug }) => {\n  const tokenAddress = selectTokenAddress(global, tokenSlug);\n  if (!tokenAddress) return;\n\n  const diesel = await callApi('fetchEstimateDiesel', global.currentAccountId!, tokenAddress);\n  if (!diesel) return;\n\n  global = getGlobal();\n  const accountState = selectAccountState(global, global.currentAccountId!);\n  global = preserveMaxTransferAmount(global, updateCurrentTransfer(global, { diesel }));\n  if (accountState?.isDieselAuthorizationStarted && diesel.status !== 'not-authorized') {\n    global = updateAccountState(global, global.currentAccountId!, { isDieselAuthorizationStarted: undefined });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('checkTransferAddress', async (global, actions, { address }) => {\n  if (!address) {\n    global = updateCurrentTransfer(global, { toAddressName: undefined, resolvedAddress: undefined });\n    setGlobal(global);\n\n    return;\n  }\n\n  const network = selectCurrentNetwork(global);\n  const result = await callApi('getAddressInfo', network, address);\n\n  global = getGlobal();\n  if (!result || 'error' in result) {\n    global = updateCurrentTransfer(global, { toAddressName: undefined, resolvedAddress: undefined });\n  } else {\n    global = updateCurrentTransfer(global, {\n      toAddressName: result.addressName,\n      resolvedAddress: result.resolvedAddress,\n    });\n  }\n  setGlobal(global);\n});\n","import type { ApiChain } from '../api/types';\nimport type { Account, UserToken } from '../global/types';\n\nimport { TRC20_USDT_MAINNET_SLUG, TRX } from '../config';\nimport { HOUR } from './dateFormat';\n\nexport function shouldShowSeedPhraseScamWarning(\n  account: Account,\n  accountTokens: UserToken[],\n  transferTokenChain: ApiChain,\n): boolean {\n  // Only check for recently imported accounts (within 1 hour)\n  if (!account.importedAt || Date.now() - account.importedAt > HOUR) {\n    return false;\n  }\n\n  // Only show when trying to transfer TRON tokens\n  if (transferTokenChain !== 'tron') {\n    return false;\n  }\n\n  // Check if account has TRON tokens (like USDT)\n  const hasTronTokens = accountTokens.some((token) =>\n    token.slug === TRC20_USDT_MAINNET_SLUG\n    || (token.chain === 'tron' && token.amount > 0n && token.slug !== TRX.slug),\n  );\n\n  return hasTronTokens;\n}\n","import {\n  BURN_ADDRESS, NOTCOIN_EXCHANGERS, NOTCOIN_VOUCHERS_ADDRESS, TONCOIN,\n} from '../../../config';\nimport { findDifference } from '../../../util/iteratees';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountState } from '../../reducers';\nimport { selectCurrentAccountState } from '../../selectors';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nconst NBS_INIT_TIMEOUT = IS_DELEGATING_BOTTOM_SHEET ? 100 : 0;\n\naddActionHandler('burnNfts', (global, actions, { nfts }) => {\n  actions.startTransfer({\n    isPortrait: getIsPortrait(),\n    nfts,\n  });\n\n  const isNotcoinVouchers = nfts.some((n) => n.collectionAddress === NOTCOIN_VOUCHERS_ADDRESS);\n\n  setTimeout(() => {\n    actions.submitTransferInitial({\n      tokenSlug: TONCOIN.slug,\n      amount: 0n,\n      toAddress: isNotcoinVouchers ? NOTCOIN_EXCHANGERS[0] : BURN_ADDRESS,\n      nfts,\n    });\n  }, NBS_INIT_TIMEOUT);\n});\n\naddActionHandler('addNftsToBlacklist', (global, actions, { addresses: nftAddresses }) => {\n  // Force hide NFT - remove it from whitelist and add to blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses: [...blacklistedNftAddresses, ...nftAddresses],\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('addNftsToWhitelist', (global, actions, { addresses: nftAddresses }) => {\n  // Force show NFT - remove it from blacklist and add to whitelist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n  blacklistedNftAddresses = findDifference(blacklistedNftAddresses, nftAddresses);\n  whitelistedNftAddresses = findDifference(whitelistedNftAddresses, nftAddresses);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses: [...whitelistedNftAddresses, ...nftAddresses],\n  });\n});\n\naddActionHandler('removeNftSpecialStatus', (global, actions, { address: nftAddress }) => {\n  // Stop forcing to show/hide NFT if it was in whitelist/blacklist\n  let { blacklistedNftAddresses = [], whitelistedNftAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  blacklistedNftAddresses = blacklistedNftAddresses.filter((address) => address !== nftAddress);\n  whitelistedNftAddresses = whitelistedNftAddresses.filter((address) => address !== nftAddress);\n\n  return updateCurrentAccountState(global, {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  });\n});\n\naddActionHandler('openUnhideNftModal', (global, actions, { address, name }) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: true,\n    selectedNftToUnhide: { address, name },\n  });\n});\n\naddActionHandler('closeUnhideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    isUnhideNftModalOpen: undefined,\n    selectedNftToUnhide: undefined,\n  });\n});\n\naddActionHandler('openHideNftModal', (global, actions, { addresses, isCollection }) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: { addresses, isCollection },\n  });\n});\n\naddActionHandler('closeHideNftModal', (global) => {\n  return updateCurrentAccountState(global, {\n    selectedNftsToHide: undefined,\n  });\n});\n\naddActionHandler('openNftAttributesModal', (global, actions, { nft }) => {\n  return updateCurrentAccountState(global, { currentNftForAttributes: nft });\n});\n\naddActionHandler('closeNftAttributesModal', (global) => {\n  return updateCurrentAccountState(global, { currentNftForAttributes: undefined });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport type { GlobalState } from '../../types';\nimport { ApiCommonError } from '../../../api/types';\nimport { MintCardState } from '../../types';\n\nimport { IS_CORE_WALLET, MINT_CARD_ADDRESS, MINT_CARD_COMMENT, TONCOIN } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { fromDecimal } from '../../../util/decimals';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateAccountSettings,\n  updateAccountState,\n  updateMintCards,\n} from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('submitMintCard', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateMintCards(getGlobal(), { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateMintCards(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  const options = createTransferOptions(getGlobal(), password);\n  const result = await callApi('submitTransfer', 'ton', options);\n  const transferError = !result || 'error' in result\n    ? result?.error ?? ApiCommonError.Unexpected\n    : undefined;\n\n  handleTransferResult(getGlobal(), accountId, transferError);\n});\n\naddActionHandler('submitMintCardHardware', async (global) => {\n  const accountId = global.currentAccountId!;\n\n  global = updateMintCards(global, {\n    isLoading: true,\n    error: undefined,\n    state: MintCardState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  const options = createTransferOptions(getGlobal(), '');\n  const result = await ledgerApi.submitLedgerTransfer(options, TONCOIN.slug);\n  const transferError = !result ? ApiCommonError.Unexpected : undefined;\n\n  handleTransferResult(getGlobal(), accountId, transferError);\n});\n\nfunction createTransferOptions(globalState: GlobalState, password: string): ApiSubmitTransferOptions {\n  const { currentAccountId, currentMintCard } = globalState;\n  const { config } = selectAccountState(globalState, currentAccountId!)!;\n  const { cardsInfo } = config!;\n  const type = currentMintCard!.type!;\n  const cardInfo = cardsInfo![type];\n\n  return {\n    accountId: currentAccountId!,\n    password,\n    toAddress: MINT_CARD_ADDRESS,\n    amount: fromDecimal(cardInfo.price, TONCOIN.decimals),\n    comment: MINT_CARD_COMMENT,\n  };\n}\n\nfunction handleTransferResult(global: GlobalState, accountId: string, error?: string) {\n  global = updateMintCards(global, { isLoading: false });\n  setGlobal(global);\n\n  if (error) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    getActions().showError({ error });\n    return;\n  }\n\n  void vibrateOnSuccess();\n  global = getGlobal();\n  global = updateMintCards(global, { state: MintCardState.Done });\n  global = updateAccountState(global, accountId, { isCardMinting: true });\n  setGlobal(global);\n}\n\naddActionHandler('checkCardNftOwnership', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET || IS_CORE_WALLET) return;\n\n  const { byAccountId } = global.settings;\n\n  Object.entries(byAccountId).forEach(async ([accountId, settings]) => {\n    const cardBackgroundNftAddress = settings.cardBackgroundNft?.address;\n    const accentColorNftAddress = settings.accentColorNft?.address;\n\n    if (!cardBackgroundNftAddress && !accentColorNftAddress) return;\n\n    const promises = [\n      cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, cardBackgroundNftAddress)\n        : undefined,\n      accentColorNftAddress && accentColorNftAddress !== cardBackgroundNftAddress\n        ? callApi('checkNftOwnership', accountId, accentColorNftAddress)\n        : undefined,\n    ];\n\n    const [isCardBackgroundNftOwned, isAccentColorNftOwned] = await Promise.all(promises);\n\n    let newGlobal = getGlobal();\n\n    if (cardBackgroundNftAddress && isCardBackgroundNftOwned === false) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        cardBackgroundNft: undefined,\n      });\n    }\n\n    if (accentColorNftAddress && (\n      (accentColorNftAddress === cardBackgroundNftAddress && isCardBackgroundNftOwned === false)\n      || (accentColorNftAddress !== cardBackgroundNftAddress && isAccentColorNftOwned === false)\n    )) {\n      newGlobal = updateAccountSettings(newGlobal, accountId, {\n        accentColorNft: undefined,\n        accentColorIndex: undefined,\n      });\n    }\n\n    setGlobal(newGlobal);\n  });\n});\n","import type { ApiSubmitTransferOptions } from '../../../api/methods/types';\nimport { ApiCommonError } from '../../../api/types';\nimport { VestingUnfreezeState } from '../../types';\n\nimport {\n  CLAIM_ADDRESS,\n  CLAIM_AMOUNT,\n  CLAIM_COMMENT,\n  MYCOIN,\n  MYCOIN_TESTNET,\n  TONCOIN,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateVesting,\n} from '../../reducers';\nimport { selectVestingPartsReadyToUnfreeze } from '../../selectors';\n\naddActionHandler('submitClaimingVesting', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  if (!(await callApi('verifyPassword', password))) {\n    setGlobal(updateVesting(getGlobal(), accountId, { error: 'Wrong password, please try again.' }));\n\n    return;\n  }\n  global = getGlobal();\n\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  global = updateVesting(global, accountId, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitClaimingVesting', { password });\n    return;\n  }\n\n  global = getGlobal();\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n\n  const options: ApiSubmitTransferOptions = {\n    accountId: global.currentAccountId!,\n    password,\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n  const result = await callApi('submitTransfer', 'ton', options);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result || 'error' in result) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    actions.showError({ error: result?.error });\n    return;\n  } else {\n    void vibrateOnSuccess();\n  }\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, {\n    isConfirmRequested: undefined,\n    unfreezeRequestedIds,\n  });\n  setGlobal(global);\n\n  actions.openVestingModal();\n});\n\naddActionHandler('submitClaimingVestingHardware', async (global, actions) => {\n  global = updateVesting(global, global.currentAccountId!, {\n    isLoading: true,\n    error: undefined,\n    unfreezeState: VestingUnfreezeState.ConfirmHardware,\n  });\n  setGlobal(global);\n\n  const ledgerApi = await import('../../../util/ledger');\n  global = getGlobal();\n\n  const accountId = global.currentAccountId!;\n  const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n  const options: ApiSubmitTransferOptions = {\n    accountId,\n    password: '',\n    toAddress: CLAIM_ADDRESS,\n    amount: CLAIM_AMOUNT,\n    comment: CLAIM_COMMENT,\n  };\n\n  const result = await ledgerApi.submitLedgerTransfer(options, TONCOIN.slug);\n\n  global = getGlobal();\n  global = updateVesting(global, accountId, { isLoading: false });\n  setGlobal(global);\n\n  if (!result) {\n    actions.showError({ error: ApiCommonError.Unexpected });\n  } else {\n    global = getGlobal();\n    global = updateVesting(global, accountId, {\n      isConfirmRequested: undefined,\n      unfreezeRequestedIds,\n    });\n    setGlobal(global);\n    actions.openVestingModal();\n  }\n});\n\naddActionHandler('loadMycoin', (global, actions) => {\n  const { isTestnet } = global.settings;\n\n  actions.importToken({ address: isTestnet ? MYCOIN_TESTNET.minterAddress : MYCOIN.minterAddress });\n});\n","import Deferred from './Deferred';\n\nexport function createAbortableFunction<TArgs extends unknown[], TAbort, TFnResult>(\n  toReturnOnAbort: TAbort,\n  fn: (...args: TArgs) => Promise<TFnResult>,\n): (...args: TArgs) => Promise<TAbort | TFnResult> {\n  let abort = new Deferred<TAbort>();\n\n  return function abortableFunction(...args: TArgs): Promise<TAbort | TFnResult> {\n    abort.resolve(toReturnOnAbort);\n\n    abort = new Deferred<TAbort>();\n    return Promise.race([fn(...args), abort.promise]);\n  };\n}\n","import type { ApiNotificationsAccountValue } from '../../api/types';\nimport type { GlobalState } from '../types';\n\nexport function deleteNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const { [accountId]: deleted, ...newEnabledAccounts } = currentEnabledAccounts;\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function deleteAllNotificationAccounts(\n  global: GlobalState,\n): GlobalState {\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: {},\n    },\n  };\n}\n\nexport function createNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: Partial<ApiNotificationsAccountValue> = {},\n): GlobalState {\n  const currentEnabledAccounts = global.pushNotifications.enabledAccounts;\n\n  const newEnabledAccounts = { ...currentEnabledAccounts, [accountId]: value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n\nexport function updateNotificationAccount(\n  global: GlobalState,\n  accountId: string,\n  value: ApiNotificationsAccountValue,\n): GlobalState {\n  const newEnabledAccounts = global.pushNotifications.enabledAccounts;\n  newEnabledAccounts[accountId] = { ...newEnabledAccounts[accountId], ...value };\n\n  return {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  };\n}\n","import type {\n  ApiNotificationAddress,\n  ApiNotificationsAccountValue,\n  ApiSubscribeNotificationsProps,\n  ApiSubscribeNotificationsResult,\n  ApiUnsubscribeNotificationsProps,\n} from '../../../api/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { createAbortableFunction } from '../../../util/createAbortableFunction';\nimport isEmptyObject from '../../../util/isEmptyObject';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  createNotificationAccount,\n  deleteAllNotificationAccounts,\n  deleteNotificationAccount,\n  updateNotificationAccount,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\nconst abortableSubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiSubscribeNotificationsProps) => {\n    return callApi('subscribeNotifications', request);\n  },\n);\n\nconst abortableUnsubscribeNotifications = createAbortableFunction(\n  { aborted: true },\n  (request: ApiUnsubscribeNotificationsProps) => {\n    return callApi('unsubscribeNotifications', request);\n  },\n);\n\naddActionHandler('registerNotifications', async (global, actions, { userToken, platform }) => {\n  const { pushNotifications } = global;\n\n  let createResult;\n  let enabledAccounts = Object.keys(pushNotifications.enabledAccounts);\n  const accounts = selectAccounts(global) || {};\n  if (!pushNotifications.userToken && !isEmptyObject(accounts)) {\n    const notificationAddresses = selectNotificationTonAddressesSlow(\n      global,\n      Object.keys(accounts),\n      MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT,\n    );\n    enabledAccounts = Object.keys(notificationAddresses);\n\n    createResult = await callApi('subscribeNotifications', {\n      userToken,\n      platform,\n      addresses: Object.values(notificationAddresses),\n    });\n  } else if (pushNotifications.userToken !== userToken && enabledAccounts.length) {\n    [createResult] = await Promise.all([\n      callApi('subscribeNotifications', {\n        userToken,\n        platform,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, enabledAccounts)),\n      }),\n      callApi('unsubscribeNotifications', {\n        userToken: pushNotifications.userToken!,\n        addresses: Object.values(selectNotificationTonAddressesSlow(global, enabledAccounts)),\n      }),\n    ]);\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      userToken,\n      platform,\n    },\n  };\n\n  if (!createResult || 'error' in createResult) {\n    setGlobal(global);\n    return;\n  }\n\n  const newEnabledAccounts = enabledAccounts.reduce((acc, accountId) => {\n    const tonAddress = accounts[accountId].addressByChain.ton;\n    if (tonAddress) {\n      acc[accountId] = createResult.addressKeys[tonAddress];\n    }\n\n    return acc;\n  }, {} as Record<string, ApiNotificationsAccountValue>);\n\n  setGlobal({\n    ...global,\n    pushNotifications: {\n      ...global.pushNotifications,\n      enabledAccounts: newEnabledAccounts,\n    },\n  });\n});\n\naddActionHandler('deleteNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, enabledAccounts } = global.pushNotifications;\n  const pushNotificationsAccount = enabledAccounts[accountId];\n\n  if (!userToken) {\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n\n  const addresses = Object.values(selectNotificationTonAddressesSlow(global, [accountId]));\n  if (addresses.length === 0) {\n    return;\n  }\n\n  const props = { userToken, addresses };\n  const result = withAbort\n    ? await abortableUnsubscribeNotifications(props)\n    : await callApi('unsubscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(createNotificationAccount(\n      global,\n      accountId,\n      pushNotificationsAccount,\n    ));\n    return;\n  }\n\n  setGlobal(deleteNotificationAccount(global, accountId));\n});\n\naddActionHandler('createNotificationAccount', async (global, actions, { accountId, withAbort }) => {\n  const { userToken, platform } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const addresses = Object.values(selectNotificationTonAddressesSlow(global, [accountId]));\n  if (!addresses.length) {\n    return;\n  }\n\n  setGlobal(createNotificationAccount(\n    global,\n    accountId,\n    {},\n  ));\n\n  const props = { userToken, platform, addresses };\n  const result = withAbort\n    ? await abortableSubscribeNotifications(props)\n    : await callApi('subscribeNotifications', props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    setGlobal(deleteNotificationAccount(\n      global,\n      accountId,\n    ));\n    return;\n  }\n\n  setGlobal(updateNotificationAccount(\n    global,\n    accountId,\n    result.addressKeys[addresses[0].address],\n  ));\n});\n\naddActionHandler('toggleNotifications', async (global, actions, { isEnabled }) => {\n  const {\n    enabledAccounts = {}, userToken = '', platform, isAvailable,\n  } = global.pushNotifications;\n\n  if (!isAvailable) {\n    return;\n  }\n\n  let notificationAccounts: Record<string, ApiNotificationAddress>;\n\n  if (isEnabled) {\n    notificationAccounts = selectNotificationTonAddressesSlow(\n      global,\n      Object.keys(selectAccounts(global) || {}),\n      MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT,\n    );\n    for (const newAccountId of Object.keys(notificationAccounts)) {\n      global = createNotificationAccount(global, newAccountId, {});\n    }\n  } else {\n    notificationAccounts = selectNotificationTonAddressesSlow(global, Object.keys(enabledAccounts));\n    global = deleteAllNotificationAccounts(global);\n  }\n\n  setGlobal(global);\n  if (isEmptyObject(notificationAccounts)) {\n    return;\n  }\n\n  const props = { userToken, addresses: Object.values(notificationAccounts), platform: platform! };\n  const result = isEnabled\n    ? await abortableSubscribeNotifications(props)\n    : await abortableUnsubscribeNotifications(props);\n\n  if (result && 'aborted' in result) {\n    return;\n  }\n\n  global = getGlobal();\n\n  if (!result || !('ok' in result)) {\n    if (isEnabled) {\n      global = deleteAllNotificationAccounts(global);\n    } else {\n      for (const accountId of Object.keys(notificationAccounts)) {\n        global = createNotificationAccount(global, accountId, enabledAccounts[accountId]);\n      }\n    }\n    setGlobal(global);\n    return;\n  }\n\n  if (isEnabled && 'addressKeys' in result) {\n    const addressKeys = (result as ApiSubscribeNotificationsResult).addressKeys;\n    for (const [accountId, { address }] of Object.entries(notificationAccounts)) {\n      if (addressKeys[address]) {\n        global = createNotificationAccount(global, accountId, addressKeys[address]);\n      }\n    }\n  }\n\n  setGlobal(global);\n});\n","import type { ApiNft } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { DomainLinkingState, DomainRenewalState } from '../../types';\n\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport {\n  clearIsPinAccepted,\n  setIsPinAccepted,\n  updateCurrentDomainLinking,\n  updateCurrentDomainRenewal,\n} from '../../reducers';\nimport { selectCurrentAccount, selectCurrentAccountState, selectCurrentNetwork } from '../../selectors';\n\ntype DomainOperationResultError = { error: string } | undefined;\ntype DomainOperationResultSuccess = string;\ntype DomainOperationResult = Array<DomainOperationResultSuccess | DomainOperationResultError>;\ntype DomainOperationType = 'renewal' | 'linking';\n\ntype DomainStateUpdate<T extends DomainOperationType> = {\n  isLoading: boolean;\n  error?: string;\n  txId?: string;\n  state: T extends 'renewal' ? DomainRenewalState : DomainLinkingState;\n};\n\ntype DomainStateReducer<T extends DomainOperationType> = (\n  global: GlobalState,\n  update: DomainStateUpdate<T>,\n) => GlobalState;\n\nfunction handleDomainOperationResult<T extends DomainOperationType>(\n  global: GlobalState,\n  result: DomainOperationResult,\n  updateState: DomainStateReducer<T>,\n  state: T extends 'renewal' ? DomainRenewalState : DomainLinkingState,\n) {\n  global = updateState(global, {\n    isLoading: false,\n    state,\n    ...(result.length === 1 && typeof result[0] === 'string' ? { txId: result[0] } : undefined),\n  });\n  setGlobal(global);\n\n  if (result.some((value) => (typeof value !== 'string'))) {\n    if (getDoesUsePinPad()) {\n      global = getGlobal();\n      global = clearIsPinAccepted(global);\n      setGlobal(global);\n    }\n    void vibrateOnError();\n    getActions().showError({ error: 'Failed to process domain operation. Please try again.' });\n    return;\n  }\n\n  void vibrateOnSuccess();\n}\n\nfunction prepareHardwareOperation<T extends DomainOperationType>(\n  global: GlobalState,\n  updateState: DomainStateReducer<T>,\n  state: T extends 'renewal' ? DomainRenewalState : DomainLinkingState,\n) {\n  global = updateState(global, {\n    isLoading: true,\n    error: undefined,\n    state,\n  });\n  setGlobal(global);\n\n  return getGlobal();\n}\n\nasync function verifyPasswordAndUpdateState(\n  global: GlobalState,\n  password: string,\n  operationType: DomainOperationType,\n) {\n  if (!(await callApi('verifyPassword', password))) {\n    const updateState = operationType === 'renewal' ? updateCurrentDomainRenewal : updateCurrentDomainLinking;\n    setGlobal(updateState(getGlobal(), { error: 'Wrong password, please try again.' }));\n    return false;\n  }\n\n  global = getGlobal();\n  if (getDoesUsePinPad()) {\n    global = setIsPinAccepted(global);\n  }\n\n  const updateState = operationType === 'renewal' ? updateCurrentDomainRenewal : updateCurrentDomainLinking;\n  global = updateState(global, {\n    isLoading: true,\n    error: undefined,\n  });\n  setGlobal(global);\n  await vibrateOnSuccess(true);\n\n  return true;\n}\n\naddActionHandler('checkDomainsRenewalDraft', async (global, actions, { nfts }) => {\n  const accountId = global.currentAccountId!;\n\n  const result = await callApi('checkDnsRenewalDraft', accountId, nfts);\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDomainRenewal(global, { realFee: result.realFee });\n  setGlobal(global);\n});\n\naddActionHandler('submitDomainsRenewal', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  if (!nftsByAddress) return;\n\n  if (!(await verifyPasswordAndUpdateState(global, password, 'renewal'))) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const nftAddresses = global.currentDomainRenewal.addresses!;\n  const realFee = global.currentDomainRenewal.realFee!;\n  const nfts = nftAddresses\n    .map((address) => nftsByAddress[address])\n    .filter<ApiNft>(Boolean);\n\n  if (!nfts.length) return;\n  const result = await callApi('submitDnsRenewal', accountId, password, nfts, realFee) ?? [undefined];\n\n  handleDomainOperationResult<'renewal'>(\n    getGlobal(),\n    result.map((subResult) => (\n      subResult && 'activityIds' in subResult ? subResult.activityIds[0] : subResult\n    )),\n    updateCurrentDomainRenewal,\n    DomainRenewalState.Complete,\n  );\n});\n\naddActionHandler('submitDomainsRenewalHardware', async (global) => {\n  const accountId = global.currentAccountId!;\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  if (!nftsByAddress) return;\n\n  global = prepareHardwareOperation<'renewal'>(\n    global,\n    updateCurrentDomainRenewal,\n    DomainRenewalState.ConfirmHardware,\n  );\n\n  const { realFee, addresses } = global.currentDomainRenewal;\n  const nfts = addresses!\n    .map((address) => nftsByAddress[address])\n    .filter<ApiNft>(Boolean);\n  const ledgerApi = await import('../../../util/ledger');\n  const result: DomainOperationResult = [];\n\n  for (const nft of nfts) {\n    const renewResult = await ledgerApi.submitLedgerDnsRenewal(\n      accountId,\n      nft,\n      realFee! / BigInt(nfts.length),\n    );\n    result.push(renewResult);\n  }\n\n  handleDomainOperationResult<'renewal'>(\n    getGlobal(),\n    result,\n    updateCurrentDomainRenewal,\n    DomainRenewalState.Complete,\n  );\n});\n\naddActionHandler('checkDomainLinkingDraft', async (global, actions, { nft }) => {\n  const accountId = global.currentAccountId!;\n  const currentAddress = selectCurrentAccount(global)!.addressByChain.ton!;\n\n  const result = await callApi('checkDnsChangeWalletDraft', accountId, nft, currentAddress);\n  if (!result || 'error' in result) {\n    actions.showError({ error: result?.error });\n    return;\n  }\n\n  global = getGlobal();\n  global = updateCurrentDomainLinking(global, { realFee: result.realFee });\n  setGlobal(global);\n});\n\naddActionHandler('submitDomainLinking', async (global, actions, { password }) => {\n  const accountId = global.currentAccountId!;\n  const network = selectCurrentNetwork(global);\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  const nftAddress = global.currentDomainLinking.address!;\n  const realFee = global.currentDomainLinking.realFee!;\n  const nft = nftsByAddress?.[nftAddress];\n  const currentAddress = global.currentDomainLinking.walletAddress!;\n  const checkAddressResult = await callApi('getAddressInfo', network, currentAddress);\n\n  if (checkAddressResult && 'error' in checkAddressResult) {\n    actions.showError({ error: checkAddressResult.error });\n    return;\n  }\n\n  if (!nft\n    || !checkAddressResult\n    || ('resolvedAddress' in checkAddressResult && !checkAddressResult.resolvedAddress)\n  ) return;\n\n  if (!(await verifyPasswordAndUpdateState(global, password, 'linking'))) {\n    return;\n  }\n\n  const result = await callApi(\n    'submitDnsChangeWallet',\n    accountId,\n    password,\n    nft,\n    checkAddressResult.resolvedAddress!,\n    realFee,\n  );\n\n  handleDomainOperationResult<'linking'>(\n    getGlobal(),\n    [result && 'activityId' in result ? result.activityId : result],\n    updateCurrentDomainLinking,\n    DomainLinkingState.Complete,\n  );\n});\n\naddActionHandler('submitDomainLinkingHardware', async (global, actions) => {\n  const accountId = global.currentAccountId!;\n  const network = selectCurrentNetwork(global);\n  const nftsByAddress = selectCurrentAccountState(global)?.nfts?.byAddress;\n  const nft = nftsByAddress?.[global.currentDomainLinking.address!];\n  const currentAddress = global.currentDomainLinking.walletAddress!;\n  const checkAddressResult = await callApi('getAddressInfo', network, currentAddress);\n  global = getGlobal();\n\n  if (checkAddressResult && 'error' in checkAddressResult) {\n    actions.showError({ error: checkAddressResult.error });\n    return;\n  }\n\n  if (!nft\n    || !checkAddressResult\n    || ('resolvedAddress' in checkAddressResult && !checkAddressResult.resolvedAddress)\n  ) return;\n\n  global = prepareHardwareOperation<'linking'>(\n    global,\n    updateCurrentDomainLinking,\n    DomainLinkingState.ConfirmHardware,\n  );\n\n  const { realFee } = global.currentDomainLinking;\n  const ledgerApi = await import('../../../util/ledger');\n\n  const result = await ledgerApi.submitLedgerDnsChangeWallet(\n    accountId,\n    nft,\n    checkAddressResult.resolvedAddress!,\n    realFee!,\n  );\n\n  handleDomainOperationResult<'linking'>(\n    getGlobal(),\n    [result],\n    updateCurrentDomainLinking,\n    DomainLinkingState.Complete,\n  );\n});\n\naddActionHandler('checkLinkingAddress', async (global, actions, { address }) => {\n  if (!address) {\n    global = updateCurrentDomainLinking(global, { walletAddressName: undefined, resolvedWalletAddress: undefined });\n    setGlobal(global);\n\n    return;\n  }\n\n  const network = selectCurrentNetwork(global);\n  const result = await callApi('getAddressInfo', network, address);\n\n  global = getGlobal();\n  if (!result || 'error' in result) {\n    global = updateCurrentDomainLinking(global, { walletAddressName: undefined, resolvedWalletAddress: undefined });\n  } else {\n    global = updateCurrentDomainLinking(global, {\n      walletAddressName: result.addressName,\n      resolvedWalletAddress: result.resolvedAddress,\n    });\n  }\n  setGlobal(global);\n});\n","import { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateActivity } from '../../reducers';\nimport { selectAccountState } from '../../selectors';\n\naddActionHandler('fetchActivityDetails', async (global, actions, { id }) => {\n  const accountId = global.currentAccountId!;\n  const activity = selectAccountState(global, accountId)?.activities?.byId[id];\n\n  if (!activity?.shouldLoadDetails) {\n    return;\n  }\n\n  const newActivity = await callApi('fetchTonActivityDetails', accountId, activity);\n\n  if (!newActivity) {\n    return;\n  }\n\n  global = updateActivity(getGlobal(), accountId, newActivity);\n  setGlobal(global);\n});\n","import type { ApiLiquidStakingState } from '../../../api/types';\nimport type { Account } from '../../types';\n\nimport {\n  DEFAULT_STAKING_STATE,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../config';\nimport { areDeepEqual } from '../../../util/areDeepEqual';\nimport { buildCollectionByKey, unique } from '../../../util/iteratees';\nimport { callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  addNft,\n  addUnorderedNfts,\n  createAccount,\n  removeNft,\n  updateAccount,\n  updateAccountSettingsBackgroundNft,\n  updateAccountStaking,\n  updateAccountState,\n  updateBalances,\n  updateNft,\n  updateRestrictions,\n  updateSettings,\n  updateStakingDefault,\n  updateSwapTokens,\n  updateTokens,\n  updateVesting,\n  updateVestingInfo,\n} from '../../reducers';\nimport {\n  selectAccount,\n  selectAccountNftByAddress,\n  selectAccountState,\n  selectVestingPartsReadyToUnfreeze,\n} from '../../selectors';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'updateBalances': {\n      global = updateBalances(global, update.accountId, update.chain, update.balances);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateStaking': {\n      const {\n        accountId,\n        states,\n        totalProfit,\n        shouldUseNominators,\n      } = update;\n\n      const stateById = buildCollectionByKey(states, 'id');\n\n      global = updateStakingDefault(global, {\n        ...stateById[DEFAULT_STAKING_STATE.id] as ApiLiquidStakingState,\n        balance: 0n,\n        unstakeRequestAmount: 0n,\n        tokenBalance: 0n,\n      });\n      global = updateAccountStaking(global, accountId, {\n        stateById,\n        shouldUseNominators,\n        totalProfit,\n      });\n\n      const { stakingId } = selectAccountState(global, accountId)?.staking ?? {};\n\n      if (!stakingId) {\n        const stateWithBiggestBalance = [...states].sort(\n          (state0, state1) => Number(state1.balance - state0.balance),\n        )[0];\n\n        if (stateWithBiggestBalance && stateWithBiggestBalance.balance > 0n) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateWithBiggestBalance.id,\n          });\n        } else if (shouldUseNominators && stateById.nominators) {\n          global = updateAccountStaking(global, accountId, {\n            stakingId: stateById.nominators.id,\n          });\n        }\n      }\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateTokens': {\n      const { tokens, baseCurrency } = update;\n      global = updateTokens(global, tokens, true);\n      global = updateSettings(global, {\n        baseCurrency,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateSwapTokens': {\n      global = updateSwapTokens(global, update.tokens);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'updateNfts': {\n      const { accountId } = update;\n      const nfts = buildCollectionByKey(update.nfts, 'address');\n      global = getGlobal();\n      const currentNfts = selectAccountState(global, accountId)?.nfts;\n      global = updateAccountState(global, accountId, {\n        nfts: {\n          ...currentNfts,\n          byAddress: { ...nfts, ...currentNfts?.byAddress },\n          orderedAddresses: unique([...Object.keys(nfts), ...currentNfts?.orderedAddresses || []]),\n        },\n      });\n\n      if (!IS_CORE_WALLET) {\n        update.nfts.forEach((nft) => {\n          if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n            global = updateAccountSettingsBackgroundNft(global, nft);\n          }\n        });\n      }\n\n      const hasTelegramGifts = update.nfts.some((nft) => nft.isTelegramGift);\n      if (hasTelegramGifts) {\n        actions.addCollectionTab({\n          collectionAddress: TELEGRAM_GIFTS_SUPER_COLLECTION,\n          isAuto: true,\n        });\n      }\n\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftSent': {\n      const { accountId, nftAddress, newOwnerAddress } = update;\n      const sentNft = selectAccountNftByAddress(global, accountId, nftAddress);\n      global = removeNft(global, accountId, nftAddress);\n\n      if (sentNft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        sentNft.ownerAddress = newOwnerAddress;\n        global = updateAccountSettingsBackgroundNft(global, sentNft);\n      }\n      setGlobal(global);\n\n      actions.checkCardNftOwnership();\n      break;\n    }\n\n    case 'nftReceived': {\n      const { accountId, nft } = update;\n      global = addNft(global, accountId, nft);\n      setGlobal(global);\n\n      if (!IS_CORE_WALLET) {\n        actions.checkCardNftOwnership();\n        // If a user received an NFT card from the MyTonWallet collection, it is applied immediately\n        if (nft.collectionAddress === MTW_CARDS_COLLECTION) {\n          actions.setCardBackgroundNft({ nft });\n          actions.installAccentColorFromNft({ nft });\n        }\n      }\n      break;\n    }\n\n    case 'nftPutUpForSale': {\n      const { accountId, nftAddress } = update;\n      global = updateNft(global, accountId, nftAddress, {\n        isOnSale: true,\n      });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccount': {\n      const { accountId, chain, domain, address } = update;\n      const account = selectAccount(global, accountId);\n      if (!account) {\n        break;\n      }\n\n      const accountUpdate: Partial<Account> = {};\n      if (address) {\n        accountUpdate.addressByChain = {\n          ...account.addressByChain,\n          [chain]: address,\n        };\n      }\n      if (domain !== false) {\n        accountUpdate.domainByChain = {\n          ...account.domainByChain,\n          [chain]: domain,\n        };\n      }\n      global = updateAccount(global, accountId, accountUpdate);\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateConfig': {\n      const {\n        isLimited: isLimitedRegion,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n        isAppUpdateRequired,\n      } = update;\n\n      const shouldRestrictSwapsAndOnRamp = (IS_IOS_APP && isLimitedRegion) || IS_CORE_WALLET;\n      global = updateRestrictions(global, {\n        isLimitedRegion,\n        isSwapDisabled: shouldRestrictSwapsAndOnRamp,\n        isOnRampDisabled: shouldRestrictSwapsAndOnRamp,\n        isNftBuyingDisabled: shouldRestrictSwapsAndOnRamp,\n        isCopyStorageEnabled,\n        supportAccountsCount,\n        countryCode,\n      });\n      global = { ...global, isAppUpdateRequired: IS_CORE_WALLET ? undefined : isAppUpdateRequired };\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateWalletVersions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateWalletVersions', update);\n      }\n\n      actions.apiUpdateWalletVersions(update);\n      break;\n    }\n\n    case 'openUrl': {\n      void openUrl(update.url, { isExternal: update.isExternal, title: update.title, subtitle: update.subtitle });\n      break;\n    }\n\n    case 'requestReconnectApi': {\n      actions.initApi();\n      break;\n    }\n\n    case 'incorrectTime': {\n      if (!global.isIncorrectTimeNotificationReceived) {\n        actions.showIncorrectTimeError();\n      }\n      break;\n    }\n\n    case 'updateVesting': {\n      const { accountId, vestingInfo } = update;\n      const unfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      global = updateVestingInfo(global, accountId, vestingInfo);\n      const newUnfreezeRequestedIds = selectVestingPartsReadyToUnfreeze(global, accountId);\n      if (!areDeepEqual(unfreezeRequestedIds, newUnfreezeRequestedIds)) {\n        global = updateVesting(global, accountId, { unfreezeRequestedIds: undefined });\n      }\n      setGlobal(global);\n      break;\n    }\n\n    case 'updatingStatus': {\n      const { kind, accountId, isUpdating } = update;\n      const key = kind === 'balance' ? 'balanceUpdateStartedAt' : 'activitiesUpdateStartedAt';\n      const accountState = selectAccountState(global, accountId);\n      if (isUpdating && accountState?.[key]) break;\n\n      setGlobal(updateAccountState(global, accountId, {\n        [key]: isUpdating ? Date.now() : undefined,\n      }));\n      break;\n    }\n\n    // Should be removed in future versions\n    case 'migrateCoreApplication': {\n      const {\n        accountId,\n        isTestnet,\n        address,\n        secondAddress,\n        secondAccountId,\n        isTonProxyEnabled,\n        isTonMagicEnabled,\n      } = update;\n\n      global = updateSettings(global, { isTestnet });\n      global = createAccount({\n        global,\n        accountId,\n        type: 'mnemonic',\n        addressByChain: { ton: address },\n      });\n      global = createAccount({\n        global,\n        accountId: secondAccountId,\n        type: 'mnemonic',\n        addressByChain: { ton: secondAddress },\n        network: isTestnet ? 'mainnet' : 'testnet', // Second account should be created on opposite network\n      });\n      setGlobal(global);\n\n      // Run the application only after the post-migration GlobalState has been applied\n      requestAnimationFrame(() => {\n        actions.tryAddNotificationAccount({ accountId });\n        actions.switchAccount({ accountId, newNetwork: isTestnet ? 'testnet' : 'mainnet' });\n        actions.afterSignIn();\n\n        if (isTonMagicEnabled) {\n          actions.toggleTonMagic({ isEnabled: true });\n        }\n        if (isTonProxyEnabled) {\n          actions.toggleTonProxy({ isEnabled: true });\n        }\n      });\n      break;\n    }\n\n    case 'updateAccountConfig': {\n      const { accountConfig, accountId } = update;\n      global = updateAccountState(global, accountId, { config: accountConfig });\n      setGlobal(global);\n      break;\n    }\n\n    case 'updateAccountDomainData': {\n      const {\n        accountId,\n        expirationByAddress,\n        linkedAddressByAddress,\n        nfts: updatedNfts,\n      } = update;\n      const nfts = selectAccountState(global, accountId)?.nfts || { byAddress: {} };\n\n      global = updateAccountState(global, accountId, { nfts: {\n        ...nfts,\n        dnsExpiration: expirationByAddress,\n        linkedAddressByAddress,\n      } });\n      global = addUnorderedNfts(global, accountId, updatedNfts);\n      setGlobal(global);\n      break;\n    }\n  }\n});\n","import { registerPlugin } from \"@capacitor/core\";\nconst NativeAudio = registerPlugin(\"NativeAudio\", {\n    web: () => import(\"./web\").then((m) => new m.NativeAudioWeb()),\n});\nexport * from \"./definitions\";\nexport { NativeAudio };\n//# sourceMappingURL=index.js.map","import { NativeAudio } from '@capgo/native-audio';\n\nimport { IS_CAPACITOR } from '../config';\nimport { SECOND } from './dateFormat';\nimport { logDebug, logDebugError } from './logs';\nimport { debounce } from './schedulers';\nimport { IS_DELEGATED_BOTTOM_SHEET } from './windowEnvironment';\n\nimport incomingTransactionSound from '../assets/incoming-transaction.mp3';\n\nconst DEBOUNCE_MS = SECOND;\n\nconst AudioContextConstructor = window.AudioContext || window.webkitAudioContext;\nconst audioContext = new AudioContextConstructor();\nlet audioBuffer: AudioBuffer | undefined;\nlet isSoundInitialized = IS_CAPACITOR || audioContext.state === 'running';\n\n// Workaround: this function is called once on the first user interaction.\n// After that, it will be possible to play the notification without problems.\n// https://developer.chrome.com/blog/autoplay?hl=ru#webaudio\nexport function initializeSounds() {\n  if (isSoundInitialized) return;\n\n  audioContext\n    .resume()\n    .then(() => {\n      isSoundInitialized = true;\n    })\n    .catch((err: any) => {\n      logDebugError('appSounds:initializeSounds', err);\n    });\n}\n\nasync function loadSound() {\n  const audioSettings = {\n    assetId: 'incomingTransactionSound',\n    assetPath: 'public/incoming-transaction.mp3',\n    audioChannelNum: 1,\n    isUrl: false,\n  };\n\n  if (IS_CAPACITOR) {\n    if (await NativeAudio.isPreloaded(audioSettings)) {\n      return;\n    }\n\n    NativeAudio.preload(audioSettings).catch((err: any) => {\n      logDebugError('appSounds:loadSound', err);\n    });\n  } else {\n    fetch(incomingTransactionSound)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => audioContext.decodeAudioData(arrayBuffer))\n      .then((decodedAudioBuffer) => {\n        audioBuffer = decodedAudioBuffer;\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:loadSound', err);\n      });\n  }\n}\n\nvoid loadSound();\n\nexport const playIncomingTransactionSound = debounce(() => {\n  if (IS_DELEGATED_BOTTOM_SHEET) return;\n\n  if (!isSoundInitialized) {\n    logDebug('appSounds:playIncomingTransactionSound', 'sound is not initialized');\n    return;\n  }\n\n  if (IS_CAPACITOR) {\n    NativeAudio\n      .play({\n        assetId: 'incomingTransactionSound',\n      })\n      .catch((err: any) => {\n        logDebugError('appSounds:playIncomingTransactionSound', err);\n      });\n    return;\n  }\n\n  if (!audioBuffer) {\n    logDebug('playIncomingTransactionSound', 'audioBuffer is not loaded');\n    return;\n  }\n\n  const source = audioContext.createBufferSource();\n  source.buffer = audioBuffer;\n  source.connect(audioContext.destination);\n  source.start(0);\n}, DEBOUNCE_MS, true, false);\n","import type { ApiActivity, ApiTransactionActivity } from '../../../api/types';\nimport type { GlobalState } from '../../types';\nimport { TransferState } from '../../types';\n\nimport {\n  IS_CORE_WALLET,\n  MINT_CARD_ADDRESS,\n  MINT_CARD_REFUND_COMMENT,\n  MTW_CARDS_COLLECTION,\n} from '../../../config';\nimport { doesLocalActivityMatch, getActivityIdReplacements } from '../../../util/activities';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { playIncomingTransactionSound } from '../../../util/notificationSound';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport { getIsTonToken } from '../../../util/tokens';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n} from '../../../util/windowEnvironment';\nimport { getIsTinyOrScamTransaction } from '../../helpers';\nimport { addActionHandler, getActions, setGlobal } from '../../index';\nimport {\n  addNewActivities,\n  addNft,\n  clearIsPinAccepted,\n  putInitialActivities,\n  removeActivities,\n  replaceCurrentActivityId,\n  replaceCurrentDomainLinkingId,\n  replaceCurrentDomainRenewalId,\n  replaceCurrentSwapId,\n  replaceCurrentTransferId,\n  replacePendingActivities,\n  setIsInitialActivitiesLoadedTrue,\n  updateAccountState,\n  updateActivitiesIsLoadingByAccount,\n  updateCurrentTransfer,\n} from '../../reducers';\nimport {\n  selectAccountState,\n  selectLocalActivitiesSlow,\n  selectPendingActivitiesSlow,\n  selectRecentNonLocalActivitiesSlow,\n} from '../../selectors';\n\nconst TX_AGE_TO_PLAY_SOUND = 60000; // 1 min\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'initialActivities': {\n      const { accountId, mainActivities, bySlug, chain } = update;\n\n      global = updateActivitiesIsLoadingByAccount(global, accountId, false);\n      global = putInitialActivities(global, accountId, mainActivities, bySlug);\n\n      if (chain) {\n        global = setIsInitialActivitiesLoadedTrue(global, accountId, chain);\n      }\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'newLocalActivities': {\n      const {\n        accountId,\n        activities,\n      } = update;\n\n      hideOutdatedLocalActivities(global, accountId, activities);\n      global = addNewActivities(global, accountId, activities);\n\n      for (const activity of activities) {\n        if (activity.kind === 'transaction' && -activity.amount === global.currentTransfer.amount) {\n          global = updateCurrentTransfer(global, {\n            txId: activity.txId,\n            state: TransferState.Complete,\n            isLoading: false,\n          });\n\n          if (getDoesUsePinPad()) {\n            global = clearIsPinAccepted(global);\n          }\n\n          if (getIsTonToken(activity.slug)) {\n            actions.fetchTransferDieselState({ tokenSlug: activity.slug });\n          }\n        }\n      }\n\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'newActivities': {\n      if (IS_DELEGATING_BOTTOM_SHEET && !update.noForward) {\n        // Local transaction in NBS was not updated after nft/transfer sending was completed\n        callActionInNative('apiUpdate', { ...update, noForward: true });\n      }\n      if (IS_DELEGATED_BOTTOM_SHEET && !update.noForward) {\n        // A local swap transaction is not created if the NBS is closed before the exchange is completed\n        callActionInMain('apiUpdate', { ...update, noForward: true });\n      }\n      const { accountId, activities: newConfirmedActivities, pendingActivities, chain } = update;\n\n      const replacedIds = getActivityIdReplacements(\n        [\n          ...selectLocalActivitiesSlow(global, accountId),\n          ...(chain ? selectPendingActivitiesSlow(global, accountId, chain) : []),\n        ],\n        [\n          ...(pendingActivities ?? []),\n          ...newConfirmedActivities,\n        ],\n      );\n\n      // A good TON address for testing: UQD5mxRgCuRNLxKxeOjG6r14iSroLF5FtomPnet-sgP5xI-e\n      global = removeActivities(global, accountId, Object.keys(replacedIds));\n      if (chain && pendingActivities !== undefined) {\n        global = replacePendingActivities(global, accountId, chain, pendingActivities);\n      }\n      global = addNewActivities(global, accountId, newConfirmedActivities);\n\n      global = replaceCurrentTransferId(global, replacedIds);\n      global = replaceCurrentDomainLinkingId(global, replacedIds);\n      global = replaceCurrentDomainRenewalId(global, replacedIds);\n      global = replaceCurrentSwapId(global, replacedIds);\n      global = replaceCurrentActivityId(global, accountId, replacedIds);\n      notifyAboutNewActivities(global, newConfirmedActivities);\n\n      if (!IS_CORE_WALLET) {\n        // NFT polling is executed at long intervals, so it is more likely that a user will see a new transaction\n        // rather than receiving a card in the collection. Therefore, when a new activity occurs,\n        // we check for a card from the MyTonWallet collection and apply it.\n        global = processCardMintingActivity(global, accountId, newConfirmedActivities);\n      }\n\n      global = updateActivitiesIsLoadingByAccount(global, accountId, false);\n      if (chain) {\n        global = setIsInitialActivitiesLoadedTrue(global, accountId, chain);\n      }\n\n      setGlobal(global);\n      break;\n    }\n  }\n});\n\nfunction notifyAboutNewActivities(global: GlobalState, newActivities: ApiActivity[]) {\n  if (!global.settings.canPlaySounds) {\n    return;\n  }\n\n  const shouldPlaySound = newActivities.some((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && !activity.isPending\n      && (Date.now() - activity.timestamp < TX_AGE_TO_PLAY_SOUND)\n      && !(\n        global.settings.areTinyTransfersHidden\n        && getIsTinyOrScamTransaction(activity, global.tokenInfo?.bySlug[activity.slug])\n      )\n      && !getIsTransactionWithPoisoning(activity);\n  });\n\n  if (shouldPlaySound) {\n    playIncomingTransactionSound();\n  }\n}\n\nfunction processCardMintingActivity(global: GlobalState, accountId: string, activities: ApiActivity[]): GlobalState {\n  const { isCardMinting } = selectAccountState(global, accountId) || {};\n\n  if (!isCardMinting || !activities.length) {\n    return global;\n  }\n\n  const mintCardActivity = activities.find((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && activity?.nft?.collectionAddress === MTW_CARDS_COLLECTION;\n  });\n\n  const refundActivity = activities.find((activity) => {\n    return activity.kind === 'transaction'\n      && activity.isIncoming\n      && activity.fromAddress === MINT_CARD_ADDRESS\n      && activity?.comment === MINT_CARD_REFUND_COMMENT;\n  });\n\n  if (mintCardActivity) {\n    const nft = (mintCardActivity as ApiTransactionActivity).nft!;\n\n    global = updateAccountState(global, accountId, { isCardMinting: undefined });\n    global = addNft(global, accountId, nft);\n    getActions().setCardBackgroundNft({ nft });\n    getActions().installAccentColorFromNft({ nft });\n  } else if (refundActivity) {\n    global = updateAccountState(global, accountId, { isCardMinting: undefined });\n  }\n\n  return global;\n}\n\n/**\n * Thanks to the socket, there is a possibility that a pending activity will arrive before the corresponding local\n * activity. Such local activities duplicate the pending activities, which is unwanted. They shouldn't be removed,\n * because other parts of the global state may point to their ids, so they get hidden instead.\n */\nfunction hideOutdatedLocalActivities(global: GlobalState, accountId: string, localActivities: ApiActivity[]) {\n  const maxCheckDepth = localActivities.length + 20;\n  const chainActivities = selectRecentNonLocalActivitiesSlow(global, accountId, maxCheckDepth);\n\n  for (const localActivity of localActivities) {\n    localActivity.shouldHide ||= chainActivities.some((chainActivity) => {\n      return doesLocalActivityMatch(localActivity, chainActivity);\n    });\n  }\n\n  return localActivities;\n}\n","import { SignDataState, TransferState } from '../../types';\n\nimport { TONCOIN } from '../../../config';\nimport { processDeeplink } from '../../../util/deeplink';\nimport { callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  clearCurrentDappTransfer,\n  clearCurrentSignature,\n  clearCurrentTransfer,\n  clearDappConnectRequest,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n  updateCurrentSignature,\n  updateCurrentTransfer,\n} from '../../reducers';\n\naddActionHandler('apiUpdate', (global, actions, update) => {\n  switch (update.type) {\n    case 'createTransaction': {\n      const {\n        promiseId,\n        amount,\n        toAddress,\n        fee,\n        realFee,\n        comment,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Confirm,\n        toAddress,\n        amount,\n        fee,\n        realFee,\n        comment,\n        promiseId,\n        tokenSlug: TONCOIN.slug,\n        rawPayload,\n        parsedPayload,\n        stateInit,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'createSignature': {\n      const { promiseId, dataHex } = update;\n\n      global = clearCurrentSignature(global);\n      global = updateCurrentSignature(global, {\n        promiseId,\n        dataHex,\n      });\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'showError': {\n      const { error } = update;\n      actions.showError({ error });\n\n      break;\n    }\n\n    case 'dappConnect': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappConnect', update);\n      }\n\n      actions.apiUpdateDappConnect(update);\n\n      break;\n    }\n\n    case 'dappConnectComplete': {\n      global = clearDappConnectRequest(global);\n      setGlobal(global);\n\n      break;\n    }\n\n    case 'dappDisconnect': {\n      const { url } = update;\n\n      if (global.currentDappTransfer.dapp?.url === url) {\n        global = clearCurrentDappTransfer(global);\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappLoading', update);\n      }\n\n      actions.apiUpdateDappLoading(update);\n\n      break;\n    }\n\n    case 'dappCloseLoading': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappCloseLoading', update);\n      }\n\n      actions.apiUpdateDappCloseLoading(update);\n\n      break;\n    }\n\n    case 'dappSendTransactions': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSendTransaction', update);\n      }\n\n      actions.apiUpdateDappSendTransaction(update);\n      break;\n    }\n\n    case 'dappSignData': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('apiUpdateDappSignData', update);\n      }\n\n      actions.apiUpdateDappSignData(update);\n      break;\n    }\n\n    case 'updateDapps': {\n      if (IS_DELEGATING_BOTTOM_SHEET) {\n        callActionInNative('getDapps');\n      }\n\n      actions.getDapps();\n      break;\n    }\n\n    case 'prepareTransaction': {\n      const {\n        amount,\n        toAddress,\n        comment,\n        binPayload,\n      } = update;\n\n      global = clearCurrentTransfer(global);\n      global = updateCurrentTransfer(global, {\n        state: TransferState.Initial,\n        toAddress,\n        amount: amount ?? 0n,\n        comment,\n        tokenSlug: TONCOIN.slug,\n        binPayload,\n      });\n\n      setGlobal(global);\n      break;\n    }\n\n    case 'processDeeplink': {\n      const { url } = update;\n\n      void processDeeplink(url);\n      break;\n    }\n\n    case 'dappTransferComplete': {\n      if (global.currentDappTransfer.state !== TransferState.None) {\n        global = updateCurrentDappTransfer(global, {\n          state: TransferState.Complete,\n          isLoading: false,\n        });\n        setGlobal(global);\n      }\n      break;\n    }\n\n    case 'dappSignDataComplete': {\n      if (global.currentDappSignData.state !== SignDataState.None) {\n        global = updateCurrentDappSignData(global, {\n          state: SignDataState.Complete,\n          isLoading: false,\n        });\n        setGlobal(global);\n      }\n      break;\n    }\n  }\n});\n","import type { AnimationLevel } from '../global/types';\n\nimport { ANIMATION_LEVEL_MAX, ANIMATION_LEVEL_MED, ANIMATION_LEVEL_MIN } from '../config';\n\nconst ANIMATION_LEVEL_OPTIONS = [\n  ANIMATION_LEVEL_MIN,\n  ANIMATION_LEVEL_MED,\n  ANIMATION_LEVEL_MAX,\n];\n\nexport default function switchAnimationLevel(level: AnimationLevel) {\n  const levelClassName = `animation-level-${level}`;\n  if (document.documentElement.classList.contains(levelClassName)) {\n    return;\n  }\n\n  ANIMATION_LEVEL_OPTIONS.forEach((currentLevel) => {\n    document.documentElement.classList.toggle(`animation-level-${currentLevel}`, currentLevel === level);\n  });\n}\n","import type {\n  Account, AccountSettings, AccountState, NotificationType,\n} from '../../types';\nimport { ApiAuthError, ApiCommonError, ApiTransactionDraftError, ApiTransactionError } from '../../../api/types';\nimport { AppState } from '../../types';\n\nimport {\n  DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  DEFAULT_TRANSFER_TOKEN_SLUG,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_TELEGRAM_APP,\n  TONCOIN,\n} from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { parseAccountId } from '../../../util/account';\nimport authApi from '../../../util/authApi';\nimport { initCapacitorWithGlobal } from '../../../util/capacitor';\nimport { processDeeplinkAfterSignIn } from '../../../util/deeplink';\nimport { omit } from '../../../util/iteratees';\nimport { clearPreviousLangpacks, setLanguage } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { initializeSounds } from '../../../util/notificationSound';\nimport switchAnimationLevel from '../../../util/switchAnimationLevel';\nimport switchTheme, { setStatusBarStyle } from '../../../util/switchTheme';\nimport { initTelegramWithGlobal } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_ANDROID_APP,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_IOS,\n  IS_LINUX,\n  IS_MAC_OS,\n  IS_OPERA,\n  IS_SAFARI,\n  IS_WINDOWS,\n  setScrollbarWidthProperty,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { updateCurrentAccountId, updateCurrentAccountState } from '../../reducers';\nimport {\n  selectCurrentNetwork,\n  selectNetworkAccounts,\n  selectNetworkAccountsMemoized,\n  selectNewestActivityTimestamps,\n  selectSwapTokens,\n} from '../../selectors';\n\nconst ANIMATION_DELAY_MS = 320;\n\naddActionHandler('init', (_, actions) => {\n  requestMutation(() => {\n    const { documentElement } = document;\n\n    if (IS_IOS) {\n      documentElement.classList.add('is-ios', 'is-mobile');\n    } else if (IS_ANDROID) {\n      documentElement.classList.add('is-android', 'is-mobile');\n      if (IS_ANDROID_APP) {\n        documentElement.classList.add('is-android-app');\n      }\n    } else if (IS_MAC_OS) {\n      documentElement.classList.add('is-macos');\n    } else if (IS_WINDOWS) {\n      documentElement.classList.add('is-windows');\n    } else if (IS_LINUX) {\n      documentElement.classList.add('is-linux');\n    }\n    if (IS_SAFARI) {\n      documentElement.classList.add('is-safari');\n    }\n    if (IS_OPERA) {\n      documentElement.classList.add('is-opera');\n    }\n    if (IS_EXTENSION) {\n      documentElement.classList.add('is-extension');\n    }\n    if (IS_ELECTRON) {\n      documentElement.classList.add('is-electron');\n    }\n    if (IS_TELEGRAM_APP) {\n      documentElement.classList.add('is-telegram-app');\n    }\n    if (getIsMobileTelegramApp()) {\n      documentElement.classList.add('is-mobile-telegram-app');\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      documentElement.classList.add('is-native-bottom-sheet');\n    }\n\n    setScrollbarWidthProperty();\n\n    actions.afterInit();\n  });\n});\n\naddActionHandler('afterInit', (global) => {\n  const {\n    theme, animationLevel, langCode, authConfig,\n  } = global.settings;\n\n  switchTheme(theme);\n  switchAnimationLevel(animationLevel);\n  setStatusBarStyle({\n    forceDarkBackground: false,\n  });\n  void setLanguage(langCode);\n  clearPreviousLangpacks();\n\n  if (IS_CAPACITOR) {\n    void initCapacitorWithGlobal(authConfig);\n  } else {\n    if (IS_TELEGRAM_APP) {\n      initTelegramWithGlobal(global);\n    }\n\n    document.addEventListener('click', initializeSounds, { once: true });\n  }\n});\n\naddActionHandler('afterSignIn', (global, actions) => {\n  setGlobal({ ...global, appState: AppState.Main });\n\n  setTimeout(() => {\n    actions.resetAuth();\n\n    processDeeplinkAfterSignIn();\n  }, ANIMATION_DELAY_MS);\n});\n\naddActionHandler('afterSignOut', (global, actions, payload) => {\n  if (payload?.shouldReset) {\n    if (global.settings.authConfig?.kind === 'native-biometrics') {\n      void authApi.removeNativeBiometrics();\n    }\n    actions.setInMemoryPassword({ password: undefined, force: true });\n\n    actions.resetApiSettings({ areAllDisabled: true });\n  }\n});\n\naddActionHandler('showDialog', (global, actions, payload) => {\n  const newDialogs = [...global.dialogs];\n  const existingMessageIndex = newDialogs.findIndex((dialog) => dialog.message === payload.message);\n  if (existingMessageIndex !== -1) {\n    newDialogs.splice(existingMessageIndex, 1);\n  }\n\n  newDialogs.push(payload);\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('dismissDialog', (global) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('dismissDialog');\n  }\n\n  const newDialogs = [...global.dialogs];\n\n  newDialogs.pop();\n\n  return {\n    ...global,\n    dialogs: newDialogs,\n  };\n});\n\naddActionHandler('selectToken', (global, actions, { slug } = {}) => {\n  if (slug) {\n    const isToncoin = slug === TONCOIN.slug;\n    const tokens = selectSwapTokens(global);\n\n    if (isToncoin || tokens?.some((token) => token.slug === slug)) {\n      if (isToncoin) {\n        actions.setDefaultSwapParams({ tokenInSlug: DEFAULT_SWAP_SECOND_TOKEN_SLUG, tokenOutSlug: slug });\n      } else {\n        actions.setDefaultSwapParams({ tokenOutSlug: slug });\n      }\n      actions.changeTransferToken({ tokenSlug: slug });\n    }\n  } else {\n    const currentActivityToken = global.byAccountId[global.currentAccountId!].currentTokenSlug;\n\n    const isDefaultFirstTokenOutSwap = global.currentSwap.tokenOutSlug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n      && global.currentSwap.tokenInSlug === DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n    const shouldResetSwap = global.currentSwap.tokenOutSlug === currentActivityToken\n      && (\n        (\n          global.currentSwap.tokenInSlug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n          && global.currentSwap.tokenOutSlug !== DEFAULT_SWAP_SECOND_TOKEN_SLUG\n        )\n        || isDefaultFirstTokenOutSwap\n      );\n\n    if (shouldResetSwap) {\n      actions.setDefaultSwapParams({ tokenInSlug: undefined, tokenOutSlug: undefined, withResetAmount: true });\n    }\n\n    const shouldResetTransfer = (global.currentTransfer.tokenSlug === currentActivityToken\n      && global.currentTransfer.tokenSlug !== DEFAULT_TRANSFER_TOKEN_SLUG)\n    && !global.currentTransfer.nfts?.length;\n\n    if (shouldResetTransfer) {\n      actions.changeTransferToken({ tokenSlug: DEFAULT_TRANSFER_TOKEN_SLUG, withResetAmount: true });\n    }\n  }\n\n  return updateCurrentAccountState(global, { currentTokenSlug: slug });\n});\n\naddActionHandler('showError', (global, actions, { error } = {}) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showError', { error });\n    return;\n  }\n\n  switch (error) {\n    case ApiTransactionDraftError.InvalidAmount:\n      actions.showDialog({ message: 'Invalid amount' });\n      break;\n\n    case ApiAuthError.InvalidAddress:\n    case ApiTransactionDraftError.InvalidToAddress:\n      actions.showDialog({ message: 'Invalid address' });\n      break;\n\n    case ApiTransactionDraftError.StateInitWithoutBin:\n      actions.showDialog({ message: '$state_init_requires_bin' });\n      break;\n\n    case ApiTransactionDraftError.InvalidStateInit:\n      actions.showDialog({ message: '$state_init_invalid' });\n      break;\n\n    case ApiTransactionDraftError.InsufficientBalance:\n      actions.showDialog({ message: 'Insufficient balance' });\n      break;\n\n    case ApiAuthError.DomainNotResolved:\n    case ApiTransactionDraftError.DomainNotResolved:\n      actions.showDialog({ message: 'Domain is not connected to a wallet' });\n      break;\n\n    case ApiTransactionDraftError.WalletNotInitialized:\n      actions.showDialog({\n        message: 'Encryption is not possible. The recipient is not a wallet or has no outgoing transactions.',\n      });\n      break;\n\n    case ApiTransactionDraftError.InvalidAddressFormat:\n      actions.showDialog({\n        message: 'Invalid address format. Only URL Safe Base64 format is allowed.',\n      });\n      break;\n\n    case ApiTransactionError.PartialTransactionFailure:\n      actions.showDialog({ message: 'Not all transactions were sent successfully' });\n      break;\n\n    case ApiTransactionError.IncorrectDeviceTime:\n      actions.showDialog({ message: 'The time on your device is incorrect, sync it and try again' });\n      break;\n\n    case ApiTransactionError.UnsuccesfulTransfer:\n      actions.showDialog({ message: 'Transfer was unsuccessful. Try again later.' });\n      break;\n\n    case ApiTransactionDraftError.InactiveContract:\n      actions.showDialog({\n        message: '$transfer_inactive_contract_error',\n      });\n      break;\n\n    case ApiTransactionError.NotSupportedHardwareOperation:\n      actions.showDialog({\n        message: '$ledger_not_supported_operation',\n      });\n      break;\n\n    case ApiCommonError.ServerError:\n      actions.showDialog({\n        message: window.navigator.onLine\n          ? 'An error on the server side. Please try again.'\n          : 'No internet connection. Please check your connection and try again.',\n      });\n      break;\n\n    case ApiCommonError.DebugError:\n      actions.showDialog({ message: 'Unexpected error. Please let the support know.' });\n      break;\n\n    case ApiCommonError.Unexpected:\n    case undefined:\n      actions.showDialog({ message: 'Unexpected' });\n      break;\n\n    default:\n      actions.showDialog({ message: error });\n      break;\n  }\n});\n\naddActionHandler('showNotification', (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showNotification', payload);\n    return undefined;\n  }\n\n  const { message, icon } = payload;\n\n  const newNotifications: NotificationType[] = [...global.notifications];\n  const existingNotificationIndex = newNotifications.findIndex((n) => n.message === message);\n  if (existingNotificationIndex !== -1) {\n    newNotifications.splice(existingNotificationIndex, 1);\n  }\n\n  newNotifications.push({ message, icon });\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('dismissNotification', (global) => {\n  const newNotifications = [...global.notifications];\n\n  newNotifications.pop();\n\n  return {\n    ...global,\n    notifications: newNotifications,\n  };\n});\n\naddActionHandler('toggleTonProxy', (global, actions, { isEnabled }) => {\n  void callApi('doProxy', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonProxyEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleTonMagic', (global, actions, { isEnabled }) => {\n  void callApi('doMagic', isEnabled);\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTonMagicEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('toggleDeeplinkHook', (global, actions, { isEnabled }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.toggleDeeplinkHandler(isEnabled);\n  } else {\n    void callApi('doDeeplinkHook', isEnabled);\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isDeeplinkHookEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('signOut', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('signOut', payload);\n  }\n\n  const { level } = payload;\n\n  const network = selectCurrentNetwork(global);\n  const accounts = selectNetworkAccounts(global)!;\n  const accountIds = Object.keys(accounts);\n  const isFromAllAccounts = level !== 'account';\n\n  const otherNetwork = network === 'mainnet' ? 'testnet' : 'mainnet';\n  let otherNetworkAccountIds = Object.keys(selectNetworkAccountsMemoized(otherNetwork, global.accounts?.byId)!);\n\n  if (level === 'all' && otherNetworkAccountIds.length > 0) {\n    await callApi('removeNetworkAccounts', otherNetwork);\n    otherNetworkAccountIds = [];\n  }\n\n  if (isFromAllAccounts || accountIds.length === 1) {\n    actions.deleteAllNotificationAccounts({ accountIds });\n    if (otherNetworkAccountIds.length) {\n      await callApi('removeNetworkAccounts', network);\n\n      global = getGlobal();\n\n      const nextAccountId = otherNetworkAccountIds[0];\n      const accountsById = Object.entries(global.accounts!.byId).reduce((byId, [accountId, account]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = account;\n        }\n        return byId;\n      }, {} as Record<string, Account>);\n      const byAccountId = Object.entries(global.byAccountId).reduce((byId, [accountId, state]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = state;\n        }\n        return byId;\n      }, {} as Record<string, AccountState>);\n\n      const settingsById = Object.entries(global.settings.byAccountId).reduce((byId, [accountId, settings]) => {\n        if (parseAccountId(accountId).network !== network) {\n          byId[accountId] = settings;\n        }\n        return byId;\n      }, {} as Record<string, AccountSettings>);\n\n      global = updateCurrentAccountId(global, nextAccountId);\n\n      global = {\n        ...global,\n        accounts: {\n          ...global.accounts!,\n          byId: accountsById,\n        },\n        byAccountId,\n        settings: {\n          ...global.settings,\n          byAccountId: settingsById,\n        },\n      };\n\n      setGlobal(global);\n\n      actions.switchAccount({ accountId: nextAccountId, newNetwork: otherNetwork });\n      actions.closeSettings();\n      actions.afterSignOut();\n    } else {\n      await callApi('resetAccounts');\n\n      actions.afterSignOut({ shouldReset: true });\n      actions.init();\n    }\n  } else {\n    const prevAccountId = global.currentAccountId!;\n    const nextAccountId = accountIds.find((id) => id !== prevAccountId)!;\n    const nextNewestActivityTimestamps = selectNewestActivityTimestamps(global, nextAccountId);\n\n    await callApi('removeAccount', prevAccountId, nextAccountId, nextNewestActivityTimestamps);\n    actions.deleteNotificationAccount({ accountId: prevAccountId });\n\n    global = getGlobal();\n\n    const accountsById = omit(global.accounts!.byId, [prevAccountId]);\n    const byAccountId = omit(global.byAccountId, [prevAccountId]);\n    const settingsByAccountId = omit(global.settings.byAccountId, [prevAccountId]);\n\n    global = updateCurrentAccountId(global, nextAccountId);\n\n    global = {\n      ...global,\n      accounts: {\n        ...global.accounts!,\n        byId: accountsById,\n      },\n      byAccountId,\n      settings: {\n        ...global.settings,\n        byAccountId: settingsByAccountId,\n      },\n    };\n\n    setGlobal(global);\n\n    actions.afterSignOut();\n  }\n});\n","import { registerPlugin } from '@capacitor/core';\nconst BarcodeScanner = registerPlugin('BarcodeScanner', {\n    web: () => import('./web').then(m => new m.BarcodeScannerWeb()),\n});\nexport * from './definitions';\nexport { BarcodeScanner };\n//# sourceMappingURL=index.js.map","const APP_VERSION_REGEX = /^\\d+\\.\\d+(\\.\\d+)?$/;\n\nexport default function getIsAppUpdateNeeded(remoteVersion: string, appVersion: string, isStrict?: boolean) {\n  const sanitizedRemoteVersion = remoteVersion.trim();\n\n  if (!APP_VERSION_REGEX.test(sanitizedRemoteVersion)) {\n    return false;\n  }\n\n  if (isStrict) {\n    return sanitizedRemoteVersion.localeCompare(appVersion, undefined, { numeric: true, sensitivity: 'base' }) === 1;\n  }\n\n  return sanitizedRemoteVersion !== appVersion;\n}\n","import { useCallback, useState } from '../lib/teact/teact';\n\nconst useFlag = (initial = false, debugKey?: string): [boolean, NoneToVoidFunction, NoneToVoidFunction] => {\n  const [value, setValue] = useState(initial, debugKey);\n\n  const setTrue = useCallback(() => {\n    setValue(true);\n  }, []);\n\n  const setFalse = useCallback(() => {\n    setValue(false);\n  }, []);\n\n  return [value, setTrue, setFalse];\n};\n\nexport default useFlag;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { getHotkeyMatcher } from '../util/parseHotkey';\n\nconst IGNORE_TAGS = new Set(['INPUT', 'TEXTAREA', 'SELECT']);\n\nconst handlers = createCallbackManager();\ndocument.documentElement.addEventListener('keydown', handlers.runCallbacks);\n\nexport function useHotkeys(hotkeys?: Record<string, (e: KeyboardEvent) => void>) {\n  useEffect(() => {\n    if (!hotkeys) {\n      return undefined;\n    }\n\n    const entries = Object.entries(hotkeys);\n\n    function handleKeyDown(e: KeyboardEvent) {\n      if (!shouldFireEvent(e)) {\n        return;\n      }\n\n      entries.forEach(([hotkey, handler]) => {\n        if (getHotkeyMatcher(hotkey)(e)) {\n          handler(e);\n        }\n      });\n    }\n\n    return handlers.addCallback(handleKeyDown);\n  }, [hotkeys]);\n}\n\nfunction shouldFireEvent(e: KeyboardEvent) {\n  if (e.target instanceof HTMLElement) {\n    return !IGNORE_TAGS.has(e.target.tagName);\n  }\n\n  return true;\n}\n","// Original source from Mantine\n// https://github.com/mantinedev/mantine/blob/master/src/mantine-hooks/src/use-hotkeys/parse-hotkey.ts\n\nexport type KeyboardModifiers = {\n  alt: boolean;\n  ctrl: boolean;\n  meta: boolean;\n  mod: boolean;\n  shift: boolean;\n};\n\nexport type Hotkey = KeyboardModifiers & {\n  key?: string;\n};\n\ntype CheckHotkeyMatch = (event: KeyboardEvent) => boolean;\n\nexport function parseHotkey(hotkey: string): Hotkey {\n  const keys = hotkey\n    .toLowerCase()\n    .split('+')\n    .map((part) => part.trim());\n\n  const modifiers: KeyboardModifiers = {\n    alt: keys.includes('alt'),\n    ctrl: keys.includes('ctrl'),\n    meta: keys.includes('meta'),\n    mod: keys.includes('mod'),\n    shift: keys.includes('shift'),\n  };\n\n  const reservedKeys = ['alt', 'ctrl', 'meta', 'shift', 'mod'];\n\n  const freeKey = keys.find((key) => !reservedKeys.includes(key));\n\n  return {\n    ...modifiers,\n    key: freeKey,\n  };\n}\n\nfunction isExactHotkey(hotkey: Hotkey, event: KeyboardEvent): boolean {\n  const {\n    alt, ctrl, meta, mod, shift, key,\n  } = hotkey;\n  const {\n    altKey, ctrlKey, metaKey, shiftKey, key: pressedKey,\n  } = event;\n\n  if (alt !== altKey) {\n    return false;\n  }\n\n  if (mod) {\n    if (!ctrlKey && !metaKey) {\n      return false;\n    }\n  } else {\n    if (ctrl !== ctrlKey) {\n      return false;\n    }\n    if (meta !== metaKey) {\n      return false;\n    }\n  }\n  if (shift !== shiftKey) {\n    return false;\n  }\n\n  return Boolean(key\n    && (pressedKey.toLowerCase() === key.toLowerCase()\n      || event.code.replace('Key', '').toLowerCase() === key.toLowerCase()));\n}\n\nexport function getHotkeyMatcher(hotkey: string): CheckHotkeyMatch {\n  return (event) => isExactHotkey(parseHotkey(hotkey), event);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { throttle, throttleWith } from '../util/schedulers';\n\nexport default function useThrottledCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    if (typeof msOrSchedulerFn === 'number') {\n      return throttle(fnMemo, msOrSchedulerFn, !noFirst);\n    } else {\n      return throttleWith(msOrSchedulerFn, fnMemo);\n    }\n  }, [fnMemo, msOrSchedulerFn, noFirst]);\n}\n","import { useCallback, useMemo } from '../lib/teact/teact';\n\nimport { debounce } from '../util/schedulers';\n\nexport default function useDebouncedCallback<T extends AnyToVoidFunction>(\n  fn: T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(fn, deps);\n\n  return useMemo(() => {\n    return debounce(fnMemo, ms, !noFirst, !noLast);\n  }, [fnMemo, ms, noFirst, noLast]);\n}\n","import { useEffect, useMemo, useState } from '../lib/teact/teact';\n\nimport { throttle } from '../util/schedulers';\nimport windowSize from '../util/windowSize';\nimport useDebouncedCallback from './useDebouncedCallback';\n\nconst THROTTLE = 250;\n\nexport default function useWindowSize() {\n  const {\n    width: initialWidth,\n    height: initialHeight,\n    screenHeight: initialScreenHeight,\n  } = windowSize.get();\n  const [width, setWidth] = useState(initialWidth);\n  const [height, setHeight] = useState(initialHeight);\n  const [screenHeight, setScreenHeight] = useState(initialScreenHeight);\n  const [isResizing, setIsResizing] = useState(false);\n  const setIsResizingDebounced = useDebouncedCallback(setIsResizing, [setIsResizing], THROTTLE, true);\n\n  useEffect(() => {\n    const throttledSetIsResizing = throttle(() => {\n      setIsResizing(true);\n    }, THROTTLE, true);\n\n    const throttledSetSize = throttle(() => {\n      const { width: newWidth, height: newHeight, screenHeight: newScreenHeight } = windowSize.get();\n      setWidth(newWidth);\n      setHeight(newHeight);\n      setScreenHeight(newScreenHeight);\n      setIsResizingDebounced(false);\n    }, THROTTLE, false);\n\n    const handleResize = () => {\n      throttledSetIsResizing();\n      throttledSetSize();\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [setIsResizingDebounced]);\n\n  return useMemo(() => ({\n    width, height, screenHeight, isResizing,\n  }), [height, isResizing, screenHeight, width]);\n}\n","import { getActions } from '../../global';\n\nimport { AUTO_CONFIRM_DURATION_MINUTES } from '../../config';\nimport { MINUTE } from '../dateFormat';\nimport { setReliableTimeout } from '../setReliableTimeout';\nimport { createSignal } from '../signals';\nimport { IS_DELEGATING_BOTTOM_SHEET, IS_IOS_APP } from '../windowEnvironment';\n\ninterface EncryptedPasswordData {\n  ciphertext: ArrayBuffer;\n  iv: Uint8Array;\n}\n\nconst [\n  getEncryptedPasswordSignal,\n  setEncryptedPasswordSignal,\n] = createSignal<EncryptedPasswordData | undefined>(undefined);\n\nlet encryptionKey: CryptoKey;\n\nconst isMainStore = IS_IOS_APP ? IS_DELEGATING_BOTTOM_SHEET : true;\n\nlet clearTimeout: NoneToVoidFunction | undefined;\n\nfunction resetTimeout() {\n  if (!isMainStore) return;\n\n  clearTimeout?.();\n  clearTimeout = setReliableTimeout(() => {\n    getActions().setInMemoryPassword({ password: undefined });\n  }, AUTO_CONFIRM_DURATION_MINUTES * MINUTE);\n}\n\nasync function initEncryptionKey(): Promise<CryptoKey> {\n  if (encryptionKey) return encryptionKey;\n\n  encryptionKey = await window.crypto.subtle.generateKey(\n    {\n      name: 'AES-GCM',\n      length: 256,\n    },\n    false,\n    ['encrypt', 'decrypt'],\n  );\n\n  return encryptionKey;\n}\n\nvoid initEncryptionKey();\n\nasync function encryptPassword(password: string): Promise<EncryptedPasswordData> {\n  const key = await initEncryptionKey();\n\n  const encoder = new TextEncoder();\n  const passwordData = encoder.encode(password);\n\n  const iv = window.crypto.getRandomValues(new Uint8Array(12));\n\n  const ciphertext = await window.crypto.subtle.encrypt(\n    {\n      name: 'AES-GCM',\n      iv,\n    },\n    key,\n    passwordData,\n  );\n\n  return { ciphertext, iv };\n}\n\nasync function decryptPassword(encryptedData: EncryptedPasswordData): Promise<string> {\n  const key = await initEncryptionKey();\n\n  const decryptedData = await window.crypto.subtle.decrypt(\n    {\n      name: 'AES-GCM',\n      iv: encryptedData.iv,\n    },\n    key,\n    encryptedData.ciphertext,\n  );\n\n  const decoder = new TextDecoder();\n  return decoder.decode(decryptedData);\n}\n\nexport function getHasInMemoryPassword() {\n  return getEncryptedPasswordSignal() !== undefined;\n}\n\nexport async function getInMemoryPassword() {\n  const encryptedData = getEncryptedPasswordSignal();\n  if (!encryptedData) return undefined;\n\n  try {\n    return await decryptPassword(encryptedData);\n  } catch (error) {\n    return undefined;\n  }\n}\n\nexport function setInMemoryPasswordSignal(password?: string) {\n  resetTimeout();\n\n  if (password === undefined) {\n    setEncryptedPasswordSignal(undefined);\n    return;\n  }\n\n  void encryptPassword(password).then((encrypted) => {\n    setEncryptedPasswordSignal(encrypted);\n  });\n}\n","const CHECK_INTERVAL = 5000;\n\nexport function setReliableTimeout(callback: NoneToVoidFunction, delay: number): NoneToVoidFunction {\n  if (delay <= 0) {\n    callback();\n    return () => {};\n  }\n\n  const startTime = Date.now();\n  let intervalId: number | undefined;\n  let isCleared = false;\n\n  const clear = () => {\n    if (isCleared) return;\n    isCleared = true;\n    if (intervalId) {\n      clearInterval(intervalId);\n      intervalId = undefined;\n    }\n  };\n\n  intervalId = window.setInterval(() => {\n    if (isCleared) return;\n    if (Date.now() - startTime >= delay) {\n      clear();\n      callback();\n    }\n  }, CHECK_INTERVAL);\n\n  return clear;\n}\n","import { IS_CORE_WALLET } from '../../../config';\n\nimport iconAddDark from '../../../assets/lottie/add_dark.tgs';\nimport iconAddLight from '../../../assets/lottie/add_light.tgs';\nimport iconClockDark from '../../../assets/lottie/clock_dark.tgs';\nimport iconClockDarkBlue from '../../../assets/lottie/clock_dark_blue.tgs';\nimport iconClockDarkGray from '../../../assets/lottie/clock_dark_gray.tgs';\nimport iconClockDarkGreen from '../../../assets/lottie/clock_dark_green.tgs';\nimport iconClockDarkPurple from '../../../assets/lottie/clock_dark_purple.tgs';\nimport iconClockDarkPurpleWhite from '../../../assets/lottie/clock_dark_purple_white.tgs';\nimport iconClockDarkRed from '../../../assets/lottie/clock_dark_red.tgs';\nimport iconClockLight from '../../../assets/lottie/clock_light.tgs';\nimport iconClockLightBlue from '../../../assets/lottie/clock_light_blue.tgs';\nimport iconClockLightGray from '../../../assets/lottie/clock_light_gray.tgs';\nimport iconClockLightGreen from '../../../assets/lottie/clock_light_green.tgs';\nimport iconClockLightPurple from '../../../assets/lottie/clock_light_purple.tgs';\nimport iconClockLightPurpleWhite from '../../../assets/lottie/clock_light_purple_white.tgs';\nimport iconClockLightRed from '../../../assets/lottie/clock_light_red.tgs';\nimport coreWalletLogo from '../../../assets/lottie/core_wallet_logo.tgs';\nimport bill from '../../../assets/lottie/duck_bill.tgs';\nimport forge from '../../../assets/lottie/duck_forges.tgs';\nimport guard from '../../../assets/lottie/duck_guard.tgs';\nimport happy from '../../../assets/lottie/duck_happy.tgs';\nimport hello from '../../../assets/lottie/duck_hello.tgs';\nimport noData from '../../../assets/lottie/duck_no-data.tgs';\nimport run from '../../../assets/lottie/duck_run.tgs';\nimport snitch from '../../../assets/lottie/duck_snitch.tgs';\nimport thumbUp from '../../../assets/lottie/duck_thumb.tgs';\nimport holdTon from '../../../assets/lottie/duck_ton.tgs';\nimport wait from '../../../assets/lottie/duck_wait.tgs';\nimport yeee from '../../../assets/lottie/duck_yeee.tgs';\nimport iconEarnDark from '../../../assets/lottie/earn_dark.tgs';\nimport iconEarnDarkPurple from '../../../assets/lottie/earn_dark_purple.tgs';\nimport iconEarnLight from '../../../assets/lottie/earn_light.tgs';\nimport iconEarnLightPurple from '../../../assets/lottie/earn_light_purple.tgs';\nimport iconSendDark from '../../../assets/lottie/send_dark.tgs';\nimport iconSendLight from '../../../assets/lottie/send_light.tgs';\nimport iconSwapDark from '../../../assets/lottie/swap_dark.tgs';\nimport iconSwapLight from '../../../assets/lottie/swap_light.tgs';\nimport iconClockPreviewDark from '../../../assets/lottiePreview/clock_dark.svg';\nimport iconClockPreviewDarkBlue from '../../../assets/lottiePreview/clock_dark_blue.svg';\nimport iconClockPreviewDarkGray from '../../../assets/lottiePreview/clock_dark_gray.svg';\nimport iconClockPreviewDarkGreen from '../../../assets/lottiePreview/clock_dark_green.svg';\nimport iconClockPreviewDarkPurple from '../../../assets/lottiePreview/clock_dark_purple.svg';\nimport iconClockPreviewDarkPurpleWhite from '../../../assets/lottiePreview/clock_dark_purple_white.svg';\nimport iconClockPreviewDarkRed from '../../../assets/lottiePreview/clock_dark_red.svg';\nimport iconClockPreviewLight from '../../../assets/lottiePreview/clock_light.svg';\nimport iconClockPreviewLightBlue from '../../../assets/lottiePreview/clock_light_blue.svg';\nimport iconClockPreviewLightGray from '../../../assets/lottiePreview/clock_light_gray.svg';\nimport iconClockPreviewLightGreen from '../../../assets/lottiePreview/clock_light_green.svg';\nimport iconClockPreviewLightPurple from '../../../assets/lottiePreview/clock_light_purple.svg';\nimport iconClockPreviewLightPurpleWhite from '../../../assets/lottiePreview/clock_light_purple_white.svg';\nimport iconClockPreviewLightRed from '../../../assets/lottiePreview/clock_light_red.svg';\nimport coreWalletLogoPreview from '../../../assets/lottiePreview/core_wallet_logo.png';\nimport billPreview from '../../../assets/lottiePreview/duck_bill.png';\nimport forgePreview from '../../../assets/lottiePreview/duck_forges.png';\nimport guardPreview from '../../../assets/lottiePreview/duck_guard.png';\nimport happyPreview from '../../../assets/lottiePreview/duck_happy.png';\nimport helloPreview from '../../../assets/lottiePreview/duck_hello.png';\nimport noDataPreview from '../../../assets/lottiePreview/duck_no-data.png';\nimport runPreview from '../../../assets/lottiePreview/duck_run.png';\nimport snitchPreview from '../../../assets/lottiePreview/duck_snitch.png';\nimport thumbUpPreview from '../../../assets/lottiePreview/duck_thumb.png';\nimport holdTonPreview from '../../../assets/lottiePreview/duck_ton.png';\nimport waitPreview from '../../../assets/lottiePreview/duck_wait.png';\nimport yeeePreview from '../../../assets/lottiePreview/duck_yeee.png';\n\nexport const ANIMATED_STICKERS_PATHS = {\n  hello,\n  snitch,\n  bill,\n  thumbUp,\n  holdTon,\n  happy,\n  noData,\n  forge,\n  wait,\n  run,\n  yeee,\n  guard,\n  helloPreview,\n  snitchPreview,\n  billPreview,\n  thumbUpPreview,\n  holdTonPreview,\n  happyPreview,\n  noDataPreview,\n  forgePreview,\n  waitPreview,\n  runPreview,\n  yeeePreview,\n  guardPreview,\n  ...(IS_CORE_WALLET && {\n    coreWalletLogo,\n    coreWalletLogoPreview,\n  }),\n  light: {\n    iconAdd: iconAddLight,\n    iconClock: iconClockLight,\n    iconClockBlue: iconClockLightBlue,\n    iconClockGray: iconClockLightGray,\n    iconClockGreen: iconClockLightGreen,\n    iconClockPurple: iconClockLightPurple,\n    iconClockPurpleWhite: iconClockLightPurpleWhite,\n    iconClockRed: iconClockLightRed,\n    iconEarn: iconEarnLight,\n    iconEarnPurple: iconEarnLightPurple,\n    iconSend: iconSendLight,\n    iconSwap: iconSwapLight,\n    preview: {\n      iconClock: iconClockPreviewLight,\n      iconClockBlue: iconClockPreviewLightBlue,\n      iconClockGray: iconClockPreviewLightGray,\n      iconClockGreen: iconClockPreviewLightGreen,\n      iconClockPurple: iconClockPreviewLightPurple,\n      iconClockPurpleWhite: iconClockPreviewLightPurpleWhite,\n      iconClockRed: iconClockPreviewLightRed,\n    },\n  },\n  dark: {\n    iconAdd: iconAddDark,\n    iconClock: iconClockDark,\n    iconClockBlue: iconClockDarkBlue,\n    iconClockGray: iconClockDarkGray,\n    iconClockGreen: iconClockDarkGreen,\n    iconClockPurple: iconClockDarkPurple,\n    iconClockPurpleWhite: iconClockDarkPurpleWhite,\n    iconClockRed: iconClockDarkRed,\n    iconEarn: iconEarnDark,\n    iconEarnPurple: iconEarnDarkPurple,\n    iconSend: iconSendDark,\n    iconSwap: iconSwapDark,\n    preview: {\n      iconClock: iconClockPreviewDark,\n      iconClockBlue: iconClockPreviewDarkBlue,\n      iconClockGray: iconClockPreviewDarkGray,\n      iconClockGreen: iconClockPreviewDarkGreen,\n      iconClockPurple: iconClockPreviewDarkPurple,\n      iconClockPurpleWhite: iconClockPreviewDarkPurpleWhite,\n      iconClockRed: iconClockPreviewDarkRed,\n    },\n  },\n};\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst DEFAULT_DURATION = 400;\n\nexport default function useFocusAfterAnimation(\n  ref: ElementRef<HTMLInputElement>, isDisabled = false, animationDuration = DEFAULT_DURATION,\n) {\n  useEffect(() => {\n    if (IS_TOUCH_ENV || isDisabled) {\n      return;\n    }\n\n    setTimeout(() => {\n      ref.current?.focus();\n    }, animationDuration);\n  }, [ref, animationDuration, isDisabled]);\n}\n","import { useRef } from '../lib/teact/teact';\n\nexport function useMatchCount(predicate: boolean, times: number): boolean {\n  const countRef = useRef(0);\n  const prevPredicateRef = useRef(false);\n\n  if (!prevPredicateRef.current && predicate && countRef.current < times) {\n    countRef.current += 1;\n  }\n\n  prevPredicateRef.current = predicate;\n\n  return countRef.current >= times;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ydGmLQB9\",\"input\":\"aOFCdA5h\",\"content\":\"ZEXtFSPZ\"};","import type { ChangeEvent } from 'react';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Checkbox.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  className?: string;\n  contentClassName?: string;\n  children?: TeactNode;\n  checked: boolean;\n  isDisabled?: boolean;\n  onChange: (isChecked: boolean) => void;\n};\n\nfunction Checkbox({\n  id,\n  className,\n  contentClassName,\n  children,\n  checked,\n  isDisabled,\n  onChange,\n}: OwnProps) {\n  const handleChange = useLastCallback((e: ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    onChange(e.currentTarget.checked);\n  });\n\n  return (\n    <label className={buildClassName(styles.wrapper, className)}>\n      <input\n        id={id}\n        type=\"checkbox\"\n        className={styles.input}\n        checked={checked}\n        disabled={isDisabled}\n        tabIndex={0}\n        onChange={!isDisabled ? handleChange : undefined}\n      />\n      <div className={buildClassName(styles.content, contentClassName)}>\n        {children}\n      </div>\n    </label>\n  );\n}\n\nexport default memo(Checkbox);\n","// extracted by mini-css-extract-plugin\nexport default {\"checkbox\":\"B2lzpHP0\",\"warning\":\"egsZTzXN\",\"accountLink\":\"mSBmBqo6\",\"accountLink_inner\":\"FsSJDg8c\",\"accountLinkInner\":\"FsSJDg8c\",\"penultimate\":\"T7L1H3Tm\"};","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { Account, AccountState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectNetworkAccounts } from '../../../global/selectors';\nimport { getAccountTitle } from '../../../util/account';\nimport buildClassName from '../../../util/buildClassName';\nimport { IS_IOS_APP } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './LogOutModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: (shouldCloseSettings: boolean) => void;\n  isInAppLock?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  hasManyAccounts: boolean;\n  accounts: Record<string, Account>;\n  accountStates: Record<string, AccountState>;\n  isBackupRequired?: boolean;\n}\n\ninterface LinkAccount {\n  id: string;\n  title: string;\n}\n\nfunction LogOutModal({\n  isOpen,\n  currentAccountId,\n  hasManyAccounts,\n  accounts,\n  accountStates,\n  isBackupRequired,\n  onClose,\n  isInAppLock,\n}: OwnProps & StateProps) {\n  const { signOut, switchAccount } = getActions();\n\n  const lang = useLang();\n  const [isLogOutFromAllAccounts, setIsLogOutFromAllAccounts] = useState<boolean>(IS_CORE_WALLET || !!isInAppLock);\n\n  const accountsWithoutBackups = useMemo(() => {\n    if (!hasManyAccounts) {\n      return [];\n    }\n\n    return Object.entries(accounts).reduce<LinkAccount[]>((acc, [id, account]) => {\n      if (id !== currentAccountId && accountStates[id]?.isBackupRequired) {\n        acc.push({\n          id,\n          title: getAccountTitle(account) ?? '',\n        });\n      }\n\n      return acc;\n    }, []);\n  }, [accounts, accountStates, currentAccountId, hasManyAccounts]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setIsLogOutFromAllAccounts(IS_CORE_WALLET || !!isInAppLock);\n    }\n  }, [isOpen, isInAppLock]);\n\n  const handleSwitchAccount = (accountId: string) => {\n    onClose(false);\n    switchAccount({ accountId });\n  };\n\n  const handleLogOut = useLastCallback(() => {\n    onClose(!isLogOutFromAllAccounts && hasManyAccounts);\n    signOut({ level: IS_CORE_WALLET ? 'all' : isLogOutFromAllAccounts ? 'network' : 'account' });\n  });\n\n  const handleClose = useLastCallback(() => {\n    onClose(false);\n  });\n\n  function renderAccountLink(account: LinkAccount, idx: number) {\n    const { id, title } = account;\n\n    const fullClassName = buildClassName(\n      !isInAppLock && styles.accountLink,\n      idx + 2 === accountsWithoutBackups.length && styles.penultimate,\n    );\n\n    if (isInAppLock) {\n      return (\n        <span className={fullClassName}>\n          <strong>{title}</strong>\n        </span>\n      );\n    }\n\n    return (\n      <span className={fullClassName}>\n        <a\n          key={id}\n          href=\"#\"\n          className={styles.accountLink_inner}\n          onClick={(e: React.MouseEvent) => {\n            e.preventDefault();\n            handleSwitchAccount(id);\n          }}\n        >\n          {title}\n        </a>\n      </span>\n    );\n  }\n\n  function renderBackupWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b> {lang('$logout_without_backup_warning')}\n      </p>\n    );\n  }\n\n  function renderBackupForAccountsWarning() {\n    return (\n      <p className={modalStyles.text}>\n        <b className={styles.warning}>{lang('Warning!')}</b>{' '}\n        {lang('$logout_accounts_without_backup_warning', {\n          links: <>{accountsWithoutBackups.map(renderAccountLink)}</>,\n        })}\n      </p>\n    );\n  }\n\n  const shouldRenderWarningForAnotherAccounts = isLogOutFromAllAccounts && accountsWithoutBackups.length > 0;\n  const shouldRenderWarningForCurrentAccount = isBackupRequired && !shouldRenderWarningForAnotherAccounts;\n  // Sibling button has wider text on iOS due to App Store \"Remove Wallet\" requirements\n  const cancelButtonClassNames = buildClassName(modalStyles.button, IS_IOS_APP && modalStyles.shortButton);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={IS_IOS_APP ? lang('Remove Wallet') : lang('Log Out')}\n      onClose={handleClose}\n      isInAppLock={isInAppLock}\n    >\n      <p className={buildClassName(modalStyles.text, modalStyles.text_noExtraMargin)}>\n        {renderText(lang('$logout_warning', '12/24'))}\n      </p>\n      {!(IS_CORE_WALLET || !!isInAppLock) && hasManyAccounts && (\n        <Checkbox\n          id=\"logount_all_accounts\"\n          className={styles.checkbox}\n          checked={isLogOutFromAllAccounts}\n          onChange={setIsLogOutFromAllAccounts}\n        >\n          {renderText(lang('$logout_confirm'))}\n        </Checkbox>\n      )}\n\n      {shouldRenderWarningForCurrentAccount && renderBackupWarning()}\n      {shouldRenderWarningForAnotherAccounts && renderBackupForAccountsWarning()}\n\n      <div className={modalStyles.buttons}>\n        <Button className={cancelButtonClassNames} onClick={handleClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isDestructive onClick={handleLogOut} className={modalStyles.button}>\n          {IS_IOS_APP ? lang('Remove Wallet') : lang('Exit')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const accounts = selectNetworkAccounts(global) || {};\n    const currentAccountState = selectCurrentAccountState(global);\n    const accountIds = Object.keys(accounts);\n    const hasManyAccounts = accountIds.length > 1;\n\n    return {\n      currentAccountId: global.currentAccountId!,\n      hasManyAccounts,\n      accounts,\n      accountStates: global.byAccountId,\n      isBackupRequired: currentAccountState?.isBackupRequired,\n    };\n  })(LogOutModal),\n);\n","type Parts = (string | false | undefined)[];\n\nexport default function buildStyle(...parts: Parts) {\n  return parts.filter(Boolean).join(';');\n}\n","import useShowTransition, { type HookParams } from './useShowTransition';\n\nexport default function useMediaTransition<RefType extends HTMLElement = HTMLDivElement>(\n  mediaData?: unknown,\n  options?: Partial<HookParams<RefType>>,\n) {\n  const isMediaReady = Boolean(mediaData);\n\n  const { ref } = useShowTransition<RefType>({\n    isOpen: isMediaReady,\n    noMountTransition: isMediaReady,\n    className: 'slow',\n    ...options,\n  });\n\n  return ref;\n}\n","type RLottieClass = typeof import('./RLottie').default;\n\nlet promise: Promise<RLottieClass> | undefined;\nlet RLottie: RLottieClass;\n\n// Time for the main interface to completely load\nconst LOTTIE_LOAD_DELAY = 3000;\n\nexport async function ensureRLottie() {\n  if (!promise) {\n    promise = import('./RLottie').then((module) => module.default);\n    RLottie = await promise;\n  }\n\n  return promise;\n}\n\nexport function getRLottie() {\n  return RLottie;\n}\n\nsetTimeout(ensureRLottie, LOTTIE_LOAD_DELAY);\n","export type RGBColor = [number, number, number];\n\nexport function hex2rgb(param: string): RGBColor {\n  const hex = param.replace('#', '');\n  return [\n    parseInt(hex.substring(0, 2), 16),\n    parseInt(hex.substring(2, 4), 16),\n    parseInt(hex.substring(4, 6), 16),\n  ];\n}\n\nexport default function rgbToHex(rgb: [number, number, number]) {\n  return `#${rgb.map((x) => {\n    const hex = x.toString(16);\n    return hex.length === 1 ? `0${hex}` : hex;\n  }).join('')}`;\n}\n\nexport function euclideanDistance(color1: RGBColor, color2: RGBColor): number {\n  const r = 0.3 * ((color1[0] - color2[0]) ** 2);\n  const g = 0.59 * ((color1[1] - color2[1]) ** 2);\n  const b = 0.11 * ((color1[2] - color2[2]) ** 2);\n\n  return Math.sqrt(r + g + b);\n}\n\nfunction rgbToLab(rgb: RGBColor): RGBColor {\n  let [r, g, b] = rgb.map((value) => value / 255);\n  [r, g, b] = [r, g, b].map((value) => (value > 0.04045 ? ((value + 0.055) / 1.055) ** 2.4 : value / 12.92));\n\n  let x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  let y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  let z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n\n  [x, y, z] = [x / 0.95047, y, z / 1.08883].map(\n    (value) => (value > 0.008856 ? value ** (1 / 3) : (7.787 * value) + 16 / 116),\n  );\n\n  return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)];\n}\n\n/**\n * Calculates the perceptual difference between two RGB colors.\n *\n * Delta E is a metric for understanding how the human eye perceives color difference.\n * The following table provides a general guideline:\n *\n * Delta E  |  Perception\n * ---------|-------------------------------------------\n * <= 1.0   | Not perceptible by human eyes.\n * 1 - 2    | Perceptible through close observation.\n * 2 - 10   | Perceptible at a glance.\n * 11 - 49  | Colors are more similar than opposite.\n * 100      | Colors are exact opposite.\n *\n * @param rgbA The first color as an RGB array.\n * @param rgbB The second color as an RGB array.\n * @returns The Delta E value representing the color difference.\n */\nexport function deltaE(rgbA: RGBColor, rgbB: RGBColor): number {\n  const [l1, a1, b1] = rgbToLab(rgbA);\n  const [l2, a2, b2] = rgbToLab(rgbB);\n\n  const c1 = Math.sqrt(a1 * a1 + b1 * b1);\n  const c2 = Math.sqrt(a2 * a2 + b2 * b2);\n  const deltaC = c1 - c2;\n\n  const deltaL = l1 - l2;\n  const deltaA = a1 - a2;\n  const deltaB = b1 - b2;\n\n  const deltaH = Math.sqrt(deltaA * deltaA + deltaB * deltaB - deltaC * deltaC);\n\n  const sl = 1.0;\n  const sc = 1.0 + 0.045 * c1;\n  const sh = 1.0 + 0.015 * c1;\n\n  const deltaLKlsl = deltaL / sl;\n  const deltaCkcsc = deltaC / sc;\n  const deltaHkhsh = deltaH / sh;\n\n  return Math.sqrt(deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh);\n}\n","import {\n  getIsHeavyAnimating,\n  useCallback, useEffect, useMemo, useRef,\n} from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nexport const startCallbacks = createCallbackManager();\nexport const endCallbacks = createCallbackManager();\n\ngetIsHeavyAnimating.subscribe(() => {\n  if (getIsHeavyAnimating()) {\n    startCallbacks.runCallbacks();\n  } else {\n    endCallbacks.runCallbacks();\n  }\n});\n\nexport default function useHeavyAnimation(\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (getIsHeavyAnimating()) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnEnd, lastOnStart]);\n}\n\n// TODO  `onFullyIdle`?\nexport function useThrottleForHeavyAnimation<T extends AnyToVoidFunction>(afterHeavyAnimation: T, deps: unknown[]) {\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  const fnMemo = useCallback(afterHeavyAnimation, deps);\n\n  const isScheduledRef = useRef(false);\n\n  return useMemo(() => {\n    return (...args: Parameters<T>) => {\n      if (!isScheduledRef.current) {\n        if (!getIsHeavyAnimating()) {\n          fnMemo(...args);\n          return;\n        }\n\n        isScheduledRef.current = true;\n\n        const removeCallback = endCallbacks.addCallback(() => {\n          fnMemo(...args);\n          removeCallback();\n          isScheduledRef.current = false;\n        });\n      }\n    };\n  }, [fnMemo]);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport useLastCallback from './useLastCallback';\n\nconst startCallbacks = createCallbackManager();\nconst endCallbacks = createCallbackManager();\n\nlet timeout: number | undefined;\nlet isActive = false;\n\nconst usePriorityPlaybackCheck = (\n  onStart?: AnyToVoidFunction,\n  onEnd?: AnyToVoidFunction,\n  isDisabled = false,\n) => {\n  const lastOnStart = useLastCallback(onStart);\n  const lastOnEnd = useLastCallback(onEnd);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    if (isActive) {\n      lastOnStart();\n    }\n\n    startCallbacks.addCallback(lastOnStart);\n    endCallbacks.addCallback(lastOnEnd);\n\n    return () => {\n      endCallbacks.removeCallback(lastOnEnd);\n      startCallbacks.removeCallback(lastOnStart);\n    };\n  }, [isDisabled, lastOnStart, lastOnEnd]);\n};\n\nexport function isPriorityPlaybackActive() {\n  return isActive;\n}\n\nexport function dispatchPriorityPlaybackEvent() {\n  if (!isActive) {\n    isActive = true;\n    startCallbacks.runCallbacks();\n  }\n\n  if (timeout) {\n    clearTimeout(timeout);\n    timeout = undefined;\n  }\n\n  // Race condition may happen if another `dispatchPriorityPlaybackEvent` is called before `onEnd`\n  function onEnd() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = undefined;\n    }\n\n    isActive = false;\n    endCallbacks.runCallbacks();\n  }\n\n  return onEnd;\n}\n\nexport default usePriorityPlaybackCheck;\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\nimport type { CallbackManager } from '../util/callbacks';\n\nimport { createCallbackManager } from '../util/callbacks';\nimport { useStateRef } from './useStateRef';\n\nconst elementObserverMap = new Map<HTMLElement, [IntersectionObserver, CallbackManager]>();\n\nexport default function useSharedIntersectionObserver(\n  refOrElement: ElementRef<HTMLElement> | HTMLElement | undefined,\n  onIntersectionChange: (entry: IntersectionObserverEntry) => void,\n  isDisabled = false,\n) {\n  const onIntersectionChangeRef = useStateRef(onIntersectionChange);\n\n  useEffect(() => {\n    const el = refOrElement && 'current' in refOrElement ? refOrElement.current : refOrElement;\n    if (!el || isDisabled) {\n      return undefined;\n    }\n\n    const callback: IntersectionObserverCallback = ([entry]) => {\n      // Ignore updates when element is not properly mounted (`display: none`)\n      if (!(entry.target as HTMLElement).offsetWidth || !(entry.target as HTMLElement).offsetHeight) {\n        return;\n      }\n\n      onIntersectionChangeRef.current(entry);\n    };\n\n    let [observer, callbackManager] = elementObserverMap.get(el) || [undefined, undefined];\n    if (!observer) {\n      callbackManager = createCallbackManager();\n      observer = new IntersectionObserver(callbackManager.runCallbacks);\n      elementObserverMap.set(el, [observer, callbackManager]);\n      observer.observe(el);\n    }\n    callbackManager!.addCallback(callback);\n\n    return () => {\n      callbackManager!.removeCallback(callback);\n      if (!callbackManager!.hasCallbacks()) {\n        observer.unobserve(el);\n        observer.disconnect();\n        elementObserverMap.delete(el);\n      }\n    };\n  }, [isDisabled, onIntersectionChangeRef, refOrElement]);\n}\n","import type { ElementRef, FC } from '../../lib/teact/teact';\nimport React, {\n  getIsHeavyAnimating, memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type RLottieInstance from '../../lib/rlottie/RLottie';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport { ensureRLottie, getRLottie } from '../../lib/rlottie/RLottie.async';\nimport buildStyle from '../../util/buildStyle';\nimport { hex2rgb } from '../../util/colors';\nimport generateUniqueId from '../../util/generateUniqueId';\nimport { IS_ELECTRON, IS_IOS } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHeavyAnimation from '../../hooks/useHeavyAnimation';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePriorityPlaybackCheck, { isPriorityPlaybackActive } from '../../hooks/usePriorityPlaybackCheck';\nimport useSharedIntersectionObserver from '../../hooks/useSharedIntersectionObserver';\nimport { useStateRef } from '../../hooks/useStateRef';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nexport type OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  renderId?: string;\n  className?: string;\n  style?: string;\n  tgsUrl?: string;\n  play?: boolean | string;\n  playSegment?: [number, number];\n  speed?: number;\n  noLoop?: boolean;\n  size: number;\n  shouldStretch?: boolean;\n  quality?: number;\n  color?: string;\n  isLowPriority?: boolean;\n  forceOnHeavyAnimation?: boolean;\n  forceInBackground?: boolean;\n  sharedCanvas?: HTMLCanvasElement;\n  sharedCanvasCoords?: { x: number; y: number };\n  onClick?: NoneToVoidFunction;\n  onLoad?: NoneToVoidFunction;\n  onEnded?: NoneToVoidFunction;\n  onLoop?: NoneToVoidFunction;\n};\n\nconst THROTTLE_MS = 150;\n\nconst AnimatedSticker: FC<OwnProps> = ({\n  ref,\n  renderId,\n  className,\n  style,\n  tgsUrl,\n  play,\n  playSegment,\n  speed,\n  noLoop,\n  size,\n  shouldStretch,\n  quality,\n  isLowPriority,\n  color,\n  forceOnHeavyAnimation,\n  forceInBackground,\n  sharedCanvas,\n  sharedCanvasCoords,\n  onClick,\n  onLoad,\n  onEnded,\n  onLoop,\n}) => {\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const viewId = useUniqueId();\n\n  const [animation, setAnimation] = useState<RLottieInstance>();\n  const animationRef = useRef<RLottieInstance>();\n  const isFirstRender = useRef(true);\n\n  const playKey = play || (play === false ? false : playSegment);\n  const playRef = useStateRef(play);\n  const playSegmentRef = useStateRef(playSegment);\n\n  const rgbColor = useRef<[number, number, number] | undefined>();\n\n  const isUnmountedRef = useRef(false);\n  useEffect(() => {\n    return () => {\n      isUnmountedRef.current = true;\n    };\n  }, []);\n\n  useSyncEffect(() => {\n    if (color) {\n      const [r, g, b] = hex2rgb(color);\n      rgbColor.current = [r, g, b];\n    } else {\n      rgbColor.current = undefined;\n    }\n  }, [color]);\n\n  const init = useLastCallback(() => {\n    if (\n      animationRef.current\n      || isUnmountedRef.current\n      || !tgsUrl\n      || (sharedCanvas && (!sharedCanvasCoords || !sharedCanvas.offsetWidth || !sharedCanvas.offsetHeight))\n    ) {\n      return;\n    }\n\n    const container = containerRef.current || sharedCanvas;\n    if (!container) {\n      return;\n    }\n\n    const newAnimation = getRLottie().init(\n      tgsUrl,\n      container,\n      renderId || generateUniqueId(),\n      {\n        size,\n        shouldStretch,\n        noLoop,\n        quality,\n        isLowPriority,\n        coords: sharedCanvasCoords,\n      },\n      viewId,\n      rgbColor.current,\n      onLoad,\n      onEnded,\n      onLoop,\n    );\n\n    if (speed) {\n      newAnimation.setSpeed(speed);\n    }\n\n    setAnimation(newAnimation);\n    animationRef.current = newAnimation;\n  });\n\n  useEffect(() => {\n    if (getRLottie()) {\n      init();\n    } else {\n      void ensureRLottie().then(init);\n    }\n  }, [init, tgsUrl, sharedCanvas, sharedCanvasCoords]);\n\n  const throttledInit = useThrottledCallback(init, [init], THROTTLE_MS);\n  useSharedIntersectionObserver(sharedCanvas, throttledInit);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    animation.setColor(rgbColor.current);\n  }, [color, animation]);\n\n  useEffect(() => {\n    return () => {\n      animationRef.current?.removeView(viewId);\n    };\n  }, [viewId]);\n\n  const playAnimation = useLastCallback((shouldRestart = false) => {\n    if (\n      !animation\n      || !(playRef.current || playSegmentRef.current)\n      || isFrozen(forceOnHeavyAnimation, forceInBackground)\n    ) {\n      return;\n    }\n\n    if (playSegmentRef.current) {\n      animation.playSegment(playSegmentRef.current, shouldRestart, viewId);\n    } else {\n      animation.play(shouldRestart, viewId);\n    }\n  });\n\n  const playAnimationOnRaf = useLastCallback(() => {\n    requestMeasure(playAnimation);\n  });\n\n  const pauseAnimation = useLastCallback(() => {\n    if (animation?.isPlaying()) {\n      animation.pause(viewId);\n    }\n  });\n\n  useEffectWithPrevDeps(([prevNoLoop]) => {\n    if (prevNoLoop !== undefined && noLoop !== prevNoLoop) {\n      animation?.setNoLoop(noLoop);\n    }\n  }, [noLoop, animation]);\n\n  useEffectWithPrevDeps(([prevSharedCanvasCoords]) => {\n    if (prevSharedCanvasCoords !== undefined && sharedCanvasCoords !== prevSharedCanvasCoords) {\n      void animation?.setSharedCanvasCoords(viewId, sharedCanvasCoords);\n    }\n  }, [sharedCanvasCoords, viewId, animation]);\n\n  useEffect(() => {\n    if (!animation) {\n      return;\n    }\n\n    if (playKey) {\n      if (!isFrozen(forceOnHeavyAnimation, forceInBackground)) {\n        playAnimation(noLoop);\n      }\n    } else {\n      pauseAnimation();\n    }\n  }, [animation, playKey, noLoop, playAnimation, pauseAnimation, forceOnHeavyAnimation, forceInBackground]);\n\n  useEffect(() => {\n    if (!animation) return;\n\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n    } else if (tgsUrl) {\n      animation.changeData(tgsUrl);\n      playAnimation(noLoop);\n    }\n  }, [playAnimation, animation, tgsUrl, noLoop]);\n\n  useHeavyAnimation(pauseAnimation, playAnimation, forceOnHeavyAnimation || IS_IOS || !playKey);\n  usePriorityPlaybackCheck(pauseAnimation, playAnimation, !playKey);\n  // Pausing frame may not happen in background,\n  // so we need to make sure it happens right after focusing,\n  // then we can play again.\n  useBackgroundMode(pauseAnimation, playAnimationOnRaf, !playKey || forceInBackground);\n\n  if (sharedCanvas) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      style={buildStyle(\n        size !== undefined && !shouldStretch && `width: ${size}px; height: ${size}px;`,\n        onClick && !IS_ELECTRON && 'cursor: pointer',\n        style,\n      )}\n      onClick={onClick}\n    />\n  );\n};\n\nexport default memo(AnimatedSticker);\n\nfunction isFrozen(forceOnHeavyAnimation = false, forceInBackground = false) {\n  return (!forceOnHeavyAnimation && !IS_IOS && getIsHeavyAnimating())\n    || isPriorityPlaybackActive()\n    || (!forceInBackground && isBackgroundModeActive());\n}\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\n\nimport type { OwnProps as AnimatedStickerProps } from './AnimatedSticker';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedSticker from './AnimatedSticker';\n\nexport type OwnProps =\n  Partial<AnimatedStickerProps>\n  & { noTransition?: boolean; nonInteractive?: boolean; size: number };\n\nfunction AnimatedIcon(props: OwnProps) {\n  const {\n    size,\n    play = true,\n    noLoop = true,\n    className,\n    noTransition,\n    nonInteractive,\n    onLoad,\n    onClick,\n    ...otherProps\n  } = props;\n  const [isAnimationLoaded, markAnimationLoaded] = useFlag(false);\n  const ref = useMediaTransition(noTransition || isAnimationLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markAnimationLoaded();\n    onLoad?.();\n  });\n\n  const [playKey, setPlayKey] = useState(String(Math.random()));\n\n  const handleClick = useLastCallback(() => {\n    if (play === true) {\n      setPlayKey(String(Math.random()));\n    }\n\n    onClick?.();\n  });\n\n  return (\n    <AnimatedSticker\n      ref={ref}\n      className={className}\n      size={size}\n      play={play === true ? playKey : play}\n      noLoop={noLoop}\n      onClick={!nonInteractive ? handleClick : undefined}\n      onLoad={handleLoad}\n\n      {...otherProps}\n    />\n  );\n}\n\nexport default memo(AnimatedIcon);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aNPdKxlh\",\"preview\":\"haM4SCte\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { OwnProps as AnimatedIconProps } from './AnimatedIcon';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIcon from './AnimatedIcon';\n\nimport styles from './AnimatedIconWithPreview.module.scss';\n\ntype OwnProps =\n  Partial<AnimatedIconProps>\n  & {\n    iconPreviewClass?: string;\n    previewUrl?: string;\n    thumbDataUri?: string;\n    noPreviewTransition?: boolean;\n  };\n\ninterface StateProps {\n  noAnimation?: boolean;\n}\n\nconst loadedPreviewUrls = new Set();\nconst DEFAULT_SIZE = 150;\n\nfunction AnimatedIconWithPreview(props: OwnProps & StateProps) {\n  const {\n    size = DEFAULT_SIZE,\n    previewUrl,\n    iconPreviewClass,\n    thumbDataUri,\n    className,\n    noAnimation,\n    noPreviewTransition,\n    ...otherProps\n  } = props;\n\n  const [isPreviewLoaded, markPreviewLoaded] = useFlag(\n    Boolean(iconPreviewClass) || Boolean(thumbDataUri) || loadedPreviewUrls.has(previewUrl),\n  );\n  const ref = useMediaTransition(isPreviewLoaded || noPreviewTransition);\n  const [isAnimationReady, markAnimationReady, markAnimationNotReady] = useFlag(false);\n\n  useEffect(() => {\n    if (noAnimation) {\n      markAnimationNotReady();\n    }\n  }, [markAnimationNotReady, noAnimation]);\n\n  const handlePreviewLoad = useLastCallback(() => {\n    markPreviewLoaded();\n    loadedPreviewUrls.add(previewUrl);\n  });\n\n  return (\n    <div\n      ref={!noPreviewTransition ? ref : undefined}\n      className={buildClassName(className, styles.root)}\n      style={buildStyle(\n        size !== undefined && !otherProps.shouldStretch && `width: ${size}px; height: ${size}px;`,\n      )}\n      data-preview-url={previewUrl}\n    >\n      {thumbDataUri && !previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img src={thumbDataUri} className={styles.preview} />\n      )}\n      {previewUrl && !isAnimationReady && (\n        // eslint-disable-next-line jsx-a11y/alt-text\n        <img\n          src={previewUrl}\n          className={styles.preview}\n          onLoad={handlePreviewLoad}\n        />\n      )}\n      {iconPreviewClass && !isAnimationReady && (\n        <i className={buildClassName(styles.preview, iconPreviewClass)} aria-hidden />\n      )}\n      {!noAnimation && <AnimatedIcon size={size} {...otherProps} onLoad={markAnimationReady} noTransition />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    noAnimation: global.settings.animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(AnimatedIconWithPreview));\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"LCV_ofSL\",\"input\":\"O85V9ajV\",\"error\":\"hhZYLQar\",\"disabled\":\"sAhrzaLV\",\"input_password\":\"MawuFp3r\",\"inputPassword\":\"MawuFp3r\",\"rich\":\"_JfHIm8U\",\"rich__value\":\"VyaUZjoQ\",\"richValue\":\"VyaUZjoQ\",\"rich__placeholder\":\"Fd5oMpfT\",\"richPlaceholder\":\"Fd5oMpfT\",\"isLoading\":\"oLkTqd0H\",\"large\":\"cp2mDTzv\",\"inputWrapperStatic\":\"_30fntf1\",\"input__wrapper\":\"Q9N6yVvw\",\"inputWrapper\":\"Q9N6yVvw\",\"input__wrapper_hasFocus\":\"xJ8YLUEc\",\"inputWrapperHasFocus\":\"xJ8YLUEc\",\"visibilityToggle\":\"tXgxOPqo\",\"visibilityToggle_push\":\"uXlOxDsj\",\"visibilityTogglePush\":\"uXlOxDsj\",\"fractional\":\"Q68NbVRf\",\"label\":\"dGKNlTrc\",\"label_error\":\"PFA7oH6u\",\"labelError\":\"PFA7oH6u\",\"label_forPassword\":\"i9G7zfox\",\"labelForPassword\":\"i9G7zfox\",\"label_errorUnderInput\":\"N0y6_7Nt\",\"labelErrorUnderInput\":\"N0y6_7Nt\",\"label_errorBottom\":\"fAnhlq4h\",\"labelErrorBottom\":\"fAnhlq4h\",\"swapCorner\":\"hcCyNq6V\",\"swapCorner_error\":\"tRQeFT_t\",\"swapCornerError\":\"tRQeFT_t\",\"mask\":\"dYsHTHj3\",\"inputContainer\":\"vjJxciaS\",\"input_withValueOverlay\":\"qHmkgxAZ\",\"inputWithValueOverlay\":\"qHmkgxAZ\",\"valueOverlay\":\"yLnZrd5z\",\"static\":\"PXCfAg02\"};","import type {\n  ChangeEvent, FormEvent, KeyboardEvent, RefObject,\n} from 'react';\nimport type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLInputElement | HTMLTextAreaElement>;\n  id?: string;\n  type?: 'text' | 'password';\n  label?: TeactNode;\n  placeholder?: string;\n  valueOverlay?: TeactNode;\n  value?: string | number;\n  inputMode?: 'numeric' | 'text' | 'search';\n  maxLength?: number;\n  isRequired?: boolean;\n  isDisabled?: boolean;\n  isMultiline?: boolean;\n  hasError?: boolean;\n  error?: string;\n  className?: string;\n  wrapperClassName?: string;\n  autoCapitalize?: string;\n  autoComplete?: string;\n  autoCorrect?: boolean;\n  inputArg?: any;\n  children?: TeactNode;\n  onInput: (value: string, inputArg?: any) => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onFocus?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onBlur?: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  isStatic?: boolean;\n};\n\nfunction Input({\n  ref,\n  id,\n  label,\n  placeholder,\n  valueOverlay,\n  inputMode,\n  isRequired,\n  isDisabled,\n  isMultiline,\n  hasError,\n  type = 'text',\n  error,\n  value = '',\n  maxLength,\n  inputArg,\n  className,\n  wrapperClassName,\n  autoCapitalize,\n  autoComplete,\n  autoCorrect,\n  children,\n  onInput,\n  onKeyDown,\n  onFocus,\n  onBlur,\n  isStatic,\n}: OwnProps) {\n  const lang = useLang();\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n\n  const showValueOverlay = Boolean(valueOverlay && !hasFocus);\n\n  const handleInput = (e: FormEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    onInput(e.currentTarget.value, inputArg);\n  };\n\n  const handleTogglePasswordVisibility = () => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLTextAreaElement>) => {\n    const { currentTarget } = e;\n    const { scrollHeight } = currentTarget;\n\n    requestMutation(() => {\n      currentTarget.style.height = '0';\n      currentTarget.style.height = `${scrollHeight}px`;\n    });\n  };\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    markHasFocus();\n    onFocus?.(e);\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkHasFocus();\n    onBlur?.(e);\n  };\n\n  const finalType = type === 'text' || isPasswordVisible ? 'text' : 'password';\n  const inputFullClass = buildClassName(\n    styles.input,\n    className,\n    type === 'password' && styles.input_password,\n    (hasError || error) && styles.error,\n    isDisabled && styles.disabled,\n    valueOverlay && styles.input_withvalueOverlay,\n  );\n  const labelFullClass = buildClassName(\n    styles.label,\n    (hasError || error) && styles.error,\n    (hasError || error) && type === 'password' && styles.label_forPassword,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, wrapperClassName)}>\n      {error && !!label && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {!!label && (\n        <label className={labelFullClass} htmlFor={id}>\n          {label}\n        </label>\n      )}\n      <div className={styles.inputContainer}>\n        {isMultiline ? (\n          <textarea\n            ref={ref as RefObject<HTMLTextAreaElement>}\n            id={id}\n            className={inputFullClass}\n            value={value}\n            disabled={isDisabled}\n            maxLength={maxLength}\n            autoComplete={autoComplete}\n            onInput={handleInput}\n            onChange={handleChange}\n            onKeyDown={onKeyDown}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            tabIndex={0}\n            required={isRequired}\n            placeholder={valueOverlay ? undefined : placeholder}\n          />\n        ) : (\n          <input\n            ref={ref as RefObject<HTMLInputElement>}\n            id={id}\n            className={inputFullClass}\n            type={finalType}\n            value={value}\n            disabled={isDisabled}\n            inputMode={inputMode}\n            maxLength={maxLength}\n            autoCapitalize={autoCapitalize}\n            autoComplete={autoComplete}\n            autoCorrect={autoCorrect}\n            spellCheck={autoCorrect}\n            onInput={handleInput}\n            onKeyDown={onKeyDown}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            tabIndex={0}\n            required={isRequired}\n            placeholder={valueOverlay ? undefined : placeholder}\n          />\n        )}\n\n        {showValueOverlay && (\n          <div className={buildClassName(styles.valueOverlay, isStatic && styles.static)}>\n            {valueOverlay}\n          </div>\n        )}\n      </div>\n\n      {type === 'password' && (\n        <button\n          className={buildClassName(styles.visibilityToggle, label && styles.visibilityToggle_push)}\n          type=\"button\"\n          onClick={handleTogglePasswordVisibility}\n          aria-label={lang('Change password visibility')}\n          tabIndex={-1}\n        >\n          <i className={isPasswordVisible ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n        </button>\n      )}\n      {children}\n      {error && !label && (\n        <label className={buildClassName(styles.label, styles.label_errorBottom, styles.error)} htmlFor={id}>\n          {error}\n        </label>\n      )}\n    </div>\n  );\n}\n\nexport default memo(Input);\n","// Sometimes event is fired earlier than animation completes\nconst ANIMATION_END_DELAY = 50;\n\nexport function waitForTransitionEnd(\n  node: Node, handler: NoneToVoidFunction, propertyName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('transitionend', node, handler, propertyName, fallbackMs);\n}\n\nexport function waitForAnimationEnd(\n  node: Node, handler: NoneToVoidFunction, animationName?: string, fallbackMs?: number,\n) {\n  return waitForEndEvent('animationend', node, handler, animationName, fallbackMs);\n}\n\nfunction waitForEndEvent(\n  eventType: 'transitionend' | 'animationend',\n  node: Node,\n  handler: NoneToVoidFunction,\n  detailedName?: string,\n  fallbackMs?: number,\n) {\n  let isHandled = false;\n\n  function cleanup() {\n    node.removeEventListener(eventType, handleAnimationEnd);\n  }\n\n  function handleAnimationEnd(e: TransitionEvent | AnimationEvent | Event) {\n    if (isHandled || e.target !== e.currentTarget) {\n      return;\n    }\n\n    if (detailedName && (\n      (e instanceof TransitionEvent && e.propertyName === detailedName)\n      || (e instanceof AnimationEvent && e.animationName === detailedName)\n    )) {\n      return;\n    }\n\n    isHandled = true;\n\n    cleanup();\n\n    setTimeout(() => {\n      handler();\n    }, ANIMATION_END_DELAY);\n  }\n\n  node.addEventListener(eventType, handleAnimationEnd);\n\n  if (fallbackMs) {\n    setTimeout(() => {\n      if (isHandled) return;\n\n      cleanup();\n\n      handler();\n    }, fallbackMs);\n  }\n\n  return cleanup;\n}\n","import type { MoveOffsets } from './captureEvents';\n\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animateNumber, timingFunctions } from './animation';\nimport { captureEvents, SwipeDirection } from './captureEvents';\nimport { waitForAnimationEnd } from './cssAnimationEndListeners';\nimport { clamp } from './math';\nimport { IS_IOS } from './windowEnvironment';\n\nconst INERTIA_DURATION = 300;\nconst INERTIA_EASING = timingFunctions.easeOutCubic;\n\nexport const SWIPE_DISABLED_CLASS_NAME = 'swipe-disabled';\n\nlet isSwipeActive = false;\nlet swipeOffsets: MoveOffsets | undefined;\nlet onDrag: ((offsets: MoveOffsets) => void) | undefined;\nlet onRelease: ((onCancel: NoneToVoidFunction) => void) | undefined;\nlet cancelCurrentReleaseAnimation: NoneToVoidFunction | undefined;\n\nexport function captureControlledSwipe(\n  element: HTMLElement, options: {\n    onSwipeLeftStart?: NoneToVoidFunction;\n    onSwipeRightStart?: NoneToVoidFunction;\n    onCancel: NoneToVoidFunction;\n  },\n) {\n  return captureEvents(element, {\n    swipeThreshold: 10,\n\n    withNativeDrag: true,\n    excludedClosestSelector: `.${SWIPE_DISABLED_CLASS_NAME}`,\n\n    onSwipe(e, direction, offsets) {\n      if (direction === SwipeDirection.Left) {\n        options.onSwipeLeftStart?.();\n      } else if (direction === SwipeDirection.Right) {\n        options.onSwipeRightStart?.();\n      } else {\n        return false;\n      }\n\n      if (IS_IOS) {\n        isSwipeActive = true;\n        swipeOffsets = offsets;\n      }\n\n      return true;\n    },\n\n    onDrag(e, captureEvent, offsets) {\n      if (!isSwipeActive) return;\n\n      onDrag?.(offsets);\n    },\n\n    onRelease() {\n      if (!isSwipeActive) return;\n\n      isSwipeActive = false;\n\n      onRelease?.(options.onCancel);\n\n      onDrag = undefined;\n      onRelease = undefined;\n    },\n  });\n}\n\nexport function allowSwipeControlForTransition(\n  currentSlide: HTMLElement,\n  nextSlide: HTMLElement,\n  onCancelForTransition: NoneToVoidFunction,\n) {\n  cancelCurrentReleaseAnimation?.();\n\n  if (!isSwipeActive) return;\n\n  const targetPosition = extractAnimationEndPosition(currentSlide);\n  if (!targetPosition) return;\n\n  currentSlide.getAnimations().forEach((a) => a.pause());\n  nextSlide.getAnimations().forEach((a) => a.pause());\n\n  currentSlide.style.animationTimingFunction = 'linear';\n  nextSlide.style.animationTimingFunction = 'linear';\n\n  let currentDirection: 1 | -1 | undefined;\n\n  requestMeasure(() => {\n    const computedStyle = getComputedStyle(currentSlide);\n    const initialPositionPx = extractPositionFromMatrix(computedStyle.transform, targetPosition.axis);\n    const targetPositionPx = targetPosition.units === 'px'\n      ? targetPosition.value\n      : ((targetPosition.value / 100) * (\n        targetPosition.axis === 'X' ? currentSlide.offsetWidth : currentSlide.offsetHeight\n      ));\n    const distance = targetPositionPx - initialPositionPx;\n\n    let progress = 0;\n\n    onDrag = ({ dragOffsetX, dragOffsetY }) => {\n      const dragOffset = targetPosition.axis === 'X'\n        ? dragOffsetX - swipeOffsets!.dragOffsetX\n        : dragOffsetY - swipeOffsets!.dragOffsetY;\n\n      const newProgress = clamp(dragOffset / distance, 0, 1);\n      currentDirection = newProgress > progress ? 1 : -1;\n      progress = newProgress;\n\n      updateAnimationProgress([currentSlide, nextSlide], progress);\n    };\n\n    onRelease = (onCancelForClient: NoneToVoidFunction) => {\n      const isRevertSwipe = currentDirection === -1;\n\n      function cleanup() {\n        currentSlide.getAnimations().forEach((a) => a.cancel());\n        nextSlide.getAnimations().forEach((a) => a.cancel());\n\n        requestMutation(() => {\n          currentSlide.style.animationTimingFunction = '';\n          nextSlide.style.animationTimingFunction = '';\n        });\n      }\n\n      if (!isRevertSwipe) {\n        // For some reason animations are not cleared when CSS class is removed\n        waitForAnimationEnd(currentSlide, cleanup);\n      }\n\n      cancelCurrentReleaseAnimation = animateNumber({\n        from: progress,\n        to: isRevertSwipe ? 0 : 1,\n        duration: INERTIA_DURATION,\n        timing: INERTIA_EASING,\n        onUpdate(releaseProgress) {\n          updateAnimationProgress([currentSlide, nextSlide], releaseProgress);\n        },\n        onEnd(isCanceled = false) {\n          cancelCurrentReleaseAnimation = undefined;\n\n          if (isCanceled || isRevertSwipe) {\n            cleanup();\n            onCancelForTransition();\n            onCancelForClient();\n          }\n        },\n      });\n    };\n  });\n}\n\nfunction updateAnimationProgress(elements: HTMLElement[], progress: number) {\n  elements.map((e) => e.getAnimations()).flat().forEach((animation) => {\n    animation.currentTime = (animation.effect!.getTiming().duration as number) * progress;\n  });\n}\n\nfunction extractAnimationEndPosition(element: HTMLElement) {\n  for (const animation of element.getAnimations()) {\n    if (!(animation.effect instanceof KeyframeEffect)) continue;\n\n    for (const keyframe of animation.effect.getKeyframes()) {\n      if (keyframe.offset !== 1 || !keyframe.transform) continue;\n\n      const position = extractPositionFromTransform(keyframe.transform as string);\n      if (position) {\n        return position;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractPositionFromTransform(transformRule: string) {\n  const match = transformRule.match(/([XY])\\((-?\\d+)(%|px)\\)/);\n  if (!match) return undefined;\n\n  return {\n    axis: match[1] as 'X' | 'Y',\n    value: Number(match[2]),\n    units: match[3],\n  };\n}\n\nfunction extractPositionFromMatrix(transform: string, axis: 'X' | 'Y') {\n  const matrix = transform.slice(7, -1).split(',').map(Number);\n  return matrix[axis === 'X' ? 4 : 5];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Lbq2gMzt\",\"title\":\"r4k7w6HQ\",\"dots\":\"__vkSP7q\",\"dotsError\":\"LI_tisFH\",\"shakeAnimation\":\"RrETnvf4\",\"dotsLoading\":\"HnSSbC5N\",\"spin\":\"WMJcrrfv\",\"appear\":\"rG3vC5Ev\",\"dot\":\"CH4h9HQz\",\"dotLoadingAnimation\":\"NJ5ujtVf\",\"firstDotLoadingAnimation\":\"rW78LwUS\",\"secondDotLoadingAnimation\":\"WITK5GhH\",\"thirdDotLoadingAnimation\":\"sRNwZpZb\",\"fourthDotLoadingAnimation\":\"_jBlKjPP\",\"dotFilled\":\"r_kAZ0Dm\",\"scaleAnimation\":\"AS8bxSS0\",\"grid\":\"CUQ0KIAI\",\"button\":\"lnaBx8hc\",\"minified\":\"MGnO4hqt\",\"buttonActive\":\"qBoIeNzV\",\"buttonHidden\":\"c_i4rWyo\",\"buttonDanger\":\"nvnxE80n\",\"error\":\"jLzZScDB\",\"success\":\"oVsGIXA4\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  value?: any;\n  children?: TeactNode;\n  className?: string;\n  isDisabled?: boolean;\n  onClick?: (value?: any) => void;\n}\n\nconst CLICKED_TIMEOUT_MS = 200;\n\nfunction PinPadButton({\n  value, children, className, isDisabled, onClick,\n}: OwnProps) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  const handleClick = () => {\n    void vibrate();\n    onClick?.(value);\n    setIsClicked(true);\n    setTimeout(() => {\n      setIsClicked(false);\n    }, CLICKED_TIMEOUT_MS);\n  };\n  return (\n    <div\n      onMouseDown={!isDisabled ? handleClick : undefined}\n      className={buildClassName(styles.button, isClicked && styles.buttonActive, className)}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {value || children}\n    </div>\n  );\n}\n\nexport default memo(PinPadButton);\n","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { requestForcedReflow, requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport { waitForAnimationEnd, waitForTransitionEnd } from '../../util/cssAnimationEndListeners';\nimport { SECOND } from '../../util/dateFormat';\nimport forceReflow from '../../util/forceReflow';\nimport { allowSwipeControlForTransition } from '../../util/swipeController';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Transition.scss';\n\ntype AnimationName = (\n  'none' | 'slide' | 'slideRtl' | 'slideFade' | 'zoomFade' | 'slideLayers'\n  | 'fade' | 'pushSlide' | 'reveal' | 'slideOptimized' | 'slideOptimizedRtl' | 'semiFade'\n  | 'slideVertical' | 'slideVerticalFade' | 'slideFadeAndroid'\n  );\nexport type ChildrenFn = (isActive: boolean, isFrom: boolean, currentKey: number, activeKey: number) => TeactNode;\nexport type TransitionProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  activeKey: number;\n  prevKey?: number;\n  nextKey?: number;\n  name: AnimationName;\n  direction?: 'auto' | 'inverse' | 1 | -1;\n  renderCount?: number;\n  shouldRestoreHeight?: boolean;\n  shouldCleanup?: boolean;\n  cleanupExceptionKey?: number;\n  // Used by async components which are usually remounted during first animation\n  shouldWrap?: boolean;\n  wrapExceptionKey?: number;\n  id?: string;\n  className?: string;\n  slideClassName?: string;\n  withSwipeControl?: boolean;\n  onStart?: NoneToVoidFunction;\n  onStop?: NoneToVoidFunction;\n  onContainerClick?: NoneToVoidFunction;\n  // Should be not a falsy value, otherwise some transitions will be delayed\n  children: TeactNode | ChildrenFn;\n};\n\nconst FALLBACK_ANIMATION_END = SECOND;\nconst CLASSES = {\n  slide: 'Transition_slide',\n  active: 'Transition_slide-active',\n  from: 'Transition_slide-from',\n  to: 'Transition_slide-to',\n  inactive: 'Transition_slide-inactive',\n};\n\nexport const ACTIVE_SLIDE_CLASS_NAME = CLASSES.active;\nexport const TO_SLIDE_CLASS_NAME = CLASSES.to;\n\nfunction Transition({\n  ref,\n  activeKey,\n  nextKey,\n  prevKey,\n  name,\n  direction = 'auto',\n  renderCount,\n  shouldRestoreHeight,\n  shouldCleanup,\n  cleanupExceptionKey,\n  shouldWrap,\n  wrapExceptionKey,\n  id,\n  className,\n  slideClassName,\n  withSwipeControl,\n  onStart,\n  onStop,\n  onContainerClick,\n  children,\n}: TransitionProps) {\n  const currentKeyRef = useRef<number>();\n  // No need for a container to update on change\n  const { animationLevel } = getGlobal().settings;\n  const shouldDisableAnimation = animationLevel === ANIMATION_LEVEL_MIN;\n\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const rendersRef = useRef<Record<number, TeactNode | ChildrenFn>>({});\n  const prevActiveKey = usePrevious<any>(activeKey);\n  const forceUpdate = useForceUpdate();\n  const isAnimatingRef = useRef(false);\n  const isSwipeJustCancelledRef = useRef(false);\n\n  const hasActiveKeyChanged = prevActiveKey !== undefined && activeKey !== prevActiveKey;\n\n  if (!renderCount && hasActiveKeyChanged) {\n    rendersRef.current = { [prevActiveKey]: rendersRef.current[prevActiveKey] };\n  }\n\n  rendersRef.current[activeKey] = children;\n  if (prevKey) {\n    rendersRef.current[prevKey] = children;\n  }\n  if (nextKey) {\n    rendersRef.current[nextKey] = children;\n  }\n\n  const isBackwards = (\n    direction === -1\n    || (direction === 'auto' && prevActiveKey > activeKey)\n    || (direction === 'inverse' && prevActiveKey < activeKey)\n  );\n\n  useLayoutEffect(() => {\n    function cleanup() {\n      if (!shouldCleanup) {\n        return;\n      }\n\n      const preservedRender = cleanupExceptionKey !== undefined ? rendersRef.current[cleanupExceptionKey] : undefined;\n\n      rendersRef.current = preservedRender ? { [cleanupExceptionKey!]: preservedRender } : {};\n\n      forceUpdate();\n    }\n\n    const isSlideOptimized = name === 'slideOptimized' || name === 'slideOptimizedRtl';\n    const container = containerRef.current!;\n    const keys = Object.keys(rendersRef.current).map(Number);\n    const prevActiveIndex = renderCount ? prevActiveKey : keys.indexOf(prevActiveKey);\n    const activeIndex = renderCount ? activeKey : keys.indexOf(activeKey);\n\n    const childNodes = Array.from(container.childNodes);\n    if (!childNodes.length) {\n      return;\n    }\n\n    const childElements = Array.from(container.children) as HTMLElement[];\n    childElements.forEach((el) => {\n      addExtraClass(el, CLASSES.slide);\n\n      if (slideClassName) {\n        slideClassName.split(/\\s+/).forEach((token) => {\n          addExtraClass(el, token);\n        });\n      }\n    });\n\n    if (!hasActiveKeyChanged) {\n      if (isAnimatingRef.current) {\n        return;\n      }\n\n      childElements.forEach((childElement) => {\n        if (childElement === childNodes[activeIndex]) {\n          addExtraClass(childElement, CLASSES.active);\n\n          if (isSlideOptimized) {\n            setExtraStyles(childElement, {\n              transition: 'none',\n              transform: 'translate3d(0, 0, 0)',\n            });\n          }\n        } else if (!isSlideOptimized) {\n          addExtraClass(childElement, CLASSES.inactive);\n        }\n      });\n\n      return;\n    }\n\n    currentKeyRef.current = activeKey;\n\n    if (isSlideOptimized) {\n      if (!childNodes[activeIndex]) {\n        return;\n      }\n\n      performSlideOptimized(\n        shouldDisableAnimation,\n        name,\n        isBackwards,\n        cleanup,\n        activeKey,\n        currentKeyRef,\n        isAnimatingRef,\n        container,\n        childNodes[activeIndex],\n        childNodes[prevActiveIndex],\n        shouldRestoreHeight,\n        onStart,\n        onStop,\n      );\n\n      return;\n    }\n\n    if (name === 'none' || shouldDisableAnimation || isSwipeJustCancelledRef.current) {\n      if (isSwipeJustCancelledRef.current) {\n        isSwipeJustCancelledRef.current = false;\n      }\n\n      childNodes.forEach((node, i) => {\n        if (node instanceof HTMLElement) {\n          removeExtraClass(node, CLASSES.from);\n          removeExtraClass(node, CLASSES.to);\n          toggleExtraClass(node, CLASSES.active, i === activeIndex);\n          toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n        }\n      });\n\n      cleanup();\n\n      return;\n    }\n\n    childNodes.forEach((node, i) => {\n      if (node instanceof HTMLElement) {\n        removeExtraClass(node, CLASSES.active);\n        toggleExtraClass(node, CLASSES.from, i === prevActiveIndex);\n        toggleExtraClass(node, CLASSES.to, i === activeIndex);\n        toggleExtraClass(node, CLASSES.inactive, i !== prevActiveIndex && i !== activeIndex);\n      }\n    });\n\n    isAnimatingRef.current = true;\n    const endHeavyAnimation = beginHeavyAnimation();\n    onStart?.();\n\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    function onAnimationEnd() {\n      const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`);\n      const { clientHeight } = activeElement || {};\n\n      requestMutation(() => {\n        if (activeKey !== currentKeyRef.current) {\n          endHeavyAnimation();\n          return;\n        }\n\n        removeExtraClass(container, `Transition-${name}`);\n        removeExtraClass(container, `Transition-${name}Backwards`);\n\n        childNodes.forEach((node, i) => {\n          if (node instanceof HTMLElement) {\n            removeExtraClass(node, CLASSES.from);\n            removeExtraClass(node, CLASSES.to);\n            toggleExtraClass(node, CLASSES.active, i === activeIndex);\n            toggleExtraClass(node, CLASSES.inactive, i !== activeIndex);\n          }\n        });\n\n        if (shouldRestoreHeight) {\n          if (activeElement) {\n            setExtraStyles(activeElement, { height: 'auto' });\n            setExtraStyles(container, { height: `${clientHeight}px` });\n          }\n        }\n\n        onStop?.();\n        endHeavyAnimation();\n        isAnimatingRef.current = false;\n\n        cleanup();\n      });\n    }\n\n    const watchedNode = (name === 'reveal' || name === 'slideFadeAndroid') && isBackwards\n      ? childNodes[prevActiveIndex]\n      : childNodes[activeIndex];\n\n    if (watchedNode) {\n      if (withSwipeControl && childNodes[prevActiveIndex]) {\n        const giveUpAnimationEnd = waitForAnimationEnd(watchedNode, onAnimationEnd);\n\n        allowSwipeControlForTransition(\n          childNodes[prevActiveIndex] as HTMLElement,\n          childNodes[activeIndex] as HTMLElement,\n          () => {\n            giveUpAnimationEnd();\n            isSwipeJustCancelledRef.current = true;\n            onStop?.();\n            endHeavyAnimation();\n            isAnimatingRef.current = false;\n          },\n        );\n      } else {\n        waitForAnimationEnd(watchedNode, onAnimationEnd, undefined, FALLBACK_ANIMATION_END);\n      }\n    } else {\n      onAnimationEnd();\n    }\n  }, [\n    activeKey,\n    nextKey,\n    prevActiveKey,\n    hasActiveKeyChanged,\n    isBackwards,\n    name,\n    onStart,\n    onStop,\n    renderCount,\n    shouldRestoreHeight,\n    shouldCleanup,\n    slideClassName,\n    cleanupExceptionKey,\n    shouldDisableAnimation,\n    forceUpdate,\n    withSwipeControl,\n  ]);\n\n  useEffect(() => {\n    if (!shouldRestoreHeight) {\n      return;\n    }\n\n    const container = containerRef.current!;\n    const activeElement = container.querySelector<HTMLDivElement>(`.${CLASSES.active}`)\n      || container.querySelector<HTMLDivElement>(`.${CLASSES.from}`);\n    if (!activeElement) {\n      return;\n    }\n\n    const { clientHeight } = activeElement || {};\n    if (!clientHeight) {\n      return;\n    }\n\n    requestMutation(() => {\n      setExtraStyles(activeElement, { height: 'auto' });\n      setExtraStyles(container, {\n        height: `${clientHeight}px`,\n        flexBasis: `${clientHeight}px`,\n      });\n    });\n  }, [shouldRestoreHeight, children]);\n\n  const asFastList = !renderCount;\n  const renders = rendersRef.current;\n  const renderKeys = Object.keys(renderCount ? new Array(renderCount).fill(undefined) : renders).map(Number);\n  const contents = renderKeys.map((key) => {\n    const render = renders[key];\n    if (!render) {\n      return undefined;\n    }\n\n    const rendered = typeof render === 'function'\n      ? render(key === activeKey, key === prevActiveKey, key, activeKey)\n      : render;\n\n    return (shouldWrap && key !== wrapExceptionKey) || asFastList\n      ? <div key={key} teactOrderKey={key}>{rendered}</div>\n      : rendered;\n  });\n\n  return (\n    <div\n      ref={containerRef}\n      onClick={onContainerClick}\n      id={id}\n      className={buildClassName('Transition', className)}\n      teactFastList={asFastList}\n    >\n      {contents}\n    </div>\n  );\n}\n\nexport default Transition;\n\nfunction performSlideOptimized(\n  shouldDisableAnimation: boolean,\n  name: 'slideOptimized' | 'slideOptimizedRtl',\n  isBackwards: boolean,\n  cleanup: NoneToVoidFunction,\n  activeKey: number,\n  currentKeyRef: { current: number | undefined },\n  isAnimatingRef: { current: boolean | undefined },\n  container: HTMLElement,\n  toSlide: ChildNode,\n  fromSlide?: ChildNode,\n  shouldRestoreHeight?: boolean,\n  onStart?: NoneToVoidFunction,\n  onStop?: NoneToVoidFunction,\n) {\n  if (shouldDisableAnimation) {\n    toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n    toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n    if (fromSlide instanceof HTMLElement) {\n      removeExtraClass(fromSlide, CLASSES.active);\n      setExtraStyles(fromSlide, {\n        transition: 'none',\n        transform: '',\n      });\n    }\n\n    if (toSlide instanceof HTMLElement) {\n      addExtraClass(toSlide, CLASSES.active);\n      setExtraStyles(toSlide, {\n        transition: 'none',\n        transform: 'translate3d(0, 0, 0)',\n      });\n    }\n\n    cleanup();\n\n    return;\n  }\n\n  if (name === 'slideOptimizedRtl') {\n    isBackwards = !isBackwards;\n  }\n\n  isAnimatingRef.current = true;\n  const endHeavyAnimation = beginHeavyAnimation();\n  onStart?.();\n\n  toggleExtraClass(container, `Transition-${name}`, !isBackwards);\n  toggleExtraClass(container, `Transition-${name}Backwards`, isBackwards);\n\n  if (fromSlide instanceof HTMLElement) {\n    setExtraStyles(fromSlide, {\n      transition: 'none',\n      transform: 'translate3d(0, 0, 0)',\n    });\n  }\n\n  if (toSlide instanceof HTMLElement) {\n    setExtraStyles(toSlide, {\n      transition: 'none',\n      transform: `translate3d(${isBackwards ? '-' : ''}100%, 0, 0)`,\n    });\n  }\n\n  requestForcedReflow(() => {\n    if (toSlide instanceof HTMLElement) {\n      forceReflow(toSlide);\n    }\n\n    return () => {\n      if (fromSlide instanceof HTMLElement) {\n        removeExtraClass(fromSlide, CLASSES.active);\n        setExtraStyles(fromSlide, {\n          transition: '',\n          transform: `translate3d(${isBackwards ? '' : '-'}100%, 0, 0)`,\n        });\n      }\n\n      if (toSlide instanceof HTMLElement) {\n        addExtraClass(toSlide, CLASSES.active);\n        setExtraStyles(toSlide, {\n          transition: '',\n          transform: 'translate3d(0, 0, 0)',\n        });\n      }\n    };\n  });\n\n  waitForTransitionEnd(toSlide, () => {\n    const clientHeight = toSlide instanceof HTMLElement ? toSlide.clientHeight : undefined;\n\n    requestMutation(() => {\n      if (activeKey !== currentKeyRef.current) {\n        endHeavyAnimation();\n        return;\n      }\n\n      if (fromSlide instanceof HTMLElement) {\n        setExtraStyles(fromSlide, {\n          transition: 'none',\n          transform: '',\n        });\n      }\n\n      if (shouldRestoreHeight && clientHeight && toSlide instanceof HTMLElement) {\n        setExtraStyles(toSlide, { height: 'auto' });\n        setExtraStyles(container, { height: `${clientHeight}px` });\n      }\n\n      onStop?.();\n      endHeavyAnimation();\n      isAnimatingRef.current = false;\n\n      cleanup();\n    });\n  });\n}\n","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport { WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION } from '../../config';\nimport { getIsFaceIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnError } from '../../util/haptics';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport { SWIPE_DISABLED_CLASS_NAME } from '../../util/swipeController';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useMatchCount } from '../../hooks/useMatchCount';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport PinPadButton from './PinPadButton';\nimport Transition from './Transition';\n\nimport styles from './PinPad.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  title: string;\n  type?: 'error' | 'success';\n  value: string;\n  length?: number;\n  resetStateDelayMs?: number;\n  className?: string;\n  isMinified?: boolean;\n  topContent?: TeactJsx;\n  onBiometricsClick?: NoneToVoidFunction;\n  onChange: (value: string) => void;\n  onClearError?: NoneToVoidFunction;\n  onSubmit: (pin: string) => void;\n  onLogOutClick?: NoneToVoidFunction;\n}\n\ntype StateProps = Pick<GlobalState['settings'], 'authConfig'> & {\n  isPinAccepted?: boolean;\n};\n\nconst DEFAULT_PIN_LENGTH = 4;\nconst RESET_STATE_DELAY_MS = 1500;\n\nfunction PinPad({\n  isActive,\n  title,\n  type,\n  value,\n  resetStateDelayMs = RESET_STATE_DELAY_MS,\n  length = DEFAULT_PIN_LENGTH,\n  isPinAccepted,\n  className,\n  isMinified,\n  topContent,\n  onBiometricsClick,\n  onChange,\n  onClearError,\n  onSubmit,\n  onLogOutClick,\n}: OwnProps & StateProps) {\n  const { clearIsPinAccepted } = getActions();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const canRenderBackspace = value.length > 0;\n  const isSuccess = type === 'success' || isPinAccepted;\n  const prevIsPinAccepted = usePrevious(isPinAccepted);\n  const arePinButtonsDisabled = isSuccess\n    || (value.length === length && type !== 'error'); // Allow pincode entry in case of an error\n\n  const titleClassName = buildClassName(\n    styles.title,\n    type === 'error' && styles.error,\n    isSuccess && styles.success,\n  );\n\n  const shouldSuggestLogout = useMatchCount(type === 'error', WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION);\n\n  useEffect(() => {\n    if (prevIsPinAccepted && !isPinAccepted && length === value.length) {\n      onChange('');\n    }\n  }, [isPinAccepted, length, onChange, prevIsPinAccepted, value.length]);\n\n  useEffect(() => clearIsPinAccepted, []);\n\n  // Fix for iOS, enable fast pinpad button presses\n  useEffectWithPrevDeps(([prevIsActive]) => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n    if (isActive) {\n      void BottomSheet.clearScrollPatch();\n    } else if (prevIsActive) {\n      void BottomSheet.applyScrollPatch();\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    if (type !== 'error') return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      if (value.length === length) {\n        onChange('');\n      }\n      onClearError?.();\n    }, resetStateDelayMs);\n    void vibrateOnError();\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [length, onChange, onClearError, resetStateDelayMs, type, value.length]);\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return () => {\n      enableSwipeToClose();\n    };\n  }, [isActive]);\n\n  const handleClick = useLastCallback((char: string) => {\n    if (value.length === length || value.length === 0) {\n      onClearError?.();\n    }\n\n    if (value.length === length) {\n      onChange(char);\n\n      return;\n    }\n\n    const newValue = `${value}${char}`;\n    onChange(newValue);\n\n    if (newValue.length === length) {\n      onSubmit(newValue);\n    }\n  });\n\n  const handleBackspaceClick = useLastCallback(() => {\n    onClearError?.();\n    if (!value.length) return;\n\n    onChange(value.slice(0, -1));\n  });\n\n  function renderDots() {\n    const dotsClassName = buildClassName(\n      styles.dots,\n      type === 'error' && styles.dotsError,\n      isSuccess && styles.dotsLoading,\n    );\n\n    return (\n      <div className={dotsClassName} aria-hidden>\n        {Array.from({ length }, (_, i) => (\n          <div\n            key={i}\n            className={buildClassName(\n              styles.dot,\n              i < value.length && styles.dotFilled,\n              type === 'error' && styles.error,\n              isSuccess && styles.success,\n            )}\n          />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, className, SWIPE_DISABLED_CLASS_NAME)}>\n      {topContent ?? <div className={titleClassName}>{title}</div>}\n      {renderDots()}\n\n      <div className={buildClassName(styles.grid, isMinified && styles.minified)}>\n        <PinPadButton value=\"1\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"2\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"3\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"4\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"5\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"6\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"7\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"8\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <PinPadButton value=\"9\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        {!onBiometricsClick ? <span /> : (\n          <PinPadButton onClick={onBiometricsClick} isDisabled={isSuccess}>\n            <i className={buildClassName('icon', isFaceId ? 'icon-face-id' : 'icon-touch-id')} aria-hidden />\n          </PinPadButton>\n        )}\n        <PinPadButton value=\"0\" onClick={handleClick} isDisabled={arePinButtonsDisabled} />\n        <Transition\n          name=\"zoomFade\"\n          activeKey={shouldSuggestLogout && !value.length ? 0 : 1}\n        >\n          {onLogOutClick && shouldSuggestLogout && !value.length ? (\n            <PinPadButton\n              className={styles.buttonDanger}\n              onClick={onLogOutClick}\n            >\n              <i className=\"icon icon-exit\" aria-hidden />\n            </PinPadButton>\n          ) : (\n            <PinPadButton\n              className={!canRenderBackspace && styles.buttonHidden}\n              isDisabled={!canRenderBackspace || isSuccess}\n              onClick={handleBackspaceClick}\n            >\n              <i className=\"icon icon-backspace\" aria-hidden />\n            </PinPadButton>\n          )}\n        </Transition>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global) => {\n    const { isPinAccepted } = global;\n\n    return {\n      isPinAccepted,\n    };\n  },\n  (global, _, stickToFirst) => {\n    const { isPinAccepted } = global;\n\n    return stickToFirst(isPinAccepted);\n  },\n)(PinPad));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"ifHfFY2u\",\"label\":\"C3jlHNpF\",\"title\":\"kC9WGOYP\",\"errorMessage\":\"q8niLQND\",\"verify\":\"SDEJGboy\",\"error\":\"ZokzPDAj\",\"pinPadHeader\":\"sftOkqxr\",\"closeButton\":\"twjZlrDJ\",\"autoConfirmCheckbox\":\"MgA9JMMb\",\"logOutWrapper\":\"N0lWn9sM\",\"logOutButton\":\"jhtp0Nsp\"};","import type { RefObject, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthConfig } from '../../util/authApi/types';\n\nimport {\n  AUTO_CONFIRM_DURATION_MINUTES,\n  PIN_LENGTH,\n  SUPPORT_USERNAME,\n  WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION,\n} from '../../config';\nimport { selectIsBiometricAuthEnabled, selectIsNativeBiometricAuthEnabled } from '../../global/selectors';\nimport authApi from '../../util/authApi';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport { getDoesUsePinPad, getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTranslation } from '../../util/langProvider';\nimport { pause } from '../../util/schedulers';\nimport { createSignal } from '../../util/signals';\nimport { IS_ANDROID_APP, IS_DELEGATING_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from './helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useMatchCount } from '../../hooks/useMatchCount';\n\nimport LogOutModal from '../main/modals/LogOutModal';\nimport AnimatedIconWithPreview from './AnimatedIconWithPreview';\nimport Button from './Button';\nimport Checkbox from './Checkbox';\nimport Input from './Input';\nimport Modal from './Modal';\nimport PinPad from './PinPad';\n\nimport modalStyles from './Modal.module.scss';\nimport styles from './PasswordForm.module.scss';\n\ntype OperationType = 'transfer' | 'sending' | 'staking' | 'unstaking' | 'swap'\n  | 'unfreeze' | 'passcode' | 'unlock' | 'claim' | 'turnOnBiometrics' | 'mintCard';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  operationType?: OperationType;\n  cancelLabel?: string;\n  submitLabel: string | TeactNode[];\n  stickerSize?: number;\n  placeholder?: string;\n  error?: string;\n  help?: string;\n  resetStateDelayMs?: number;\n  containerClassName?: string;\n  pinPadClassName?: string;\n  withCloseButton?: boolean;\n  children?: TeactNode;\n  noAnimatedIcon?: boolean;\n  inputWrapperClassName?: string;\n  forceBiometricsInMain?: boolean;\n  // Works only if the password is memoized. If `true`, the component will render\n  // a separate screen with an action info and buttons 'Cancel' and 'Confirm'.\n  skipAuthScreen?: boolean;\n  onCancel?: NoneToVoidFunction;\n  onUpdate: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n}\n\ninterface StateProps {\n  isPasswordNumeric?: boolean;\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  authConfig?: AuthConfig;\n  isAutoConfirmEnabled?: boolean;\n}\n\nconst STICKER_SIZE = 180;\nconst APPEAR_ANIMATION_DURATION_MS = 300;\n\nconst [getHandleBiometricsSignal, setHandleBiometricsSignal] = createSignal(Date.now());\n\nexport function triggerPasswordFormHandleBiometrics(e?: MouseEvent | KeyboardEvent) {\n  if (e) {\n    stopEvent(e);\n  }\n  setHandleBiometricsSignal(Date.now());\n}\n\nfunction useInMemoryPassword(inMemoryPasswordRef: RefObject<string | undefined>) {\n  const hasInMemoryPassword = useMemo(() => getHasInMemoryPassword(), []);\n  if (hasInMemoryPassword && !inMemoryPasswordRef.current) {\n    void getInMemoryPassword().then((password) => {\n      inMemoryPasswordRef.current = password;\n    });\n  }\n  return hasInMemoryPassword;\n}\n\nfunction useStorageClearedDialog(operationType?: OperationType) {\n  const { showDialog, signOut } = getActions();\n\n  return useLastCallback(() => {\n    showDialog({\n      title: '$storage_cleared_title',\n      message: getTranslation('$storage_cleared_message', {\n        support_link: (\n          <a href={`https://t.me/${SUPPORT_USERNAME}`} target=\"_blank\" rel=\"noreferrer\">\n            @{SUPPORT_USERNAME}\n          </a>\n        ),\n      }),\n      footerButtons: [\n        <Button\n          isDestructive\n          onClick={() => signOut({ level: 'all' })}\n        >\n          {getTranslation('Log Out')}\n        </Button>,\n      ],\n      noBackdropClose: true,\n      isInAppLock: operationType === 'unlock',\n    });\n  });\n}\n\nfunction PasswordForm({\n  isActive,\n  isLoading,\n  operationType,\n  isPasswordNumeric,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  authConfig,\n  cancelLabel,\n  submitLabel,\n  stickerSize = STICKER_SIZE,\n  placeholder = 'Enter your password',\n  error,\n  help,\n  resetStateDelayMs,\n  containerClassName,\n  pinPadClassName,\n  children,\n  withCloseButton,\n  noAnimatedIcon,\n  inputWrapperClassName,\n  forceBiometricsInMain,\n  skipAuthScreen,\n  isAutoConfirmEnabled,\n  onUpdate,\n  onCancel,\n  onSubmit,\n}: OwnProps & StateProps) {\n  const { openSettings, setInMemoryPassword, setIsAutoConfirmEnabled } = getActions();\n\n  const lang = useLang();\n\n  const memoizedPasswordRef = useRef<string>();\n  const hasInMemoryPassword = useInMemoryPassword(memoizedPasswordRef);\n\n  const showOnlyConfirmScreen = skipAuthScreen && hasInMemoryPassword;\n\n  const passwordRef = useRef<HTMLInputElement>();\n  const [password, setPassword] = useState<string>('');\n  const [localError, setLocalError] = useState<string>('');\n  const [wrongAttempts, setWrongAttempts] = useState(0);\n  const [isResetBiometricsWarningOpen, openResetBiometricsWarning, closeResetBiometricsWarning] = useFlag(false);\n  const { isSmallHeight, isPortrait } = useDeviceScreen();\n  const isSubmitDisabled = !password.length && !showOnlyConfirmScreen;\n  const canUsePinPad = getDoesUsePinPad();\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag(false);\n  const shouldSuggestLogout = useMatchCount(!!error || !!localError, WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION);\n  const showStorageClearedDialog = useStorageClearedDialog(operationType);\n\n  useEffect(() => {\n    if (isActive) {\n      setLocalError('');\n      setPassword('');\n      setWrongAttempts(0);\n    }\n  }, [isActive]);\n\n  const submitCallback = useLastCallback(async (enteredPassword: string) => {\n    const passwordToReturn = showOnlyConfirmScreen ? memoizedPasswordRef.current! : enteredPassword;\n    onSubmit(passwordToReturn);\n\n    if (showOnlyConfirmScreen) return;\n\n    const passwordVerified = await callApi('verifyPassword', passwordToReturn);\n    if (!passwordVerified) {\n      // Password verification failed - check if it's due to storage corruption\n      const isStorageOk = await callApi('checkWorkerStorageIntegrity');\n      if (!isStorageOk) {\n        return showStorageClearedDialog();\n      }\n      // Storage is intact, so it's just a wrong password - let normal error handling proceed\n    }\n\n    if (passwordVerified) {\n      setInMemoryPassword({ password: passwordToReturn });\n    }\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    void submitCallback(password);\n  });\n\n  const handleBiometrics = useLastCallback(async () => {\n    try {\n      setLocalError('');\n      const biometricPassword = await authApi.getPassword(authConfig!);\n      if (!biometricPassword) {\n        setWrongAttempts(wrongAttempts + 1);\n        setLocalError('Biometric confirmation failed');\n\n        if (IS_ANDROID_APP && wrongAttempts > 2) {\n          openResetBiometricsWarning();\n        }\n      } else {\n        void submitCallback(biometricPassword);\n      }\n    } catch (err: any) {\n      setLocalError(err.message || lang('Something went wrong.'));\n    }\n  });\n\n  useEffect(() => {\n    if (\n      (IS_DELEGATING_BOTTOM_SHEET && !forceBiometricsInMain)\n      || !isActive\n      || !isBiometricAuthEnabled\n      || showOnlyConfirmScreen\n    ) {\n      return;\n    }\n\n    void pause(APPEAR_ANIMATION_DURATION_MS).then(handleBiometrics);\n  }, [forceBiometricsInMain, handleBiometrics, isActive, isBiometricAuthEnabled, showOnlyConfirmScreen]);\n\n  useEffectOnce(() => {\n    return getHandleBiometricsSignal.subscribe(handleBiometrics);\n  });\n\n  useFocusAfterAnimation(passwordRef, !isActive || isBiometricAuthEnabled);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError('');\n    onUpdate();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    closeResetBiometricsWarning();\n    onCancel?.();\n    openSettings();\n  });\n\n  const handleInput = useLastCallback((value: string) => {\n    setPassword(value);\n    if (error) {\n      onUpdate();\n    }\n  });\n\n  const handleAutoConfirmChange = useLastCallback((isEnabled: boolean) => {\n    setIsAutoConfirmEnabled({ isEnabled });\n  });\n\n  const handleOpenLogOutModal = useLastCallback((e: React.MouseEvent) => {\n    stopEvent(e);\n    openLogOutModal();\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({ onEnter: handleSubmit });\n  }, [handleSubmit, isLoading, isSubmitDisabled]);\n\n  function getPinPadTitle() {\n    switch (operationType) {\n      case 'unfreeze':\n        return 'Confirm Unfreezing';\n      case 'passcode':\n      case 'turnOnBiometrics':\n        return 'Confirm Passcode';\n      case 'transfer':\n      case 'sending':\n        return 'Confirm Sending';\n      case 'staking':\n        return 'Confirm Staking';\n      case 'unstaking':\n        return 'Confirm Unstaking';\n      case 'swap':\n        return 'Confirm Swap';\n      case 'unlock':\n        return undefined;\n      case 'claim':\n        return 'Confirm Rewards Claim';\n      case 'mintCard':\n        return 'Confirm Upgrading';\n      default:\n        return 'Confirm Action';\n    }\n  }\n\n  const shouldRenderFullWidthButton = operationType === 'unlock';\n  const footerButtonsClassName = buildClassName(\n    modalStyles.footerButtons,\n    shouldRenderFullWidthButton && modalStyles.footerButtonFullWidth,\n  );\n\n  function renderFooterButtons() {\n    return (\n      <div className={footerButtonsClassName}>\n        {onCancel && (\n          <Button\n            isLoading={isLoading && isBiometricAuthEnabled}\n            isDisabled={isLoading && !isBiometricAuthEnabled}\n            className={modalStyles.buttonHalfWidth}\n            onClick={onCancel}\n          >\n            {cancelLabel || lang('Cancel')}\n          </Button>\n        )}\n        {isBiometricAuthEnabled && Boolean(localError) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isLoading}\n            className={modalStyles.buttonHalfWidth}\n            onClick={!isLoading ? handleBiometrics : undefined}\n            shouldStopPropagation\n          >\n            {lang('Try Again')}\n          </Button>\n        )}\n        {(!isBiometricAuthEnabled || showOnlyConfirmScreen) && (\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDisabled={isSubmitDisabled}\n            className={!shouldRenderFullWidthButton ? modalStyles.buttonHalfWidth : modalStyles.buttonFullWidth}\n            onClick={!isLoading ? handleSubmit : undefined}\n          >\n            {submitLabel || lang('Send')}\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderAutoConfirmCheckbox() {\n    return (\n      <Checkbox\n        checked={!!isAutoConfirmEnabled}\n        onChange={handleAutoConfirmChange}\n        className={styles.autoConfirmCheckbox}\n      >\n        {lang('Remember for %1$d minutes', AUTO_CONFIRM_DURATION_MINUTES)}\n      </Checkbox>\n    );\n  }\n\n  const shouldRenderAutoConfirmCheckbox = operationType !== 'turnOnBiometrics' && !isBiometricAuthEnabled;\n\n  if (canUsePinPad) {\n    const hasError = Boolean(localError || error);\n    const title = getPinPadTitle();\n    const actionName = lang(\n      !isNativeBiometricAuthEnabled\n        ? 'Enter code'\n        : (getIsFaceIdAvailable()\n          ? 'Enter code or use Face ID'\n          : (getIsTouchIdAvailable()\n            ? 'Enter code or use Touch ID'\n            : 'Enter code or use biometrics')\n        ),\n    );\n\n    const content = (\n      <>\n        {withCloseButton && (\n          <Button\n            isRound\n            className={buildClassName(modalStyles.closeButton, styles.closeButton)}\n            ariaLabel={lang('Close')}\n            onClick={onCancel}\n          >\n            <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n          </Button>\n        )}\n        <div className={styles.pinPadHeader}>\n          {isPortrait && !noAnimatedIcon && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n            />\n          )}\n          {!isSmallHeight && title && <div className={styles.title}>{lang(title)}</div>}\n          {children}\n        </div>\n\n        {showOnlyConfirmScreen ? renderFooterButtons() : (\n          <PinPad\n            isActive={isActive}\n            title={lang(hasError ? (localError || error!) : (isSmallHeight && title ? title : actionName))}\n            type={hasError ? 'error' : undefined}\n            length={PIN_LENGTH}\n            resetStateDelayMs={resetStateDelayMs}\n            value={password}\n            topContent={shouldRenderAutoConfirmCheckbox ? renderAutoConfirmCheckbox() : undefined}\n            className={pinPadClassName}\n            onBiometricsClick={isNativeBiometricAuthEnabled ? handleBiometrics : undefined}\n            onLogOutClick={operationType === 'unlock' ? openLogOutModal : undefined}\n            onChange={setPassword}\n            onClearError={handleClearError}\n            onSubmit={submitCallback}\n          />\n        )}\n        {operationType === 'unlock' && (\n          <LogOutModal isOpen={isLogOutModalOpened} onClose={closeLogOutModal} isInAppLock />\n        )}\n      </>\n    );\n\n    return showOnlyConfirmScreen ? (\n      <div className={modalStyles.transitionContent}>\n        {content}\n      </div>\n    ) : content;\n  }\n\n  function renderBiometricPrompt() {\n    const renderingError = localError || error;\n    if (renderingError) {\n      return (\n        <div className={styles.error}>{lang(renderingError)}</div>\n      );\n    }\n\n    return (\n      <div className={styles.verify}>\n        {lang(operationType === 'transfer'\n          ? 'Please confirm transaction using biometrics' : 'Please confirm operation using biometrics')}\n      </div>\n    );\n  }\n\n  function renderPasswordForm() {\n    return (\n      <>\n        <Input\n          ref={passwordRef}\n          type=\"password\"\n          isRequired\n          id=\"first-password\"\n          wrapperClassName={inputWrapperClassName}\n          inputMode={isPasswordNumeric ? 'numeric' : undefined}\n          error={error ? lang(error) : localError}\n          placeholder={lang(placeholder)}\n          value={password}\n          onInput={handleInput}\n          maxLength={isPasswordNumeric ? PIN_LENGTH : undefined}\n        />\n        {localError && (\n          <div className={styles.errorMessage}>{lang(localError)}</div>\n        )}\n        {help && !error && (\n          <div className={styles.label}>{help}</div>\n        )}\n        {shouldRenderAutoConfirmCheckbox && renderAutoConfirmCheckbox()}\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, containerClassName)}>\n      {!noAnimatedIcon && (\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n          previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          play={isActive}\n          size={stickerSize}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n      )}\n\n      {children}\n\n      {!showOnlyConfirmScreen && (isBiometricAuthEnabled ? renderBiometricPrompt() : renderPasswordForm())}\n\n      {shouldSuggestLogout && operationType === 'unlock' && (\n        <div className={styles.logOutWrapper}>\n          {lang('Can\\'t confirm?')}\n          <span\n            role=\"button\"\n            tabIndex={0}\n            className={styles.logOutButton}\n            onClick={handleOpenLogOutModal}\n          >\n            {lang('Exit all wallets')}\n            <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n          </span>\n        </div>\n      )}\n\n      {renderFooterButtons()}\n\n      <Modal\n        isOpen={isResetBiometricsWarningOpen}\n        isCompact\n        title={lang('Biometric authentication failed')}\n        onClose={closeResetBiometricsWarning}\n      >\n        <p className={modalStyles.text}>\n          {lang('Reinstall biometrics in your device\\'s system settings, or use a passcode.')}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button className={modalStyles.button} onClick={closeResetBiometricsWarning}>{lang('Close')}</Button>\n          <Button isPrimary className={modalStyles.button} onClick={handleOpenSettings}>\n            {lang('Settings')}\n          </Button>\n        </div>\n      </Modal>\n      {operationType === 'unlock' && (\n        <LogOutModal isOpen={isLogOutModalOpened} onClose={closeLogOutModal} isInAppLock />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isPasswordNumeric, authConfig, isAutoConfirmEnabled } = global.settings;\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n\n  return {\n    isPasswordNumeric,\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    authConfig,\n    isAutoConfirmEnabled,\n  };\n})(PasswordForm));\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { AppTheme, Theme } from '../global/types';\n\nimport useLastCallback from './useLastCallback';\n\nconst prefersDark = window.matchMedia('(prefers-color-scheme: dark)');\n\nfunction useAppTheme(currentTheme: Theme) {\n  const [theme, setTheme] = useState<AppTheme>(\n    currentTheme === 'system'\n      ? (prefersDark.matches ? 'dark' : 'light')\n      : currentTheme,\n  );\n\n  const handlePrefersColorSchemeChange = useLastCallback(() => {\n    setTheme(() => {\n      if (currentTheme === 'system') {\n        return prefersDark.matches ? 'dark' : 'light';\n      }\n\n      return currentTheme;\n    });\n  });\n\n  useEffect(() => {\n    if (currentTheme !== 'system') return undefined;\n\n    prefersDark.addEventListener('change', handlePrefersColorSchemeChange);\n\n    return () => {\n      prefersDark.removeEventListener('change', handlePrefersColorSchemeChange);\n    };\n  }, [currentTheme]);\n\n  handlePrefersColorSchemeChange();\n\n  return theme;\n}\n\nexport default useAppTheme;\n","export const preloadedImageUrls = new Set();\n\nexport function preloadImage(url: string): Promise<HTMLImageElement> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      preloadedImageUrls.add(url);\n      resolve(img);\n    };\n    img.onerror = reject;\n    img.src = url;\n  });\n}\n","import React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { preloadedImageUrls } from '../../util/preloadImage';\n\nimport useFlag from '../../hooks/useFlag';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\ninterface OwnProps {\n  url?: string;\n  alt?: string;\n  loading?: 'lazy' | 'eager';\n  isSlow?: boolean;\n  className?: string;\n  imageClassName?: string;\n  children?: TeactJsx;\n  fallback?: TeactJsx;\n}\n\nfunction ImageComponent({\n  url,\n  alt,\n  loading,\n  isSlow,\n  className,\n  imageClassName,\n  children,\n  fallback,\n}: OwnProps) {\n  const ref = useRef<HTMLImageElement>();\n  const [isLoaded, markIsLoaded] = useFlag(preloadedImageUrls.has(url));\n  const [hasError, markHasError] = useFlag();\n\n  const handleLoad = () => {\n    markIsLoaded();\n    preloadedImageUrls.add(url);\n  };\n\n  const shouldShowFallback = (hasError || !url) && !!fallback;\n\n  const divRef = useMediaTransition(isLoaded || shouldShowFallback);\n\n  return (\n    <div ref={divRef} className={className} style={isSlow ? 'transition-duration: 0.5s;' : undefined}>\n      {!shouldShowFallback ? (\n        <img\n          ref={ref}\n          src={url}\n          alt={alt}\n          loading={loading}\n          className={imageClassName}\n          draggable={false}\n          referrerPolicy=\"same-origin\"\n          onLoad={!isLoaded ? handleLoad : undefined}\n          onError={markHasError}\n        />\n      ) : fallback}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(ImageComponent);\n","// extracted by mini-css-extract-plugin\nexport default {\"appLocked\":\"VzAZj1DO\",\"innerContent\":\"a0ISx2DN\",\"withPinPad\":\"KGdyJD8j\",\"appLockedFixed\":\"bO3Yeq_N\",\"title\":\"Mg8ZA3ww\",\"passwordFormContent\":\"y8VDu2CW\",\"pinPadContent\":\"TBzkDy1l\",\"logo\":\"AfTARhCR\",\"passwordInputWrapper\":\"lpSqrTfE\",\"appLockedWrapper\":\"F1wWh0wj\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { Theme } from '../../global/types';\n\nimport { IS_CORE_WALLET } from '../../config';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './AppLocked.module.scss';\n\nimport coreWalletLogoPath from '../../assets/logoCoreWallet.svg';\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  theme: Theme;\n}\nfunction Logo({ theme }: OwnProps) {\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n\n  const logoPath = IS_CORE_WALLET\n    ? coreWalletLogoPath\n    : appTheme === 'light' ? logoLightPath : logoDarkPath;\n\n  return (\n    <div className={styles.logo}>\n      <Image className={styles.logo} imageClassName={styles.logo} url={logoPath} alt={lang('Logo')} />\n    </div>\n  );\n}\n\nexport default memo(Logo);\n","import React, { type ElementRef, memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Theme } from '../../global/types';\n\nimport { APP_NAME } from '../../config';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\nimport Logo from './Logo';\n\nimport styles from './AppLocked.module.scss';\n\nconst PINPAD_RESET_DELAY = 300;\n\ninterface OwnProps {\n  isActive: boolean;\n  ref: ElementRef<HTMLDivElement>;\n  theme: Theme;\n  innerContentTopPosition?: number;\n  shouldHideBiometrics: boolean;\n  onSubmit: NoneToVoidFunction;\n}\n\nfunction PasswordFormSlide({\n  isActive,\n  ref,\n  theme,\n  innerContentTopPosition = 0,\n  shouldHideBiometrics,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const { setIsPinAccepted } = getActions();\n  const [passwordError, setPasswordError] = useState('');\n\n  const handleSubmitPassword = useLastCallback(async (password: string) => {\n    const result = await callApi('verifyPassword', password);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n    onSubmit();\n  });\n\n  const handlePasswordChange = useLastCallback(() => setPasswordError(''));\n\n  return (\n    <div\n      ref={ref}\n      className={styles.innerContent}\n      style={`--position-top: ${innerContentTopPosition}px;`}\n    >\n      <PasswordForm\n        isActive={!isActive ? false : getIsNativeBiometricAuthSupported() ? !shouldHideBiometrics : true}\n        noAnimatedIcon\n        forceBiometricsInMain\n        error={passwordError}\n        resetStateDelayMs={PINPAD_RESET_DELAY}\n        operationType=\"unlock\"\n        containerClassName={buildClassName(styles.passwordFormContent, 'custom-scroll')}\n        pinPadClassName={styles.pinPadContent}\n        inputWrapperClassName={styles.passwordInputWrapper}\n        submitLabel={lang('Unlock')}\n        onSubmit={handleSubmitPassword}\n        onUpdate={handlePasswordChange}\n      >\n        <Logo theme={theme} />\n        <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(PasswordFormSlide);\n","import React, { type ElementRef, memo } from '../../lib/teact/teact';\n\nimport type { Theme } from '../../global/types';\n\nimport { APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Logo from './Logo';\n\nimport styles from './AppLocked.module.scss';\n\ninterface OwnProps {\n  ref: ElementRef<HTMLDivElement>;\n  theme: Theme;\n  innerContentTopPosition?: number;\n  handleChangeSlideForBiometricAuth: NoneToVoidFunction;\n}\n\nfunction UnlockButtonSlide({\n  ref,\n  theme,\n  innerContentTopPosition = 0,\n  handleChangeSlideForBiometricAuth,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div\n      ref={ref}\n      className={styles.innerContent}\n      style={`--position-top: ${innerContentTopPosition}px;`}\n    >\n      <Logo theme={theme} />\n      <span className={buildClassName(styles.title, 'rounded-font')}>{APP_NAME}</span>\n      <Button isPrimary onClick={handleChangeSlideForBiometricAuth}>\n        {lang('Unlock')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(UnlockButtonSlide);\n","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport React, { memo, useEffect, useMemo, useRef, useState } from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { AutolockValueType, Theme } from '../../global/types';\n\nimport { AUTOLOCK_OPTIONS_LIST, DEBUG, IS_TELEGRAM_APP } from '../../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport { createSignal } from '../../util/signals';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport { useHotkeys } from '../../hooks/useHotkeys';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useThrottledCallback from '../../hooks/useThrottledCallback';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport { getInAppBrowser } from '../ui/InAppBrowser';\nimport { triggerPasswordFormHandleBiometrics } from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport PasswordFormSlide from './PasswordFormSlide';\nimport UnlockButtonSlide from './UnlockButtonSlide';\n\nimport styles from './AppLocked.module.scss';\n\nconst WINDOW_EVENTS_LATENCY = 5000;\nconst INTERVAL_CHECK_PERIOD = 5000;\nconst ACTIVATION_EVENT_NAMES = [\n  'focus', // For Web\n  'mousemove', // For Web\n  'touch', // For Capacitor\n  'wheel',\n  'keydown',\n];\n// `capture: true` is necessary because otherwise a `stopPropagation` call inside the main UI will prevent the event\n// from getting to the listeners inside `AppLocked`.\nconst ACTIVATION_EVENT_OPTIONS = { capture: true };\n\ninterface StateProps {\n  isNonNativeBiometricAuthEnabled: boolean;\n  autolockValue?: AutolockValueType;\n  theme: Theme;\n  isManualLockActive?: boolean;\n  isAppLockEnabled?: boolean;\n  shouldHideBiometrics?: boolean;\n  canRender: boolean;\n}\n\nconst enum SLIDES {\n  button,\n  passwordForm,\n}\n\nconst [getActivitySignal, setActivitySignal] = createSignal(Date.now());\n\nexport function reportAppLockActivityEvent() {\n  setActivitySignal(Date.now());\n}\n\nfunction useAppLockState(autolockValue: AutolockValueType, isManualLockActive: boolean, canRender: boolean) {\n  const isFirstRunRef = useRef(true);\n  const isLockedRef = useRef(autolockValue !== 'never' || isManualLockActive);\n  const lockReasonRef = useRef<'autolock' | 'manual'>();\n  const forceUpdate = useForceUpdate();\n\n  // For cases when `canRender` changes from `true` -> `false`, e.g. when all accounts are deleted\n  if (isLockedRef.current && !canRender) {\n    isLockedRef.current = false;\n  }\n\n  const lock = useLastCallback(() => {\n    isLockedRef.current = true;\n    forceUpdate();\n  });\n\n  const unlock = useLastCallback(() => {\n    isLockedRef.current = false;\n    lockReasonRef.current = undefined;\n    forceUpdate();\n  });\n\n  // For case when on cold start the app was manually locked at the previous session, this should be treated as a auto lock.\n  lockReasonRef.current = isManualLockActive && !(isFirstRunRef.current && autolockValue !== 'never')\n    ? 'manual'\n    : 'autolock';\n  isFirstRunRef.current = false;\n\n  return [!!isLockedRef.current, lock, unlock, lockReasonRef.current] as const;\n}\n\nfunction useContentSlide(\n  isNonNativeBiometricAuthEnabled: boolean, isLocked: boolean, lockReason?: 'autolock' | 'manual',\n) {\n  const ref = useRef<HTMLDivElement>();\n\n  function getDefaultSlideForBiometricAuth() {\n    return (\n      (isBackgroundModeActive() || lockReason === 'manual')\n      && isNonNativeBiometricAuthEnabled ? SLIDES.button : SLIDES.passwordForm\n    );\n  }\n\n  const [slideForBiometricAuth, setSlideForBiometricAuth] = useState(getDefaultSlideForBiometricAuth());\n\n  // After the first rendering of the password form, it is necessary to remember the `top` position\n  // so that when changing the height of the container, there is no shift in content.\n  // This logic is only applicable to the two-slides mode except for TMA as it has a pin pad.\n  const [innerContentTopPosition, setInnerContentTopPosition] = useState<number>();\n  const isFixedState = innerContentTopPosition !== undefined;\n\n  const isFixingSlideEnv = !getDoesUsePinPad() && isNonNativeBiometricAuthEnabled;\n\n  function fixSlide(force?: boolean) {\n    const innerContent = ref.current;\n\n    if (innerContent && (!isFixedState || force) && isLocked && isFixingSlideEnv) {\n      const top = innerContent.getBoundingClientRect().top;\n\n      setInnerContentTopPosition(top);\n    }\n  }\n\n  function unfixSlide() {\n    setInnerContentTopPosition(undefined);\n  }\n\n  function refixSlide() {\n    unfixSlide();\n    requestAnimationFrame(() => fixSlide(true));\n  }\n\n  useEffect(() => {\n    fixSlide();\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [isLocked]);\n\n  const { height } = useWindowSize();\n\n  useEffect(() => {\n    if (!isFixingSlideEnv) return;\n\n    refixSlide();\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [height]);\n\n  return {\n    ref,\n    innerContentTopPosition,\n    unfixSlide,\n    slideForBiometricAuth,\n    setSlideForBiometricAuth,\n    getDefaultSlideForBiometricAuth,\n  };\n}\n\nfunction AppLocked({\n  isNonNativeBiometricAuthEnabled,\n  autolockValue = 'never',\n  theme,\n  isManualLockActive,\n  isAppLockEnabled,\n  shouldHideBiometrics,\n  canRender,\n}: StateProps): TeactJsx {\n  const {\n    clearIsPinAccepted, submitAppLockActivityEvent, setIsManualLockActive, setIsAppLockActive,\n  } = getActions();\n\n  const [isLocked, lock, unlock, lockReason] = useAppLockState(autolockValue, !!isManualLockActive, canRender);\n  const [shouldRenderUi, showUi, hideUi] = useFlag(isLocked);\n  const lastActivityTime = useRef(Date.now());\n\n  const {\n    ref,\n    innerContentTopPosition,\n    unfixSlide,\n    slideForBiometricAuth,\n    setSlideForBiometricAuth,\n    getDefaultSlideForBiometricAuth,\n  } = useContentSlide(isNonNativeBiometricAuthEnabled, isLocked, lockReason);\n\n  const handleActivity = useLastCallback(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      submitAppLockActivityEvent();\n      return;\n    }\n    lastActivityTime.current = Date.now();\n  });\n\n  const handleActivityThrottled = useThrottledCallback(handleActivity, [handleActivity], WINDOW_EVENTS_LATENCY);\n\n  const afterUnlockCallback = useLastCallback(() => {\n    hideUi();\n    setSlideForBiometricAuth(getDefaultSlideForBiometricAuth());\n    getInAppBrowser()?.show();\n    clearIsPinAccepted();\n    handleActivity();\n    setIsManualLockActive({ isActive: undefined, shouldHideBiometrics: undefined });\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.show();\n    unfixSlide();\n    setIsAppLockActive({ isActive: false });\n    void vibrate();\n  });\n\n  const autolockPeriod = useMemo(\n    () => AUTOLOCK_OPTIONS_LIST.find((option) => option.value === autolockValue)!.period, [autolockValue],\n  );\n\n  const { ref: transitionRef } = useShowTransition({\n    isOpen: isLocked,\n    noMountTransition: true,\n    className: 'slow',\n    onCloseAnimationEnd: afterUnlockCallback,\n  });\n\n  useEffect(() => {\n    if (isLocked !== getGlobal().isAppLockActive) {\n      setIsAppLockActive({ isActive: !!isLocked });\n    }\n  }, [isLocked]);\n\n  const forceLockApp = useLastCallback(() => {\n    lock();\n    showUi();\n    if (document.activeElement) {\n      (document.activeElement as HTMLElement).blur();\n    }\n    if (IS_DELEGATING_BOTTOM_SHEET) void BottomSheet.hide();\n    void getInAppBrowser()?.hide();\n    setSlideForBiometricAuth(getDefaultSlideForBiometricAuth());\n    setIsAppLockActive({ isActive: true });\n  });\n\n  const handleLock = useLastCallback(() => {\n    if ((autolockValue !== 'never' || isManualLockActive) && canRender) forceLockApp();\n  });\n\n  if (DEBUG) (window as any).lock = handleLock;\n\n  if (isManualLockActive && !isLocked && !shouldRenderUi) handleLock();\n\n  const handleChangeSlideForBiometricAuth = useLastCallback(() => {\n    setSlideForBiometricAuth(SLIDES.passwordForm);\n  });\n\n  useEffectOnce(() => {\n    for (const eventName of ACTIVATION_EVENT_NAMES) {\n      window.addEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n    }\n\n    return () => {\n      for (const eventName of ACTIVATION_EVENT_NAMES) {\n        window.removeEventListener(eventName, handleActivityThrottled, ACTIVATION_EVENT_OPTIONS);\n      }\n    };\n  });\n\n  useEffectOnce(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return getActivitySignal.subscribe(handleActivityThrottled);\n  });\n\n  const handleLockScreenHotkey = useLastCallback((e: KeyboardEvent) => {\n    stopEvent(e);\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n  });\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && !isLocked ? {\n    'Ctrl+Shift+L': handleLockScreenHotkey,\n    'Alt+Shift+L': handleLockScreenHotkey,\n    'Meta+Shift+L': handleLockScreenHotkey,\n    ...(IS_ELECTRON && { 'Mod+L': handleLockScreenHotkey }),\n  } : undefined), [isAppLockEnabled, isLocked]));\n\n  useEffect(() => {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    const interval = setInterval(() => {\n      if (isAppLockEnabled && !isLocked && Date.now() - lastActivityTime.current > autolockPeriod) {\n        handleLock();\n      }\n    }, INTERVAL_CHECK_PERIOD);\n    return () => clearInterval(interval);\n  }, [isLocked, autolockPeriod, handleLock, isAppLockEnabled]);\n\n  useBackgroundMode(undefined, handleChangeSlideForBiometricAuth);\n\n  function renderTransitionContent(isActive: boolean) {\n    return (\n      <div\n        className={buildClassName(\n          styles.appLocked,\n          innerContentTopPosition !== undefined && styles.appLockedFixed,\n          getDoesUsePinPad() && slideForBiometricAuth === SLIDES.passwordForm && styles.withPinPad,\n        )}\n      >\n        {\n          slideForBiometricAuth === SLIDES.button && isNonNativeBiometricAuthEnabled\n            ? (\n              <UnlockButtonSlide\n                ref={ref}\n                theme={theme}\n                innerContentTopPosition={innerContentTopPosition}\n                handleChangeSlideForBiometricAuth={handleChangeSlideForBiometricAuth}\n              />\n            )\n            : (\n              <PasswordFormSlide\n                ref={ref}\n                isActive={isActive}\n                theme={theme}\n                innerContentTopPosition={innerContentTopPosition}\n                shouldHideBiometrics={!!shouldHideBiometrics}\n                onSubmit={unlock}\n              />\n            )\n        }\n      </div>\n    );\n  }\n\n  const transitionKey = Number(slideForBiometricAuth === SLIDES.passwordForm) + Number(shouldRenderUi) * 2;\n\n  const handleUnlockIntent = isNonNativeBiometricAuthEnabled\n    ? slideForBiometricAuth === SLIDES.passwordForm\n      ? (!IS_TELEGRAM_APP ? triggerPasswordFormHandleBiometrics : undefined)\n      : handleChangeSlideForBiometricAuth\n    : undefined;\n\n  useHotkeys(useMemo(() => (isAppLockEnabled && isLocked && handleUnlockIntent ? {\n    Space: handleUnlockIntent,\n    Enter: handleUnlockIntent,\n    Escape: handleUnlockIntent,\n  } : undefined), [isAppLockEnabled, isLocked, handleUnlockIntent]));\n\n  if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={isNonNativeBiometricAuthEnabled && IS_TELEGRAM_APP ? 'slideFade' : 'semiFade'}\n      onContainerClick={handleUnlockIntent}\n      activeKey={transitionKey}\n      className={styles.appLockedWrapper}\n      shouldCleanup\n    >\n      {shouldRenderUi ? renderTransitionContent : undefined}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { autolockValue, isAppLockEnabled } = global.settings;\n\n  const isPasswordPresent = selectIsPasswordPresent(global);\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isNonNativeBiometricAuthEnabled = isBiometricAuthEnabled && (!isNativeBiometricAuthEnabled || IS_TELEGRAM_APP);\n\n  return {\n    isNonNativeBiometricAuthEnabled,\n    autolockValue,\n    canRender: Boolean(isAppLockEnabled && isPasswordPresent),\n    isAppLockEnabled,\n    theme: global.settings.theme,\n    isManualLockActive: global.isManualLockActive,\n    shouldHideBiometrics: global.appLockHideBiometrics,\n  };\n})(AppLocked));\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport type { GlobalState } from '../../types';\nimport {\n  AppState,\n  AuthState,\n  ContentTab,\n  DomainLinkingState,\n  SettingsState,\n  SwapState,\n  TransferState,\n} from '../../types';\n\nimport {\n  ANIMATION_LEVEL_MIN,\n  APP_VERSION,\n  BETA_URL,\n  BOT_USERNAME,\n  DEBUG,\n  IS_PRODUCTION,\n  PRODUCTION_URL,\n} from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport { openDeeplinkOrUrl, parseDeeplinkTransferParams, processDeeplink } from '../../../util/deeplink';\nimport getIsAppUpdateNeeded from '../../../util/getIsAppUpdateNeeded';\nimport { vibrate, vibrateOnSuccess } from '../../../util/haptics';\nimport { omit } from '../../../util/iteratees';\nimport { getTranslation } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { openUrl } from '../../../util/openUrl';\nimport { getTelegramApp } from '../../../util/telegram';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID_APP,\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_DELEGATING_BOTTOM_SHEET,\n  IS_ELECTRON,\n} from '../../../util/windowEnvironment';\nimport { callApi } from '../../../api';\nimport { closeAllOverlays, parsePlainAddressQr } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearCurrentSwap,\n  clearCurrentTransfer,\n  clearIsPinAccepted,\n  renameAccount,\n  setCurrentTransferAddress,\n  setIsPinAccepted,\n  updateAccounts,\n  updateAuth,\n  updateCurrentAccountSettings,\n  updateCurrentAccountState,\n  updateCurrentDomainLinking,\n  updateCurrentSwap,\n  updateCurrentTransfer,\n  updateSettings,\n} from '../../reducers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsPasswordPresent,\n} from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\n\nimport { reportAppLockActivityEvent } from '../../../components/appLocked/AppLocked';\nimport { closeModal } from '../../../components/ui/Modal';\n\nconst APP_VERSION_URL = IS_ANDROID_APP ? `${IS_PRODUCTION ? PRODUCTION_URL : BETA_URL}/version.txt` : 'version.txt';\n\naddActionHandler('showActivityInfo', (global, actions, { id }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showActivityInfo', { id });\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: id });\n});\n\naddActionHandler('showAnyAccountTx', async (global, actions, { txId, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTx', { txId, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showActivityInfo({ id: txId });\n});\n\naddActionHandler('showAnyAccountTokenActivity', async (global, actions, { slug, accountId, network }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('showAnyAccountTokenActivity', { slug, accountId, network });\n    return;\n  }\n\n  await Promise.all([\n    closeAllOverlays(),\n    switchAccount(global, accountId, network),\n  ]);\n\n  actions.showTokenActivity({ slug });\n});\n\naddActionHandler('closeActivityInfo', (global, actions, { id }) => {\n  if (selectCurrentAccountState(global)?.currentActivityId !== id) {\n    return undefined;\n  }\n\n  return updateCurrentAccountState(global, { currentActivityId: undefined });\n});\n\naddActionHandler('addSavedAddress', (global, actions, { address, name, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  return updateCurrentAccountState(global, {\n    savedAddresses: [\n      ...savedAddresses,\n      { address, name, chain },\n    ],\n  });\n});\n\naddActionHandler('removeFromSavedAddress', (global, actions, { address, chain }) => {\n  const { savedAddresses = [] } = selectCurrentAccountState(global) || {};\n\n  const newSavedAddresses = savedAddresses.filter((item) => !(item.address === address && item.chain === chain));\n\n  return updateCurrentAccountState(global, { savedAddresses: newSavedAddresses });\n});\n\naddActionHandler('toggleTinyTransfersHidden', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      areTinyTransfersHidden: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setCurrentTokenPeriod', (global, actions, { period }) => {\n  return updateCurrentAccountState(global, {\n    currentTokenPeriod: period,\n  });\n});\n\naddActionHandler('addAccount', async (global, actions, { method, password, isAuthFlow }) => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isMnemonicImport = method === 'importMnemonic';\n\n  if (isPasswordPresent) {\n    if (!isAuthFlow) {\n      global = updateAccounts(global, {\n        isLoading: true,\n      });\n      setGlobal(global);\n    }\n\n    if (!(await callApi('verifyPassword', password))) {\n      global = getGlobal();\n      if (isAuthFlow) {\n        global = updateAuth(global, {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      } else {\n        global = updateAccounts(getGlobal(), {\n          isLoading: undefined,\n          error: 'Wrong password, please try again.',\n        });\n      }\n      setGlobal(global);\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      global = setIsPinAccepted(getGlobal());\n      setGlobal(global);\n    }\n    await vibrateOnSuccess(true);\n  }\n\n  global = getGlobal();\n  if (isMnemonicImport || !isPasswordPresent) {\n    global = { ...global, isAddAccountModalOpen: undefined };\n  } else {\n    global = updateAccounts(global, { isLoading: true });\n  }\n  setGlobal(global);\n\n  if (!IS_DELEGATED_BOTTOM_SHEET) {\n    actions.addAccount2({ method, password });\n  } else {\n    callActionInMain('addAccount2', { method, password });\n  }\n});\n\naddActionHandler('addAccount2', (global, actions, { method, password }) => {\n  const isMnemonicImport = method === 'importMnemonic';\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const authState = isPasswordPresent\n    ? isMnemonicImport\n      ? AuthState.importWallet\n      : undefined\n    : (\n      getDoesUsePinPad()\n        ? AuthState.createPin\n        : (IS_BIOMETRIC_AUTH_SUPPORTED ? AuthState.createBiometrics : AuthState.createPassword)\n    );\n\n  if (isMnemonicImport || !isPasswordPresent) {\n    global = { ...global, appState: AppState.Auth };\n  }\n  global = updateAuth(global, { password, state: authState });\n  global = clearCurrentTransfer(global);\n  global = clearCurrentSwap(global);\n\n  setGlobal(global);\n\n  if (isMnemonicImport) {\n    actions.startImportingWallet();\n  } else {\n    actions.startCreatingWallet();\n  }\n});\n\naddActionHandler('renameAccount', (global, actions, { accountId, title }) => {\n  global = { ...global, shouldForceAccountEdit: false };\n\n  setGlobal(renameAccount(global, accountId, title));\n\n  actions.renameNotificationAccount({ accountId });\n});\n\naddActionHandler('clearAccountError', (global) => {\n  return updateAccounts(global, { error: undefined });\n});\n\naddActionHandler('openAddAccountModal', (global, _, props) => {\n  const { forceAddingTonOnlyAccount } = props || {};\n\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openAddAccountModal', props);\n    return;\n  }\n\n  global = { ...global, isAddAccountModalOpen: true };\n\n  if (forceAddingTonOnlyAccount) {\n    global = updateAuth(global, { forceAddingTonOnlyAccount });\n  }\n\n  setGlobal(global);\n});\n\naddActionHandler('closeAddAccountModal', (global, _, props) => {\n  if (getDoesUsePinPad()) {\n    global = clearIsPinAccepted(global);\n  }\n\n  global = updateAuth(global, { forceAddingTonOnlyAccount: undefined });\n  global = { ...global, isAddAccountModalOpen: undefined };\n\n  return global;\n});\n\naddActionHandler('changeNetwork', (global, actions, { network }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isTestnet: network === 'testnet',\n    },\n  };\n});\n\naddActionHandler('openSettings', (global) => {\n  global = updateSettings(global, { state: SettingsState.Initial });\n\n  return { ...global, areSettingsOpen: true };\n});\n\naddActionHandler('openSettingsWithState', (global, actions, { state }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET && !global.areSettingsOpen) {\n    callActionInMain('openSettingsWithState', { state });\n    return;\n  }\n\n  global = updateSettings(global, { state });\n  setGlobal({ ...global, areSettingsOpen: true });\n});\n\naddActionHandler('setSettingsState', (global, actions, { state }) => {\n  global = updateSettings(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('closeSettings', (global) => {\n  if (!global.currentAccountId) {\n    return global;\n  }\n\n  return { ...global, areSettingsOpen: false };\n});\n\naddActionHandler('openBackupWalletModal', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openBackupWalletModal');\n    return undefined;\n  }\n\n  return { ...global, isBackupWalletModalOpen: true };\n});\n\naddActionHandler('closeBackupWalletModal', (global) => {\n  return { ...global, isBackupWalletModalOpen: undefined };\n});\n\naddActionHandler('toggleInvestorView', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isInvestorViewEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('changeLanguage', (global, actions, { langCode }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      langCode,\n    },\n  };\n});\n\naddActionHandler('toggleCanPlaySounds', (global, actions, { isEnabled } = {}) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      canPlaySounds: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setLandscapeActionsActiveTabIndex', (global, actions, { index }) => {\n  return updateCurrentAccountState(global, {\n    landscapeActionsActiveTabIndex: index,\n  });\n});\n\naddActionHandler('closeSecurityWarning', (global) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isSecurityWarningHidden: true,\n    },\n  };\n});\n\naddActionHandler('toggleTokensWithNoCost', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { areTokensWithNoCostHidden: isEnabled });\n});\n\naddActionHandler('toggleSortByValue', (global, actions, { isEnabled }) => {\n  return updateSettings(global, { isSortByValueEnabled: isEnabled });\n});\n\naddActionHandler('updateOrderedSlugs', (global, actions, { orderedSlugs }) => {\n  const accountSettings = selectCurrentAccountSettings(global);\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs,\n  });\n});\n\naddActionHandler('toggleTokenVisibility', (global, actions, { slug, shouldShow }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { alwaysShownSlugs = [], alwaysHiddenSlugs = [] } = accountSettings;\n  const alwaysShownSlugsSet = new Set(alwaysShownSlugs);\n  const alwaysHiddenSlugsSet = new Set(alwaysHiddenSlugs);\n\n  if (shouldShow) {\n    alwaysHiddenSlugsSet.delete(slug);\n    alwaysShownSlugsSet.add(slug);\n  } else {\n    alwaysShownSlugsSet.delete(slug);\n    alwaysHiddenSlugsSet.add(slug);\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    alwaysHiddenSlugs: Array.from(alwaysHiddenSlugsSet),\n    alwaysShownSlugs: Array.from(alwaysShownSlugsSet),\n  });\n});\n\naddActionHandler('deleteToken', (global, actions, { slug }) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: accountSettings.orderedSlugs?.filter((s) => s !== slug),\n    alwaysHiddenSlugs: accountSettings.alwaysHiddenSlugs?.filter((s) => s !== slug),\n    alwaysShownSlugs: accountSettings.alwaysShownSlugs?.filter((s) => s !== slug),\n    deletedSlugs: [...accountSettings.deletedSlugs ?? [], slug],\n    importedSlugs: accountSettings.importedSlugs?.filter((s) => s !== slug),\n  });\n});\n\naddActionHandler('checkAppVersion', (global) => {\n  fetch(`${APP_VERSION_URL}?${Date.now()}`)\n    .then((response) => response.text())\n    .then((version) => {\n      version = version.trim();\n\n      if (getIsAppUpdateNeeded(version, APP_VERSION)) {\n        global = getGlobal();\n        global = {\n          ...global,\n          isAppUpdateAvailable: true,\n          latestAppVersion: version.trim(),\n        };\n        setGlobal(global);\n      }\n    })\n    .catch((err) => {\n      if (DEBUG) {\n        // eslint-disable-next-line no-console\n        console.error('[checkAppVersion failed] ', err);\n      }\n    });\n});\n\naddActionHandler('requestConfetti', (global) => {\n  if (global.settings.animationLevel === ANIMATION_LEVEL_MIN) return global;\n\n  return {\n    ...global,\n    confettiRequestedAt: Date.now(),\n  };\n});\n\naddActionHandler('requestOpenQrScanner', async (global, actions) => {\n  if (getIsMobileTelegramApp()) {\n    const webApp = getTelegramApp();\n    webApp?.showScanQrPopup({}, (data) => {\n      void vibrateOnSuccess();\n      webApp.closeScanQrPopup();\n      actions.handleQrCode({ data });\n    });\n    return;\n  }\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('requestOpenQrScanner');\n    return;\n  }\n\n  let currentQrScan: GlobalState['currentQrScan'];\n  if (global.currentTransfer.state === TransferState.Initial) {\n    currentQrScan = { currentTransfer: global.currentTransfer };\n  } else if (global.currentSwap.state === SwapState.Blockchain) {\n    currentQrScan = { currentSwap: global.currentSwap };\n  } else if (global.currentDomainLinking.state === DomainLinkingState.Initial) {\n    currentQrScan = { currentDomainLinking: global.currentDomainLinking };\n  }\n\n  const { camera } = await BarcodeScanner.requestPermissions();\n  const isGranted = camera === 'granted' || camera === 'limited';\n  if (!isGranted) {\n    actions.showNotification({\n      message: getTranslation('Permission denied. Please grant camera permission to use the QR code scanner.'),\n    });\n    return;\n  }\n\n  global = getGlobal();\n  global = {\n    ...global,\n    isQrScannerOpen: true,\n    currentQrScan,\n  };\n\n  setGlobal(global);\n});\n\naddActionHandler('closeQrScanner', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeQrScanner');\n  }\n\n  return {\n    ...global,\n    isQrScannerOpen: undefined,\n    currentQrScan: undefined,\n  };\n});\n\naddActionHandler('handleQrCode', async (global, actions, { data }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('handleQrCode', { data });\n    return;\n  }\n\n  const { currentTransfer, currentSwap, currentDomainLinking } = global.currentQrScan || {};\n\n  if (currentTransfer) {\n    const transferParams = parseDeeplinkTransferParams(data, global);\n    if (transferParams) {\n      if ('error' in transferParams) {\n        actions.showError({ error: transferParams.error });\n        // Not returning on error is intentional\n      }\n      setGlobal(updateCurrentTransfer(global, {\n        ...currentTransfer,\n        ...omit(transferParams, ['error']),\n      }));\n    } else {\n      // Assuming that the QR code content is a plain wallet address\n      setGlobal(setCurrentTransferAddress(updateCurrentTransfer(global, currentTransfer), data));\n    }\n    return;\n  }\n\n  if (currentSwap || currentDomainLinking) {\n    const linkParams = parseDeeplinkTransferParams(data, global);\n    const toAddress = linkParams?.toAddress ?? data;\n    if (currentSwap) {\n      setGlobal(updateCurrentSwap(global, { ...currentSwap, toAddress }));\n    } else {\n      setGlobal(updateCurrentDomainLinking(global, { ...currentDomainLinking, walletAddress: toAddress }));\n    }\n    return;\n  }\n\n  if (await processDeeplink(data)) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const plainAddressData = parsePlainAddressQr(global, data);\n  if (plainAddressData) {\n    actions.startTransfer({\n      ...plainAddressData,\n      isPortrait: getIsPortrait(),\n    });\n    return;\n  }\n\n  actions.showDialog({ title: 'This QR Code is not supported', message: '' });\n});\n\naddActionHandler('changeBaseCurrency', async (global, actions, { currency }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeBaseCurrency', { currency });\n  }\n\n  await callApi('setBaseCurrency', currency);\n  await callApi('tryUpdateTokens');\n  // Swap tokens will be merged with the new prices loaded in `tryUpdateTokens`\n  await callApi('tryUpdateSwapTokens');\n});\n\naddActionHandler('setIsPinAccepted', (global) => {\n  return setIsPinAccepted(global);\n});\n\naddActionHandler('clearIsPinAccepted', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    // Sometimes this action is called after the delegated bottom sheet is closed, e.g. on a component unmount.\n    // The problem is, delegated bottom sheet doesn't synchronize the global state when it's closed, so the pin pad\n    // can get stuck in the accepted state. To fix that, this action is called in the main WebView using a more reliable\n    // mechanism.\n    callActionInMain('clearIsPinAccepted');\n  }\n\n  return clearIsPinAccepted(global);\n});\n\naddActionHandler('openOnRampWidgetModal', (global, actions, { chain }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openOnRampWidgetModal', { chain });\n    return;\n  }\n\n  setGlobal({ ...global, chainForOnRampWidgetModal: chain });\n});\n\naddActionHandler('closeOnRampWidgetModal', (global) => {\n  setGlobal({ ...global, chainForOnRampWidgetModal: undefined });\n});\n\naddActionHandler('openMediaViewer', (global, actions, {\n  mediaId, mediaType, txId, hiddenNfts, noGhostAnimation,\n}) => {\n  const accountState = selectCurrentAccountState(global);\n  const { byAddress } = accountState?.nfts || {};\n  const nft = byAddress?.[mediaId];\n\n  if (!nft) return undefined;\n\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId,\n      mediaType,\n      txId,\n      hiddenNfts,\n      noGhostAnimation,\n    },\n  };\n});\n\naddActionHandler('closeMediaViewer', (global) => {\n  return {\n    ...global,\n    mediaViewer: {\n      mediaId: undefined,\n      mediaType: undefined,\n    },\n  };\n});\n\naddActionHandler('setReceiveActiveTab', (global, actions, { chain }): GlobalState => {\n  return updateCurrentAccountState(global, { receiveModalChain: chain });\n});\n\naddActionHandler('openReceiveModal', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openReceiveModal', params);\n    return;\n  }\n\n  global = updateCurrentAccountState(global, { receiveModalChain: params?.chain });\n  global = { ...global, isReceiveModalOpen: true };\n  setGlobal(global);\n});\n\naddActionHandler('closeReceiveModal', (global): GlobalState => {\n  global = updateCurrentAccountState(global, { receiveModalChain: undefined });\n  return { ...global, isReceiveModalOpen: undefined };\n});\n\naddActionHandler('openInvoiceModal', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('openInvoiceModal', params);\n    return;\n  }\n\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: params?.tokenSlug });\n  setGlobal({ ...global, isInvoiceModalOpen: true });\n});\n\naddActionHandler('changeInvoiceToken', (global, actions, params) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('changeInvoiceToken', params);\n  }\n\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: params.tokenSlug });\n  setGlobal(global);\n});\n\naddActionHandler('closeInvoiceModal', (global): GlobalState => {\n  global = updateCurrentAccountState(global, { invoiceTokenSlug: undefined });\n  return { ...global, isInvoiceModalOpen: undefined };\n});\n\naddActionHandler('showIncorrectTimeError', (global, actions) => {\n  actions.showDialog({\n    message: getTranslation('Time synchronization issue. Please ensure your device\\'s time settings are correct.'),\n  });\n\n  return { ...global, isIncorrectTimeNotificationReceived: true };\n});\n\naddActionHandler('openLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: true });\n});\n\naddActionHandler('closeLoadingOverlay', (global) => {\n  setGlobal({ ...global, isLoadingOverlayOpen: undefined });\n});\n\naddActionHandler('clearAccountLoading', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearAccountLoading');\n  }\n\n  setGlobal(updateAccounts(global, { isLoading: undefined }));\n});\n\naddActionHandler('setIsAccountLoading', (global, actions, { isLoading }) => {\n  setGlobal(updateAccounts(global, { isLoading }));\n});\n\naddActionHandler('authorizeDiesel', (global) => {\n  const address = selectCurrentAccount(global)!.addressByChain.ton;\n  if (!address) throw new Error('TON address missing');\n  setGlobal(updateCurrentAccountState(global, { isDieselAuthorizationStarted: true }));\n  void openUrl(`https://t.me/${BOT_USERNAME}?start=auth-${address}`);\n});\n\naddActionHandler('submitAppLockActivityEvent', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('submitAppLockActivityEvent');\n    return;\n  }\n  reportAppLockActivityEvent();\n});\n\naddActionHandler('closeAnyModal', () => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('closeAnyModal');\n    return;\n  }\n\n  closeModal();\n});\n\naddActionHandler('openExplore', (global) => {\n  return { ...global, isExploreOpen: true };\n});\n\naddActionHandler('closeExplore', (global) => {\n  return { ...global, isExploreOpen: undefined };\n});\n\naddActionHandler('openFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: true });\n\n  void vibrate();\n});\n\naddActionHandler('closeFullscreen', (global) => {\n  setGlobal({ ...global, isFullscreen: undefined });\n\n  void vibrate();\n});\n\naddActionHandler('setIsSensitiveDataHidden', (global, actions, { isHidden }) => {\n  setGlobal(updateSettings(global, { isSensitiveDataHidden: isHidden ? true : undefined }));\n\n  void vibrate();\n});\n\naddActionHandler('setIsAppLockActive', (global, actions, { isActive }) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('setIsAppLockActive', { isActive });\n  }\n\n  setGlobal({ ...global, isAppLockActive: isActive || undefined });\n});\n\naddActionHandler('switchAccountAndOpenUrl', async (global, actions, payload) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('switchAccountAndOpenUrl', payload);\n    return;\n  }\n\n  await Promise.all([\n    // The browser is closed before opening the new URL, because otherwise the browser won't apply the new\n    // parameters from `payload`. It's important to wait for `closeAllOverlays` to finish, because until the in-app\n    // browser is closed, it won't open again.\n    closeAllOverlays(),\n    payload.accountId && switchAccount(global, payload.accountId, payload.network),\n  ]);\n\n  await openDeeplinkOrUrl(payload.url, payload);\n});\n\naddActionHandler('switchToWallet', (global: GlobalState, actions) => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const accountState = selectCurrentAccountState(global);\n  const areAssetsActive = accountState?.activeContentTab === ContentTab.Assets;\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  actions.closeExplore(undefined, { forceOnHeavyAnimation: true });\n  actions.closeSettings(undefined, { forceOnHeavyAnimation: true });\n\n  if (!areAssetsActive && isWalletTabActive) {\n    actions.selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    actions.setActiveContentTab({ tab: ContentTab.Assets }, { forceOnHeavyAnimation: true });\n  }\n});\n\naddActionHandler('switchToExplore', (global: GlobalState, actions) => {\n  const { isExploreOpen } = global;\n\n  if (isExploreOpen) {\n    actions.closeSiteCategory(undefined, { forceOnHeavyAnimation: true });\n  }\n\n  actions.closeSettings(undefined, { forceOnHeavyAnimation: true });\n  actions.openExplore(undefined, { forceOnHeavyAnimation: true });\n});\n\naddActionHandler('switchToSettings', (global: GlobalState, actions) => {\n  actions.closeExplore(undefined, { forceOnHeavyAnimation: true });\n  actions.openSettings(undefined, { forceOnHeavyAnimation: true });\n});\n\naddActionHandler('setAppLayout', (global, actions, { layout }) => {\n  if (IS_ELECTRON) {\n    void window.electron?.changeAppLayout(layout);\n  } else {\n    void callApi('setAppLayout', layout);\n  }\n});\n","import { SignDataState, TransferState } from '../../types';\n\nimport { BROWSER_HISTORY_LIMIT } from '../../../config';\nimport { getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { unique } from '../../../util/iteratees';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  clearDappConnectRequestError,\n  resetHardware,\n  updateCurrentAccountState,\n  updateCurrentDappSignData,\n  updateCurrentDappTransfer,\n} from '../../reducers';\nimport { selectCurrentAccountState, selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('clearDappConnectRequestError', (global) => {\n  global = clearDappConnectRequestError(global);\n  setGlobal(global);\n});\n\naddActionHandler('showDappTransferTransaction', (global, actions, payload) => {\n  const { transactionIdx } = payload;\n\n  global = updateCurrentDappTransfer(global, {\n    state: TransferState.Confirm,\n    viewTransactionOnIdx: transactionIdx,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('setDappTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  global = updateCurrentDappTransfer(global, { state });\n  setGlobal(global);\n});\n\naddActionHandler('submitDappTransferConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDappTransfer(global, { state: TransferState.ConnectHardware });\n    setGlobal(global);\n  } else if (inMemoryPassword) {\n    global = updateCurrentDappTransfer(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitDappTransferPassword({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentDappTransfer(global, { state: TransferState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearDappTransferError', (global) => {\n  global = updateCurrentDappTransfer(global, {\n    error: undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('openBrowser', (global, actions, {\n  url, title, subtitle,\n}) => {\n  global = {\n    ...global,\n    currentBrowserOptions: {\n      url, title, subtitle,\n    },\n  };\n  setGlobal(global);\n});\n\naddActionHandler('closeBrowser', (global) => {\n  global = { ...global, currentBrowserOptions: undefined };\n  setGlobal(global);\n});\n\naddActionHandler('addSiteToBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = unique([\n    url,\n    ...accountState?.browserHistory || [],\n  ]).slice(0, BROWSER_HISTORY_LIMIT);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('removeSiteFromBrowserHistory', (global, actions, { url }) => {\n  const accountState = selectCurrentAccountState(global);\n\n  const newHistory = accountState?.browserHistory?.filter((currentUrl) => currentUrl !== url);\n\n  global = updateCurrentAccountState(global, {\n    browserHistory: newHistory?.length ? newHistory : undefined,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('updateDappLastOpenedAt', (global, actions, { url }) => {\n  const { dappLastOpenedDatesByUrl } = selectCurrentAccountState(global)!;\n\n  const newDates = {\n    ...dappLastOpenedDatesByUrl,\n    [url]: Date.now(),\n  };\n\n  global = updateCurrentAccountState(global, { dappLastOpenedDatesByUrl: newDates });\n  setGlobal(global);\n});\n\naddActionHandler('openSiteCategory', (global, actions, { id }) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: id });\n});\n\naddActionHandler('closeSiteCategory', (global) => {\n  return updateCurrentAccountState(global, { currentSiteCategoryId: undefined });\n});\n\naddActionHandler('closeDappTransfer', (global) => {\n  global = updateCurrentDappTransfer(global, { state: TransferState.None });\n  setGlobal(global);\n});\n\naddActionHandler('setDappSignDataScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentDappSignData(global, { state });\n});\n\naddActionHandler('submitDappSignDataConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (inMemoryPassword) {\n    global = updateCurrentDappSignData(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitDappSignDataPassword({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentDappSignData(global, { state: SignDataState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearDappSignDataError', (global) => {\n  return updateCurrentDappSignData(global, { error: undefined });\n});\n\naddActionHandler('closeDappSignData', (global) => {\n  return updateCurrentDappSignData(global, { state: SignDataState.None });\n});\n","import type { LedgerTransport } from '../../../util/ledger/types';\nimport { AppState, HardwareConnectState } from '../../types';\n\nimport { IS_EXTENSION } from '../../../config';\nimport { closeThisTab, onLedgerTabClose, openLedgerTab } from '../../../util/ledger/tab';\nimport { isLedgerConnectionBroken } from '../../../util/ledger/utils';\nimport { logDebugError } from '../../../util/logs';\nimport { pause } from '../../../util/schedulers';\nimport { IS_LEDGER_EXTENSION_TAB } from '../../../util/windowEnvironment';\nimport { addActionHandler, getActions, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, updateHardware } from '../../reducers';\nimport { selectAllHardwareAccounts, selectCurrentNetwork, selectLedgerAccountIndexToImport } from '../../selectors';\n\n// There is no long-term Ledger connection state in the application. Every time the application needs to interact with\n// a Ledger device, it ensures the device is connected using the <LedgerConnect> component, and communicates with the\n// device immediately after that.\n\nconst OPEN_LEDGER_TAB_DELAY = 500;\n\naddActionHandler('initLedgerPage', (global) => {\n  return { ...global, appState: AppState.Ledger };\n});\n\naddActionHandler('openHardwareWalletModal', (global) => {\n  global = resetHardware(global);\n\n  return { ...global, isHardwareModalOpen: true };\n});\n\naddActionHandler('closeHardwareWalletModal', (global) => {\n  return { ...global, isHardwareModalOpen: false };\n});\n\naddActionHandler('initializeHardwareWalletModal', async (global, actions) => {\n  const ledgerApi = await import('../../../util/ledger');\n  const {\n    isBluetoothAvailable,\n    isUsbAvailable,\n  } = await ledgerApi.detectAvailableTransports();\n  const hasUsbDevice = await ledgerApi.hasUsbDevice();\n  const availableTransports: LedgerTransport[] = [];\n  if (isUsbAvailable) {\n    availableTransports.push('usb');\n  }\n  if (isBluetoothAvailable) {\n    availableTransports.push('bluetooth');\n  }\n\n  global = getGlobal();\n  global = updateHardware(global, { availableTransports });\n\n  if (availableTransports.length === 0) {\n    setGlobal(global);\n    actions.showNotification({\n      message: 'Ledger is not supported on this device.',\n    });\n  } else if (availableTransports.length === 1) {\n    setGlobal(global);\n\n    // Chrome requires a user gesture before showing the WebHID permission dialog in extension tabs.\n    if (!IS_LEDGER_EXTENSION_TAB) {\n      actions.initializeHardwareWalletConnection({ transport: availableTransports[0] });\n    }\n  } else {\n    if (!hasUsbDevice) {\n      global = updateHardware(global, { lastUsedTransport: 'bluetooth' });\n    }\n    setGlobal(global);\n  }\n});\n\naddActionHandler('initializeHardwareWalletConnection', async (global, actions, params) => {\n  await connectLedger(params.transport);\n});\n\nasync function connectLedger(transport: LedgerTransport, noRetry?: boolean, noRemoteTab?: boolean) {\n  let global = getGlobal();\n\n  setGlobal(updateHardware(global, {\n    hardwareState: HardwareConnectState.Connecting,\n    hardwareWallets: undefined,\n    isLedgerConnected: undefined,\n    isTonAppConnected: undefined,\n  }));\n\n  const ledgerApi = await import('../../../util/ledger');\n  const isLedgerConnected = await ledgerApi.connectLedger(transport);\n  global = getGlobal();\n\n  if (!isLedgerConnected) {\n    if (IS_EXTENSION && !IS_LEDGER_EXTENSION_TAB && !noRemoteTab) {\n      return connectLedgerViaRemoteTab(transport);\n    }\n\n    global = updateHardware(global, {\n      isLedgerConnected: false,\n      hardwareState: HardwareConnectState.Failed,\n    });\n\n    if (transport === 'usb' && global.hardware.availableTransports?.includes('bluetooth')) {\n      global = updateHardware(global, { lastUsedTransport: 'bluetooth' });\n    }\n\n    setGlobal(global);\n    return;\n  }\n\n  setGlobal(updateHardware(global, {\n    isLedgerConnected: true,\n  }));\n\n  // The only thing needed from the remote tab is getting the user permission to use the HID device (see the\n  // `openLedgerTab` description for more details). Successful connection means that the permission is granted.\n  if (IS_LEDGER_EXTENSION_TAB) {\n    return closeThisTab();\n  }\n\n  try {\n    const isTonAppConnected = await ledgerApi.waitLedgerTonApp();\n    global = getGlobal();\n\n    if (!isTonAppConnected) {\n      setGlobal(updateHardware(global, {\n        isTonAppConnected: false,\n        hardwareState: HardwareConnectState.Failed,\n      }));\n      return;\n    }\n\n    setGlobal(updateHardware(global, {\n      isTonAppConnected: true,\n    }));\n\n    // todo: Load the wallets only during authentication\n    const hardwareWallets = await getLedgerWallets(ledgerApi);\n    const nextHardwareState = hardwareWallets.length === 1\n      ? HardwareConnectState.ConnectedWithSingleWallet\n      : HardwareConnectState.ConnectedWithSeveralWallets;\n\n    setGlobal(updateHardware(getGlobal(), {\n      hardwareWallets,\n      hardwareState: nextHardwareState,\n      lastUsedTransport: transport,\n    }));\n  } catch (err: any) {\n    const isLedgerDisconnected = isLedgerConnectionBroken(err.name);\n\n    if (isLedgerDisconnected && !noRetry) {\n      return connectLedger(transport, true, noRemoteTab);\n    }\n\n    global = getGlobal();\n    setGlobal(updateHardware(global, {\n      isLedgerConnected: !isLedgerDisconnected,\n      isTonAppConnected: isLedgerDisconnected ? undefined : global.hardware.isTonAppConnected,\n      hardwareState: HardwareConnectState.Failed,\n    }));\n\n    logDebugError('connectHardwareWallet', err);\n  }\n}\n\nasync function connectLedgerViaRemoteTab(transport: LedgerTransport) {\n  setGlobal(updateHardware(getGlobal(), {\n    hardwareState: HardwareConnectState.WaitingForRemoteTab,\n  }));\n\n  await pause(OPEN_LEDGER_TAB_DELAY);\n  const id = await openLedgerTab();\n  const popup = await chrome.windows.getCurrent();\n\n  await new Promise<void>((resolve) => onLedgerTabClose(id, resolve));\n  await chrome.windows.update(popup.id!, { focused: true });\n  await connectLedger(transport, false, true);\n}\n\nasync function getLedgerWallets(ledgerApi: typeof import('../../../util/ledger')) {\n  const global = getGlobal();\n  const network = selectCurrentNetwork(global);\n  const lastIndex = selectLedgerAccountIndexToImport(global, network);\n  const currentHardwareAddresses = selectAllHardwareAccounts(global, network)\n    .map((account) => account.addressByChain.ton)\n    .filter(Boolean);\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(\n    network,\n    lastIndex,\n    currentHardwareAddresses,\n  );\n\n  if ('error' in hardwareWallets) {\n    getActions().showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  return hardwareWallets;\n}\n\naddActionHandler('resetHardwareWalletConnect', (global) => {\n  return resetHardware(global);\n});\n\naddActionHandler('loadMoreHardwareWallets', async (global, actions, { lastIndex }) => {\n  const network = selectCurrentNetwork(global);\n  const oldHardwareWallets = global.hardware.hardwareWallets ?? [];\n  const ledgerApi = await import('../../../util/ledger');\n  const hardwareWallets = await ledgerApi.getNextLedgerWallets(network, lastIndex);\n\n  global = getGlobal();\n\n  if ('error' in hardwareWallets) {\n    actions.showError({ error: hardwareWallets.error });\n    throw Error(hardwareWallets.error);\n  }\n\n  global = updateHardware(global, {\n    hardwareWallets: oldHardwareWallets.concat(hardwareWallets),\n  });\n  setGlobal(global);\n});\n","import { addCallback } from '../../../lib/teact/teactn';\n\nimport type { GlobalState } from '../../types';\nimport { SettingsState } from '../../types';\n\nimport { setInMemoryPasswordSignal } from '../../../util/authApi/inMemoryPasswordStore';\nimport { setLanguage } from '../../../util/langProvider';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport switchTheme from '../../../util/switchTheme';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../..';\nimport { resetHardware, updateSettings } from '../../reducers';\nimport { selectIsBiometricAuthEnabled } from '../../selectors';\n\nlet prevGlobal: GlobalState | undefined;\n\naddCallback((global: GlobalState) => {\n  if (!prevGlobal || !(prevGlobal as AnyLiteral).settings) {\n    prevGlobal = global;\n    return;\n  }\n\n  const { settings: prevSettings } = prevGlobal;\n  const { settings } = global;\n\n  if (settings.theme !== prevSettings.theme) {\n    switchTheme(settings.theme);\n  }\n\n  if (settings.langCode !== prevSettings.langCode) {\n    void setLanguage(settings.langCode);\n  }\n\n  prevGlobal = global;\n});\n\naddActionHandler('setAppLockValue', (global, actions, { value, isEnabled }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      autolockValue: value,\n      isAppLockEnabled: isEnabled,\n    },\n  };\n});\n\naddActionHandler('setIsManualLockActive', (global, actions, { isActive, shouldHideBiometrics }) => {\n  return {\n    ...global,\n    isManualLockActive: isActive,\n    appLockHideBiometrics: shouldHideBiometrics,\n  };\n});\n\naddActionHandler('setIsAutoConfirmEnabled', (global, actions, { isEnabled }) => {\n  if (!isEnabled) {\n    actions.setInMemoryPassword({ password: undefined, force: true });\n  }\n\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      isAutoConfirmEnabled: isEnabled || undefined,\n    },\n  };\n});\n\naddActionHandler('setInMemoryPassword', (global, actions, { password, isFinalCall, force }) => {\n  // `global` is not loaded in the NBS until it's opened for the first time, so `isAutoConfirmEnabled` may be\n  // incorrectly `undefined` when Auto Confirm is actually enabled. To mitigate that, we skip checking the setting\n  // when `isFinalCall` is `true`, because in this case the action is fired by the main WebView only when Auto Confirm is enabled.\n  if (!(global.settings.isAutoConfirmEnabled || isFinalCall || force)) {\n    return global;\n  }\n\n  // If biometrics are enabled, we don't need to set the password in memory\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  if (isBiometricAuthEnabled) {\n    return global;\n  }\n\n  setInMemoryPasswordSignal(password);\n\n  if (!isFinalCall) {\n    if (IS_DELEGATING_BOTTOM_SHEET) {\n      void callActionInNative('setInMemoryPassword', { password, isFinalCall: true });\n    }\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void callActionInMain('setInMemoryPassword', { password, isFinalCall: true });\n    }\n  }\n\n  return global;\n});\n\naddActionHandler('openSettingsHardwareWallet', (global) => {\n  global = resetHardware(global);\n  global = updateSettings(global, { state: SettingsState.LedgerConnectHardware });\n\n  setGlobal(global);\n});\n","import { TELEGRAM_GIFTS_SUPER_COLLECTION } from '../../../config';\nimport { addActionHandler, setGlobal } from '../../index';\nimport {\n  addToSelectedAddresses,\n  removeFromSelectedAddresses,\n  updateAccountState,\n  updateCurrentAccountState,\n} from '../../reducers';\nimport { selectAccountState, selectCurrentAccountState } from '../../selectors';\n\naddActionHandler('openNftCollection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: address,\n    },\n  });\n  return global;\n});\n\naddActionHandler('closeNftCollection', (global) => {\n  const accountState = selectCurrentAccountState(global);\n  global = updateCurrentAccountState(global, {\n    nfts: {\n      ...accountState!.nfts!,\n      currentCollectionAddress: undefined,\n    },\n    selectedNftsToHide: undefined,\n  });\n  return global;\n});\n\naddActionHandler('selectNfts', (global, actions, { addresses }) => {\n  const accountId = global.currentAccountId!;\n  global = addToSelectedAddresses(global, accountId, addresses);\n  setGlobal(global);\n});\n\naddActionHandler('selectAllNfts', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectAccountState(global, accountId) || {};\n\n  const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n  const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n  const { nfts: accountNfts } = selectAccountState(global, accountId)!;\n  const nfts = Object.values(accountNfts!.byAddress!).filter((nft) => (\n    !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n  ) && !blacklistedNftAddressesSet.has(nft.address) && (\n    collectionAddress === undefined || (nft.collectionAddress === collectionAddress)\n  ));\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountNfts!,\n      selectedAddresses: nfts.map(({ address }) => address),\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearNftSelection', (global, actions, { address }) => {\n  const accountId = global.currentAccountId!;\n  global = removeFromSelectedAddresses(global, accountId, address);\n  setGlobal(global);\n});\n\naddActionHandler('clearNftsSelection', (global) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...accountState!.nfts!,\n      selectedAddresses: [],\n    },\n  });\n  setGlobal(global);\n});\n\naddActionHandler('addCollectionTab', (global, actions, { collectionAddress, isAuto }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  const currentNfts = accountState?.nfts || { byAddress: {} };\n\n  if (isAuto && collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && currentNfts.wasTelegramGiftsAutoAdded) {\n    return global;\n  }\n\n  const existingCollectionTabs = currentNfts.collectionTabs || [];\n\n  if (!existingCollectionTabs.includes(collectionAddress)) {\n    global = updateAccountState(global, accountId, {\n      nfts: {\n        ...currentNfts,\n        collectionTabs: [...existingCollectionTabs, collectionAddress],\n        ...(isAuto && collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && { wasTelegramGiftsAutoAdded: true }),\n      },\n    });\n  }\n\n  return global;\n});\n\naddActionHandler('removeCollectionTab', (global, actions, { collectionAddress }) => {\n  const accountId = global.currentAccountId!;\n  const accountState = selectAccountState(global, accountId);\n  const currentNfts = accountState?.nfts || { byAddress: {} };\n\n  if (!currentNfts.collectionTabs) {\n    return global;\n  }\n\n  global = updateAccountState(global, accountId, {\n    nfts: {\n      ...currentNfts,\n      collectionTabs: currentNfts.collectionTabs.filter((address) => address !== collectionAddress),\n    },\n  });\n\n  return global;\n});\n","import { VestingUnfreezeState } from '../../types';\n\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, setGlobal } from '../../index';\nimport { resetHardware, updateVesting } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('openVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: true });\n});\n\naddActionHandler('closeVestingModal', (global) => {\n  setGlobal({ ...global, isVestingModalOpen: undefined });\n});\n\naddActionHandler('startClaimingVesting', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('startClaimingVesting');\n    return;\n  }\n\n  const accountId = global.currentAccountId!;\n  global = { ...global, isVestingModalOpen: undefined };\n  global = updateVesting(global, accountId, { isConfirmRequested: true });\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateVesting(global, accountId, { unfreezeState: VestingUnfreezeState.ConnectHardware });\n  } else {\n    global = updateVesting(global, accountId, { unfreezeState: VestingUnfreezeState.Password });\n  }\n  setGlobal(global);\n});\n\naddActionHandler('cancelClaimingVesting', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { isConfirmRequested: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('clearVestingError', (global) => {\n  const accountId = global.currentAccountId!;\n  global = updateVesting(global, accountId, { error: undefined });\n  setGlobal(global);\n});\n","import { ContentTab } from '../../types';\n\nimport { areSortedArraysEqual, unique } from '../../../util/iteratees';\nimport { addActionHandler } from '../../index';\nimport { updateCurrentAccountSettings } from '../../reducers';\nimport { selectCurrentAccountSettings, selectCurrentAccountTokens } from '../../selectors';\n\naddActionHandler('rebuildOrderedSlugs', (global) => {\n  const accountSettings = selectCurrentAccountSettings(global) ?? {};\n  const { orderedSlugs = [] } = accountSettings;\n  const accountTokens = selectCurrentAccountTokens(global) ?? [];\n  const allSlugs = accountTokens.map(({ slug }) => slug);\n  const newOrderedSlugs = unique([...orderedSlugs, ...allSlugs]);\n\n  if (areSortedArraysEqual(orderedSlugs, newOrderedSlugs)) {\n    return global;\n  }\n\n  return updateCurrentAccountSettings(global, {\n    ...accountSettings,\n    orderedSlugs: newOrderedSlugs,\n  });\n});\n\naddActionHandler('showTokenActivity', (global, actions, { slug }) => {\n  actions.selectToken({ slug }, { forceOnHeavyAnimation: true });\n  actions.setActiveContentTab({ tab: ContentTab.Activity });\n});\n","import { ActiveTab, TransferState } from '../../types';\n\nimport { getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { callActionInMain, callActionInNative } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, setCurrentTransferAddress, updateCurrentTransfer } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('startTransfer', (global, actions, payload) => {\n  const isOpen = global.currentTransfer.state !== TransferState.None;\n  if (IS_DELEGATED_BOTTOM_SHEET && !isOpen) {\n    callActionInMain('startTransfer', payload);\n    return;\n  }\n\n  const { isPortrait, ...rest } = payload ?? {};\n\n  const nftTokenSlug = Symbol('nft');\n  const previousFeeTokenSlug = global.currentTransfer.nfts?.length ? nftTokenSlug : global.currentTransfer.tokenSlug;\n  const nextFeeTokenSlug = payload?.nfts?.length ? nftTokenSlug : payload?.tokenSlug;\n  const shouldClearFee = nextFeeTokenSlug && nextFeeTokenSlug !== previousFeeTokenSlug;\n\n  setGlobal(updateCurrentTransfer(global, {\n    state: isPortrait ? TransferState.Initial : TransferState.None,\n    error: undefined,\n    ...(shouldClearFee ? { fee: undefined, realFee: undefined, diesel: undefined } : {}),\n    ...rest,\n  }));\n\n  if (!isPortrait) {\n    actions.setLandscapeActionsActiveTabIndex({ index: ActiveTab.Transfer });\n  }\n});\n\naddActionHandler('changeTransferToken', (global, actions, { tokenSlug, withResetAmount }) => {\n  const { amount, tokenSlug: currentTokenSlug, nfts } = global.currentTransfer;\n  if (!nfts?.length && tokenSlug === currentTokenSlug && !withResetAmount) {\n    return;\n  }\n\n  const currentToken = currentTokenSlug ? global.tokenInfo.bySlug[currentTokenSlug] : undefined;\n  const newToken = global.tokenInfo.bySlug[tokenSlug];\n\n  if (withResetAmount) {\n    global = updateCurrentTransfer(global, { amount: undefined });\n  } else if (amount && currentToken?.decimals !== newToken?.decimals) {\n    global = updateCurrentTransfer(global, {\n      amount: fromDecimal(toDecimal(amount, currentToken?.decimals), newToken?.decimals),\n    });\n  }\n\n  setGlobal(updateCurrentTransfer(global, {\n    tokenSlug,\n    fee: undefined,\n    realFee: undefined,\n    diesel: undefined,\n    nfts: undefined,\n  }));\n});\n\naddActionHandler('setTransferScreen', (global, actions, payload) => {\n  const { state } = payload;\n\n  return updateCurrentTransfer(global, { state });\n});\n\naddActionHandler('setTransferAmount', (global, actions, { amount }) => {\n  return updateCurrentTransfer(global, { amount });\n});\n\naddActionHandler('setTransferToAddress', (global, actions, { toAddress }) => {\n  return setCurrentTransferAddress(global, toAddress);\n});\n\naddActionHandler('setTransferComment', (global, actions, { comment }) => {\n  return updateCurrentTransfer(global, { comment });\n});\n\naddActionHandler('setTransferShouldEncrypt', (global, actions, { shouldEncrypt }) => {\n  return updateCurrentTransfer(global, { shouldEncrypt });\n});\n\naddActionHandler('submitTransferConfirm', async (global, actions) => {\n  const inMemoryPassword = await getInMemoryPassword();\n\n  global = getGlobal();\n\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentTransfer(global, { state: TransferState.ConnectHardware });\n    setGlobal(global);\n  } else if (inMemoryPassword) {\n    global = updateCurrentTransfer(global, { isLoading: true });\n    setGlobal(global);\n    actions.submitTransferPassword({ password: inMemoryPassword });\n  } else {\n    global = updateCurrentTransfer(global, { state: TransferState.Password });\n    setGlobal(global);\n  }\n});\n\naddActionHandler('clearTransferError', (global) => {\n  setGlobal(updateCurrentTransfer(global, { error: undefined }));\n});\n\naddActionHandler('dismissTransferScamWarning', (global) => {\n  if (IS_DELEGATING_BOTTOM_SHEET) {\n    callActionInNative('dismissTransferScamWarning');\n  }\n\n  global = updateCurrentTransfer(global, { shouldShowScamWarning: undefined });\n  setGlobal(global);\n});\n","import { addActionHandler } from '../../index';\n\naddActionHandler('setTheme', (global, actions, { theme }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      theme,\n    },\n  };\n});\n\naddActionHandler('setAnimationLevel', (global, actions, { level }) => {\n  return {\n    ...global,\n    settings: {\n      ...global.settings,\n      animationLevel: level,\n    },\n  };\n});\n","import { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../../config';\nimport { isKeyCountGreater } from '../../../util/isEmptyObject';\nimport { callApi } from '../../../api';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport {\n  deleteAllNotificationAccounts,\n} from '../../reducers/notifications';\nimport { selectAccounts } from '../../selectors';\nimport { selectNotificationTonAddressesSlow } from '../../selectors/notifications';\n\naddActionHandler('tryAddNotificationAccount', (global, actions, { accountId }) => {\n  if (\n    global.pushNotifications.isAvailable\n    && Object.keys(selectAccounts(global) || {}).length <= MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('renameNotificationAccount', (global, actions, { accountId }) => {\n  const { enabledAccounts, isAvailable } = global.pushNotifications;\n\n  if (\n    isAvailable\n    && enabledAccounts?.[accountId]\n  ) {\n    actions.createNotificationAccount({ accountId });\n  }\n});\n\naddActionHandler('toggleNotificationAccount', (global, actions, { accountId }) => {\n  const {\n    enabledAccounts, userToken, platform,\n  } = global.pushNotifications;\n\n  if (!userToken || !platform) {\n    return;\n  }\n\n  const isExists = enabledAccounts && enabledAccounts[accountId];\n\n  if (!isExists && enabledAccounts && isKeyCountGreater(enabledAccounts, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT - 1)) {\n    return;\n  }\n\n  if (isExists) {\n    actions.deleteNotificationAccount({ accountId, withAbort: true });\n  } else {\n    actions.createNotificationAccount({ accountId, withAbort: true });\n  }\n});\n\naddActionHandler('deleteAllNotificationAccounts', async (global, actions, props) => {\n  const {\n    enabledAccounts, userToken,\n  } = global.pushNotifications;\n\n  if (!enabledAccounts || !userToken) {\n    return;\n  }\n\n  const accountIds = props?.accountIds || Object.keys(enabledAccounts);\n\n  await callApi(\n    'unsubscribeNotifications',\n    {\n      userToken,\n      addresses: Object.values(selectNotificationTonAddressesSlow(global, accountIds)),\n    },\n  );\n\n  global = getGlobal();\n  setGlobal(deleteAllNotificationAccounts(global));\n});\n","export const COLOR_COUNT = 2;\nexport const QUALITY = 1;\n\nexport const ACCENT_COLORS = {\n  light: [\n    '#31AFC7', '#35C759', '#FF9500', '#FF2C55',\n    '#AF52DE', '#5856D7', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#1FC863', '#929395', '#E4B102',\n    '#000000',\n  ],\n  dark: [\n    '#3AB5CC', '#32D74B', '#FF9F0B', '#FF325A',\n    '#BF5AF2', '#7977FF', '#73AAED', '#FFB07A',\n    '#B76C78', '#9689D1', '#E572CC', '#6BA07A',\n    '#338FCC', '#2CD36F', '#C3C5C6', '#DDBA00',\n    '#FFFFFF',\n  ],\n} as const;\nexport const ACCENT_RADIOACTIVE_INDEX = 13;\nexport const ACCENT_SILVER_INDEX = 14;\nexport const ACCENT_GOLD_INDEX = 15;\nexport const ACCENT_BNW_INDEX = 16;\n","import { type ElementRef, useLayoutEffect } from '../../lib/teact/teact';\nimport { setExtraStyles, toggleExtraClass } from '../../lib/teact/teact-dom';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AppTheme } from '../../global/types';\n\nimport { MAX_WORKERS, requestMediaWorker } from '../launchMediaWorkers';\nimport { logDebugError } from '../logs';\nimport { getCardNftImageUrl } from '../url';\nimport {\n  ACCENT_BNW_INDEX,\n  ACCENT_COLORS,\n  ACCENT_GOLD_INDEX,\n  ACCENT_RADIOACTIVE_INDEX,\n  ACCENT_SILVER_INDEX,\n  COLOR_COUNT,\n  QUALITY,\n} from './constants';\n\nconst HEX_80_PERCENT = 'CC';\nconst HEX_10_PERCENT = '1A';\n\nexport function useAccentColor(\n  elementRefOrBody: ElementRef<HTMLElement> | 'body',\n  appTheme: AppTheme,\n  accentColorIndex: number | undefined,\n) {\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n\n  useLayoutEffect(() => {\n    const element = elementRefOrBody === 'body' ? document.body : elementRefOrBody.current;\n    if (!element) return;\n\n    setExtraStyles(element, {\n      '--color-accent': accentColor || 'inherit',\n      '--color-accent-10o': accentColor ? `${accentColor}${HEX_10_PERCENT}` : 'inherit',\n      '--color-accent-button-background': accentColor || 'inherit',\n      '--color-accent-button-background-hover': accentColor ? `${accentColor}${HEX_80_PERCENT}` : 'inherit',\n      '--color-accent-button-text': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n      '--color-accent-button-text-hover': accentColor === '#FFFFFF' ? '#000000' : 'inherit',\n    });\n\n    toggleExtraClass(document.documentElement, 'is-white-accent', accentColor === '#FFFFFF');\n  }, [elementRefOrBody, accentColor]);\n}\n\nexport async function getAccentColorIndexFromNft(nft: ApiNft) {\n  const { mtwCardType, mtwCardBorderShineType } = nft.metadata;\n\n  if (mtwCardBorderShineType === 'radioactive') {\n    return ACCENT_RADIOACTIVE_INDEX;\n  }\n  if (mtwCardType === 'silver') {\n    return ACCENT_SILVER_INDEX;\n  }\n  if (mtwCardType === 'gold') {\n    return ACCENT_GOLD_INDEX;\n  }\n  if (mtwCardType === 'platinum' || mtwCardType === 'black') {\n    return ACCENT_BNW_INDEX;\n  }\n\n  const src = getCardNftImageUrl(nft);\n  if (!src) return undefined;\n\n  try {\n    return await requestMediaWorker({\n      name: 'offscreen-canvas:processNftImage',\n      args: [src, QUALITY, COLOR_COUNT],\n    }, Math.round(nft.index) % MAX_WORKERS);\n  } catch (error) {\n    logDebugError('getAccentColorIndexFromNft', error);\n    return undefined;\n  }\n}\n","import type { GlobalState } from '../../types';\nimport { MintCardState } from '../../types';\n\nimport { getAccentColorIndexFromNft } from '../../../util/accentColor';\nimport { callActionInMain } from '../../../util/multitab';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../../util/windowEnvironment';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { resetHardware, updateCurrentAccountSettings, updateMintCards } from '../../reducers';\nimport { selectIsHardwareAccount } from '../../selectors';\n\naddActionHandler('openMintCardModal', (global): GlobalState => {\n  return updateMintCards(global, { state: MintCardState.Initial });\n});\n\naddActionHandler('closeMintCardModal', (global): GlobalState => {\n  return { ...global, currentMintCard: undefined };\n});\n\naddActionHandler('startCardMinting', (global, action, { type }): GlobalState => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateMintCards(global, { state: MintCardState.ConnectHardware });\n  } else {\n    global = updateMintCards(global, { state: MintCardState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearMintCardError', (global): GlobalState => {\n  return updateMintCards(global, { error: undefined });\n});\n\naddActionHandler('setCardBackgroundNft', (global, actions, { nft }) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('setCardBackgroundNft', { nft });\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: nft });\n  setGlobal(global);\n});\n\naddActionHandler('clearCardBackgroundNft', (global) => {\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    callActionInMain('clearCardBackgroundNft');\n    return;\n  }\n\n  global = updateCurrentAccountSettings(global, { cardBackgroundNft: undefined });\n  setGlobal(global);\n});\n\naddActionHandler('installAccentColorFromNft', async (global, actions, { nft }) => {\n  const accentColorIndex = await getAccentColorIndexFromNft(nft);\n\n  global = getGlobal();\n  global = updateCurrentAccountSettings(global, {\n    accentColorNft: nft,\n    accentColorIndex,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('clearAccentColorFromNft', (global) => {\n  return updateCurrentAccountSettings(global, {\n    accentColorNft: undefined,\n    accentColorIndex: undefined,\n  });\n});\n","import { DomainLinkingState, DomainRenewalState } from '../../types';\n\nimport { waitFor } from '../../../util/schedulers';\nimport { closeAllOverlays } from '../../helpers/misc';\nimport { addActionHandler, getGlobal, setGlobal } from '../../index';\nimport { INITIAL_STATE } from '../../initialState';\nimport { resetHardware, updateCurrentDomainLinking, updateCurrentDomainRenewal } from '../../reducers';\nimport { selectCurrentAccountState, selectIsHardwareAccount } from '../../selectors';\nimport { switchAccount } from '../api/auth';\n\naddActionHandler('openDomainRenewalModal', async (global, actions, { accountId, network, addresses }) => {\n  if (accountId) {\n    await Promise.all([\n      closeAllOverlays(),\n      switchAccount(global, accountId, network),\n    ]);\n  }\n  // After switching account, wait for nft domains to be fetched\n  if (!(await waitFor(() => Boolean(selectCurrentAccountState(getGlobal())?.nfts?.byAddress), 1000, 30))) {\n    return;\n  }\n\n  global = getGlobal();\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  addresses = (addresses || []).filter((address) => byAddress?.[address]);\n  if (!addresses.length) {\n    return;\n  }\n\n  global = updateCurrentDomainRenewal(global, {\n    state: DomainRenewalState.Initial,\n    addresses,\n  });\n  setGlobal(global);\n});\n\naddActionHandler('startDomainsRenewal', (global) => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDomainRenewal(global, { state: DomainRenewalState.ConnectHardware });\n  } else {\n    global = updateCurrentDomainRenewal(global, { state: DomainRenewalState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearDomainsRenewalError', (global) => {\n  return updateCurrentDomainRenewal(global, {\n    error: undefined,\n  });\n});\n\naddActionHandler('cancelDomainsRenewal', (global) => {\n  return {\n    ...global,\n    currentDomainRenewal: INITIAL_STATE.currentDomainRenewal,\n  };\n});\n\naddActionHandler('openDomainLinkingModal', (global, actions, { address }) => {\n  return updateCurrentDomainLinking(global, {\n    state: DomainLinkingState.Initial,\n    address,\n  });\n});\n\naddActionHandler('startDomainLinking', (global) => {\n  if (selectIsHardwareAccount(global)) {\n    global = resetHardware(global);\n    global = updateCurrentDomainLinking(global, { state: DomainLinkingState.ConnectHardware });\n  } else {\n    global = updateCurrentDomainLinking(global, { state: DomainLinkingState.Password });\n  }\n\n  return global;\n});\n\naddActionHandler('clearDomainLinkingError', (global) => {\n  return updateCurrentDomainLinking(global, {\n    error: undefined,\n  });\n});\n\naddActionHandler('cancelDomainLinking', (global) => {\n  return {\n    ...global,\n    currentDomainLinking: INITIAL_STATE.currentDomainLinking,\n  };\n});\n\naddActionHandler('setDomainLinkingWalletAddress', (global, actions, { address }) => {\n  return updateCurrentDomainLinking(global, { walletAddress: address });\n});\n","import { getIsHeavyAnimating, onFullyIdle } from '../lib/teact/teact';\nimport { addCallback, removeCallback } from '../lib/teact/teactn';\n\nimport type { ApiActivity } from '../api/types';\nimport type {\n  AccountState,\n  GlobalState,\n  SavedAddress,\n  TokenPeriod,\n} from './types';\nimport {\n  StakingState,\n} from './types';\n\nimport {\n  DEBUG,\n  GLOBAL_STATE_CACHE_DISABLED,\n  GLOBAL_STATE_CACHE_KEY,\n  IS_CAPACITOR,\n  MAIN_ACCOUNT_ID,\n  TOKEN_INFO,\n  TONCOIN,\n} from '../config';\nimport { buildAccountId, parseAccountId } from '../util/account';\nimport { getActivityTokenSlugs, getIsActivityPending, getIsTxIdLocal } from '../util/activities';\nimport { bigintReviver } from '../util/bigint';\nimport isEmptyObject from '../util/isEmptyObject';\nimport {\n  cloneDeep, extractKey, filterValues, mapValues, pick, pickTruthy,\n} from '../util/iteratees';\nimport { clearPoisoningCache, updatePoisoningCache } from '../util/poisoningHash';\nimport { onBeforeUnload, throttle } from '../util/schedulers';\nimport { getIsActiveStakingState } from '../util/staking';\nimport { IS_ELECTRON } from '../util/windowEnvironment';\nimport { addActionHandler, getGlobal } from './index';\nimport { INITIAL_STATE, STATE_VERSION } from './initialState';\nimport { selectAccountState, selectAccountTokens } from './selectors';\n\nconst UPDATE_THROTTLE = IS_CAPACITOR ? 500 : 5000;\nconst ACTIVITIES_LIMIT = 20;\nconst ACTIVITY_TOKENS_LIMIT = 30;\nconst STAKING_HISTORY_LIMIT = 30;\n\nconst updateCacheThrottled = throttle(() => onFullyIdle(() => updateCache()), UPDATE_THROTTLE, false);\nconst updateCacheForced = () => updateCache(true);\n\nlet isCaching = false;\nlet unsubscribeFromBeforeUnload: NoneToVoidFunction | undefined;\nlet preloadedData: Partial<GlobalState> | undefined;\n\nexport function initCache() {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return;\n  }\n\n  addActionHandler('afterSignIn', setupCaching);\n\n  addActionHandler('afterSignOut', (global, actions, payload) => {\n    clearPoisoningCache();\n\n    if (payload?.shouldReset) {\n      preloadedData = pick(global, ['swapTokenInfo', 'tokenInfo', 'restrictions']);\n      clearCaching();\n      localStorage.removeItem(GLOBAL_STATE_CACHE_KEY);\n    }\n  });\n\n  addActionHandler('cancelCaching', clearCaching);\n}\n\nfunction setupCaching() {\n  if (isCaching) return;\n\n  isCaching = true;\n\n  addCallback(updateCacheThrottled);\n  unsubscribeFromBeforeUnload = onBeforeUnload(updateCacheForced, true);\n  window.addEventListener('blur', updateCacheForced);\n\n  updateCacheForced();\n}\n\nfunction clearCaching() {\n  if (!isCaching) return;\n\n  window.removeEventListener('blur', updateCacheForced);\n  unsubscribeFromBeforeUnload?.();\n  removeCallback(updateCacheThrottled);\n\n  isCaching = false;\n}\n\nexport function loadCache(initialState: GlobalState): GlobalState {\n  if (GLOBAL_STATE_CACHE_DISABLED) {\n    return initialState;\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.time('global-state-cache-read');\n  }\n\n  const json = localStorage.getItem(GLOBAL_STATE_CACHE_KEY);\n  let cached = json ? JSON.parse(json, bigintReviver) as GlobalState : undefined;\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.timeEnd('global-state-cache-read');\n  }\n\n  if (cached) {\n    try {\n      migrateCache(cached, initialState);\n      loadMemoryCache(cached);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err);\n\n      cached = undefined;\n    }\n  }\n\n  return {\n    ...initialState,\n    ...preloadedData,\n    ...cached,\n  };\n}\n\nfunction migrateCache(cached: GlobalState, initialState: GlobalState) {\n  // Pre-fill settings with defaults\n  cached.settings = {\n    ...initialState.settings,\n    ...cached.settings,\n  };\n\n  if (cached.stateVersion === STATE_VERSION) {\n    return;\n  }\n\n  // Migration to multi-accounts\n  if (!cached.byAccountId) {\n    (cached as any).accounts = {\n      byId: {\n        [MAIN_ACCOUNT_ID]: {\n          address: (cached as any).addresses.byAccountId[MAIN_ACCOUNT_ID],\n          title: 'Main Account',\n        },\n      },\n    };\n\n    delete (cached as any).addresses;\n\n    cached.byAccountId = {};\n    cached.byAccountId[MAIN_ACCOUNT_ID] = {\n      isBackupRequired: Boolean((cached as any).isBackupRequired),\n      currentTokenSlug: (cached as any).currentTokenSlug as string,\n      currentTokenPeriod: (cached as any).currentTokenPeriod as TokenPeriod,\n    };\n\n    if ('balances' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].balances = (cached as any).balances.byAccountId[MAIN_ACCOUNT_ID];\n      delete (cached as any).balances;\n    }\n\n    if ('transactions' in cached) {\n      (cached.byAccountId[MAIN_ACCOUNT_ID] as any).transactions = (cached as any).transactions;\n      delete (cached as any).transactions;\n    }\n\n    if ('nfts' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].nfts = (cached as any).nfts;\n      delete (cached as any).nfts;\n    }\n\n    if ('savedAddresses' in cached) {\n      cached.byAccountId[MAIN_ACCOUNT_ID].savedAddresses = (cached as any).savedAddresses;\n      delete (cached as any).savedAddresses;\n    }\n\n    if ('backupWallet' in cached) {\n      delete (cached as any).backupWallet;\n    }\n  }\n\n  if (\n    (!cached.currentAccountId || !cached.byAccountId[cached.currentAccountId]) && Object.keys(cached.byAccountId).length\n  ) {\n    cached.currentAccountId = Object.keys(cached.byAccountId)[0];\n  }\n\n  // Initializing the v1\n  if (!cached.stateVersion && cached.accounts && !isEmptyObject(cached.accounts)) {\n    cached.stateVersion = 1;\n  }\n\n  if (cached.stateVersion === 1) {\n    cached.stateVersion = 2;\n\n    if (cached.tokenInfo?.bySlug) {\n      cached.tokenInfo.bySlug = {\n        toncoin: {\n          ...cached.tokenInfo.bySlug.toncoin,\n          decimals: TONCOIN.decimals,\n        },\n      };\n    }\n\n    if (cached.byAccountId) {\n      Object.values(cached.byAccountId).forEach((accountState) => {\n        if (accountState.balances?.bySlug) {\n          accountState.balances.bySlug = pick(accountState.balances.bySlug, ['toncoin']);\n        }\n        if ((accountState as any).transactions) {\n          delete (accountState as any).transactions;\n        }\n      });\n    }\n  }\n\n  if (cached.stateVersion === 2) {\n    cached.stateVersion = 3;\n\n    // Normalization of MAIN_ACCOUNT_ID '0' => '0-ton-mainnet'\n    const oldId = '0';\n    const newId = MAIN_ACCOUNT_ID;\n    if (cached.accounts && oldId in cached.accounts.byId) {\n      if (cached.currentAccountId === oldId) {\n        cached.currentAccountId = newId;\n      }\n      cached.accounts.byId[newId] = cached.accounts.byId[oldId];\n      delete cached.accounts.byId[oldId];\n      cached.byAccountId[newId] = cached.byAccountId[oldId];\n      delete cached.byAccountId[oldId];\n    }\n\n    // Add testnet accounts\n    if (cached.accounts) {\n      for (const accountId of Object.keys(cached.accounts.byId)) {\n        const testnetAccountId = buildAccountId({\n          ...parseAccountId(accountId),\n          network: 'testnet',\n        });\n        cached.accounts.byId[testnetAccountId] = cloneDeep(cached.accounts.byId[accountId]);\n        cached.byAccountId[testnetAccountId] = {};\n      }\n    }\n  }\n\n  if (cached.stateVersion === 3) {\n    cached.stateVersion = 4;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 4) {\n    cached.stateVersion = 5;\n\n    (cached as any).staking = {\n      state: StakingState.None,\n    };\n  }\n\n  if (cached.stateVersion === 5) {\n    cached.stateVersion = 6;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 6) {\n    cached.stateVersion = 7;\n\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).transactions;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 7) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).backupWallet;\n      }\n    }\n\n    cached.stateVersion = 8;\n  }\n\n  if (cached.stateVersion === 8) {\n    if (cached.settings && IS_ELECTRON) {\n      cached.settings.isDeeplinkHookEnabled = true;\n    }\n\n    cached.stateVersion = 9;\n  }\n\n  function clearActivities() {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete (cached.byAccountId[accountId] as any).activities;\n      }\n    }\n  }\n\n  if (cached.stateVersion === 9) {\n    clearActivities();\n    cached.stateVersion = 10;\n  }\n\n  if (cached.stateVersion === 10) {\n    if ((cached.settings as any).areTokensWithNoBalanceHidden === undefined) {\n      (cached.settings as any).areTokensWithNoBalanceHidden = true;\n    }\n    cached.stateVersion = 11;\n  }\n\n  if (cached.stateVersion === 11) {\n    clearActivities();\n    cached.stateVersion = 12;\n  }\n\n  if (cached.stateVersion === 12) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        delete cached.byAccountId[accountId].activities;\n\n        const { balances } = cached.byAccountId[accountId];\n        if (balances) {\n          balances.bySlug = Object.entries(balances.bySlug).reduce((acc, [slug, balance]) => {\n            acc[slug] = BigInt(balance);\n            return acc;\n          }, {} as Record<string, bigint>);\n        }\n      }\n    }\n    cached.stateVersion = 13;\n  }\n\n  if (cached.stateVersion === 13) {\n    const { areTokensWithNoPriceHidden, areTokensWithNoBalanceHidden } = cached.settings as any as {\n      areTokensWithNoPriceHidden?: boolean;\n      areTokensWithNoBalanceHidden?: boolean;\n    };\n\n    cached.settings.areTokensWithNoCostHidden = Boolean(areTokensWithNoPriceHidden || areTokensWithNoBalanceHidden);\n    cached.stateVersion = 14;\n  }\n\n  if (cached.stateVersion >= 14 && cached.stateVersion <= 17) {\n    clearActivities();\n    cached.stateVersion = 18;\n  }\n\n  if (cached.stateVersion === 18 || cached.stateVersion === 19) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      cached.byAccountId[accountId].currentTokenPeriod = '1D';\n    }\n    cached.stateVersion = 20;\n  }\n\n  if (cached.stateVersion >= 20 && cached.stateVersion <= 22) {\n    clearActivities();\n    cached.stateVersion = 23;\n  }\n\n  if (cached.stateVersion === 23) {\n    if (!('isSortByValueEnabled' in cached.settings)) {\n      cached.settings.isSortByValueEnabled = initialState.settings.isSortByValueEnabled;\n    }\n    cached.stateVersion = 24;\n  }\n\n  if (cached.stateVersion === 24) {\n    if (cached.accounts) {\n      clearActivities();\n      for (const account of Object.values(cached.accounts.byId)) {\n        account.addressByChain = { ton: (account as any).address } as any;\n        delete (account as any).address;\n      }\n    }\n    cached.stateVersion = 25;\n  }\n\n  if (cached.stateVersion === 25) {\n    if (cached.byAccountId) {\n      for (const accountId of Object.keys(cached.byAccountId)) {\n        const savedAddresses = cached.byAccountId[accountId].savedAddresses;\n        if (savedAddresses && !('length' in savedAddresses)) {\n          cached.byAccountId[accountId].savedAddresses = Object.keys(savedAddresses as Record<string, string>)\n            .map((address) => ({\n              name: savedAddresses[address],\n              address,\n              chain: 'ton',\n            } as SavedAddress));\n        }\n      }\n    }\n    cached.stateVersion = 26;\n  }\n\n  if (cached.stateVersion === 26) {\n    clearActivities();\n    cached.stateVersion = 27;\n  }\n\n  if (cached.stateVersion === 27) {\n    delete (cached.settings as any).dapps;\n    cached.stateVersion = 28;\n  }\n\n  if (cached.stateVersion === 28) {\n    const accountIds = Object.keys(cached.settings.byAccountId);\n    for (const accountId of accountIds) {\n      const exceptionSlugs = (cached.settings.byAccountId[accountId] as any).exceptionSlugs as string[] | undefined;\n      if (cached.settings.areTokensWithNoCostHidden) {\n        cached.settings.byAccountId[accountId].alwaysShownSlugs = exceptionSlugs;\n      } else {\n        cached.settings.byAccountId[accountId].alwaysHiddenSlugs = exceptionSlugs;\n      }\n    }\n    cached.stateVersion = 29;\n  }\n\n  if (cached.stateVersion === 29) {\n    cached.currentTransfer.tokenSlug = TONCOIN.slug;\n    cached.stateVersion = 30;\n  }\n\n  if (cached.stateVersion === 30) {\n    clearActivities();\n    cached.stateVersion = 31;\n  }\n\n  if (cached.stateVersion === 31) {\n    if (cached.settings.autolockValue && cached.settings.autolockValue !== 'never') {\n      cached.settings.isAppLockEnabled = true;\n    }\n    cached.stateVersion = 32;\n  }\n\n  if (cached.stateVersion >= 32 && cached.stateVersion <= 35) {\n    clearActivities();\n    cached.stateVersion = 36;\n  }\n\n  if (cached.stateVersion === 36) {\n    for (const account of Object.values(cached.accounts?.byId ?? {})) {\n      account.type = (account as { isHardware?: boolean }).isHardware ? 'hardware' : 'mnemonic';\n      delete (account as { isHardware?: boolean }).isHardware;\n    }\n    cached.stateVersion = 37;\n  }\n\n  if (cached.stateVersion === 37) {\n    for (const token of Object.values(cached.tokenInfo.bySlug) as any[]) {\n      if (!token.price) token.price = 0;\n      if (!token.percentChange24h) token.percentChange24h = 0;\n      if (!token.priceUsd) token.priceUsd = 0;\n      if (token.quote) delete token.quote;\n    }\n    cached.stateVersion = 38;\n  }\n\n  if (cached.stateVersion >= 38 && cached.stateVersion <= 41) {\n    clearActivities();\n    cached.stateVersion = 42;\n  }\n\n  if (cached.stateVersion === 41) {\n    for (const accountId of Object.keys(cached.byAccountId)) {\n      const accountState = cached.byAccountId[accountId];\n      if ((accountState as any).dappLastOpenedDatesByOrigin) {\n        accountState.dappLastOpenedDatesByUrl = (accountState as any).dappLastOpenedDatesByOrigin;\n        delete (accountState as any).dappLastOpenedDatesByOrigin;\n      }\n    }\n    cached.stateVersion = 42;\n  }\n\n  if (cached.stateVersion === 42) {\n    clearActivities();\n    cached.stateVersion = 43;\n  }\n\n  // When adding migration here, increase `STATE_VERSION`\n}\n\nfunction loadMemoryCache(cached: GlobalState) {\n  if (!cached.currentAccountId) return;\n\n  const { byId, newestActivitiesBySlug } = cached.byAccountId[cached.currentAccountId].activities || {};\n\n  if (byId) {\n    Object.values(byId).forEach((tx) => {\n      if (tx.kind === 'transaction' && tx.isIncoming) {\n        updatePoisoningCache(tx);\n      }\n    });\n  }\n\n  if (newestActivitiesBySlug) {\n    Object.values(newestActivitiesBySlug).forEach((activity) => {\n      if (activity.kind === 'transaction' && activity.isIncoming) {\n        updatePoisoningCache(activity);\n      }\n    });\n  }\n}\n\nconst getUsedTokenSlugs = (reducedGlobal: GlobalState): string[] => {\n  const usedTokenSlugs = new Set<string>(Object.keys(TOKEN_INFO));\n\n  if (reducedGlobal.currentAccountId) {\n    const currentTokenSlug = reducedGlobal.byAccountId[reducedGlobal.currentAccountId]?.currentTokenSlug;\n    if (currentTokenSlug) {\n      usedTokenSlugs.add(currentTokenSlug);\n    }\n  }\n\n  Object.values(reducedGlobal.byAccountId).forEach((state) => {\n    const { balances, activities, staking } = state;\n\n    Object.keys(balances?.bySlug ?? {}).forEach((slug) => usedTokenSlugs.add(slug));\n    Object.keys(activities?.byId ?? {}).forEach((transactionId) => {\n      getActivityTokenSlugs(activities!.byId[transactionId]).forEach((slug) => usedTokenSlugs.add(slug));\n    });\n    Object.keys(activities?.idsBySlug ?? {}).forEach((slug) => usedTokenSlugs.add(slug));\n    Object.keys(staking?.stateById ?? {}).forEach((id) => {\n      usedTokenSlugs.add(staking!.stateById![id].tokenSlug);\n    });\n  });\n\n  return Array.from(usedTokenSlugs);\n};\n\nfunction getAccountTokenSlugs(global: GlobalState, accountId: string) {\n  const { currentTokenSlug } = selectAccountState(global, accountId) ?? {};\n  const tokenSlugs = extractKey(selectAccountTokens(global, accountId) ?? [], 'slug')\n    .slice(0, ACTIVITY_TOKENS_LIMIT);\n\n  if (!tokenSlugs.includes(TONCOIN.slug)) {\n    tokenSlugs.push(TONCOIN.slug);\n  }\n\n  if (currentTokenSlug && !tokenSlugs.includes(currentTokenSlug)) {\n    tokenSlugs.push(currentTokenSlug);\n  }\n\n  return tokenSlugs;\n}\n\nfunction updateCache(force?: boolean) {\n  if (GLOBAL_STATE_CACHE_DISABLED || !isCaching || (!force && getIsHeavyAnimating())) {\n    return;\n  }\n\n  const global = getGlobal();\n\n  const accountsById = global.accounts?.byId || {};\n  const reducedGlobal: GlobalState = {\n    ...INITIAL_STATE,\n    ...pick(global, [\n      'currentAccountId',\n      'stateVersion',\n      'restrictions',\n      'pushNotifications',\n      'isFullscreen',\n      'isManualLockActive',\n      'stakingDefault',\n    ]),\n    accounts: {\n      byId: accountsById,\n    },\n    byAccountId: reduceByAccountId(global),\n    settings: {\n      ...global.settings,\n      byAccountId: pick(global.settings.byAccountId, Object.keys(accountsById)),\n    },\n  };\n\n  const usedTokenSlugs = getUsedTokenSlugs(reducedGlobal);\n\n  reducedGlobal.tokenInfo = {\n    bySlug: pickTruthy(global.tokenInfo.bySlug, usedTokenSlugs),\n  };\n\n  const json = JSON.stringify(reducedGlobal);\n  localStorage.setItem(GLOBAL_STATE_CACHE_KEY, json);\n}\n\nfunction reduceByAccountId(global: GlobalState) {\n  return Object.entries(global.byAccountId).reduce((acc, [accountId, state]) => {\n    if (!global.accounts?.byId[accountId]) {\n      return acc;\n    }\n\n    acc[accountId] = pick(state, [\n      'isBackupRequired',\n      'currentTokenSlug',\n      'currentTokenPeriod',\n      'savedAddresses',\n      'staking',\n      'activeContentTab',\n      'landscapeActionsActiveTabIndex',\n      'browserHistory',\n      'blacklistedNftAddresses',\n      'whitelistedNftAddresses',\n      'dappLastOpenedDatesByUrl',\n      'dapps',\n    ]);\n\n    if (state.nfts?.collectionTabs) {\n      acc[accountId].nfts = {\n        collectionTabs: state.nfts.collectionTabs,\n        wasTelegramGiftsAutoAdded: state.nfts.wasTelegramGiftsAutoAdded,\n      };\n    }\n\n    const accountTokenSlugs = getAccountTokenSlugs(global, accountId);\n    acc[accountId].balances = reduceAccountBalances(state.balances, accountTokenSlugs);\n    acc[accountId].activities = reduceAccountActivities(state.activities, accountTokenSlugs);\n    acc[accountId].staking = reduceAccountStaking(state.staking);\n    acc[accountId].stakingHistory = state.stakingHistory?.length\n      ? state.stakingHistory.slice(0, STAKING_HISTORY_LIMIT)\n      : undefined;\n\n    return acc;\n  }, {} as GlobalState['byAccountId']);\n}\n\nfunction reduceAccountBalances(balances?: AccountState['balances'], tokenSlugs?: string[]) {\n  if (!balances?.bySlug || !tokenSlugs) return balances;\n\n  return {\n    ...balances,\n    bySlug: pick(balances.bySlug, tokenSlugs),\n  };\n}\n\nfunction reduceAccountActivities(activities?: AccountState['activities'], tokenSlugs?: string[]) {\n  const {\n    idsBySlug, newestActivitiesBySlug, byId, idsMain,\n  } = activities || {};\n  if (!tokenSlugs || !idsBySlug || !byId || !idsMain) return undefined;\n\n  const reducedIdsMain = pickVisibleActivities(idsMain, byId);\n  const reducedIdsBySlug = mapValues(pickTruthy(idsBySlug, tokenSlugs), (ids) => pickVisibleActivities(ids, byId));\n\n  const reducedNewestActivitiesBySlug = newestActivitiesBySlug\n    ? pick(newestActivitiesBySlug, tokenSlugs)\n    : undefined;\n\n  const reducedIds = Object.values(reducedIdsBySlug).concat(reducedIdsMain).flat();\n  const reducedById = pick(byId, reducedIds);\n\n  return {\n    byId: reducedById,\n    idsMain: reducedIdsMain,\n    idsBySlug: reducedIdsBySlug,\n    newestActivitiesBySlug: reducedNewestActivitiesBySlug,\n  };\n}\n\nfunction reduceAccountStaking(staking?: AccountState['staking']) {\n  let { stakingId, stateById } = staking ?? {};\n\n  if (stateById && !isEmptyObject(stateById)) {\n    stateById = filterValues(stateById, getIsActiveStakingState);\n\n    if (!stakingId || !(stakingId in stateById)) {\n      stakingId = Object.values(stateById)[0]?.id;\n    }\n  }\n\n  return {\n    ...staking,\n    stateById,\n    stakingId,\n  };\n}\n\nfunction pickVisibleActivities(ids: string[], byId: Record<string, ApiActivity>) {\n  const result: string[] = [];\n\n  let visibleIdCount = 0;\n\n  ids\n    .filter((id) => shouldCacheActivity(id, byId))\n    .forEach((id) => {\n      if (visibleIdCount === ACTIVITIES_LIMIT) return;\n\n      if (!byId[id].shouldHide) {\n        visibleIdCount += 1;\n      }\n\n      result.push(id);\n    });\n\n  return result;\n}\n\nfunction shouldCacheActivity(id: string, byId: Record<string, ApiActivity>) {\n  const activity = byId[id];\n  return activity\n    && !getIsTxIdLocal(id)\n    && !getIsActivityPending(activity);\n}\n","import { cloneDeep } from '../util/iteratees';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_LEDGER_EXTENSION_TAB } from '../util/windowEnvironment';\nimport { initCache, loadCache } from './cache';\nimport { addActionHandler } from './index';\nimport { INITIAL_STATE } from './initialState';\nimport { selectHasSession } from './selectors';\n\nif (!IS_DELEGATED_BOTTOM_SHEET) {\n  initCache();\n}\n\naddActionHandler('init', (_, actions) => {\n  const initial = cloneDeep(INITIAL_STATE);\n\n  const global = loadCache(initial);\n\n  if (IS_DELEGATED_BOTTOM_SHEET) {\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (IS_LEDGER_EXTENSION_TAB) {\n    actions.initLedgerPage();\n    return {\n      ...initial,\n      settings: {\n        ...initial.settings,\n        theme: global.settings.theme,\n      },\n    };\n  }\n\n  if (selectHasSession(global)) {\n    actions.afterSignIn();\n  }\n\n  return global;\n});\n","import { BIGINT_PREFIX } from './bigint';\n\n// Fixes serialization of objects containing `bigint` values.\n// Extracted to a separate file to avoid leaking into Extension Page Script.\n// @ts-ignore\nBigInt.prototype.toJSON = function toJSON() {\n  return `${BIGINT_PREFIX}${this.toString()}`;\n};\n","import { animate } from './animation';\nimport { fastRaf } from './schedulers';\nimport { IS_IOS } from './windowEnvironment';\n\nconst TEST_INTERVAL = 5000; // 5 sec\nconst FRAMES_TO_TEST = 10;\nconst REDUCED_FPS = 35;\n\nlet isImproved = false;\n\nexport function betterView() {\n  if (!IS_IOS) return;\n\n  let interval: number | undefined;\n  let lastFocusAt = Date.now();\n\n  function setupInterval() {\n    if (interval || isImproved) return;\n\n    interval = window.setInterval(testAndImprove, TEST_INTERVAL);\n  }\n\n  window.addEventListener('focus', () => {\n    const now = Date.now();\n    if (now - lastFocusAt < 100) return; // iOS triggers two `focus` events for some reason\n    lastFocusAt = now;\n\n    setupInterval();\n    void testAndImprove();\n  });\n\n  window.addEventListener('blur', () => {\n    clearInterval(interval);\n    interval = undefined;\n  });\n\n  if (document.hasFocus()) {\n    setupInterval();\n    void testAndImprove();\n  }\n}\n\nasync function testAndImprove() {\n  const fps = await testFps();\n  if (fps <= REDUCED_FPS) {\n    improveView();\n  }\n}\n\nfunction testFps() {\n  return new Promise<number>((resolve) => {\n    const frames: number[] = [];\n    let lastFrameAt = performance.now();\n\n    animate(() => {\n      const now = performance.now();\n      frames.push(now - lastFrameAt);\n      lastFrameAt = now;\n\n      if (frames.length === FRAMES_TO_TEST) {\n        const mean = frames.sort()[Math.floor(frames.length / 2)];\n        resolve(Math.round(1000 / mean));\n        return false;\n      }\n\n      return true;\n    }, fastRaf);\n  });\n}\n\nfunction improveView() {\n  isImproved = true;\n\n  const containerEl = document.createElement('div');\n  containerEl.style.cssText = 'position: absolute; top: 0; left: 0; width: 0; height: 100%; overflow: hidden;';\n\n  const boosterEl = document.createElement('div');\n  const height = window.screen.height * 1.5;\n  boosterEl.style.cssText = `width: 0; height: ${height}px; transform: translateX(100%); transition: transform 100ms;`;\n  boosterEl.innerHTML = '&nbsp;';\n\n  containerEl.appendChild(boosterEl);\n  document.body.appendChild(containerEl);\n\n  requestAnimationFrame(() => {\n    boosterEl.addEventListener('transitionend', () => {\n      containerEl.remove();\n    });\n\n    boosterEl.style.transform = '';\n  });\n}\n","import type { AppLayout } from '../global/types';\n\nexport enum ElectronEvent {\n  DEEPLINK = 'deeplink',\n  UPDATE_ERROR = 'update-error',\n  UPDATE_DOWNLOADED = 'update-downloaded',\n}\n\nexport enum ElectronAction {\n  CLOSE = 'close',\n  MINIMIZE = 'minimize',\n  MAXIMIZE = 'maximize',\n  UNMAXIMIZE = 'unmaximize',\n  GET_IS_MAXIMIZED = 'get-is-maximized',\n\n  INSTALL_UPDATE = 'install-update',\n  HANDLE_DOUBLE_CLICK = 'handle-double-click',\n\n  TOGGLE_DEEPLINK_HANDLER = 'toggle-deeplink-handler',\n\n  GET_IS_TOUCH_ID_SUPPORTED = 'get-is-touch-id-supported',\n  ENCRYPT_PASSWORD = 'encrypt-password',\n  DECRYPT_PASSWORD = 'decrypt-password',\n\n  SET_IS_TRAY_ICON_ENABLED = 'set-is-tray-icon-enabled',\n  GET_IS_TRAY_ICON_ENABLED = 'get-is-tray-icon-enabled',\n  SET_IS_AUTO_UPDATE_ENABLED = 'set-is-auto-update-enabled',\n  GET_IS_AUTO_UPDATE_ENABLED = 'get-is-auto-update-enabled',\n  CHANGE_APP_LAYOUT = 'change-app-layout',\n\n  RESTORE_STORAGE = 'restore-storage',\n}\n\nexport interface ElectronApi {\n  close: VoidFunction;\n  minimize: VoidFunction;\n  maximize: VoidFunction;\n  unmaximize: VoidFunction;\n  getIsMaximized: () => Promise<boolean>;\n\n  installUpdate: () => Promise<void>;\n  handleDoubleClick: () => Promise<void>;\n\n  toggleDeeplinkHandler: (isEnabled: boolean) => Promise<void>;\n\n  getIsTouchIdSupported: () => Promise<boolean>;\n  encryptPassword: (password: string) => Promise<string>;\n  decryptPassword: (encrypted: string) => Promise<string | undefined>;\n\n  setIsTrayIconEnabled: (value: boolean) => Promise<void>;\n  getIsTrayIconEnabled: () => Promise<boolean>;\n  setIsAutoUpdateEnabled: (value: boolean) => Promise<void>;\n  getIsAutoUpdateEnabled: () => Promise<boolean>;\n  changeAppLayout: (layout: AppLayout) => Promise<void>;\n\n  restoreStorage: () => Promise<void>;\n\n  on: (eventName: ElectronEvent, callback: any) => VoidFunction;\n}\n\ndeclare global {\n  interface Window {\n    electron?: ElectronApi;\n  }\n}\n","import { IS_CAPACITOR, IS_TELEGRAM_APP } from '../config';\nimport { requestMeasure, requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_ANDROID, IS_IOS } from './windowEnvironment';\nimport { onVirtualKeyboardOpen } from './windowSize';\n\nconst focusScroller = createFocusScroller();\n\nfunction isFocusable(element: Element): boolean {\n  const tagName = element.tagName.toLowerCase();\n  return tagName === 'input'\n    || tagName === 'textarea'\n    || tagName === 'select'\n    || element.hasAttribute('contenteditable');\n}\n\n/**\n * Implements a custom scroll behavior on input focus. Designed for Capacitor platforms only. Meets the following goals:\n * - Allow to customize where to scroll the focused element to (via the `data-focus-scroll-position` HTML attribute).\n * - Scroll to show the focused element if it's behind by the virtual keyboard at the moment when it opens.\n * - Scroll to the focused element smoothly whenever possible.\n *\n * Warning: this functions requires the @capacitor/keyboard plugin to be activated. It also relies on a\n * `scroll-behavior: smooth;` style set in scrollable elements to implement smooth scrolling depending on the animation\n * preferences.\n */\nexport function initFocusScrollController() {\n  if (IS_CAPACITOR) {\n    initForCapacitor();\n  } else if ((IS_IOS || IS_ANDROID) && window.visualViewport) {\n    initForVisualViewport();\n  }\n}\n\nfunction initForCapacitor() {\n  // `scrollToActiveElement` shouldn't be called in `keyboardWillShow` because the <body> size won't be patched yet, so\n  // if the focused input at the bottom of the scrollable element, it won't be scrolled to.\n  // `keyboardWillShow` could be used if the screen scroll height increased (instead of decreasing the <body> height).\n  // Note: on iOS `onVirtualKeyboardOpen` calls the callback on every focus (it doesn't affect the scroll behavior).\n  onVirtualKeyboardOpen(() => {\n    // The manual focus scroller is activated only when the virtual keyboard is open it order to avoid a scroll when the\n    // keyboard starts opening (it would scroll the 2nd time when the keyboard has opened).\n    // This has a side effect of keeping the natural scroll behavior when a hardware keyboard is used (it's ok).\n    focusScroller.install();\n    scrollToActiveElement();\n  });\n\n  void import('@capacitor/keyboard').then(({ Keyboard }) => {\n    void Keyboard.addListener('keyboardWillHide', focusScroller.uninstall);\n  });\n}\n\nfunction initForVisualViewport() {\n  const { visualViewport } = window;\n  let viewportHeight = visualViewport!.height;\n\n  function handleViewportResize() {\n    const newHeight = visualViewport!.height;\n    const activeElement = document.activeElement;\n\n    // If the viewport height has decreased (the keyboard has opened) and the active element is focusable,\n    // we activate the scroller and scroll to the element\n    if (newHeight < viewportHeight && activeElement && isFocusable(activeElement)) {\n      focusScroller.install();\n      scrollToActiveElement();\n    } else if (newHeight > viewportHeight) {\n      // If the viewport height has increased (the keyboard has closed), we deactivate the scroller\n      focusScroller.uninstall();\n    }\n\n    // The viewport height is updated for the next comparison\n    viewportHeight = newHeight;\n  }\n\n  // In the TMA application on iOS, the VisualViewport behaves incorrectly,\n  // not taking into account the height of the virtual keyboard. Therefore,\n  // the height compensation is performed first (see the `windowSize` file),\n  // and then the `handleViewportResize` processing should be executed.\n  function delayedViewportResizeHandler() {\n    requestMutation(() => {\n      requestMeasure(handleViewportResize);\n    });\n  }\n\n  visualViewport!.addEventListener(\n    'resize',\n    IS_IOS && IS_TELEGRAM_APP ? delayedViewportResizeHandler : handleViewportResize,\n  );\n}\n\nfunction createFocusScroller() {\n  let originalFocus: HTMLElement['focus'] | undefined;\n  let isProgrammaticFocus = false;\n\n  // Prevents native scroll for all `focus()` calls, because if the element is outside the viewport, `focus()` scrolls\n  // the screen instantly to place the element in the middle (we don't want that).\n  const patchedFocus: HTMLElement['focus'] = function focus(this: HTMLElement, options) {\n    isProgrammaticFocus = true;\n    // Does not work on Android, because it doesn't support `preventScroll`\n    originalFocus?.call(this, { ...options, preventScroll: true });\n  };\n\n  const handleFocus = () => {\n    // Because Android doesn't support `preventScroll`, we make the scroll instant to prevent excessive back-and-forth\n    // scrolls. Doing it only for programmatic `focus` calls allows to have smooth scrolling when the user focuses the\n    // input by tapping it while the keyboard is open.\n    scrollToActiveElement(IS_ANDROID && isProgrammaticFocus);\n    isProgrammaticFocus = false;\n  };\n\n  return {\n    install() {\n      if (originalFocus) {\n        return; // This branch is reached when the scroller is already installed\n      }\n\n      originalFocus = HTMLElement.prototype.focus;\n      HTMLElement.prototype.focus = patchedFocus;\n\n      window.addEventListener('focusin', handleFocus);\n    },\n    uninstall() {\n      if (!originalFocus) {\n        return; // This branch is reached when the scroller is already uninstalled\n      }\n\n      HTMLElement.prototype.focus = originalFocus;\n      originalFocus = undefined;\n\n      window.removeEventListener('focusin', handleFocus);\n    },\n  };\n}\n\nfunction scrollToActiveElement(enforceInstantScroll?: boolean) {\n  const scrollTarget = document.activeElement;\n  if (!scrollTarget) {\n    return;\n  }\n  const scrollPosition = scrollTarget.dataset.focusScrollPosition ?? 'nearest';\n  requestMeasure(() => {\n    scrollTarget.scrollIntoView({\n      block: scrollPosition,\n      behavior: enforceInstantScroll ? 'instant' : 'auto',\n    });\n  });\n}\n","import { ACTIVE_TAB_STORAGE_KEY, IS_TELEGRAM_APP } from '../config';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_LEDGER_EXTENSION_TAB,\n} from './windowEnvironment';\n\nconst IS_DISABLED = IS_LEDGER_EXTENSION_TAB || IS_DELEGATED_BOTTOM_SHEET || IS_ELECTRON || IS_TELEGRAM_APP;\n\nconst INTERVAL = 2000;\n\nconst tabKey = String(Date.now() + Math.random());\n\nif (!IS_DISABLED) {\n  localStorage.setItem(ACTIVE_TAB_STORAGE_KEY, tabKey);\n}\n\nlet callback: NoneToVoidFunction;\n\nconst interval = window.setInterval(() => {\n  if (!IS_DISABLED && callback && localStorage.getItem(ACTIVE_TAB_STORAGE_KEY) !== tabKey) {\n    callback();\n    clearInterval(interval);\n  }\n}, INTERVAL);\n\nexport function setActiveTabChangeListener(_callback: NoneToVoidFunction) {\n  callback = _callback;\n}\n","import { registerPlugin } from '@capacitor/core';\nconst Filesystem = registerPlugin('Filesystem', {\n    web: () => import('./web').then(m => new m.FilesystemWeb()),\n});\nexport * from './definitions';\nexport { Filesystem };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst Share = registerPlugin('Share', {\n    web: () => import('./web').then(m => new m.ShareWeb()),\n});\nexport * from './definitions';\nexport { Share };\n//# sourceMappingURL=index.js.map","// The file is about sending data using the OS social sharing UI\n\nimport { Directory, Encoding, Filesystem } from '@capacitor/filesystem';\nimport type { ShareOptions } from '@capacitor/share';\nimport { Share } from '@capacitor/share';\nimport { getActions } from '../global';\n\nimport { IS_CAPACITOR } from '../config';\nimport { copyTextToClipboard } from './clipboard';\nimport { getTranslation } from './langProvider';\nimport { IS_IOS, IS_TOUCH_ENV } from './windowEnvironment';\n\nexport async function shareUrl(url: string, title?: string) {\n  const shareData = { url, title };\n\n  if (await tryCapacitorShare(shareData) || await tryNavigatorShare(shareData)) {\n    return;\n  }\n\n  await copyTextToClipboard(url);\n  getActions().showNotification({\n    message: getTranslation('Link was copied!'),\n    icon: 'icon-link',\n  });\n}\n\nexport async function shareFile(name: string, content: string, mimeType: string) {\n  if (IS_CAPACITOR) {\n    const fileLocation = {\n      path: name,\n      directory: Directory.Cache,\n    };\n    const file = await Filesystem.writeFile({\n      ...fileLocation,\n      data: content,\n      encoding: Encoding.UTF8,\n    });\n\n    try {\n      if (await tryCapacitorShare({ url: file.uri })) {\n        return;\n      }\n    } finally {\n      void Filesystem.deleteFile(fileLocation);\n    }\n  }\n\n  const file = new File([content], name, { type: mimeType });\n  if (await tryNavigatorShare({ files: [file] })) {\n    return;\n  }\n\n  const url = URL.createObjectURL(file);\n\n  try {\n    if (IS_IOS) {\n      window.open(url, '_blank', 'noreferrer');\n    } else {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = name;\n      link.click();\n    }\n  } finally {\n    URL.revokeObjectURL(url);\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryCapacitorShare(data: ShareOptions) {\n  if (!IS_CAPACITOR) {\n    return false;\n  }\n\n  try {\n    await Share.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.message === 'Share canceled') {\n      return true;\n    }\n\n    // Sometimes on iOS a false \"Can't share while sharing is in progress\" error is thrown\n    if (error instanceof Error && error.message === 'Can\\'t share while sharing is in progress') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n\n/**\n * Returns `true` if the sharing is successful. Returns `false` if the sharing is unsuccessful and another sharing\n * method should be tried. Throws in case of an unexpected error.\n */\nasync function tryNavigatorShare(data: ShareData) {\n  if (!IS_TOUCH_ENV || !navigator.share) {\n    return false;\n  }\n\n  try {\n    await navigator.share(data);\n    return true;\n  } catch (error) {\n    // Occurs when the user closes the sharing UI without choosing a sharing destination\n    if (error instanceof Error && error.name === 'AbortError') {\n      return true;\n    }\n\n    // Occurs when the sharing API is called not in response to a user gesture\n    if (error instanceof Error && error.name === 'NotAllowedError') {\n      return false;\n    }\n\n    throw error;\n  }\n}\n","import usePrevious from './usePrevious';\n\nexport default function useCurrentOrPrev<T>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePrevious(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"zVKWQb4E\",\"item\":\"p6wqAx5G\",\"wide\":\"r6y8uqO8\",\"interactive\":\"Q9ntFVQX\",\"label\":\"D1GD_LrJ\",\"light\":\"soVchDDr\",\"inherit\":\"wFCZ8RVE\",\"disabled\":\"pvIBCUiV\",\"dangerous\":\"pGdKfZ0g\",\"buttonIcon\":\"N6o0srlb\",\"item_selected\":\"RsC78CT6\",\"itemSelected\":\"RsC78CT6\",\"item_with_icon\":\"U_181tTH\",\"itemWithIcon\":\"U_181tTH\",\"itemIcon\":\"Y6vHSLLj\",\"itemMainIcon\":\"j8oqwmMI\",\"itemOverlayIcon\":\"Kyq0Mbfk\",\"fontIcon\":\"YG4KjBia\",\"itemName\":\"Mj3kpKk7\",\"itemDescription\":\"SGTt7OqT\",\"delimiter\":\"MtXTN7mi\",\"delimiterAfter\":\"K5zqNd8W\",\"dropdownButtonWrapper\":\"M88J3eDx\",\"spinner\":\"O6oZGmyS\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps<T extends string> {\n  item: DropdownItem<T>;\n  shouldUseSelectedName?: boolean;\n  shouldTranslate?: boolean;\n  prefix?: TeactNode;\n  suffix?: TeactNode;\n  className?: string;\n  iconClassName?: string;\n  iconOverlayClassName?: string;\n  fontIconClassName?: string;\n  itemClassName?: string;\n  itemDescriptionClassName?: string;\n  onClick?(event: React.MouseEvent<HTMLButtonElement, MouseEvent>, value: T): void;\n}\n\nfunction DropdownItemContent<T extends string>({\n  item,\n  shouldUseSelectedName,\n  shouldTranslate,\n  prefix,\n  suffix,\n  className,\n  iconClassName,\n  iconOverlayClassName,\n  fontIconClassName,\n  itemClassName,\n  itemDescriptionClassName,\n  onClick,\n}: OwnProps<T>) {\n  const lang = useLang();\n  const displayedName = shouldUseSelectedName ? (item.selectedName ?? item.name) : item.name;\n\n  const fullClassName = buildClassName(\n    item.isDisabled && styles.disabled,\n    item.isDangerous && styles.dangerous,\n    className,\n  );\n\n  return (\n    <button\n      type=\"button\"\n      className={fullClassName}\n      disabled={item.isDisabled}\n      onClick={onClick && ((e) => onClick(e, item.value))}\n    >\n      {prefix}\n      {item.icon && (\n        <span className={buildClassName('icon', styles.itemIcon, iconClassName)}>\n          <img src={item.icon} alt=\"\" className={styles.itemMainIcon} />\n          {item.overlayIcon && (\n            <img\n              src={item.overlayIcon}\n              alt=\"\"\n              className={buildClassName('icon', styles.itemOverlayIcon, iconOverlayClassName)}\n            />\n          )}\n        </span>\n      )}\n      {item.fontIcon && (\n        <i\n          className={buildClassName(`icon icon-${item.fontIcon}`, styles.fontIcon, fontIconClassName)}\n          aria-hidden\n        />\n      )}\n      <span className={buildClassName(styles.itemName, itemClassName)}>\n        {shouldTranslate ? lang(displayedName) : displayedName}\n        {!!item.description && (\n          <span className={buildClassName(styles.itemDescription, itemDescriptionClassName)}>\n            {shouldTranslate && typeof item.description === 'string'\n              ? lang(item.description)\n              : item.description}\n          </span>\n        )}\n      </span>\n      {suffix}\n    </button>\n  );\n}\n\nexport default memo(DropdownItemContent);\n","import captureKeyboardListener from './captureKeyboardListeners';\n\nexport default function captureEscKeyListener(handler: NoneToVoidFunction) {\n  return captureKeyboardListener({\n    onEsc: () => {\n      handler();\n    },\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"VydD7Rve\",\"inPortal\":\"vcuzKHhA\",\"bubble\":\"mY0hTIiL\",\"top\":\"FsyRNnQH\",\"bottom\":\"tkKrx8OR\",\"left\":\"MvEERemq\",\"right\":\"y6xJQNRF\",\"backdrop\":\"gc2eH8vQ\",\"menu\":\"gtd29jbF\",\"suggestion\":\"BYQgxGEv\",\"dropdown\":\"IxGdkmhI\"};","import { type ElementRef, useLayoutEffect } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass, setExtraStyles } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\n\nimport { requestForcedReflow } from '../lib/fasterdom/fasterdom';\nimport { clamp } from '../util/math';\nimport windowSize from '../util/windowSize';\nimport { useStateRef } from './useStateRef';\n\nimport styles from '../components/ui/Menu.module.scss';\n\ninterface Coordinates {\n  x: number;\n  y: number;\n}\n\ninterface Bounds {\n  width: number;\n  height: number;\n  left: number;\n  top: number;\n  right: number;\n  bottom: number;\n}\n\ninterface MenuDimensions {\n  width: number;\n  height: number;\n  marginTop: number;\n}\n\ninterface GatherBoundsParams {\n  getTriggerElement?: () => (HTMLElement | null | undefined);\n  getRootElement: () => (HTMLElement | null | undefined);\n  getMenuElement: () => (HTMLElement | null | undefined);\n  layout: Layout;\n  anchor: IAnchorPosition;\n}\n\ninterface PositionResult {\n  positionX: 'left' | 'right';\n  positionY: 'top' | 'bottom';\n  coordinates: Coordinates;\n  transformOrigin: Coordinates;\n}\n\ninterface StaticPositionOptions {\n  anchor?: IAnchorPosition;\n  positionX?: 'left' | 'right';\n  positionY?: 'top' | 'bottom';\n  transformOriginX?: number;\n  transformOriginY?: number;\n  style?: string;\n  bubbleStyle?: string;\n}\n\ninterface DynamicPositionOptions {\n  anchor: IAnchorPosition;\n  getTriggerElement?: () => HTMLElement | undefined | null;\n  getRootElement: () => HTMLElement | undefined | null;\n  getMenuElement: () => HTMLElement | undefined | null;\n  getLayout?: () => Layout;\n  withMaxHeight?: boolean;\n}\n\nexport type MenuPositionOptions = StaticPositionOptions | DynamicPositionOptions;\n\nexport interface Layout {\n  extraPaddingX?: number;\n  extraTopPadding?: number;\n  extraMarginTop?: number;\n  menuElMinWidth?: number;\n  doNotCoverTrigger?: boolean;\n  centerHorizontally?: boolean;\n  deltaX?: number;\n  topShiftY?: number;\n  shouldAvoidNegativePosition?: boolean;\n  withPortal?: boolean;\n  isDense?: boolean; //  Allows you to place the menu as close to the edges of the area as possible\n  preferredPositionX?: 'left' | 'right';\n  preferredPositionY?: 'top' | 'bottom';\n}\n\nconst POSITIONING = {\n  VISUAL_COMFORT_SPACE: 16,\n  BOTTOM_MARGIN: 12,\n  HORIZONTAL_OFFSET: 3,\n  FALLBACK_X: 16,\n  TRIGGER_OFFSET: 6,\n} as const;\n\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0, right: 0, bottom: 0,\n};\n\nexport default function useMenuPosition(\n  isOpen: boolean,\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  options: MenuPositionOptions,\n) {\n  const optionsRef = useStateRef(options);\n\n  useLayoutEffect(() => {\n    if (!isOpen) return;\n\n    const options2 = optionsRef.current;\n\n    if (isDynamicPositionOptions(options2)) {\n      requestForcedReflow(() => {\n        const staticOptions = processDynamically(options2);\n\n        return () => {\n          applyStaticOptions(containerRef, bubbleRef, staticOptions);\n        };\n      });\n    } else {\n      applyStaticOptions(containerRef, bubbleRef, options2);\n    }\n  }, [isOpen, containerRef, bubbleRef, optionsRef]);\n}\n\nfunction applyStaticOptions(\n  containerRef: ElementRef<HTMLDivElement>,\n  bubbleRef: ElementRef<HTMLDivElement>,\n  {\n    anchor,\n    positionX = 'left',\n    positionY = 'top',\n    transformOriginX,\n    transformOriginY,\n    style,\n    bubbleStyle,\n  }: StaticPositionOptions,\n) {\n  const containerEl = containerRef.current!;\n  const bubbleEl = bubbleRef.current!;\n\n  let finalStyle = style;\n  if (anchor && !style) {\n    finalStyle = `left: ${anchor.x}px; top: ${anchor.y}px`;\n  }\n\n  if (finalStyle) {\n    containerEl.style.cssText = finalStyle;\n  }\n\n  if (bubbleStyle) {\n    bubbleEl.style.cssText = bubbleStyle;\n  }\n\n  if (positionX) {\n    removeExtraClass(bubbleEl, styles.left);\n    removeExtraClass(bubbleEl, styles.right);\n    addExtraClass(bubbleEl, styles[positionX]);\n  }\n\n  if (positionY) {\n    removeExtraClass(bubbleEl, styles.top);\n    removeExtraClass(bubbleEl, styles.bottom);\n    addExtraClass(bubbleEl, styles[positionY]);\n  }\n\n  setExtraStyles(bubbleEl, {\n    transformOrigin: [\n      transformOriginX ? `${transformOriginX}px` : positionX,\n      transformOriginY ? `${transformOriginY}px` : positionY,\n    ].join(' '),\n  });\n}\n\nfunction gatherBounds({\n  getTriggerElement,\n  getRootElement,\n  getMenuElement,\n  layout,\n  anchor,\n}: GatherBoundsParams): {\n    triggerRect: DOMRect;\n    rootRect: Bounds;\n    menuDimensions: MenuDimensions;\n  } {\n  const triggerEl = getTriggerElement?.();\n  const rootEl = getRootElement();\n  const menuEl = getMenuElement();\n\n  const { extraMarginTop = 0, menuElMinWidth = 0 } = layout;\n\n  const triggerRect = triggerEl\n    ? triggerEl.getBoundingClientRect()\n    : { ...EMPTY_RECT, left: anchor.x, top: anchor.y, right: anchor.x, bottom: anchor.y } as DOMRect;\n  const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n  rootRect.height -= windowSize.get().safeAreaBottom;\n\n  let menuDimensions: MenuDimensions;\n  if (menuEl) {\n    const marginTop = parseInt(getComputedStyle(menuEl).marginTop, 10) + extraMarginTop;\n    const { offsetWidth, offsetHeight } = menuEl;\n    menuDimensions = {\n      width: Math.max(offsetWidth, menuElMinWidth),\n      height: offsetHeight + marginTop,\n      marginTop,\n    };\n  } else {\n    menuDimensions = { width: 0, height: 0, marginTop: 0 };\n  }\n\n  return { triggerRect, rootRect, menuDimensions };\n}\n\nfunction determineHorizontalPosition(\n  anchor: Coordinates,\n  rootRect: Bounds,\n  menuWidth: number,\n  deltaX: number,\n  preferredPositionX: 'left' | 'right' = 'right',\n): { positionX: 'left' | 'right'; x: number } {\n  let x = anchor.x;\n  let positionX: 'left' | 'right';\n\n  if (preferredPositionX === 'right') {\n    // Prefer left-leaning (opening leftward): try 'right' position first\n    if (x - menuWidth >= rootRect.left + POSITIONING.VISUAL_COMFORT_SPACE) {\n      positionX = 'right';\n      x -= POSITIONING.HORIZONTAL_OFFSET;\n    } else {\n      // Fall back to right-leaning (opening rightward)\n      positionX = 'left';\n      x += POSITIONING.HORIZONTAL_OFFSET;\n    }\n  } else {\n    // Prefer right-leaning (opening rightward): try 'left' position first\n    if (x + menuWidth <= rootRect.right - POSITIONING.VISUAL_COMFORT_SPACE) {\n      positionX = 'left';\n      x += POSITIONING.HORIZONTAL_OFFSET;\n    } else {\n      // Fall back to left-leaning (opening leftward)\n      positionX = 'right';\n      x -= POSITIONING.HORIZONTAL_OFFSET;\n    }\n  }\n\n  x += deltaX;\n\n  return { positionX, x };\n}\n\nfunction determineVerticalPosition(\n  anchor: Coordinates,\n  triggerRect: DOMRect,\n  rootRect: Bounds,\n  menuHeight: number,\n  layout: Layout,\n): { positionY: 'top' | 'bottom'; y: number } {\n  const {\n    topShiftY = 0,\n    extraTopPadding = 0,\n    isDense = false,\n    doNotCoverTrigger = false,\n    preferredPositionY,\n  } = layout;\n  let y = anchor.y;\n  let positionY: 'top' | 'bottom';\n\n  // For `doNotCoverTrigger` we use the position relative to the trigger\n  if (doNotCoverTrigger) {\n    const hasSpaceBelow = triggerRect.bottom + POSITIONING.TRIGGER_OFFSET + menuHeight <= rootRect.bottom;\n    const hasSpaceAbove = triggerRect.top - POSITIONING.TRIGGER_OFFSET - menuHeight >= rootRect.top;\n\n    if (hasSpaceBelow && preferredPositionY !== 'bottom') {\n      positionY = 'top';\n      y = triggerRect.bottom + POSITIONING.TRIGGER_OFFSET;\n    } else if (hasSpaceAbove) {\n      positionY = 'bottom';\n      y = triggerRect.top - POSITIONING.TRIGGER_OFFSET;\n    } else {\n      // If there is no room at the top or bottom, we use standard logic\n      positionY = 'bottom';\n      y = rootRect.top + rootRect.height;\n    }\n  } else {\n    const yWithTopShift = y + topShiftY;\n    const hasSpaceBelow = yWithTopShift + triggerRect.height + menuHeight < rootRect.height + rootRect.top;\n    const hasSpaceAbove = y - triggerRect.height - menuHeight >= rootRect.top + extraTopPadding;\n\n    if ((preferredPositionY === 'bottom' && hasSpaceAbove) || (!isDense && !hasSpaceBelow)) {\n      positionY = 'bottom';\n      if (!hasSpaceAbove) {\n        y = rootRect.top + rootRect.height;\n      }\n    } else {\n      positionY = 'top';\n      y = yWithTopShift;\n    }\n  }\n\n  return { positionY, y };\n}\n\nfunction applyBoundaryConstraints(\n  coordinates: Coordinates,\n  positionX: 'left' | 'right',\n  triggerRect: DOMRect,\n  rootRect: Bounds,\n  menuDimensions: MenuDimensions,\n  layout: Layout,\n): Coordinates {\n  const {\n    shouldAvoidNegativePosition = false,\n    withPortal = false,\n    isDense = false,\n    menuElMinWidth = 0,\n    centerHorizontally = false,\n  } = layout;\n\n  let { x, y } = coordinates;\n\n  // Centering the menu with respect to the trigger\n  if (centerHorizontally) {\n    x = triggerRect.left + (triggerRect.width - menuDimensions.width) / 2;\n\n    // Check that the menu does not extend beyond the edges of the screen\n    x = clamp(\n      x,\n      rootRect.left + POSITIONING.VISUAL_COMFORT_SPACE,\n      rootRect.right - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE,\n    );\n\n    if (!withPortal) {\n      y -= triggerRect.top;\n    }\n  } else {\n    // Calculate relative position to trigger\n    const leftWithPossibleNegative = Math.min(\n      x - triggerRect.left,\n      rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE,\n    );\n\n    // Apply horizontal constraints\n    if (positionX === 'left') {\n      if (withPortal || shouldAvoidNegativePosition) {\n        x = Math.max(POSITIONING.VISUAL_COMFORT_SPACE, leftWithPossibleNegative);\n      } else {\n        x = leftWithPossibleNegative;\n      }\n    } else {\n      x -= triggerRect.left;\n    }\n\n    // Apply portal positioning\n    if (withPortal) {\n      x += triggerRect.left;\n      // For portal, Y coordinate should remain unchanged (already in viewport coordinates)\n      // y stays as is\n    } else {\n      // For non-portal, convert from anchor coordinates to relative coordinates\n      y -= triggerRect.top;\n    }\n  }\n\n  // Apply dense mode constraints\n  if (isDense) {\n    x = Math.min(x, rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE);\n    y = Math.min(y, rootRect.height - menuDimensions.height - POSITIONING.VISUAL_COMFORT_SPACE);\n  }\n\n  // Handle portal edge constraints\n  if (withPortal && !centerHorizontally) {\n    if (positionX === 'left') {\n      x = Math.min(x, rootRect.width - menuDimensions.width - POSITIONING.VISUAL_COMFORT_SPACE);\n    } else {\n      x = Math.max(x, POSITIONING.VISUAL_COMFORT_SPACE + menuDimensions.width);\n    }\n  }\n\n  // Handle minimum width adjustments\n  const addedXForMenuPositioning = menuElMinWidth ? Math.max(0,\n    (menuElMinWidth - (menuDimensions.width - menuElMinWidth)) / 2) : 0;\n  if (x - addedXForMenuPositioning < 0 && shouldAvoidNegativePosition) {\n    x = addedXForMenuPositioning + POSITIONING.VISUAL_COMFORT_SPACE;\n  }\n\n  return { x, y };\n}\n\nfunction calculateTransformOrigin(\n  anchor: Coordinates,\n  finalCoordinates: Coordinates,\n  positionResult: Pick<PositionResult, 'positionX' | 'positionY'>,\n  triggerRect: DOMRect,\n  menuDimensions: MenuDimensions,\n  withPortal: boolean,\n): Coordinates {\n  const portalOffset = withPortal ? { x: triggerRect.left, y: triggerRect.top } : { x: 0, y: 0 };\n\n  const offsetX = (anchor.x + portalOffset.x - triggerRect.left) - finalCoordinates.x;\n  const offsetY = (anchor.y + portalOffset.y - triggerRect.top) - finalCoordinates.y - menuDimensions.marginTop;\n\n  const transformOriginX = positionResult.positionX === 'left'\n    ? offsetX\n    : menuDimensions.width + offsetX;\n\n  const transformOriginY = positionResult.positionY === 'bottom'\n    ? menuDimensions.height + offsetY\n    : offsetY;\n\n  return { x: transformOriginX, y: transformOriginY };\n}\n\nfunction processDynamically(\n  {\n    anchor,\n    getRootElement,\n    getMenuElement,\n    getTriggerElement,\n    getLayout,\n    withMaxHeight,\n  }: DynamicPositionOptions,\n) {\n  const layout = getLayout?.() || {};\n\n  const { triggerRect, rootRect, menuDimensions } = gatherBounds({\n    getTriggerElement,\n    getRootElement,\n    getMenuElement,\n    layout,\n    anchor,\n  });\n\n  const { positionX, x } = determineHorizontalPosition(\n    anchor,\n    rootRect,\n    menuDimensions.width,\n    layout.deltaX || 0,\n    layout.preferredPositionX,\n  );\n\n  const { positionY, y } = determineVerticalPosition(\n    anchor,\n    triggerRect,\n    rootRect,\n    menuDimensions.height,\n    layout,\n  );\n\n  const finalCoordinates = applyBoundaryConstraints(\n    { x, y },\n    positionX,\n    triggerRect,\n    rootRect,\n    menuDimensions,\n    layout,\n  );\n\n  const transformOrigin = calculateTransformOrigin(\n    anchor,\n    finalCoordinates,\n    { positionX, positionY },\n    triggerRect,\n    menuDimensions,\n    layout.withPortal || false,\n  );\n\n  const style = `left: ${finalCoordinates.x}px; top: ${finalCoordinates.y}px; --menu-width: ${menuDimensions.width}px;`;\n\n  let bubbleStyle;\n  if (withMaxHeight) {\n    const menuMaxHeight = rootRect.height - POSITIONING.BOTTOM_MARGIN - menuDimensions.marginTop;\n    bubbleStyle = `max-height: ${menuMaxHeight}px;`;\n  }\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX: transformOrigin.x,\n    transformOriginY: transformOrigin.y,\n    style,\n    bubbleStyle,\n  };\n}\n\nfunction isDynamicPositionOptions(options: MenuPositionOptions): options is DynamicPositionOptions {\n  return 'getRootElement' in options;\n}\n","import type { ElementRef, FC, TeactNode } from '../../lib/teact/teact';\nimport React, { beginHeavyAnimation, useEffect, useRef } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\n\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useMenuPosition, { type MenuPositionOptions } from '../../hooks/useMenuPosition';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useVirtualBackdrop from '../../hooks/useVirtualBackdrop';\n\nimport Portal from './Portal';\n\nimport styles from './Menu.module.scss';\n\nexport type { MenuPositionOptions } from '../../hooks/useMenuPosition';\n\ntype OwnProps = {\n  children: TeactNode;\n  menuRef?: ElementRef<HTMLDivElement>;\n  isOpen: boolean;\n  id?: string;\n  className?: string;\n  bubbleClassName?: string;\n  type?: 'menu' | 'suggestion' | 'dropdown';\n  autoClose?: boolean;\n  shouldSkipTransition?: boolean;\n  noBackdrop?: boolean;\n  withPortal?: boolean;\n  noCloseOnBackdrop?: boolean;\n  shouldCleanup?: boolean;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n  onClose?: NoneToVoidFunction;\n  onMouseEnter?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n  onMouseLeave?: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void;\n} & MenuPositionOptions;\n\nexport const ANIMATION_DURATION = 200;\n\nconst Menu: FC<OwnProps> = ({\n  children,\n  isOpen,\n  id,\n  menuRef,\n  className,\n  bubbleClassName,\n  type = 'menu',\n  autoClose = false,\n  shouldSkipTransition,\n  noBackdrop = false,\n  withPortal,\n  noCloseOnBackdrop = false,\n  shouldCleanup,\n  onCloseAnimationEnd,\n  onClose,\n  onMouseEnter,\n  onMouseLeave,\n  ...positionOptions\n}) => {\n  const containerRef = useRef<HTMLDivElement>();\n  let bubbleRef = useRef<HTMLDivElement>();\n  if (menuRef) {\n    bubbleRef = menuRef;\n  }\n\n  useMenuPosition(isOpen, containerRef, bubbleRef, positionOptions);\n\n  useHistoryBack({\n    isActive: Boolean(isOpen && onClose),\n    onBack: onClose!,\n    shouldBeReplaced: true,\n  });\n\n  const {\n    shouldRender,\n  } = useShowTransition({\n    isOpen,\n    ref: bubbleRef,\n    onCloseAnimationEnd,\n    noMountTransition: shouldSkipTransition,\n    noCloseTransition: shouldSkipTransition,\n    withShouldRender: true,\n  });\n\n  useEffect(\n    () => (isOpen && onClose ? captureEscKeyListener(onClose) : undefined),\n    [isOpen, onClose],\n  );\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (isOpen || (!isOpen && prevIsOpen === true)) {\n      beginHeavyAnimation(ANIMATION_DURATION);\n    }\n  }, [isOpen]);\n\n  useVirtualBackdrop(isOpen && !noBackdrop, containerRef, noCloseOnBackdrop ? undefined : onClose);\n\n  const fullBubbleClassName = buildClassName(\n    styles.bubble,\n    bubbleClassName,\n    'menu-bubble',\n    styles[type],\n  );\n\n  if (shouldCleanup && !shouldRender) {\n    return undefined;\n  }\n\n  const menu = (\n    <div\n      ref={containerRef}\n      id={id}\n      className={buildClassName(styles.wrapper, className, withPortal && styles.inPortal)}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={isOpen ? onMouseLeave : undefined}\n    >\n      {isOpen && !noBackdrop && (\n        // This only prevents click events triggering on underlying elements\n        <div className={styles.backdrop} onClick={stopEvent} />\n      )}\n      <div\n        ref={bubbleRef}\n        className={fullBubbleClassName}\n        onClick={autoClose ? onClose : undefined}\n      >\n        {children}\n      </div>\n    </div>\n  );\n\n  if (withPortal) {\n    return <Portal>{menu}</Portal>;\n  }\n\n  return menu;\n};\n\nexport default Menu;\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect } from '../lib/teact/teact';\n\nimport styles from '../components/ui/Menu.module.scss';\n\n// This effect implements closing menus by clicking outside of them\n// without adding extra elements to the DOM\nexport default function useVirtualBackdrop(\n  isOpen: boolean,\n  menuRef: ElementRef<HTMLDivElement>,\n  onClose?: () => void | undefined,\n) {\n  useEffect(() => {\n    const handleEvent = (e: Event) => {\n      const menu = menuRef.current;\n      const target = e.target as HTMLElement | null;\n      if (!menu || !target) {\n        return;\n      }\n\n      if (\n        !menu.contains(e.target as Node | null)\n        || target.classList.contains(styles.backdrop)\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (onClose) {\n          onClose();\n        }\n      }\n    };\n\n    if (isOpen && onClose) {\n      document.addEventListener('mousedown', handleEvent);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleEvent);\n    };\n  }, [isOpen, menuRef, onClose]);\n}\n","import React, { type ElementRef, memo, useRef } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\nimport type { MenuPositionOptions } from './Menu';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownItemContent from './DropdownItemContent';\nimport Menu from './Menu';\n\nimport styles from './Dropdown.module.scss';\n\ninterface OwnProps<T extends string> {\n  isOpen: boolean;\n  ref?: ElementRef<HTMLDivElement>;\n  selectedValue?: T;\n  items: DropdownItem<T>[];\n  withPortal?: boolean;\n  menuAnchor?: IAnchorPosition;\n  menuPositionY?: 'top' | 'bottom';\n  menuPositionX?: 'right' | 'left';\n  shouldTranslateOptions?: boolean;\n  className?: string;\n  bubbleClassName?: string;\n  buttonClassName?: string;\n  iconClassName?: string;\n  fontIconClassName?: string;\n  itemDescriptionClassName?: string;\n  shouldCleanup?: boolean;\n  onSelect?: (value: T, e?: React.MouseEvent) => void;\n  onClose: NoneToVoidFunction;\n  getTriggerElement?: () => HTMLElement | undefined | null;\n  getRootElement?: () => HTMLElement | undefined | null;\n  getMenuElement?: () => HTMLElement | undefined | null;\n  getLayout?: () => { withPortal?: boolean };\n  onCloseAnimationEnd?: NoneToVoidFunction;\n}\n\nfunction DropdownMenu<T extends string>({\n  isOpen,\n  ref,\n  selectedValue,\n  items,\n  withPortal,\n  menuAnchor,\n  menuPositionX,\n  menuPositionY,\n  shouldTranslateOptions,\n  className,\n  bubbleClassName,\n  buttonClassName,\n  iconClassName,\n  fontIconClassName,\n  itemDescriptionClassName,\n  shouldCleanup,\n  onSelect,\n  onClose,\n  getTriggerElement,\n  getRootElement,\n  getMenuElement,\n  getLayout,\n  onCloseAnimationEnd,\n}: OwnProps<T>) {\n  let menuRef = useRef<HTMLDivElement>();\n  if (ref) {\n    menuRef = ref;\n  }\n\n  // Create position options\n  const menuPositionOptions: MenuPositionOptions = menuAnchor && getTriggerElement && getRootElement && getMenuElement\n    ? {\n      anchor: menuAnchor,\n      getTriggerElement,\n      getRootElement,\n      getMenuElement,\n      getLayout,\n    }\n    : menuAnchor && getRootElement && getMenuElement\n      ? {\n        anchor: menuAnchor,\n        getRootElement,\n        getMenuElement,\n        getLayout,\n        positionX: menuPositionX,\n        positionY: menuPositionY,\n      }\n      : {\n        anchor: menuAnchor,\n        positionX: menuPositionX,\n        positionY: menuPositionY,\n      };\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, value: T) => {\n    e.stopPropagation();\n    onSelect?.(value, e);\n    onClose();\n  });\n\n  return (\n    <Menu\n      menuRef={menuRef}\n      isOpen={isOpen}\n      type=\"dropdown\"\n      withPortal={withPortal}\n      className={className}\n      bubbleClassName={bubbleClassName}\n      shouldCleanup={shouldCleanup}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n      {...menuPositionOptions}\n    >\n      {items.map((item, index) => {\n        const fullButtonClassName = buildClassName(\n          styles.item,\n          (item.icon || item.fontIcon) && styles.item_with_icon,\n          item.withDelimiter && index > 0 && styles.delimiter,\n          item.withDelimiterAfter && styles.delimiterAfter,\n          selectedValue === item.value && styles.item_selected,\n          buttonClassName,\n          'capture-scroll',\n        );\n        return (\n          <DropdownItemContent\n            key={item.value}\n            item={item}\n            shouldTranslate={shouldTranslateOptions}\n            className={fullButtonClassName}\n            iconClassName={iconClassName}\n            fontIconClassName={fontIconClassName}\n            itemClassName=\"menuItemName\"\n            itemDescriptionClassName={itemDescriptionClassName}\n            onClick={handleItemClick}\n          />\n        );\n      })}\n    </Menu>\n  );\n}\n\nexport default memo(DropdownMenu);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\n\nimport modalStyles from './Modal.module.scss';\n\ntype OwnProps<T extends string> = {\n  title?: string | TeactNode;\n  className?: string;\n  withNotch?: boolean;\n  closeClassName?: string;\n  menuItems?: DropdownItem<T>[];\n  onClose?: NoneToVoidFunction;\n  onBackButtonClick?: () => void;\n  onMenuItemClick?: (value: T) => void;\n};\n\nfunction ModalHeader<T extends string>({\n  title, className, withNotch, closeClassName, menuItems, onClose, onBackButtonClick, onMenuItemClick,\n}: OwnProps<T>) {\n  const lang = useLang();\n\n  const menuRef = useRef<HTMLDivElement>();\n  const menuButtonRef = useRef<HTMLButtonElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const getTriggerElement = useLastCallback(() => menuButtonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuAnchor(undefined));\n\n  const handleMenuButtonClick = useLastCallback(() => {\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = menuButtonRef.current!.getBoundingClientRect();\n      setMenuAnchor({ x, y: y + height });\n    }\n  });\n\n  return (\n    <div\n      className={buildClassName(\n        modalStyles.header,\n        'with-notch-on-scroll',\n        withNotch && 'is-scrolled',\n        !onBackButtonClick && modalStyles.header_wideContent,\n        className,\n        isMenuOpen && 'is-menu-open',\n      )}\n    >\n      {onBackButtonClick && (\n        <Button isSimple isText onClick={onBackButtonClick} className={modalStyles.header_back}>\n          <i className={buildClassName(modalStyles.header_backIcon, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n      {title !== undefined && <div className={buildClassName(modalStyles.title, modalStyles.singleTitle)}>{title}</div>}\n      {hasMenu && (\n        <Button\n          ref={menuButtonRef}\n          isSimple\n          className={buildClassName(modalStyles.menuButton, closeClassName)}\n          ariaLabel={lang('Menu')}\n          onClick={handleMenuButtonClick}\n        >\n          <i className={buildClassName(modalStyles.menuIcon, 'icon-menu-dots')} aria-hidden />\n        </Button>\n      )}\n      {onClose && (\n        <Button\n          isRound\n          className={buildClassName(modalStyles.closeButton, closeClassName)}\n          ariaLabel={lang('Close')}\n          onClick={onClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      )}\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          items={menuItems}\n          withPortal\n          shouldTranslateOptions\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(ModalHeader);\n","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { useIFrameBridgeProvider } from '../../util/embeddedDappBridge/provider/useIFrameBridgeProvider';\nimport { openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from './Modal';\nimport ModalHeader from './ModalHeader';\n\nimport styles from './IFrameBrowser.module.scss';\n\ninterface StateProps {\n  url?: string;\n  title?: string;\n}\n\ntype MenuHandler = 'reload' | 'openInBrowser' | 'copyUrl' | 'share' | 'close';\n\nconst TITLES = {\n  'tonscan.org': 'TON Explorer',\n  'multisend.mytonwallet.io': 'Multi-Send',\n  'localhost:4323': 'Multi-Send',\n};\n\nconst MENU_ITEMS: DropdownItem<MenuHandler>[] = [{\n  value: 'reload',\n  name: 'Reload',\n  fontIcon: 'menu-reload',\n}, {\n  value: 'openInBrowser',\n  name: 'Open in Browser',\n  fontIcon: 'menu-globe',\n}, {\n  value: 'copyUrl',\n  name: 'Copy Link',\n  fontIcon: 'menu-copy',\n}, {\n  value: 'close',\n  name: 'Close',\n  fontIcon: 'menu-close',\n  withDelimiter: true,\n}];\n\nfunction IFrameBrowser({\n  url, title,\n}: StateProps) {\n  const { closeBrowser, showNotification } = getActions();\n  const lang = useLang();\n\n  const iframeRef = useRef<HTMLIFrameElement>();\n\n  const { setupDappBridge } = useIFrameBridgeProvider(url);\n\n  const host = useMemo(() => url && (new URL(url)).host, [url]);\n  const renderingTitle = useCurrentOrPrev(title || (host && (TITLES[host as keyof typeof TITLES] || host)));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    if (!url) return;\n\n    switch (value) {\n      case 'reload':\n        if (iframeRef.current) {\n          // eslint-disable-next-line no-self-assign\n          iframeRef.current.src = iframeRef.current.src;\n        }\n        break;\n      case 'openInBrowser':\n        void openUrl(url, { isExternal: true });\n        break;\n      case 'copyUrl':\n        void copyTextToClipboard(url);\n        showNotification({ message: lang('URL was copied!'), icon: 'icon-copy' });\n        break;\n      case 'share':\n        void shareUrl(url, renderingTitle);\n        break;\n      case 'close':\n        closeBrowser();\n        break;\n    }\n  });\n\n  return (\n    <Modal isOpen={Boolean(url)} dialogClassName={styles.dialog} onClose={closeBrowser}>\n      <ModalHeader\n        title={renderingTitle}\n        menuItems={MENU_ITEMS}\n        onMenuItemClick={handleMenuItemClick}\n        className={styles.modalHeader}\n      />\n      <iframe\n        ref={iframeRef}\n        title={renderingTitle}\n        src={url}\n        className={styles.iframe}\n        allow=\"web-share; clipboard-write\"\n        onLoad={setupDappBridge}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentBrowserOptions } = global;\n\n  return {\n    url: currentBrowserOptions?.url,\n    title: currentBrowserOptions?.title,\n  };\n})(IFrameBrowser));\n","import { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { EMBEDDED_DAPP_BRIDGE_CHANNEL } from '../../../config';\nimport { createReverseIFrameInterface } from '../../createPostMessageInterface';\nimport { buildBridgeApi } from './bridgeApi';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport function useIFrameBridgeProvider(pageUrl?: string) {\n  const cleanupRef = useRef<NoneToVoidFunction>();\n\n  const setupDappBridge = useLastCallback((e) => {\n    cleanupRef.current?.();\n\n    const iframe = e.target as HTMLIFrameElement;\n    cleanupRef.current = createReverseIFrameInterface(\n      buildBridgeApi(pageUrl!),\n      new URL(pageUrl!).origin,\n      iframe.contentWindow!,\n      EMBEDDED_DAPP_BRIDGE_CHANNEL,\n    );\n  });\n\n  useEffect(() => {\n    if (!pageUrl) return;\n\n    return () => {\n      cleanupRef.current?.();\n    };\n  }, [pageUrl]);\n\n  return {\n    setupDappBridge,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"iframe\":\"qm6h4mWP\",\"dialog\":\"sszvWMpD\",\"modalHeader\":\"ndvLaNkq\"};","import { type ElementRef, useEffect, useRef, useSignal } from '../lib/teact/teact';\n\nimport type { Scheduler } from '../util/schedulers';\n\nimport { debounce, throttle, throttleWith } from '../util/schedulers';\nimport useDerivedState from './useDerivedState';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useLastCallback from './useLastCallback';\n\ntype TargetCallback = (entry: IntersectionObserverEntry) => void;\ntype RootCallback = (entries: IntersectionObserverEntry[]) => void;\ntype ObserveCleanup = NoneToVoidFunction;\nexport type ObserveFn = (target: HTMLElement, targetCallback?: TargetCallback) => ObserveCleanup;\n\ninterface IntersectionController {\n  observer: IntersectionObserver;\n  callbacks: Map<HTMLElement, TargetCallback>;\n}\n\ninterface Response {\n  observe: ObserveFn;\n  freeze: NoneToVoidFunction;\n  unfreeze: NoneToVoidFunction;\n}\n\nexport function useIntersectionObserver({\n  rootRef,\n  throttleMs,\n  throttleScheduler,\n  debounceMs,\n  shouldSkipFirst,\n  margin,\n  threshold,\n  isDisabled,\n}: {\n  rootRef?: ElementRef<HTMLDivElement>;\n  throttleMs?: number;\n  throttleScheduler?: Scheduler;\n  debounceMs?: number;\n  shouldSkipFirst?: boolean;\n  margin?: number;\n  threshold?: number | number[];\n  isDisabled?: boolean;\n}, rootCallback?: RootCallback): Response {\n  const controllerRef = useRef<IntersectionController>();\n  const rootCallbackRef = useRef<RootCallback>();\n  const freezeFlagsRef = useRef(0);\n  const onUnfreezeRef = useRef<NoneToVoidFunction>();\n\n  rootCallbackRef.current = rootCallback;\n\n  const freeze = useLastCallback(() => {\n    freezeFlagsRef.current++;\n  });\n\n  const unfreeze = useLastCallback(() => {\n    if (!freezeFlagsRef.current) {\n      return;\n    }\n\n    freezeFlagsRef.current--;\n\n    if (!freezeFlagsRef.current && onUnfreezeRef.current) {\n      onUnfreezeRef.current();\n      onUnfreezeRef.current = undefined;\n    }\n  });\n\n  useHeavyAnimation(freeze, unfreeze);\n\n  useEffect(() => {\n    if (isDisabled) {\n      return undefined;\n    }\n\n    return () => {\n      if (controllerRef.current) {\n        controllerRef.current.observer.disconnect();\n        controllerRef.current.callbacks.clear();\n        controllerRef.current = undefined;\n      }\n    };\n  }, [isDisabled]);\n\n  function initController() {\n    const callbacks = new Map();\n    const entriesAccumulator = new Map<Element, IntersectionObserverEntry>();\n\n    let observerCallback: typeof observerCallbackSync;\n    if (typeof throttleScheduler === 'function') {\n      observerCallback = throttleWith(throttleScheduler, observerCallbackSync);\n    } else if (throttleMs) {\n      observerCallback = throttle(observerCallbackSync, throttleMs, !shouldSkipFirst);\n    } else if (debounceMs) {\n      observerCallback = debounce(observerCallbackSync, debounceMs, !shouldSkipFirst);\n    } else {\n      observerCallback = observerCallbackSync;\n    }\n\n    function observerCallbackSync() {\n      if (freezeFlagsRef.current) {\n        onUnfreezeRef.current = observerCallback;\n        return;\n      }\n\n      const entries = Array.from(entriesAccumulator.values());\n\n      entries.forEach((entry: IntersectionObserverEntry) => {\n        const callback = callbacks.get(entry.target);\n        if (callback) {\n          callback!(entry, entries);\n        }\n      });\n\n      if (rootCallbackRef.current) {\n        rootCallbackRef.current(entries);\n      }\n\n      entriesAccumulator.clear();\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          entriesAccumulator.set(entry.target, entry);\n        });\n\n        if (freezeFlagsRef.current) {\n          onUnfreezeRef.current = observerCallback;\n        } else {\n          observerCallback();\n        }\n      },\n      {\n        root: rootRef?.current,\n        rootMargin: margin ? `${margin}px` : undefined,\n        threshold,\n      },\n    );\n\n    controllerRef.current = { observer, callbacks };\n  }\n\n  const observe = useLastCallback((target, targetCallback) => {\n    if (!controllerRef.current) {\n      initController();\n    }\n\n    const controller = controllerRef.current!;\n    controller.observer.observe(target);\n\n    if (targetCallback) {\n      controller.callbacks.set(target, targetCallback);\n    }\n\n    return () => {\n      if (targetCallback) {\n        controller.callbacks.delete(target);\n      }\n\n      controller.observer.unobserve(target);\n    };\n  });\n\n  return { observe, freeze, unfreeze };\n}\n\nexport function useOnIntersect(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    return observe ? observe(targetRef.current!, lastCallback) : undefined;\n  }, [lastCallback, observe, targetRef]);\n}\n\nexport function useGetIsIntersecting(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  const [getIsIntersecting, setIsIntersecting] = useSignal(!observe);\n\n  useOnIntersect(targetRef, observe, (entry) => {\n    setIsIntersecting(entry.isIntersecting);\n\n    if (callback) {\n      callback(entry);\n    }\n  });\n\n  return getIsIntersecting;\n}\n\nexport function useIsIntersecting(\n  targetRef: ElementRef<HTMLElement>, observe?: ObserveFn, callback?: TargetCallback,\n) {\n  return useDerivedState(useGetIsIntersecting(targetRef, observe, callback));\n}\n","import type { ElementRef } from '../lib/teact/teact';\n\nimport type { ObserveFn } from './useIntersectionObserver';\n\nimport { useGetIsIntersecting, useIntersectionObserver } from './useIntersectionObserver';\n\nlet observeIntersection: ObserveFn;\n\nconst THROTTLE = 350;\n\nexport function useAppIntersectionObserver() {\n  const { observe } = useIntersectionObserver({\n    throttleMs: THROTTLE,\n  });\n\n  observeIntersection = observe;\n}\n\nexport function useGetIsIntersectingWithApp(targetRef: ElementRef<HTMLElement>) {\n  return useGetIsIntersecting(targetRef, observeIntersection);\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const lastCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(lastCallback, delay);\n    if (!noFirst) lastCallback();\n\n    return () => clearInterval(id);\n  }, [delay, lastCallback, noFirst]);\n}\n\nexport default useInterval;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { setCancellableTimeout } from '../util/schedulers';\nimport useLastCallback from './useLastCallback';\n\nfunction useTimeout(callback: () => void, delay?: number, dependencies: readonly any[] = []) {\n  const savedCallback = useLastCallback(callback);\n\n  useEffect(() => {\n    if (typeof delay !== 'number') {\n      return undefined;\n    }\n\n    return setCancellableTimeout(delay, savedCallback);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [delay, savedCallback, ...dependencies]);\n}\n\nexport default useTimeout;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cFGCnqcA\",\"content\":\"sRTywfr2\",\"actions\":\"u6bKEBnR\",\"title\":\"UervEVFY\",\"description\":\"rO8yQetD\",\"img\":\"T1ztMNGQ\",\"button\":\"eymlW7_B\"};","import React from '../lib/teact/teact';\n\nimport { APP_NAME } from '../config';\nimport renderText from '../global/helpers/renderText';\n\nimport useLang from '../hooks/useLang';\nimport useLastCallback from '../hooks/useLastCallback';\n\nimport Button from './ui/Button';\n\nimport styles from './AppInactive.module.scss';\n\nimport appInactivePathPng from '../assets/app-inactive.png';\nimport appInactivePathWebP from '../assets/app-inactive.webp';\n\nfunction AppInactive() {\n  const lang = useLang();\n\n  const handleReload = useLastCallback(() => {\n    window.location.reload();\n  });\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.content}>\n        <picture className={styles.img}>\n          <source src={appInactivePathWebP} />\n          <img src={appInactivePathPng} alt=\"\" className={styles.img} />\n        </picture>\n\n        <h3 className={styles.title}>{lang('Such error, many tabs')}</h3>\n\n        <div className={styles.description}>\n          {renderText(lang('$many_tabs_error_description', { app_name: APP_NAME }))}\n        </div>\n\n        <div className={styles.actions}>\n          <Button isText className={styles.button} onClick={handleReload}>\n            {lang('Reload App')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default AppInactive;\n","import { useState } from '../lib/teact/teact';\n\nimport useLastCallback from './useLastCallback';\n\nconst THRESHOLD = 1;\n\nexport default function useScrolledState(threshold = THRESHOLD) {\n  const [isAtBeginning, setIsAtBeginning] = useState(true);\n  const [isAtEnd, setIsAtEnd] = useState(true);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLElement>) => {\n    const { scrollHeight, scrollTop, clientHeight } = e.target as HTMLElement;\n\n    setIsAtBeginning(scrollTop < threshold);\n    setIsAtEnd(scrollHeight - scrollTop - clientHeight < threshold);\n  });\n\n  return {\n    isAtBeginning,\n    isAtEnd,\n    isScrolled: !isAtBeginning,\n    handleScroll,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"YO7I0Ma0\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport styles from './Emoji.module.scss';\n\nexport type EmojiIcon = '' | '' | '';\n\ninterface OwnProps {\n  from: EmojiIcon;\n}\n\nconst PATH_BY_EMOJI = {\n  '': '1f977',\n  '': '1f984',\n  '': '26a0',\n};\n\nconst loadedImages = new Set();\n\nfunction Emoji({ from }: OwnProps) {\n  const key = from in PATH_BY_EMOJI ? PATH_BY_EMOJI[from as keyof typeof PATH_BY_EMOJI] : from;\n  const src = `./emoji/${key}.png`;\n  const [isLoaded, markLoaded] = useFlag(loadedImages.has(src));\n  const ref = useMediaTransition<HTMLImageElement>(isLoaded);\n\n  const handleLoad = useLastCallback(() => {\n    markLoaded();\n    loadedImages.add(src);\n  });\n\n  return (\n    <img\n      ref={ref}\n      src={src}\n      alt={from}\n      className={buildClassName(styles.root, styles[`key-${key}`])}\n      onLoad={handleLoad}\n    />\n  );\n}\n\nexport default memo(Emoji);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"T7fZ5IMk\",\"slide\":\"syDfunZP\",\"modalDialog\":\"xRqyv_rX\",\"header\":\"aDfdss28\",\"withTopSpace\":\"dtjdV8GY\",\"nestedTransition\":\"jX5Ya3FK\",\"transitionContainer\":\"yVzk5dwl\",\"developerCloseButton\":\"yn74reot\",\"onlyTextHeader\":\"CgjtBlIK\",\"headerInsideModal\":\"eFeOVzRI\",\"languageHeader\":\"ZrejUKsI\",\"headerBack\":\"ehDj7x2p\",\"isInsideModal\":\"Wccw6pgw\",\"hidden\":\"yTnK4aVo\",\"iconChevron\":\"Qea3kUMy\",\"headerBackInContent\":\"zvnNb8eo\",\"headerTitle\":\"aZVKC5O6\",\"modalHeader\":\"vwHnpdwF\",\"content\":\"rgMxxE39\",\"content_noScroll\":\"lh0I5gIh\",\"contentNoScroll\":\"lh0I5gIh\",\"withBottomSpace\":\"cjfvEx15\",\"contentInModal\":\"ug6WizbB\",\"contentFullSize\":\"BpFwAWae\",\"blockTitle\":\"dBOj5NnG\",\"menuIcon\":\"M1WSmGuc\",\"themeWrapper\":\"cfK5v5m1\",\"blockAbout\":\"yuZIbS8n\",\"theme\":\"N5nUfRHH\",\"theme_active\":\"eTa03cXj\",\"themeActive\":\"eTa03cXj\",\"themeIcon\":\"tZRnZj9J\",\"themeIcon_active\":\"eEiBESrS\",\"themeIconActive\":\"eEiBESrS\",\"themeImg\":\"H_nvpBU5\",\"colorList\":\"ftMWz1de\",\"colorButton\":\"OaFvanYP\",\"colorButtonCurrent\":\"GthJhaus\",\"iconLock\":\"n1s4Ycb6\",\"iconLockInverted\":\"r9kXSmsP\",\"subBlockAsButton\":\"ImElqofC\",\"block\":\"wJjymc4L\",\"text\":\"sU0zQDmb\",\"settingsBlockWithDescription\":\"xosGoD5d\",\"settingsBlock\":\"_0TWKZFz4\",\"iconChevronRight\":\"RHurCQ9b\",\"iconQuestion\":\"CLKLBCVt\",\"item\":\"o1nQhJ_F\",\"draggable\":\"k2juknci\",\"item_red\":\"yYJCYbbd\",\"itemRed\":\"yYJCYbbd\",\"item_small\":\"cC1nd9dM\",\"itemSmall\":\"cC1nd9dM\",\"item_lang\":\"kIWs2Jxk\",\"itemLang\":\"kIWs2Jxk\",\"item_wallet_version\":\"tTZZHEdN\",\"itemWalletVersion\":\"tTZZHEdN\",\"item_token\":\"LMTs4OeN\",\"itemToken\":\"LMTs4OeN\",\"item_disabled\":\"F3nzrEuV\",\"itemDisabled\":\"F3nzrEuV\",\"itemAutoLock\":\"TAmUTusj\",\"itemInfo\":\"S5Kk31wp\",\"small\":\"gq4usdgr\",\"version\":\"oGJ2X15D\",\"languageMain\":\"cIO_6vYD\",\"languageNative\":\"NGS7pE5c\",\"wideTooltip\":\"xZy_xEHS\",\"disconnectButton\":\"Wu3RiwSF\",\"dapps\":\"eyE78PWW\",\"changePasswordButton\":\"xBpPU4Jb\",\"passwordFormContent\":\"KQuDNpn5\",\"passwordFormContentInModal\":\"OzmF3O5t\",\"sticker\":\"aMwtPBfB\",\"blockDescription\":\"HuH8igQi\",\"emptyList\":\"ThoQya6m\",\"emptyListTitle\":\"lek7Y5aS\",\"dapp\":\"xc0VaBDP\",\"backButton\":\"QlOjly_V\",\"logo\":\"LQ5MMcSf\",\"stickerNativeBiometric\":\"nLxfZG3p\",\"pinPadHeader\":\"tnqhb1Qi\",\"pinPadHeaderMinified\":\"K1fiksuZ\",\"pinPadTitle\":\"MxOcmI0_\",\"title\":\"sDP2AWSj\",\"titleLink\":\"r7iIIH6q\",\"heading\":\"Sh2kuIH2\",\"github\":\"dBqNllGm\",\"telegram\":\"sggkOqTT\",\"tokenSortIcon\":\"V7Nh7XEi\",\"tokenTitle\":\"wkk1b7Dc\",\"tokenDescription\":\"cv6gw8az\",\"tokenAmount\":\"BekK0Dwp\",\"dot\":\"Zfi1H_we\",\"dotLarge\":\"LIr9yHMx\",\"contentRelative\":\"EiFz4WrA\",\"sortableContainer\":\"zmQzVO7l\",\"modalDialogWeb\":\"E67Qdj_t\",\"modalContent\":\"mjHzkDZB\",\"deleteText\":\"d8sxNodF\",\"languageInfo\":\"AXAMGE3T\",\"tokenInfo\":\"ll1f03qi\",\"stickerAndTitle\":\"upR_yI1c\",\"sideTitle\":\"atPnEcVz\",\"aboutFooterWrapper\":\"EYMlspWb\",\"aboutFooterContent\":\"U1sbe5pk\",\"blockWalletVersionText\":\"poUctQOF\",\"walletVersionInfo\":\"spNULnGc\",\"walletVersionInfoRight\":\"Ez0t7GFF\",\"walletVersionTitle\":\"DbBBKMBg\",\"walletVersionTokens\":\"DUzHgWKY\",\"walletVersionAddress\":\"xPrZcrFZ\",\"walletVersionAmount\":\"nvPRmXTF\",\"blockWalletVersionReadMore\":\"g3U3zj6y\",\"nftPrimaryCell\":\"zpLwMrPQ\",\"nftName\":\"JHu8TtpB\",\"nftCollection\":\"mbtZbU1u\",\"nftImage\":\"pifBd9KV\",\"nftButtonUnhide\":\"_o8QIssq\",\"account\":\"TXe6O6ZF\",\"accountDisabled\":\"vf82b5zy\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport { type Theme } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER, APP_NAME, APP_REPO_URL, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { handleUrlClick } from '../../util/openUrl';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  headerClassName?: string;\n  theme: Theme;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsAbout({\n  isActive, isInsideModal, theme, headerClassName, handleBackClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const aboutExtensionTitle = lang('$about_extension_link_text', { app_name: APP_NAME });\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('About %app_name%', { app_name: APP_NAME })}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(\n          styles.header,\n          headerClassName,\n          'with-notch-on-scroll',\n          isScrolled && 'is-scrolled',\n        )}\n        >\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('About %app_name%', { app_name: APP_NAME })}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <img src={logoPath} alt={lang('Logo')} className={styles.logo} />\n        <h2 className={styles.title}>\n          {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          {!IS_CORE_WALLET && (\n            <a href=\"https://mytonwallet.io/\" target=\"_blank\" className={styles.titleLink} rel=\"noreferrer\">\n              mytonwallet.io\n            </a>\n          )}\n        </h2>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>\n            {renderText(lang('$about_description1'))}\n          </p>\n          <p className={styles.text}>\n            {renderText(lang('$about_description2'))}\n          </p>\n          {IS_EXTENSION ? (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Proxy?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description1'))}{' '}\n                <a\n                  href=\"https://telegra.ph/TON-Sites-TON-WWW-and-TON-Proxy-09-29-2\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                <Emoji from=\"\" /> {lang('What is TON Magic?')}\n              </h3>\n              <p className={styles.text}>\n                {renderText(lang('$about_extension_description2'))}\n              </p>\n              <p className={styles.text}>\n                {lang('$about_extension_description3')}{' '}\n                <a href=\"https://telegra.ph/Telegram--TON-11-10\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  {lang('More info and demo.')}\n                </a>\n              </p>\n            </>\n          ) : (\n            <>\n              <h3 className={buildClassName(styles.text, styles.heading)}>\n                {lang('$about_proxy_magic_title', { ninja: <Emoji from=\"\" />, unicorn: <Emoji from=\"\" /> })}\n              </h3>\n              <p className={styles.text}>\n                {lang('$about_proxy_magic_description', {\n                  extension_link: (\n                    <a href=\"https://mytonwallet.io/\" target=\"_blank\" rel=\"noreferrer\">\n                      {renderText(aboutExtensionTitle)}\n                    </a>\n                  ),\n                })}\n              </p>\n            </>\n          )}\n          <h3 className={buildClassName(styles.text, styles.heading)}>\n            <i className={buildClassName(styles.github, 'icon-github')} aria-hidden /> {lang('Is it open source?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_github', {\n              github_link: (\n                <a href={APP_REPO_URL} target=\"_blank\" rel=\"noreferrer\">\n                  {renderText(lang('$about_github_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n          <h3 className={styles.heading}>\n            <i\n              className={buildClassName(styles.telegram, 'icon-telegram')}\n              aria-hidden\n            /> {lang('Is there a community?')}\n          </h3>\n          <p className={styles.text}>\n            {lang('$about_wallet_community', {\n              community_link: (\n                <a\n                  href={lang.code === 'ru' ? 'https://t.me/MyTonWalletRu' : 'https://t.me/MyTonWalletEn'}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                >\n                  {renderText(lang('$about_community_link_text'))}\n                </a>\n              ),\n            })}\n          </p>\n        </div>\n        <div className={styles.aboutFooterWrapper}>\n          <div className={styles.aboutFooterContent}>\n            <a\n              href=\"https://mytonwallet.io/terms-of-use\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleUrlClick}\n            >{lang('Terms of Use')}\n            </a>\n            <i className={styles.dotLarge} aria-hidden />\n            <a\n              href=\"https://mytonwallet.io/privacy-policy\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              onClick={handleUrlClick}\n            >{lang('Privacy Policy')}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsAbout);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ULZ34zm7\",\"transitionContainer\":\"IpdZLqJd\",\"transitionSlide\":\"XE9A_oIT\",\"container\":\"PaAMLiEx\",\"container_scrollable\":\"Kl8WYoh1\",\"containerScrollable\":\"Kl8WYoh1\",\"container_password\":\"UbkFqyhU\",\"containerPassword\":\"UbkFqyhU\",\"containerAlignTop\":\"kjX3jz7x\",\"containerFullSize\":\"TyvpW2dz\",\"aboutHeader\":\"fW4ULVz8\",\"logo\":\"ehC1Upu8\",\"appName\":\"IDG3Q9do\",\"title\":\"GWv6k9kV\",\"title_afterSmallSticker\":\"A9um3wzK\",\"titleAfterSmallSticker\":\"A9um3wzK\",\"titleSmallMargin\":\"XUVoSlvz\",\"infoBlock\":\"PxIcz2Ce\",\"text\":\"ehvMomrX\",\"informationCheckbox\":\"EnuqqZk3\",\"informationCheckboxContent\":\"GFpWMNm5\",\"info\":\"WrpQj6v4\",\"info_push\":\"I7MJaI4h\",\"infoPush\":\"I7MJaI4h\",\"info__space\":\"D8smEaJr\",\"infoSpace\":\"D8smEaJr\",\"infoPull\":\"NnW2gTZ2\",\"infoSmallFont\":\"NNleMmCd\",\"counter\":\"BMrG2A2B\",\"counterTitle\":\"IFpNJ6G4\",\"counterDigit\":\"FvuWBVMK\",\"small\":\"I1fhFmAn\",\"sticker\":\"hkc_A2ok\",\"viewModeSticker\":\"lD3yvgO7\",\"stickerAndTitle\":\"I_XB4JzC\",\"backupNotice\":\"jSFFHbPH\",\"backupNoticeButtons\":\"kUt_RfrB\",\"modalSticker\":\"oxNcdksx\",\"form\":\"VKREIrDv\",\"formWidgets\":\"Vj7_u12z\",\"passwordForm\":\"Stc9sPH6\",\"errors\":\"vozeQrSV\",\"passwordRules\":\"usE91GiK\",\"passwordRule\":\"zwUB1a_J\",\"valid\":\"tAmeBNo9\",\"error\":\"B8vH7CYQ\",\"buttons\":\"ODle5ROH\",\"buttons__inner\":\"oNN6ymiQ\",\"buttonsInner\":\"oNN6ymiQ\",\"footerButton\":\"sarw89g5\",\"btn\":\"SWvNin2D\",\"btn_push\":\"W1k0H_HF\",\"btnPush\":\"W1k0H_HF\",\"btn_text\":\"qoCa264k\",\"btnText\":\"qoCa264k\",\"btn_about\":\"hc6SmKii\",\"btnAbout\":\"hc6SmKii\",\"btn_wide\":\"nfn0Ol3p\",\"btnWide\":\"nfn0Ol3p\",\"btn_mini\":\"Q2imCrap\",\"btnMini\":\"Q2imCrap\",\"btn_single\":\"uEEAE1sZ\",\"btnSingle\":\"uEEAE1sZ\",\"btnHalfWidth\":\"X7zz6SZl\",\"modalDialog\":\"fGexmyHI\",\"privateKey\":\"q7ZIxYSc\",\"importingContent\":\"NH8rGjmE\",\"footerError\":\"BZGziOTc\",\"importButtonsBlock\":\"NM17kdjV\",\"importButtonsBlockSimple\":\"PPE4xSFG\",\"importText\":\"MHwkgrIZ\",\"importButtons\":\"dYD_CpfV\",\"biometricsStep\":\"t3qgjBKg\",\"warning\":\"bs9tLaLO\",\"biometricsError\":\"Es3mlsbs\",\"stepTransition\":\"POUbGjea\",\"passwordFormContainer\":\"t9A5nUYe\",\"header\":\"iowmPhKV\",\"headerTitle\":\"x58Cmt9r\",\"pinPadHeader\":\"yHcMeGVS\",\"headerBack\":\"ZzxVO58v\",\"headerBackBlock\":\"NVF8z8CV\",\"iconChevron\":\"vP8i059j\",\"biometricsIcon\":\"ss3uFaAC\",\"biometricsTitle\":\"VTH_ATCk\",\"biometricsSubtitle\":\"C3vZhdz7\",\"actionsSection\":\"Lfkf9AW5\",\"importModalContent\":\"vb2ESy1T\",\"disclaimerBackupDialog\":\"ZjhuaYXI\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport PasswordForm from '../ui/PasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  method?: AuthMethod;\n  error?: string;\n}\n\nfunction AuthCheckPassword({\n  isActive, isLoading, error, method,\n}: OwnProps) {\n  const { resetAuth, cleanAuthError, addAccount } = getActions();\n  const lang = useLang();\n\n  const isImporting = method !== 'createAccount';\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isImporting ? 'importMnemonic' : 'createAccount', password, isAuthFlow: true });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        containerClassName={styles.passwordForm}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={handleSubmit}\n        onCancel={resetAuth}\n        onUpdate={cleanAuthError}\n      >\n        <div className={styles.title}>{lang('Enter your password')}</div>\n      </PasswordForm>\n    </div>\n  );\n}\n\nexport default memo(AuthCheckPassword);\n","// extracted by mini-css-extract-plugin\nexport default {\"suggestions\":\"wSbrkEKB\",\"bottom\":\"YGdWEJ33\",\"top\":\"jKY8_1nT\",\"suggestion\":\"MtG_CWxm\",\"active\":\"kdLCV21p\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './SuggestionList.module.scss';\n\ntype OwnProps = {\n  position?: 'top' | 'bottom';\n  suggestions: string[];\n  activeIndex?: number;\n  isInModal?: boolean;\n  onSelect: (suggest: string) => void;\n};\n\nfunction SuggestionList({\n  position = 'bottom',\n  suggestions,\n  activeIndex,\n  isInModal,\n  onSelect,\n}: OwnProps) {\n  const lang = useLang();\n\n  const handleClick = (e: React.MouseEvent) => {\n    e.preventDefault();\n\n    const suggest = (e.target as HTMLLIElement).innerText.trim();\n    onSelect(suggest);\n  };\n\n  return suggestions.length ? (\n    <ul className={buildClassName(styles.suggestions, styles[position], isInModal && styles.embedded)}>\n      {suggestions.map((suggestion, index) => {\n        return (\n          <li\n            key={suggestion}\n            role=\"button\"\n            tabIndex={0}\n            className={buildClassName(styles.suggestion, index === activeIndex && styles.active)}\n            onMouseDown={handleClick}\n          >\n            {suggestion}\n          </li>\n        );\n      })}\n    </ul>\n  ) : (\n    <div className={styles.suggestions}>\n      <li className={styles.suggestion}>{lang('No suggestions, you\\'re on your own!')}</li>\n    </div>\n  );\n}\n\nexport default memo(SuggestionList);\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"fZW_3WXP\",\"wrapper_focus\":\"sqh1ynr8\",\"wrapperFocus\":\"sqh1ynr8\",\"wrapper_error\":\"z4J8kfq3\",\"wrapperError\":\"z4J8kfq3\",\"input\":\"L1vlW70a\",\"label\":\"Qg48sdUG\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { PRIVATE_KEY_HEX_LENGTH } from '../../config';\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { callApi } from '../../api';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SuggestionList from '../ui/SuggestionList';\n\nimport styles from './InputMnemonic.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  nextId?: string;\n  labelText?: string;\n  className?: string;\n  value?: string;\n  isInModal?: boolean;\n  suggestionsPosition?: 'top' | 'bottom';\n  inputArg?: any;\n  onInput: (value: string, inputArg?: any) => void;\n  onEnter?: NoneToVoidFunction;\n};\n\nconst SUGGESTION_WORDS_COUNT = 7;\n\nfunction InputMnemonic({\n  id, nextId, labelText, className, value = '', isInModal, suggestionsPosition, inputArg, onInput, onEnter,\n}: OwnProps) {\n  const [hasFocus, markFocus, unmarkFocus] = useFlag();\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [filteredSuggestions, setFilteredSuggestions] = useState<string[]>([]);\n  const [activeSuggestionIndex, setActiveSuggestionIndex] = useState<number>(0);\n  const [areSuggestionsShown, setAreSuggestionsShown] = useState<boolean>(false);\n  const [wordlist, setWordlist] = useState<string[]>([]);\n  const shouldRenderSuggestions = areSuggestionsShown && value && filteredSuggestions.length > 0;\n\n  useEffect(() => {\n    void callApi('getMnemonicWordList').then((words) => setWordlist(words ?? []));\n  }, []);\n\n  useEffect(() => {\n    const noError = !value\n      || (areSuggestionsShown && filteredSuggestions.length > 0)\n      || isCorrectMnemonic(value, wordlist);\n    setHasError(!noError);\n  }, [areSuggestionsShown, filteredSuggestions.length, value, wordlist]);\n\n  const processSuggestions = (userInput: string) => {\n    // Filter our suggestions that don't contain the user's input\n    const unLinked = wordlist.filter(\n      (suggestion) => suggestion.toLowerCase().startsWith(userInput.toLowerCase()),\n    ).slice(0, SUGGESTION_WORDS_COUNT);\n\n    onInput(userInput, inputArg);\n    setFilteredSuggestions(unLinked);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(true);\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const userInput = e.target.value;\n\n    processSuggestions(userInput);\n  };\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    const pastedValue = e.clipboardData.getData('text');\n\n    if (!pastedValue) return;\n\n    processSuggestions(pastedValue);\n  };\n\n  const handleEnter = useLastCallback((e: KeyboardEvent) => {\n    if (!value) return;\n\n    if (onEnter && !areSuggestionsShown) {\n      onEnter();\n    }\n\n    const suggestedValue = filteredSuggestions[activeSuggestionIndex];\n    if (!suggestedValue) return;\n    onInput(suggestedValue, inputArg);\n    setFilteredSuggestions([suggestedValue]);\n    setActiveSuggestionIndex(0);\n    setAreSuggestionsShown(false);\n\n    if (areSuggestionsShown) {\n      e.preventDefault();\n    }\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  useEffect(() => {\n    return hasFocus ? captureKeyboardListeners({\n      onEnter: handleEnter,\n      onTab: (e: KeyboardEvent) => {\n        if (!(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {\n          handleEnter(e);\n        }\n      },\n      onUp: () => {\n        if (activeSuggestionIndex > 0) {\n          setActiveSuggestionIndex(activeSuggestionIndex - 1);\n        }\n      },\n      onDown: () => {\n        if (activeSuggestionIndex < filteredSuggestions.length - 1) {\n          setActiveSuggestionIndex(activeSuggestionIndex + 1);\n        }\n      },\n    }) : undefined;\n  });\n\n  const handleClick = useLastCallback((suggestion: string) => {\n    onInput(suggestion, inputArg);\n    setAreSuggestionsShown(false);\n    setActiveSuggestionIndex(0);\n    setFilteredSuggestions([]);\n\n    if (nextId) {\n      requestMeasure(() => {\n        requestMeasure(() => {\n          const nextInput = document.getElementById(nextId);\n          nextInput?.focus();\n          (nextInput as HTMLInputElement)?.select();\n        });\n      });\n    }\n  });\n\n  const handleFocus = (e: React.FocusEvent<HTMLInputElement>) => {\n    processSuggestions(e.target.value);\n    markFocus();\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Remove focus from the input element to ensure correct blur handling, especially when triggered by window switching\n    e.target.blur();\n\n    unmarkFocus();\n    requestAnimationFrame(() => {\n      setAreSuggestionsShown(false);\n      setFilteredSuggestions([]);\n    });\n  };\n\n  return (\n    <div className={buildClassName(\n      styles.wrapper,\n      className,\n      hasFocus && styles.wrapper_focus,\n      hasError && styles.wrapper_error,\n    )}\n    >\n      {shouldRenderSuggestions && (\n        <SuggestionList\n          suggestions={filteredSuggestions}\n          activeIndex={activeSuggestionIndex}\n          position={suggestionsPosition}\n          isInModal={isInModal}\n          onSelect={handleClick}\n        />\n      )}\n      <label className={styles.label} htmlFor={id}>{labelText}.</label>\n      <input\n        id={id}\n        className={buildClassName(styles.input, value !== '' && styles.touched)}\n        type=\"text\"\n        autoCapitalize=\"none\"\n        autoComplete=\"off\"\n        autoCorrect={false}\n        spellCheck={false}\n        onChange={handleChange}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPaste={handlePaste}\n        value={value}\n        tabIndex={0}\n        data-focus-scroll-position={suggestionsPosition === 'top' ? 'end' : 'start'}\n      />\n    </div>\n  );\n}\n\nfunction isCorrectMnemonic(mnemonic: string, wordlist: string[]) {\n  return mnemonic.length === PRIVATE_KEY_HEX_LENGTH || wordlist.includes(mnemonic);\n}\n\nexport default memo(InputMnemonic);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalSticker\":\"L6u18JBd\",\"buttonWrapper\":\"NvN6uNIF\",\"footerButton\":\"u7rnL9q6\",\"checkMnemonicInput\":\"_YK5KiZw\",\"error\":\"WeqRS7VQ\",\"checkMnemonicForm\":\"ftYLMV0R\",\"info\":\"o4FCVeIa\",\"mnemonicContainer\":\"lRHp5zzY\",\"warning\":\"jCCt2XRK\",\"words\":\"Yaqcau6G\",\"word\":\"qdW2OhFc\",\"small\":\"pfd8fIrT\"};","import type { FormEvent } from 'react';\nimport React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport { MNEMONIC_CHECK_COUNT } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { areSortedArraysEqual } from '../../../util/iteratees';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport InputMnemonic from '../InputMnemonic';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInModal?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n  descriptionClassName?: string;\n  formClassName?: string;\n  errorClassName?: string;\n  onSubmit: AnyFunction;\n}\n\nfunction CheckWordsForm({\n  isActive,\n  isInModal,\n  checkIndexes,\n  mnemonic,\n  descriptionClassName,\n  formClassName,\n  errorClassName,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n  const [words, setWords] = useState<Record<number, string>>({});\n  const [hasMnemonicError, setHasMnemonicError] = useState(false);\n\n  const handleMnemonicCheckSubmit = useLastCallback((e: FormEvent) => {\n    e.preventDefault();\n    const answer = mnemonic && checkIndexes?.map((index) => mnemonic[index]);\n    if (answer && areSortedArraysEqual(answer, Object.values(words))) {\n      onSubmit();\n    } else {\n      setHasMnemonicError(true);\n    }\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setWords({});\n      setHasMnemonicError(false);\n    }\n  }, [isActive]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    setWords({\n      ...words,\n      [index]: value?.toLowerCase(),\n    });\n  });\n\n  return (\n    <>\n      <p className={descriptionClassName}>\n        {renderText(lang('$mnemonic_check_words_list', checkIndexes?.map((n) => n + 1)?.join(', ')))}\n      </p>\n\n      <form className={formClassName} onSubmit={handleMnemonicCheckSubmit} id=\"check_mnemonic_form\">\n        {checkIndexes!.map((key, i) => (\n          <InputMnemonic\n            key={key}\n            id={`check-mnemonic-${i}`}\n            nextId={i + 1 < MNEMONIC_CHECK_COUNT ? `check-mnemonic-${i + 1}` : undefined}\n            labelText={`${key + 1}`}\n            value={words[key]}\n            isInModal={isInModal}\n            suggestionsPosition={i <= 1 ? 'bottom' : 'top'}\n            inputArg={key}\n            className={styles.checkMnemonicInput}\n            onInput={handleSetWord}\n          />\n        ))}\n      </form>\n\n      {hasMnemonicError && (\n        <div className={errorClassName}>\n          {renderText(lang('$mnemonic_check_error'))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default memo(CheckWordsForm);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CheckWordsForm from './CheckWordsForm';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  checkIndexes?: number[];\n  mnemonic?: string[];\n}\n\nfunction CheckWordsContent({\n  isActive,\n  checkIndexes,\n  mnemonic,\n}: OwnProps) {\n  const { closeCheckWordsPage } = getActions();\n\n  const onSubmit = useLastCallback(() => {\n    closeCheckWordsPage({ isBackupCreated: true });\n  });\n\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$check_words_description'))}\n      </p>\n\n      <CheckWordsForm\n        descriptionClassName={buildClassName(styles.info, styles.small)}\n        formClassName={styles.checkMnemonicForm}\n        isActive={isActive}\n        mnemonic={mnemonic}\n        checkIndexes={checkIndexes}\n        errorClassName={styles.error}\n        onSubmit={onSubmit}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          forFormId=\"check_mnemonic_form\"\n          className={styles.footerButton}\n        >\n          {lang('Continue')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(CheckWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsContent from '../common/backup/CheckWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n}\n\nconst AuthCheckWords = ({ isActive, mnemonic, checkIndexes }: OwnProps) => {\n  const { openMnemonicPage } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack: openMnemonicPage });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openMnemonicPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Let\\'s Check!')}</span>\n        </div>\n\n        <CheckWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCheckWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  biometricsStep?: 1 | 2;\n}\n\nconst START_BIOMETRICS_CONFIRMATION_DELAY_MS = SECOND;\n\nfunction AuthConfirmBiometrics({\n  isActive,\n  biometricsStep,\n  error,\n  isLoading,\n}: OwnProps) {\n  const {\n    afterCreateBiometrics,\n    resetAuth,\n    cancelCreateBiometrics,\n  } = getActions();\n\n  useTimeout(afterCreateBiometrics, isActive ? START_BIOMETRICS_CONFIRMATION_DELAY_MS : undefined, [isActive]);\n\n  const lang = useLang();\n  const shouldRenderSteps = Boolean(biometricsStep);\n  const shouldRenderError = Boolean(error && !shouldRenderSteps);\n  const renderingError = useCurrentOrPrev(error, true);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Turn On Biometrics')}</div>\n\n      {shouldRenderSteps && (\n        <div className={styles.biometricsStep}>\n          {lang(biometricsStep === 1 ? 'Step 1 of 2. Registration' : 'Step 2 of 2. Verification')}\n        </div>\n      )}\n      {shouldRenderError && (\n        <div className={buildClassName(styles.biometricsError)}>\n          <div>{lang(renderingError || 'Unknown error')}</div>\n          <div>{lang('Please try to confirm your biometrics again')}</div>\n        </div>\n      )}\n\n      <div className={styles.buttons}>\n        <div className={styles.buttons__inner}>\n          <Button\n            isDisabled={Boolean(biometricsStep) || isLoading}\n            className={buildClassName(styles.btn, styles.btnHalfWidth)}\n            onClick={cancelCreateBiometrics}\n          >\n            {lang('Cancel')}\n          </Button>\n\n          {shouldRenderError && (\n            <Button\n              isPrimary\n              className={buildClassName(styles.btn, styles.btnHalfWidth)}\n              isDisabled={Boolean(biometricsStep) || isLoading}\n              onClick={afterCreateBiometrics}\n            >\n              {lang('Try Again')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthConfirmBiometrics);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\ninterface StateProps {\n  pin: string;\n}\n\nconst SUBMIT_PAUSE_MS = 1500;\n\nconst AuthConfirmPin = ({\n  isActive,\n  method,\n  pin,\n}: OwnProps & StateProps) => {\n  const { confirmPin, cancelConfirmPin } = getActions();\n\n  const lang = useLang();\n  const [pinConfirm, setPinConfirm] = useState<string>('');\n  const [error, setError] = useState<string>('');\n  const [isConfirmed, setIsConfirmed] = useState<boolean>(false);\n  const isImporting = method !== 'createAccount';\n\n  const handleBackClick = useLastCallback(() => {\n    cancelConfirmPin({ isImporting });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (isActive) {\n      setPinConfirm('');\n      setError('');\n      setIsConfirmed(false);\n    }\n  }, [isActive]);\n\n  const handleChange = useLastCallback((value: string) => {\n    setPinConfirm(value);\n    setError('');\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    if (value === pin) {\n      setIsConfirmed(true);\n      await pause(SUBMIT_PAUSE_MS);\n      confirmPin({ isImporting });\n    } else {\n      setError(lang('Codes don\\'t match'));\n    }\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n\n      <PinPad\n        isActive={isActive}\n        title={isConfirmed ? lang('Code set successfully') : (error || lang('Enter your code again'))}\n        type={isConfirmed ? 'success' : (error ? 'error' : undefined)}\n        length={PIN_LENGTH}\n        value={pinConfirm}\n        onChange={handleChange}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    pin: global.auth.password,\n  };\n})(AuthConfirmPin));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nfunction AuthCreateBackup({ isActive }: OwnProps) {\n  const { skipCheckMnemonic, openAuthBackupWalletModal, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={resetAuth} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}> </span>\n        </div>\n\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n          previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n        />\n        <div className={styles.title}>{lang('Create Backup')}</div>\n        <div className={styles.info}>\n          <p className={styles.info__space}>{renderText(lang('$auth_backup_description1'))}</p>\n          <p>{renderText(lang('$auth_backup_description2'))}</p>\n          <p>{renderText(lang('$auth_backup_description3'))}</p>\n        </div>\n        <div className={styles.buttons}>\n          <Button\n            isPrimary\n            className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n            onClick={openAuthBackupWalletModal}\n          >\n            {lang('$back_up_auth')}\n          </Button>\n          {canSkipMnemonicCheck && (\n            <Button\n              isDestructive\n              isText\n              className={buildClassName(styles.btn, styles.btn_push)}\n              onClick={skipCheckMnemonic}\n            >\n              {lang('Later')}\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(AuthCreateBackup);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst AuthCreateBiometrics = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const {\n    startCreatingBiometrics,\n    resetAuth,\n    skipCreateBiometrics,\n  } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n        previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={styles.title}>{lang('Congratulations!')}</div>\n      <p className={styles.info}>\n        <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n      </p>\n      <p className={styles.info}>\n        {lang('Create a password or use biometric authentication to protect it.')}\n      </p>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          onClick={startCreatingBiometrics}\n        >\n          {lang('Connect Biometrics')}\n        </Button>\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateBiometrics}\n        >\n          {lang('Use Password')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateBiometrics);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { getIsFaceIdAvailable, getIsTouchIdAvailable } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport touchIdSvg from '../../assets/settings/settings_biometrics.svg';\nimport faceIdSvg from '../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n}\n\nconst AuthCreateNativeBiometrics = ({ isActive, isLoading }: OwnProps) => {\n  const { afterCreateNativeBiometrics, skipCreateNativeBiometrics, resetAuth } = getActions();\n\n  const lang = useLang();\n\n  const isFaceId = getIsFaceIdAvailable();\n  const isTouchId = getIsTouchIdAvailable();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  return (\n    <div className={styles.container}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <img\n        src={isFaceId ? faceIdSvg : touchIdSvg}\n        alt=\"\"\n        className={styles.biometricsIcon}\n      />\n\n      <div className={styles.biometricsTitle}>\n        {isFaceId ? lang('Use Face ID') : (isTouchId ? lang('Use Touch ID') : lang('Use Biometrics'))}\n      </div>\n      <div className={styles.biometricsSubtitle}>\n        {lang('You can connect your biometric data for more convenience')}\n      </div>\n\n      <div className={styles.buttons}>\n        <Button\n          isPrimary\n          className={styles.btn}\n          isLoading={isLoading}\n          onClick={!isLoading ? afterCreateNativeBiometrics : undefined}\n        >\n          {lang(isFaceId ? 'Connect Face ID' : (isTouchId ? 'Connect Touch ID' : 'Connect Biometrics'))}\n        </Button>\n        <Button\n          isText\n          isDisabled={isLoading}\n          className={buildClassName(styles.btn, styles.btn_text)}\n          onClick={skipCreateNativeBiometrics}\n        >\n          {lang('Not Now')}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreateNativeBiometrics);\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst SPECIAL_CHARS_REGEX = /[`!@#$%^&*()_+\\-=\\]{};':\"\\\\|,.<>?~]/;\n\ninterface OwnProps {\n  firstPassword?: string;\n  secondPassword?: string;\n  requiredMinLength?: number;\n  requiredLength?: number;\n  isOnlyNumbers?: boolean;\n}\n\nexport const usePasswordValidation = ({\n  firstPassword = '',\n  secondPassword = '',\n  requiredMinLength = 8,\n  requiredLength,\n  isOnlyNumbers,\n}: OwnProps) => {\n  const [invalidLength, setInvalidLength] = useState(false);\n  const [noNumber, setNoNumber] = useState(false);\n  const [noUpperCase, setNoUpperCase] = useState(false);\n  const [noLowerCase, setNoLowerCase] = useState(false);\n  const [noSpecialChar, setNoSpecialChar] = useState(false);\n  const [noEqual, setNoEqual] = useState(false);\n\n  useEffect(() => {\n    const isInvalidLength = Boolean(\n      (!requiredLength && firstPassword.length < requiredMinLength)\n      || (requiredLength && firstPassword.length !== requiredLength),\n    );\n    setInvalidLength(isInvalidLength);\n    setNoUpperCase(!isOnlyNumbers && firstPassword.toLowerCase() === firstPassword);\n    setNoLowerCase(!isOnlyNumbers && firstPassword.toUpperCase() === firstPassword);\n    setNoNumber(!/\\d/.test(firstPassword));\n    setNoEqual(Boolean(firstPassword && firstPassword !== secondPassword));\n    setNoSpecialChar(!isOnlyNumbers && !SPECIAL_CHARS_REGEX.test(firstPassword));\n  }, [firstPassword, secondPassword, requiredMinLength, isOnlyNumbers, requiredLength]);\n\n  return {\n    invalidLength, noNumber, noUpperCase, noLowerCase, noEqual, noSpecialChar,\n  };\n};\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePasswordValidation } from '../../hooks/usePasswordValidation';\n\nimport Button from './Button';\nimport Input from './Input';\nimport Modal from './Modal';\n\nimport styles from '../auth/Auth.module.scss';\nimport modalStyles from './Modal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isLoading?: boolean;\n  containerClassName?: string;\n  formId: string;\n  onCancel: NoneToVoidFunction;\n  onSubmit: (password: string, isPasswordNumeric: boolean) => void;\n}\n\nfunction CreatePasswordForm({\n  isActive, isLoading, formId, onCancel, onSubmit, containerClassName,\n}: OwnProps) {\n  const lang = useLang();\n  const isMobile = IS_IOS || IS_ANDROID;\n\n  const firstInputRef = useRef<HTMLInputElement>();\n\n  const [isJustSubmitted, setIsJustSubmitted] = useState<boolean>(false);\n  const [firstPassword, setFirstPassword] = useState<string>('');\n  const [secondPassword, setSecondPassword] = useState<string>('');\n  const [isPasswordFocused, markPasswordFocused, unmarkPasswordFocused] = useFlag(false);\n  const [isWeakPasswordModalOpen, openWeakPasswordModal, closeWeakPasswordModal] = useFlag(false);\n\n  const [hasError, setHasError] = useState<boolean>(false);\n  const [isPasswordsNotEqual, setIsPasswordsNotEqual] = useState<boolean>(false);\n  const [isSecondPasswordFocused, markSecondPasswordFocused, unmarkSecondPasswordFocused] = useFlag(false);\n  const canSubmit = isActive && firstPassword.length > 0 && secondPassword.length > 0 && !hasError;\n\n  const shouldRenderError = hasError && !isPasswordFocused;\n\n  const validation = usePasswordValidation({\n    firstPassword,\n    secondPassword,\n    isOnlyNumbers: isMobile,\n    requiredLength: isMobile ? PIN_LENGTH : undefined,\n  });\n\n  useFocusAfterAnimation(firstInputRef, !isActive);\n\n  useEffect(() => {\n    setIsPasswordsNotEqual(false);\n    if (firstPassword === '' || !isActive || isPasswordFocused) {\n      setHasError(false);\n      return;\n    }\n\n    const { noEqual, invalidLength } = validation;\n\n    if ((!isSecondPasswordFocused || isJustSubmitted) && noEqual && secondPassword !== '') {\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n    } else if (!noEqual || secondPassword === '' || (isSecondPasswordFocused && !isJustSubmitted)) {\n      setHasError(false);\n    }\n    if (isMobile && invalidLength && !isJustSubmitted) {\n      setHasError(true);\n    }\n  }, [\n    isActive, firstPassword, secondPassword, validation, isSecondPasswordFocused, isPasswordFocused, isJustSubmitted,\n    isMobile,\n  ]);\n\n  const handleFirstPasswordChange = useLastCallback((value: string) => {\n    setFirstPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSecondPasswordChange = useLastCallback((value: string) => {\n    setSecondPassword(value);\n    if (isJustSubmitted) {\n      setIsJustSubmitted(false);\n    }\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (firstPassword !== secondPassword) {\n      setIsJustSubmitted(true);\n      setHasError(true);\n      setIsPasswordsNotEqual(true);\n      return;\n    }\n\n    const isWeakPassword = Object.values(validation).find((rule) => rule);\n\n    if (!isMobile && isWeakPassword && !isWeakPasswordModalOpen) {\n      openWeakPasswordModal();\n      return;\n    }\n\n    if (isWeakPasswordModalOpen) {\n      closeWeakPasswordModal();\n    }\n\n    onSubmit(firstPassword, isMobile);\n  });\n\n  function renderErrors() {\n    if (isPasswordsNotEqual) {\n      return (\n        <div className={buildClassName(styles.errors, styles.error)}>\n          {lang('Passwords must be equal.')}\n        </div>\n      );\n    }\n\n    const {\n      invalidLength,\n      noUpperCase,\n      noLowerCase,\n      noNumber,\n      noSpecialChar,\n    } = validation;\n\n    if (isMobile) {\n      return (\n        <div className={styles.passwordRules}>\n          <span className={getValidationRuleClass(shouldRenderError, invalidLength || noNumber)}>\n            {lang('Password must contain %length% digits.', { length: PIN_LENGTH })}\n          </span>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.passwordRules}>\n        {lang('To protect your wallet as much as possible, use a password with')}\n        <span className={getValidationRuleClass(shouldRenderError, invalidLength)}>\n          {' '}{lang('$auth_password_rule_8chars')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noLowerCase)}>\n          {' '}{lang('$auth_password_rule_one_small_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noUpperCase)}>\n          {' '}{lang('$auth_password_rule_one_capital_char')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noNumber)}>\n          {' '}{lang('$auth_password_rule_one_digit')},\n        </span>\n        <span className={getValidationRuleClass(shouldRenderError, noSpecialChar)}>\n          {' '}{lang('$auth_password_rule_one_special_char')}\n        </span>.\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form id={formId} className={buildClassName(styles.form, containerClassName)} onSubmit={handleSubmit}>\n        <div className={styles.formWidgets}>\n          <Input\n            ref={firstInputRef}\n            type=\"password\"\n            isRequired\n            id=\"first-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            hasError={shouldRenderError}\n            placeholder={lang('Enter your password...')}\n            value={firstPassword}\n            autoComplete=\"new-password\"\n            onInput={handleFirstPasswordChange}\n            onFocus={markPasswordFocused}\n            onBlur={unmarkPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n          />\n          <Input\n            type=\"password\"\n            isRequired\n            id=\"second-password\"\n            inputMode={isMobile ? 'numeric' : undefined}\n            placeholder={lang('...and repeat it')}\n            hasError={isPasswordsNotEqual}\n            value={secondPassword}\n            autoComplete=\"new-password\"\n            onInput={handleSecondPasswordChange}\n            onFocus={markSecondPasswordFocused}\n            onBlur={unmarkSecondPasswordFocused}\n            className={styles.input}\n            maxLength={isMobile ? PIN_LENGTH : undefined}\n          />\n        </div>\n\n        {renderErrors()}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button} isDisabled={isLoading}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isSubmit\n            isPrimary\n            isDisabled={isPasswordsNotEqual || firstPassword === ''}\n            isLoading={isLoading}\n            className={modalStyles.button}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </form>\n\n      <Modal\n        isOpen={isWeakPasswordModalOpen}\n        isCompact\n        onClose={closeWeakPasswordModal}\n        title={lang('Insecure Password')}\n      >\n        <p className={modalStyles.text}>\n          {lang('Your have entered an insecure password, which can be easily guessed by scammers.')}\n        </p>\n        <p className={modalStyles.text}>\n          {lang('Continue or change password to something more secure?')}\n        </p>\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n          <Button isPrimary onClick={closeWeakPasswordModal} className={modalStyles.button}>{lang('Change')}</Button>\n          <Button forFormId={formId} isSubmit isDestructive className={modalStyles.button}>{lang('Continue')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(CreatePasswordForm);\n\nfunction getValidationRuleClass(shouldRenderError: boolean, ruleHasError: boolean) {\n  return buildClassName(\n    styles.passwordRule,\n    !ruleHasError ? styles.valid : shouldRenderError ? styles.invalid : undefined,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { getIsBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n  isLoading?: boolean;\n}\n\nconst AuthCreatePassword = ({\n  isActive,\n  method,\n  isLoading,\n}: OwnProps) => {\n  const { afterCreatePassword, resetAuth } = getActions();\n\n  const lang = useLang();\n  const isImporting = method !== 'createAccount';\n  const formId = getFormId(method!);\n  const withDescription = !getIsBiometricAuthSupported();\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric: boolean) => {\n    afterCreatePassword({ password, isPasswordNumeric });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n        previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, !withDescription && styles.titleSmallMargin)}>\n        {lang(withDescription ? 'Congratulations!' : 'Create Password')}\n      </div>\n      {withDescription && (\n        <>\n          <p className={styles.info}>\n            <b>{lang(isImporting ? 'The wallet is imported' : 'The wallet is ready')}.</b>\n          </p>\n          <p className={styles.info}>\n            {lang('Create a password to protect it.')}\n          </p>\n        </>\n      )}\n\n      <CreatePasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        formId={formId}\n        onCancel={resetAuth}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nfunction getFormId(method: AuthMethod) {\n  switch (method) {\n    case 'createAccount':\n      return 'auth_create_password';\n    case 'importMnemonic':\n      return 'auth_import_mnemonic_password';\n    case 'importHardwareWallet':\n      return 'auth_import_hardware_password';\n  }\n}\n\nexport default memo(AuthCreatePassword);\n","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { AuthMethod } from '../../global/types';\n\nimport { PIN_LENGTH } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { pause } from '../../util/schedulers';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport PinPad from '../ui/PinPad';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  method?: AuthMethod;\n}\n\nconst SUBMIT_PAUSE_MS = 750;\n\nconst AuthCreatePin = ({\n  isActive,\n  method,\n}: OwnProps) => {\n  const { createPin, resetAuth } = getActions();\n\n  const lang = useLang();\n  const [pin, setPin] = useState<string>('');\n  const isImporting = method !== 'createAccount';\n\n  useEffect(() => {\n    if (isActive) {\n      setPin('');\n    }\n  }, [isActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: resetAuth,\n  });\n\n  const handleSubmit = useLastCallback(async (value: string) => {\n    await pause(SUBMIT_PAUSE_MS);\n    createPin({ pin: value, isImporting });\n  });\n\n  return (\n    <div className={buildClassName(styles.container, styles.containerFullSize)}>\n      <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n        <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <div className={styles.pinPadHeader}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n          previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.title}>{lang(isImporting ? 'Wallet is imported!' : 'Wallet is ready!')}</div>\n      </div>\n      <PinPad\n        isActive={isActive}\n        title={lang('Create a code to protect it')}\n        length={PIN_LENGTH}\n        value={pin}\n        onChange={setPin}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default memo(AuthCreatePin);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useTimeout from '../../hooks/useTimeout';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst START_DELAY = 700;\nconst INTERVAL = SECOND;\n\nconst AuthCreatingWallet = ({ isActive }: OwnProps) => {\n  const lang = useLang();\n  const [one, markOne] = useFlag();\n  const [two, markTwo] = useFlag();\n  const [three, markThree] = useFlag();\n\n  useTimeout(markOne, isActive ? START_DELAY : undefined);\n  useTimeout(markTwo, isActive ? START_DELAY + INTERVAL : undefined);\n  useTimeout(markThree, isActive ? START_DELAY + INTERVAL * 2 : undefined);\n\n  const oneRef = useMediaTransition<HTMLElement>(one);\n  const twoRef = useMediaTransition<HTMLElement>(two);\n  const threeRef = useMediaTransition<HTMLElement>(three);\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n      />\n      <div className={styles.title}>{lang('Creating Wallet...')}</div>\n\n      <div className={styles.counter}>\n        <p className={styles.counterTitle}>{lang('On the count of three...')}</p>\n        <b ref={oneRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>1</b>\n        <b ref={twoRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>2</b>\n        <b ref={threeRef} className={buildClassName(styles.counterDigit, 'rounded-font')}>3</b>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthCreatingWallet);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_PRODUCTION } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onSkip: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AuthBackupWarning({ isOpen, onSkip, onClose }: OwnProps) {\n  const { openAuthBackupWalletModal } = getActions();\n\n  const handleBackupClick = useLastCallback(() => {\n    onClose();\n    openAuthBackupWalletModal();\n  });\n\n  const lang = useLang();\n\n  const canSkipMnemonicCheck = !IS_PRODUCTION;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      forceBottomSheet\n      nativeBottomSheetKey=\"backup-warning\"\n      dialogClassName={styles.disclaimerBackupDialog}\n    >\n      <p className={styles.backupNotice}>{renderText(lang('$auth_backup_warning_notice'))}</p>\n      <div className={styles.backupNoticeButtons}>\n        <Button\n          isPrimary\n          className={buildClassName(styles.btn, styles.btn_wide, !canSkipMnemonicCheck && styles.btn_single)}\n          onClick={handleBackupClick}\n        >\n          {lang('Back Up Now')}\n        </Button>\n        {canSkipMnemonicCheck && (\n          <Button\n            isDestructive\n            className={buildClassName(styles.btn, styles.btn_mini)}\n            onClick={onSkip}\n          >\n            {lang('Later')}\n          </Button>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(AuthBackupWarning);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Checkbox from '../ui/Checkbox';\nimport AuthBackupWarning from './AuthBackupWarning';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isImport?: boolean;\n}\n\nconst CONFIRM_DELAY_MS = 350;\n\nconst AuthDisclaimer = ({\n  isActive, isImport,\n}: OwnProps) => {\n  const {\n    skipCheckMnemonic,\n    confirmDisclaimer,\n    cancelDisclaimer,\n  } = getActions();\n\n  const lang = useLang();\n  const [isInformationConfirmed, markInformationConfirmed, unmarkInformationConfirmed] = useFlag(false);\n\n  useHistoryBack({\n    isActive,\n    onBack: cancelDisclaimer,\n  });\n\n  const setIsInformationConfirmed = useLastCallback((isConfirmed: boolean) => {\n    if (isConfirmed) {\n      markInformationConfirmed();\n\n      if (isImport) {\n        window.setTimeout(confirmDisclaimer, CONFIRM_DELAY_MS);\n      }\n    } else {\n      unmarkInformationConfirmed();\n    }\n  });\n\n  useOpenFromMainBottomSheet('backup-warning', markInformationConfirmed);\n\n  const handleCloseBackupWarningModal = useLastCallback(() => {\n    setIsInformationConfirmed(false);\n  });\n\n  const handleSkipMnemonic = useLastCallback(() => {\n    skipCheckMnemonic();\n    handleCloseBackupWarningModal();\n  });\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n            className={styles.sticker}\n          />\n          <div className={styles.title}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={styles.infoBlock}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n\n        <Checkbox\n          id=\"information-confirmed\"\n          checked={isInformationConfirmed}\n          isDisabled={isImport && isInformationConfirmed}\n          className={styles.informationCheckbox}\n          contentClassName={styles.informationCheckboxContent}\n          onChange={setIsInformationConfirmed}\n        >\n          {lang('I have read and accept this information')}\n        </Checkbox>\n\n        {!isImport && (\n          <AuthBackupWarning\n            isOpen={isInformationConfirmed}\n            onClose={handleCloseBackupWarningModal}\n            onSkip={handleSkipMnemonic}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthDisclaimer);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX, IS_BIP39_MNEMONIC_ENABLED, MNEMONIC_COUNT, MNEMONIC_COUNTS, PRIVATE_KEY_HEX_LENGTH,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport { compact } from '../../util/iteratees';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useClipboardPaste from '../../hooks/useClipboardPaste';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport InputMnemonic from '../common/InputMnemonic';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  error?: string;\n  isLoading?: boolean;\n};\n\nconst MNEMONIC_INPUTS = [...Array(MNEMONIC_COUNT)].map((_, index) => ({\n  id: index,\n  label: `${index + 1}`,\n}));\nconst MAX_LENGTH = PRIVATE_KEY_HEX_LENGTH;\nconst SLIDE_ANIMATION_DURATION_MS = 250;\n\nconst AuthImportMnemonic = ({ isActive, isLoading, error }: OwnProps & StateProps) => {\n  const {\n    afterImportMnemonic,\n    resetAuth,\n    cleanAuthError,\n  } = getActions();\n\n  const lang = useLang();\n  const [mnemonic, setMnemonic] = useState<Record<number, string>>({});\n  const { isPortrait } = useDeviceScreen();\n\n  const handleMnemonicSet = useLastCallback((pastedMnemonic: string[]) => {\n    if (!MNEMONIC_COUNTS.includes(pastedMnemonic.length) && !isMnemonicPrivateKey(pastedMnemonic)) {\n      return;\n    }\n\n    // RAF is a workaround for several Android browsers (e.g. Vivaldi)\n    requestAnimationFrame(() => {\n      setMnemonic(pastedMnemonic);\n    });\n\n    if (document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).blur();\n    }\n  });\n\n  const handlePasteMnemonic = useLastCallback((pastedText: string) => {\n    const pastedMnemonic = parsePastedText(pastedText);\n\n    if (pastedMnemonic.length === 1 && document.activeElement?.id.startsWith('import-mnemonic-')) {\n      (document.activeElement as HTMLInputElement).value = pastedMnemonic[0];\n\n      const event = new Event('input');\n      (document.activeElement as HTMLInputElement).dispatchEvent(event);\n\n      return;\n    }\n\n    handleMnemonicSet(pastedMnemonic);\n  });\n\n  useClipboardPaste(Boolean(isActive), handlePasteMnemonic);\n\n  const isSubmitDisabled = useMemo(() => {\n    const mnemonicValues = compact(Object.values(mnemonic));\n\n    return (!MNEMONIC_COUNTS.includes(mnemonicValues.length) && !isMnemonicPrivateKey(mnemonicValues))\n      || !!error;\n  }, [mnemonic, error]);\n\n  const handleSetWord = useLastCallback((value: string, index: number) => {\n    cleanAuthError();\n    const pastedMnemonic = parsePastedText(value);\n    if (MNEMONIC_COUNTS.includes(pastedMnemonic.length)) {\n      handleMnemonicSet(pastedMnemonic);\n      return;\n    }\n\n    setMnemonic({\n      ...mnemonic,\n      [index]: pastedMnemonic[0].toLowerCase(),\n    });\n  });\n\n  const handleCancel = useLastCallback(() => {\n    setTimeout(() => {\n      resetAuth();\n    }, SLIDE_ANIMATION_DURATION_MS);\n  });\n\n  const handleSubmit = useLastCallback(async () => {\n    if (isSubmitDisabled) return;\n\n    const mnemonicValues = compact(Object.values(mnemonic));\n    if (mnemonicValues.length === 12) {\n      const isShortMnemonicValid = await callApi('validateMnemonic', mnemonicValues);\n      if (!isShortMnemonicValid) return;\n    }\n\n    afterImportMnemonic({ mnemonic: mnemonicValues });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancel,\n  });\n\n  useEffect(() => {\n    return isSubmitDisabled || isLoading\n      ? undefined\n      : captureKeyboardListeners({\n        onEnter: { handler: handleSubmit, noStopPropagation: true },\n      });\n  }, [handleSubmit, isLoading, isSubmitDisabled, mnemonic]);\n\n  return (\n    <div className={buildClassName(styles.container, styles.container_scrollable, 'custom-scroll')}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        size={ANIMATED_STICKER_SMALL_SIZE_PX}\n        tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n        previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n        nonInteractive\n        noLoop={false}\n        className={styles.sticker}\n      />\n      <div className={buildClassName(styles.title, styles.title_afterSmallSticker)}>\n        {lang('Enter Secret Words')}\n      </div>\n      <div className={buildClassName(styles.info, styles.infoSmallFont, styles.infoPull)}>\n        {renderText(lang(IS_BIP39_MNEMONIC_ENABLED\n          ? '$auth_import_mnemonic_description'\n          : '$auth_import_24_mnemonic_description'))}\n      </div>\n\n      <div className={styles.importingContent}>\n        {MNEMONIC_INPUTS.map(({ id, label }, i) => (\n          <InputMnemonic\n            key={id}\n            id={`import-mnemonic-${id}`}\n            nextId={id + 1 < MNEMONIC_COUNT ? `import-mnemonic-${id + 1}` : undefined}\n            labelText={label}\n            value={mnemonic[id]}\n            suggestionsPosition={getSuggestPosition(id, isPortrait)}\n            inputArg={id}\n            onInput={handleSetWord}\n            onEnter={i === MNEMONIC_COUNT - 1 ? handleSubmit : undefined}\n          />\n        ))}\n      </div>\n\n      <div className={styles.buttons}>\n        {error && <div className={styles.footerError}>{lang(error)}</div>}\n        <div className={styles.buttons__inner}>\n          <Button onClick={handleCancel} className={styles.footerButton}>\n            {lang('Cancel')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={isSubmitDisabled}\n            isLoading={isLoading}\n            className={styles.footerButton}\n            onClick={handleSubmit}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    error: global.auth.error,\n    isLoading: global.auth.isLoading,\n  };\n})(AuthImportMnemonic));\n\nfunction parsePastedText(str = '') {\n  return str\n    .replace(/(?:\\r\\n)+|[\\r\\n\\s;,\\t]+/g, ' ')\n    .trim()\n    .split(' ')\n    .map((w) => w.slice(0, MAX_LENGTH));\n}\n\nfunction getSuggestPosition(id: number, isPortrait: boolean = false) {\n  if (isPortrait) {\n    return 'top';\n  }\n\n  return ((id > 5 && id < 8) || (id > 13 && id < 16) || id > 21) ? 'top' : undefined;\n}\n","import { useEffect } from '../lib/teact/teact';\n\nconst MAX_MESSAGE_LENGTH = 4096;\n\nconst useClipboardPaste = (isActive: boolean, onPaste: (value: string) => void) => {\n  useEffect(() => {\n    if (!isActive) {\n      return undefined;\n    }\n\n    function handlePaste(e: ClipboardEvent) {\n      if (!e.clipboardData) {\n        return;\n      }\n\n      const pastedText = e.clipboardData.getData('text').substring(0, MAX_MESSAGE_LENGTH);\n\n      if (!pastedText) {\n        return;\n      }\n\n      e.preventDefault();\n\n      onPaste(pastedText);\n    }\n\n    document.addEventListener('paste', handlePaste, false);\n\n    return () => {\n      document.removeEventListener('paste', handlePaste, false);\n    };\n  }, [isActive, onPaste]);\n};\n\nexport default useClipboardPaste;\n","import React, {\n  memo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiImportAddressByChain } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isLoading?: boolean;\n  onCancel: NoneToVoidFunction;\n  onClose?: NoneToVoidFunction;\n};\n\nfunction AuthImportViewAccount({\n  isActive, isLoading, onCancel, onClose,\n}: OwnProps) {\n  const { importViewAccount } = getActions();\n\n  const lang = useLang();\n\n  const inputRef = useRef<HTMLInputElement>();\n  const [value, setValue] = useState<string>('');\n  const [isInvalidAddress, setIsInvalidAddress] = useState<boolean>(false);\n\n  useFocusAfterAnimation(inputRef, !isActive);\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const handleChange = useLastCallback((newValue: string) => {\n    setValue(newValue);\n    if (isInvalidAddress) {\n      setIsInvalidAddress(false);\n    }\n  });\n\n  function handleSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    if (isInvalidAddress || isLoading) return;\n\n    const addresses = value.trim().split(/\\s+/);\n    const addressByChain: ApiImportAddressByChain = {};\n\n    const hasValidAddress = addresses.reduce((isValid, address) => {\n      if (isValidAddressOrDomain(address, 'ton')) {\n        addressByChain.ton = address;\n        return true;\n      }\n\n      if (isValidAddressOrDomain(address, 'tron')) {\n        addressByChain.tron = address;\n        return true;\n      }\n\n      return isValid;\n    }, false);\n\n    if (hasValidAddress) {\n      importViewAccount({ addressByChain });\n      inputRef.current?.blur(); // To hide the virtual keyboard to show the loading indicator in the button\n    } else {\n      setIsInvalidAddress(true);\n    }\n  }\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('View Any Address')} onClose={onClose} onBackButtonClick={onCancel} />\n      <form\n        action=\"#\"\n        className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}\n        onSubmit={handleSubmit}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          noLoop={false}\n          nonInteractive\n          className={styles.viewModeSticker}\n        />\n\n        <Input\n          ref={inputRef}\n          value={value}\n          hasError={isInvalidAddress}\n          placeholder={lang('Wallet Address or Domain')}\n          autoCapitalize=\"none\"\n          autoComplete=\"off\"\n          autoCorrect={false}\n          onInput={handleChange}\n        />\n\n        <p className={styles.info}>{renderText(lang('$import_view_account_note'))}</p>\n\n        <div className={modalStyles.buttons}>\n          <Button\n            isPrimary\n            isSubmit\n            className={modalStyles.buttonFullWidth}\n            isLoading={isLoading}\n            isDisabled={isInvalidAddress}\n          >\n            {isInvalidAddress ? lang('Invalid Address') : lang('Continue')}\n          </Button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default memo(AuthImportViewAccount);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  customStickerClassName?: string;\n  customButtonWrapperClassName?: string;\n  isFullSizeButton?: boolean;\n  isActive?: boolean;\n  isFirstCheckboxSelected: boolean;\n  isSecondCheckboxSelected: boolean;\n  isThirdCheckboxSelected: boolean;\n  onFirstCheckboxClick: AnyFunction;\n  onSecondCheckboxClick: AnyFunction;\n  onThirdCheckboxClick: AnyFunction;\n  textFirst: string;\n  textSecond: string;\n  textThird: string;\n  onSubmit: () => void;\n}\n\nfunction SafetyRulesContent({\n  customStickerClassName,\n  customButtonWrapperClassName,\n  isFullSizeButton,\n  isActive,\n  isFirstCheckboxSelected,\n  isSecondCheckboxSelected,\n  isThirdCheckboxSelected,\n  textFirst,\n  textSecond,\n  textThird,\n  onFirstCheckboxClick,\n  onSecondCheckboxClick,\n  onThirdCheckboxClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const canSubmit = isFirstCheckboxSelected && isSecondCheckboxSelected && isThirdCheckboxSelected;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={customStickerClassName || styles.modalSticker}\n      />\n      <Checkbox\n        checked={isFirstCheckboxSelected}\n        onChange={onFirstCheckboxClick}\n      >\n        {renderText(textFirst)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isSecondCheckboxSelected}\n        onChange={onSecondCheckboxClick}\n      >\n        {renderText(textSecond)}\n      </Checkbox>\n\n      <Checkbox\n        checked={isThirdCheckboxSelected}\n        onChange={onThirdCheckboxClick}\n      >\n        {renderText(textThird)}\n      </Checkbox>\n\n      <div className={customButtonWrapperClassName || styles.buttonWrapper}>\n        <Button\n          isPrimary\n          isDisabled={!canSubmit}\n          className={isFullSizeButton ? styles.footerButton : undefined}\n          onClick={handleSubmit}\n        >\n          {lang('Understood')}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SafetyRulesContent);\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\nconst AuthSafetyRules = ({ isActive }: OwnProps) => {\n  const { openCreateBackUpPage, openMnemonicPage } = getActions();\n\n  const [firstChecked, setFirstChecked] = useState(false);\n  const [secondChecked, setSecondChecked] = useState(false);\n  const [thirdChecked, setThirdChecked] = useState(false);\n\n  useHistoryBack({ isActive, onBack: openCreateBackUpPage });\n\n  const lang = useLang();\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, 'custom-scroll')}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openCreateBackUpPage} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          isFirstCheckboxSelected={firstChecked}\n          onFirstCheckboxClick={setFirstChecked}\n          isSecondCheckboxSelected={secondChecked}\n          onSecondCheckboxClick={setSecondChecked}\n          isThirdCheckboxSelected={thirdChecked}\n          onThirdCheckboxClick={setThirdChecked}\n          onSubmit={openMnemonicPage}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSafetyRules);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  mnemonic?: string[];\n}\n\nfunction SecretWordsList({\n  mnemonic,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$mnemonic_list_description'))}\n      </p>\n      <p className={buildClassName(styles.warning)}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <ol className={styles.words}>\n        {mnemonic?.map((word, i) => (\n\n          <li key={i} className={styles.word}>{word}</li>\n        ))}\n      </ol>\n    </>\n  );\n}\n\nexport default memo(SecretWordsList);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport SecretWordsList from './SecretWordsList';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  mnemonic,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <SecretWordsList mnemonic={mnemonic} />\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          onClick={onSubmit}\n          className={styles.footerButton}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsContent from '../common/backup/SecretWordsContent';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  mnemonic?: string[];\n}\n\nconst AuthSecretWords = ({ isActive, mnemonic }: OwnProps) => {\n  const { openAuthBackupWalletModal, openCheckWordsPage } = getActions();\n\n  const lang = useLang();\n  useHistoryBack({ isActive, onBack: openAuthBackupWalletModal });\n\n  const wordsCount = mnemonic?.length || 0;\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={buildClassName(styles.container, styles.containerAlignTop, 'custom-scroll')}>\n\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openAuthBackupWalletModal} className={styles.headerBackBlock}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={openCheckWordsPage}\n          buttonText={lang('Let\\'s Check')}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(AuthSecretWords);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type Theme } from '../../global/types';\n\nimport { APP_NAME, IS_CORE_WALLET } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useMediaTransition from '../../hooks/useMediaTransition';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\n\nimport styles from './Auth.module.scss';\n\nimport logoDarkPath from '../../assets/logoDark.svg';\nimport logoLightPath from '../../assets/logoLight.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  hasAccounts?: boolean;\n  isLoading?: boolean;\n  theme: Theme;\n}\n\nfunction AuthStart({\n  isActive,\n  hasAccounts,\n  isLoading,\n  theme,\n}: OwnProps & StateProps) {\n  const {\n    startCreatingWallet,\n    startImportingWallet,\n    openAbout,\n    openHardwareWalletModal,\n    resetAuth,\n    openAuthImportWalletModal,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const logoPath = appTheme === 'light' ? logoLightPath : logoDarkPath;\n  const [isLogoReady, markLogoReady] = useFlag();\n  const logoRef = useMediaTransition<HTMLImageElement>(isLogoReady);\n\n  function renderSimpleImportForm() {\n    return (\n      <>\n        <span className={styles.importText}>{lang('or import from')}</span>\n        <div className={styles.importButtons}>\n          <Button\n            className={buildClassName(styles.btn, !IS_LEDGER_SUPPORTED && styles.btn_single)}\n            onClick={!isLoading ? startImportingWallet : undefined}\n          >\n            {lang('Secret Words')}\n          </Button>\n          {IS_LEDGER_SUPPORTED && (\n            <Button\n              className={buildClassName(styles.btn, styles.btn_mini)}\n              onClick={!isLoading ? openHardwareWalletModal : undefined}\n            >\n              {lang('Ledger')}\n            </Button>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, 'custom-scroll')}>\n      {hasAccounts && (\n        <Button isSimple isText onClick={resetAuth} className={styles.headerBack}>\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n      )}\n\n      {IS_CORE_WALLET ? (\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.coreWalletLogo}\n          previewUrl={ANIMATED_STICKERS_PATHS.coreWalletLogoPreview}\n          noLoop={false}\n          nonInteractive\n        />\n      ) : (\n        <img\n          ref={logoRef}\n          src={logoPath}\n          alt={APP_NAME}\n          className={styles.logo}\n          onLoad={markLogoReady}\n        />\n      )}\n\n      <div className={buildClassName(styles.appName, 'rounded-font')}>{APP_NAME}</div>\n      <div className={styles.info}>\n        {renderText(lang('$auth_intro'))}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <Button\n          isText\n          className={buildClassName(styles.btn, styles.btn_about)}\n          onClick={openAbout}\n        >\n          {lang('More about %app_name%', { app_name: APP_NAME })}\n          <i className=\"icon-chevron-right\" aria-hidden />\n        </Button>\n      )}\n      <div className={buildClassName(styles.importButtonsBlock, IS_CORE_WALLET && styles.importButtonsBlockSimple)}>\n        <Button\n          isPrimary\n          className={buildClassName(\n            styles.btn,\n            !IS_CORE_WALLET && styles.btn_single,\n            !IS_CORE_WALLET && styles.btn_wide,\n          )}\n          isLoading={isLoading}\n          onClick={!isLoading ? startCreatingWallet : undefined}\n        >\n          {lang('Create Wallet')}\n        </Button>\n        {IS_CORE_WALLET ? renderSimpleImportForm() : (\n          <Button\n            className={buildClassName(styles.btn, styles.btn_wide, styles.btn_single)}\n            onClick={!isLoading ? openAuthImportWalletModal : undefined}\n          >\n            {lang('Import Existing Wallet')}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    hasAccounts: Boolean(global.currentAccountId),\n    isLoading: global.auth.isLoading,\n    theme: global.settings.theme,\n  };\n})(AuthStart));\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, Theme } from '../../global/types';\nimport { AuthState } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SettingsAbout from '../settings/SettingsAbout';\nimport Transition from '../ui/Transition';\nimport AuthCheckPassword from './AuthCheckPassword';\nimport AuthCheckWords from './AuthCheckWords';\nimport AuthConfirmBiometrics from './AuthConfirmBiometrics';\nimport AuthConfirmPin from './AuthConfirmPin';\nimport AuthCreateBackup from './AuthCreateBackup';\nimport AuthCreateBiometrics from './AuthCreateBiometrics';\nimport AuthCreateNativeBiometrics from './AuthCreateNativeBiometrics';\nimport AuthCreatePassword from './AuthCreatePassword';\nimport AuthCreatePin from './AuthCreatePin';\nimport AuthCreatingWallet from './AuthCreatingWallet';\nimport AuthDisclaimer from './AuthDisclaimer';\nimport AuthImportMnemonic from './AuthImportMnemonic';\nimport AuthImportViewAccount from './AuthImportViewAccount';\nimport AuthSafetyRules from './AuthSafetyRules';\nimport AuthSecretWords from './AuthSecretWords';\nimport AuthStart from './AuthStart';\n\nimport styles from './Auth.module.scss';\n\ntype StateProps = Pick<GlobalState['auth'], (\n  'state' | 'biometricsStep' | 'error' | 'mnemonic' | 'mnemonicCheckIndexes' | 'isLoading' | 'method'\n)> & { theme: Theme };\n\nconst RENDER_COUNT = Object.keys(AuthState).length / 2;\n\nconst Auth = ({\n  state,\n  biometricsStep,\n  error,\n  isLoading,\n  mnemonic,\n  mnemonicCheckIndexes,\n  method,\n  theme,\n}: StateProps) => {\n  const {\n    closeAbout,\n    closeImportViewAccount,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  // Transitioning to ready state is done in another component\n  const renderingAuthState = useCurrentOrPrev(\n    state === AuthState.ready ? undefined : state,\n    true,\n  ) ?? -1;\n\n  const [prevKey, setPrevKey] = useState<AuthState | undefined>(undefined);\n  const [nextKey, setNextKey] = useState(renderingAuthState + 1);\n  const updateRenderingKeys = useLastCallback(() => {\n    setNextKey(renderingAuthState + 1);\n    setPrevKey(renderingAuthState === AuthState.confirmPin ? AuthState.createPin : undefined);\n  });\n\n  function renderAuthScreen(isActive: boolean, isFrom: boolean, currentKey: AuthState) {\n    switch (currentKey) {\n      case AuthState.none:\n        return <AuthStart isActive={isActive} />;\n      case AuthState.createWallet:\n        return <AuthCreatingWallet isActive={isActive} />;\n      case AuthState.checkPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"createAccount\"\n            error={error}\n          />\n        );\n      case AuthState.createPin:\n        return <AuthCreatePin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"createAccount\" />;\n      case AuthState.createBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method=\"createAccount\" />;\n      case AuthState.confirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.createNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.createPassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method=\"createAccount\" />;\n      case AuthState.createBackup:\n        return <AuthCreateBackup isActive={isActive} />;\n      case AuthState.disclaimerAndBackup:\n        return (\n          <AuthDisclaimer key=\"create\" isActive={isActive} />\n        );\n      case AuthState.importWallet:\n        return <AuthImportMnemonic isActive={isActive} />;\n      case AuthState.importWalletCreatePin:\n        return <AuthCreatePin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletConfirmPin:\n        return <AuthConfirmPin isActive={isActive} method=\"importMnemonic\" />;\n      case AuthState.importWalletCheckPassword:\n        return (\n          <AuthCheckPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            method=\"importMnemonic\"\n            error={error}\n          />\n        );\n      case AuthState.disclaimer:\n        return (\n          <AuthDisclaimer\n            key=\"import\"\n            isActive={isActive}\n            isImport\n          />\n        );\n      case AuthState.importWalletCreateNativeBiometrics:\n        return (\n          <AuthCreateNativeBiometrics isActive={isActive} isLoading={isLoading} />\n        );\n      case AuthState.importWalletCreatePassword:\n        return <AuthCreatePassword isActive={isActive} isLoading={isLoading} method={method} />;\n      case AuthState.importWalletCreateBiometrics:\n        return <AuthCreateBiometrics isActive={isActive} method={method} />;\n      case AuthState.importWalletConfirmBiometrics:\n        return (\n          <AuthConfirmBiometrics\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            biometricsStep={biometricsStep}\n          />\n        );\n      case AuthState.about:\n        return (\n          <SettingsAbout\n            isActive={isActive}\n            theme={theme}\n            headerClassName={styles.aboutHeader}\n            handleBackClick={closeAbout}\n          />\n        );\n      case AuthState.safetyRules:\n        return <AuthSafetyRules isActive={isActive} />;\n      case AuthState.mnemonicPage:\n        return <AuthSecretWords isActive={isActive} mnemonic={mnemonic} />;\n      case AuthState.checkWords:\n        return <AuthCheckWords isActive={isActive} mnemonic={mnemonic} checkIndexes={mnemonicCheckIndexes} />;\n      case AuthState.importViewAccount:\n        return (\n          <AuthImportViewAccount\n            isActive={isActive}\n            isLoading={isLoading}\n            onCancel={closeImportViewAccount}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      name={isPortrait ? (IS_ANDROID ? 'slideFade' : 'slideLayers') : 'semiFade'}\n      activeKey={renderingAuthState}\n      renderCount={RENDER_COUNT}\n      shouldCleanup\n      className={styles.transitionContainer}\n      slideClassName={styles.transitionSlide}\n      prevKey={prevKey}\n      nextKey={nextKey}\n      onStop={updateRenderingKeys}\n      shouldWrap\n    >\n      {renderAuthScreen}\n    </Transition>\n  );\n};\n\nexport default memo(withGlobal((global): StateProps => {\n  const authProps = pick(global.auth, [\n    'state', 'biometricsStep', 'error', 'mnemonic', 'mnemonicCheckIndexes', 'isLoading', 'method',\n  ]);\n  return {\n    ...authProps,\n    theme: global.settings.theme,\n  };\n})(Auth));\n","// extracted by mini-css-extract-plugin\nexport default {\"spinner\":\"o7Soo94L\",\"inner\":\"fnzgQDjn\",\"spin\":\"dPrfSpVS\",\"white\":\"ZwvOHvLC\"};","import React, { type ElementRef, memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Spinner.module.scss';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  color?: 'white';\n  className?: string;\n};\n\nfunction Spinner({ ref, color, className }: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.spinner,\n    color && styles[color],\n    className,\n  );\n\n  return (\n    <div ref={ref} className={fullClassName} aria-label={lang('Loading...')}>\n      <i className={buildClassName(styles.inner, 'icon-spinner')} aria-hidden />\n    </div>\n  );\n}\n\nexport default memo(Spinner);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"h8WmgaJB\",\"icon\":\"KW5fEe2q\",\"rightItem\":\"yxdpwMGG\",\"spinner\":\"_o9pbmfe\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport Spinner from './Spinner';\n\nimport styles from './ListItem.module.scss';\n\ninterface OwnProps {\n  icon?: string;\n  label: string;\n  className?: string;\n  isLoading?: boolean;\n  onClick: NoneToVoidFunction;\n}\n\nfunction ListItem({\n  icon,\n  label,\n  className,\n  isLoading,\n  onClick,\n}: OwnProps) {\n  return (\n    <button type=\"button\" className={buildClassName(styles.root, className)} onClick={onClick} disabled={isLoading}>\n      <i className={buildClassName(styles.icon, `icon-${icon}`)} aria-hidden />\n      <span className={styles.label}>{label}</span>\n      {\n        isLoading ? (\n          <Spinner className={buildClassName(styles.rightItem, styles.spinner)} />\n        ) : (\n          <i className={buildClassName(styles.rightItem, 'icon-chevron-right')} aria-hidden />\n        )\n      }\n    </button>\n  );\n}\n\nexport default memo(ListItem);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { IS_CORE_WALLET } from '../../config';\nimport { IS_LEDGER_SUPPORTED } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport ListItem from '../ui/ListItem';\nimport Modal from '../ui/Modal';\n\nimport styles from './Auth.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n}\n\nfunction AuthImportWalletModal({ isOpen }: StateProps) {\n  const {\n    startImportingWallet,\n    startImportViewAccount,\n    openHardwareWalletModal,\n    closeAuthImportWalletModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleSecretWordsClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    startImportingWallet();\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    openHardwareWalletModal();\n  });\n\n  const handleImportViewAccountClick = useLastCallback(() => {\n    closeAuthImportWalletModal();\n    startImportViewAccount();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('Import Wallet')}\n      hasCloseButton\n      forceBottomSheet\n      nativeBottomSheetKey=\"import-account\"\n      contentClassName={styles.importModalContent}\n      onClose={closeAuthImportWalletModal}\n    >\n      <div className={styles.actionsSection}>\n        <ListItem\n          icon=\"key\"\n          label={lang(IS_CORE_WALLET ? '24 Secret Words' : '12/24 Secret Words')}\n          onClick={handleSecretWordsClick}\n        />\n        {IS_LEDGER_SUPPORTED && (\n          <ListItem\n            icon=\"ledger-alt\"\n            label={lang('Ledger')}\n            onClick={handleImportHardwareWalletClick}\n          />\n        )}\n      </div>\n\n      {!IS_CORE_WALLET && (\n        <div className={styles.actionsSection}>\n          <ListItem\n            icon=\"wallet-view\"\n            label={lang('View Any Address')}\n            onClick={handleImportViewAccountClick}\n          />\n        </div>\n      )}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isOpen: global.auth.isImportModalOpen,\n  };\n})(AuthImportWalletModal));\n","import { IS_ANDROID, IS_IOS } from './windowEnvironment';\n\nexport default function resolveSlideTransitionName() {\n  return IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade';\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { TransferState } from '../global/types';\n\nimport useCurrentOrPrev from './useCurrentOrPrev';\nimport useLastCallback from './useLastCallback';\n\nconst ANIMATION_DURATION = 300;\n\nexport default function useModalTransitionKeys(activeKey: number, isOpen: boolean) {\n  // Use previous key during closing animation\n  const renderingKey = useCurrentOrPrev(isOpen ? activeKey : undefined, true) ?? -1;\n  const [nextKey, setNextKey] = useState<TransferState>();\n\n  const updateNextKey = useLastCallback(() => {\n    setNextKey(isOpen ? renderingKey + 1 : undefined);\n  });\n\n  // Set next key after modal is fully open\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(updateNextKey, ANIMATION_DURATION);\n    }\n  }, [isOpen, updateNextKey]);\n\n  return { renderingKey, nextKey, updateNextKey };\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { getCachedImageUrl } from '../util/getCachedImageUrl';\nimport useAsync from './useAsync';\n\nexport function useCachedImage(src?: string) {\n  const { result: imageUrl } = useAsync(\n    () => (src ? getCachedImageUrl(src) : Promise.resolve(undefined)),\n    [src],\n  );\n\n  useEffect(() => {\n    return imageUrl ? () => {\n      URL.revokeObjectURL(imageUrl);\n    } : undefined;\n  }, [imageUrl]);\n\n  return { imageUrl };\n}\n","import { useEffect, useState } from '../lib/teact/teact';\n\nconst useAsync = <T>(fn: () => Promise<T>, deps: any[], defaultValue?: T) => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | undefined>();\n  const [result, setResult] = useState<T | undefined>(defaultValue);\n  useEffect(() => {\n    setIsLoading(true);\n    let wasCancelled = false;\n    fn().then((res) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setResult(res);\n    }, (err) => {\n      if (wasCancelled) return;\n      setIsLoading(false);\n      setError(err);\n    });\n    return () => {\n      wasCancelled = true;\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n  return { isLoading, error, result };\n};\n\nexport default useAsync;\n","import { IMAGE_CACHE_NAME } from '../config';\n\nexport async function getCachedImageUrl(url: string) {\n  const cache = await caches.open(IMAGE_CACHE_NAME);\n\n  const cachedResponse = await cache.match(url);\n  if (cachedResponse) {\n    const blob = await cachedResponse.blob();\n\n    return URL.createObjectURL(blob);\n  }\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(`Image loading error: ${response.statusText}. URL: ${url}`);\n  }\n\n  await cache.put(url, response.clone());\n  const blob = await response.blob();\n\n  return URL.createObjectURL(blob);\n}\n","import type { ApiMtwCardBorderShineType, ApiNft } from '../api/types';\n\nimport buildClassName from '../util/buildClassName';\nimport { getCardNftImageUrl } from '../util/url';\n\ninterface CardCustomizationResult {\n  backgroundImageUrl?: string;\n  withTextGradient: boolean;\n  classNames: string;\n  borderShineType?: ApiMtwCardBorderShineType;\n}\n\nexport default function useCardCustomization(\n  cardNft?: ApiNft,\n): CardCustomizationResult {\n  const { mtwCardType, mtwCardTextType, mtwCardBorderShineType } = cardNft?.metadata || {};\n  const withTextGradient = !!mtwCardType && mtwCardType !== 'standard';\n  const mtwCardTextTypeClass = mtwCardType !== 'standard'\n    ? undefined\n    : (mtwCardTextType === 'dark' ? 'MtwCard__darkText' : 'MtwCard__lightText');\n\n  const backgroundImageUrl = cardNft ? getCardNftImageUrl(cardNft) : undefined;\n\n  return {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: buildClassName(mtwCardType && `MtwCard__${mtwCardType}`, mtwCardTextTypeClass),\n    borderShineType: mtwCardBorderShineType,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"bdfebopt\",\"current\":\"bMmcsmZO\",\"customCard\":\"HF2p9CT1\",\"accountName\":\"MUMjgNQ5\",\"accountAddressBlock\":\"dhGETdr1\",\"edit\":\"FRX4SQTO\"};","import React from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { Account, AccountType } from '../../../../global/types';\n\nimport { getMainAccountAddress } from '../../../../util/account';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { isKeyCountGreater } from '../../../../util/isEmptyObject';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useLang from '../../../../hooks/useLang';\n\nimport styles from './AccountButton.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  accountId: string;\n  addressByChain: Account['addressByChain'];\n  accountType: AccountType;\n  title?: string;\n  cardBackgroundNft?: ApiNft;\n  canEditAccount?: boolean;\n  onClick: (accountId: string) => void;\n  onEdit: NoneToVoidFunction;\n}\n\nexport const ACCOUNT_WITH_ICON_ADDRESS_SHIFT = 3;\nexport const ACCOUNT_ADDRESS_SHIFT = 4;\n\nfunction AccountButton({\n  isActive,\n  accountId,\n  addressByChain,\n  accountType,\n  title,\n  cardBackgroundNft,\n  canEditAccount,\n  onClick,\n  onEdit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isHardware = accountType === 'hardware';\n  const isViewMode = accountType === 'view';\n\n  const addressOrMultichain = isKeyCountGreater(addressByChain, 1)\n    ? lang('Multichain')\n    : shortenAddress(\n      getMainAccountAddress(addressByChain) ?? '',\n      accountType !== 'mnemonic' ? ACCOUNT_WITH_ICON_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n      ACCOUNT_ADDRESS_SHIFT,\n    );\n\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const { imageUrl } = useCachedImage(backgroundImageUrl);\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.current,\n    imageUrl && styles.customCard,\n    imageUrl && mtwCardClassNames,\n  );\n\n  const handleEditClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    onEdit();\n  };\n\n  return (\n    <div\n      className={fullClassName}\n      aria-label={lang('Switch Account')}\n      onClick={isActive ? undefined : () => onClick(accountId)}\n      style={buildStyle(imageUrl && `--bg: url(${imageUrl})`)}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountAddressBlock, withTextGradient && 'gradientText')}>\n        {isHardware && <i className=\"icon-ledger\" aria-hidden />}\n        {isViewMode && <i className=\"icon-eye-filled\" aria-hidden />}\n        <span>{addressOrMultichain}</span>\n      </div>\n\n      {isActive && canEditAccount && (\n        <div className={styles.edit} onClick={handleEditClick}>\n          <i className=\"icon-pen\" aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AccountButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"accounts\":\"DP7r4ob0\",\"accounts_two\":\"aMoUTjsw\",\"accountsTwo\":\"aMoUTjsw\",\"account\":\"feJs1qiP\",\"account_current\":\"LGBe77Zo\",\"accountCurrent\":\"LGBe77Zo\",\"account_disabled\":\"QT4AQhSL\",\"accountDisabled\":\"QT4AQhSL\",\"account_inactive\":\"JLVV6MK1\",\"accountInactive\":\"JLVV6MK1\",\"accounts_single\":\"xq8sJcx0\",\"accountsSingle\":\"xq8sJcx0\",\"customCard\":\"QrKEFAWF\",\"accountName\":\"xRepCoTw\",\"button_current\":\"CMlJY5eP\",\"buttonCurrent\":\"CMlJY5eP\",\"accountFooter\":\"aSHneDhG\",\"icon\":\"FzVzsW0Z\",\"accountAddress\":\"U1ocd7xK\",\"accountCheckMark\":\"WoJjd6rF\",\"accountCheckMark_active\":\"Xs5JWZXM\",\"accountCheckMarkActive\":\"Xs5JWZXM\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AccountType } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useCachedImage } from '../../hooks/useCachedImage';\nimport useCardCustomization from '../../hooks/useCardCustomization';\n\nimport { ACCOUNT_ADDRESS_SHIFT, ACCOUNT_WITH_ICON_ADDRESS_SHIFT } from '../main/sections/Header/AccountButton';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountId: string;\n  address: string;\n  title?: string;\n  accountType: AccountType;\n  isActive?: boolean;\n  isLoading?: boolean;\n  ariaLabel?: string;\n  className?: string;\n  withCheckbox?: boolean;\n  cardBackgroundNft?: ApiNft;\n  onClick?: NoneToVoidFunction;\n}\n\nfunction AccountButton({\n  accountId,\n  address,\n  title,\n  accountType,\n  ariaLabel,\n  isActive,\n  isLoading,\n  className,\n  withCheckbox,\n  cardBackgroundNft,\n  onClick,\n}: StateProps) {\n  const {\n    backgroundImageUrl,\n    withTextGradient,\n    classNames: mtwCardClassNames,\n  } = useCardCustomization(cardBackgroundNft);\n  const { imageUrl } = useCachedImage(backgroundImageUrl);\n\n  const isHardware = accountType === 'hardware';\n  const isViewMode = accountType === 'view';\n  const fullClassName = buildClassName(\n    className,\n    styles.account,\n    imageUrl && styles.customCard,\n    imageUrl && mtwCardClassNames,\n    isActive && !withCheckbox && styles.account_current,\n    isLoading && styles.account_disabled,\n    !onClick && styles.account_inactive,\n  );\n\n  return (\n    <div\n      key={accountId}\n      className={fullClassName}\n      onClick={onClick}\n      style={buildStyle(imageUrl && `--bg: url(${imageUrl})`)}\n      aria-label={ariaLabel}\n    >\n      {title && <span className={buildClassName(styles.accountName, withTextGradient && 'gradientText')}>{title}</span>}\n      <div className={buildClassName(styles.accountFooter, withTextGradient && 'gradientText')}>\n        {isViewMode && <i className={buildClassName('icon-eye-filled', styles.icon)} aria-hidden />}\n        {isHardware && <i className={buildClassName('icon-ledger', styles.icon)} aria-hidden />}\n        <span className={styles.accountAddress}>\n          {shortenAddress(\n            address,\n            isHardware ? ACCOUNT_WITH_ICON_ADDRESS_SHIFT : ACCOUNT_ADDRESS_SHIFT,\n            ACCOUNT_ADDRESS_SHIFT,\n          )}\n        </span>\n      </div>\n      {withCheckbox\n        && <div className={buildClassName(styles.accountCheckMark, isActive && styles.accountCheckMark_active)} />}\n    </div>\n  );\n}\n\nexport default memo(AccountButton);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './AccountButton.module.scss';\n\ninterface StateProps {\n  accountLength: number;\n  labelText?: string;\n  children: TeactNode;\n  className?: string;\n}\n\nfunction AccountButtonWrapper({\n  accountLength,\n  labelText,\n  children,\n  className,\n}: StateProps) {\n  const fullClassName = buildClassName(\n    className,\n    styles.accounts,\n    'custom-scroll',\n    accountLength === 1 && styles.accounts_single,\n    accountLength === 2 && styles.accounts_two,\n  );\n  return (\n    <>\n      {labelText && <p className={styles.label}>{labelText}</p>}\n      <div className={fullClassName}>\n        {children}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AccountButtonWrapper);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"zdmLsynF\",\"modalDialogInsideSettings\":\"kYjygKEY\",\"slide\":\"a2oy8Zll\",\"container\":\"eM1PpsST\",\"containerStatic\":\"jHYtCW5T\",\"content\":\"_3mWK1CH\",\"iconBlockSlide\":\"WEcWgMzV\",\"iconBlockSlideStatic\":\"VCK1YGjr\",\"iconBlock\":\"KE3Egymz\",\"mobile\":\"kpjonisY\",\"ledgerIcon\":\"iuLLqpxI\",\"textBlock\":\"bn1fb2en\",\"textBlock_gap\":\"bBaOfZlx\",\"textBlockGap\":\"bBaOfZlx\",\"textBlock_success\":\"j8GYzR5R\",\"textBlockSuccess\":\"j8GYzR5R\",\"textBlock_small\":\"Rt2IdHAB\",\"textBlockSmall\":\"Rt2IdHAB\",\"textIcon\":\"SOw0Xtct\",\"text\":\"GuAw_sFJ\",\"text_failed\":\"XPczA9Ds\",\"textFailed\":\"XPczA9Ds\",\"text_connected\":\"YyHAVq6P\",\"textConnected\":\"YyHAVq6P\",\"text_success\":\"tTgIgIgG\",\"textSuccess\":\"tTgIgIgG\",\"actionBlock\":\"hiaAxVr_\",\"actionBlock_single\":\"ApwM97qB\",\"actionBlockSingle\":\"ApwM97qB\",\"button\":\"LZNOcG4M\",\"button_single\":\"Hm4XX1NN\",\"buttonSingle\":\"Hm4XX1NN\",\"accounts\":\"qG6SFrZs\",\"accounts_two\":\"o_4z0gP4\",\"accountsTwo\":\"o_4z0gP4\",\"account\":\"_Vsrbub9\",\"account_current\":\"uo8yhRNU\",\"accountCurrent\":\"uo8yhRNU\",\"addAccountContainer\":\"E5i9UUtD\",\"addAccountIcon\":\"j5VZHMly\",\"accountName\":\"V6_KYxce\",\"accountFooter\":\"LXgNcuuY\",\"accountCurrencyIcon\":\"g_b7EuV5\",\"accountAddress\":\"pL4iTSDM\",\"accountCheckMark\":\"mpVXcyoe\",\"accountCheckMark_active\":\"lVx2a3if\",\"accountCheckMarkActive\":\"lVx2a3if\",\"sticker\":\"MfAU5ZEs\",\"declinedLabel\":\"aWyFXa02\",\"declinedLabelDetailed\":\"q1lhwUmL\",\"dropdownBlock\":\"_2MGoq5H\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  text: string;\n  error?: string;\n  onClose: () => void;\n  onTryAgain: () => void;\n}\n\nenum ConfirmTransactionState {\n  Waiting,\n  Error,\n}\n\nfunction LedgerConfirmOperation({\n  isActive, text, error, onClose, onTryAgain,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [activeState, setActiveState] = useState(ConfirmTransactionState.Waiting);\n  const [nextKey, setNextKey] = useState(ConfirmTransactionState.Error);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    if (error) {\n      setActiveState(ConfirmTransactionState.Error);\n      setNextKey(ConfirmTransactionState.Waiting);\n    } else {\n      setActiveState(ConfirmTransactionState.Waiting);\n      setNextKey(ConfirmTransactionState.Error);\n    }\n  }, [error]);\n\n  function renderWaitingConfirm(isActiveSlide: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.textBlock, styles.textBlock_small)}>\n            <span className={styles.text}>{text}</span>\n          </div>\n          <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n            <Button onClick={onClose} className={buildClassName(styles.button, styles.button_single)}>\n              {lang('Cancel')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderTryAgain(isActiveSlide: boolean) {\n    const isErrorDetailed = error && [\n      '$hardware_blind_sign_not_enabled',\n      '$hardware_blind_sign_not_enabled_internal',\n    ].includes(error);\n    const errorMessage = isErrorDetailed\n      ? (<span>{renderText(lang(error))}</span>)\n      : renderText(lang(error!));\n\n    return (\n      <>\n        <ModalHeader title={lang('Confirm via Ledger')} onClose={onClose} />\n        <div className={styles.container}>\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_BIG_SIZE_PX}\n            play={isActiveSlide}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n            previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n          />\n          <div className={buildClassName(styles.declinedLabel, isErrorDetailed && styles.declinedLabelDetailed)}>\n            {errorMessage}\n          </div>\n          <div className={styles.actionBlock}>\n            <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n            <Button isPrimary onClick={onTryAgain} className={styles.button}>{lang('Try Again')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActiveSlide: boolean, isFrom: boolean, currentKey: ConfirmTransactionState) {\n    switch (currentKey) {\n      case ConfirmTransactionState.Waiting:\n        return renderWaitingConfirm(isActiveSlide);\n      case ConfirmTransactionState.Error:\n        return renderTryAgain(isActiveSlide);\n    }\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(modalStyles.transitionSlide, styles.slide)}\n      activeKey={activeState}\n      nextKey={nextKey}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(LedgerConfirmOperation);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownItemContent from './DropdownItemContent';\nimport DropdownMenu from './DropdownMenu';\nimport Spinner from './Spinner';\n\nimport styles from './Dropdown.module.scss';\n\nexport interface DropdownItem<T extends string = string> {\n  value: T;\n  name: string;\n  selectedName?: string;\n  description?: string | TeactNode;\n  icon?: string;\n  overlayIcon?: string;\n  fontIcon?: string;\n  isDisabled?: boolean;\n  isDangerous?: boolean;\n  withDelimiter?: boolean;\n  withDelimiterAfter?: boolean;\n}\n\ninterface OwnProps<T extends string> {\n  label?: string;\n  selectedValue?: T;\n  items: DropdownItem<T>[];\n  className?: string;\n  itemClassName?: string;\n  menuClassName?: string;\n  theme?: 'light' | 'inherit';\n  arrow?: 'caret' | 'chevron';\n  menuPositionX?: 'right' | 'left';\n  menuPositionY?: 'top' | 'bottom';\n  disabled?: boolean;\n  shouldTranslateOptions?: boolean;\n  onChange?: (value: T) => void;\n  isLoading?: boolean;\n  buttonPrefix?: TeactNode;\n}\n\nconst DEFAULT_ARROW = 'caret';\nconst DEFAULT_MENU_POSITION_X = 'right';\n\nfunction Dropdown<T extends string>({\n  label,\n  items,\n  selectedValue,\n  className,\n  itemClassName,\n  menuClassName,\n  theme,\n  arrow = DEFAULT_ARROW,\n  menuPositionX = DEFAULT_MENU_POSITION_X,\n  menuPositionY,\n  disabled,\n  shouldTranslateOptions,\n  onChange,\n  isLoading = false,\n  buttonPrefix,\n}: OwnProps<T>): TeactJsx {\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n  const withMenu = items.length > 1;\n  const isFullyInteractive = Boolean(label);\n\n  const selectedItem = useMemo<DropdownItem<T>>(() => {\n    let item = selectedValue !== undefined && items.find((i) => i.value === selectedValue);\n    item ||= { value: '' as T, name: '' };\n    return {\n      ...item,\n      isDisabled: !isFullyInteractive && disabled,\n    };\n  }, [items, selectedValue, isFullyInteractive, disabled]);\n\n  const handleSelect = useLastCallback((value: T) => {\n    if (value !== selectedValue) {\n      onChange?.(value);\n    }\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const fullClassName = buildClassName(\n    className,\n    withMenu && styles.interactive,\n    isFullyInteractive && styles.wide,\n    isFullyInteractive && disabled && styles.disabled,\n  );\n  const buttonFullClassName = buildClassName(\n    styles.button,\n    withMenu && styles.interactive,\n    withMenu && menuClassName,\n    theme && styles[theme],\n    itemClassName,\n  );\n\n  const buttonSuffix = useMemo(() => {\n    return withMenu && (\n      <i\n        className={buildClassName(\n          styles.buttonIcon,\n          arrow === 'chevron' ? 'icon-chevron-down' : 'icon-caret-down',\n        )}\n        aria-hidden\n      />\n    );\n  }, [withMenu, arrow]);\n\n  return (\n    <div\n      className={fullClassName}\n      onClick={isFullyInteractive && !disabled && withMenu ? openMenu : undefined}\n    >\n      {label && <span className={styles.label}>{label}</span>}\n\n      {isLoading ? (\n        <Spinner className={styles.spinner} />\n      ) : (\n        <DropdownItemContent\n          item={selectedItem}\n          prefix={buttonPrefix}\n          suffix={buttonSuffix}\n          shouldTranslate={shouldTranslateOptions}\n          shouldUseSelectedName\n          className={buttonFullClassName}\n          itemClassName={buildClassName('itemName', itemClassName)}\n          onClick={!isFullyInteractive && withMenu ? openMenu : undefined}\n        />\n      )}\n\n      {withMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen && !isLoading}\n          menuPositionX={menuPositionX}\n          menuPositionY={menuPositionY}\n          items={items}\n          shouldTranslateOptions={shouldTranslateOptions}\n          selectedValue={selectedValue}\n          buttonClassName={itemClassName}\n          onSelect={handleSelect}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Dropdown);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\nimport type { LedgerTransport } from '../../util/ledger/types';\nimport { HardwareConnectState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { closeLedgerTab } from '../../util/ledger/tab';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { IS_ANDROID, IS_IOS, IS_IOS_APP, IS_LEDGER_EXTENSION_TAB } from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Image from '../ui/Image';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\nimport ledgerDesktopSrc from '../../assets/ledger/desktop.png';\nimport ledgerDesktopDarkSrc from '../../assets/ledger/desktop-dark.png';\nimport ledgerIosSrc from '../../assets/ledger/ios.png';\nimport ledgerIosDarkSrc from '../../assets/ledger/ios-dark.png';\nimport ledgerMobileBluetoothSrc from '../../assets/ledger/mobile-bluetooth.png';\nimport ledgerMobileBluetoothDarkSrc from '../../assets/ledger/mobile-bluetooth-dark.png';\nimport ledgerMobileUsbSrc from '../../assets/ledger/mobile-usb.png';\nimport ledgerMobileUsbDarkSrc from '../../assets/ledger/mobile-usb-dark.png';\n\ninterface OwnProps {\n  isActive: boolean;\n  isStatic?: boolean;\n  className?: string;\n  onConnected: (isSingleWallet: boolean) => void;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  state: HardwareConnectState;\n  isLedgerConnected?: boolean;\n  isTonAppConnected?: boolean;\n  availableTransports?: LedgerTransport[];\n  lastUsedTransport?: LedgerTransport;\n  currentTheme: Theme;\n}\n\nconst NEXT_SLIDE_DELAY = 500;\nconst TRANSPORT_NAMES: Record<LedgerTransport, string> = {\n  usb: 'USB',\n  bluetooth: 'Bluetooth',\n};\n\nfunction LedgerConnect({\n  isActive,\n  isStatic,\n  state,\n  isLedgerConnected,\n  isTonAppConnected,\n  availableTransports,\n  lastUsedTransport,\n  currentTheme,\n  className,\n  onConnected,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps & StateProps) {\n  const { initializeHardwareWalletModal, initializeHardwareWalletConnection } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [selectedTransport, setSelectedTransport] = useState<LedgerTransport | undefined>(lastUsedTransport);\n  const appTheme = useAppTheme(currentTheme);\n\n  const isLedgerFailed = isLedgerConnected === false;\n  const isTonAppFailed = isTonAppConnected === false;\n  const isConnected = state === HardwareConnectState.ConnectedWithSingleWallet\n    || state === HardwareConnectState.ConnectedWithSeveralWallets;\n  const isConnecting = state === HardwareConnectState.Connecting;\n  const isWaitingForRemoteTab = state === HardwareConnectState.WaitingForRemoteTab;\n  const title = isConnected ? lang('Ledger Connected!') : lang('Connect Ledger');\n  const shouldCloseOnCancel = !onCancel;\n\n  const renderingAvailableTransports = useMemo(() => {\n    return (availableTransports || []).map((transport) => ({\n      value: transport,\n      name: TRANSPORT_NAMES[transport],\n    }));\n  }, [availableTransports]);\n  const {\n    shouldRender: shouldRenderAvailableTransports,\n    ref: availableTransportsRef,\n  } = useShowTransition({\n    isOpen: Boolean(renderingAvailableTransports.length > 1 && selectedTransport),\n    withShouldRender: true,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  useEffect(() => {\n    if (selectedTransport) return;\n    if (availableTransports?.length) {\n      setSelectedTransport(availableTransports?.[0]);\n    } else if (IS_IOS_APP) {\n      setSelectedTransport('bluetooth');\n    }\n  }, [availableTransports, selectedTransport]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    initializeHardwareWalletModal();\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevLastUsedTransport]) => {\n    if (lastUsedTransport && prevLastUsedTransport !== lastUsedTransport) {\n      setSelectedTransport(lastUsedTransport);\n    }\n  }, [lastUsedTransport]);\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (IS_LEDGER_EXTENSION_TAB) {\n      return;\n    }\n\n    setTimeout(() => {\n      onConnected(isSingleWallet);\n    }, NEXT_SLIDE_DELAY);\n  });\n\n  useEffect(() => {\n    if (isConnected && isActive) {\n      handleConnected(state === HardwareConnectState.ConnectedWithSingleWallet);\n    }\n  }, [isConnected, isActive, state, handleConnected]);\n\n  const handleCloseWithRemoteTab = useLastCallback(() => {\n    const closeAction = shouldCloseOnCancel ? onClose : onCancel;\n    closeLedgerTab(); // To close the remote extension tab when the connection is cancelled in the popup\n    closeAction();\n  });\n\n  const handleSubmit = useLastCallback(() => {\n    if (selectedTransport) {\n      initializeHardwareWalletConnection({ transport: selectedTransport });\n    }\n  });\n\n  function renderAvailableTransports() {\n    return (\n      <div ref={availableTransportsRef} className={styles.dropdownBlock}>\n        <Dropdown\n          label={lang('Connection Type')}\n          items={renderingAvailableTransports}\n          selectedValue={selectedTransport}\n          theme=\"light\"\n          arrow=\"chevron\"\n          disabled={isConnecting}\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={setSelectedTransport}\n        />\n      </div>\n    );\n  }\n\n  function renderButtons() {\n    const isFailed = state === HardwareConnectState.Failed;\n\n    if (IS_LEDGER_EXTENSION_TAB && isConnected) {\n      return (\n        <div className={buildClassName(styles.actionBlock, isConnected && styles.actionBlock_single)}>\n          <Button\n            isDisabled={isConnecting}\n            className={buildClassName(styles.button, isConnected && styles.button_single)}\n            onClick={onClose}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.actionBlock}>\n        <Button\n          className={styles.button}\n          onClick={shouldCloseOnCancel ? onClose : onCancel}\n        >\n          {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n        </Button>\n        <Button\n          isPrimary\n          isLoading={isConnecting}\n          isDisabled={isConnecting || isConnected}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {isFailed ? lang('Try Again') : lang('Continue')}\n        </Button>\n      </div>\n    );\n  }\n\n  function getLedgerIconSrc() {\n    const isDarkTheme = appTheme === 'dark';\n    const iconData = {\n      desktop: isDarkTheme ? ledgerDesktopDarkSrc : ledgerDesktopSrc,\n      mobileUsb: isDarkTheme ? ledgerMobileUsbDarkSrc : ledgerMobileUsbSrc,\n      ios: isDarkTheme ? ledgerIosDarkSrc : ledgerIosSrc,\n      mobileBluetooth: isDarkTheme ? ledgerMobileBluetoothDarkSrc : ledgerMobileBluetoothSrc,\n    };\n\n    if (!IS_CAPACITOR) {\n      // Ledger is only supported on iOS for Capacitor app\n      return IS_ANDROID ? iconData.mobileUsb : iconData.desktop;\n    }\n\n    if (IS_IOS) {\n      return iconData.ios;\n    }\n\n    return selectedTransport === 'bluetooth' ? iconData.mobileBluetooth : iconData.mobileUsb;\n  }\n\n  function renderScreen(handleClose: NoneToVoidFunction, children: TeactNode) {\n    return (\n      <>\n        {!isStatic ? (\n          <ModalHeader\n            title={title}\n            onBackButtonClick={onBackButtonClick}\n            onClose={!onBackButtonClick ? handleClose : undefined}\n          />\n        ) : (\n          <div className={settingsStyles.header}>\n            <Button isSimple isText onClick={handleClose} className={settingsStyles.headerBack}>\n              <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={settingsStyles.headerTitle}>{title}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(\n            styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n          )}\n        >\n          <Transition\n            activeKey={!IS_CAPACITOR ? 0 : (selectedTransport !== 'bluetooth' ? 1 : 2)}\n            name=\"semiFade\"\n            className={buildClassName(styles.iconBlock, isPortrait && styles.mobile)}\n            slideClassName={isStatic ? styles.iconBlockSlideStatic : styles.iconBlockSlide}\n          >\n            <Image\n              url={getLedgerIconSrc()}\n              imageClassName={styles.ledgerIcon}\n            />\n          </Transition>\n          {children}\n        </div>\n      </>\n    );\n  }\n\n  function renderWaitingForRemoteTab() {\n    return renderScreen(handleCloseWithRemoteTab, (\n      <>\n        <div\n          className={buildClassName(\n            styles.textBlock,\n            styles.textBlock_gap,\n          )}\n        >\n          <span className={styles.text}>\n            <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n            {lang('Switch to the newly opened tab to connect Ledger.')}\n          </span>\n          <span className={styles.text}>\n            <i className={buildClassName(styles.textIcon, 'icon-dot')} aria-hidden />\n            {lang('Once connected, switch back to this window to proceed.')}\n          </span>\n        </div>\n        <div className={buildClassName(styles.actionBlock, styles.actionBlock_single)}>\n          <Button\n            className={buildClassName(styles.button, styles.button_single)}\n            onClick={handleCloseWithRemoteTab}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n        </div>\n      </>\n    ));\n  }\n\n  function renderConnect() {\n    return renderScreen(onClose, (\n      <>\n        <div\n          className={buildClassName(\n            styles.textBlock,\n            isConnected && styles.textBlock_success,\n          )}\n        >\n          <span\n            className={buildClassName(\n              styles.text,\n              isLedgerFailed && styles.text_failed,\n              isLedgerConnected && styles.text_connected,\n              isConnected && styles.text_success,\n            )}\n          >\n            <i\n              className={buildClassName(styles.textIcon, isLedgerConnected ? 'icon-accept' : 'icon-dot')}\n              aria-hidden\n            />\n            {lang('Connect your Ledger')}\n          </span>\n          <span\n            className={buildClassName(\n              styles.text,\n              isTonAppFailed && styles.text_failed,\n              isTonAppConnected && styles.text_connected,\n              isConnected && styles.text_success,\n            )}\n          >\n            <i\n              className={buildClassName(styles.textIcon, isTonAppConnected ? 'icon-accept' : 'icon-dot')}\n              aria-hidden\n            />\n            {lang('Unlock it and open the TON App')}\n          </span>\n        </div>\n\n        {shouldRenderAvailableTransports && renderAvailableTransports()}\n        {renderButtons()}\n      </>\n    ));\n  }\n\n  function renderContent() {\n    if (isWaitingForRemoteTab) {\n      return renderWaitingForRemoteTab();\n    }\n\n    return renderConnect();\n  }\n\n  return (\n    <Transition\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll', className)}\n      slideClassName={modalStyles.transitionSlide}\n      activeKey={isWaitingForRemoteTab ? 1 : 0}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    availableTransports,\n    lastUsedTransport,\n  } = global.hardware;\n\n  return {\n    state: hardwareState,\n    isLedgerConnected,\n    isTonAppConnected,\n    availableTransports,\n    lastUsedTransport,\n    currentTheme: global.settings.theme,\n  };\n})(LedgerConnect));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Skeleton.module.scss';\n\ninterface OwnProps {\n  className?: string;\n}\n\nfunction Skeleton({ className }: OwnProps) {\n  return <div className={buildClassName(styles.skeleton, className)} />;\n}\n\nexport default memo(Skeleton);\n","// extracted by mini-css-extract-plugin\nexport default {\"skeleton\":\"JOe_K6bB\",\"shimmerMobile\":\"wTtjfA1C\",\"shimmerDesktop\":\"B07u4Rga\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"DL3GDV2h\",\"tooltip\":\"pPTN8epJ\",\"small\":\"S0YjnQBy\",\"medium\":\"fisd9cYz\",\"arrow\":\"mw4HrHNN\",\"icon\":\"DsxlgjFS\",\"fontIcon\":\"T3riE15T\",\"color-warning\":\"G6MdAror\",\"colorWarning\":\"G6MdAror\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport type { EmojiIcon } from './Emoji';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport Emoji from './Emoji';\nimport Portal from './Portal';\n\nimport styles from './IconWithTooltip.module.scss';\n\ntype OwnProps = {\n  message: TeactNode;\n  emoji?: EmojiIcon;\n  size?: 'small' | 'medium';\n  type?: 'hint' | 'warning';\n  iconClassName?: string;\n  tooltipClassName?: string;\n};\n\nconst ARROW_WIDTH = 0.6875 * REM;\nconst GAP = 2 * REM;\n\n/** The component is designed to be positioned inline in text. Use a space symbol to create a gap on the left. */\nconst IconWithTooltip: FC<OwnProps> = ({\n  message,\n  emoji,\n  size = 'medium',\n  type = 'hint',\n  iconClassName,\n  tooltipClassName,\n}) => {\n  const [isOpen, open, close] = useFlag();\n  const { shouldRender, ref: tooltipContainerRef } = useShowTransition({\n    isOpen,\n    withShouldRender: true,\n  });\n  const colorClassName = type === 'warning' && styles[`color-${type}`];\n\n  const iconRef = useRef<HTMLDivElement>();\n  const tooltipRef = useRef<HTMLDivElement>();\n\n  const tooltipStyle = useRef<string>();\n  const arrowStyle = useRef<string>();\n\n  const randomTooltipKey = useUniqueId();\n\n  const handleClickOutside = useLastCallback((event: Event) => {\n    if (!(event.target as HTMLElement).closest(`[data-tooltip-key=\"${randomTooltipKey}\"]`)) {\n      close();\n    }\n  });\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n    document.addEventListener('touchstart', handleClickOutside);\n\n    return () => {\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [isOpen, close, handleClickOutside]);\n\n  useEffect(() => {\n    if (!iconRef.current || !tooltipRef.current) return;\n\n    const { top, left, width } = iconRef.current.getBoundingClientRect();\n    const {\n      width: tooltipWidth,\n      height: tooltipHeight,\n    } = tooltipRef.current.getBoundingClientRect();\n\n    const tooltipCenter = (window.innerWidth - tooltipWidth) / 2;\n    const arrowPosition = left - tooltipCenter + width / 2 - ARROW_WIDTH / 2;\n    const horizontalOffset = arrowPosition < GAP ? GAP - arrowPosition : 0;\n\n    const tooltipVerticalStyle = `top: ${top - tooltipHeight - ARROW_WIDTH}px;`;\n    const tooltipHorizontalStyle = `left: ${tooltipCenter - horizontalOffset}px;`;\n    const arrowHorizontalStyle = `left: ${arrowPosition + horizontalOffset}px;`;\n    const arrowVerticalStyle = `top: ${tooltipHeight - ARROW_WIDTH / 2 - 1}px;`;\n\n    tooltipStyle.current = `${tooltipVerticalStyle} ${tooltipHorizontalStyle}`;\n    arrowStyle.current = `${arrowVerticalStyle} ${arrowHorizontalStyle}`;\n  }, [shouldRender]);\n\n  function renderIcon() {\n    const commonClassName = buildClassName(styles.icon, iconClassName, styles[size], colorClassName);\n    const onClick = IS_TOUCH_ENV ? stopEvent : undefined;\n\n    if (emoji) {\n      return (\n        <span\n          ref={iconRef}\n          className={commonClassName}\n          data-tooltip-key={randomTooltipKey}\n          onClick={onClick}\n          onMouseEnter={open}\n          onMouseLeave={close}\n        >\n          <Emoji from={emoji} />\n        </span>\n      );\n    }\n\n    return (\n      <i\n        ref={iconRef}\n        className={buildClassName(\n          commonClassName,\n          styles.fontIcon,\n          type === 'warning' ? 'icon-exclamation' : 'icon-question',\n        )}\n        data-tooltip-key={randomTooltipKey}\n        onClick={onClick}\n        onMouseEnter={open}\n        onMouseLeave={close}\n      />\n    );\n  }\n\n  return (\n    <>\n      {shouldRender && (\n        <Portal>\n          <div\n            ref={tooltipContainerRef}\n            className={styles.container}\n            onClick={stopEvent}\n            style={tooltipStyle.current}\n          >\n            <div\n              ref={tooltipRef}\n              className={buildClassName(styles.tooltip, styles[size], colorClassName, tooltipClassName)}\n            >\n              {message}\n            </div>\n            <div className={styles.arrow} style={arrowStyle.current} />\n          </div>\n        </Portal>\n      )}\n      {renderIcon()}\n    </>\n  );\n};\n\nexport default memo(IconWithTooltip);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"rtKXhN4A\",\"modalDialogExtraHeight\":\"ow4XXlQr\",\"dapp\":\"naRjGTN0\",\"dapp_first\":\"LUz47fCn\",\"dappFirst\":\"LUz47fCn\",\"dapp_push\":\"AxygZABC\",\"dappPush\":\"AxygZABC\",\"dappIcon\":\"Utxlqsar\",\"dappLogo\":\"dqbsWkDq\",\"dappLogo_icon\":\"RGl7OFHd\",\"dappLogoIcon\":\"RGl7OFHd\",\"transactionAccount\":\"ut5A6NM6\",\"dappInfo\":\"cL2nTyJm\",\"dappName\":\"IZ831cu4\",\"dappHost\":\"ODsQl3Iq\",\"dappHostWarningIcon\":\"rYesJSbN\",\"dappHostWarningText\":\"B9KF5fSL\",\"dappHostWarningButton\":\"Go1goEAT\",\"dappDisconnect\":\"Dpv9gVfh\",\"label\":\"ooIjdCk3\",\"description\":\"d20jMAO6\",\"footer\":\"lvIWoC_b\",\"buttons\":\"XvGbWtVh\",\"button\":\"TBS2qSdm\",\"rowContainerSkeleton\":\"XcidIimi\",\"dataField\":\"URk9skQT\",\"receivingAddress\":\"NfKwqXNd\",\"payloadField\":\"IpEvYlyO\",\"payloadField_expanded\":\"mtQbMtDU\",\"payloadFieldExpanded\":\"mtQbMtDU\",\"payloadField_text\":\"leFXfJnu\",\"payloadFieldText\":\"leFXfJnu\",\"payloadFieldExpand\":\"l7ty8x8l\",\"payloadFieldTerm\":\"iNOlk2G5\",\"transactionList\":\"TddQIzLn\",\"transactionRow\":\"qfq9TmLL\",\"transactionRowAmount\":\"rqZIiXwE\",\"currencySymbol\":\"WdW2dRfZ\",\"transactionRowAddress\":\"p87NWFTH\",\"transactionRowChevron\":\"gKLbD42t\",\"scam\":\"Kgein0KH\",\"scamImage\":\"gw394drP\",\"transactionDirection\":\"by1Uv_HG\",\"accountTitle\":\"nBWVm1mf\",\"accountBalance\":\"_ogqtbzH\",\"transactionDapp\":\"Uyz5mVM_\",\"sticker\":\"noPlTaoE\",\"sticker_sizeSmall\":\"E9iT0WHT\",\"stickerSizeSmall\":\"E9iT0WHT\",\"descriptionContent\":\"LiakNgEl\",\"dappInfoSkeleton\":\"wOmNbpWs\",\"accountWrapperSkeleton\":\"cWnAUfkt\",\"dappInfoIconSkeleton\":\"e3oGDhNq\",\"dappInfoTextSkeleton\":\"cAdLb2FM\",\"nameSkeleton\":\"tO1IUhnj\",\"descSkeleton\":\"u2wkCYw7\",\"nameDappSkeleton\":\"z0IluCrP\",\"descDappSkeleton\":\"JYgy9un6\",\"transactionDirectionLeftSkeleton\":\"YHLHftpe\",\"transactionDirectionRightSkeleton\":\"VzwVb3o_\",\"dappInfoDataSkeleton\":\"L8RwZKiN\",\"rowSkeleton\":\"IVSbVRoG\",\"rowLargeSkeleton\":\"qNqaxuw6\",\"rowLabelSkeleton\":\"oRChyGCN\",\"rowTextLargeSkeleton\":\"q_gxYI6j\",\"rowFeeSkeleton\":\"lbFcqU2u\",\"skeletonTransitionWrapper\":\"US9q0wug\",\"skeletonBackground\":\"A7lv8DFx\",\"transferWarning\":\"Jgu5kw0W\",\"warningForPayload\":\"fHoMTSia\",\"emulation\":\"ZCewpbCA\",\"emulationFee\":\"ClQaAvrV\",\"transferButtons\":\"if1jAISL\",\"transactionContent\":\"yj9FIjaY\",\"balanceError\":\"IHLQKILq\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport IconWithTooltip from '../ui/IconWithTooltip';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  dapp?: ApiDapp;\n  className?: string;\n  onDisconnect?: (origin: string) => void;\n}\n\nfunction DappInfo({\n  dapp,\n  className,\n  onDisconnect,\n}: OwnProps) {\n  const { deleteDapp } = getActions();\n\n  const lang = useLang();\n\n  const { name, iconUrl, url, isUrlEnsured } = dapp || {};\n  const host = useMemo(() => url ? new URL(url).host : undefined, [url]);\n\n  const shouldShowDisconnect = Boolean(onDisconnect && url);\n\n  const handleDisconnect = useLastCallback(() => {\n    onDisconnect!(url!);\n  });\n\n  function handleHostWarningIabButtonClick() {\n    deleteDapp({ url: url!, uniqueId: getDappConnectionUniqueId(dapp!) });\n    void openUrl(url!);\n  }\n\n  function renderIcon() {\n    if (iconUrl) {\n      return (\n        <img src={iconUrl} alt={lang('Logo')} className={styles.dappLogo} />\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.dappLogo, styles.dappLogo_icon)}>\n        <i className={buildClassName(styles.dappIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderWarningIcon() {\n    return (\n      <IconWithTooltip\n        message={(\n          <>\n            <b>{lang('Unverified Source')}</b>\n            <p className={styles.dappHostWarningText}>\n              {renderText(lang('$reopen_in_iab', {\n                browserButton: IS_CAPACITOR && url?.startsWith('http') ? (\n                  <button className={styles.dappHostWarningButton} onClick={handleHostWarningIabButtonClick}>\n                    {lang('MyTonWallet Browser')}\n                  </button>\n                ) : (\n                  <b>{lang('MyTonWallet Browser')}</b>\n                ),\n              }))}\n            </p>\n          </>\n        )}\n        type=\"warning\"\n        size=\"small\"\n        iconClassName={styles.dappHostWarningIcon}\n      />\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.dapp, className)}>\n      {renderIcon()}\n      <div className={styles.dappInfo}>\n        <span className={styles.dappName}>{name}</span>\n        <span className={styles.dappHost}>\n          {!isUrlEnsured && renderWarningIcon()}\n          {host}\n        </span>\n      </div>\n      {shouldShowDisconnect && (\n        <Button\n          isSmall\n          isPrimary\n          className={styles.dappDisconnect}\n          onClick={handleDisconnect}\n        >\n          {lang('Disconnect')}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(DappInfo);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  error?: string;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DappPassword({\n  isActive,\n  error,\n  onSubmit,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const { clearDappConnectRequestError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        error={error}\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Connect')}\n        cancelLabel={lang('Cancel')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearDappConnectRequestError}\n      />\n    </>\n  );\n}\n\nexport default memo(DappPassword);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonConnectProof } from '../../api/tonConnect/types';\nimport type { ApiDapp, ApiDappPermissions } from '../../api/types';\nimport type { Account, AccountSettings, AccountType } from '../../global/types';\nimport { DappConnectState } from '../../global/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport { getMainAccountAddress } from '../../util/account';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport buildClassName from '../../util/buildClassName';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\nimport isViewAccount from '../../util/isViewAccount';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Skeleton from '../ui/Skeleton';\nimport Transition from '../ui/Transition';\nimport DappInfo from './DappInfo';\nimport DappPassword from './DappPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  state?: DappConnectState;\n  hasConnectRequest: boolean;\n  dapp?: ApiDapp;\n  error?: string;\n  requiredPermissions?: ApiDappPermissions;\n  requiredProof?: ApiTonConnectProof;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  settingsByAccountId?: Record<string, AccountSettings>;\n}\n\nfunction DappConnectModal({\n  state,\n  hasConnectRequest,\n  dapp,\n  error,\n  requiredPermissions,\n  requiredProof,\n  accounts,\n  currentAccountId,\n  settingsByAccountId,\n}: StateProps) {\n  const {\n    submitDappConnectRequestConfirm,\n    submitDappConnectRequestConfirmHardware,\n    cancelDappConnectRequestConfirm,\n    setDappConnectRequestState,\n    resetHardwareWalletConnect,\n  } = getActions();\n\n  const lang = useLang();\n  const [selectedAccount, setSelectedAccount] = useState<string>(currentAccountId);\n  const [isConfirmOpen, openConfirm, closeConfirm] = useFlag(false);\n\n  const isOpen = hasConnectRequest;\n\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const isLoading = dapp === undefined;\n\n  useEffect(() => {\n    if (!currentAccountId) return;\n\n    setSelectedAccount(currentAccountId);\n  }, [currentAccountId]);\n\n  const shouldRenderAccounts = accounts && isKeyCountGreater(accounts, 1);\n\n  const handleSubmit = useLastCallback(async () => {\n    closeConfirm();\n    const isViewMode = isViewAccount(accounts![selectedAccount].type);\n    const isHardware = accounts![selectedAccount].type === 'hardware';\n    const { isPasswordRequired, isAddressRequired } = requiredPermissions || {};\n\n    if (isViewMode) return;\n\n    if (!requiredProof || (!isHardware && isAddressRequired && !isPasswordRequired)) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n      });\n\n      cancelDappConnectRequestConfirm();\n    } else if (isHardware) {\n      resetHardwareWalletConnect();\n      setDappConnectRequestState({ state: DappConnectState.ConnectHardware });\n    } else if (getHasInMemoryPassword()) {\n      submitDappConnectRequestConfirm({\n        accountId: selectedAccount,\n        password: await getInMemoryPassword(),\n      });\n    } else {\n      // The confirmation window must be closed before the password screen is displayed\n      requestAnimationFrame(() => {\n        setDappConnectRequestState({ state: DappConnectState.Password });\n      });\n    }\n  });\n\n  const handlePasswordCancel = useLastCallback(() => {\n    setDappConnectRequestState({ state: DappConnectState.Info });\n  });\n\n  const submitDappConnectRequestHardware = useLastCallback(() => {\n    submitDappConnectRequestConfirmHardware({\n      accountId: selectedAccount,\n    });\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappConnectRequestConfirm({\n      accountId: selectedAccount,\n      password,\n    });\n  });\n\n  function renderAccount(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const hasTonWallet = Boolean(addressByChain.ton);\n    const onClick = !hasTonWallet || isViewAccount(accountType) ? undefined : () => setSelectedAccount(accountId);\n    const address = getMainAccountAddress(addressByChain) ?? '';\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        accountType={accountType}\n        isActive={accountId === selectedAccount}\n        isLoading={isLoading}\n\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        labelText={lang('Select wallet to use on this dapp')}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, type }]) => {\n            return renderAccount(accountId, addressByChain, type, title);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  function renderDappInfo() {\n    const isViewMode = Boolean(selectedAccount && isViewAccount(accounts?.[selectedAccount].type));\n\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfo\n          dapp={dapp}\n          className={buildClassName(styles.dapp_first, styles.dapp_push)}\n        />\n        {shouldRenderAccounts && renderAccounts()}\n\n        <div className={styles.footer}>\n          <Button\n            isPrimary\n            isDisabled={isViewMode}\n            className={modalStyles.buttonFullWidth}\n            onClick={openConfirm}\n          >\n            {lang('Connect')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderWaitForConnection() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <div className={buildClassName(styles.dappInfoSkeleton, styles.dapp_first)}>\n          <Skeleton className={styles.dappInfoIconSkeleton} />\n          <div className={styles.dappInfoTextSkeleton}>\n            <Skeleton className={styles.nameSkeleton} />\n            <Skeleton className={styles.descSkeleton} />\n          </div>\n        </div>\n        <div className={styles.accountWrapperSkeleton}>\n          {shouldRenderAccounts && renderAccounts()}\n        </div>\n      </div>\n    );\n  }\n\n  function renderDappInfoWithSkeleton() {\n    return (\n      <Transition name=\"semiFade\" activeKey={isLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n        <ModalHeader title={lang('Connect Dapp')} onClose={cancelDappConnectRequestConfirm} />\n        {isLoading ? renderWaitForConnection() : renderDappInfo()}\n      </Transition>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DappConnectState) {\n    switch (currentKey) {\n      case DappConnectState.Info:\n        return renderDappInfoWithSkeleton();\n      case DappConnectState.Password:\n        return (\n          <DappPassword\n            isActive={isActive}\n            error={error}\n            onSubmit={handlePasswordSubmit}\n            onCancel={handlePasswordCancel}\n            onClose={cancelDappConnectRequestConfirm}\n          />\n        );\n      case DappConnectState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n      case DappConnectState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            isActive={isActive}\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onTryAgain={submitDappConnectRequestHardware}\n            onClose={handlePasswordCancel}\n          />\n        );\n    }\n  }\n\n  return (\n    <>\n      <Modal\n        isOpen={isOpen}\n        dialogClassName={styles.modalDialog}\n        nativeBottomSheetKey=\"dapp-connect\"\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n        forceFullNative={renderingKey !== DappConnectState.Info}\n        onClose={cancelDappConnectRequestConfirm}\n        onCloseAnimationEnd={cancelDappConnectRequestConfirm}\n      >\n        <Transition\n          name={resolveSlideTransitionName()}\n          className={buildClassName(modalStyles.transition, 'custom-scroll')}\n          slideClassName={modalStyles.transitionSlide}\n          activeKey={renderingKey}\n          nextKey={nextKey}\n        >\n          {renderContent}\n        </Transition>\n      </Modal>\n      <Modal\n        isOpen={isConfirmOpen}\n        isCompact\n        title={lang('Dapp Permissions')}\n        onClose={closeConfirm}\n      >\n        <div className={styles.description}>\n          {lang('$dapp_can_view_balance', {\n            dappname: <strong>{dapp?.name}</strong>,\n          })}\n        </div>\n        <div className={styles.buttons}>\n          <Button onClick={closeConfirm} className={styles.button}>{lang('Cancel')}</Button>\n          <Button isPrimary onClick={handleSubmit} className={styles.button}>{lang('Connect')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const hasConnectRequest = global.dappConnectRequest?.state !== undefined;\n\n  const {\n    state, dapp, error, accountId, permissions, proof,\n  } = global.dappConnectRequest || {};\n\n  const currentAccountId = accountId || global.currentAccountId!;\n\n  return {\n    state,\n    hasConnectRequest,\n    dapp,\n    error,\n    requiredPermissions: permissions,\n    requiredProof: proof,\n    currentAccountId,\n    accounts,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(DappConnectModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport type { Account } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport DappInfo from './DappInfo';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  dapp?: ApiDapp;\n  customTokenBalance?: bigint;\n  customTokenSymbol?: string;\n  customTokenDecimals?: number;\n}\n\ninterface StateProps {\n  toncoinBalance: bigint;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n}\n\nfunction DappInfoWithAccount({\n  dapp,\n  toncoinBalance,\n  currentAccountId,\n  accounts,\n  customTokenBalance,\n  customTokenSymbol,\n  customTokenDecimals,\n}: OwnProps & StateProps) {\n  // Use custom token display if provided, otherwise use TON balance\n  const displayBalance = customTokenBalance !== undefined ? customTokenBalance : toncoinBalance;\n  const displaySymbol = customTokenSymbol || TONCOIN.symbol;\n  const displayDecimals = customTokenDecimals !== undefined ? customTokenDecimals : TONCOIN.decimals;\n\n  return (\n    <div className={styles.transactionDirection}>\n      <div className={styles.transactionAccount}>\n        <div className={styles.accountTitle}>{accounts?.[currentAccountId]?.title}</div>\n        <div className={styles.accountBalance}>\n          {formatCurrency(toDecimal(displayBalance, displayDecimals), displaySymbol)}\n        </div>\n      </div>\n\n      <DappInfo\n        dapp={dapp}\n        className={styles.transactionDapp}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    currentAccountId: global.currentAccountId!,\n    accounts,\n  };\n})(DappInfoWithAccount));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport Skeleton from '../ui/Skeleton';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  rows?: DappSkeletonRow[];\n}\n\nexport type DappSkeletonRow = {\n  isLarge?: boolean;\n  hasFee?: boolean;\n};\n\nfunction DappSkeletonWithContent({ rows }: OwnProps) {\n  return (\n    <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionDirectionLeftSkeleton}>\n          <Skeleton className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n          <Skeleton className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n        </div>\n        <div className={styles.transactionDirectionRightSkeleton}>\n          <Skeleton className={styles.dappInfoIconSkeleton} />\n          <div className={styles.dappInfoDataSkeleton}>\n            <Skeleton className={buildClassName(styles.nameSkeleton, styles.nameDappSkeleton)} />\n            <Skeleton className={buildClassName(styles.descSkeleton, styles.descDappSkeleton)} />\n          </div>\n        </div>\n      </div>\n      {rows?.map(renderRow)}\n    </div>\n  );\n}\n\nexport default memo(DappSkeletonWithContent);\n\nfunction renderRow({ isLarge, hasFee }: DappSkeletonRow) {\n  return (\n    <div className={styles.rowContainerSkeleton}>\n      <Skeleton className={buildClassName(styles.rowLabelSkeleton, isLarge && styles.rowTextLargeSkeleton)} />\n      <Skeleton className={buildClassName(styles.rowSkeleton, isLarge && styles.rowLargeSkeleton)} />\n      {hasFee && <Skeleton className={styles.rowFeeSkeleton} />}\n    </div>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { pick } from '../../util/iteratees';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappInfoWithAccount from './DappInfoWithAccount';\nimport DappSkeletonWithContent, { type DappSkeletonRow } from './DappSkeletonWithContent';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype StateProps = Pick<GlobalState['currentDappSignData'], 'dapp' | 'isLoading' | 'payloadToSign'>;\n\nconst skeletonRows: DappSkeletonRow[] = [\n  { isLarge: false, hasFee: false },\n];\n\nfunction DappSignDataInitial({\n  dapp,\n  isLoading,\n  payloadToSign,\n}: StateProps) {\n  const { closeDappSignData, submitDappSignDataConfirm } = getActions();\n\n  const lang = useLang();\n  const renderingPayloadToSign = useCurrentOrPrev(payloadToSign, true);\n\n  const isDappLoading = dapp === undefined;\n\n  function renderContent() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfoWithAccount dapp={dapp} />\n\n        {renderSignDataByType()}\n\n        <div className={buildClassName(modalStyles.buttons, styles.transferButtons)}>\n          <Button className={modalStyles.button} onClick={closeDappSignData}>{lang('Cancel')}</Button>\n          <Button\n            isPrimary\n            isSubmit\n            isLoading={isLoading}\n            className={modalStyles.button}\n            onClick={submitDappSignDataConfirm}\n          >\n            {lang('Sign')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderSignDataByType() {\n    switch (renderingPayloadToSign?.type) {\n      case 'text': {\n        const { text } = renderingPayloadToSign;\n\n        return (\n          <>\n            <p className={styles.label}>{lang('Message')}</p>\n            <div className={buildClassName(styles.payloadField, styles.payloadField_text)}>\n              {text}\n            </div>\n          </>\n        );\n      }\n\n      case 'binary': {\n        const { bytes } = renderingPayloadToSign;\n\n        return (\n          <>\n            <p className={styles.label}>{lang('Binary Data')}</p>\n            <div className={buildClassName(styles.payloadField, styles.payloadField_expanded)}>\n              {bytes}\n            </div>\n            <div className={styles.warningForPayload}>\n              {lang('The binary data content is unclear. Sign it only if you trust the service.')}\n            </div>\n          </>\n        );\n      }\n\n      case 'cell': {\n        const { cell, schema } = renderingPayloadToSign;\n\n        return (\n          <>\n            {!!schema && (\n              <>\n                <p className={styles.label}>{lang('Cell Schema')}</p>\n                <div className={buildClassName(styles.payloadField, styles.payloadField_text)}>\n                  {schema}\n                </div>\n              </>\n            )}\n\n            <p className={styles.label}>{lang('Cell Data')}</p>\n            <div className={buildClassName(styles.dataField, styles.payloadField, styles.payloadField_expanded)}>\n              {cell}\n            </div>\n\n            <div className={styles.warningForPayload}>\n              {lang('The binary data content is unclear. Sign it only if you trust the service.')}\n            </div>\n          </>\n        );\n      }\n    }\n  }\n\n  return (\n    <Transition\n      name=\"semiFade\"\n      activeKey={isDappLoading ? 0 : 1}\n      slideClassName={styles.skeletonTransitionWrapper}\n    >\n      <ModalHeader title={lang('Sign Data')} onClose={closeDappSignData} />\n      {isDappLoading\n        ? <DappSkeletonWithContent rows={skeletonRows} />\n        : renderContent()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => pick(\n  global.currentDappSignData,\n  ['dapp', 'isLoading', 'payloadToSign'],\n))(DappSignDataInitial));\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"BQ2dFF1C\",\"amount\":\"ZK1jiZZ7\",\"amount_purple\":\"A4q4bGl9\",\"amountPurple\":\"A4q4bGl9\",\"amount_green\":\"juLGV08g\",\"amountGreen\":\"juLGV08g\",\"amountSymbol\":\"pIw09HQw\",\"amountFraction\":\"AxDVO85U\",\"buttons\":\"VBRINuzy\",\"buttonsAfterNft\":\"kg0TjtvC\",\"button\":\"ONW_pS7t\"};","import React, { memo, useEffect } from '../../lib/teact/teact';\n\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n  type?: 'transfer' | 'signData';\n}\n\nfunction DappTransferComplete({\n  isActive,\n  onClose,\n  type = 'transfer',\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const title = type === 'signData' ? lang('Data Signed!') : lang('Transaction Sent!');\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={styles.sticker}\n          tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n          previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(DappTransferComplete);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState } from '../../global/types';\nimport { SignDataState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { pick } from '../../util/iteratees';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappSignDataInitial from './DappSignDataInitial';\nimport DappTransferComplete from './DappTransferComplete';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ntype StateProps = Pick<GlobalState['currentDappSignData'], 'isLoading' | 'state' | 'error'>;\n\nfunction DappSignDataModal({\n  isLoading,\n  state,\n  error,\n}: StateProps) {\n  const {\n    setDappSignDataScreen,\n    submitDappSignDataPassword,\n    clearDappSignDataError,\n    closeDappSignData,\n    cancelDappSignData,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== SignDataState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SignDataState.Password) {\n      setDappSignDataScreen({ state: SignDataState.Initial });\n    }\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDappSignDataPassword({ password });\n  });\n\n  const handleResetSignData = useLastCallback(() => {\n    cancelDappSignData();\n    updateNextKey();\n  });\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Sign Data')} onClose={closeDappSignData} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Back')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappSignDataError}\n        />\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SignDataState) {\n    switch (currentKey) {\n      case SignDataState.Initial:\n        return <DappSignDataInitial />;\n\n      case SignDataState.Password:\n        return renderPassword(isActive);\n\n      case SignDataState.Complete:\n        return (\n          <DappTransferComplete\n            isActive={isActive}\n            onClose={closeDappSignData}\n            type=\"signData\"\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"dapp-sign-data\"\n      noBackdropClose\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={renderingKey === SignDataState.Password}\n      onClose={closeDappSignData}\n      onCloseAnimationEnd={handleResetSignData}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => pick(\n  global.currentDappSignData,\n  ['isLoading', 'state', 'error'],\n))(DappSignDataModal));\n","// Converts a string to a numeric seed using a simple hashing algorithm\nfunction stringToNumberSeed(str: string) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    // hash * 31 + charCode\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    // Conversion to a 32-bit integer\n    hash |= 0;\n  }\n\n  return hash;\n}\n\nexport default function getPseudoRandomNumber(min: number, max: number, seed: string) {\n  const numberSeed = stringToNumberSeed(seed);\n  // Convert `seed` to a pseudorandom number using `Math.sin`\n  const x = Math.sin(numberSeed) * 10000;\n  const randomFraction = x - Math.floor(x);\n\n  return Math.floor(randomFraction * (max - min + 1)) + min;\n}\n","import type { ApiSwapAsset } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport { Big } from '../../lib/big.js';\nimport { formatNumber } from '../formatNumber';\n\nconst BTC = new Set(['jWBTC', 'oWBTC', 'BTC']);\nconst USD = new Set(['jUSDT', 'oUSDT', 'USDT', 'jUSDC', 'oUSDC', 'USDC', 'USD']);\nconst FIAT = new Set(['USD', 'RUB', 'EUR', 'CNY']);\n\nconst LARGE_NUMBER = 1000;\n\nfunction getCurrencyPriority(symbol: string) {\n  if (FIAT.has(symbol)) return 5;\n  if (USD.has(symbol)) return 4;\n  if (BTC.has(symbol)) return 3;\n  if (symbol === TONCOIN.symbol) return 2;\n\n  return 1;\n}\n\nexport default function getSwapRate(\n  fromAmount?: string,\n  toAmount?: string,\n  fromToken?: Pick<ApiSwapAsset, 'symbol'>,\n  toToken?: Pick<ApiSwapAsset, 'symbol'>,\n  shouldTrimLargeNumber = false,\n) {\n  if (!fromAmount || !toAmount || !fromToken || !toToken) {\n    return undefined;\n  }\n\n  let firstCurrencySymbol = fromToken.symbol;\n  let secondCurrencySymbol = toToken.symbol;\n  let price: string;\n  const fromAmountBig = new Big(fromAmount);\n  const toAmountBig = new Big(toAmount);\n\n  if (fromAmountBig.eq(0) || toAmountBig.eq(0)) {\n    return undefined;\n  }\n\n  const fromPriority = getCurrencyPriority(firstCurrencySymbol);\n  const toPriority = getCurrencyPriority(secondCurrencySymbol);\n\n  if (toPriority < fromPriority) {\n    firstCurrencySymbol = toToken.symbol;\n    secondCurrencySymbol = fromToken.symbol;\n    const ratio = fromAmountBig.div(toAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  } else {\n    const ratio = toAmountBig.div(fromAmount);\n    const isLargeNumber = shouldTrimLargeNumber && ratio.gte(LARGE_NUMBER);\n    price = formatNumber(ratio.toNumber(), isLargeNumber ? 0 : 4);\n  }\n\n  return {\n    firstCurrencySymbol,\n    secondCurrencySymbol,\n    price,\n  };\n}\n","import avalancheBlockchainIcon from '../../assets/blockchain/chain_avalanche.svg';\nimport bitcoinBlockchainIcon from '../../assets/blockchain/chain_bitcoin.svg';\nimport bitcoincashBlockchainIcon from '../../assets/blockchain/chain_bitcoincash.svg';\nimport bnbBlockchainIcon from '../../assets/blockchain/chain_bnb.svg';\nimport cardanoBlockchainIcon from '../../assets/blockchain/chain_cardano.svg';\nimport cosmosBlockchainIcon from '../../assets/blockchain/chain_cosmos.svg';\nimport dashBlockchainIcon from '../../assets/blockchain/chain_dash.svg';\nimport dogeBlockchainIcon from '../../assets/blockchain/chain_doge.svg';\nimport eosBlockchainIcon from '../../assets/blockchain/chain_eos.svg';\nimport ethereumBlockchainIcon from '../../assets/blockchain/chain_ethereum.svg';\nimport ethereumclassicBlockchainIcon from '../../assets/blockchain/chain_ethereumclassic.svg';\nimport internetcomputerBlockchainIcon from '../../assets/blockchain/chain_internetcomputer.svg';\nimport iotaBlockchainIcon from '../../assets/blockchain/chain_iota.svg';\nimport litecoinBlockchainIcon from '../../assets/blockchain/chain_litecoin.svg';\nimport moneroBlockchainIcon from '../../assets/blockchain/chain_monero.svg';\nimport polkadotBlockchainIcon from '../../assets/blockchain/chain_polkadot.svg';\nimport rippleBlockchainIcon from '../../assets/blockchain/chain_ripple.svg';\nimport solanaBlockchainIcon from '../../assets/blockchain/chain_solana.svg';\nimport stellarBlockchainIcon from '../../assets/blockchain/chain_stellar.svg';\nimport tonBlockchainIcon from '../../assets/blockchain/chain_ton.svg';\nimport tronBlockchainIcon from '../../assets/blockchain/chain_tron.svg';\nimport zcashBlockchainIcon from '../../assets/blockchain/chain_zcash.svg';\n\nconst CHAIN_ICON_MAP: Record<string, string> = {\n  avalanche: avalancheBlockchainIcon,\n  bitcoin: bitcoinBlockchainIcon,\n  bitcoin_cash: bitcoincashBlockchainIcon,\n  binance_smart_chain: bnbBlockchainIcon,\n  binance_dex: bnbBlockchainIcon,\n  cardano: cardanoBlockchainIcon,\n  cosmos: cosmosBlockchainIcon,\n  dash: dashBlockchainIcon,\n  doge: dogeBlockchainIcon,\n  eos: eosBlockchainIcon,\n  ethereum: ethereumBlockchainIcon,\n  ethereum_classic: ethereumclassicBlockchainIcon,\n  internet_computer: internetcomputerBlockchainIcon,\n  iota: iotaBlockchainIcon,\n  litecoin: litecoinBlockchainIcon,\n  monero: moneroBlockchainIcon,\n  polkadot: polkadotBlockchainIcon,\n  ripple: rippleBlockchainIcon,\n  solana: solanaBlockchainIcon,\n  stellar: stellarBlockchainIcon,\n  ton: tonBlockchainIcon,\n  tron: tronBlockchainIcon,\n  zcash: zcashBlockchainIcon,\n};\n\nexport default function getChainNetworkIcon(networkName?: string) {\n  if (!networkName) return '';\n\n  return CHAIN_ICON_MAP[networkName] ?? networkName;\n}\n","import btc from '../../../assets/coins/coin_btc.png';\nimport my from '../../../assets/coins/coin_my.svg';\nimport ton from '../../../assets/coins/coin_ton.png';\nimport trx from '../../../assets/coins/coin_trx.svg';\nimport usdt from '../../../assets/coins/coin_usdt.svg';\n\nexport const ASSET_LOGO_PATHS = {\n  ton,\n  btc,\n  trx,\n  usdt,\n  my,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"XPeM0_U7\",\"icon\":\"FoSSGfFn\",\"large\":\"wjhynzvL\",\"x-large\":\"CRkmFyTA\",\"xLarge\":\"CRkmFyTA\",\"x-small\":\"TGv989qd\",\"xSmall\":\"TGv989qd\",\"small\":\"Zb5vM0UM\",\"middle\":\"d5dxI69w\",\"fallbackIcon\":\"p13LUS2n\",\"blockchainIcon\":\"CMIQ9vCY\"};","import React, { memo, type TeactNode } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from '../ui/helpers/assetLogos';\n\nimport useFlag from '../../hooks/useFlag';\n\nimport styles from './TokenIcon.module.scss';\n\ninterface OwnProps {\n  token: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  withChainIcon?: boolean;\n  size?: 'x-small' | 'small' | 'middle' | 'large' | 'x-large';\n  className?: string;\n  iconClassName?: string;\n  children?: TeactNode;\n}\n\nfunction TokenIcon({\n  token, size, withChainIcon, className, iconClassName, children,\n}: OwnProps) {\n  const { symbol, image, chain } = token;\n  const logoPath = ASSET_LOGO_PATHS[symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS] || image;\n  const [isLoadingError, markLoadingError] = useFlag(false);\n\n  function renderDefaultIcon() {\n    return (\n      <div className={buildClassName(styles.icon, size && styles[size], iconClassName, styles.fallbackIcon)}>\n        {token.symbol.slice(0, 1)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {\n        !isLoadingError ? (\n          <img\n            src={logoPath}\n            alt={symbol}\n            className={buildClassName(styles.icon, size && styles[size], iconClassName)}\n            draggable={false}\n            onError={markLoadingError}\n          />\n        ) : renderDefaultIcon()\n      }\n      {withChainIcon && chain && (\n        <img\n          src={getChainNetworkIcon(chain)}\n          alt=\"\"\n          className={buildClassName(styles.blockchainIcon, size && styles[size])}\n          draggable={false}\n        />\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(TokenIcon);\n","import type { RefObject } from 'react';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Theme } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { animateInstantly } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport { clamp } from '../../util/math';\nimport { random } from '../../util/random';\nimport { DPR } from '../../util/windowEnvironment';\n\nimport { useGetIsIntersectingWithApp } from '../../hooks/useAppIntersectionObserver';\nimport useAppTheme from '../../hooks/useAppTheme';\nimport { getIsInBackground } from '../../hooks/useBackgroundMode';\nimport useDerivedSignal from '../../hooks/useDerivedSignal';\n\nimport styles from './SensitiveDataMask.module.scss';\n\nexport type SensitiveDataMaskSkin = (\n  'lightTheme' | 'darkTheme' | 'cardLightText' | 'cardDarkText' | 'cardGoldText' | 'purple' | 'green'\n  );\n\ninterface OwnProps {\n  ref?: RefObject<HTMLCanvasElement>;\n  cols: number;\n  rows: number;\n  cellSize: number;\n  skin?: SensitiveDataMaskSkin;\n  className?: string;\n}\n\ninterface StateProps {\n  theme: Theme;\n}\n\ninterface AnimationState {\n  opacityValues: number[][];\n  steps: number[][];\n  lastSpeedChangeAt?: number;\n  isRendered: boolean;\n}\n\ninterface RenderOptions {\n  ctx: CanvasRenderingContext2D;\n  cols: number;\n  rows: number;\n  width: number;\n  height: number;\n  cellSizeDpr: number;\n  color: string;\n}\n\n// STEPS values are pre-multiplied by 1 / (1000 / 60) to compensate for FPS\nconst STEPS = [\n  0.0001 * 0.06,\n  0.0001 * 0.06,\n  0.00001 * 0.06,\n  0.0003 * 0.06,\n  0.0001 * 0.06,\n  0.0025 * 0.06,\n];\nconst FROM = 0.07;\nconst TO = 0.25;\nconst CHANGE_SPEED_INTERVAL = 3000;\nconst SKIN_COLORS: Record<SensitiveDataMaskSkin, string> = {\n  lightTheme: '120, 121, 122',\n  darkTheme: '240, 241, 242',\n  cardLightText: '250, 250, 250',\n  cardDarkText: '10, 10, 10',\n  cardGoldText: '101, 73, 16',\n  purple: '96, 107, 215',\n  green: '43, 196, 105',\n};\n\nfunction SensitiveDataMask({\n  ref,\n  cols,\n  rows,\n  cellSize,\n  skin,\n  className,\n  theme,\n}: OwnProps & StateProps) {\n  let canvasRef = useRef<HTMLCanvasElement>();\n  if (ref) {\n    canvasRef = ref;\n  }\n\n  const cellSizeDpr = cellSize * DPR;\n\n  const appTheme = useAppTheme(theme);\n  const color = SKIN_COLORS[skin ?? `${appTheme}Theme`];\n\n  const animationStateRef = useRef<AnimationState>({\n    opacityValues: [],\n    steps: [],\n    lastSpeedChangeAt: undefined,\n    isRendered: false,\n  });\n\n  const getIsIntersecting = useGetIsIntersectingWithApp(canvasRef);\n  const getIsInBackground2 = getIsInBackground;\n  const getShouldAnimate = useDerivedSignal(\n    () => getIsIntersecting() && !getIsInBackground2(),\n    [getIsIntersecting, getIsInBackground2],\n  );\n\n  useLayoutEffect(() => {\n    const state = animationStateRef.current;\n\n    if (state.isRendered && !getShouldAnimate()) return undefined;\n\n    const canvas = canvasRef.current!;\n    const ctx = canvas.getContext('2d')!;\n    const width = cols * cellSizeDpr;\n    const height = rows * cellSizeDpr;\n\n    let shouldStop = false;\n    let lastFrameAt: number | undefined;\n\n    canvas.width = width;\n    canvas.height = height;\n\n    state.lastSpeedChangeAt = undefined;\n\n    const renderOptions = { ctx, cols, rows, width, height, cellSizeDpr, color };\n\n    animateInstantly(() => {\n      if (shouldStop || (state.isRendered && !getShouldAnimate())) return false;\n\n      const now = performance.now();\n      const frameDuration = lastFrameAt ? now - lastFrameAt : 0;\n      renderFrame(renderOptions, state, frameDuration);\n      lastFrameAt = now;\n\n      return true;\n    }, requestMutation);\n\n    return () => {\n      shouldStop = true;\n    };\n  }, [cols, rows, cellSizeDpr, getShouldAnimate, color]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      style={`width: ${cellSize * cols}px; height: ${cellSize * rows}px`}\n      className={buildClassName(styles.canvas, className)}\n    />\n  );\n}\n\nfunction renderFrame(\n  options: RenderOptions,\n  state: AnimationState,\n  frameDuration = 0,\n) {\n  const {\n    ctx, cols, rows, cellSizeDpr, width, height, color,\n  } = options;\n\n  const now = performance.now();\n  const shouldChangeSpeed = state.lastSpeedChangeAt ? now - state.lastSpeedChangeAt >= CHANGE_SPEED_INTERVAL : false;\n\n  if (shouldChangeSpeed || !state.lastSpeedChangeAt) {\n    state.lastSpeedChangeAt = now;\n  }\n\n  ctx.clearRect(0, 0, width, height);\n\n  for (let row = 0; row < rows; row++) {\n    for (let col = 0; col < cols; col++) {\n      state.steps[row] ??= [];\n      state.opacityValues[row] ??= [];\n\n      if (shouldChangeSpeed) {\n        state.steps[row][col] = sample(STEPS) * (state.steps[row][col] < 0 ? -1 : 1);\n      } else {\n        state.steps[row][col] ??= sample(STEPS);\n      }\n\n      let nextOpacity = state.opacityValues[row][col] ?? (Math.random() * (TO - FROM) + FROM);\n      nextOpacity += state.steps[row][col] * frameDuration;\n      if (nextOpacity > TO || nextOpacity < FROM) {\n        state.steps[row][col] *= -1;\n        nextOpacity = clamp(nextOpacity, FROM, TO);\n      }\n\n      state.opacityValues[row][col] = nextOpacity;\n\n      ctx.fillStyle = `rgba(${color}, ${nextOpacity})`;\n      ctx.fillRect(col * cellSizeDpr, row * cellSizeDpr, cellSizeDpr, cellSizeDpr);\n\n      state.isRendered ||= true;\n    }\n  }\n}\n\n// Returns a random element from the array\nfunction sample<T>(array: T[]): T {\n  return array[random(0, array.length - 1)];\n}\n\nexport default memo(withGlobal((global) => {\n  return {\n    theme: global.settings.theme,\n  };\n})(SensitiveDataMask));\n","// extracted by mini-css-extract-plugin\nexport default {\"canvas\":\"_5lZqlhE\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"iXsFkRU7\",\"center\":\"FEWWktrI\",\"right\":\"FXNTlsIy\",\"interactive\":\"O6dWAwYM\",\"content\":\"GAvxZ7xR\",\"spoiler\":\"ynSPM0hu\",\"left\":\"DSH91Ntx\",\"fixedWidth\":\"CBhjF9XS\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { SensitiveDataMaskSkin } from '../common/SensitiveDataMask';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { stopEvent } from '../../util/domEvents';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport SensitiveDataMask from '../common/SensitiveDataMask';\n\nimport styles from './SensitiveData.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  rows: number;\n  cols: number;\n  cellSize: number;\n  align?: 'left' | 'center' | 'right';\n  maskSkin?: SensitiveDataMaskSkin;\n  shouldHoldSize?: boolean;\n  className?: string;\n  maskClassName?: string;\n  contentClassName?: string;\n  children: TeactNode;\n}\n\nfunction SensitiveData({\n  isActive,\n  rows,\n  cols,\n  cellSize = 0,\n  align = 'left',\n  maskSkin,\n  shouldHoldSize,\n  className,\n  maskClassName,\n  contentClassName,\n  children,\n}: OwnProps) {\n  const { setIsSensitiveDataHidden } = getActions();\n\n  const {\n    ref: contentRef,\n  } = useShowTransition<HTMLDivElement>({\n    isOpen: !isActive,\n    noMountTransition: !isActive,\n    className: 'slow',\n  });\n\n  const {\n    shouldRender: shouldRenderSpoiler,\n    ref: spoilerRef,\n  } = useShowTransition<HTMLCanvasElement>({\n    isOpen: isActive,\n    withShouldRender: true,\n    className: 'slow',\n  });\n\n  function handleClick(e: React.UIEvent) {\n    stopEvent(e);\n\n    setIsSensitiveDataHidden({ isHidden: false });\n  }\n\n  const fullClassName = buildClassName(\n    styles.wrapper,\n    className,\n    isActive && styles.interactive,\n    styles[align],\n  );\n  const spoilerClassName = buildClassName(\n    styles.spoiler,\n    maskClassName,\n    styles[align],\n  );\n  const wrapperStyle = buildStyle(\n    `--spoiler-width: calc(${cellSize * cols}px + var(--sensitive-data-extra-width, 0px))`,\n    `min-height: ${cellSize * rows}px`,\n    (isActive || shouldHoldSize) && 'min-width: var(--spoiler-width);',\n  );\n  const contentFullClassName = buildClassName(\n    styles.content,\n    contentClassName,\n    isActive && styles.fixedWidth,\n  );\n\n  return (\n    <div\n      style={wrapperStyle}\n      className={fullClassName}\n      onClick={isActive ? handleClick : undefined}\n    >\n      {shouldRenderSpoiler && (\n        <SensitiveDataMask\n          ref={spoilerRef}\n          cols={cols}\n          rows={rows}\n          cellSize={cellSize}\n          skin={maskSkin}\n          className={spoilerClassName}\n        />\n      )}\n      <div ref={contentRef} className={contentFullClassName}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default SensitiveData;\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"voGmKods\",\"interactive\":\"JKuqFIMs\",\"active\":\"vPKs_EfD\",\"itemLast\":\"ithY1XA8\",\"icon\":\"MwNQsICc\",\"dnsIcon\":\"phy9vVLZ\",\"iconFromToken\":\"PVRC8YXZ\",\"iconWaiting\":\"hJkwVF68\",\"iconError\":\"QEx5s5VW\",\"header\":\"pEdRQT_R\",\"subheader\":\"lp28p1if\",\"atMiddle\":\"O_xYgdgM\",\"operationName\":\"mNtPH759\",\"date\":\"koKI7xJv\",\"subheaderHighlight\":\"PQ56yxoE\",\"chainIcon\":\"cSKmXwko\",\"amount\":\"cPGOyB7W\",\"amountTokenIcon\":\"fY8lBeMI\",\"commentIcon\":\"gBryI_V5\",\"comment\":\"HZlzXBrP\",\"outgoing\":\"pDncMEIU\",\"scamImage\":\"q57qlNaF\",\"swapArrowRight\":\"O_3HTad8\",\"swapSell\":\"i_ICee_w\",\"swapBuy\":\"mTZ6NzL2\",\"swapHold\":\"aPXkRlmy\",\"swapError\":\"zT_yLEe8\",\"nft\":\"e3BuV9xi\",\"nonInteractive\":\"ajtoDEwn\",\"nftImage\":\"D2P00KCV\",\"nftData\":\"q0pHgkH5\",\"nftName\":\"nyPEMK4u\",\"nftCollection\":\"Qpo6_7BK\",\"attachment\":\"oLA5mzy7\",\"attachmentsInFullSubheader\":\"WHdvfTWr\",\"attachmentsInLeftSubheader\":\"h_nAGYlh\",\"colorIn\":\"Zw8K7_jM\",\"colorOut\":\"X1ICSpcc\",\"colorStake\":\"eSMoqURj\",\"colorNegative\":\"r0qJPY3I\",\"colorSwap\":\"ubpNbJEy\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { AppTheme } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX } from '../../../../config';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './Activity.module.scss';\n\nconst iconNamePrefix = 'iconClock';\n\nexport type Color = keyof typeof ANIMATED_STICKERS_PATHS.light.preview extends `${typeof iconNamePrefix}${infer C}`\n  ? C : never;\n\ninterface OwnProps {\n  isActive?: boolean;\n  color?: Color;\n  appTheme: AppTheme;\n}\n\nfunction ActivityPendingIndicator({ isActive, color = 'Gray', appTheme }: OwnProps) {\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: isActive,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  const iconName = `${iconNamePrefix}${color}` as `${typeof iconNamePrefix}${Color}`;\n\n  return (\n    <div ref={ref} className={styles.iconWaiting}>\n      <AnimatedIconWithPreview\n        play\n        size={ANIMATED_STICKER_TINY_ICON_PX}\n        nonInteractive\n        noLoop={false}\n        forceOnHeavyAnimation\n        tgsUrl={ANIMATED_STICKERS_PATHS[appTheme][iconName]}\n        previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview[iconName]}\n      />\n    </div>\n  );\n}\n\nexport default memo(ActivityPendingIndicator);\n","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../../api/types';\nimport type { Account, AppTheme } from '../../../../global/types';\nimport type { Color as PendingIndicatorColor } from './ActivityPendingIndicator';\n\nimport { TONCOIN, WHOLE_PART_DELIMITER } from '../../../../config';\nimport { getIsInternalSwap, resolveSwapAsset } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport getSwapRate from '../../../../util/swap/getSwapRate';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport ActivityPendingIndicator from './ActivityPendingIndicator';\n\nimport styles from './Activity.module.scss';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  isLast?: boolean;\n  activity: ApiSwapActivity;\n  isActive?: boolean;\n  appTheme: AppTheme;\n  addressByChain?: Account['addressByChain'];\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  onClick?: (id: string) => void;\n};\n\nconst SWAP_HEIGHT = 4; // rem\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending', 'hold']);\nconst CHANGELLY_EXPIRED_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['expired', 'failed']);\n\nfunction Swap({\n  ref,\n  tokensBySlug,\n  activity,\n  isLast,\n  isActive,\n  appTheme,\n  addressByChain,\n  isSensitiveDataHidden,\n  isFuture,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const {\n    id,\n    timestamp,\n    status,\n    from,\n    to,\n    cex,\n  } = activity;\n\n  const fromToken = useMemo(() => {\n    if (!from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, from);\n  }, [from, tokensBySlug]);\n  const toToken = useMemo(() => {\n    if (!to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, to);\n  }, [to, tokensBySlug]);\n\n  const fromAmount = Number(activity.fromAmount);\n  const toAmount = Number(activity.toAmount);\n  const isPending = status === 'pending'\n    || CHANGELLY_PENDING_STATUSES.has(cex?.status ?? '');\n  const isError = ONCHAIN_ERROR_STATUSES.has(status)\n    || CHANGELLY_EXPIRED_STATUSES.has(cex?.status ?? '');\n  const isHold = cex?.status === 'hold';\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, timestamp.toString()), [timestamp]);\n\n  const isFromToncoin = from === TONCOIN.slug;\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken,\n    to: toToken,\n    toAddress: cex?.payoutAddress,\n    addressByChain,\n  });\n\n  function renderIcon() {\n    let statusClass: string | undefined = styles.colorSwap;\n    let pendingIndicatorColor: PendingIndicatorColor = 'Green';\n    if (isError) {\n      statusClass = styles.colorNegative;\n      pendingIndicatorColor = 'Red';\n    } else if (isHold) {\n      statusClass = undefined;\n      pendingIndicatorColor = 'Gray';\n    }\n\n    return (\n      <i className={buildClassName('icon-swap', styles.icon, statusClass)} aria-hidden>\n        <ActivityPendingIndicator\n          isActive={isPending}\n          color={pendingIndicatorColor}\n          appTheme={appTheme}\n        />\n        {isError && <i className={buildClassName(styles.iconError, 'icon-close-filled')} aria-hidden />}\n      </i>\n    );\n  }\n\n  function renderAmount() {\n    const statusClass = buildClassName(isError && styles.swapError, isHold && styles.swapHold);\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n        contentClassName={styles.amount}\n      >\n        <span className={buildClassName(styles.swapSell, statusClass)}>\n          {formatCurrencyExtended(\n            Math.abs(fromAmount),\n            fromToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        <i\n          className={buildClassName(styles.swapArrowRight, 'icon-chevron-right', statusClass)}\n          aria-hidden\n        />\n        <span className={buildClassName(styles.swapBuy, statusClass)}>\n          {formatCurrencyExtended(\n            Math.abs(toAmount),\n            toToken?.symbol || TONCOIN.symbol,\n            true,\n          )}\n        </span>\n        {fromToken && <TokenIcon token={fromToken} size=\"x-small\" className={styles.amountTokenIcon} />}\n        {toToken && <TokenIcon token={toToken} size=\"x-small\" className={styles.amountTokenIcon} />}\n      </SensitiveData>\n    );\n  }\n\n  function renderStatusAndDate() {\n    if (isFuture) {\n      return <div />;\n    }\n\n    const date: string | TeactNode[] = formatTime(timestamp);\n    let state = '';\n    const cexStatus = cex?.status;\n\n    if (cexStatus === 'expired' || cexStatus === 'overdue') {\n      state = lang('Expired');\n    } else if (cexStatus === 'refunded') {\n      state = lang('Refunded');\n    } else if (cexStatus === 'hold') {\n      state = lang('On Hold');\n    } else if (cexStatus === 'failed' || isError) {\n      state = lang('Failed');\n    } else if (cexStatus === 'waiting' && !isFromToncoin && !isInternalSwap) {\n      // Skip the 'waiting' status for transactions from Toncoin to account or from Tron to Ton\n      // inside the multichain wallet for delayed status updates from hangelly\n      state = lang('Waiting for Payment');\n    } else if (isPending) {\n      state = lang('In Progress');\n    }\n\n    return (\n      <div className={styles.date}>\n        {state && <span className={styles.subheaderHighlight}>{state}</span>}\n        {state && `${WHOLE_PART_DELIMITER}${WHOLE_PART_DELIMITER}`}\n        {date}\n      </div>\n    );\n  }\n\n  function renderTitle() {\n    if (isHold || isError || isFuture) {\n      return lang('$swap_action');\n    } else if (isPending) {\n      return lang('Swapping');\n    }\n\n    return lang('Swapped');\n  }\n\n  function renderCurrency() {\n    const rate = getSwapRate(activity.fromAmount, activity.toAmount, fromToken, toToken);\n\n    if (!rate) return undefined;\n\n    const [priceWhole, priceFraction] = rate.price.split('.');\n\n    return (\n      <div>\n        {rate.firstCurrencySymbol}{'  '}\n        <span className={styles.subheaderHighlight}>\n          {priceWhole}\n          <small>.{priceFraction}{' '}{rate.secondCurrencySymbol}</small>\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n        onClick && styles.interactive,\n      )}\n      onClick={onClick && (() => onClick(id))}\n      isSimple\n    >\n      {renderIcon()}\n      <div className={styles.header}>\n        <div className={buildClassName(styles.operationName, isFuture && styles.atMiddle)}>\n          {renderTitle()}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderStatusAndDate()}\n        {renderCurrency()}\n      </div>\n    </Button>\n  );\n}\n\nexport default memo(Swap);\n\nexport function getSwapHeight() {\n  return SWAP_HEIGHT;\n}\n","import type { ApiChain } from '../api/types';\nimport type { Account, SavedAddress } from '../global/types';\n\nexport function getLocalAddressName({\n  address,\n  chain,\n  currentAccountId,\n  accounts,\n  savedAddresses,\n}: {\n  address?: string;\n  chain: ApiChain;\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  savedAddresses?: SavedAddress[];\n}) {\n  if (!address) return undefined;\n\n  const otherAccount = accounts\n    ? Object.keys(accounts).find((accountId) => {\n      return accountId !== currentAccountId && accounts[accountId].addressByChain?.[chain] === address;\n    })\n    : undefined;\n\n  if (otherAccount) {\n    return accounts![otherAccount].title;\n  }\n\n  return savedAddresses?.find((item) => {\n    return item.address === address && item.chain === chain;\n  })?.name;\n}\n","import type { Ref, RefObject } from 'react';\nimport type { TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiBaseCurrency,\n  ApiNft,\n  ApiTokenWithPrice,\n  ApiTransactionActivity,\n  ApiTransactionType,\n  ApiYieldType,\n} from '../../../../api/types';\nimport type { Account, AppTheme, SavedAddress } from '../../../../global/types';\nimport type { Color as PendingIndicatorColor } from './ActivityPendingIndicator';\nimport { MediaType } from '../../../../global/types';\n\nimport {\n  FRACTION_DIGITS,\n  NFT_MARKETPLACE_TITLES,\n  SWAP_DEX_LABELS,\n  TONCOIN,\n  TRANSACTION_ADDRESS_SHIFT,\n  WHOLE_PART_DELIMITER,\n} from '../../../../config';\nimport {\n  DNS_TRANSACTION_TYPES,\n  getTransactionAmountDisplayMode,\n  getTransactionTitle,\n  isScamTransaction,\n  shouldShowTransactionAddress,\n  shouldShowTransactionAnnualYield,\n  shouldShowTransactionComment,\n  STAKING_TRANSACTION_TYPES,\n} from '../../../../util/activities';\nimport { bigintAbs } from '../../../../util/bigint';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatTime } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { getDnsDomainZone } from '../../../../util/dns';\nimport { formatBaseCurrencyAmount, formatCurrencyExtended } from '../../../../util/formatNumber';\nimport { getLocalAddressName } from '../../../../util/getLocalAddressName';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport { shortenAddress } from '../../../../util/shortenAddress';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport ActivityPendingIndicator from './ActivityPendingIndicator';\n\nimport styles from './Activity.module.scss';\n\nimport scamImg from '../../../../assets/scam.svg';\n\ntype OwnProps = {\n  ref?: Ref<HTMLElement>;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  transaction: ApiTransactionActivity;\n  isLast?: boolean;\n  isActive?: boolean;\n  withChainIcon?: boolean;\n  annualYield?: number;\n  yieldType?: ApiYieldType;\n  appTheme: AppTheme;\n  savedAddresses?: SavedAddress[];\n  doesNftExist?: boolean;\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  accounts?: Record<string, Account>;\n  currentAccountId: string;\n  baseCurrency?: ApiBaseCurrency;\n  onClick?: (id: string) => void;\n};\n\nconst TRANSACTION_HEIGHT = 4; // rem\nconst NFT_EXTRA_HEIGHT = 3.875; // rem\nconst COMMENT_EXTRA_HEIGHT = 2.375; // rem\nconst SUBHEADER_RELEASE_HEIGHT = 1.25; // rem\n\nconst OUT_TRANSACTION_TYPES = new Set<ApiTransactionType>([\n  undefined, 'unstakeRequest', 'nftTrade', 'auctionBid', 'liquidityDeposit',\n]);\n\nfunction Transaction({\n  ref,\n  tokensBySlug,\n  transaction,\n  isActive,\n  annualYield,\n  yieldType,\n  savedAddresses,\n  isLast,\n  appTheme,\n  withChainIcon,\n  doesNftExist,\n  isSensitiveDataHidden,\n  isFuture,\n  accounts,\n  currentAccountId,\n  baseCurrency,\n  onClick,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const {\n    txId,\n    amount,\n    fromAddress,\n    toAddress,\n    timestamp,\n    comment,\n    encryptedComment,\n    isIncoming,\n    type,\n    metadata,\n    slug,\n    nft,\n    extra,\n    isPending,\n  } = transaction;\n\n  const isStaking = STAKING_TRANSACTION_TYPES.has(type);\n  const isDnsOperation = DNS_TRANSACTION_TYPES.has(type);\n\n  const token = tokensBySlug?.[slug];\n  const { chain } = token || {};\n  const address = isIncoming ? fromAddress : toAddress;\n  const localAddressName = useMemo(() => {\n    if (!chain) return undefined;\n\n    return getLocalAddressName({\n      address,\n      chain,\n      currentAccountId,\n      accounts,\n      savedAddresses,\n    });\n  }, [accounts, address, chain, currentAccountId, savedAddresses]);\n  const addressName = localAddressName || metadata?.name;\n  const dnsIconText = useMemo(() => isDnsOperation ? getDnsIconText(nft) : '', [isDnsOperation, nft]);\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, timestamp.toString()), [timestamp]);\n  const attachmentsTakeSubheader = shouldAttachmentTakeSubheader(transaction, isFuture);\n  const isNoSubheaderLeft = getIsNoSubheaderLeft(transaction, isFuture);\n\n  let operationColorClass: string | undefined;\n  let pendingIndicatorColor: PendingIndicatorColor = 'Gray';\n  if (type === 'burn') {\n    operationColorClass = styles.colorNegative;\n    pendingIndicatorColor = 'Red';\n  } else if (isIncoming) {\n    operationColorClass = styles.colorIn;\n    pendingIndicatorColor = 'Green';\n  } else if (type === 'stake') {\n    operationColorClass = styles.colorStake;\n    pendingIndicatorColor = 'PurpleWhite';\n  } else if (OUT_TRANSACTION_TYPES.has(type)) {\n    operationColorClass = styles.colorOut;\n    pendingIndicatorColor = 'Blue';\n  }\n\n  const handleNftClick = useLastCallback((event: React.MouseEvent) => {\n    event.stopPropagation();\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft, txId });\n  });\n\n  function renderNft() {\n    return (\n      <div\n        className={buildClassName(\n          styles.attachment,\n          styles.nft,\n          !doesNftExist && styles.nonInteractive,\n          'transaction-nft',\n        )}\n        onClick={doesNftExist ? handleNftClick : undefined}\n        data-nft-address={nft?.address}\n        data-tx-id={txId}\n      >\n        <img src={nft!.thumbnail} alt={nft!.name} className={styles.nftImage} />\n        <div className={styles.nftData}>\n          <div className={styles.nftName}>{nft!.name}</div>\n          <div className={styles.nftCollection}>{nft!.collectionName}</div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderComment() {\n    const className = buildClassName(\n      styles.attachment,\n      styles.comment,\n      !isIncoming && styles.outgoing,\n      operationColorClass,\n    );\n\n    return (\n      <div className={className}>\n        {encryptedComment && <i className={buildClassName(styles.commentIcon, 'icon-lock')} aria-hidden />}\n        {encryptedComment ? <i>{lang('Encrypted Message')}</i> : comment}\n      </div>\n    );\n  }\n\n  function renderIcon() {\n    let iconName: string;\n    if (isStaking) {\n      iconName = 'icon-earn';\n    } else if (type === 'callContract' || type === 'contractDeploy') {\n      iconName = 'icon-cog';\n    } else if (isDnsOperation) {\n      iconName = buildClassName('rounded-font', styles.dnsIcon);\n    } else if (type === 'mint') {\n      iconName = 'icon-magic-wand';\n    } else if (type === 'burn') {\n      iconName = 'icon-fire';\n    } else if (type === 'auctionBid') {\n      iconName = 'icon-auction-alt';\n    } else if (type === 'nftTrade') {\n      iconName = isIncoming ? 'icon-tag' : 'icon-purchase';\n    } else if (type === 'liquidityDeposit') {\n      iconName = 'icon-can-in';\n    } else if (type === 'liquidityWithdraw') {\n      iconName = 'icon-can-out';\n    } else if (isIncoming) {\n      iconName = 'icon-receive-alt';\n    } else {\n      iconName = 'icon-send-alt';\n    }\n\n    return (\n      <i className={buildClassName(styles.icon, iconName, operationColorClass)} aria-hidden>\n        {isDnsOperation && (\n          <span style={isDnsOperation ? `font-size: ${Math.min(1, 4 / dnsIconText.length) * 100}%` : undefined}>\n            {dnsIconText}\n          </span>\n        )}\n        <ActivityPendingIndicator\n          isActive={isPending}\n          color={pendingIndicatorColor}\n          appTheme={appTheme}\n        />\n      </i>\n    );\n  }\n\n  function renderAmount() {\n    const amountDisplayMode = getTransactionAmountDisplayMode(transaction);\n    const noSign = amountDisplayMode === 'noSign';\n\n    if (amountDisplayMode === 'hide') {\n      return;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n        contentClassName={buildClassName(\n          styles.amount,\n          operationColorClass !== styles.colorOut && operationColorClass,\n        )}\n      >\n        {formatCurrencyExtended(\n          toDecimal(noSign ? bigintAbs(amount) : amount, token?.decimals ?? FRACTION_DIGITS),\n          token?.symbol || TONCOIN.symbol,\n          noSign,\n          undefined,\n          !isIncoming,\n        )}\n        {token && <TokenIcon token={token} size=\"x-small\" className={styles.amountTokenIcon} />}\n      </SensitiveData>\n    );\n  }\n\n  function renderBaseCurrencyAmount() {\n    if (getTransactionAmountDisplayMode(transaction) === 'hide' || !token) {\n      return undefined;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={Math.round(3 + (amountCols - 5) / 3)}\n        rows={2}\n        cellSize={8}\n        align=\"right\"\n      >\n        {formatBaseCurrencyAmount(amount, baseCurrency, token)}\n      </SensitiveData>\n    );\n  }\n\n  function renderAddressAndDate() {\n    const children: TeactNode[] = [];\n    const delimiter = `${WHOLE_PART_DELIMITER}${WHOLE_PART_DELIMITER}`;\n\n    if (shouldShowTransactionAddress(transaction).includes('list')) {\n      const dexName = extra?.dex && SWAP_DEX_LABELS[extra.dex];\n      const marketplaceName = extra?.marketplace && NFT_MARKETPLACE_TITLES[extra.marketplace];\n\n      children.push(delimiter, lang(\n        (dexName || marketplaceName) ? '$transaction_on' : isIncoming ? '$transaction_from' : '$transaction_to',\n        {\n          address: (\n            <span className={styles.subheaderHighlight}>\n              {withChainIcon && Boolean(chain) && (\n                <i\n                  className={buildClassName(styles.chainIcon, `icon-chain-${chain.toLowerCase()}`)}\n                  aria-label={chain}\n                />\n              )}\n              {dexName || marketplaceName || addressName || shortenAddress(address, TRANSACTION_ADDRESS_SHIFT)}\n            </span>\n          ),\n        },\n      ));\n    }\n\n    if (shouldShowTransactionAnnualYield(transaction)) {\n      children.push(delimiter, lang('at %annual_yield%', {\n        annual_yield: <span className={styles.subheaderHighlight}>{yieldType} {annualYield}%</span>,\n      }));\n    }\n\n    if (!isFuture) {\n      children.push(delimiter, formatTime(timestamp));\n    }\n\n    return (\n      <div className={styles.date}>\n        {children.slice(1)}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      ref={ref as RefObject<HTMLButtonElement>}\n      className={buildClassName(\n        styles.item,\n        isLast && styles.itemLast,\n        isActive && styles.active,\n        onClick && styles.interactive,\n        attachmentsTakeSubheader === 'full' ? styles.attachmentsInFullSubheader\n          : attachmentsTakeSubheader === 'left' ? styles.attachmentsInLeftSubheader : undefined,\n      )}\n      onClick={onClick && (() => onClick(txId))}\n      isSimple\n    >\n      {renderIcon()}\n      <div className={styles.header}>\n        <div\n          className={buildClassName(\n            styles.operationName,\n            isNoSubheaderLeft && attachmentsTakeSubheader === 'none' && styles.atMiddle,\n          )}\n        >\n          {getTransactionTitle(transaction, isFuture ? 'future' : 'past', lang)}\n          {isScamTransaction(transaction) && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        </div>\n        {renderAmount()}\n      </div>\n      <div className={styles.subheader}>\n        {renderAddressAndDate()}\n        {renderBaseCurrencyAmount()}\n      </div>\n      {nft && renderNft()}\n      {shouldShowTransactionComment(transaction) && renderComment()}\n    </Button>\n  );\n}\n\nexport default memo(Transaction);\n\nexport function getTransactionHeight(transaction: ApiTransactionActivity, isFuture?: boolean) {\n  return TRANSACTION_HEIGHT\n    + (transaction.nft ? NFT_EXTRA_HEIGHT : 0)\n    + (shouldShowTransactionComment(transaction) ? COMMENT_EXTRA_HEIGHT : 0)\n    - (shouldAttachmentTakeSubheader(transaction, isFuture) !== 'none' ? SUBHEADER_RELEASE_HEIGHT : 0);\n}\n\nfunction shouldAttachmentTakeSubheader(\n  transaction: ApiTransactionActivity,\n  isFuture?: boolean,\n): 'none' | 'left' | 'full' {\n  if (!transaction.nft && !shouldShowTransactionComment(transaction)) {\n    return 'none';\n  }\n\n  if (!getIsNoSubheaderLeft(transaction, isFuture)) {\n    return 'none'; // The attachment won't fit in the right slot, because the left subheader is too wide\n  }\n\n  if (getIsNoSubheaderRight(transaction)) {\n    return 'full';\n  }\n\n  const isAttachmentOnTheLeft = transaction.nft || transaction.isIncoming;\n  return isAttachmentOnTheLeft ? 'left' : 'none';\n}\n\nfunction getIsNoSubheaderLeft(transaction: ApiTransactionActivity, isFuture?: boolean) {\n  return isFuture\n    && !shouldShowTransactionAddress(transaction).includes('list')\n    && !shouldShowTransactionAnnualYield(transaction);\n}\n\nfunction getIsNoSubheaderRight(transaction: ApiTransactionActivity) {\n  return getTransactionAmountDisplayMode(transaction) === 'hide';\n}\n\nfunction getDnsIconText(nft: ApiNft | undefined) {\n  if (nft?.name) {\n    const resolved = getDnsDomainZone(nft.name);\n    if (resolved) {\n      return `.${resolved.zone.suffixes[0]}`;\n    }\n  }\n\n  return 'DNS';\n}\n","import React from '../../../../lib/teact/teact';\n\nimport type {\n  ApiActivity,\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, AppTheme, SavedAddress } from '../../../../global/types';\n\nimport Swap, { getSwapHeight } from './Swap';\nimport Transaction, { getTransactionHeight } from './Transaction';\n\ninterface OwnProps {\n  activity: ApiActivity;\n  isLast?: boolean;\n  isActive?: boolean;\n  isSensitiveDataHidden?: boolean;\n  isFuture?: boolean;\n  withChainIcon?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  appTheme: AppTheme;\n  nftsByAddress?: Record<string, ApiNft>;\n  currentAccountId: string;\n  stakingStateBySlug?: Record<string, ApiStakingState>;\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  baseCurrency?: ApiBaseCurrency;\n  onClick?: (id: string) => void;\n}\n\nexport default function Activity({\n  activity,\n  isLast,\n  isActive,\n  isSensitiveDataHidden,\n  isFuture,\n  withChainIcon,\n  tokensBySlug,\n  swapTokensBySlug,\n  appTheme,\n  nftsByAddress,\n  currentAccountId,\n  stakingStateBySlug,\n  savedAddresses,\n  accounts,\n  baseCurrency,\n  onClick,\n}: OwnProps) {\n  if (activity.kind === 'swap') {\n    return (\n      <Swap\n        activity={activity}\n        tokensBySlug={swapTokensBySlug}\n        isLast={isLast}\n        isActive={isActive}\n        appTheme={appTheme}\n        addressByChain={accounts?.[currentAccountId]?.addressByChain}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        isFuture={isFuture}\n        onClick={onClick}\n      />\n    );\n  } else {\n    const doesNftExist = Boolean(activity.nft && nftsByAddress?.[activity.nft.address]);\n    const { annualYield, yieldType } = stakingStateBySlug?.[activity.slug] ?? {};\n\n    return (\n      <Transaction\n        currentAccountId={currentAccountId}\n        transaction={activity}\n        tokensBySlug={tokensBySlug}\n        isActive={isActive}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isLast={isLast}\n        savedAddresses={savedAddresses}\n        withChainIcon={withChainIcon}\n        appTheme={appTheme}\n        doesNftExist={doesNftExist}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        isFuture={isFuture}\n        accounts={accounts}\n        baseCurrency={baseCurrency}\n        onClick={onClick}\n      />\n    );\n  }\n}\n\nexport function getActivityHeight(activity: ApiActivity, isFuture?: boolean) {\n  return activity.kind === 'swap' ? getSwapHeight() : getTransactionHeight(activity, isFuture);\n}\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiDapp } from '../../api/types';\nimport { type Account, TransferState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentToncoinBalance, selectNetworkAccounts } from '../../global/selectors';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport DappInfo from './DappInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentAccount?: Account;\n  toncoinBalance: bigint;\n  dapp?: ApiDapp;\n}\n\nfunction DappLedgerWarning({\n  currentAccount,\n  toncoinBalance,\n  dapp,\n}: StateProps) {\n  const { cancelDappTransfer, setDappTransferScreen } = getActions();\n\n  const lang = useLang();\n\n  const handleAgree = useLastCallback(() => {\n    setDappTransferScreen({ state: TransferState.Initial });\n  });\n\n  function renderDapp() {\n    return (\n      <div className={styles.transactionDirection}>\n        <div className={styles.transactionAccount}>\n          <div className={styles.accountTitle}>{currentAccount?.title}</div>\n          <div className={styles.accountBalance}>{formatCurrency(toDecimal(toncoinBalance), TONCOIN.symbol)}</div>\n        </div>\n\n        <DappInfo\n          dapp={dapp}\n          className={styles.transactionDapp}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={modalStyles.transitionContent}>\n      {renderDapp()}\n\n      <div className={styles.descriptionContent}>\n        <span>{renderText(lang('$dapp_ledger_warning1'))}</span>\n        <span>{renderText(lang('$dapp_ledger_warning2'))}</span>\n      </div>\n\n      <div className={modalStyles.buttons}>\n        <Button className={modalStyles.button} onClick={cancelDappTransfer}>{lang('Cancel')}</Button>\n        <Button\n          isPrimary\n          isSubmit\n          className={modalStyles.button}\n          onClick={handleAgree}\n        >\n          {lang('Agree')}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapp } = global.currentDappTransfer;\n  const accounts = selectNetworkAccounts(global);\n\n  return {\n    currentAccount: accounts?.[global.currentAccountId!],\n    toncoinBalance: selectCurrentToncoinBalance(global),\n    dapp,\n  };\n})(DappLedgerWarning));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"DZJAgO1_\",\"icon\":\"DNxf1fb1\",\"interactive\":\"GU6t4snd\",\"rootStatic\":\"frL0b5SW\",\"thumbnail\":\"l7Jv2Ysl\",\"info\":\"cjX8maBi\",\"title\":\"nfp5rpIc\",\"description\":\"qBj00Hsz\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../global';\n\nimport { MediaType, type NftTransfer } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerName, getExplorerNftUrl } from '../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './NftInfo.module.scss';\n\ninterface OwnProps {\n  nft?: NftTransfer;\n  isStatic?: boolean;\n  withTonExplorer?: boolean;\n  // Currently, MediaViewer can only display NFTs that are owned by the user\n  withMediaViewer?: boolean;\n}\n\nfunction NftInfo({\n  nft, isStatic, withTonExplorer, withMediaViewer,\n}: OwnProps) {\n  const { openMediaViewer } = getActions();\n  const lang = useLang();\n\n  const tonExplorerTitle = useMemo(() => {\n    return (lang('Open on %ton_explorer_name%', {\n      ton_explorer_name: getExplorerName('ton'),\n    }) as string[]\n    ).join('');\n  }, [lang]);\n\n  const handleClickInfo = (event: React.MouseEvent) => {\n    event.stopPropagation();\n    const url = getExplorerNftUrl(nft!.address, getGlobal().settings.isTestnet)!;\n\n    void openUrl(url);\n  };\n\n  const handleClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: nft!.address, mediaType: MediaType.Nft });\n  });\n\n  if (!nft) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        <AnimatedIconWithPreview\n          play\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.thumbnail}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n\n        <div className={styles.info}>\n          <div className={styles.title}>NFT</div>\n          <div className={styles.description}>\n            {lang('Name and collection are not available. Please check back later.')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const name = nft.name || shortenAddress(nft.address);\n\n  function renderContent() {\n    return (\n      <>\n        <img src={nft!.thumbnail} alt={name} className={styles.thumbnail} />\n\n        <div className={styles.info}>\n          <div className={styles.title}>\n            {name}\n            {\n              withTonExplorer && (\n                <i\n                  className={buildClassName(styles.icon, 'icon-tonexplorer-small')}\n                  onClick={handleClickInfo}\n                  title={tonExplorerTitle}\n                  aria-label={tonExplorerTitle}\n                  role=\"button\"\n                  tabIndex={0}\n                />\n              )\n            }\n          </div>\n          <div className={styles.description}>{nft!.collectionName}</div>\n        </div>\n      </>\n    );\n  }\n\n  if (!withMediaViewer) {\n    return (\n      <div className={buildClassName(styles.root, isStatic && styles.rootStatic)}>\n        {renderContent()}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      aria-label={lang('NFT')}\n      className={buildClassName(styles.root, styles.interactive, isStatic && styles.rootStatic)}\n      onClick={handleClick}\n    >\n      {renderContent()}\n    </div>\n  );\n}\n\nexport default memo(NftInfo);\n","import { useCallback, useRef } from '../lib/teact/teact';\n\nimport useEffectOnce from './useEffectOnce';\n\nconst DEFAULT_THRESHOLD = 350;\n\nfunction useLongPress({\n  onClick, onStart, onEnd, threshold = DEFAULT_THRESHOLD,\n}: {\n  onStart?: NoneToVoidFunction;\n  onClick?: (event: React.MouseEvent | React.TouchEvent) => void;\n  onEnd?: NoneToVoidFunction;\n  threshold?: number;\n}) {\n  const isLongPressActive = useRef(false);\n  const isPressed = useRef(false);\n  const timerId = useRef<number | undefined>(undefined);\n\n  const start = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    const canProcessEvent = ('button' in e && e.button === 0) || ('touches' in e && e.touches.length > 0);\n    if (isPressed.current || !canProcessEvent) {\n      return;\n    }\n\n    isPressed.current = true;\n    timerId.current = window.setTimeout(() => {\n      onStart?.();\n      isLongPressActive.current = true;\n    }, threshold);\n  }, [onStart, threshold]);\n\n  const cancel = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (!isPressed.current) return;\n\n    if (isLongPressActive.current) {\n      onEnd?.();\n    } else {\n      onClick?.(e);\n    }\n\n    isLongPressActive.current = false;\n    isPressed.current = false;\n    window.clearTimeout(timerId.current);\n  }, [onEnd, onClick]);\n\n  useEffectOnce(() => {\n    return () => {\n      window.clearTimeout(timerId.current);\n    };\n  });\n\n  return {\n    onMouseDown: start,\n    onMouseUp: cancel,\n    onMouseLeave: cancel,\n    onTouchStart: start,\n    onTouchEnd: cancel,\n    onTouchCancel: cancel,\n  };\n}\n\nexport default useLongPress;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"r5lsJ1c8\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiChain } from '../../../api/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteSavedAddressModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  address?: string;\n  chain?: ApiChain;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DeleteSavedAddressModal({\n  isOpen, address, chain, onClose,\n}: OwnProps) {\n  const { removeFromSavedAddress, showNotification } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteSavedAddress = useLastCallback(() => {\n    removeFromSavedAddress({ address: address!, chain: chain! });\n    showNotification({ message: lang('Address removed from saved'), icon: 'icon-trash' });\n    onClose();\n  });\n\n  return (\n    <Modal\n      title={lang('Delete Saved Address')}\n      isCompact\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      <p className={styles.text}>{lang('Are you sure you want to remove this address from your saved ones?')}</p>\n\n      <p className={styles.text}>{lang('You will be able to save it again via Transaction Info with this address.')}</p>\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteSavedAddress} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteSavedAddressModal);\n","import React, { type ElementRef, memo, useLayoutEffect } from '../../lib/teact/teact';\nimport { toggleExtraClass } from '../../lib/teact/teact-dom';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport styles from './MenuBackdrop.module.scss';\n\ninterface OwnProps {\n  isMenuOpen?: boolean;\n  contentRef: ElementRef<HTMLElement>;\n  contentClassName?: string;\n}\n\nfunction MenuBackdrop({ isMenuOpen, contentRef, contentClassName }: OwnProps) {\n  const {\n    shouldRender: menuBackdropShouldRender,\n    ref: menuBackdropRef,\n  } = useShowTransition({\n    isOpen: isMenuOpen,\n    withShouldRender: true,\n  });\n\n  useLayoutEffect(() => {\n    if (!contentRef.current) return;\n\n    toggleExtraClass(contentRef.current, styles.wrapperVisible, menuBackdropShouldRender);\n    toggleExtraClass(contentRef.current, styles.wrapperHide, menuBackdropShouldRender && !isMenuOpen);\n    if (contentClassName) {\n      toggleExtraClass(contentRef.current, contentClassName, menuBackdropShouldRender);\n    }\n  }, [contentClassName, contentRef, isMenuOpen, menuBackdropShouldRender]);\n\n  useToggleClass({ className: 'with-menu-backdrop', isActive: isMenuOpen });\n\n  if (!menuBackdropShouldRender) return undefined;\n\n  return (\n    <div\n      ref={menuBackdropRef}\n      className={buildClassName(styles.backdrop, isMenuOpen && styles.visible)}\n    />\n  );\n}\n\nexport default memo(MenuBackdrop);\n","// extracted by mini-css-extract-plugin\nexport default {\"backdrop\":\"aLk6q3zd\",\"visible\":\"LULg10Df\",\"wrapperVisible\":\"qhlMQSuq\",\"wrapperHide\":\"y0lYOYF9\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"qrcsFk0p\",\"button\":\"tQGrt_Qw\",\"button_spoiler\":\"RpBIB1I4\",\"buttonSpoiler\":\"RpBIB1I4\",\"icon\":\"RdTchw5a\",\"iconCaretDown\":\"DdQbhVKr\",\"iconStar\":\"p87ao4no\",\"iconShare\":\"GuQHudIr\",\"nameInput\":\"lL2_LCB0\",\"shortAddress\":\"hofQbGX_\",\"scam\":\"nwdDECq8\",\"revealSpoiler\":\"W5z38O2d\",\"scamImage\":\"KBuV_80E\",\"chainIcon\":\"xEGdgotG\",\"meaningfulPart\":\"tKeqWu_9\",\"menuIcon\":\"iyUEV5xt\",\"dimmedPart\":\"NNrfqpvB\",\"menu\":\"E31wd_4J\",\"menuItem\":\"HbftB0iE\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { IAnchorPosition, SavedAddress } from '../../global/types';\nimport type { Layout } from '../../hooks/useMenuPosition';\nimport type { DropdownItem } from './Dropdown';\n\nimport { selectCurrentAccountState, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { stopEvent } from '../../util/domEvents';\nimport { handleUrlClick, openUrl } from '../../util/openUrl';\nimport { shareUrl } from '../../util/share';\nimport { MEANINGFUL_CHAR_LENGTH, shortenAddress } from '../../util/shortenAddress';\nimport { getExplorerAddressUrl, getExplorerName, getHostnameFromUrl } from '../../util/url';\nimport { IS_IOS, IS_TOUCH_ENV, REM } from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLongPress from '../../hooks/useLongPress';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport Button from './Button';\nimport DropdownMenu from './DropdownMenu';\nimport Input from './Input';\nimport MenuBackdrop from './MenuBackdrop';\nimport Modal from './Modal';\nimport Transition from './Transition';\n\nimport styles from './InteractiveTextField.module.scss';\nimport modalStyles from './Modal.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  chain?: ApiChain;\n  address?: string;\n  addressName?: string;\n  addressUrl?: string;\n  isScam?: boolean;\n  isTransaction?: boolean;\n  text?: string;\n  spoiler?: string;\n  spoilerRevealText?: string;\n  spoilerCallback?: NoneToVoidFunction;\n  copyNotification?: string;\n  className?: string;\n  textClassName?: string;\n  noDimming?: boolean;\n  noSavedAddress?: boolean;\n  noExplorer?: boolean;\n  withShareInMenu?: boolean;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  isMultichainAccount?: boolean;\n  isTestnet?: boolean;\n}\n\ntype MenuHandler = 'copy' | 'share' | 'addressBook' | 'explorer';\n\nconst SAVED_ADDRESS_NAME_MAX_LENGTH = 255;\nconst MENU_VERTICAL_OFFSET_PX = -16;\nconst MENU_ITEM_HEIGHT_PX = 3 * REM;\nconst COMFORT_MARGIN_PX = REM;\n\nfunction InteractiveTextField({\n  chain,\n  address,\n  addressName,\n  addressUrl,\n  isScam,\n  isTransaction,\n  text = '',\n  spoiler,\n  spoilerRevealText,\n  spoilerCallback,\n  copyNotification,\n  noSavedAddress,\n  noExplorer,\n  className,\n  textClassName,\n  savedAddresses,\n  isTestnet,\n  isMultichainAccount,\n  noDimming,\n  withShareInMenu,\n}: OwnProps & StateProps) {\n  const { showNotification, addSavedAddress } = getActions();\n\n  const addressNameRef = useRef<HTMLInputElement>();\n  const contentRef = useRef<HTMLDivElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n  const [isSaveAddressModalOpen, openSaveAddressModal, closeSaveAddressModal] = useFlag();\n  const [isDeleteSavedAddressModalOpen, openDeletedSavedAddressModal, closeDeleteSavedAddressModal] = useFlag();\n  const [savedAddressName, setSavedAddressName] = useState<string | undefined>(addressName);\n  const [isConcealedWithSpoiler, , revealSpoiler] = useFlag(Boolean(spoiler));\n  const isAddressAlreadySaved = useMemo(() => {\n    return Boolean(address && chain && (savedAddresses || []).find((savedAddress) => {\n      return savedAddress.address === address && savedAddress.chain === chain;\n    }));\n  }, [address, chain, savedAddresses]);\n\n  addressUrl = addressUrl ?? (chain ? getExplorerAddressUrl(chain, address, isTestnet) : undefined);\n  const saveAddressTitle = lang(isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address');\n  const explorerTitle = lang('View on Explorer');\n  const withSavedAddresses = Boolean(!isScam && !noSavedAddress && address);\n  const withExplorer = Boolean(!noExplorer && addressUrl);\n\n  useEffect(() => {\n    if (isSaveAddressModalOpen) {\n      setSavedAddressName('');\n    }\n  }, [isSaveAddressModalOpen]);\n\n  const handleSaveAddressSubmit = useLastCallback(() => {\n    if (!savedAddressName || !address || !chain) {\n      return;\n    }\n\n    addSavedAddress({ address, chain, name: savedAddressName });\n    showNotification({ message: lang('Address was saved!'), icon: 'icon-star' });\n    closeSaveAddressModal();\n  });\n\n  useEffect(() => (\n    isSaveAddressModalOpen\n      ? captureKeyboardListeners({ onEnter: handleSaveAddressSubmit })\n      : undefined\n  ), [handleSaveAddressSubmit, isSaveAddressModalOpen]);\n\n  useFocusAfterAnimation(addressNameRef, !isSaveAddressModalOpen);\n\n  const handleCopy = useLastCallback(() => {\n    if (!copyNotification) return;\n    showNotification({ message: copyNotification, icon: 'icon-copy' });\n    void copyTextToClipboard(address || text);\n  });\n\n  const handleShare = useLastCallback(() => {\n    void shareUrl(addressUrl!, chain ? getExplorerName(chain) : undefined);\n  });\n\n  const handleTonExplorerOpen = useLastCallback(() => {\n    void openUrl(addressUrl!, { title: getExplorerName(chain!), subtitle: getHostnameFromUrl(addressUrl!) });\n  });\n\n  const {\n    isActionsMenuOpen,\n    menuAnchor,\n    menuPositionY,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  } = useDropdownMenu({\n    copy: handleCopy,\n    share: handleShare,\n    addressBook: isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal,\n    explorer: handleTonExplorerOpen,\n  }, {\n    isAddressAlreadySaved,\n    isWalletAddress: Boolean(address && chain && noSavedAddress && !isTransaction),\n    isTransaction,\n    withSavedAddresses,\n    withExplorer,\n    withShare: withShareInMenu,\n  });\n\n  const shouldUseMenu = !spoiler && IS_TOUCH_ENV && menuItems.length > 1;\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({ withPortal: true, preferredPositionY: menuPositionY }));\n\n  const longPressHandlers = useLongPress({\n    onClick: handleMenuShow,\n    onStart: handleCopy,\n  });\n\n  const handleRevealSpoiler = useLastCallback(() => {\n    revealSpoiler();\n    spoilerCallback?.();\n  });\n\n  function renderContentOrSpoiler() {\n    const content = addressName || address || text;\n\n    if (!spoiler) {\n      return renderContent(content);\n    }\n\n    const isConcealed = isConcealedWithSpoiler || !content;\n    return (\n      <Transition activeKey={isConcealed ? 1 : 0} name=\"fade\" className={styles.commentContainer}>\n        {isConcealed ? (\n          <span className={buildClassName(styles.button, styles.button_spoiler, textClassName)}>\n            <i>{spoiler}</i>{' '}\n            <span\n              onClick={handleRevealSpoiler}\n              tabIndex={0}\n              role=\"button\"\n              className={styles.revealSpoiler}\n            >\n              {spoilerRevealText}\n            </span>\n          </span>\n        ) : renderContent(content)}\n      </Transition>\n    );\n  }\n\n  function renderContent(content: string) {\n    let renderedContent: string | TeactNode = content;\n    if (!noDimming && !isTransaction && content === address && content.length > MEANINGFUL_CHAR_LENGTH * 2) {\n      const prefix = content.substring(0, MEANINGFUL_CHAR_LENGTH);\n      const suffixStart = content.length - MEANINGFUL_CHAR_LENGTH;\n      const middle = content.substring(MEANINGFUL_CHAR_LENGTH, suffixStart);\n      const suffix = content.substring(suffixStart);\n\n      renderedContent = (\n        <>\n          <span className={styles.meaningfulPart}>{prefix}</span>\n          <span className={styles.dimmedPart}>{middle}</span>\n          <span className={styles.meaningfulPart}>{suffix}</span>\n        </>\n      );\n    } else if (!noDimming && isTransaction) {\n      renderedContent = <span className={styles.dimmedPart}>{content}</span>;\n    }\n\n    return (\n      <span\n        className={buildClassName(styles.button, isScam && styles.scam, textClassName)}\n        tabIndex={0}\n        role=\"button\"\n        title={!shouldUseMenu ? lang('Copy') : undefined}\n        onClick={!shouldUseMenu ? handleCopy : undefined}\n      >\n        {isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        {isMultichainAccount && !isTransaction && (\n          <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-label={chain} />\n        )}\n        {renderedContent}\n        {Boolean(addressName) && (\n          <span className={buildClassName(styles.shortAddress, isScam && styles.scam)}>{shortenAddress(address!)}</span>\n        )}\n        {Boolean(copyNotification) && !shouldUseMenu && (\n          <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n        )}\n      </span>\n    );\n  }\n\n  function renderActions() {\n    if (shouldUseMenu) {\n      const iconClassName = buildClassName(\n        styles.icon,\n        styles.iconCaretDown,\n        'icon-caret-down',\n        isScam && styles.scam,\n      );\n\n      return (\n        <>\n          <i className={iconClassName} aria-hidden />\n          <DropdownMenu\n            ref={menuRef}\n            withPortal\n            shouldTranslateOptions\n            isOpen={isActionsMenuOpen}\n            items={menuItems}\n            menuPositionY={menuPositionY}\n            menuAnchor={menuAnchor}\n            getLayout={getLayout}\n            getMenuElement={getMenuElement}\n            getRootElement={getRootElement}\n            bubbleClassName={styles.menu}\n            buttonClassName={styles.menuItem}\n            fontIconClassName={styles.menuIcon}\n            onSelect={handleMenuItemSelect}\n            onClose={closeActionsMenu}\n          />\n        </>\n      );\n    }\n\n    return (\n      <>\n        {withSavedAddresses && (\n          <span\n            className={styles.button}\n            title={saveAddressTitle}\n            aria-label={saveAddressTitle}\n            tabIndex={0}\n            role=\"button\"\n            onClick={isAddressAlreadySaved ? openDeletedSavedAddressModal : openSaveAddressModal}\n          >\n            <i\n              className={buildClassName(\n                styles.icon,\n                styles.iconStar,\n                isAddressAlreadySaved ? 'icon-star-filled' : 'icon-star',\n              )}\n              aria-hidden\n            />\n          </span>\n        )}\n\n        {isTransaction && (\n          <span\n            className={styles.button}\n            title={lang('Share Link')}\n            aria-label={lang('Share Link')}\n            onClick={handleShare}\n          >\n            <i className={buildClassName(styles.icon, styles.iconShare, 'icon-link')} aria-hidden />\n          </span>\n        )}\n        {withExplorer && (\n          <a\n            href={addressUrl}\n            className={styles.button}\n            title={explorerTitle}\n            aria-label={explorerTitle}\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            onClick={handleUrlClick}\n          >\n            <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n          </a>\n        )}\n      </>\n    );\n  }\n\n  function renderSaveAddressModal() {\n    return (\n      <Modal\n        title={lang('Save Address')}\n        isCompact\n        isOpen={isSaveAddressModalOpen}\n        onClose={closeSaveAddressModal}\n      >\n        <p>{lang('You can save this address for quick access while sending.')}</p>\n        <Input\n          ref={addressNameRef}\n          placeholder={lang('Name')}\n          onInput={setSavedAddressName}\n          value={savedAddressName}\n          maxLength={SAVED_ADDRESS_NAME_MAX_LENGTH}\n          className={styles.nameInput}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeSaveAddressModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n          <Button\n            onClick={handleSaveAddressSubmit}\n            isPrimary\n            isDisabled={!savedAddressName}\n            className={modalStyles.button}\n          >\n            {lang('Save')}\n          </Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <MenuBackdrop\n        isMenuOpen={isActionsMenuOpen && shouldUseMenu}\n        contentRef={contentRef}\n      />\n      <div\n        ref={contentRef}\n        className={buildClassName(styles.wrapper, className)}\n        {...(shouldUseMenu && !isActionsMenuOpen && {\n          ...longPressHandlers,\n          tabIndex: 0,\n          role: 'button',\n        })}\n        onContextMenu={shouldUseMenu ? stopEvent : undefined}\n      >\n        {renderContentOrSpoiler()}\n        {renderActions()}\n      </div>\n\n      {address && (\n        <>\n          {renderSaveAddressModal()}\n          <DeleteSavedAddressModal\n            isOpen={isDeleteSavedAddressModalOpen}\n            address={address}\n            chain={chain}\n            onClose={closeDeleteSavedAddressModal}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n\n    return {\n      savedAddresses: accountState?.savedAddresses,\n      isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n      isTestnet: global.settings.isTestnet,\n    };\n  },\n)(InteractiveTextField));\n\nfunction useDropdownMenu(\n  menuHandlers: Record<MenuHandler, NoneToVoidFunction>,\n  options: {\n    withSavedAddresses?: boolean;\n    withExplorer?: boolean;\n    isAddressAlreadySaved?: boolean;\n    isWalletAddress?: boolean;\n    isTransaction?: boolean;\n    withShare?: boolean;\n  },\n) {\n  const [menuPositionY, setMenuPositionY] = useState<'top' | 'bottom'>('top');\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n  const closeActionsMenu = useLastCallback(() => setMenuAnchor(undefined));\n  const isActionsMenuOpen = Boolean(menuAnchor);\n\n  const menuItems = useMemo<DropdownItem<MenuHandler>[]>(() => {\n    const {\n      isAddressAlreadySaved, isWalletAddress, isTransaction, withSavedAddresses, withExplorer, withShare,\n    } = options;\n\n    const items: DropdownItem<MenuHandler>[] = [{\n      name: withSavedAddresses || isWalletAddress\n        ? 'Copy Address'\n        : (isTransaction ? 'Copy Transaction ID' : 'Copy'),\n      fontIcon: 'copy',\n      value: 'copy',\n    }];\n\n    if (withSavedAddresses) {\n      items.push({\n        name: isAddressAlreadySaved ? 'Remove From Saved' : 'Save Address',\n        fontIcon: isAddressAlreadySaved ? 'star-filled' : 'star',\n        value: 'addressBook',\n      });\n    }\n\n    if (isTransaction || withShare) {\n      items.push({\n        name: 'Share Link',\n        fontIcon: IS_IOS ? 'share-ios' : 'share-android',\n        value: 'share',\n      });\n    }\n\n    if (withExplorer) {\n      items.push({\n        name: 'View on Explorer',\n        fontIcon: 'tonexplorer',\n        value: 'explorer',\n      });\n    }\n\n    return items;\n  }, [options]);\n\n  const handleMenuItemSelect = useLastCallback((value: MenuHandler) => {\n    menuHandlers[value]?.();\n    closeActionsMenu();\n  });\n\n  const handleMenuShow = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    stopEvent(e);\n\n    let x: number;\n    if (e.type.startsWith('touch')) {\n      const { changedTouches, touches } = e as React.TouchEvent;\n      if (touches.length > 0) {\n        x = touches[0].clientX;\n      } else {\n        x = changedTouches[0].clientX;\n      }\n    } else {\n      x = (e as React.MouseEvent).clientX;\n    }\n    const { top, bottom } = e.currentTarget.getBoundingClientRect();\n    const menuHeight = menuItems.length * MENU_ITEM_HEIGHT_PX;\n    const screenHeight = windowSize.get().height;\n    if (bottom + menuHeight + MENU_VERTICAL_OFFSET_PX + COMFORT_MARGIN_PX >= screenHeight) {\n      setMenuPositionY('bottom');\n      setMenuAnchor({ x, y: top });\n    } else {\n      setMenuPositionY('top');\n      setMenuAnchor({ x, y: bottom + MENU_VERTICAL_OFFSET_PX });\n    }\n  });\n\n  return {\n    isActionsMenuOpen,\n    menuAnchor,\n    menuPositionY,\n    menuItems,\n    handleMenuShow,\n    handleMenuItemSelect,\n    closeActionsMenu,\n  };\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport isEmptyObject from '../../util/isEmptyObject';\n\nimport styles from './Dapp.module.scss';\n\ntype OwnProps = {\n  label: TeactNode;\n  amountsBySlug: Record<string, bigint>;\n  nftCount?: number;\n};\n\ntype StateProps = {\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nfunction DappAmountField({\n  label,\n  amountsBySlug,\n  nftCount,\n  tokensBySlug,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const amountTerms: TeactNode[] = [];\n\n  if (nftCount) {\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {`${nftCount} NFT${nftCount > 1 ? 's' : ''}`}\n      </span>,\n    );\n  }\n\n  for (const [tokenSlug, amount] of Object.entries(amountsBySlug)) {\n    if (amountTerms.length) {\n      amountTerms.push(' + ');\n    }\n\n    const token = tokensBySlug[tokenSlug];\n\n    amountTerms.push(\n      <span className={styles.payloadFieldTerm}>\n        {formatCurrency(toDecimal(amount, token?.decimals ?? 0), token?.symbol ?? '')}\n      </span>,\n    );\n  }\n\n  if (!isEmptyObject(amountsBySlug)) {\n    const totalCost = getTotalCost(amountsBySlug, tokensBySlug);\n    amountTerms.push(` (${formatCurrency(totalCost, getShortCurrencySymbol(baseCurrency))})`);\n  }\n\n  return (\n    <>\n      <span className={styles.label}>\n        {label}\n      </span>\n      <div className={styles.payloadField}>\n        {amountTerms}\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tokensBySlug: global.tokenInfo.bySlug,\n    baseCurrency: global.settings.baseCurrency,\n  };\n})(DappAmountField));\n\nfunction getTotalCost(amountsBySlug: Record<string, bigint>, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  return Object.entries(amountsBySlug).reduce((sum, [tokenSlug, amount]) => {\n    const token = tokensBySlug[tokenSlug];\n    if (!token) {\n      return sum;\n    }\n    return sum + toBig(amount, token.decimals).toNumber() * token.price;\n  }, 0);\n}\n","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\nimport { BIGINT_PREFIX } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\nimport { DEFAULT_DECIMALS } from '../../api/chains/ton/constants';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n}\n\nconst FRACTION_DIGITS = 2;\n\nfunction DappTransactionPayload({ transaction, tokensBySlug }: OwnProps) {\n  const lang = useLang();\n  const payloadRef = useRef<HTMLDivElement>();\n  const [isPayloadExpanded, expandPayload] = useFlag(false);\n\n  useEffect(() => {\n    const payloadElement = payloadRef.current;\n    if (payloadElement && payloadElement.scrollWidth <= payloadElement.clientWidth) {\n      expandPayload();\n    }\n  }, [expandPayload]);\n\n  function renderPayload() {\n    const { payload, rawPayload } = transaction;\n\n    if (!payload || isNftTransferPayload(payload) || isTokenTransferPayload(payload)) {\n      return undefined;\n    }\n\n    switch (payload.type) {\n      case 'comment':\n        return payload.comment;\n\n      case 'tokens:burn': {\n        const { slug: tokenSlug, amount } = payload;\n        const token = tokensBySlug[tokenSlug];\n        const decimals = token?.decimals ?? DEFAULT_DECIMALS;\n        const symbol = token?.symbol ?? '';\n\n        return lang('$dapp_transfer_tokens_burn', {\n          amount: formatCurrency(toDecimal(amount, decimals), symbol, FRACTION_DIGITS),\n        });\n      }\n\n      case 'dns:change-record': {\n        const { record } = payload;\n        const category = record.type !== 'unknown' ? record.type : record.key;\n\n        if (record.type === 'wallet' && record.value) {\n          return lang('$dapp_dns_set_wallet_payload', {\n            address: record.value,\n          });\n        } else if (record.type === 'wallet' && !record.value) {\n          return lang('$dapp_dns_delete_wallet_payload');\n        } else if (record.value) {\n          return lang('$dapp_dns_change_record_payload', {\n            category,\n            value: record.value,\n          });\n        } else {\n          return lang('$dapp_dns_delete_record_payload', {\n            category,\n          });\n        }\n      }\n\n      case 'token-bridge:pay-swap': {\n        return lang('$dapp_token_bridge_pay_swap_payload', {\n          swapId: payload.swapId,\n        });\n      }\n\n      case 'liquid-staking:deposit': {\n        return lang('$dapp_liquid_staking_deposit_payload');\n      }\n\n      case 'liquid-staking:vote': {\n        return lang('$dapp_liquid_staking_vote_payload', {\n          votingAddress: payload.votingAddress,\n          vote: payload.vote,\n        });\n      }\n\n      case 'single-nominator:change-validator': {\n        return lang('$dapp_single_nominator_change_validator_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'single-nominator:withdraw': {\n        return lang('$dapp_single_nominator_withdraw_payload', {\n          amount: toDecimal(payload.amount),\n        });\n      }\n\n      case 'vesting:add-whitelist': {\n        return lang('$dapp_vesting_add_whitelist_payload', {\n          address: payload.address,\n        });\n      }\n\n      case 'unknown': {\n        return rawPayload;\n      }\n\n      default:\n        return JSON.stringify(payload, undefined, 2)\n          .replace(`/\"${BIGINT_PREFIX}/g`, '\"');\n    }\n  }\n\n  function renderPayloadLabel() {\n    switch (transaction.payload?.type) {\n      case 'comment':\n        return lang('Comment');\n      case 'unknown':\n        return lang('Payload');\n      default:\n        return lang('Nested Transaction');\n    }\n  }\n\n  const payloadElement = renderPayload();\n\n  if (!payloadElement) {\n    return undefined;\n  }\n\n  return (\n    <>\n      <p className={styles.label}>{renderPayloadLabel()}</p>\n      <div\n        ref={payloadRef}\n        className={buildClassName(styles.payloadField, isPayloadExpanded && styles.payloadField_expanded)}\n      >\n        {payloadElement}\n        {!isPayloadExpanded && (\n          <div className={styles.payloadFieldExpand} onClick={expandPayload}>\n            {lang('View')}\n          </div>\n        )}\n      </div>\n      {transaction.isDangerous && (\n        <div className={styles.warningForPayload}>{renderText(lang('$hardware_payload_warning'))}</div>\n      )}\n    </>\n  );\n}\n\nexport default memo(DappTransactionPayload);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiDappTransfer, ApiToken } from '../../api/types';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport NftInfo from '../transfer/NftInfo';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport DappAmountField from './DappAmountField';\nimport DappTransactionPayload from './DappTransactionPayload';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface OwnProps {\n  transaction?: ApiDappTransfer;\n  tokensBySlug: Record<string, ApiToken>;\n  isActive: boolean;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n}\n\nfunction DappTransaction({ transaction, tokensBySlug, isActive, onClose, onBack }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({ isActive, onBack });\n\n  return (\n    <>\n      <ModalHeader\n        title={lang('Transaction Info')}\n        onBackButtonClick={onBack}\n        onClose={onClose}\n      />\n      <div className={buildClassName(modalStyles.transitionContent, styles.transactionContent)}>\n        {transaction && (\n          <DappTransactionContent\n            transaction={transaction}\n            tokensBySlug={tokensBySlug}\n          />\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(DappTransaction);\n\nfunction DappTransactionContent({\n  transaction,\n  tokensBySlug,\n}: Required<Pick<OwnProps, 'transaction' | 'tokensBySlug'>>) {\n  const lang = useLang();\n  const tonAmountBySlug = useMemo(() => ({\n    [TONCOIN.slug]: transaction.networkFee,\n  }), [transaction]);\n\n  function renderAmount() {\n    if (isNftTransferPayload(transaction.payload)) {\n      if (transaction.amount === 0n) {\n        return undefined;\n      }\n\n      return (\n        <DappAmountField\n          label={lang('Additional Amount Sent')}\n          amountsBySlug={tonAmountBySlug}\n        />\n      );\n    }\n\n    const amountBySlug: Record<string, bigint> = {};\n\n    if (isTokenTransferPayload(transaction.payload)) {\n      amountBySlug[transaction.payload.slug] = transaction.payload.amount;\n    }\n    amountBySlug[TONCOIN.slug] = transaction.amount;\n\n    if (amountBySlug[TONCOIN.slug] === 0n && isKeyCountGreater(amountBySlug, 1)) {\n      delete amountBySlug[TONCOIN.slug];\n    }\n\n    return <DappAmountField label={lang('Amount')} amountsBySlug={amountBySlug} />;\n  }\n\n  return (\n    <>\n      {isNftTransferPayload(transaction.payload) && <NftInfo nft={transaction.payload.nft} />}\n      <p className={styles.label}>{lang('Receiving Address')}</p>\n      <InteractiveTextField\n        chain={TONCOIN.chain}\n        address={transaction.displayedToAddress}\n        isScam={transaction.isScam}\n        className={buildClassName(styles.dataField, styles.receivingAddress)}\n        copyNotification={lang('Address was copied!')}\n      />\n      {renderAmount()}\n      <DappAmountField label={lang('Fee')} amountsBySlug={tonAmountBySlug} />\n      <DappTransactionPayload transaction={transaction} tokensBySlug={tokensBySlug} />\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"term\":\"KQKXQCYl\",\"tokenIcon\":\"hrsxYQfo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\n\nimport { STARS_SYMBOL, TONCOIN, TRX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport styles from './Fee.module.scss';\n\nconst TERM_SEPARATOR = ' + ';\nconst PRECISION_PREFIX: Record<FeePrecision, string> = {\n  exact: '',\n  approximate: '~\\u202F',\n  lessThan: '<\\u202F',\n};\nconst STARS_TOKEN: FeeToken = {\n  slug: '__stars__',\n  symbol: STARS_SYMBOL,\n  decimals: 0,\n};\nconst UNKNOWN_TOKEN: FeeToken = {\n  slug: '__unknown__',\n  symbol: '',\n  decimals: 0,\n};\nconst TOKEN_ICONS: Record<string, string | undefined> = {\n  [TONCOIN.slug]: 'icon-chain-ton',\n  [TRX.slug]: 'icon-chain-tron',\n};\n\nexport type FeeToken = Pick<ApiToken, 'slug' | 'symbol' | 'decimals'>;\n\ntype FeeListTerm = {\n  tokenType: keyof FeeTerms;\n  amount: FeeValue;\n};\n\nexport type OwnProps = {\n  terms: FeeTerms;\n  /** The token acting as the transferred token in the `terms` object */\n  token: FeeToken;\n  /** Affects the sign indicating the fee precision and standing before the terms. */\n  precision: FeePrecision;\n  shouldPreferIcons?: boolean;\n  termClassName?: string;\n  symbolClassName?: string;\n};\n\n/**\n * Formats a complex fee (containing multiple terms) into a human-readable span\n */\nfunction Fee({\n  terms,\n  token,\n  precision,\n  shouldPreferIcons,\n  termClassName,\n  symbolClassName,\n}: OwnProps) {\n  const nativeToken = findChainConfig(getChainBySlug(token.slug))?.nativeToken ?? UNKNOWN_TOKEN;\n  const content: TeactNode[] = [PRECISION_PREFIX[precision]];\n\n  convertTermsObjectToList(terms).forEach(({ tokenType, amount }, index) => {\n    if (index > 0) {\n      content.push(TERM_SEPARATOR);\n    }\n\n    const currentToken = tokenType === 'stars' ? STARS_TOKEN : tokenType === 'native' ? nativeToken : token;\n    const icon = shouldPreferIcons ? TOKEN_ICONS[currentToken.slug] : undefined;\n\n    if (typeof amount === 'bigint') {\n      amount = toDecimal(amount, currentToken.decimals);\n    }\n\n    let symbolNode = icon\n      ? <i className={buildClassName(icon, styles.tokenIcon)} aria-label={currentToken.symbol} />\n      : currentToken.symbol;\n    if (symbolClassName) {\n      symbolNode = <span className={symbolClassName}>{symbolNode}</span>;\n    }\n\n    content.push(\n      <span className={buildClassName(styles.term, termClassName)}>\n        {formatCurrency(amount, '', undefined, true)}\n        {symbolNode}\n      </span>,\n    );\n  });\n\n  return content;\n}\n\nexport default memo(Fee);\n\nfunction convertTermsObjectToList(terms: FeeTerms) {\n  const termList: FeeListTerm[] = [];\n  let firstDefinedTerm: FeeListTerm | undefined;\n\n  for (const [tokenType, amount] of Object.entries(terms) as [keyof FeeTerms, bigint | undefined][]) {\n    if (amount === undefined) {\n      continue;\n    }\n\n    const term = { tokenType, amount };\n    firstDefinedTerm ||= term;\n\n    if (Number(amount)) {\n      termList.push(term);\n    }\n  }\n\n  // Keeping at least 1 term for better UX\n  if (termList.length === 0) {\n    termList.push(firstDefinedTerm ?? { tokenType: 'native', amount: 0 });\n  }\n\n  return termList;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from './Fee';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from './Fee';\nimport Transition from './Transition';\n\nimport styles from './FeeLine.module.scss';\n\n/**\n * The component will be rendered empty unless all the required options from `FeeProps` are provided.\n * After that it will fade in.\n */\ntype OwnProps = Partial<Pick<FeeProps, 'terms' | 'token'>> & Pick<FeeProps, 'precision'> & {\n  className?: string;\n  /** Whether the component is rendered on a landscape layout (with a lighter background) */\n  isStatic?: boolean;\n  /** If true, the \"Details\" button will be shown even when no fee can be displayed. */\n  keepDetailsButtonWithoutFee?: boolean;\n  /** If undefined, the details button is not shown */\n  onDetailsClick?(): void;\n};\n\nfunction FeeLine({\n  className,\n  isStatic,\n  terms,\n  token,\n  precision,\n  keepDetailsButtonWithoutFee,\n  onDetailsClick,\n}: OwnProps) {\n  const lang = useLang();\n  let content: TeactNode | undefined;\n\n  if (terms && token) {\n    const langKey = precision === 'exact' ? '$fee_value_with_colon' : '$fee_value';\n    content = lang(langKey, {\n      fee: <Fee terms={terms} token={token} precision={precision} />,\n    });\n  }\n\n  return (\n    <FeeLineContainer\n      className={className}\n      isStatic={isStatic}\n      onDetailsClick={content || keepDetailsButtonWithoutFee ? onDetailsClick : undefined}\n      transitionKey={content ? 1 : 0}\n    >\n      {content}\n    </FeeLineContainer>\n  );\n}\n\nexport default memo(FeeLine);\n\ntype ContainerProps = Pick<OwnProps, 'className' | 'isStatic' | 'onDetailsClick'> & {\n  children?: TeactNode;\n  transitionKey?: number;\n};\n\n/**\n * Use this component when you want to show a content that looks like `FeeLine`, but is not `FeeLine`.\n */\nexport function FeeLineContainer({\n  className,\n  isStatic,\n  onDetailsClick,\n  children,\n  transitionKey = 0,\n}: ContainerProps) {\n  const lang = useLang();\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey + (onDetailsClick ? 0x10000 : 0)}\n      className={buildClassName(styles.container, className, isStatic && styles.static)}\n    >\n      {children}\n      {Boolean(children) && onDetailsClick && '  '}\n      {onDetailsClick && (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.details}\n          onClick={() => onDetailsClick()}\n        >\n          {lang('Details')}\n          <i className={buildClassName('icon-chevron-right', styles.detailsIcon)} aria-hidden />\n        </span>\n      )}\n    </Transition>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"fJgsdA7d\",\"static\":\"swvIvbGd\",\"details\":\"K7iB61lh\",\"detailsIcon\":\"WDhuwtt6\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type {\n  ApiDapp,\n  ApiDappTransfer,\n  ApiEmulationResult,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingStatesBySlug,\n  selectCurrentAccountState,\n  selectCurrentDappTransferTotals,\n  selectDappTransferInsufficientTokens,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport isEmptyObject from '../../util/isEmptyObject';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { isNftTransferPayload, isTokenTransferPayload } from '../../util/ton/transfer';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useLang from '../../hooks/useLang';\n\nimport Activity from '../main/sections/Content/Activity';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport DappAmountField from './DappAmountField';\nimport DappInfoWithAccount from './DappInfoWithAccount';\nimport DappSkeletonWithContent, { type DappSkeletonRow } from './DappSkeletonWithContent';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  transactions?: ApiDappTransfer[];\n  totalAmountsBySlug: Record<string, bigint>;\n  emulation?: Pick<ApiEmulationResult, 'activities' | 'realFee'>;\n  isScam: boolean;\n  isDangerous: boolean;\n  nftCount: number;\n  dapp?: ApiDapp;\n  isLoading?: boolean;\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  nftsByAddress?: Record<string, ApiNft>;\n  currentAccountId: string;\n  stakingStateBySlug?: Record<string, ApiStakingState>;\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  insufficientTokens?: string;\n  balancesBySlug?: Record<string, bigint>;\n}\n\ninterface SortedDappTransfer extends ApiDappTransfer {\n  index: number;\n  sortingCost: number;\n}\n\nconst NFT_FAKE_COST_USD = 1_000_000_000;\n\nconst skeletonRows: DappSkeletonRow[] = [\n  { isLarge: false, hasFee: false },\n  { isLarge: true, hasFee: true },\n];\n\nfunction DappTransferInitial({\n  transactions,\n  totalAmountsBySlug,\n  emulation,\n  isScam,\n  isDangerous,\n  nftCount,\n  dapp,\n  isLoading,\n  tokensBySlug,\n  swapTokensBySlug,\n  theme,\n  nftsByAddress,\n  currentAccountId,\n  stakingStateBySlug,\n  savedAddresses,\n  accounts,\n  insufficientTokens,\n  balancesBySlug,\n  onClose,\n}: OwnProps & StateProps) {\n  const { closeDappTransfer, showDappTransferTransaction, submitDappTransferConfirm } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const renderingTransactions = useCurrentOrPrev(transactions, true);\n  const sortedTransactions = useMemo(\n    () => sortTransactions(renderingTransactions, tokensBySlug),\n    [renderingTransactions, tokensBySlug],\n  );\n  const isDappLoading = dapp === undefined;\n  const hasSufficientBalance = !insufficientTokens;\n\n  const tokenToDisplay = useMemo(() => (\n    calculateTokenToDisplay(totalAmountsBySlug, balancesBySlug, tokensBySlug)\n  ), [totalAmountsBySlug, balancesBySlug, tokensBySlug]);\n\n  function renderContent() {\n    return (\n      <div className={buildClassName(modalStyles.transitionContent, styles.skeletonBackground)}>\n        <DappInfoWithAccount\n          dapp={dapp}\n          customTokenBalance={tokenToDisplay.balance}\n          customTokenSymbol={tokenToDisplay.symbol}\n          customTokenDecimals={tokenToDisplay.decimals}\n        />\n        {isDangerous && (\n          <div className={buildClassName(styles.transferWarning, styles.warningForPayload)}>\n            {renderText(lang('$hardware_payload_warning'))}\n          </div>\n        )}\n        {renderTransactions()}\n        {renderEmulation()}\n\n        <div className={styles.footer}>\n          {!hasSufficientBalance && (\n            <div className={styles.balanceError}>\n              {lang('Not Enough %symbol%', { symbol: insufficientTokens })}\n            </div>\n          )}\n          <div className={buildClassName(modalStyles.buttons, styles.transferButtons)}>\n            <Button className={modalStyles.button} onClick={onClose}>{lang('Cancel')}</Button>\n            <Button\n              isPrimary\n              isSubmit\n              isLoading={isLoading}\n              isDisabled={isScam || !hasSufficientBalance}\n              className={modalStyles.button}\n              onClick={!isScam && hasSufficientBalance ? submitDappTransferConfirm : undefined}\n            >\n              {lang('Send')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderTransactionRow(transaction: SortedDappTransfer) {\n    const { payload } = transaction;\n\n    const amountText: string[] = [];\n    if (isNftTransferPayload(payload)) {\n      amountText.push('1 NFT');\n    } else if (isTokenTransferPayload(payload)) {\n      const { slug: tokenSlug, amount } = payload;\n      const token = tokensBySlug[tokenSlug];\n      if (token) {\n        const { decimals, symbol } = token;\n        amountText.push(formatCurrency(toDecimal(amount, decimals), symbol));\n      }\n    }\n\n    amountText.push(formatCurrency(toDecimal(transaction.amount + transaction.networkFee), TONCOIN.symbol));\n\n    return (\n      <div\n        key={transaction.index}\n        className={styles.transactionRow}\n        onClick={() => showDappTransferTransaction({ transactionIdx: transaction.index })}\n      >\n        {transaction.isScam && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n        <span className={buildClassName(styles.transactionRowAmount, transaction.isScam && styles.scam)}>\n          {amountText.join(' + ')}\n        </span>\n        {' '}\n        <span className={buildClassName(styles.transactionRowAddress, transaction.isScam && styles.scam)}>\n          {lang('$transaction_to', {\n            address: shortenAddress(transaction.displayedToAddress),\n          })}\n        </span>\n        <i className={buildClassName(styles.transactionRowChevron, 'icon-chevron-right')} aria-hidden />\n      </div>\n    );\n  }\n\n  function renderTransactions() {\n    if (!renderingTransactions) {\n      return undefined;\n    }\n\n    const hasAmount = nftCount > 0 || !isEmptyObject(totalAmountsBySlug);\n\n    return (\n      <>\n        <p className={styles.label}>{lang('$many_transactions', renderingTransactions.length, 'i')}</p>\n        <div className={styles.transactionList}>\n          {sortedTransactions?.map(renderTransactionRow)}\n        </div>\n        {renderingTransactions.length > 1 && hasAmount && (\n          <DappAmountField label={lang('Total Amount')} amountsBySlug={totalAmountsBySlug} nftCount={nftCount} />\n        )}\n      </>\n    );\n  }\n\n  function renderEmulation() {\n    if (!emulation?.activities?.length) {\n      return undefined;\n    }\n\n    const { activities, realFee } = emulation;\n\n    return (\n      <>\n        <p className={styles.label}>\n          {lang('Preview')}\n          {' '}\n          <IconWithTooltip message={renderText(lang('$preview_not_guaranteed'))} type=\"warning\" size=\"small\" />\n        </p>\n        <div className={buildClassName(styles.transactionList, styles.emulation)}>\n          {activities.map((activity, index) => (\n            <Activity\n              key={activity.id}\n              activity={activity}\n              isFuture\n              isLast={index === activities.length - 1}\n              tokensBySlug={tokensBySlug}\n              swapTokensBySlug={swapTokensBySlug}\n              appTheme={appTheme}\n              nftsByAddress={nftsByAddress}\n              currentAccountId={currentAccountId}\n              stakingStateBySlug={stakingStateBySlug}\n              savedAddresses={savedAddresses}\n              accounts={accounts}\n            />\n          ))}\n        </div>\n        {realFee !== 0n && (\n          <FeeLine\n            terms={{ native: realFee }}\n            token={TONCOIN}\n            precision=\"approximate\"\n            className={styles.emulationFee}\n          />\n        )}\n      </>\n    );\n  }\n\n  return (\n    <Transition name=\"semiFade\" activeKey={isDappLoading ? 0 : 1} slideClassName={styles.skeletonTransitionWrapper}>\n      <ModalHeader\n        title={lang(isNftTransferPayload(renderingTransactions?.[0]?.payload) ? 'Send NFT' : 'Send Transaction')}\n        onClose={closeDappTransfer}\n      />\n      {isDappLoading ? <DappSkeletonWithContent rows={skeletonRows} /> : renderContent()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isLoading, dapp, transactions, emulation } = global.currentDappTransfer;\n\n  const accountId = global.currentAccountId!;\n  const accountState = selectCurrentAccountState(global);\n  const accounts = selectNetworkAccounts(global);\n\n  const {\n    amountsBySlug: totalAmountsBySlug,\n    isScam,\n    isDangerous,\n    nftCount,\n  } = selectCurrentDappTransferTotals(global);\n\n  return {\n    transactions,\n    totalAmountsBySlug,\n    emulation,\n    isScam,\n    isDangerous,\n    nftCount,\n    dapp,\n    isLoading,\n    tokensBySlug: global.tokenInfo.bySlug,\n    swapTokensBySlug: global.swapTokenInfo?.bySlug,\n    theme: global.settings.theme,\n    nftsByAddress: accountState?.nfts?.byAddress,\n    currentAccountId: accountId,\n    stakingStateBySlug: selectAccountStakingStatesBySlug(global, accountId),\n    savedAddresses: accountState?.savedAddresses,\n    accounts,\n    insufficientTokens: selectDappTransferInsufficientTokens(global),\n    balancesBySlug: accountState?.balances?.bySlug,\n  };\n})(DappTransferInitial));\n\ninterface TokenDisplayInfo {\n  balance: bigint;\n  symbol: string;\n  decimals: number;\n}\n\nfunction calculateTokenToDisplay(\n  totalAmountsBySlug?: Record<string, bigint>,\n  balancesBySlug?: Record<string, bigint>,\n  tokensBySlug?: Record<string, ApiTokenWithPrice>,\n): TokenDisplayInfo {\n  // Default to TON if no data\n  if (!totalAmountsBySlug || !balancesBySlug || !tokensBySlug) {\n    return {\n      balance: balancesBySlug?.[TONCOIN.slug] ?? 0n,\n      symbol: TONCOIN.symbol,\n      decimals: TONCOIN.decimals,\n    };\n  }\n\n  const insufficientTokens: Array<{\n    slug: string;\n    insufficientUsdValue: number;\n    balance: bigint;\n    symbol: string;\n    decimals: number;\n  }> = [];\n\n  const sufficientTokens: Array<{\n    slug: string;\n    transactionUsdValue: number;\n    balance: bigint;\n    symbol: string;\n    decimals: number;\n  }> = [];\n\n  // Analyze each token in the transaction\n  for (const [slug, requiredAmount] of Object.entries(totalAmountsBySlug)) {\n    const availableBalance = balancesBySlug[slug] ?? 0n;\n    const token = tokensBySlug[slug];\n\n    if (!token) continue;\n\n    const { symbol, decimals, priceUsd = 0 } = token;\n\n    if (availableBalance < requiredAmount) {\n      // Token is insufficient\n      const insufficientAmount = requiredAmount - availableBalance;\n      const insufficientUsdValue = toBig(insufficientAmount, decimals).toNumber() * priceUsd;\n\n      insufficientTokens.push({\n        slug,\n        insufficientUsdValue,\n        balance: availableBalance,\n        symbol,\n        decimals,\n      });\n    } else {\n      // Token is sufficient\n      const transactionUsdValue = toBig(requiredAmount, decimals).toNumber() * priceUsd;\n\n      sufficientTokens.push({\n        slug,\n        transactionUsdValue,\n        balance: availableBalance,\n        symbol,\n        decimals,\n      });\n    }\n  }\n\n  // If some tokens are insufficient, show the one with maximum insufficient USD value\n  if (insufficientTokens.length > 0) {\n    const maxInsufficientToken = insufficientTokens.reduce((max, current) =>\n      current.insufficientUsdValue > max.insufficientUsdValue ? current : max,\n    );\n\n    return {\n      balance: maxInsufficientToken.balance,\n      symbol: maxInsufficientToken.symbol,\n      decimals: maxInsufficientToken.decimals,\n    };\n  }\n\n  // If all tokens are sufficient, show the one with maximum transaction USD value\n  if (sufficientTokens.length > 0) {\n    const maxTransactionToken = sufficientTokens.reduce((max, current) =>\n      current.transactionUsdValue > max.transactionUsdValue ? current : max,\n    );\n\n    return {\n      balance: maxTransactionToken.balance,\n      symbol: maxTransactionToken.symbol,\n      decimals: maxTransactionToken.decimals,\n    };\n  }\n\n  // Fallback to TON\n  return {\n    balance: balancesBySlug[TONCOIN.slug] ?? 0n,\n    symbol: TONCOIN.symbol,\n    decimals: TONCOIN.decimals,\n  };\n}\n\nfunction sortTransactions(\n  transactions: readonly ApiDappTransfer[] | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n) {\n  if (!transactions) {\n    return transactions;\n  }\n\n  return transactions\n    .map((transaction, index): SortedDappTransfer => ({\n      ...transaction,\n      index,\n      sortingCost: getTransactionCostForSorting(transaction, tokensBySlug),\n    }))\n    .sort((transaction0, transaction1) => transaction1.sortingCost - transaction0.sortingCost);\n}\n\nfunction getTransactionCostForSorting(transaction: ApiDappTransfer, tokensBySlug: Record<string, ApiTokenWithPrice>) {\n  const tonAmount = toBig(transaction.amount + transaction.networkFee, TONCOIN.decimals).toNumber();\n  let cost = tokensBySlug[TONCOIN.slug].priceUsd * tonAmount;\n\n  if (isTokenTransferPayload(transaction.payload)) {\n    const { amount, slug } = transaction.payload;\n    const token = tokensBySlug[slug];\n    if (token) {\n      cost += token.priceUsd * toBig(amount, token.decimals).toNumber();\n    }\n  } else if (isNftTransferPayload(transaction.payload)) {\n    // Simple way to display NFT at top of list\n    cost += NFT_FAKE_COST_USD;\n  }\n\n  return cost;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity, ApiDappTransfer, ApiToken } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { selectCurrentDappTransferTotals } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport { getActivityHeight } from '../main/sections/Content/Activity';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport DappLedgerWarning from './DappLedgerWarning';\nimport DappTransaction from './DappTransaction';\nimport DappTransferComplete from './DappTransferComplete';\nimport DappTransferInitial from './DappTransferInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Dapp.module.scss';\n\ninterface StateProps {\n  currentDappTransfer: GlobalState['currentDappTransfer'];\n  tokensBySlug: Record<string, ApiToken>;\n  isMediaViewerOpen?: boolean;\n  isDangerous: boolean;\n}\n\nfunction DappTransferModal({\n  currentDappTransfer: {\n    isLoading,\n    viewTransactionOnIdx,\n    state,\n    transactions,\n    emulation,\n    error,\n  },\n  tokensBySlug,\n  isMediaViewerOpen,\n  isDangerous,\n}: StateProps) {\n  const {\n    setDappTransferScreen,\n    clearDappTransferError,\n    submitDappTransferPassword,\n    submitDappTransferHardware,\n    closeDappTransfer,\n    cancelDappTransfer,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== TransferState.None;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const needsExtraHeight = useMemo(\n    () => shouldForceFullScreen(transactions, emulation?.activities, isDangerous),\n    [transactions, emulation, isDangerous],\n  );\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm || state === TransferState.Password) {\n      setDappTransferScreen({ state: TransferState.Initial });\n    }\n  });\n\n  const handleTransferPasswordSubmit = useLastCallback((password: string) => {\n    submitDappTransferPassword({ password });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitDappTransferHardware();\n  });\n\n  const handleResetTransfer = useLastCallback(() => {\n    cancelDappTransfer();\n    updateNextKey();\n  });\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Action')} onClose={closeDappTransfer} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          submitLabel={lang('Send')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferPasswordSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearDappTransferError}\n        />\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: TransferState) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return <DappTransferInitial onClose={closeDappTransfer} />;\n\n      case TransferState.WarningHardware:\n        return (\n          <>\n            <ModalHeader title={lang('Send Transaction')} onClose={closeDappTransfer} />\n            <DappLedgerWarning />\n          </>\n        );\n\n      case TransferState.Confirm:\n        return (\n          <DappTransaction\n            transaction={viewTransactionOnIdx !== undefined ? transactions?.[viewTransactionOnIdx] : undefined}\n            tokensBySlug={tokensBySlug}\n            isActive={isActive}\n            onBack={handleBackClick}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.Password:\n        return renderPassword(isActive);\n\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onTryAgain={submitDappTransferHardware}\n            onClose={closeDappTransfer}\n          />\n        );\n\n      case TransferState.Complete:\n        return (\n          <DappTransferComplete\n            isActive={isActive}\n            onClose={closeDappTransfer}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={buildClassName(styles.modalDialog, needsExtraHeight && styles.modalDialogExtraHeight)}\n      nativeBottomSheetKey=\"dapp-transfer\"\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={needsExtraHeight || renderingKey === TransferState.Password}\n      onClose={closeDappTransfer}\n      onCloseAnimationEnd={handleResetTransfer}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isDangerous } = selectCurrentDappTransferTotals(global);\n\n  return {\n    currentDappTransfer: global.currentDappTransfer,\n    tokensBySlug: global.tokenInfo.bySlug,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isDangerous,\n  };\n})(DappTransferModal));\n\nfunction shouldForceFullScreen(transactions?: ApiDappTransfer[], activities?: ApiActivity[], isDangerous?: boolean) {\n  let height = 0; // rem\n\n  if (transactions) {\n    height += transactions.length * 3;\n    if (transactions.length > 1) height += 5.125; // The Total Amount field\n  }\n\n  if (activities) {\n    for (const activity of activities) {\n      height += getActivityHeight(activity, true);\n    }\n  }\n\n  if (isDangerous) {\n    height += 4.6;\n  }\n\n  return height >= 14.5; // The actual available height is 15.125. Leaving a margin just in case.\n}\n","import { Dialog } from '@capacitor/dialog';\nimport type { FC } from '../lib/teact/teact';\nimport React, { memo, useEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { DialogType } from '../global/types';\n\nimport { IS_CAPACITOR } from '../config';\nimport renderText from '../global/helpers/renderText';\nimport { pick } from '../util/iteratees';\n\nimport useFlag from '../hooks/useFlag';\nimport useLang from '../hooks/useLang';\n\nimport Button from './ui/Button';\nimport Modal from './ui/Modal';\n\nimport modalStyles from './ui/Modal.module.scss';\n\ntype StateProps = {\n  dialogs: DialogType[];\n};\n\nconst Dialogs: FC<StateProps> = ({ dialogs }) => {\n  const { dismissDialog } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag();\n\n  const dialog = dialogs[dialogs.length - 1];\n  const title = lang(dialog?.title ?? 'Something went wrong');\n\n  useEffect(() => {\n    if (IS_CAPACITOR && typeof dialog?.message == 'string' && !dialog?.footerButtons) {\n      if (dialog) {\n        void Dialog.alert({\n          title,\n          message: lang(dialog.message),\n        }).then(() => {\n          dismissDialog();\n        });\n      }\n    } else if (dialog) {\n      openModal();\n    } else {\n      closeModal();\n    }\n  }, [dialogs, lang, dialog, openModal, title]);\n\n  if (!dialog) {\n    return undefined;\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      isCompact\n      title={title}\n      noBackdropClose={dialog.noBackdropClose}\n      isInAppLock={dialog.isInAppLock}\n      onClose={closeModal}\n      onCloseAnimationEnd={dismissDialog}\n    >\n      <div>\n        {\n          typeof dialog.message == 'string'\n            ? renderText(lang(dialog.message, dialog.entities))\n            : dialog.message\n        }\n      </div>\n      <div className={modalStyles.footerButtons}>\n        {dialog.footerButtons}\n        <Button onClick={closeModal}>{lang('OK')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['dialogs']),\n)(Dialogs));\n","import React, {\n  memo, useEffect, useState,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { ElectronEvent } from '../../electron/types';\n\nimport { APP_NAME, PRODUCTION_URL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateApp.module.scss';\n\ntype StateProps = {\n  isAppUpdateAvailable?: boolean;\n};\n\nfunction UpdateApp({ isAppUpdateAvailable }: StateProps) {\n  const lang = useLang();\n\n  const [isElectronUpdateDownloaded, setIsElectronUpdateDownloaded] = useState(false);\n  const [isElectronAutoUpdateEnabled, setIsElectronAutoUpdateEnabled] = useState(false);\n  const [isDisabled, disable] = useFlag(false);\n\n  useEffect(() => {\n    const removeUpdateErrorListener = window.electron?.on(ElectronEvent.UPDATE_ERROR, () => {\n      setIsElectronUpdateDownloaded(false);\n    });\n    const removeUpdateDownloadedListener = window.electron?.on(ElectronEvent.UPDATE_DOWNLOADED, () => {\n      setIsElectronUpdateDownloaded(true);\n    });\n\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsElectronAutoUpdateEnabled);\n\n    return () => {\n      removeUpdateErrorListener?.();\n      removeUpdateDownloadedListener?.();\n    };\n  }, []);\n\n  const handleClick = useLastCallback(async () => {\n    if (isDisabled) {\n      return;\n    }\n\n    if (!isElectronAutoUpdateEnabled) {\n      window.open(`${PRODUCTION_URL}/get`, '_blank', 'noopener');\n      return;\n    }\n\n    if (isElectronUpdateDownloaded) {\n      disable();\n      await window.electron?.installUpdate();\n      return;\n    }\n\n    if (isAppUpdateAvailable) {\n      window.location.reload();\n    }\n  });\n\n  const { ref, shouldRender } = useShowTransition({\n    isOpen: isElectronUpdateDownloaded || isAppUpdateAvailable,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) {\n    return null; // eslint-disable-line no-null/no-null\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(\n        styles.container,\n        isDisabled && styles.disabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.iconWrapper}>\n        <i className={buildClassName('icon-update', styles.icon)} />\n      </div>\n\n      <div className={styles.text}>{lang('Update %app_name%', { app_name: APP_NAME })}</div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isAppUpdateAvailable } = global;\n\n  return { isAppUpdateAvailable };\n})(UpdateApp));\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"m3oYVPLL\",\"icon\":\"O2khIMww\",\"disabled\":\"Hz_3Tm4Q\",\"icon-wrapper\":\"cAAhDZj9\",\"iconWrapper\":\"cAAhDZj9\",\"text\":\"vvQKF4lC\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"o0YiMAP8\",\"wrapper\":\"B1_vmNNd\",\"applicationName\":\"F4gGoZNE\",\"buttons\":\"oUKLixL4\",\"windowsButtons\":\"hKXvGlWy\",\"windowsButton\":\"Pgysk0gP\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useRef } from '../../lib/teact/teact';\n\nimport { APP_NAME } from '../../config';\nimport { IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useElectronDrag from '../../hooks/useElectronDrag';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport UpdateApp from './UpdateApp';\n\nimport styles from './ElectronHeader.module.scss';\n\ntype Props = {\n  children?: TeactNode;\n  withTitle?: boolean;\n};\n\nfunction ElectronHeader({ children, withTitle }: Props) {\n  const containerRef = useRef<HTMLDivElement>();\n  useElectronDrag(containerRef);\n\n  const handleMinimize = useLastCallback(() => {\n    window.electron?.minimize();\n  });\n\n  const handleMaximize = useLastCallback(async () => {\n    if (await window.electron?.getIsMaximized()) {\n      window.electron?.unmaximize();\n    } else {\n      window.electron?.maximize();\n    }\n  });\n\n  const handleClose = useLastCallback(() => {\n    window.electron?.close();\n  });\n\n  const handleDoubleClick = useLastCallback(() => {\n    void window.electron?.handleDoubleClick();\n  });\n\n  if (IS_WINDOWS) {\n    return (\n      <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n        <div className={styles.wrapper}>\n          {Boolean(children) && <div className={styles.buttons}>{children}</div>}\n\n          {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n        </div>\n\n        <div className={styles.windowsButtons}>\n          <UpdateApp />\n\n          <div className={styles.windowsButton} onClick={handleMinimize}>\n            <i className=\"icon-windows-minimize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleMaximize}>\n            <i className=\"icon-windows-maximize\" />\n          </div>\n\n          <div className={styles.windowsButton} onClick={handleClose}>\n            <i className=\"icon-windows-close\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div ref={containerRef} className={styles.container} onDoubleClick={handleDoubleClick}>\n      <div className={styles.wrapper}>\n        {withTitle && <div className={styles.applicationName}>{APP_NAME}</div>}\n\n        <div className={styles.buttons}>\n          <UpdateApp />\n\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(ElectronHeader);\n","import { type ElementRef, useEffect, useRef } from '../lib/teact/teact';\n\nimport { IS_ELECTRON, IS_MAC_OS } from '../util/windowEnvironment';\n\nconst DRAG_DISTANCE_THRESHOLD = 5;\n\nconst useElectronDrag = (ref: ElementRef<HTMLDivElement>) => {\n  const isDragging = useRef(false);\n\n  const x = useRef(window.screenX);\n  const y = useRef(window.screenY);\n  const distance = useRef(0);\n\n  useEffect(() => {\n    const element = ref.current;\n    if (!element || !(IS_ELECTRON && IS_MAC_OS)) return undefined;\n\n    const handleClick = (event: MouseEvent) => {\n      distance.current = 0;\n\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n        isDragging.current = false;\n      }\n    };\n\n    const handleMousedown = (event: MouseEvent) => {\n      if (isDragging.current) {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    };\n\n    const handleDrag = (event: MouseEvent) => {\n      if (event.buttons === 1) {\n        distance.current += Math.sqrt((x.current - window.screenX) ** 2 + (y.current - window.screenY) ** 2);\n\n        x.current = window.screenX;\n        y.current = window.screenY;\n\n        if (!isDragging.current && distance.current > DRAG_DISTANCE_THRESHOLD) {\n          isDragging.current = true;\n        }\n      }\n    };\n\n    const handleDoubleClick = (event: MouseEvent) => {\n      if (event.currentTarget === event.target) {\n        void window.electron?.handleDoubleClick();\n      }\n    };\n\n    element.addEventListener('click', handleClick);\n    element.addEventListener('mousedown', handleMousedown);\n    element.addEventListener('mousemove', handleDrag);\n    element.addEventListener('dblclick', handleDoubleClick);\n\n    return () => {\n      element.removeEventListener('click', handleClick);\n      element.removeEventListener('mouseup', handleMousedown);\n      element.removeEventListener('mousemove', handleDrag);\n      element.removeEventListener('dblclick', handleDoubleClick);\n    };\n  }, [ref]);\n};\n\nexport default useElectronDrag;\n","import { useEffect, useRef } from '../../../lib/teact/teact';\n\nimport { IS_IOS } from '../../windowEnvironment';\nimport { disableTelegramMiniAppSwipeToClose, enableTelegramMiniAppSwipeToClose } from '../index';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport default function useTelegramMiniAppSwipeToClose(isActive?: boolean) {\n  const isSwipeDisabledRef = useRef(false);\n\n  useEffect(() => {\n    if (!IS_IOS) return;\n\n    if (!isActive && isSwipeDisabledRef.current) {\n      enableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = false;\n    }\n  }, [isActive]);\n\n  const disableSwipeToClose = useLastCallback(() => {\n    if (IS_IOS && !isSwipeDisabledRef.current) {\n      disableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = true;\n    }\n  });\n\n  const enableSwipeToClose = useLastCallback(() => {\n    if (IS_IOS && isSwipeDisabledRef.current) {\n      enableTelegramMiniAppSwipeToClose();\n      isSwipeDisabledRef.current = false;\n    }\n  });\n\n  return {\n    disableSwipeToClose,\n    enableSwipeToClose,\n  };\n}\n","import { getActions } from '../../../global';\n\nimport type { ApiSite } from '../../../api/types';\n\nimport { openUrl } from '../../../util/openUrl';\nimport { getHostnameFromUrl, isValidUrl } from '../../../util/url';\n\nexport interface SearchSuggestions {\n  history?: string[];\n  sites?: ApiSite[];\n  isEmpty: boolean;\n}\n\nexport interface ProcessedSites {\n  trendingSites: ApiSite[];\n  allSites: Record<number, ApiSite[]>;\n}\nconst GOOGLE_SEARCH_URL = 'https://www.google.com/search?q=';\n\nexport function filterSites(sites?: ApiSite[], shouldRestrict?: boolean) {\n  if (!sites) {\n    return undefined;\n  }\n\n  return shouldRestrict\n    ? sites.filter((site) => !site.canBeRestricted)\n    : sites;\n}\n\nexport function generateSearchSuggestions(\n  searchValue: string,\n  browserHistory?: string[],\n  filteredSites?: ApiSite[],\n) {\n  const search = searchValue.toLowerCase();\n  const historyResult = browserHistory?.filter((url) => url.toLowerCase().includes(search));\n  const sitesResult = search.length && filteredSites\n    ? filteredSites.filter(({ url, name, description }) => {\n      return url.toLowerCase().includes(search)\n        || name.toLowerCase().includes(search)\n        || description.toLowerCase().includes(search);\n    })\n    : undefined;\n\n  return {\n    history: historyResult,\n    sites: sitesResult,\n    isEmpty: (historyResult?.length || 0) + (sitesResult?.length || 0) === 0,\n  };\n}\n\nexport function processSites(sites?: ApiSite[]): ProcessedSites {\n  return (sites || []).reduce((acc, site) => {\n    if (site.isFeatured) {\n      acc.trendingSites.push(site);\n    }\n\n    if (!acc.allSites[site.categoryId!]) {\n      acc.allSites[site.categoryId!] = [];\n    }\n    acc.allSites[site.categoryId!].push(site);\n\n    return acc;\n  }, { trendingSites: [], allSites: {} } as ProcessedSites);\n}\n\nexport function findSiteByUrl(sites?: ApiSite[], targetUrl?: string): ApiSite | undefined {\n  return sites?.find(({ url }) => url === targetUrl);\n}\n\nexport function openSite(originalUrl: string, isExternal?: boolean, title?: string) {\n  let url = originalUrl;\n  if (!url.startsWith('http:') && !url.startsWith('https:')) {\n    url = `https://${url}`;\n  }\n  if (!isValidUrl(url)) {\n    url = `${GOOGLE_SEARCH_URL}${encodeURIComponent(originalUrl)}`;\n  } else {\n    getActions().addSiteToBrowserHistory({ url });\n  }\n\n  void openUrl(url, { isExternal, title, subtitle: getHostnameFromUrl(url) });\n}\n","import { type ElementRef, useEffect } from '../lib/teact/teact';\n\ninterface OwnProps {\n  containerRef: ElementRef<HTMLDivElement>;\n  isDisabled?: boolean;\n  shouldPreventDefault?: boolean;\n  contentSelector?: string;\n}\n\nfunction useHorizontalScroll({\n  containerRef,\n  isDisabled,\n  shouldPreventDefault = false,\n  contentSelector,\n}: OwnProps) {\n  useEffect(() => {\n    const container = containerRef.current;\n\n    if (isDisabled || !container) {\n      return undefined;\n    }\n\n    function handleScroll(e: WheelEvent) {\n      // Ignore horizontal scroll and let it work natively (e.g. on touchpad)\n      if (!e.deltaX) {\n        const content = contentSelector ? container!.querySelector(contentSelector) : container;\n        if (!content) return;\n\n        content.scrollLeft += e.deltaY / 4;\n        if (shouldPreventDefault) e.preventDefault();\n      }\n    }\n\n    container.addEventListener('wheel', handleScroll, { passive: !shouldPreventDefault });\n\n    return () => {\n      container.removeEventListener('wheel', handleScroll);\n    };\n  }, [containerRef, contentSelector, isDisabled, shouldPreventDefault]);\n}\n\nexport default useHorizontalScroll;\n","import { useRef } from '../lib/teact/teact';\n\n// This is not render-dependent and will never allow previous to match current\nexport default function usePrevious2<T>(current: T) {\n  const prevRef = useRef<T>();\n  const lastRef = useRef<T>();\n\n  if (lastRef.current !== current) {\n    prevRef.current = lastRef.current;\n  }\n\n  lastRef.current = current;\n\n  return prevRef.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"MEbg8jIh\",\"header\":\"P97rYp1K\",\"folder\":\"uC9KwIK7\",\"interactive\":\"db2WsIPg\",\"subfolder\":\"qqdPrxSH\",\"site\":\"dNJuuV1f\",\"small\":\"rQOZaBwJ\",\"icon\":\"yWoCn5kk\",\"scalable\":\"d8pMxoBU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Image from '../ui/Image';\n\nimport styles from './Category.module.scss';\n\ninterface OwnProps {\n  category: ApiSiteCategory;\n  sites: ApiSite[];\n}\n\nfunction Category({ category, sites }: OwnProps) {\n  const { openSiteCategory } = getActions();\n\n  const lang = useLang();\n  const [bigSites, smallSites] = useMemo(() => {\n    if (sites.length <= 4) {\n      return [sites, []];\n    }\n\n    return [\n      sites.slice(0, 3),\n      sites.slice(3, 7),\n    ];\n  }, [sites]);\n\n  function handleCategoryClick() {\n    openSiteCategory({ id: category.id });\n  }\n\n  return (\n    <div className={styles.root}>\n      <h3\n        className={styles.header}\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleCategoryClick}\n      >\n        {lang(category.name)}\n      </h3>\n\n      <div\n        className={buildClassName(styles.folder, smallSites.length > 0 && styles.interactive)}\n        onClick={smallSites.length > 0 ? handleCategoryClick : undefined}\n      >\n        {bigSites.map((site) => (\n          <button\n            key={`${site.url}-${site.name}`}\n            type=\"button\"\n            className={buildClassName(styles.site, styles.scalable)}\n            onClick={(e: React.MouseEvent) => {\n              stopEvent(e);\n\n              void openUrl(\n                site.url, { isExternal: site.isExternal, title: site.name, subtitle: getHostnameFromUrl(site.url) },\n              );\n            }}\n          >\n            <Image\n              url={site.icon}\n              alt={site.name}\n              imageClassName={styles.icon}\n            />\n          </button>\n        ))}\n        {smallSites.length > 0 && (\n          <div className={buildClassName(styles.subfolder, styles.scalable)}>\n            {smallSites.map((site) => (\n              <Image\n                key={`${site.url}-${site.name}`}\n                url={site.icon}\n                alt={site.name}\n                className={buildClassName(styles.site, styles.small)}\n                imageClassName={styles.icon}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Category);\n","export const MEMO_EMPTY_ARRAY = [];\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3Om0rcJ\",\"feed\":\"nA5QFADu\",\"feedEmpty\":\"RcpQnS7j\",\"tiles\":\"y5gkmCay\",\"pills\":\"YTIqRcid\",\"dapp\":\"uOCr1XIF\",\"icon\":\"ZwXhUWQR\",\"dappName\":\"mqKHkpx5\",\"dappTile\":\"in10zDBl\",\"dappPill\":\"x3JEisHt\",\"settingsLabel\":\"CDOOWV_8\",\"iconPill\":\"B18NDC8N\",\"iconTile\":\"ws8erUzz\",\"fallbackIcon\":\"JdTfrjba\",\"settingsButton\":\"kqZ8FwHA\",\"settingsIconContainer\":\"S5zvywKS\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { openUrl } from '../../util/openUrl';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Image from '../ui/Image';\n\nimport dappStyles from '../dapps/Dapp.module.scss';\nimport styles from './DappFeed.module.scss';\n\ninterface OwnProps {\n  iconUrl: string;\n  name: string;\n  url: string;\n  mode: 'pill' | 'tile';\n  isExternal: boolean;\n}\n\nconst RERENDER_DAPPS_FEED_DELAY_MS = SECOND;\n\nconst POPULAR_DAPP_URL_REPLACEMENTS = [{\n  name: 'Fanzee Battles',\n  manifestUrl: 'https://battles-tg-app.fanz.ee/tc-manifest.json',\n  originalUrl: 'https://t.me/fanzeebattlesbot',\n  replacementUrl: 'https://t.me/battlescryptobot?start=myTonWallet',\n}, {\n  name: 'Hamster Kombat',\n  manifestUrl: 'https://hamsterkombatgame.io/tonconnect-manifest.json',\n  originalUrl: 'https://hamsterkombatgame.io/',\n  replacementUrl: 'https://t.me/hamster_kombat_bot/start',\n}, {\n  name: 'Dogs',\n  manifestUrl: 'https://cdn.onetime.dog/manifest.json',\n  originalUrl: 'https://onetime.dog',\n  replacementUrl: 'https://t.me/dogshouse_bot/join',\n}, {\n  name: 'Earn',\n  manifestUrl: 'https://cdn.joincommunity.xyz/earn/manifest.json',\n  originalUrl: 'https://earncommunity.xyz',\n  replacementUrl: 'https://t.me/earn?startapp',\n}];\n\nconst REPLACEMENTS_BY_URL = POPULAR_DAPP_URL_REPLACEMENTS.reduce(\n  (acc: Record<string, string>, { originalUrl, replacementUrl }) => {\n    acc[originalUrl] = replacementUrl;\n\n    return acc;\n  }, {},\n);\n\nfunction DappFeedItem({\n  iconUrl,\n  name,\n  url,\n  mode,\n  isExternal,\n}: OwnProps) {\n  const { updateDappLastOpenedAt } = getActions();\n\n  const lang = useLang();\n\n  function renderIcon() {\n    const iconClassName = mode === 'pill' ? styles.iconPill : styles.iconTile;\n\n    const fallbackIcon = useMemo(() => (\n      <div className={buildClassName(dappStyles.dappLogo, dappStyles.dappLogoIcon, iconClassName)}>\n        <i className={buildClassName(styles.fallbackIcon, 'icon-laptop')} aria-hidden />\n      </div>\n    ), [iconClassName]);\n\n    return (\n      <Image\n        url={iconUrl}\n        className={iconClassName}\n        imageClassName={styles.icon}\n        alt={lang('Icon')}\n        fallback={fallbackIcon}\n      />\n    );\n  }\n\n  const openDapp = useLastCallback(async () => {\n    await openUrl(REPLACEMENTS_BY_URL[url] || url, { isExternal });\n\n    setTimeout(() => void updateDappLastOpenedAt({ url }), RERENDER_DAPPS_FEED_DELAY_MS);\n  });\n\n  return (\n    <button\n      type=\"button\"\n      className={buildClassName(styles.dapp, mode === 'pill' ? styles.dappPill : styles.dappTile)}\n      onClick={openDapp}\n    >\n      {renderIcon()}\n      <span className={styles.dappName}>{name}</span>\n    </button>\n  );\n}\n\nexport default memo(DappFeedItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"rootSlide\":\"ZqS6W7iF\",\"slide\":\"FbWMWVID\",\"list\":\"eHKjqPA4\",\"landscapeList\":\"ajulW8PQ\",\"suggestionsMenu\":\"AcA4Inhz\",\"suggestions\":\"Rr_OedMn\",\"suggestion\":\"goh_kbKG\",\"suggestionIcon\":\"BHtFAOhh\",\"suggestionAddress\":\"hX1s9Ru4\",\"clearSuggestion\":\"k4u3y6_t\",\"item\":\"gSQkL6Gj\",\"trendingImage\":\"bIf54cAx\",\"imageWrapperScalable\":\"jnZY0Ppv\",\"trending\":\"dsHH5C4L\",\"badge\":\"PI6bQC1A\",\"imageWrapper\":\"oZIOx6b0\",\"infoWrapper\":\"SmLsrv__\",\"extended\":\"Qe5qRpIb\",\"withBorder\":\"yvQQOHrd\",\"badgeLabel\":\"vHZqxLRV\",\"image\":\"RpIwnHrh\",\"title\":\"ToW8q6Vp\",\"description\":\"kd6qUnJ8\",\"telegram\":\"Y4mdR7QN\",\"emptyList\":\"OLtywBQ9\",\"emptyListLoading\":\"i6uQ6HHm\",\"searchWrapper\":\"VQJfovbk\",\"searchContainer\":\"Wr0eK8xW\",\"searchIcon\":\"DdYW9BBn\",\"searchInput\":\"Gy204QbI\",\"sectionHeader\":\"HElxzEtm\",\"trendingSection\":\"bX0D8BEZ\",\"trendingList\":\"bZc6NN6v\"};","import React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { type ApiDapp } from '../../api/types';\nimport { SettingsState } from '../../global/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\n\nimport DappFeedItem from './DappFeedItem';\n\nimport styles from './DappFeed.module.scss';\nimport exploreStyles from './Explore.module.scss';\n\ninterface StateProps {\n  dapps: ApiDapp[];\n  dappLastOpenedDatesByUrl?: Record<string, number>;\n}\n\ntype DappWithLastOpenedDate = ApiDapp & { lastOpenedAt?: number };\n\nconst MAX_DAPPS_FOR_PILL_MODE = 3;\nconst HIDDEN_FROM_FEED_DAPP_URLS = new Set(['https://checkin.mytonwallet.org']);\n\nfunction DappFeed({ dapps: dappsFromState, dappLastOpenedDatesByUrl }: StateProps) {\n  const { openSettingsWithState, closeExplore } = getActions();\n\n  const lang = useLang();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const dapps: DappWithLastOpenedDate[] = useMemo(() => {\n    const sortedDapps = dappsFromState\n      .slice()\n      .filter((dapp) => !HIDDEN_FROM_FEED_DAPP_URLS.has(dapp.url))\n      .map((dapp) => ({ ...dapp, lastOpenedAt: dappLastOpenedDatesByUrl?.[dapp.url] }))\n      .sort(compareDapps);\n\n    // Remove duplicates, since we now support multiple connections per dapp. Keep the most recent connection.\n    const seen = new Set<string>();\n    return sortedDapps.filter(({ url }) => {\n      if (seen.has(url)) return false;\n      seen.add(url);\n      return true;\n    });\n  }, [dappLastOpenedDatesByUrl, dappsFromState]);\n\n  const mode = dapps.length > MAX_DAPPS_FOR_PILL_MODE ? 'tile' : 'pill';\n  const isPillMode = mode === 'pill';\n  const iconWrapperClassName = isPillMode ? styles.iconPill : styles.iconTile;\n  const fullClassName = buildClassName(\n    styles.feed,\n    isPillMode ? styles.pills : styles.tiles,\n    !dapps.length && styles.feedEmpty,\n    'dapps-feed',\n  );\n\n  function openSettings() {\n    closeExplore(undefined, { forceOnHeavyAnimation: true });\n    openSettingsWithState({ state: SettingsState.Dapps }, { forceOnHeavyAnimation: true });\n  }\n\n  useHorizontalScroll({\n    containerRef,\n    isDisabled: IS_TOUCH_ENV || dapps.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: '.dapps-feed',\n  });\n\n  if (!dapps.length) {\n    return undefined;\n  }\n\n  return (\n    <div className={styles.root} ref={containerRef}>\n      <h2 className={exploreStyles.sectionHeader}>{lang('Connected')}</h2>\n\n      <div className={fullClassName}>\n        {dapps?.map((dapp) => renderDapp(dapp, mode))}\n\n        {!!dapps.length && (\n          <div\n            className={styles.settingsButton}\n            role=\"button\"\n            tabIndex={0}\n            title={isPillMode ? lang('Settings') : undefined}\n            aria-label={isPillMode ? lang('Settings') : undefined}\n            onClick={openSettings}\n          >\n            <div className={buildClassName(styles.settingsIconContainer, iconWrapperClassName)}>\n              <i className=\"icon-params\" aria-hidden />\n            </div>\n            {!isPillMode && <span className={styles.settingsLabel}>{lang('Settings')}</span>}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { dappLastOpenedDatesByUrl } = selectCurrentAccountState(global) || {};\n\n  return { dapps, dappLastOpenedDatesByUrl };\n})(DappFeed));\n\nfunction compareDapps(a: DappWithLastOpenedDate, b: DappWithLastOpenedDate) {\n  const aLastOpened = a.lastOpenedAt || 0;\n  const bLastOpened = b.lastOpenedAt || 0;\n\n  if (aLastOpened !== bLastOpened) {\n    return bLastOpened - aLastOpened;\n  }\n\n  return b.connectedAt - a.connectedAt;\n}\n\nfunction renderDapp(dapp: DappWithLastOpenedDate, mode: 'pill' | 'tile') {\n  const {\n    iconUrl, name, url,\n  } = dapp;\n\n  const key = `dapp-${url}-${getDappConnectionUniqueId(dapp)}`;\n\n  return (\n    <DappFeedItem\n      key={key}\n      iconUrl={iconUrl}\n      name={name}\n      url={url}\n      mode={mode}\n      isExternal={!!dapp.sse}\n    />\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"menuItem\":\"eMFKmXs8\",\"destructive\":\"C84vY_ER\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './MenuItem.module.scss';\n\ntype OnClickHandler = (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, arg?: any) => void;\n\ninterface OwnProps {\n  className?: string;\n  href?: string;\n  children: TeactNode;\n  onClick?: OnClickHandler;\n  clickArg?: string;\n  isDestructive?: boolean;\n}\n\nconst MenuItem: FC<OwnProps> = (props) => {\n  const {\n    className,\n    href,\n    children,\n    onClick,\n    clickArg,\n    isDestructive,\n  } = props;\n\n  const handleClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e, clickArg);\n  });\n\n  const handleKeyDown = useLastCallback((e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.code !== 'Enter' && e.code !== 'Space') {\n      return;\n    }\n\n    if (!onClick) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      return;\n    }\n\n    onClick(e);\n  });\n\n  const fullClassName = buildClassName(\n    styles.menuItem,\n    className,\n    isDestructive && styles.destructive,\n  );\n\n  if (href) {\n    return (\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" className={fullClassName}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      className={fullClassName}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default MenuItem;\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { getHostnameFromUrl, isTelegramUrl } from '../../util/url';\n\nimport Image from '../ui/Image';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  site: ApiSite;\n  isTrending?: boolean;\n  isInList?: boolean;\n  className?: string;\n}\n\nfunction Site({\n  site: {\n    url, icon, name, description, isExternal, extendedIcon, withBorder, badgeText,\n  },\n  isTrending,\n  isInList,\n  className,\n}: OwnProps) {\n  function handleClick() {\n    void vibrate();\n    void openUrl(url, { isExternal, title: name, subtitle: getHostnameFromUrl(url) });\n  }\n\n  return (\n    <div\n      className={buildClassName(\n        styles.item,\n        (extendedIcon && isTrending) && styles.extended,\n        isTrending && styles.trending,\n        !isInList && withBorder && styles.withBorder,\n        className,\n      )}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleClick}\n    >\n      <Image\n        url={extendedIcon && isTrending ? extendedIcon : icon}\n        className={buildClassName(styles.imageWrapper, !isTrending && styles.imageWrapperScalable)}\n        imageClassName={buildClassName(styles.image, isTrending && styles.trendingImage)}\n      />\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>\n          {name}\n\n          {!isTrending && isTelegramUrl(url) && (\n            <i className={buildClassName(styles.telegram, 'icon-telegram-filled')} aria-hidden />\n          )}\n          {isInList && badgeText && <div className={styles.badgeLabel}>{badgeText}</div>}\n        </b>\n        <div className={styles.description}>{description}</div>\n      </div>\n      {!isInList && badgeText && <div className={styles.badge}>{badgeText}</div>}\n    </div>\n  );\n}\n\nexport default memo(Site);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SearchSuggestions } from './helpers/utils';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { getHostnameFromUrl } from '../../util/url';\n\nimport useLang from '../../hooks/useLang';\n\nimport Menu from '../ui/Menu';\nimport MenuItem from '../ui/MenuItem';\nimport Site from './Site';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isSuggestionsVisible: boolean;\n  searchSuggestions: SearchSuggestions;\n  searchValue: string;\n  onSiteClick: (e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>, url: string) => void;\n  onSiteClear: (e: React.MouseEvent, url: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\nfunction ExploreSearchSuggestions({\n  isSuggestionsVisible,\n  searchSuggestions,\n  searchValue,\n  onSiteClick,\n  onSiteClear,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Menu\n      type=\"suggestion\"\n      noBackdrop\n      isOpen={Boolean(isSuggestionsVisible && !searchSuggestions.isEmpty)}\n      className={styles.suggestions}\n      bubbleClassName={styles.suggestionsMenu}\n      onClose={onClose}\n    >\n      {searchSuggestions?.history?.map((url) => (\n        <MenuItem key={`history-${url}`} className={styles.suggestion} onClick={onSiteClick} clickArg={url}>\n          <i\n            className={buildClassName(styles.suggestionIcon, searchValue.length ? 'icon-search' : 'icon-globe')}\n            aria-hidden\n          />\n          <span className={styles.suggestionAddress}>{getHostnameFromUrl(url)}</span>\n\n          <button\n            className={styles.clearSuggestion}\n            type=\"button\"\n            aria-label={lang('Clear')}\n            title={lang('Clear')}\n            onMouseDown={(e) => onSiteClear(e, url)}\n            onClick={stopEvent}\n          >\n            <i className=\"icon-close\" aria-hidden />\n          </button>\n        </MenuItem>\n      ))}\n      {searchSuggestions?.sites?.map((site) => (\n        <Site key={`site-${site.url}-${site.name}`} className={styles.suggestion} site={site} />\n      ))}\n    </Menu>\n  );\n}\n\nexport default memo(ExploreSearchSuggestions);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSiteCategory } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\n\nimport styles from './CategoryHeader.module.scss';\n\ninterface OwnProps {\n  id: number;\n  withNotch?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n}\n\nfunction CategoryHeader({ id, withNotch, categories }: OwnProps & StateProps) {\n  const { closeSiteCategory } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const category = useMemo(() => {\n    return (categories || [])?.find((item) => id === item.id);\n  }, [categories, id]);\n\n  return (\n    <div className={buildClassName(\n      styles.root,\n      isPortrait && 'with-notch-on-scroll',\n      withNotch && 'is-scrolled',\n    )}\n    >\n      <Button className={styles.backButton} isSimple isText onClick={closeSiteCategory}>\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n        <span>{lang('Back')}</span>\n      </Button>\n\n      <h3 className={styles.title}>\n        {lang(category?.name || '')}\n      </h3>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    categories: global.exploreData?.categories,\n  };\n})(CategoryHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"xWsj5_Wk\",\"backButton\":\"P2bhPLw0\",\"backIcon\":\"FmQAR1hK\",\"title\":\"kW1ssngj\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiSite } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport CategoryHeader from './CategoryHeader';\nimport Site from './Site';\n\nimport styles from './SiteList.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  categoryId: number;\n  sites: ApiSite[];\n}\n\nfunction SiteList({ isActive, categoryId, sites }: OwnProps) {\n  const { closeSiteCategory } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n\n  useHistoryBack({\n    isActive,\n    onBack: closeSiteCategory,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div\n      onScroll={isPortrait ? handleContentScroll : undefined}\n      className={buildClassName(styles.root, 'custom-scroll')}\n    >\n      {isPortrait && <CategoryHeader id={categoryId} withNotch={isScrolled} />}\n      <div className={styles.list}>\n        {sites.map((site) => (\n          <Site\n            key={`${site.url}-${site.name}`}\n            site={site}\n            isInList\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SiteList);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"LxPuuiTJ\",\"list\":\"Eml6INN5\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSite, ApiSiteCategory } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { stopEvent } from '../../util/domEvents';\nimport { vibrate } from '../../util/haptics';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport useTelegramMiniAppSwipeToClose from '../../util/telegram/hooks/useTelegramMiniAppSwipeToClose';\nimport {\n  IS_ANDROID, IS_ANDROID_APP, IS_IOS_APP, IS_TOUCH_ENV,\n} from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\nimport {\n  filterSites,\n  findSiteByUrl,\n  generateSearchSuggestions,\n  openSite,\n  processSites,\n  type SearchSuggestions,\n} from './helpers/utils';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useFlag from '../../hooks/useFlag';\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Spinner from '../ui/Spinner';\nimport Transition from '../ui/Transition';\nimport Category from './Category';\nimport DappFeed from './DappFeed';\nimport ExploreSearchSuggestions from './ExploreSearchSuggestions';\nimport Site from './Site';\nimport SiteList from './SiteList';\n\nimport styles from './Explore.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  categories?: ApiSiteCategory[];\n  sites?: ApiSite[];\n  shouldRestrict: boolean;\n  browserHistory?: string[];\n  currentSiteCategoryId?: number;\n}\n\nconst SUGGESTIONS_OPEN_DELAY = 300;\nconst enum SLIDES {\n  main,\n  category,\n}\n\nfunction Explore({\n  isActive, categories, sites: originalSites, shouldRestrict, browserHistory, currentSiteCategoryId,\n}: OwnProps & StateProps) {\n  const {\n    loadExploreSites,\n    getDapps,\n    removeSiteFromBrowserHistory,\n    openSiteCategory,\n    closeSiteCategory,\n  } = getActions();\n\n  const inputRef = useRef<HTMLInputElement>();\n  const suggestionsTimeoutRef = useRef<number | undefined>(undefined);\n  const transitionRef = useRef<HTMLDivElement>();\n  const trendingContainerRef = useRef<HTMLDivElement>();\n\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const [searchValue, setSearchValue] = useState<string>('');\n  const [isSearchFocused, markSearchFocused, unmarkSearchFocused] = useFlag(false);\n  const [isSuggestionsVisible, showSuggestions, hideSuggestions] = useFlag(false);\n  const { renderingKey } = useModalTransitionKeys(currentSiteCategoryId || 0, !!isActive);\n  const prevSiteCategoryIdRef = useStateRef(usePrevious2(renderingKey));\n  const { disableSwipeToClose, enableSwipeToClose } = useTelegramMiniAppSwipeToClose(isActive);\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  useEffect(\n    () => (renderingKey ? captureEscKeyListener(closeSiteCategory) : undefined),\n    [closeSiteCategory, renderingKey],\n  );\n\n  const filteredSites = useMemo(() => filterSites(originalSites, shouldRestrict), [originalSites, shouldRestrict]);\n\n  const searchSuggestions = useMemo<SearchSuggestions>(\n    () => generateSearchSuggestions(searchValue, browserHistory, filteredSites),\n    [browserHistory, searchValue, filteredSites],\n  );\n\n  const { trendingSites, allSites } = useMemo(() => processSites(filteredSites), [filteredSites]);\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !filteredSites?.length) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: () => {\n        closeSiteCategory();\n\n        disableSwipeToClose();\n      },\n      onCancel: () => {\n        openSiteCategory({ id: prevSiteCategoryIdRef.current! });\n\n        enableSwipeToClose();\n      },\n    });\n  }, [disableSwipeToClose, enableSwipeToClose, filteredSites?.length, prevSiteCategoryIdRef]);\n\n  useHorizontalScroll({\n    containerRef: trendingContainerRef,\n    isDisabled: IS_TOUCH_ENV || trendingSites.length === 0,\n    shouldPreventDefault: true,\n    contentSelector: `.${styles.trendingList}`,\n  });\n\n  const filteredCategories = useMemo(() => {\n    return categories?.filter((category) => allSites[category.id]?.length > 0);\n  }, [categories, allSites]);\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    getDapps();\n    loadExploreSites({ isLandscape });\n  }, [isActive, isLandscape]);\n\n  const safeShowSuggestions = useLastCallback(() => {\n    if (searchSuggestions.isEmpty) return;\n\n    // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n    if (IS_ANDROID) {\n      suggestionsTimeoutRef.current = window.setTimeout(showSuggestions, SUGGESTIONS_OPEN_DELAY);\n    } else {\n      showSuggestions();\n    }\n  });\n\n  const safeHideSuggestions = useLastCallback(() => {\n    if (isSuggestionsVisible) {\n      hideSuggestions();\n    }\n    window.clearTimeout(suggestionsTimeoutRef.current);\n  });\n\n  useEffectWithPrevDeps(([prevIsSearchFocused]) => {\n    if ((prevIsSearchFocused && !isSearchFocused) || searchSuggestions.isEmpty) {\n      safeHideSuggestions();\n    }\n    if (isSearchFocused && !searchSuggestions.isEmpty) {\n      safeShowSuggestions();\n    }\n  }, [isSearchFocused, searchSuggestions.isEmpty]);\n\n  const handleSiteClick = useLastCallback((\n    e: React.SyntheticEvent<HTMLDivElement | HTMLAnchorElement>,\n    url: string,\n  ) => {\n    void vibrate();\n    hideSuggestions();\n    const site = findSiteByUrl(originalSites, url);\n    openSite(url, site?.isExternal, site?.name);\n  });\n\n  const handleSiteClear = useLastCallback((e: React.MouseEvent, url: string) => {\n    stopEvent(e);\n\n    removeSiteFromBrowserHistory({ url });\n  });\n\n  function handleSearchValueChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setSearchValue(e.target.value);\n  }\n\n  const handleMenuClose = useLastCallback(() => {\n    inputRef.current?.blur();\n  });\n\n  function handleSearchSubmit(e: React.FormEvent<HTMLFormElement>) {\n    stopEvent(e);\n\n    handleMenuClose();\n\n    if (searchValue.length > 0) {\n      openSite(searchValue);\n      setSearchValue('');\n    }\n  }\n\n  function renderSearch() {\n    return (\n      <form action=\"#\" onSubmit={handleSearchSubmit} className={styles.searchContainer} autoComplete=\"off\">\n        <i className={buildClassName(styles.searchIcon, 'icon-search')} aria-hidden />\n        <input\n          name=\"explore-search\"\n          className={styles.searchInput}\n          placeholder={lang('Search or enter address')}\n          value={searchValue}\n          autoCorrect={false}\n          autoCapitalize=\"none\"\n          spellCheck={false}\n          inputMode=\"url\"\n          onChange={handleSearchValueChange}\n          onFocus={markSearchFocused}\n          onBlur={unmarkSearchFocused}\n        />\n      </form>\n    );\n  }\n\n  function renderTrending() {\n    return (\n      <div ref={trendingContainerRef} className={styles.trendingSection}>\n        <h2 className={styles.sectionHeader}>{lang('Trending')}</h2>\n        <div className={styles.trendingList}>\n          {trendingSites.map((site) => (\n            <Site key={`${site.url}-${site.name}`} site={site} isTrending />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.main:\n        return (\n          <div\n            className={buildClassName(styles.slide, 'custom-scroll')}\n            onScroll={isPortrait ? handleContentScroll : undefined}\n          >\n            <div className={buildClassName(styles.searchWrapper, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n              {renderSearch()}\n              <ExploreSearchSuggestions\n                isSuggestionsVisible={isSuggestionsVisible}\n                searchSuggestions={searchSuggestions}\n                searchValue={searchValue}\n                onSiteClick={handleSiteClick}\n                onSiteClear={handleSiteClear}\n                onClose={handleMenuClose}\n              />\n            </div>\n\n            <DappFeed />\n\n            {Boolean(trendingSites.length) && renderTrending()}\n\n            {Boolean(filteredCategories?.length) && (\n              <>\n                <h2 className={styles.sectionHeader}>{lang('All Dapps')}</h2>\n                <div className={buildClassName(styles.list, isLandscape && styles.landscapeList)}>\n                  {filteredCategories.map((category) => (\n                    <Category key={category.id} category={category} sites={allSites[category.id]} />\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n        );\n\n      case SLIDES.category: {\n        const currentSiteCategory = allSites[renderingKey];\n        if (!currentSiteCategory) return undefined;\n\n        return (\n          <SiteList\n            key={renderingKey}\n            isActive={isContentActive}\n            categoryId={renderingKey}\n            sites={currentSiteCategory}\n          />\n        );\n      }\n    }\n  }\n\n  if (filteredSites === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (filteredSites.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No partners yet')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      ref={transitionRef}\n      name={resolveSlideTransitionName()}\n      activeKey={renderingKey ? SLIDES.category : SLIDES.main}\n      withSwipeControl\n      className={styles.rootSlide}\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { browserHistory, currentSiteCategoryId } = selectCurrentAccountState(global) || {};\n  const { categories, sites } = global.exploreData || {};\n\n  return {\n    sites,\n    categories,\n    shouldRestrict: global.restrictions.isLimitedRegion && (IS_IOS_APP || IS_ANDROID_APP),\n    browserHistory,\n    currentSiteCategoryId,\n  };\n})(Explore));\n","import React, {\n  memo, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport settingsStyles from '../settings/Settings.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isStatic?: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  onBackButtonClick?: NoneToVoidFunction;\n  onCancel?: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nconst ACCOUNT_ADDRESS_SHIFT = 4;\nconst ACCOUNT_BALANCE_DECIMALS = 3;\n\nfunction LedgerSelectWallets({\n  isActive,\n  isStatic,\n  hardwareWallets,\n  accounts,\n  onBackButtonClick,\n  onCancel,\n  onClose,\n}: OwnProps) {\n  const {\n    afterSelectHardwareWallets,\n    loadMoreHardwareWallets,\n  } = getActions();\n  const lang = useLang();\n\n  const [selectedAccountIndices, setSelectedAccountIndices] = useState<number[]>([]);\n  const shouldCloseOnCancel = !onCancel;\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel ?? onClose,\n  });\n\n  const handleAccountToggle = useLastCallback((index: number) => {\n    if (selectedAccountIndices.includes(index)) {\n      setSelectedAccountIndices(selectedAccountIndices.filter((id) => id !== index));\n    } else {\n      setSelectedAccountIndices(selectedAccountIndices.concat([index]));\n    }\n  });\n\n  const handleAddLedgerWallets = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: selectedAccountIndices });\n    onClose();\n  });\n\n  const alreadyConnectedList = useMemo(\n    () => Object.values(accounts ?? [])\n      .map(({ addressByChain: { ton: address } }) => address)\n      .filter(Boolean),\n    [accounts],\n  );\n\n  const handleAddWalletClick = useLastCallback(() => {\n    const list = hardwareWallets ?? [];\n    const lastIndex = list[list.length - 1]?.index ?? 0;\n\n    loadMoreHardwareWallets({ lastIndex });\n  });\n\n  function renderAddAccount() {\n    return (\n      <Button\n        className={styles.addAccountContainer}\n        onClick={handleAddWalletClick}\n      >\n        {lang('Add Wallet')}\n        <i className={buildClassName(styles.addAccountIcon, 'icon-plus')} aria-hidden />\n      </Button>\n    );\n  }\n\n  function renderAccount(address: string, balance: bigint, index: number, isConnected: boolean) {\n    const isActiveAccount = isConnected || selectedAccountIndices.includes(index);\n\n    return (\n      <div\n        key={address}\n        className={buildClassName(styles.account, isActiveAccount && styles.account_current)}\n        onClick={isConnected ? undefined : () => handleAccountToggle(index)}\n      >\n        <span className={styles.accountName}>\n          <i className={buildClassName(styles.accountCurrencyIcon, 'icon-ton')} aria-hidden />\n          {formatCurrency(toDecimal(balance), '', ACCOUNT_BALANCE_DECIMALS)}\n        </span>\n        <div className={styles.accountFooter}>\n          <span className={styles.accountAddress}>\n            {shortenAddress(address, ACCOUNT_ADDRESS_SHIFT, ACCOUNT_ADDRESS_SHIFT)}\n          </span>\n        </div>\n\n        <div className={buildClassName(styles.accountCheckMark, isActiveAccount && styles.accountCheckMark_active)} />\n      </div>\n    );\n  }\n\n  function renderAccounts() {\n    const list = hardwareWallets ?? [];\n    const fullClassName = buildClassName(\n      styles.accounts,\n      list.length === 1 && styles.accounts_two,\n      'custom-scroll',\n    );\n\n    return (\n      <div className={fullClassName}>\n        {list.map(\n          ({ address, balance, index }) => renderAccount(\n            address,\n            balance,\n            index,\n            alreadyConnectedList.includes(address),\n          ),\n        )}\n        {renderAddAccount()}\n      </div>\n    );\n  }\n\n  const areAccountsSelected = !selectedAccountIndices.length;\n  const title = selectedAccountIndices.length\n    ? lang('%1$d Selected', selectedAccountIndices.length) as string\n    : lang('Select Ledger Wallets');\n\n  return (\n    <>\n      {!isStatic ? (\n        <ModalHeader\n          title={title}\n          onBackButtonClick={onBackButtonClick}\n          onClose={!onBackButtonClick ? onClose : undefined}\n        />\n      ) : (\n        <div className={settingsStyles.header}>\n          <Button isSimple isText onClick={onClose} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{title}</span>\n        </div>\n      )}\n      <div className={buildClassName(\n        styles.container, isStatic && styles.containerStatic, isStatic && 'static-container',\n      )}\n      >\n        {renderAccounts()}\n        <div className={styles.actionBlock}>\n          <Button\n            className={styles.button}\n            onClick={shouldCloseOnCancel ? onClose : onCancel}\n          >\n            {lang(shouldCloseOnCancel ? 'Cancel' : 'Back')}\n          </Button>\n          <Button\n            isPrimary\n            isDisabled={areAccountsSelected}\n            onClick={handleAddLedgerWallets}\n            className={styles.button}\n          >\n            {lang('Add')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(LedgerSelectWallets);\n","import React, {\n  memo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\n\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport LedgerConnect from './LedgerConnect';\nimport LedgerSelectWallets from './LedgerSelectWallets';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './LedgerModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  noBackdropClose?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  areSettingsOpen?: boolean;\n};\n\nenum LedgerModalState {\n  Password,\n  Connect,\n  SelectWallets,\n}\n\nfunction LedgerModal({\n  isOpen,\n  noBackdropClose,\n  onClose,\n  hardwareWallets,\n  accounts,\n  areSettingsOpen,\n}: OwnProps & StateProps) {\n  const { afterSelectHardwareWallets } = getActions();\n\n  const [currentSlide, setCurrentSlide] = useState<LedgerModalState>(\n    LedgerModalState.Connect,\n  );\n  const [nextKey] = useState<LedgerModalState | undefined>(\n    LedgerModalState.SelectWallets,\n  );\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    onClose();\n  });\n\n  const handleConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setCurrentSlide(LedgerModalState.SelectWallets);\n  });\n\n  const handleLedgerModalClose = useLastCallback(() => {\n    setCurrentSlide(LedgerModalState.Connect);\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: LedgerModalState) {\n    switch (currentKey) {\n      case LedgerModalState.Connect:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleConnected}\n            onClose={onClose}\n          />\n        );\n      case LedgerModalState.SelectWallets:\n        return (\n          <LedgerSelectWallets\n            isActive={isActive}\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      onClose={onClose}\n      onCloseAnimationEnd={handleLedgerModalClose}\n      dialogClassName={buildClassName(styles.modalDialog, areSettingsOpen && styles.modalDialogInsideSettings)}\n      noBackdropClose={noBackdropClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n\n  const { hardwareWallets } = global.hardware;\n\n  return {\n    accounts,\n    hardwareWallets,\n    areSettingsOpen: global.areSettingsOpen,\n  };\n})(LedgerModal));\n","import type { ElementRef } from '../lib/teact/teact';\nimport { useEffect, useState } from '../lib/teact/teact';\n\ninterface OwnProps {\n  rootMargin: string;\n  threshold?: number[];\n  isDisabled?: boolean;\n  targetRef: ElementRef<HTMLDivElement | undefined>;\n  cb?: (entry: IntersectionObserverEntry) => void;\n}\n\nexport default function useElementVisibility(options: OwnProps) {\n  const {\n    rootMargin,\n    threshold = [0],\n    isDisabled,\n    targetRef,\n    cb,\n  } = options;\n\n  const [isVisible, setIsVisible] = useState(true);\n\n  useEffect(() => {\n    if (isDisabled || !targetRef.current) return undefined;\n\n    const observer = new IntersectionObserver((entries) => {\n      const entry = entries[0];\n\n      setIsVisible(entry.isIntersecting);\n      cb?.(entry);\n    }, {\n      rootMargin,\n      threshold,\n    });\n\n    observer.observe(targetRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [rootMargin, threshold, isDisabled, targetRef, cb]);\n\n  return { isVisible };\n}\n","import { useEffect } from '../lib/teact/teact';\n\nimport { stopEvent } from '../util/domEvents';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\n\nconst metaViewport = document.querySelector('meta[name=\"viewport\"]');\nconst defaultViewportContent = metaViewport?.getAttribute('content') || '';\nconst allowedZoomViewportContent = 'width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover';\n\nexport default function usePreventPinchZoomGesture(isDisabled = false) {\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    if (isDisabled) {\n      // Clean viewport content from values that disable the ability to zoom a webpage\n      // https://web.dev/meta-viewport/\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      return undefined;\n    }\n\n    metaViewport?.setAttribute('content', defaultViewportContent);\n\n    // Since iOS 10 `user-scaleable=no` is disabled in Safari for iOS,\n    // this is only applicable for the browser and does not apply to the PWA mode.\n    // https://newbedev.com/how-do-you-disable-viewport-zooming-on-mobile-safari\n    if (IS_IOS && !IS_PWA) {\n      document.addEventListener('gesturestart', stopEvent);\n    }\n\n    return () => {\n      metaViewport?.setAttribute('content', allowedZoomViewportContent);\n      if (IS_IOS && !IS_PWA) {\n        document.removeEventListener('gesturestart', stopEvent);\n      }\n    };\n  }, [isDisabled]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"o0ZmVyIN\",\"purple\":\"DJCb7ytz\",\"tokenIcon\":\"O2XO33Bj\",\"chainIcon\":\"UKA4ZfVj\",\"green\":\"IHTEYaZx\",\"twoIcons\":\"UD000onR\",\"nftIcon\":\"kRGDvyHS\",\"stacked\":\"gdAuuzmF\",\"image\":\"Q3m3aAJ1\",\"text\":\"LrHNEZly\",\"bold\":\"GQC2YXcS\",\"nftTitle\":\"BAWd380W\",\"address\":\"gWbbue48\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport { useMemo } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset, ApiToken } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { unique } from '../../util/iteratees';\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\n\nimport useLang from '../../hooks/useLang';\n\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TransactionBanner.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  imageUrl?: string | string[];\n  text?: string | TeactNode[];\n  withChainIcon?: boolean;\n  tokenOut?: UserToken | UserSwapToken | ApiSwapAsset | ApiToken;\n  secondText?: string;\n  color?: 'purple' | 'green';\n  className?: string;\n}\n\nfunction TransactionBanner({\n  tokenIn,\n  imageUrl,\n  text,\n  withChainIcon,\n  tokenOut,\n  secondText,\n  color,\n  className,\n}: OwnProps) {\n  const lang = useLang();\n\n  const fullClassName = buildClassName(\n    styles.root,\n    color && styles[color],\n    tokenOut && styles.twoIcons,\n    className,\n  );\n\n  const isNftTransaction = !!imageUrl;\n\n  const imageUrls = useMemo(() => {\n    return unique(Array.isArray(imageUrl) ? imageUrl : [imageUrl]);\n  }, [imageUrl]);\n\n  function renderNftIcon() {\n    return (\n      <div className={buildClassName(styles.nftIcon, Array.isArray(imageUrl) && imageUrl.length > 1 && styles.stacked)}>\n        {imageUrls.map((image) => (\n          <img src={image} alt=\"\" key={image} className={styles.image} />\n        ))}\n        {withChainIcon && tokenIn?.chain && (\n          <img\n            src={getChainNetworkIcon(tokenIn.chain)}\n            alt=\"\"\n            className={styles.chainIcon}\n            draggable={false}\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={fullClassName}>\n      {tokenIn && !isNftTransaction && (\n        <TokenIcon\n          token={tokenIn}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n      {isNftTransaction && renderNftIcon()}\n      <span className={styles.text}>\n        {secondText\n          ? text\n            ? (\n              lang('%amount% to %address%', {\n                amount: (\n                  <span className={buildClassName(styles.bold, isNftTransaction && styles.nftTitle)}>\n                    {text}\n                  </span>\n                ),\n                address: <span className={buildClassName(styles.bold, styles.address)}>{secondText}</span>,\n              })\n            )\n            : lang('$transaction_to', { address: <span className={styles.bold}>{secondText}</span> })\n          : <span className={styles.bold}>{text}</span>}\n      </span>\n      {tokenOut && (\n        <TokenIcon\n          token={tokenOut}\n          withChainIcon={withChainIcon}\n          size=\"small\"\n          className={styles.tokenIcon}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(TransactionBanner);\n","import { BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\n\nimport { IS_CAPACITOR } from '../config';\nimport { getIsMobileTelegramApp } from '../util/windowEnvironment';\nimport useEffectOnce from './useEffectOnce';\nimport useForceUpdate from './useForceUpdate';\n\nlet isQrScannerSupported = getIsMobileTelegramApp();\n\nexport default function useQrScannerSupport() {\n  const forceUpdate = useForceUpdate();\n\n  useEffectOnce(() => {\n    if (!IS_CAPACITOR || isQrScannerSupported) return;\n\n    void BarcodeScanner\n      .isSupported()\n      .then((result) => {\n        isQrScannerSupported = result.supported;\n        forceUpdate();\n      });\n  });\n\n  return isQrScannerSupported;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"NvbEOoOC\",\"help\":\"LugNLsCQ\",\"label\":\"erx70q4_\",\"balanceError\":\"Jag9KEHr\",\"description\":\"s8vGyddw\",\"addressWidget\":\"fVQ8S1pD\",\"inputReadOnly\":\"Pne6FnQc\",\"inputReadOnly_words\":\"NH87E1kW\",\"inputReadOnlyWords\":\"NH87E1kW\",\"currencySymbol\":\"aNzt5kkC\",\"commentInputWrapper\":\"eBKrZtom\",\"sticker\":\"ZDG5rllO\",\"sticker_sizeSmall\":\"ol7Kgi48\",\"stickerSizeSmall\":\"ol7Kgi48\",\"buttonLoading\":\"PYuzODzS\",\"buttonText\":\"Cso7xEQu\",\"button-loading-spinner\":\"Kx52LskK\",\"buttonLoadingSpinner\":\"Kx52LskK\",\"savedAddressBubble\":\"keyC_8Hs\",\"savedAddressItem\":\"WI13wV5I\",\"savedAddressName\":\"ZEsl45OR\",\"savedAddressNameText\":\"HLnOPUyB\",\"iconLedger\":\"bdYXzf2H\",\"savedAddressAddress\":\"sDGTQ4jr\",\"savedAddressDelete\":\"ozjjQpYQ\",\"savedAddressDeleteInner\":\"UWDrZutz\",\"savedAddressDeleteIcon\":\"rO6SGoH9\",\"chainIcon\":\"g2vfXFiv\",\"inputStatic\":\"RJsBtjCe\",\"inputWithIcon\":\"uMO1BRcS\",\"footer\":\"yVExFE73\",\"footer_shifted\":\"NGWUkuR3\",\"footerShifted\":\"NGWUkuR3\",\"buttons\":\"oMCN3Z8P\",\"button\":\"U6ZAbMe2\",\"warningTooltipContainer\":\"lcmy9IMt\",\"transactionBanner\":\"Pxmu6Hot\",\"infoBox\":\"vKJsXVsk\",\"burnWarning\":\"CWZdgy5e\",\"error\":\"pUMdj3j5\",\"spinner\":\"gigiDFmZ\",\"formSlide\":\"TEJfM3gl\",\"formSlide_static\":\"mfCYg0_s\",\"formSlideStatic\":\"mfCYg0_s\"};","import type { MouseEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiChain } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport styles from '../transfer/Transfer.module.scss';\n\ninterface OwnProps {\n  address: string;\n  name?: string;\n  chain?: ApiChain;\n  isHardware?: boolean;\n  isSavedAddress?: boolean;\n  deleteLabel?: string;\n  onClick: (address: string) => void;\n  onDeleteClick?: (address: string) => void;\n}\n\nfunction AddressBookItem({\n  address,\n  name,\n  chain,\n  isHardware,\n  isSavedAddress,\n  deleteLabel,\n  onClick,\n  onDeleteClick,\n}: OwnProps) {\n  const handleClick = () => {\n    onClick(address);\n  };\n\n  const handleDeleteClick = (e: MouseEvent) => {\n    stopEvent(e);\n\n    onDeleteClick!(address);\n  };\n\n  return (\n    <div\n      tabIndex={-1}\n      role=\"button\"\n      onMouseDown={IS_TOUCH_ENV ? undefined : handleClick}\n      onClick={IS_TOUCH_ENV ? handleClick : undefined}\n      className={styles.savedAddressItem}\n    >\n      <span className={styles.savedAddressName}>\n        <span className={styles.savedAddressNameText}>\n          {name || shortenAddress(address)}\n        </span>\n        {isHardware && <i className={buildClassName(styles.iconLedger, 'icon-ledger')} aria-hidden />}\n      </span>\n      {isSavedAddress && onDeleteClick && (\n        <span className={styles.savedAddressDelete}>\n          <span\n            tabIndex={-1}\n            role=\"button\"\n            className={styles.savedAddressDeleteInner}\n            onMouseDown={handleDeleteClick}\n          >\n            {deleteLabel}\n          </span>\n        </span>\n      )}\n      {name && (\n        <span className={styles.savedAddressAddress}>\n          {chain && <i className={buildClassName(styles.chainIcon, `icon-chain-${chain}`)} aria-hidden />}\n          {shortenAddress(address)}\n        </span>\n      )}\n      {isSavedAddress && onDeleteClick && (\n        <span\n          className={styles.savedAddressDeleteIcon}\n          role=\"button\"\n          tabIndex={-1}\n          onMouseDown={handleDeleteClick}\n          onClick={stopEvent}\n          aria-label={deleteLabel}\n        >\n          <i className=\"icon-trash\" aria-hidden />\n        </span>\n      )}\n    </div>\n  );\n}\n\nexport default memo(AddressBookItem);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account, SavedAddress } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentAccountState, selectIsMultichainAccount, selectNetworkAccounts } from '../../global/selectors';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport AddressBookItem from './AddressBookItem';\nimport Menu from './Menu';\n\nimport styles from '../transfer/Transfer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  currentChain?: ApiChain;\n  currentAddress?: string;\n  otherAccountIds?: string[];\n  onClose: NoneToVoidFunction;\n  onAddressSelect: (address: string) => void;\n  onSavedAddressDelete: (address: string) => void;\n}\n\ninterface StateProps {\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  isMultichainAccount?: boolean;\n}\n\nfunction AddressBook({\n  isOpen, currentChain, currentAddress = '', otherAccountIds,\n  accounts, savedAddresses, isMultichainAccount,\n  onAddressSelect, onSavedAddressDelete, onClose,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const renderedSavedAddresses = useMemo(() => {\n    if (!savedAddresses || savedAddresses.length === 0) {\n      return undefined;\n    }\n\n    return savedAddresses\n      .filter((item) => {\n        return (!currentChain || item.chain === currentChain) && doesSavedAddressFitSearch(item, currentAddress);\n      })\n      .map((item) => (\n        <AddressBookItem\n          key={`saved-${item.address}-${item.chain}`}\n          address={item.address}\n          name={item.name}\n          chain={isMultichainAccount ? item.chain : undefined}\n          deleteLabel={lang('Delete')}\n          isSavedAddress\n          onClick={onAddressSelect}\n          onDeleteClick={onSavedAddressDelete}\n        />\n      ));\n  }, [currentAddress, isMultichainAccount, currentChain, lang, onAddressSelect, onSavedAddressDelete, savedAddresses]);\n\n  const renderedOtherAccounts = useMemo(() => {\n    if (!otherAccountIds || otherAccountIds.length === 0) return undefined;\n\n    const addressesToBeIgnored = savedAddresses?.map((item) => `${item.chain}:${item.address}`) ?? [];\n    const uniqueAddresses = new Set<string>();\n    const otherAccounts = otherAccountIds\n      .reduce((acc, accountId) => {\n        const account = accounts![accountId];\n\n        Object.keys(account.addressByChain).forEach((addressChain) => {\n          const address = account.addressByChain[addressChain as ApiChain];\n          const key = `${addressChain}:${address}`;\n          if (\n            address\n            && !uniqueAddresses.has(key)\n            && (!currentChain || addressChain === currentChain)\n            && (isMultichainAccount || addressChain === TONCOIN.chain)\n            && !addressesToBeIgnored.includes(`${addressChain}:${address}`)\n          ) {\n            uniqueAddresses.add(key);\n            acc.push({\n              name: account.title || shortenAddress(address)!,\n              address,\n              chain: addressChain as ApiChain,\n              isHardware: account.type === 'hardware',\n            });\n          }\n        });\n\n        return acc;\n      }, [] as (SavedAddress & { isHardware?: boolean })[]);\n\n    return otherAccounts.filter(\n      (item) => doesSavedAddressFitSearch(item, currentAddress),\n    ).map(({\n      address, name, chain: addressChain, isHardware,\n    }) => (\n      <AddressBookItem\n        key={`address-${address}-${addressChain}`}\n        address={address}\n        name={name}\n        chain={isMultichainAccount ? addressChain : undefined}\n        isHardware={isHardware}\n        onClick={onAddressSelect}\n      />\n    ));\n  }, [otherAccountIds, savedAddresses, accounts, currentChain, isMultichainAccount, currentAddress, onAddressSelect]);\n\n  const shouldRender = Boolean(renderedOtherAccounts?.length || renderedSavedAddresses?.length);\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <Menu\n      positionX=\"right\"\n      type=\"suggestion\"\n      noBackdrop\n      bubbleClassName={styles.savedAddressBubble}\n      isOpen={isOpen}\n      onClose={onClose}\n    >\n      {renderedSavedAddresses}\n      {renderedOtherAccounts}\n    </Menu>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    savedAddresses: accountState?.savedAddresses,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    accounts: selectNetworkAccounts(global),\n  };\n})(AddressBook));\n\nfunction doesSavedAddressFitSearch(savedAddress: SavedAddress, search: string) {\n  const searchQuery = search.toLowerCase();\n  const { address, name } = savedAddress;\n\n  return (\n    address.toLowerCase().startsWith(searchQuery)\n    || address.toLowerCase().endsWith(searchQuery)\n    || name.toLowerCase().split(/\\s+/).some((part) => part.startsWith(searchQuery))\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"inputButtonWrapper\":\"L_5kIPIy\",\"inputButtonWrapperWithFocus\":\"BJFtkvaJ\",\"inputButton\":\"vnQc1YiQ\",\"inputButtonClear\":\"tl4TUzu3\",\"inputButtonTransition\":\"ayhHYxLn\",\"addressName\":\"S1nUS2km\",\"addressValue\":\"DdHkCftA\",\"addressValueSingle\":\"m2Fe0uv6\",\"inputStatic\":\"Nrn6AoJg\",\"inputWithIcon\":\"K9Nd_zOE\"};","import React, {\n  type ElementRef,\n  memo,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account, SavedAddress } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { isDnsDomain } from '../../util/dns';\nimport { getLocalAddressName } from '../../util/getLocalAddressName';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport {\n  getIsMobileTelegramApp,\n  IS_ANDROID,\n  IS_CLIPBOARDS_SUPPORTED,\n  IS_IOS,\n} from '../../util/windowEnvironment';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport DeleteSavedAddressModal from '../main/modals/DeleteSavedAddressModal';\nimport AddressBook from './AddressBook';\nimport Button from './Button';\nimport Input from './Input';\nimport Transition from './Transition';\n\nimport styles from './AddressInput.module.scss';\n\nexport const INPUT_CLEAR_BUTTON_ID = 'input-clear-button';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLInputElement | HTMLTextAreaElement>;\n  label: string;\n  value: string;\n  chain?: ApiChain;\n  isStatic?: boolean;\n  withQrScan?: boolean;\n  address: string;\n  addressName: string;\n  addressBookChain?: ApiChain;\n  accounts?: Record<string, Account>;\n  currentAccountId: string;\n  savedAddresses?: SavedAddress[];\n  validateAddress?: ({ address }: { address?: string }) => void;\n  error?: string;\n  onInput: (value: string, isValueReplaced?: boolean) => void;\n  onClose: NoneToVoidFunction;\n}\n\nconst SHORT_ADDRESS_SHIFT = 4;\nconst SHORT_SINGLE_ADDRESS_SHIFT = 11;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_SINGLE_ADDRESS_SHIFT * 2;\nconst SAVED_ADDRESS_OPEN_DELAY = 300;\n\nfunction AddressInput({\n  ref,\n  label,\n  value,\n  chain,\n  isStatic,\n  withQrScan,\n  address,\n  addressName,\n  addressBookChain,\n  accounts,\n  currentAccountId,\n  savedAddresses,\n  validateAddress,\n  error,\n  onInput,\n  onClose,\n}: OwnProps) {\n  const {\n    showNotification,\n    requestOpenQrScanner,\n  } = getActions();\n\n  const lang = useLang();\n\n  const addressBookTimeoutRef = useRef<number>();\n\n  const [addressForDeletion, setAddressForDeletion] = useState<string | undefined>();\n  const [chainForDeletion, setChainForDeletion] = useState<ApiChain | undefined>();\n  const [isAddressBookOpen, openAddressBook, closeAddressBook] = useFlag();\n  const [isFocused, markFocused, unmarkFocused] = useFlag();\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const isQrScannerSupported = useQrScannerSupport();\n  const inputId = useUniqueId('address-');\n\n  const isAddressValid = chain ? isValidAddressOrDomain(value, chain) : undefined;\n  const hasAddressError = value.length > 0 && !isAddressValid;\n  const localError = hasAddressError ? lang('Incorrect address') : undefined;\n\n  const addressBookAccountIds = useMemo(() => {\n    return accounts ? Object.keys(accounts).filter((accountId) => accountId !== currentAccountId) : [];\n  }, [currentAccountId, accounts]);\n  const shouldUseAddressBook = useMemo(() => {\n    return addressBookAccountIds.length > 0 || (savedAddresses && savedAddresses.length > 0);\n  }, [addressBookAccountIds.length, savedAddresses]);\n\n  const localAddressName = useMemo(() => {\n    return chain && value ? getLocalAddressName({\n      address: value,\n      chain,\n      currentAccountId,\n      savedAddresses,\n      accounts: accounts!,\n    }) : undefined;\n  }, [accounts, chain, currentAccountId, savedAddresses, value]);\n\n  const withPasteButton = shouldRenderPasteButton && !value;\n  const withQrButton = withQrScan && isQrScannerSupported;\n  const withButton = withQrButton || withPasteButton || !!value.length;\n\n  useEffectOnce(() => {\n    return () => {\n      if (addressBookTimeoutRef.current) {\n        window.clearTimeout(addressBookTimeoutRef.current);\n      }\n    };\n  });\n\n  const addressOverlay = useMemo(() => {\n    if (!address) return undefined;\n    const renderedAddressName = localAddressName || addressName;\n\n    const addressShort = !renderedAddressName && address.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n      ? shortenAddress(address, SHORT_SINGLE_ADDRESS_SHIFT) || ''\n      : address;\n\n    return (\n      <>\n        {renderedAddressName && <span className={styles.addressName}>{renderedAddressName}</span>}\n        <span className={buildClassName(styles.addressValue, !renderedAddressName && styles.addressValueSingle)}>\n          {renderedAddressName ? shortenAddress(address, SHORT_ADDRESS_SHIFT) : addressShort}\n        </span>\n      </>\n    );\n  }, [address, localAddressName, addressName]);\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        const newValue = text.trim();\n        onInput(newValue, true);\n\n        handleAddressCheck(newValue);\n      }\n    } catch (err: any) {\n      showNotification({ message: lang('Error reading clipboard') });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n    onClose();\n  });\n\n  const handleAddressCheck = useLastCallback((address?: string) => {\n    if (!validateAddress) return;\n\n    if ((address && chain && isValidAddressOrDomain(address, chain)) || !address) {\n      validateAddress({ address });\n    }\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    markFocused();\n\n    if (shouldUseAddressBook) {\n      // Simultaneous opening of the virtual keyboard and display of Saved Addresses causes animation degradation\n      if (IS_ANDROID) {\n        addressBookTimeoutRef.current = window.setTimeout(openAddressBook, SAVED_ADDRESS_OPEN_DELAY);\n      } else {\n        openAddressBook();\n      }\n    }\n  });\n\n  const handleAddressBlur = useLastCallback((e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    unmarkFocused();\n\n    if (e.relatedTarget?.id === INPUT_CLEAR_BUTTON_ID) {\n      handleAddressBookClose();\n      handleAddressCheck(value);\n\n      return;\n    }\n\n    let addressToCheck = value;\n    if (isDnsDomain(value) && value !== value.toLowerCase()) {\n      addressToCheck = value.toLowerCase().trim();\n      onInput(addressToCheck);\n    } else if (value !== value.trim()) {\n      addressToCheck = value.trim();\n      onInput(addressToCheck);\n    }\n\n    requestAnimationFrame(() => {\n      handleAddressBookClose();\n      handleAddressCheck(addressToCheck);\n    });\n  });\n\n  const handleAddressClear = useLastCallback(() => {\n    onInput('');\n    handleAddressCheck();\n  });\n\n  const handleAddressBookClose = useLastCallback(() => {\n    if (!shouldUseAddressBook || !isAddressBookOpen) return;\n\n    closeAddressBook();\n\n    if (addressBookTimeoutRef.current) {\n      window.clearTimeout(addressBookTimeoutRef.current);\n    }\n  });\n\n  const handleDeleteSavedAddressClick = useLastCallback((address: string) => {\n    setAddressForDeletion(address);\n    setChainForDeletion(chain);\n    closeAddressBook();\n  });\n\n  const handleDeleteSavedAddressModalClose = useLastCallback(() => {\n    setAddressForDeletion(undefined);\n    setChainForDeletion(undefined);\n  });\n\n  const handleAddressBookItemSelect = useLastCallback((address: string) => {\n    onInput(address, true);\n    closeAddressBook();\n  });\n\n  function renderInputActions() {\n    const wrapperClassName = buildClassName(\n      styles.inputButtonWrapper,\n      isFocused && styles.inputButtonWrapperWithFocus,\n    );\n\n    return (\n      <Transition className={styles.inputButtonTransition} activeKey={value.length ? 0 : 1} name=\"fade\">\n        {value.length ? (\n          <div className={wrapperClassName}>\n            <Button\n              isSimple\n              id={INPUT_CLEAR_BUTTON_ID}\n              className={buildClassName(styles.inputButton, styles.inputButtonClear)}\n              onClick={handleAddressClear}\n              ariaLabel={lang('Clear')}\n            >\n              <i className=\"icon-close-filled\" aria-hidden />\n            </Button>\n          </div>\n        ) : (\n          <div className={wrapperClassName}>\n            {withQrButton && (\n              <Button\n                isSimple\n                className={styles.inputButton}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </div>\n        )}\n      </Transition>\n    );\n  }\n\n  return (\n    <>\n      <Input\n        id={inputId}\n        ref={ref}\n        className={buildClassName(isStatic && styles.inputStatic, withButton && styles.inputWithIcon)}\n        isRequired\n        isStatic={isStatic}\n        label={label}\n        placeholder={lang('Wallet address or domain')}\n        value={value}\n        error={localError || error}\n        autoCorrect={false}\n        valueOverlay={!localError ? addressOverlay : undefined}\n        onInput={onInput}\n        onFocus={handleAddressFocus}\n        onBlur={handleAddressBlur}\n      >\n        {renderInputActions()}\n      </Input>\n      {shouldUseAddressBook && (\n        <>\n          <AddressBook\n            isOpen={isAddressBookOpen}\n            currentChain={addressBookChain}\n            currentAddress={value}\n            otherAccountIds={addressBookAccountIds}\n            onAddressSelect={handleAddressBookItemSelect}\n            onSavedAddressDelete={handleDeleteSavedAddressClick}\n            onClose={closeAddressBook}\n          />\n          <DeleteSavedAddressModal\n            isOpen={Boolean(addressForDeletion)}\n            address={addressForDeletion}\n            chain={chainForDeletion}\n            onClose={handleDeleteSavedAddressModalClose}\n          />\n        </>\n      )}\n    </>\n  );\n}\n\nexport default memo(AddressInput);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"gRT6bZt3\",\"modalTitle\":\"cmL5TjIH\",\"headerTitle\":\"NtG0ddPE\",\"headerDate\":\"u4jvqiGf\",\"sticker\":\"BrPVwQU4\",\"transactionBanner\":\"Ps7kqvix\",\"nftContainer\":\"Dnc6lzH5\",\"multiNftChips\":\"p6JeJnTy\",\"footer\":\"W2G5uyVG\",\"button\":\"hdNHgPt2\",\"buttons\":\"jQftqhh0\",\"buttonsAfterNft\":\"uM1QBU1t\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { Account, GlobalState, SavedAddress } from '../../global/types';\nimport { DomainLinkingState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectCurrentToncoinBalance,\n  selectNetworkAccounts,\n  selectTonDnsLinkedAddress,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useSyncEffectWithPrevDeps from '../../hooks/useSyncEffectWithPrevDeps';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport NftInfo from '../transfer/NftInfo';\nimport AddressInput from '../ui/AddressInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './RenewDomainModal.module.scss';\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n  currentDomainLinking: GlobalState['currentDomainLinking'];\n  byAddress?: Record<string, ApiNft>;\n  tonBalance: bigint;\n  savedAddresses?: SavedAddress[];\n  accounts?: Record<string, Account>;\n  currentTonAddress?: string;\n  currentLinkedWalletAddress?: string;\n}\n\nconst FULL_NATIVE_STATES = new Set([\n  DomainLinkingState.Password,\n  DomainLinkingState.ConnectHardware,\n  DomainLinkingState.ConfirmHardware,\n]);\n\nfunction LinkingDomainModal({\n  currentDomainLinking: {\n    address,\n    state,\n    error,\n    isLoading,\n    realFee,\n    walletAddress = '',\n    walletAddressName = '',\n    resolvedWalletAddress,\n    txId,\n  },\n  isMediaViewerOpen,\n  byAddress,\n  tonBalance,\n  accounts,\n  savedAddresses,\n  currentTonAddress,\n  currentLinkedWalletAddress,\n}: StateProps) {\n  const {\n    startDomainLinking,\n    cancelDomainLinking,\n    clearDomainLinkingError,\n    submitDomainLinking,\n    submitDomainLinkingHardware,\n    checkDomainLinkingDraft,\n    checkLinkingAddress,\n    setDomainLinkingWalletAddress,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOpen = state !== DomainLinkingState.None && !isMediaViewerOpen;\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n  const domainNft = address ? byAddress?.[address] : undefined;\n  const isInsufficientBalance = realFee ? tonBalance < realFee : undefined;\n  const forceFullNative = FULL_NATIVE_STATES.has(renderingKey);\n  const feeTerms = useMemo(() => (realFee ? { native: realFee } : undefined), [realFee]);\n  const modalTitle = currentLinkedWalletAddress ? 'Change Linked Wallet' : 'Link to Wallet';\n  const isAddressValid = isValidAddressOrDomain(walletAddress, 'ton');\n\n  const handleWalletAddressInput = useLastCallback((newToAddress?: string) => {\n    setDomainLinkingWalletAddress({ address: newToAddress });\n  });\n\n  const canSubmit = isAddressValid && walletAddress !== currentLinkedWalletAddress\n    && !isInsufficientBalance && !isLoading;\n\n  useSyncEffectWithPrevDeps(([prevIsOpen]) => {\n    if (!prevIsOpen && isOpen) {\n      handleWalletAddressInput(walletAddress || currentLinkedWalletAddress || currentTonAddress);\n    }\n  }, [isOpen, currentLinkedWalletAddress, walletAddress, currentTonAddress]);\n\n  useEffect(() => {\n    if (isOpen) {\n      checkDomainLinkingDraft({ nft: domainNft! });\n    }\n  }, [domainNft, isOpen]);\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    if (canSubmit) {\n      submitDomainLinking({ password });\n    }\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (canSubmit) {\n      submitDomainLinkingHardware();\n    }\n  });\n\n  const handleInfoClick = useLastCallback(() => {\n    cancelDomainLinking();\n    showActivityInfo({ id: txId! });\n  });\n\n  function renderInitialContent() {\n    return (\n      <>\n        <ModalHeader title={lang(modalTitle)} onClose={cancelDomainLinking} />\n\n        <div className={modalStyles.transitionContent}>\n          <div className={styles.nftContainer}>\n            <NftInfo nft={domainNft} withMediaViewer />\n\n            <AddressInput\n              withQrScan\n              value={walletAddress}\n              // It is necessary to allow linking of current wallet address to the domain, so pass an empty string\n              currentAccountId=\"\"\n              // Domain linking is available only for TON blockchain\n              addressBookChain=\"ton\"\n              chain=\"ton\"\n              accounts={accounts}\n              savedAddresses={savedAddresses}\n              validateAddress={checkLinkingAddress}\n              label={currentLinkedWalletAddress ? lang('Linked Wallet') : lang('Wallet')}\n              address={resolvedWalletAddress || walletAddress}\n              addressName={walletAddressName}\n              onInput={handleWalletAddressInput}\n              onClose={cancelDomainLinking}\n            />\n          </div>\n\n          <FeeLine terms={feeTerms} token={TONCOIN} precision=\"exact\" />\n          <div className={buildClassName(modalStyles.buttons, styles.footer)}>\n            <Button\n              isPrimary\n              isDestructive={isInsufficientBalance}\n              isDisabled={!canSubmit}\n              isLoading={!realFee || isLoading}\n              className={styles.button}\n              onClick={startDomainLinking}\n            >\n              {isInsufficientBalance\n                ? lang('Insufficient Balance')\n                : lang('Link')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Linking')} onClose={cancelDomainLinking} />}\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={cancelDomainLinking}\n          onUpdate={clearDomainLinkingError}\n          skipAuthScreen\n        >\n          <TransactionBanner\n            imageUrl={domainNft?.thumbnail}\n            text={domainNft?.name ?? '1 domain'}\n            className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Domain has been linked!')} onClose={cancelDomainLinking} />\n\n        <div className={modalStyles.transitionContent}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <NftInfo nft={domainNft} withMediaViewer />\n          {!!txId && (\n            <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n              <Button onClick={handleInfoClick}>{lang('Details')}</Button>\n            </div>\n          )}\n\n          <div className={modalStyles.buttons}>\n            <Button className={styles.button} onClick={cancelDomainLinking} isPrimary>\n              {lang('Close')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DomainLinkingState) {\n    switch (currentKey) {\n      case DomainLinkingState.Initial:\n        return renderInitialContent();\n\n      case DomainLinkingState.Password:\n        return renderPasswordForm(isActive);\n\n      case DomainLinkingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelDomainLinking}\n          />\n        );\n\n      case DomainLinkingState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelDomainLinking}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case DomainLinkingState.Complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"link-domain\"\n      forceFullNative={forceFullNative}\n      dialogClassName={styles.modalDialog}\n      onClose={cancelDomainLinking}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const {\n      currentDomainLinking,\n      mediaViewer: { mediaId },\n    } = global;\n    const currentAccount = selectCurrentAccount(global);\n    const accountState = selectCurrentAccountState(global);\n    const { byAddress } = accountState?.nfts || {};\n    const domainNft = currentDomainLinking.address ? byAddress?.[currentDomainLinking.address] : undefined;\n    const currentLinkedWalletAddress = domainNft ? selectTonDnsLinkedAddress(global, domainNft) : '';\n\n    return {\n      isMediaViewerOpen: Boolean(mediaId),\n      currentDomainLinking,\n      byAddress,\n      tonBalance: selectCurrentToncoinBalance(global),\n      accounts: selectNetworkAccounts(global),\n      savedAddresses: accountState?.savedAddresses,\n      currentLinkedWalletAddress,\n      currentTonAddress: currentAccount?.addressByChain.ton,\n    };\n  })(LinkingDomainModal),\n);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { NftTransfer } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\n\nimport styles from './NftChips.module.scss';\n\ninterface OwnProps {\n  nfts: NftTransfer[];\n  isStatic?: boolean;\n  className?: string;\n}\n\nconst LIMIT = 10;\n\nfunction NftChips({ nfts, isStatic, className }: OwnProps) {\n  const lang = useLang();\n  const [isCollapsed, , expand] = useFlag(true);\n  const shouldRenderExpander = isCollapsed && nfts.length > LIMIT + 1;\n  const renderedNfts = useMemo(\n    () => (shouldRenderExpander ? nfts.slice(0, LIMIT) : nfts),\n    [shouldRenderExpander, nfts],\n  );\n\n  function renderNft(nft: NftTransfer) {\n    return (\n      <div key={nft.address} className={styles.nft}>\n        <img src={nft.thumbnail} alt={nft.name} className={styles.image} />\n        <span className={styles.name}>{nft.name || nft.address}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, isStatic && styles.static, 'custom-scroll', className)}>\n      {renderedNfts.map(renderNft)}\n      {shouldRenderExpander && (\n        <button type=\"button\" className={styles.expander} onClick={() => expand()}>\n          +{lang('%amount% NFTs', { amount: nfts.length - LIMIT })}\n        </button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(NftChips);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OW45fd9i\",\"static\":\"h6wiRr_r\",\"nft\":\"HmnTdlh8\",\"image\":\"H3EA9Tak\",\"name\":\"_gZbYTeY\",\"expander\":\"T7bQHi3K\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { DomainRenewalState } from '../../global/types';\n\nimport { TONCOIN } from '../../config';\nimport { selectCurrentAccountState, selectCurrentToncoinBalance } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime, MINUTE, YEAR } from '../../util/dateFormat';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport NftChips from '../transfer/NftChips';\nimport NftInfo from '../transfer/NftInfo';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './RenewDomainModal.module.scss';\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n  currentDomainRenewal: GlobalState['currentDomainRenewal'];\n  byAddress?: Record<string, ApiNft>;\n  tonBalance: bigint;\n}\n\nconst FULL_NATIVE_STATES = new Set([\n  DomainRenewalState.Password,\n  DomainRenewalState.ConnectHardware,\n  DomainRenewalState.ConfirmHardware,\n]);\n\nconst THUMBNAILS_COUNT = 3;\n\nfunction RenewDomainModal({\n  currentDomainRenewal: {\n    addresses,\n    state,\n    error,\n    isLoading,\n    realFee,\n    txId,\n  },\n  isMediaViewerOpen,\n  byAddress,\n  tonBalance,\n}: StateProps) {\n  const {\n    startDomainsRenewal,\n    cancelDomainsRenewal,\n    clearDomainsRenewalError,\n    submitDomainsRenewal,\n    submitDomainsRenewalHardware,\n    checkDomainsRenewalDraft,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n\n  const isOpen = state !== DomainRenewalState.None && !isMediaViewerOpen;\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n  const domainNfts = useMemo(() => {\n    return (addresses || []).map((address) => byAddress?.[address]).filter<ApiNft>(Boolean);\n  }, [addresses, byAddress]);\n  const isInsufficientBalance = realFee ? tonBalance < realFee : undefined;\n  const forceFullNative = FULL_NATIVE_STATES.has(renderingKey);\n  const feeTerms = useMemo(() => (realFee ? { native: realFee } : undefined), [realFee]);\n  const newExpireTimestamp = Date.now() + YEAR;\n  const domainNftThumbnails = useMemo(() => {\n    return domainNfts.map((nft) => nft?.thumbnail).filter(Boolean).slice(0, THUMBNAILS_COUNT);\n  }, [domainNfts]);\n\n  useInterval(forceUpdate, isOpen ? MINUTE : undefined, true);\n  useEffect(() => {\n    if (isOpen) {\n      checkDomainsRenewalDraft({ nfts: domainNfts });\n    }\n  }, [domainNfts, isOpen]);\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitDomainsRenewal({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    submitDomainsRenewalHardware();\n  });\n\n  const handleInfoClick = useLastCallback(() => {\n    cancelDomainsRenewal();\n    showActivityInfo({ id: txId! });\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(modalStyles.header, modalStyles.header_wideContent)}>\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {lang(addresses && addresses.length > 1 ? 'Renew Domains' : 'Renew Domain')}\n          </div>\n          {!!newExpireTimestamp && (\n            <div className={styles.headerDate}>\n              {lang('Until %date%', {\n                date: [formatFullDay(lang.code!, newExpireTimestamp), formatTime(newExpireTimestamp)].join(', '),\n              })}\n            </div>\n          )}\n        </div>\n        <Button isRound className={modalStyles.closeButton} ariaLabel={lang('Close')} onClick={cancelDomainsRenewal}>\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderInitialContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <div className={styles.nftContainer}>\n          {domainNfts.length === 1 && <NftInfo nft={domainNfts[0]} withMediaViewer />}\n          {domainNfts.length > 1 && <NftChips nfts={domainNfts} className={styles.multiNftChips} />}\n        </div>\n\n        <FeeLine terms={feeTerms} token={TONCOIN} precision=\"exact\" />\n        <div className={buildClassName(modalStyles.buttons, styles.footer)}>\n          <Button\n            isPrimary\n            isDestructive={isInsufficientBalance}\n            isDisabled={isInsufficientBalance}\n            isLoading={!realFee || isLoading}\n            className={styles.button}\n            onClick={startDomainsRenewal}\n          >\n            {isInsufficientBalance\n              ? lang('Insufficient Balance')\n              : domainNfts.length > 1\n                ? lang('Renew All')\n                : lang('Renew')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Renewing')} onClose={cancelDomainsRenewal} />}\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={cancelDomainsRenewal}\n          onUpdate={clearDomainsRenewalError}\n          skipAuthScreen\n        >\n          <TransactionBanner\n            imageUrl={domainNftThumbnails}\n            text={\n              domainNfts.length === 1 && Boolean(domainNfts[0]?.name)\n                ? domainNfts[0]?.name\n                : lang('$domains_amount %1$d', domainNfts.length, 'i')\n            }\n            className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={domainNfts.length > 1 ? lang('Domains have been renewed!') : lang('Domain has been renewed!')}\n          onClose={cancelDomainsRenewal}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.nftContainer}>\n            {domainNfts.length === 1 && <NftInfo nft={domainNfts[0]} withMediaViewer />}\n            {domainNfts.length > 1 && <NftChips nfts={domainNfts} />}\n\n            {domainNfts.length === 1 && !!txId && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button onClick={handleInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelDomainsRenewal} isPrimary>\n              {lang('Close')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: DomainRenewalState) {\n    switch (currentKey) {\n      case DomainRenewalState.Initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderInitialContent()}\n          </>\n        );\n\n      case DomainRenewalState.Password:\n        return renderPasswordForm(isActive);\n\n      case DomainRenewalState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelDomainsRenewal}\n          />\n        );\n\n      case DomainRenewalState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelDomainsRenewal}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case DomainRenewalState.Complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"renew-domain\"\n      forceFullNative={forceFullNative}\n      dialogClassName={styles.modalDialog}\n      onClose={cancelDomainsRenewal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const {\n      currentDomainRenewal,\n      mediaViewer: { mediaId },\n    } = global;\n    const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n\n    return {\n      isMediaViewerOpen: Boolean(mediaId),\n      currentDomainRenewal,\n      byAddress,\n      tonBalance: selectCurrentToncoinBalance(global),\n    };\n  })(RenewDomainModal),\n);\n","// https://github.com/toncenter/tonweb/blob/944455da2effaa307a2030d00e19a37e6e94897c/src/utils/index.js#L94-L109\nexport default function formatTransferUrl(address: string, amount?: bigint, text?: string, jettonAddress?: string) {\n  const url = `ton://transfer/${address}`;\n\n  const params = [];\n\n  if (amount) {\n    params.push(`amount=${amount}`);\n  }\n  if (text) {\n    params.push(`text=${encodeURIComponent(text)}`);\n  }\n  if (jettonAddress) {\n    params.push(`jetton=${encodeURIComponent(jettonAddress)}`);\n  }\n\n  if (params.length === 0) return url;\n\n  return `${url}?${params.join('&')}`;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"ZSZY1phv\",\"slide\":\"vCCqOvOq\",\"button\":\"XIxoy7tw\",\"tokenIcon\":\"SS8KpgmL\",\"content\":\"ISsYr_9r\",\"chevronIcon\":\"D_7DrGaN\"};","import React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\nimport { setExtraStyles } from '../../lib/teact/teact-dom';\n\nimport type { ApiToken } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { stopEvent } from '../../util/domEvents';\nimport { REM } from '../../util/windowEnvironment';\n\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SelectTokenButton.module.scss';\n\ninterface OwnProps {\n  token?: ApiToken;\n  noChainIcon?: boolean;\n  className?: string;\n  onClick: NoneToVoidFunction;\n}\n\nfunction SelectTokenButton({\n  token, className, noChainIcon, onClick,\n}: OwnProps) {\n  const { transitionRef } = useSelectorWidth(token);\n  const buttonTransitionKeyRef = useRef(0);\n  const buttonStateStr = `${token?.symbol}_${token?.chain}`;\n\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [buttonStateStr]);\n\n  function handleClick(e: React.MouseEvent<HTMLButtonElement>) {\n    stopEvent(e);\n\n    onClick();\n  }\n\n  function renderToken(tokenToRender?: ApiToken) {\n    return (\n      <Transition\n        ref={transitionRef}\n        name=\"fade\"\n        activeKey={buttonTransitionKeyRef.current}\n        className={buildClassName(styles.wrapper, className)}\n        slideClassName={styles.slide}\n      >\n        <button\n          type=\"button\"\n          className={styles.button}\n          onClick={handleClick}\n        >\n          {tokenToRender && (\n            <TokenIcon\n              token={tokenToRender}\n              withChainIcon={!noChainIcon}\n              size=\"middle\"\n              className={styles.tokenIcon}\n            />\n          )}\n          <div className={styles.content}>\n            <span>{tokenToRender?.symbol}</span>\n            <i className={buildClassName('icon-chevron-right', styles.chevronIcon)} aria-hidden />\n          </div>\n        </button>\n      </Transition>\n    );\n  }\n\n  return renderToken(token);\n}\n\nexport default memo(SelectTokenButton);\n\nconst BUTTON_WIDTH = 70 / REM;\nconst CHARACTER_WIDTH = 10;\n\nfunction useSelectorWidth(token?: ApiToken) {\n  const transitionRef = useRef<HTMLDivElement>();\n\n  useLayoutEffect(() => {\n    if (!transitionRef.current || !token) return;\n\n    const symbolWidth = (token.symbol.length * CHARACTER_WIDTH) / REM;\n    const minWidth = `${symbolWidth + BUTTON_WIDTH}rem`;\n\n    setExtraStyles(transitionRef.current, {\n      minWidth,\n    });\n  }, [token]);\n\n  return {\n    transitionRef,\n  };\n}\n","const NETWORK_NAMES_EXCEPTIONS: Record<string, string> = {\n  binance_smart_chain: 'Binance Smart Chain',\n  internet_computer: 'Internet Computer',\n  ethereum_classic: 'Ethereum Classic',\n  bitcoin_cash: 'Bitcoin Cash',\n  binance_dex: 'Binance Dex',\n  ton: 'TON',\n  bitcoin: 'Bitcoin',\n  ethereum: 'Ethereum',\n  solana: 'Solana',\n  tron: 'TRON',\n  stellar: 'Stellar',\n  doge: 'DOGE',\n  eos: 'EOS',\n  avalanche: 'Avalanche',\n  cardano: 'Cardano',\n  monero: 'Monero',\n  dash: 'Dash',\n  ripple: 'Ripple',\n  cosmos: 'Cosmos',\n  litecoin: 'Litecoin',\n  zcash: 'Zcash',\n  polkadot: 'Polkadot',\n  iota: 'IOTA',\n};\n\nexport default function getChainNetworkName(networkName?: string) {\n  if (!networkName) return '';\n\n  return NETWORK_NAMES_EXCEPTIONS[networkName] ?? networkName;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"tokenSelectInputWrapper\":\"oCuiJXQ_\",\"tokenSelectSearchIcon\":\"zftr1vD0\",\"tokenSelectSearchResetWrapper\":\"Ss4Pd7B2\",\"tokenSelectSearchReset\":\"oDrN01CP\",\"tokenSelectSearchResetIcon\":\"ok_5nHql\",\"tokenSelectInput\":\"fDjHi6pe\",\"tokenSelectContent\":\"LodBlyss\",\"tokenGroupContainer\":\"MbjJDq0G\",\"tokenGroupHeader\":\"RpUAt2yS\",\"tokenGroupTitle\":\"WhzSaV_6\",\"tokenGroupAdditionalTitle\":\"FdHSpaSV\",\"tokenContainer\":\"eUkSUO8W\",\"tokenContainerDisabled\":\"tHJSsGRH\",\"tokenLogoContainer\":\"nsViIoST\",\"logoContainer\":\"adBlSlrG\",\"tokenLogoSkeleton\":\"cGf45x9B\",\"tokenLogoSymbol\":\"PSK73bRe\",\"tokenLogo\":\"xiUmZwCy\",\"tokenLogoDisabled\":\"OwvlXRrn\",\"tokenNetworkLogoSkeleton\":\"MO1xaZfl\",\"nameContainer\":\"ZPTo397c\",\"tokenPriceContainer\":\"qGxMTfbW\",\"tokenName\":\"Wgp2h4bc\",\"tokenAmount\":\"QWmp5WQP\",\"tokenNetwork\":\"gBNLwjjP\",\"tokenValue\":\"S1V0VVx3\",\"tokenNameSkeleton\":\"GkqdgXVp\",\"tokenValueSkeleton\":\"AhEbK2G0\",\"tokenNotFound\":\"zp0dyh68\",\"tokenNotFoundTitle\":\"R7aa_jfY\",\"tokenNotFoundDesc\":\"XlzS0_qG\",\"tokenTextDisabled\":\"lotwVvdo\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiChain } from '../../api/types';\nimport {\n  type AssetPairs, SettingsState, type UserSwapToken, type UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX, TON_USDT_SLUG, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG,\n} from '../../config';\nimport {\n  selectAvailableUserForSwapTokens,\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectPopularTokens,\n  selectSwapTokens,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../util/modalSwipeManager';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFocusAfterAnimation from '../../hooks/useFocusAfterAnimation';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useSyncEffect from '../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport ModalHeader from '../ui/ModalHeader';\nimport SensitiveData from '../ui/SensitiveData';\nimport Transition from '../ui/Transition';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './TokenSelector.module.scss';\n\ntype TokenType = UserToken | UserSwapToken;\n\ntype TokenSortFactors = {\n  tickerExactMatch: number;\n  tickerMatchLength: number;\n  nameMatchLength: number;\n  specialOrder: number;\n};\n\ninterface OwnProps {\n  isActive?: boolean;\n  shouldFilter?: boolean;\n  shouldUseSwapTokens?: boolean;\n  shouldHideMyTokens?: boolean;\n  shouldHideNotSupportedTokens?: boolean;\n  selectedChain?: ApiChain;\n  header?: TeactNode;\n  onClose: NoneToVoidFunction;\n  onBack: NoneToVoidFunction;\n  onTokenSelect: (token: TokenType) => void;\n}\n\ninterface StateProps {\n  token?: TokenType;\n  userTokens?: TokenType[];\n  popularTokens?: TokenType[];\n  swapTokens?: UserSwapToken[];\n  tokenInSlug?: string;\n  pairsBySlug?: Record<string, AssetPairs>;\n  baseCurrency?: ApiBaseCurrency;\n  isLoading?: boolean;\n  isMultichain: boolean;\n  availableChains?: Partial<Record<ApiChain, unknown>>;\n  isSensitiveDataHidden?: true;\n}\n\nenum SearchState {\n  Initial,\n  Search,\n  Loading,\n  TokenByAddress,\n  Empty,\n}\n\nconst EMPTY_ARRAY: never[] = [];\nconst EMPTY_OBJECT = {};\n\nfunction TokenSelector({\n  token,\n  userTokens: userTokensProp = EMPTY_ARRAY,\n  swapTokens = EMPTY_ARRAY,\n  popularTokens: popularTokensProp = EMPTY_ARRAY,\n  header,\n  shouldFilter,\n  shouldUseSwapTokens,\n  baseCurrency,\n  tokenInSlug,\n  pairsBySlug,\n  isActive,\n  isLoading,\n  shouldHideMyTokens,\n  shouldHideNotSupportedTokens = false,\n  isMultichain,\n  availableChains = EMPTY_OBJECT,\n  selectedChain,\n  isSensitiveDataHidden,\n  onTokenSelect,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { importToken, resetImportToken, openSettingsWithState } = getActions();\n  const lang = useLang();\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const scrollContainerRef = useRef<HTMLDivElement>();\n  const searchInputRef = useRef<HTMLInputElement>();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  useEffect(() => {\n    if (!isActive) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isActive]);\n\n  useFocusAfterAnimation(searchInputRef, !isActive);\n\n  const {\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [searchValue, setSearchValue] = useState('');\n  const [isResetButtonVisible, setIsResetButtonVisible] = useState(false);\n  const [renderingKey, setRenderingKey] = useState(SearchState.Initial);\n  const [searchTokenList, setSearchTokenList] = useState<TokenType[]>([]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const filterTokens = useCallback((tokens: TokenType[]) => {\n    return filterAndSortTokens(tokens, isMultichain, tokenInSlug, pairsBySlug);\n  }, [pairsBySlug, tokenInSlug, isMultichain]);\n\n  const userTokens = useMemo(\n    () => filterSupportedTokens(userTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [userTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const allTokens = useMemo(\n    () => filterSupportedTokens(swapTokens, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [swapTokens, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const popularTokens = useMemo(\n    () => filterSupportedTokens(popularTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain),\n    [popularTokensProp, shouldHideNotSupportedTokens, availableChains, selectedChain],\n  );\n\n  const { userTokensWithFilter, popularTokensWithFilter, swapTokensWithFilter } = useMemo(() => {\n    if (!shouldFilter) {\n      return {\n        userTokensWithFilter: userTokens,\n        popularTokensWithFilter: popularTokens,\n        swapTokensWithFilter: swapTokens,\n      };\n    }\n\n    return {\n      userTokensWithFilter: filterTokens(userTokens),\n      popularTokensWithFilter: filterTokens(popularTokens),\n      swapTokensWithFilter: filterTokens(swapTokens),\n    };\n  }, [filterTokens, popularTokens, shouldFilter, swapTokens, userTokens]);\n\n  const filteredTokenList = useMemo(() => {\n    const tokensToFilter = shouldUseSwapTokens ? swapTokensWithFilter : allTokens;\n    const untrimmedSearchValue = searchValue.toLowerCase();\n    const lowerCaseSearchValue = untrimmedSearchValue.trim();\n\n    if (untrimmedSearchValue.length && !lowerCaseSearchValue.length) {\n      return [];\n    }\n\n    const filteredTokens = tokensToFilter.filter(({\n      name, symbol, keywords, isDisabled,\n    }) => {\n      if (isDisabled) {\n        return false;\n      }\n\n      const isName = name.toLowerCase().includes(lowerCaseSearchValue);\n      const isSymbol = symbol.toLowerCase().includes(lowerCaseSearchValue);\n      const isKeyword = keywords?.some((key) => key.toLowerCase().includes(lowerCaseSearchValue));\n\n      return isName || isSymbol || isKeyword;\n    }) ?? [];\n\n    const sortFactors = filteredTokens.reduce((acc, searchResultToken) => {\n      const factors = {\n        tickerExactMatch: 0,\n        tickerMatchLength: 0,\n        nameMatchLength: 0,\n        specialOrder: 0, // The higher the value, the higher the position\n      };\n\n      const tokenSymbol = searchResultToken.symbol.toLowerCase();\n      const tokenName = searchResultToken.name.toLowerCase();\n\n      if (tokenSymbol === lowerCaseSearchValue) {\n        factors.tickerExactMatch = 1;\n      }\n\n      if (tokenSymbol.includes(lowerCaseSearchValue)) {\n        factors.tickerMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (tokenName.includes(lowerCaseSearchValue)) {\n        factors.nameMatchLength = lowerCaseSearchValue.length;\n      }\n\n      if (searchResultToken.slug === TON_USDT_SLUG) {\n        factors.specialOrder = 2;\n      }\n\n      if (searchResultToken.slug === TRC20_USDT_MAINNET_SLUG || searchResultToken.slug === TRC20_USDT_TESTNET_SLUG) {\n        factors.specialOrder = 1;\n      }\n\n      acc[searchResultToken.slug] = factors;\n\n      return acc;\n    }, {} as Record<string, TokenSortFactors>);\n\n    return filteredTokens.sort((a, b) => {\n      const factorA = sortFactors[a.slug];\n      const factorB = sortFactors[b.slug];\n      const comparisonResult = compareTokens(factorA, factorB);\n      if (comparisonResult !== 0) return comparisonResult;\n\n      return Number(b.amount - a.amount);\n    });\n  }, [allTokens, shouldUseSwapTokens, searchValue, swapTokensWithFilter]);\n\n  const resetSearch = () => {\n    setSearchValue('');\n  };\n\n  useSyncEffect(() => {\n    setIsResetButtonVisible(Boolean(searchValue.length));\n\n    const isValidAddress = isValidAddressOrDomain(searchValue, 'ton');\n    let newRenderingKey = SearchState.Initial;\n\n    if (isLoading && isValidAddress) {\n      newRenderingKey = SearchState.Loading;\n    } else if (token && isValidAddress) {\n      newRenderingKey = SearchState.TokenByAddress;\n    } else if (searchValue.length && filteredTokenList.length !== 0) {\n      newRenderingKey = SearchState.Search;\n    } else if (filteredTokenList.length === 0) {\n      newRenderingKey = SearchState.Empty;\n    }\n\n    setRenderingKey(newRenderingKey);\n\n    if (newRenderingKey !== SearchState.Initial) {\n      setSearchTokenList(filteredTokenList);\n    }\n  }, [searchTokenList.length, isLoading, searchValue, token, filteredTokenList]);\n\n  useEffect(() => {\n    if ('ton' in availableChains && isValidAddressOrDomain(searchValue, 'ton')) {\n      importToken({ address: searchValue, isSwap: true });\n      setRenderingKey(SearchState.Loading);\n    } else {\n      resetImportToken();\n    }\n  }, [searchValue, availableChains]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !scrollContainerRef.current) return;\n\n    scrollContainerRef.current.scrollTop = 0;\n  }, [isActive]);\n\n  const handleTokenClick = useLastCallback((selectedToken: TokenType) => {\n    searchInputRef.current?.blur();\n\n    onTokenSelect(selectedToken);\n\n    resetSearch();\n\n    onBack();\n  });\n\n  const handleOpenSettings = useLastCallback(() => {\n    onClose();\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  function renderSearch() {\n    return (\n      <div className={styles.tokenSelectInputWrapper}>\n        <i className={buildClassName(styles.tokenSelectSearchIcon, 'icon-search')} aria-hidden />\n        <input\n          ref={searchInputRef}\n          name=\"token-search-modal\"\n          className={styles.tokenSelectInput}\n          onChange={(e) => setSearchValue(e.target.value)}\n          placeholder={lang('Name or Address...')}\n          value={searchValue}\n        />\n        <Transition\n          name=\"fade\"\n          activeKey={isResetButtonVisible ? 0 : 1}\n          className={styles.tokenSelectSearchResetWrapper}\n        >\n          {isResetButtonVisible && (\n            <button\n              type=\"button\"\n              className={styles.tokenSelectSearchReset}\n              aria-label={lang('Clear')}\n              onClick={resetSearch}\n            >\n              <i className={buildClassName(styles.tokenSelectSearchResetIcon, 'icon-close')} aria-hidden />\n            </button>\n          )}\n        </Transition>\n      </div>\n    );\n  }\n\n  function renderToken(currentToken: TokenType) {\n    const isAvailable = Boolean(!shouldFilter || currentToken.canSwap);\n    const withChainIcon = Boolean((isMultichain || shouldUseSwapTokens) && !selectedChain);\n    const descriptionText = isAvailable\n      ? getChainNetworkName(currentToken.chain)\n      : lang('Unavailable');\n\n    const tokenPrice = currentToken.price === 0\n      ? lang('No Price')\n      : formatCurrency(currentToken.price, shortBaseSymbol, undefined, true);\n\n    return (\n      <Token\n        key={currentToken.slug}\n        isAvailable={isAvailable}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        withChainIcon={withChainIcon}\n        descriptionText={descriptionText}\n        token={currentToken}\n        tokenPrice={tokenPrice}\n        onSelect={handleTokenClick}\n      />\n    );\n  }\n\n  function renderTokenGroup(tokens: TokenType[], title: string, shouldShowSettings?: boolean) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        <div className={styles.tokenGroupHeader}>\n          <span className={styles.tokenGroupTitle}>{title}</span>\n          {shouldShowSettings && (\n            <span\n              className={styles.tokenGroupAdditionalTitle}\n              onClick={handleOpenSettings}\n            >\n              {lang('Settings')}\n            </span>\n          )}\n        </div>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderAllTokens(tokens: TokenType[]) {\n    return (\n      <div className={styles.tokenGroupContainer}>\n        {tokens.map(renderToken)}\n      </div>\n    );\n  }\n\n  function renderTokenSkeleton() {\n    return (\n      <div className={buildClassName(styles.tokenContainer, styles.tokenContainerDisabled)}>\n        <div className={styles.tokenLogoContainer}>\n          <div className={styles.logoContainer}>\n            <div className={styles.tokenLogoSkeleton} />\n            <div className={styles.tokenNetworkLogoSkeleton} />\n          </div>\n          <div className={styles.nameContainer}>\n            <span className={styles.tokenNameSkeleton} />\n            <span className={styles.tokenValueSkeleton} />\n          </div>\n        </div>\n        <div className={styles.tokenPriceContainer}>\n          <span className={buildClassName(styles.tokenNameSkeleton, styles.rotateSkeleton)} />\n          <span className={styles.tokenValueSkeleton} />\n        </div>\n      </div>\n    );\n  }\n\n  function renderNotFound(shouldPlay: boolean) {\n    return (\n      <div className={styles.tokenNotFound}>\n        <AnimatedIconWithPreview\n          play={shouldPlay}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <span className={styles.tokenNotFoundTitle}>{lang('Not Found')}</span>\n        <span className={styles.tokenNotFoundDesc}>{lang('Try another keyword or address.')}</span>\n      </div>\n    );\n  }\n\n  function renderSearchResults(tokenToImport?: TokenType) {\n    if (tokenToImport) {\n      return (\n        <div className={styles.tokenGroupContainer}>\n          {renderToken(tokenToImport)}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n        {renderTokenSkeleton()}\n      </>\n    );\n  }\n\n  function renderTokenGroups() {\n    return (\n      <>\n        {!shouldHideMyTokens && renderTokenGroup(userTokensWithFilter, lang('MY'), true)}\n        {renderTokenGroup(popularTokensWithFilter, lang('POPULAR'))}\n      </>\n    );\n  }\n\n  function renderContent(isContentActive: boolean, isFrom: boolean, currentKey: SearchState) {\n    switch (currentKey) {\n      case SearchState.Initial:\n        return renderTokenGroups();\n      case SearchState.Loading:\n        return renderSearchResults();\n      case SearchState.Search:\n        return renderAllTokens(searchTokenList);\n      case SearchState.TokenByAddress:\n        return renderSearchResults(token);\n      case SearchState.Empty:\n        return renderNotFound(isContentActive);\n    }\n  }\n\n  return (\n    <>\n      {header || (\n        <ModalHeader\n          title={lang('Select Token')}\n          onBackButtonClick={onBack}\n          onClose={onClose}\n        />\n      )}\n      {renderSearch()}\n\n      <div\n        ref={scrollContainerRef}\n        className={buildClassName(styles.tokenSelectContent, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition name=\"fade\" activeKey={renderingKey}>\n          {renderContent}\n        </Transition>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { baseCurrency, isSensitiveDataHidden } = global.settings;\n  const { isLoading, token } = global.settings.importToken ?? {};\n  const { tokenInSlug } = global.currentSwap ?? {};\n  const pairsBySlug = global.swapPairs?.bySlug;\n  const userTokens = selectAvailableUserForSwapTokens(global);\n  const popularTokens = selectPopularTokens(global);\n  const swapTokens = selectSwapTokens(global);\n  const isMultichain = selectIsMultichainAccount(global, global.currentAccountId!);\n  const availableChains = selectCurrentAccount(global)?.addressByChain;\n\n  return {\n    baseCurrency,\n    isLoading,\n    token,\n    pairsBySlug,\n    tokenInSlug,\n    userTokens,\n    popularTokens,\n    swapTokens,\n    isMultichain,\n    availableChains,\n    isSensitiveDataHidden,\n  };\n})(TokenSelector));\n\nfunction Token({\n  token,\n  isAvailable,\n  isSensitiveDataHidden,\n  withChainIcon,\n  descriptionText,\n  tokenPrice,\n  onSelect,\n}: {\n  token: TokenType;\n  isAvailable: boolean;\n  isSensitiveDataHidden?: true;\n  withChainIcon: boolean;\n  descriptionText: string;\n  tokenPrice: string;\n  onSelect: (token: TokenType) => void;\n}) {\n  const handleClick = isAvailable ? () => onSelect(token) : undefined;\n  const cols = useMemo(() => getPseudoRandomNumber(4, 10, token.slug), [token.slug]);\n\n  return (\n    <div\n\n      className={buildClassName(\n        styles.tokenContainer,\n        !isAvailable && styles.tokenContainerDisabled,\n      )}\n      onClick={handleClick}\n    >\n      <div className={styles.tokenLogoContainer}>\n        <TokenIcon\n          token={token}\n          withChainIcon={withChainIcon}\n          className={buildClassName(styles.tokenLogo, !isAvailable && styles.tokenLogoDisabled)}\n        />\n\n        <div className={styles.nameContainer}>\n          <span className={buildClassName(styles.tokenName, !isAvailable && styles.tokenTextDisabled)}>\n            {token.name}\n          </span>\n          <span\n            className={buildClassName(\n              styles.tokenNetwork,\n              !isAvailable && styles.tokenTextDisabled,\n            )}\n          >\n            {descriptionText}\n          </span>\n        </div>\n      </div>\n      <div className={styles.tokenPriceContainer}>\n        <SensitiveData\n          isActive={isSensitiveDataHidden}\n          cols={cols}\n          rows={2}\n          cellSize={8}\n          align=\"right\"\n          className={buildClassName(\n            styles.tokenAmount,\n            !isAvailable && styles.tokenTextDisabled,\n          )}\n        >\n          {formatCurrency(toDecimal(token.amount, token?.decimals), token.symbol)}\n        </SensitiveData>\n        <span className={buildClassName(\n          styles.tokenValue,\n          !isAvailable && styles.tokenTextDisabled,\n        )}\n        >\n          {tokenPrice}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nfunction filterAndSortTokens(\n  tokens: TokenType[],\n  isMultichain: boolean,\n  tokenInSlug?: string,\n  pairsBySlug?: Record<string, AssetPairs>,\n) {\n  if (!tokens.length || !tokenInSlug) return [];\n\n  return tokens.map((token) => {\n    const pair = pairsBySlug?.[tokenInSlug]?.[token.slug];\n    const canSwap = Boolean(isMultichain ? pair : (pair && !pair.isMultichain));\n    return { ...token, canSwap };\n  }).sort((a, b) => Number(b.canSwap) - Number(a.canSwap));\n}\n\nfunction compareTokens(a: TokenSortFactors, b: TokenSortFactors) {\n  if (a.specialOrder !== b.specialOrder) {\n    return b.specialOrder - a.specialOrder;\n  }\n  if (a.tickerExactMatch !== b.tickerExactMatch) {\n    return b.tickerExactMatch - a.tickerExactMatch;\n  }\n  if (a.tickerMatchLength !== b.tickerMatchLength) {\n    return b.tickerMatchLength - a.tickerMatchLength;\n  }\n  return b.nameMatchLength - a.nameMatchLength;\n}\n\nfunction filterSupportedTokens<T extends TokenType>(\n  tokens: T[],\n  isFilterActive: boolean,\n  availableChains: Partial<Record<ApiChain, unknown>>,\n  selectedChain?: ApiChain,\n): T[] {\n  if (!isFilterActive && !selectedChain) {\n    return tokens;\n  }\n\n  return tokens.filter((token) => {\n    if (isFilterActive && !(token.chain in availableChains)) {\n      return false;\n    }\n\n    return !(selectedChain && token.chain !== selectedChain);\n  });\n}\n","import { FRACTION_DIGITS, WHOLE_PART_DELIMITER } from '../../../config';\n\nimport styles from '../Input.module.scss';\n\nexport function buildContentHtml(\n  text: string,\n  prefix = '',\n  suffix = '',\n  decimals = FRACTION_DIGITS,\n  withRadix = false,\n) {\n  text = sanitizeHtml(text);\n  prefix = sanitizeHtml(prefix);\n  suffix = sanitizeHtml(suffix);\n\n  if (!text) {\n    return '';\n  }\n\n  const hasDot = text.includes('.');\n  const [wholePart = '0', fractionPart] = hasDot ? text.split('.') : [text];\n\n  const formattedWholePart = withRadix\n    ? wholePart.replace(/\\d(?=(\\d{3})+($|\\.))/g, `$&${WHOLE_PART_DELIMITER}`)\n    : wholePart;\n  const fractionStr = hasDot ? `.${(fractionPart || '').substring(0, decimals)}` : '';\n  const suffixStr = suffix ? `&thinsp;${suffix}` : '';\n  const extraSpan = fractionStr || suffixStr ? (\n    `<span class=\"${styles.fractional}\">${fractionStr}${suffixStr}</span>`\n  ) : '';\n\n  return `${prefix}${formattedWholePart}${extraSpan}`;\n}\n\nfunction sanitizeHtml(string: string) {\n  const tempEl = document.createElement('span');\n  tempEl.textContent = string;\n  return tempEl.innerHTML;\n}\n","import { type ElementRef, useRef } from '../lib/teact/teact';\n\nimport { suppressStrict } from '../lib/fasterdom/stricterdom';\nimport buildClassName from '../util/buildClassName';\nimport useLastCallback from './useLastCallback';\n\nconst MIN_SIZE_SCALE = 0.25; // 12px\n\nfunction useFontScale(inputRef: ElementRef<HTMLElement>, shouldGetParentWidth?: boolean) {\n  const isFontChangedRef = useRef(false);\n  const measureEl = useRef(document.createElement('div'));\n\n  const updateFontScale = useLastCallback(() => {\n    const input = inputRef.current;\n\n    suppressStrict(() => {\n      if (!input?.offsetParent) return;\n\n      let { clientWidth: width } = shouldGetParentWidth ? input.parentElement! : input;\n\n      if (shouldGetParentWidth) {\n        const { paddingLeft, paddingRight } = getComputedStyle(input);\n        width -= parseFloat(paddingLeft) + parseFloat(paddingRight);\n      }\n      measureEl.current.className = buildClassName(input.className, 'measure-hidden');\n      measureEl.current.style.width = `${width}px`;\n      measureEl.current.innerHTML = ''; // `measureEl.current.innerHTML = input.innerHTML` is not used, because it violates the CSP\n      measureEl.current.append(...input.cloneNode(true).childNodes);\n      document.body.appendChild(measureEl.current);\n\n      let scale = 1;\n\n      while (scale > MIN_SIZE_SCALE) {\n        measureEl.current.style.setProperty('--font-size-scale', scale.toString());\n\n        if (measureEl.current.scrollWidth <= width) break;\n        scale -= 0.05;\n      }\n\n      isFontChangedRef.current = scale < 1;\n      document.body.removeChild(measureEl.current);\n      measureEl.current.className = '';\n      input.style.setProperty('--font-size-scale', scale.toString());\n    });\n  });\n\n  return { updateFontScale, isFontChangedRef };\n}\n\nexport default useFontScale;\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { saveCaretPosition } from '../../util/saveCaretPosition';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFlag from '../../hooks/useFlag';\nimport useFontScale from '../../hooks/useFontScale';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: TeactNode;\n  value?: string;\n  hasError?: boolean;\n  isLoading?: boolean;\n  prefix?: string;\n  suffix?: string;\n  className?: string;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  cornerClassName?: string;\n  children?: TeactNode;\n  onChange?: (value?: string) => void;\n  onBlur?: NoneToVoidFunction;\n  onFocus?: NoneToVoidFunction;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n  /** Expected to fire when regardless of the `disabled` prop value */\n  onInputClick?: NoneToVoidFunction;\n  decimals?: number;\n  disabled?: boolean;\n  isStatic?: boolean;\n  size?: 'large' | 'normal';\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberInput({\n  id,\n  labelText,\n  hasError,\n  isLoading = false,\n  prefix = '',\n  suffix = '',\n  value,\n  children,\n  className,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  cornerClassName,\n  onChange,\n  onBlur,\n  onFocus,\n  onPressEnter,\n  onInputClick,\n  decimals = FRACTION_DIGITS,\n  disabled = false,\n  isStatic = false,\n  size = 'large',\n}: OwnProps) {\n  const inputRef = useRef<HTMLInputElement>();\n  const placeholderRef = useRef<HTMLDivElement>();\n  const lang = useLang();\n\n  const [hasFocus, markHasFocus, unmarkHasFocus] = useFlag(false);\n  const { updateFontScale, isFontChangedRef } = useFontScale(inputRef);\n\n  const textRef = useRef('');\n\n  const updateHtml = useLastCallback((newText: string) => {\n    const input = inputRef.current!;\n    const html = buildContentHtml(newText, prefix, suffix, decimals);\n\n    // Don't use the :empty pseudo-class to hide the placeholder, because it's noticeable delayed on iOS\n    placeholderRef.current!.innerHTML = newText ? '' : buildContentHtml('0', prefix, suffix);\n\n    if (html !== input.innerHTML) {\n      const restoreCaretPosition = document.activeElement === input\n        ? saveCaretPosition(input, prefix.length, decimals)\n        : undefined;\n\n      input.innerHTML = html;\n      restoreCaretPosition?.();\n    }\n\n    if (`${prefix}${newText}${suffix}`.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale();\n    }\n  });\n\n  useLayoutEffect(() => {\n    const newText = clearText(value);\n\n    if (!newText || !textRef.current.startsWith(newText)) {\n      updateHtml(newText);\n      textRef.current = newText;\n    }\n  }, [textRef, value]);\n\n  useLayoutEffect(() => {\n    updateHtml(textRef.current);\n  }, [prefix, suffix, decimals]);\n\n  function handleChange(e: React.FormEvent<HTMLDivElement>) {\n    const newText = clearText(e.currentTarget.textContent ?? undefined);\n\n    updateHtml(newText);\n\n    if (newText !== textRef.current) {\n      textRef.current = newText;\n\n      if (onChange && isValidValue(newText)) {\n        onChange(newText);\n      }\n    }\n  }\n\n  const handleFocus = useLastCallback(() => {\n    if (disabled) return;\n\n    markHasFocus();\n    onFocus?.();\n  });\n\n  const handleBlur = useLastCallback(() => {\n    if (disabled) return;\n\n    unmarkHasFocus();\n    onBlur?.();\n  });\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.key === 'Enter') {\n      onPressEnter?.(e);\n    }\n  };\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    hasError && styles.error,\n    hasFocus && styles.input__wrapper_hasFocus,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.input,\n    size === 'large' && styles.large,\n    valueClassName,\n    disabled && styles.disabled,\n    isLoading && styles.isLoading,\n    'rounded-font',\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    hasError && styles.error,\n    labelClassName,\n  );\n  const cornerFullClass = buildClassName(\n    cornerClassName,\n    hasFocus && styles.swapCorner,\n    hasError && styles.swapCorner_error,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {Boolean(labelText) && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        <div className={styles.rich}>\n          <div\n            ref={inputRef}\n            contentEditable={!disabled && !isLoading}\n            id={id}\n            role=\"textbox\"\n            aria-required\n            aria-placeholder={lang('Amount value')}\n            aria-labelledby={labelText ? `${id}Label` : undefined}\n            tabIndex={0}\n            inputMode=\"decimal\"\n            className={buildClassName(inputFullClass, styles.rich__value)}\n            onKeyDown={handleKeyDown}\n            onChange={handleChange}\n            onFocus={handleFocus}\n            onBlur={handleBlur}\n            onClick={onInputClick}\n          />\n          <div\n            ref={placeholderRef}\n            className={buildClassName(inputFullClass, styles.rich__placeholder)}\n          />\n        </div>\n        {children}\n      </div>\n      {cornerClassName && <div className={cornerFullClass} />}\n    </div>\n  );\n}\n\nfunction clearText(text?: string) {\n  if (!text) return '';\n\n  return (\n    text\n      .trim()\n      .replace(',', '.') // Replace comma to point\n      .replace(/[^\\d.]/g, '') // Remove incorrect symbols\n      .replace(/^0+(?=([1-9]|0\\.))/, '') // Trim extra zeros at beginning\n      .replace(/^0+$/, '0') // Trim extra zeros (if only zeros are entered)\n      ?? ''\n  );\n}\n\nfunction isValidValue(text: string) {\n  return !Number.isNaN(Number(text));\n}\n\nexport default memo(RichNumberInput);\n\nexport function focusAtTheEnd(inputId: string) {\n  const input = document.getElementById(inputId);\n  const selection = window.getSelection();\n  if (!input || !selection) {\n    return;\n  }\n\n  const range = document.createRange();\n  range.selectNodeContents(input);\n  range.collapse(false);\n  selection.removeAllRanges();\n  selection.addRange(range);\n}\n","export function saveCaretPosition(context: HTMLElement, prefixLength: number, decimals: number) {\n  const selection = window.getSelection();\n  if (!selection || selection.rangeCount === 0) {\n    return undefined;\n  }\n\n  const range = selection.getRangeAt(0);\n  range.setStart(context, 0);\n  const clearedValue = range.toString().match(new RegExp(`(\\\\d+(?:[.,]\\\\d{0,${decimals}})?)`));\n  const len = prefixLength + (clearedValue?.[0]?.length || range.toString().length || 0);\n\n  return function restore() {\n    try {\n      const { node, position } = getTextNodeAtPosition(context, len);\n\n      selection.removeAllRanges();\n      const newRange = new Range();\n      newRange.setStart(node, position);\n      newRange.setEnd(node, position);\n      selection.addRange(newRange);\n    } catch (e) {\n      // ignore\n    }\n  };\n}\n\nfunction getTextNodeAtPosition(root: HTMLElement, index: number) {\n  const NODE_TYPE = NodeFilter.SHOW_TEXT;\n  const treeWalker = document.createTreeWalker(root, NODE_TYPE, (elem) => {\n    if (index > elem.textContent!.length) {\n      index -= elem.textContent!.length;\n      return NodeFilter.FILTER_REJECT;\n    }\n\n    return NodeFilter.FILTER_ACCEPT;\n  });\n\n  const node = treeWalker.nextNode() ?? treeWalker.currentNode;\n\n  return {\n    node,\n    // Limiting the position for cases when `index` is outside the `root`.\n    // It happens when the prefix disappears after the change.\n    position: Math.min(index, node.textContent!.length),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"pOo4Z_aH\",\"iosModalDialog\":\"q6jp1iyp\",\"contentWrapper\":\"jvZQQwjc\",\"content\":\"SRNIOpBE\",\"contentTitle\":\"GKe6CMiw\",\"contentTitleQr\":\"FleNuH6I\",\"contentTitleLedger\":\"uEJfLLFI\",\"contentTitleLedgerStatic\":\"zolk8bhu\",\"tabsInModal\":\"kxmoYeWl\",\"receiveHeader\":\"k3MxFquM\",\"receiveHeaderNoTabs\":\"RJOW3R8W\",\"contentStatic\":\"CDl3KL71\",\"tabs\":\"Bq7mtmdH\",\"tabsOverlay\":\"dsNYuIgk\",\"tab\":\"YpO46ybD\",\"tabTon\":\"JKtWSSiZ\",\"tabTron\":\"U6XprGM_\",\"qrCode\":\"Bol24ap4\",\"qrCodeStatic\":\"VkwtgLpL\",\"qrCodeHidden\":\"yC4eGg0t\",\"labelForInvoice\":\"ykqIpMy7\",\"addressWrapper\":\"aUXplGt1\",\"copyButtonStatic\":\"EbsE8cY6\",\"tokenButton\":\"vgInBvx7\",\"invoiceComment\":\"U6Z9qzVb\",\"dottedLink\":\"xzGjTX1X\",\"actionButtons\":\"QxrwhhFf\",\"actionButton\":\"ARg65twE\"};","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport { IS_CAPACITOR, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectAccount, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal } from '../../util/decimals';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport formatTransferUrl from '../../util/ton/formatTransferUrl';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SelectTokenButton from '../common/SelectTokenButton';\nimport TokenSelector from '../common/TokenSelector';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokenSlug?: string;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  address?: string;\n}\n\nconst enum SLIDES {\n  Initial,\n  Selector,\n}\n\nfunction InvoiceModal({\n  address,\n  tokenSlug,\n  tokensBySlug,\n  isOpen,\n}: StateProps) {\n  const { changeInvoiceToken, closeInvoiceModal } = getActions();\n\n  const lang = useLang();\n  const selectedToken = tokensBySlug && tokenSlug ? tokensBySlug[tokenSlug] : TONCOIN;\n  const [isTokenSelectorOpen, openTokenSelector, closeTokenSelector] = useFlag(false);\n  const [amountValue, setAmountValue] = useState<string | undefined>(undefined);\n  const [comment, setComment] = useState<string>('');\n\n  const decimals = selectedToken?.decimals ?? TONCOIN.decimals;\n  const amount = amountValue ? fromDecimal(amountValue, decimals) : 0n;\n  const tokenAddress = 'tokenAddress' in selectedToken ? selectedToken?.tokenAddress : undefined;\n  const invoiceUrl = address ? formatTransferUrl(address, amount, comment, tokenAddress) : '';\n\n  const handleTokenSelect = useLastCallback((token: UserToken | UserSwapToken) => {\n    changeInvoiceToken({ tokenSlug: token.slug });\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('Deposit Link')}\n              onClose={closeInvoiceModal}\n            />\n            <div className={styles.content}>\n              <div className={styles.contentTitle}>\n                {renderText(lang('$receive_invoice_description'))}\n              </div>\n              <RichNumberInput\n                key=\"amount\"\n                id=\"amount\"\n                value={amountValue}\n                labelText={lang('Amount')}\n                onChange={setAmountValue}\n              >\n                <SelectTokenButton\n                  noChainIcon\n                  token={selectedToken}\n                  className={styles.tokenButton}\n                  onClick={openTokenSelector}\n                />\n              </RichNumberInput>\n              <Input\n                value={comment}\n                label={lang('Comment')}\n                placeholder={lang('Optional')}\n                wrapperClassName={styles.invoiceComment}\n                onInput={setComment}\n              />\n\n              <p className={styles.labelForInvoice}>\n                {lang('Share this URL to receive %token%', { token: selectedToken?.symbol })}\n              </p>\n              <InteractiveTextField\n                text={invoiceUrl}\n                addressUrl={IS_CAPACITOR ? invoiceUrl : undefined}\n                noExplorer\n                withShareInMenu={IS_CAPACITOR}\n                copyNotification={lang('Invoice link was copied!')}\n                className={styles.invoiceLinkField}\n              />\n            </div>\n          </>\n        );\n\n      case SLIDES.Selector:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldHideNotSupportedTokens\n            selectedChain=\"ton\"\n            onTokenSelect={handleTokenSelect}\n            onBack={closeTokenSelector}\n            onClose={closeInvoiceModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"invoice\"\n      onClose={closeInvoiceModal}\n      onCloseAnimationEnd={closeTokenSelector}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={isTokenSelectorOpen ? SLIDES.Selector : SLIDES.Initial}\n        nextKey={isTokenSelectorOpen ? SLIDES.Initial : SLIDES.Selector}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const address = selectAccount(global, global.currentAccountId!)?.addressByChain?.ton;\n    const { invoiceTokenSlug } = selectCurrentAccountState(global) || {};\n\n    return {\n      isOpen: global.isInvoiceModalOpen,\n      tokenSlug: invoiceTokenSlug,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      address,\n    };\n  })(InvoiceModal),\n);\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { animate } from './animation';\n\nconst DEFAULT_DURATION = 300;\n\nconst stopById = new Map<string, VoidFunction>();\n\nexport default function animateHorizontalScroll(container: HTMLElement, left: number, duration = DEFAULT_DURATION) {\n  const isRtl = container.getAttribute('dir') === 'rtl';\n  const {\n    scrollLeft, offsetWidth: containerWidth, scrollWidth, dataset: { scrollId },\n  } = container;\n\n  let path = left - scrollLeft;\n\n  if (path < 0) {\n    const remainingPath = -scrollLeft * (isRtl ? -1 : 1);\n    path = Math.max(path, remainingPath);\n  } else if (path > 0) {\n    const remainingPath = scrollWidth - (scrollLeft + containerWidth);\n    path = Math.min(path, remainingPath);\n  }\n\n  if (path === 0) {\n    return Promise.resolve();\n  }\n\n  if (scrollId && stopById.has(scrollId)) {\n    stopById.get(scrollId)!();\n  }\n\n  const target = scrollLeft + path;\n\n  return new Promise<void>((resolve) => {\n    requestMutation(() => {\n      if (duration === 0) {\n        container.scrollLeft = target;\n        resolve();\n        return;\n      }\n\n      let isStopped = false;\n      const id = Math.random().toString();\n      container.dataset.scrollId = id;\n      stopById.set(id, () => {\n        isStopped = true;\n      });\n\n      container.style.scrollSnapType = 'none';\n\n      const startAt = Date.now();\n\n      animate(() => {\n        if (isStopped) return false;\n\n        const t = Math.min((Date.now() - startAt) / duration, 1);\n\n        const currentPath = path * (1 - transition(t));\n        container.scrollLeft = Math.round(target - currentPath);\n\n        if (t >= 1) {\n          container.style.scrollSnapType = '';\n          delete container.dataset.scrollId;\n          stopById.delete(id);\n          resolve();\n        }\n\n        return t < 1;\n      }, requestMutation);\n    });\n  });\n}\n\nfunction transition(t: number) {\n  return 1 - ((1 - t) ** 3.5);\n}\n","import React, { useRef, useState } from '../../lib/teact/teact';\n\nimport type { IAnchorPosition } from '../../global/types';\nimport type { DropdownItem } from './Dropdown';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\n\nimport styles from './Tab.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  icon?: string;\n  title: string;\n  menuItems?: DropdownItem[];\n  className?: string;\n  onClick: (arg: number) => void;\n  clickArg: number;\n  onMenuItemClick?: (value: string) => void;\n  onActiveClick?: NoneToVoidFunction;\n};\n\nfunction Tab({\n  isActive,\n  icon,\n  title,\n  menuItems,\n  className,\n  onClick,\n  clickArg,\n  onMenuItemClick,\n  onActiveClick,\n}: OwnProps) {\n  const menuRef = useRef<HTMLDivElement>();\n  const contentRef = useRef<HTMLDivElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition | undefined>();\n  const hasMenu = Boolean(menuItems?.length);\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const getTriggerElement = useLastCallback(() => contentRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n  const closeMenu = useLastCallback(() => setMenuAnchor(undefined));\n\n  const handleClick = useLastCallback(() => {\n    if (isActive && !hasMenu) {\n      onActiveClick?.();\n      return;\n    }\n\n    if (!isActive) {\n      onClick(clickArg);\n      return;\n    }\n\n    if (isMenuOpen) {\n      closeMenu();\n    } else {\n      const { right: x, y, height } = contentRef.current!.getBoundingClientRect();\n      setMenuAnchor({ x, y: y + height });\n    }\n  });\n\n  return (\n    <div\n      className={buildClassName(styles.Tab, isActive && styles.Tab_active, className, hasMenu && styles.interactive)}\n      onClick={handleClick}\n    >\n      <span className={styles.content} ref={contentRef}>\n        {icon && <i className={buildClassName(icon, styles.icon)} aria-hidden />}\n        {title}\n        {hasMenu && (\n          <i className={buildClassName('icon-caret-down', styles.caretIcon)} aria-hidden />\n        )}\n      </span>\n      {hasMenu && (\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          items={menuItems}\n          withPortal\n          buttonClassName={styles.menuItem}\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={onMenuItemClick}\n          onClose={closeMenu}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Tab;\n","// extracted by mini-css-extract-plugin\nexport default {\"Tab\":\"D6as8ltx\",\"tab\":\"D6as8ltx\",\"Tab_active\":\"O4d43EtE\",\"tabActive\":\"O4d43EtE\",\"content\":\"vwr4su2y\",\"interactive\":\"MiCetFPJ\",\"menuItem\":\"tUY9MzOP\",\"icon\":\"EDDQtmOa\",\"caretIcon\":\"UgBDhvZa\"};","import React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { DropdownItem } from './Dropdown';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport animateHorizontalScroll from '../../util/animateHorizontalScroll';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ANDROID, IS_IOS } from '../../util/windowEnvironment';\n\nimport useHorizontalScroll from '../../hooks/useHorizontalScroll';\nimport useLang from '../../hooks/useLang';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport Tab from './Tab';\n\nimport styles from './TabList.module.scss';\n\nexport type TabWithProperties = {\n  id: number;\n  icon?: string;\n  title: string;\n  className?: string;\n  menuItems?: DropdownItem[];\n  onMenuItemClick?: (value: string) => void;\n};\n\ntype OwnProps = {\n  tabs: readonly TabWithProperties[];\n  activeTab: number;\n  className?: string;\n  overlayClassName?: string;\n  onSwitchTab: (index: number) => void;\n  onActiveTabClick?: NoneToVoidFunction;\n};\n\nconst TAB_SCROLL_THRESHOLD_PX = 16;\n// Should match duration from `--slide-transition` CSS variable\nconst SCROLL_DURATION = IS_IOS ? 450 : IS_ANDROID ? 400 : 300;\nconst CLIP_PATH_CONTAINER_CLASS_NAME = 'clip-path-container';\n\nfunction TabList({\n  tabs, activeTab, className, overlayClassName, onSwitchTab, onActiveTabClick,\n}: OwnProps) {\n  const lang = useLang();\n  const containerRef = useRef<HTMLDivElement>();\n  const { width: appWidth } = useWindowSize();\n\n  const fullClassName = buildClassName(\n    styles.container,\n    'no-scrollbar',\n    className,\n  );\n\n  useHorizontalScroll({\n    containerRef,\n    shouldPreventDefault: true,\n  });\n\n  useActiveTabCentering(activeTab, containerRef.current);\n\n  useEffect(() => {\n    const container = containerRef.current?.querySelector(`.${CLIP_PATH_CONTAINER_CLASS_NAME}`) as HTMLElement | null;\n    const activeTabElement = container?.childNodes[activeTab] as HTMLElement | null;\n\n    if (container && activeTabElement) {\n      const clipPath = calculateClipPath(activeTabElement, container);\n      requestMutation(() => {\n        container.style.clipPath = clipPath;\n      });\n    }\n    // When the following dependencies change, `clipPath` must be updated\n  }, [activeTab, tabs, lang, containerRef, appWidth]);\n\n  return (\n    <div ref={containerRef} className={fullClassName}>\n      {tabs.map((tab, i) => (\n        <Tab\n          key={tab.title}\n          title={tab.title}\n          isActive={i === activeTab}\n          className={tab?.className}\n          menuItems={tab?.menuItems}\n          onMenuItemClick={tab?.onMenuItemClick}\n          onActiveClick={onActiveTabClick}\n          onClick={onSwitchTab}\n          clickArg={tab.id}\n          icon={tab.icon}\n        />\n      ))}\n\n      <div\n        className={buildClassName(styles.clipPathContainer, overlayClassName, CLIP_PATH_CONTAINER_CLASS_NAME)}\n        aria-hidden\n      >\n        {tabs.map((tab, i) => (\n          <Tab\n            key={tab.title}\n            title={tab.title}\n            isActive={i === activeTab}\n            className={buildClassName(tab?.className, i === activeTab && 'current-tab')}\n            menuItems={tab?.menuItems}\n            onActiveClick={onActiveTabClick}\n            onMenuItemClick={tab?.onMenuItemClick}\n            onClick={onSwitchTab}\n            clickArg={tab.id}\n            icon={tab.icon}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(TabList);\n\nfunction calculateClipPath(activeElement: HTMLElement, container: HTMLElement) {\n  const { paddingTop, paddingBottom } = getComputedStyle(activeElement);\n  const {\n    offsetLeft,\n    offsetWidth,\n  } = activeElement;\n\n  const clipLeft = offsetLeft;\n  const clipRight = offsetLeft + offsetWidth;\n  const rightPosition = Number(100 - (clipRight / container.offsetWidth) * 100).toFixed(3);\n  const leftPosition = Number((clipLeft / container.offsetWidth) * 100).toFixed(3);\n\n  return `inset(${parseInt(paddingTop)}px ${rightPosition}% ${parseInt(paddingBottom)}px ${leftPosition}% round 1rem)`;\n}\n\n// Scroll container to place active tab in the center\nfunction useActiveTabCentering(activeTab: number, container?: HTMLDivElement) {\n  useEffect(() => {\n    if (!container) return;\n\n    const { scrollWidth, offsetWidth, scrollLeft } = container;\n    if (scrollWidth <= offsetWidth) {\n      return;\n    }\n\n    const activeTabElement = container.childNodes[activeTab] as HTMLElement | null;\n    if (!activeTabElement) {\n      return;\n    }\n\n    const { offsetLeft: activeTabOffsetLeft, offsetWidth: activeTabOffsetWidth } = activeTabElement;\n    const newLeft = activeTabOffsetLeft - (offsetWidth / 2) + (activeTabOffsetWidth / 2);\n\n    // Prevent scrolling by only a couple of pixels, which doesn't look smooth\n    if (Math.abs(newLeft - scrollLeft) < TAB_SCROLL_THRESHOLD_PX) {\n      return;\n    }\n\n    void animateHorizontalScroll(container, newLeft, SCROLL_DURATION);\n  }, [activeTab, container]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Jya4TQTw\",\"clipPathContainer\":\"GMG3Qgat\"};","// extracted by mini-css-extract-plugin\nexport default {\"actionSheetDialog\":\"Vdr2S2qS\",\"actionButtons\":\"eWsAO42f\",\"actionButtonStatic\":\"E2TFEkdV\",\"actionButton\":\"GUHQ1MCW\",\"disabled\":\"wOo6dgfN\",\"actionIcon\":\"Zc6rtbsT\",\"iconChevronRight\":\"onRwV8fb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG, TONCOIN } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n}\n\nfunction TonActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n    openInvoiceModal,\n    closeReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'ton' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG,\n      tokenOutSlug: TONCOIN.slug,\n      amountIn: '100',\n    });\n    onClose?.();\n  });\n\n  const handleReceiveClick = useLastCallback(() => {\n    closeReceiveModal();\n    openInvoiceModal();\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div className={styles.actionButton} onClick={handleBuyFiat}>\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      <div className={styles.actionButton} onClick={handleReceiveClick}>\n        <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n        {lang('Create Deposit Link')}\n        <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n  };\n})(TonActions));\n","import type QRCodeStyling from 'qr-code-styling';\nimport {\n  type ElementRef,\n  useEffect, useLayoutEffect, useRef, useState,\n} from '../lib/teact/teact';\nimport { removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { ApiChain } from '../api/types';\n\nimport { IS_CORE_WALLET } from '../config';\nimport getChainNetworkIcon from '../util/swap/getChainNetworkIcon';\nimport formatTransferUrl from '../util/ton/formatTransferUrl';\n\nconst QR_SIZE = 600;\n\ninterface UseQRCodeHook {\n  qrCodeRef: ElementRef<HTMLDivElement>;\n  isInitialized: boolean;\n}\n\nlet qrCode: QRCodeStyling;\n\nexport default function useQrCode({\n  address,\n  chain,\n  isActive,\n  hiddenClassName,\n  hideLogo,\n  withFormatTransferUrl,\n}: {\n  address?: string;\n  chain?: ApiChain;\n  isActive?: boolean;\n  hiddenClassName?: string;\n  hideLogo?: boolean;\n  withFormatTransferUrl?: boolean;\n}): UseQRCodeHook {\n  const [isInitialized, setIsInitialized] = useState(!!qrCode);\n  const logoUrl = IS_CORE_WALLET ? './coreWallet/logo.svg' : './logo.svg';\n\n  const qrCodeRef = useRef<HTMLDivElement>();\n\n  useEffect(() => {\n    if (isInitialized) return;\n\n    void import('qr-code-styling')\n      .then(({ default: QrCodeStyling }) => {\n        qrCode = new QrCodeStyling({\n          width: QR_SIZE,\n          height: QR_SIZE,\n          image: chain ? getChainNetworkIcon(chain) : logoUrl,\n          margin: 0,\n          type: 'canvas',\n          dotsOptions: { type: 'rounded' },\n          cornersSquareOptions: { type: 'extra-rounded' },\n          imageOptions: { imageSize: 0.4, margin: 8, crossOrigin: 'anonymous' },\n          qrOptions: { errorCorrectionLevel: 'M' },\n          data: formatTransferUrl(''),\n        });\n\n        setIsInitialized(true);\n      });\n  }, [chain, isInitialized, logoUrl]);\n\n  useLayoutEffect(() => {\n    if (!isActive || !isInitialized) return;\n\n    if (qrCodeRef.current && hiddenClassName) removeExtraClass(qrCodeRef.current, hiddenClassName);\n\n    if (qrCodeRef.current) {\n      qrCode?.append(qrCodeRef.current);\n\n      qrCode._options.image = hideLogo\n        ? undefined\n        : (chain ? getChainNetworkIcon(chain) : logoUrl);\n    }\n  }, [isActive, isInitialized, hiddenClassName, hideLogo, chain, logoUrl]);\n\n  useEffect(() => {\n    if (!address || !isActive || !qrCode || !isInitialized) return;\n\n    qrCode.update({ data: withFormatTransferUrl ? formatTransferUrl(address) : address });\n  }, [address, isActive, isInitialized, withFormatTransferUrl]);\n\n  return { qrCodeRef, isInitialized };\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TonActions from './TonActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  isLedger?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TonContent({\n  isActive,\n  isStatic,\n  isLedger,\n  address,\n  onClose,\n}: OwnProps) {\n  const { verifyHardwareAddress } = getActions();\n\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'ton',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: true,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  const handleVerify = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    verifyHardwareAddress();\n  };\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_ton_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"ton\"\n        address={address}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {isLedger && (\n        <div className={buildClassName(\n          styles.contentTitle, styles.contentTitleLedger, isStatic && styles.contentTitleLedgerStatic,\n        )}\n        >\n          {renderText(lang('$ledger_verify_address'))}\n          {' '}\n          <a href=\"#\" onClick={handleVerify} className={styles.dottedLink}>\n            {lang('Verify now')}\n          </a>\n        </div>\n      )}\n\n      {!isStatic && <TonActions isLedger={isLedger} onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TonContent);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiCountryCode } from '../../../api/types';\n\nimport { DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG, TRX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport styles from './TonActions.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isLedger?: boolean;\n  className?: string;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isTestnet?: boolean;\n  isSwapDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  countryCode?: ApiCountryCode;\n}\n\nfunction TronActions({\n  className,\n  isStatic,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  countryCode,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startSwap,\n    openOnRampWidgetModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const canBuyWithCard = countryCode !== 'RU';\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  // TRX purchase is not possible via the Dreamwalkers service (Russian), however in static mode we show the buy button\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled && (canBuyWithCard || isStatic);\n  const shouldRender = Boolean(isSwapAllowed || isOnRampAllowed || isStatic);\n\n  const handleBuyFiat = useLastCallback(() => {\n    openOnRampWidgetModal({ chain: 'tron' });\n    onClose?.();\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    startSwap({\n      tokenInSlug: DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG,\n      tokenOutSlug: TRX.slug,\n      amountIn: '10',\n    });\n    onClose?.();\n  });\n\n  const contentClassName = buildClassName(\n    styles.actionButtons,\n    isStatic && styles.actionButtonStatic,\n    className,\n  );\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div className={contentClassName}>\n      {isOnRampAllowed && (\n        <div\n          className={buildClassName(styles.actionButton, !canBuyWithCard && styles.disabled)}\n          onClick={canBuyWithCard ? handleBuyFiat : undefined}\n        >\n          <i className={buildClassName(styles.actionIcon, 'icon-card')} aria-hidden />\n          {lang('Buy with Card')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isSwapAllowed && (\n        <div className={styles.actionButton} onClick={handleSwapClick}>\n          <i className={buildClassName(styles.actionIcon, 'icon-crypto')} aria-hidden />\n          {lang('Buy with Crypto')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n      {isStatic && (\n        <div className={buildClassName(styles.actionButton, styles.disabled)}>\n          <i className={buildClassName(styles.actionIcon, 'icon-link')} aria-hidden />\n          {lang('Create Deposit Link')}\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  } = global.restrictions;\n\n  return {\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    countryCode,\n  };\n})(TronActions));\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport TronActions from './TronActions';\n\nimport styles from '../ReceiveModal.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  address: string;\n  onClose?: NoneToVoidFunction;\n}\n\nfunction TronContent({\n  isActive,\n  isStatic,\n  address,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address,\n    chain: 'tron',\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    withFormatTransferUrl: false,\n  });\n  const qrClassNames = buildClassName(\n    styles.qrCode,\n    isStatic && styles.qrCodeStatic,\n    !isInitialized && styles.qrCodeHidden,\n  );\n\n  return (\n    <div>\n      <div className={buildClassName(styles.contentTitle, styles.contentTitleQr)}>\n        {renderText(lang('$receive_tron_description'))}\n      </div>\n\n      <div className={qrClassNames} ref={qrCodeRef} />\n\n      <InteractiveTextField\n        chain=\"tron\"\n        address={address}\n        className={isStatic ? styles.copyButtonStatic : styles.addressWrapper}\n        copyNotification={lang('Your address was copied!')}\n        noSavedAddress\n        noDimming\n      />\n\n      {!isStatic && <TronActions onClose={onClose} />}\n    </div>\n  );\n}\n\nexport default memo(TronContent);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\nimport type { Account } from '../../global/types';\nimport type { TabWithProperties } from '../ui/TabList';\n\nimport { selectAccount, selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TabList from '../ui/TabList';\nimport Transition from '../ui/Transition';\nimport TonActions from './content/TonActions';\nimport TonContent from './content/TonContent';\nimport TronActions from './content/TronActions';\nimport TronContent from './content/TronContent';\n\nimport styles from './ReceiveModal.module.scss';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isLedger?: boolean;\n  chain?: ApiChain;\n}\n\ntype OwnProps = {\n  isOpen?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n};\n\nexport const TON_TAB_ID = 0;\nexport const TRON_TAB_ID = 1;\n\nfunction Content({\n  isOpen, addressByChain, chain, isStatic, isLedger, onClose,\n}: StateProps & OwnProps) {\n  const { setReceiveActiveTab } = getActions();\n\n  // `lang.code` is used to force redrawing of the `Transition` content,\n  // since the height of the content differs from translation to translation.\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const tabs = useMemo(() => {\n    const result: TabWithProperties[] = [];\n    if (addressByChain?.ton) {\n      result.push({\n        id: TON_TAB_ID,\n        title: 'TON',\n        className: buildClassName(styles.tab, styles.tabTon),\n      });\n    }\n    if (addressByChain?.tron) {\n      result.push({\n        id: TRON_TAB_ID,\n        title: 'TRON',\n        className: buildClassName(styles.tab, styles.tabTron),\n      });\n    }\n\n    return result;\n  }, [addressByChain?.ton, addressByChain?.tron]);\n\n  const activeTab = useMemo(() => {\n    if (!chain) return tabs.length ? tabs[0].id : TON_TAB_ID;\n    return chain === 'tron' ? TRON_TAB_ID : TON_TAB_ID;\n  }, [chain, tabs]);\n\n  const handleSwitchTab = useLastCallback((tabId: number) => {\n    const newChain = tabId === TRON_TAB_ID ? 'tron' : 'ton';\n    setReceiveActiveTab({ chain: newChain });\n  });\n\n  function renderActions() {\n    const currentTab = tabs.find((tab) => tab.id === activeTab);\n    if (currentTab?.id === TRON_TAB_ID) {\n      return <TronActions isStatic />;\n    }\n\n    return <TonActions isStatic isLedger={isLedger} />;\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: number) {\n    switch (currentKey) {\n      case TON_TAB_ID:\n        return (\n          <TonContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            isLedger={isLedger}\n            address={addressByChain!.ton!}\n            onClose={onClose}\n          />\n        );\n\n      case TRON_TAB_ID:\n        return (\n          <TronContent\n            isActive={isOpen && isActive}\n            isStatic={isStatic}\n            address={addressByChain!.tron!}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  if (!tabs.length) {\n    return undefined;\n  }\n\n  return (\n    <>\n      {isStatic && renderActions()}\n\n      {tabs.length > 1 && (\n        <TabList\n          tabs={tabs}\n          activeTab={activeTab}\n          className={buildClassName(styles.tabs, !isStatic && styles.tabsInModal)}\n          overlayClassName={styles.tabsOverlay}\n          onSwitchTab={handleSwitchTab}\n        />\n      )}\n      <Transition\n        key={`content_${lang.code}`}\n        activeKey={activeTab}\n        name={isPortrait ? 'slide' : 'slideFade'}\n        className={styles.contentWrapper}\n        slideClassName={buildClassName(styles.content, isStatic && styles.contentStatic, 'custom-scroll')}\n        shouldRestoreHeight={isStatic}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global): StateProps => {\n    const account = selectAccount(global, global.currentAccountId!);\n    const { receiveModalChain } = selectCurrentAccountState(global) || {};\n\n    return {\n      addressByChain: account?.addressByChain,\n      isLedger: Boolean(account?.ledger),\n      chain: receiveModalChain,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId))(Content),\n);\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { selectCurrentAccount, selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_IOS_APP } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Content from './Content';\n\nimport styles from './ReceiveModal.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n  isLedger?: boolean;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isOnRampDisabled: boolean;\n  isMultichainAccount: boolean;\n};\n\nfunction ReceiveModal({\n  isOpen,\n  isTestnet,\n  isLedger,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isMultichainAccount,\n}: StateProps) {\n  const { closeReceiveModal } = getActions();\n\n  const lang = useLang();\n\n  const { isLandscape } = useDeviceScreen();\n  const isSwapAllowed = !isTestnet && !isLedger && !isSwapDisabled;\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const modalTitle = lang(isSwapAllowed || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  useEffect(() => {\n    if (isOpen && isLandscape) {\n      closeReceiveModal();\n    }\n  }, [isLandscape, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      dialogClassName={IS_IOS_APP ? styles.iosModalDialog : styles.modalDialog}\n      nativeBottomSheetKey=\"receive\"\n      onClose={closeReceiveModal}\n    >\n      <ModalHeader\n        title={modalTitle}\n        className={buildClassName(styles.receiveHeader, !isMultichainAccount && styles.receiveHeaderNoTabs)}\n        onClose={closeReceiveModal}\n      />\n      <Content\n        isOpen={isOpen}\n        onClose={closeReceiveModal}\n      />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { isSwapDisabled, isOnRampDisabled } = global.restrictions;\n  const account = selectCurrentAccount(global);\n\n  return {\n    isOpen: global.isReceiveModalOpen,\n    isTestnet: global.settings.isTestnet,\n    isSwapDisabled,\n    isOnRampDisabled,\n    isLedger: Boolean(account?.ledger),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(ReceiveModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport { TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './TransferResult.module.scss';\n\ninterface OwnProps {\n  playAnimation?: boolean;\n  color?: 'green' | 'purple';\n  noSign?: boolean;\n  amount?: bigint;\n  tokenSymbol?: string;\n  decimals?: number;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  isSensitiveDataHidden?: true;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n}\n\nfunction TransferResult({\n  isSensitiveDataHidden,\n  playAnimation,\n  amount = 0n,\n  tokenSymbol = TONCOIN.symbol,\n  decimals = TONCOIN.decimals,\n  noSign,\n  color,\n  firstButtonText,\n  secondButtonText,\n  onFirstButtonClick,\n  onSecondButtonClick,\n}: OwnProps) {\n  const amountString = toDecimal(amount, decimals);\n  const [wholePart, fractionPart] = formatCurrencyExtended(amountString, '', noSign, decimals).split('.');\n  const amountCols = useMemo(() => getPseudoRandomNumber(5, 13, tokenSymbol), [tokenSymbol]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button className={styles.button} onClick={onFirstButtonClick}>{firstButtonText}</Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={amountCols}\n        rows={3}\n        cellSize={18}\n        align=\"center\"\n        maskSkin=\"green\"\n        className={buildClassName(styles.amount, color && styles[`amount_${color}`], 'rounded-font')}\n      >\n        {wholePart.trim().replace('\\u202F', '').replace('-', '')}\n        {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n        <span className={styles.amountSymbol}>{tokenSymbol}</span>\n      </SensitiveData>\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(TransferResult);\n","import { useRef, useState } from '../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../../api/types';\n\nimport { CURRENCIES } from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { fromDecimal, toDecimal } from '../../../util/decimals';\nimport { vibrate } from '../../../util/haptics';\nimport { DEFAULT_DECIMALS } from '../../../api/chains/ton/constants';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\ntype CurrentToken = Pick<ApiTokenWithPrice, 'slug' | 'price' | 'decimals'>;\n\ninterface AmountInputStateInput {\n  /** The `token` amount from the state. Expressed in `token` regardless of `isBaseCurrency`. */\n  amount?: bigint;\n  token?: CurrentToken;\n  baseCurrency: ApiBaseCurrency;\n  isAmountReadonly?: boolean;\n  onAmountChange: (amount?: bigint, isValueReplaced?: boolean) => void;\n  /** `id` is the token slug unless `id` is specified explicitly in the token dropdown items */\n  onTokenChange?: (id: string) => void;\n}\n\nexport interface AmountInputStateOutput {\n  isBaseCurrency: boolean;\n  inputValue: string | undefined;\n  alternativeValue: string | undefined;\n  baseCurrency: ApiBaseCurrency;\n  isAmountReadonly?: boolean;\n  onInputChange: (value?: string) => void;\n  onMaxAmountClick: (maxAmount?: bigint) => void;\n  onAlternativeAmountClick: () => void;\n  onTokenChange: (id: string, token?: CurrentToken) => void;\n}\n\n/**\n * Provides the stateful functionality for `AmountInput`. It is not embedded into `AmountInput`, because sometimes\n * `<AmountInput>` has to be remounted while its state must persist.\n */\nexport function useAmountInputState(input: AmountInputStateInput): AmountInputStateOutput {\n  const { baseCurrency, onAmountChange } = input;\n  const { isBaseCurrency, switchCurrency, ...output } = useCurrencySwitch(input);\n\n  const onMaxAmountClick = useLastCallback((maxAmount?: bigint) => {\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n    switchCurrency(false);\n    onAmountChange(maxAmount, true);\n  });\n\n  const onAlternativeAmountClick = useLastCallback(() => {\n    void vibrate();\n    switchCurrency(!isBaseCurrency);\n  });\n\n  return {\n    ...output,\n    isBaseCurrency,\n    baseCurrency,\n    onMaxAmountClick,\n    onAlternativeAmountClick,\n  };\n}\n\nfunction useCurrencySwitch({\n  baseCurrency,\n  amount: tokenAmountBI,\n  token,\n  isAmountReadonly,\n  onAmountChange,\n  onTokenChange: setToken,\n}: AmountInputStateInput) {\n  const [isBaseCurrency, setIsBaseCurrency] = useState(false);\n  const tokenAmountRef = useRef<string | undefined>();\n  const currencyAmountRef = useRef<string | undefined>();\n  const currencyDecimals = CURRENCIES[baseCurrency].decimals;\n\n  const setAmountsFromToken = (tokenAmount: string | undefined) => {\n    tokenAmountRef.current = tokenAmount;\n    currencyAmountRef.current = tokenAmountToCurrencyAmount(tokenAmount, token?.price, currencyDecimals);\n  };\n\n  const setAmountsFromCurrency = (currencyAmount: string | undefined) => {\n    tokenAmountRef.current = currencyAmountToTokenAmount(currencyAmount, token?.price, token?.decimals);\n    currencyAmountRef.current = currencyAmount;\n  };\n\n  const setAndReportAmountFromPrice = (price: number | undefined, decimals: number | undefined) => {\n    if (isBaseCurrency && !isAmountReadonly) {\n      const newTokenAmount = currencyAmountToTokenAmount(currencyAmountRef.current, price, decimals);\n      if (newTokenAmount !== formalizeStringAmount(tokenAmountRef.current)) {\n        tokenAmountRef.current = newTokenAmount; // If not set, the render following the `onAmountChange` call may change the input value\n        onAmountChange(tokenAmountToBigInt(newTokenAmount, decimals));\n      }\n    } else {\n      currencyAmountRef.current = tokenAmountToCurrencyAmount(tokenAmountRef.current, price, currencyDecimals);\n    }\n  };\n\n  // Actualizes both values when a new token amount arrives from the parent\n  useSyncEffect(() => {\n    const newTokenAmount = tokenAmountFromBigInt(tokenAmountBI, token?.decimals);\n    if (newTokenAmount !== formalizeStringAmount(tokenAmountRef.current)) {\n      setAmountsFromToken(newTokenAmount);\n    }\n  }, [tokenAmountBI, token?.decimals]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  // Actualizes the alternative (below the input) value when the token price changes.\n  // If the input is readonly, actualizes only the currency value regardless of `isBaseCurrency`\n  useSyncEffect(() => {\n    setAndReportAmountFromPrice(token?.price, token?.decimals);\n  }, [token?.price, token?.decimals, currencyDecimals]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  const onInputChange = useLastCallback((value?: string) => {\n    value ||= undefined;\n\n    if (isBaseCurrency) {\n      setAmountsFromCurrency(value);\n    } else {\n      setAmountsFromToken(value);\n    }\n\n    onAmountChange(tokenAmountToBigInt(tokenAmountRef.current, token?.decimals));\n  });\n\n  const onTokenChange = useLastCallback((id: string, newToken?: CurrentToken) => {\n    setToken?.(id);\n\n    if (newToken) {\n      // The goal is to make the new token and the new amount arrive in the same next render.\n      // Otherwise, the token amount won't change until the next render (by an above `useSyncEffect`).\n      // This could cause unwanted visual glitches like a blinking balance error.\n      setAndReportAmountFromPrice(newToken.price, newToken.decimals);\n    }\n  });\n\n  return {\n    isBaseCurrency,\n    isAmountReadonly,\n    inputValue: isBaseCurrency ? currencyAmountRef.current : tokenAmountRef.current,\n    alternativeValue: isBaseCurrency ? tokenAmountRef.current : currencyAmountRef.current,\n    switchCurrency: setIsBaseCurrency,\n    onInputChange,\n    onTokenChange,\n  };\n}\n\nfunction tokenAmountToCurrencyAmount(\n  amount: string | undefined,\n  tokenPrice: number | undefined,\n  currencyDecimals: number,\n) {\n  return amount && tokenPrice !== undefined\n    ? Big(amount).mul(tokenPrice).round(currencyDecimals).toString()\n    : undefined;\n}\n\nfunction currencyAmountToTokenAmount(\n  amount: string | undefined,\n  tokenPrice: number | undefined,\n  tokenDecimals: number | undefined,\n) {\n  // Avoiding dividing by zero for tokens with price 0\n  return amount && tokenPrice\n    ? Big(amount).div(tokenPrice).round(tokenDecimals ?? DEFAULT_DECIMALS).toString()\n    : undefined;\n}\n\nfunction tokenAmountToBigInt(amount: string | undefined, decimals: number | undefined) {\n  return amount\n    ? fromDecimal(amount, decimals)\n    : undefined;\n}\n\nfunction tokenAmountFromBigInt(amount: bigint | undefined, decimals: number | undefined) {\n  return amount === undefined\n    ? undefined\n    : toDecimal(amount, decimals);\n}\n\n/** For example, turns '1.2300' into '1.23' */\nfunction formalizeStringAmount(amount: string | undefined) {\n  if (!amount) {\n    return undefined;\n  }\n\n  if (!amount.includes('.')) {\n    return amount;\n  }\n\n  let end = amount.length;\n  while (amount[end - 1] === '0') {\n    end--;\n  }\n  if (amount[end - 1] === '.') {\n    end--;\n  }\n\n  return amount.slice(0, end);\n}\n","import { useMemo } from '../../../lib/teact/teact';\n\nimport type { ApiStakingState } from '../../../api/types';\nimport type { AmountInputToken } from '../../ui/AmountInput';\n\nimport { getIsActiveStakingState } from '../../../util/staking';\n\ninterface Options {\n  tokenBySlug?: Record<string, AmountInputToken>;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n  selectedStakingId?: string;\n  isViewMode?: boolean;\n}\n\nexport function useTokenDropdown({\n  tokenBySlug, states, shouldUseNominators, selectedStakingId, isViewMode,\n}: Options) {\n  const selectableTokens = useMemo(() => {\n    if (!tokenBySlug || !states) {\n      return [];\n    }\n\n    let tokens = getStakingTokens(tokenBySlug, states, shouldUseNominators);\n\n    if (isViewMode) {\n      tokens = tokens.filter(({ id }) => id === selectedStakingId);\n    }\n\n    return tokens;\n  }, [tokenBySlug, states, shouldUseNominators, isViewMode, selectedStakingId]);\n\n  const selectedToken = useMemo(\n    () => selectableTokens.find((token) => token.id === selectedStakingId),\n    [selectableTokens, selectedStakingId],\n  );\n\n  return [selectedToken, selectableTokens] as const;\n}\n\nfunction getStakingTokens(\n  tokenBySlug: Record<string, AmountInputToken>,\n  states: ApiStakingState[],\n  shouldUseNominators?: boolean,\n) {\n  const hasNominatorsStake = states.some((state) => state.type === 'nominators' && getIsActiveStakingState(state));\n  const hasLiquidStake = states.some((state) => state.type === 'liquid' && getIsActiveStakingState(state));\n\n  if (shouldUseNominators && !hasLiquidStake) {\n    states = states.filter((state) => state.type !== 'liquid');\n  }\n\n  if (!shouldUseNominators && !hasNominatorsStake) {\n    states = states.filter((state) => state.type !== 'nominators');\n  }\n\n  return states\n    .filter((state) => tokenBySlug[state.tokenSlug])\n    .map<AmountInputToken>((state) => ({\n      ...tokenBySlug[state.tokenSlug],\n      id: state.id,\n    }));\n}\n","import { useMemo, useRef } from '../lib/teact/teact';\n\n// Use this hook to bind `<Transition />` animation to changes in the dependency array.\n// Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\nexport function useTransitionActiveKey(deps: unknown[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n\n  useMemo(() => {\n    if (!noAnimation) activeKey.current += 1;\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps);\n\n  return activeKey.current;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"OEF25dXJ\",\"content\":\"zfocSjTR\",\"link\":\"KwAXOVQ_\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiToken } from '../../api/types';\n\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, formatCurrencySimple } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\n\nimport Transition from './Transition';\n\nimport styles from './AmountInputMaxButton.module.scss';\n\ninterface OwnProps {\n  maxAmount?: bigint;\n  token?: Pick<ApiToken, 'symbol' | 'decimals'>;\n  isLoading?: boolean;\n  isSensitiveDataHidden?: boolean;\n  /** If true, the label will say \"All\" instead of \"Max\" and all the amount digits will be shown (made for unstaking) */\n  isAllMode?: boolean;\n  onAmountClick(maxAmount?: bigint): void;\n}\n\n/**\n * Put the element right above a <RichNumberInput />, it will take the space right to the input label without moving the\n * around content.\n */\nfunction AmountInputMaxButton({\n  maxAmount,\n  token,\n  isLoading,\n  isSensitiveDataHidden,\n  isAllMode,\n  onAmountClick,\n}: OwnProps) {\n  const lang = useLang();\n\n  const content = isLoading\n    ? lang('Loading...')\n    : !token || maxAmount === undefined\n      ? ''\n      : isSensitiveDataHidden\n        ? `*** ${token.symbol}`\n        : isAllMode\n          ? formatCurrencySimple(maxAmount, token.symbol, token.decimals)\n          : formatCurrency(toDecimal(maxAmount, token.decimals), token.symbol);\n\n  const transitionKey = useTransitionActiveKey([!content, token?.symbol, isLoading, isSensitiveDataHidden]);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={transitionKey}\n      shouldCleanup\n      className={styles.container}\n    >\n      {content && (\n        <span className={styles.content}>\n          {lang(isAllMode ? '$all_balance' : '$max_balance', {\n            balance: (\n              <div\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => onAmountClick(maxAmount)}\n                className={styles.link}\n              >\n                {content}\n              </div>\n            ),\n          })}\n        </span>\n      )}\n    </Transition>\n  );\n}\n\nexport default memo(AmountInputMaxButton);\n","// extracted by mini-css-extract-plugin\nexport default {\"dropdown\":\"ZNn8fpqd\",\"dropdown__prefix\":\"u0_9mbdz\",\"dropdownPrefix\":\"u0_9mbdz\",\"prefix\":\"yhhTwepY\",\"purple\":\"fP_2Gh_l\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\n\nimport getChainNetworkIcon from '../../util/swap/getChainNetworkIcon';\nimport { ASSET_LOGO_PATHS } from './helpers/assetLogos';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Dropdown, { type DropdownItem } from './Dropdown';\n\nimport styles from './TokenDropdown.module.scss';\n\nexport type TokenWithId = Pick<ApiTokenWithPrice, 'slug' | 'symbol' | 'image' | 'chain'> & {\n  /**\n   * The token unique id to use instead of slug.\n   * Made for cases when there multiple dropdown items with the same token.\n   */\n  id?: string;\n};\n\ninterface OwnProps<T extends TokenWithId> {\n  selectedToken?: T | string;\n  allTokens?: T[];\n  isMultichainAccount?: boolean;\n  theme?: 'purple';\n  isInMode?: boolean;\n  /** `id` is the token slug, unless an `id` property is specified explicitly in the `allTokens` items */\n  onChange?: (id: string, token: T) => void;\n}\n\nconst EMPTY_TOKEN_LIST: never[] = [];\n\nfunction TokenDropdown<T extends TokenWithId>({\n  selectedToken,\n  allTokens = EMPTY_TOKEN_LIST,\n  isMultichainAccount,\n  theme,\n  isInMode,\n  onChange,\n}: OwnProps<T>) {\n  const lang = useLang();\n\n  const buttonPrefixText = lang('$in_currency', { currency: '' });\n  const buttonPrefix = useMemo(\n    () => {\n      return isInMode && (\n        <span className={styles.prefix}>\n          {buttonPrefixText}\n        </span>\n      );\n    },\n    [isInMode, buttonPrefixText],\n  );\n\n  const items = useMemo(\n    () => allTokens.map((token) => tokenToDropdownItem(token, isMultichainAccount)),\n    [allTokens, isMultichainAccount],\n  );\n\n  const tokenById = useMemo(\n    () => allTokens.reduce<Record<string, T>>((byId, token) => {\n      byId[getTokenId(token)] = token;\n      return byId;\n    }, {}),\n    [allTokens],\n  );\n\n  const handleChange = useLastCallback((id: string) => {\n    const token = tokenById[id];\n    onChange?.(id, token);\n  });\n\n  if (!items.length) {\n    return undefined;\n  }\n\n  const selectedTokenId = !selectedToken || typeof selectedToken === 'string'\n    ? selectedToken\n    : getTokenId(selectedToken);\n\n  return (\n    <Dropdown\n      items={items}\n      selectedValue={selectedTokenId}\n      buttonPrefix={buttonPrefix}\n      className={styles.dropdown}\n      menuClassName={theme && styles[theme]}\n      onChange={handleChange}\n    />\n  );\n}\n\nexport default memo(TokenDropdown);\n\nexport function getTokenId(token: TokenWithId) {\n  return token.id ?? token.slug;\n}\n\nexport function tokenToDropdownItem(token: TokenWithId, isMultichainAccount?: boolean): DropdownItem {\n  return {\n    value: getTokenId(token),\n    icon: ASSET_LOGO_PATHS[token.symbol.toLowerCase() as keyof typeof ASSET_LOGO_PATHS]\n      || token.image,\n    overlayIcon: isMultichainAccount ? getChainNetworkIcon(token.chain) : undefined,\n    name: token.symbol,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"u5uvgNoY\",\"container__slide\":\"OeHWkJFQ\",\"containerSlide\":\"OeHWkJFQ\",\"input\":\"me9Fg5VF\",\"bottom\":\"xPmDv9gI\",\"bottom__right\":\"uMCMe6l_\",\"bottomRight\":\"uMCMe6l_\",\"alternative\":\"hx_H7UUP\",\"alternative__icon\":\"Agk5w0hD\",\"alternativeIcon\":\"Agk5w0hD\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useRef } from '../../lib/teact/teact';\n\nimport type { ApiTokenWithPrice } from '../../api/types';\nimport type { AmountInputStateOutput } from './hooks/useAmountInputState';\nimport type { TokenWithId } from './TokenDropdown';\n\nimport { CURRENCIES } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { setCancellableTimeout } from '../../util/schedulers';\nimport { SEC } from '../../api/constants';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport AmountInputMaxButton from './AmountInputMaxButton';\nimport RichNumberInput, { focusAtTheEnd } from './RichNumberInput';\nimport TokenDropdown from './TokenDropdown';\nimport Transition from './Transition';\n\nimport styles from './AmountInput.module.scss';\n\nexport type AmountInputToken = TokenWithId & Pick<ApiTokenWithPrice, 'price' | 'decimals'>;\n\ninterface OwnProps extends AmountInputStateOutput {\n  /** Expressed in `token` regardless of `isBaseCurrency` */\n  maxAmount?: bigint;\n  token: AmountInputToken | undefined;\n  allTokens?: AmountInputToken[];\n  isStatic?: boolean;\n  hasError: boolean;\n  isMultichainAccount?: boolean;\n  isSensitiveDataHidden?: true;\n  isMaxAmountLoading?: boolean;\n  /** If true, the max amount label will say \"All\" instead of \"Max\" and all the amount digits will be shown (made for unstaking) */\n  isMaxAmountAllMode?: boolean;\n  labelText?: TeactNode;\n  renderBottomRight: (className: string) => TeactNode;\n  onPressEnter?: (e: React.KeyboardEvent<HTMLDivElement>) => void;\n}\n\nfunction AmountInput({\n  isBaseCurrency,\n  inputValue,\n  alternativeValue,\n  baseCurrency,\n  maxAmount,\n  token,\n  allTokens,\n  isStatic,\n  hasError,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  isMaxAmountLoading,\n  isMaxAmountAllMode,\n  renderBottomRight,\n  isAmountReadonly,\n  labelText,\n  onTokenChange,\n  onPressEnter,\n  onInputChange,\n  onMaxAmountClick,\n  onAlternativeAmountClick,\n}: OwnProps) {\n  const lang = useLang();\n  const transitionKey = isBaseCurrency ? 0 : 1;\n  const { inputId, onInputFocus, onInputBlur, onClick: keepInputFocus } = useKeepInputFocus(transitionKey);\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    onMaxAmountClick(maxAmount);\n    keepInputFocus();\n  });\n\n  function renderBalance() {\n    return (\n      <AmountInputMaxButton\n        maxAmount={isAmountReadonly ? undefined : maxAmount}\n        token={token}\n        isLoading={isMaxAmountLoading}\n        isAllMode={isMaxAmountAllMode}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderInput() {\n    let prefix: string | undefined;\n    let suffix: string | undefined;\n\n    if (isBaseCurrency) {\n      const { shortSymbol } = CURRENCIES[baseCurrency];\n      if (shortSymbol) {\n        prefix = shortSymbol;\n      } else {\n        suffix = baseCurrency;\n      }\n    }\n\n    return (\n      <RichNumberInput\n        id={inputId}\n        hasError={hasError}\n        value={inputValue}\n        labelText={labelText ?? lang('Amount')}\n        decimals={isBaseCurrency ? CURRENCIES[baseCurrency].decimals : token?.decimals}\n        className={styles.input}\n        isStatic={isStatic}\n        prefix={prefix}\n        suffix={suffix}\n        disabled={isAmountReadonly}\n        onChange={onInputChange}\n        onPressEnter={onPressEnter}\n        onFocus={onInputFocus}\n        onBlur={onInputBlur}\n      >\n        {renderTokens()}\n      </RichNumberInput>\n    );\n  }\n\n  function renderTokens() {\n    return (\n      <TokenDropdown<AmountInputToken>\n        selectedToken={token}\n        allTokens={allTokens}\n        isInMode={isBaseCurrency}\n        isMultichainAccount={isMultichainAccount}\n        onChange={onTokenChange}\n      />\n    );\n  }\n\n  function renderAlternativeAmount() {\n    const symbol = isBaseCurrency\n      ? (token?.symbol ?? '')\n      : getShortCurrencySymbol(baseCurrency);\n\n    const onClick = () => {\n      onAlternativeAmountClick();\n      keepInputFocus();\n    };\n\n    // The main reason to use <button> is preventing the comment type selector (which is also a <button>) from hijacking\n    // the clicks on touch screens.\n    return (\n      <button type=\"button\" className={styles.alternative} onClick={onClick}>\n        &thinsp;\n        {formatCurrency(alternativeValue ?? 0, symbol, undefined, true)}\n        <i className={buildClassName(styles.alternative__icon, 'icon-switch')} aria-hidden />\n      </button>\n    );\n  }\n\n  return (\n    <Transition\n      activeKey={transitionKey}\n      name=\"semiFade\"\n      shouldCleanup\n      className={styles.container}\n      slideClassName={styles.container__slide}\n    >\n      {renderBalance()}\n      {renderInput()}\n      <div className={styles.bottom}>\n        {renderAlternativeAmount()}\n        {renderBottomRight(styles.bottom__right)}\n      </div>\n    </Transition>\n  );\n}\n\nexport default memo(AmountInput);\n\n/**\n * Clicking the currency switch button un-focuses the input. This creates a bad UX with virtual keyboard.\n * To improve the UX, we focus the input back when the user clicks the currency switch button.\n * We focus only if the input was focused before the click, because Native Bottom Sheet renders a couple blank\n * frames when the virtual keyboard is not open and the focus is triggered programmatically.\n */\nfunction useKeepInputFocus(transitionKey: number) {\n  const inputId = `${useUniqueId()}_${transitionKey}`;\n  const isFocused = useRef(false);\n  const cancelFocusTimer = useRef<NoneToVoidFunction>();\n  const inputFocusPersistDuration = 0.5 * SEC;\n\n  const onInputFocus = useLastCallback(() => {\n    cancelFocusTimer.current?.();\n    isFocused.current = true;\n  });\n\n  const onInputBlur = useLastCallback(() => {\n    cancelFocusTimer.current?.();\n    cancelFocusTimer.current = setCancellableTimeout(inputFocusPersistDuration, () => {\n      isFocused.current = false;\n    });\n  });\n\n  const onClick = () => {\n    if (isFocused.current) {\n      focusAtTheEnd(inputId); // To keep the virtual keyboard open\n    }\n  };\n\n  // The input element is replaced as a result of the transition, so we need to focus the new input\n  useEffect(() => {\n    if (isFocused.current) {\n      focusAtTheEnd(inputId);\n    }\n  }, [transitionKey]); // eslint-disable-line react-hooks-static-deps/exhaustive-deps\n\n  return { inputId, onInputFocus, onInputBlur, onClick };\n}\n","import { TONCOIN } from '../../config';\nimport withCache from '../../util/withCache';\n\nexport const getNumberRegex = withCache((decimals: number): RegExp => {\n  return decimals === 0\n    ? /^(\\d+)/\n    : new RegExp(`^(\\\\d+)([.,])?(\\\\d{1,${decimals}})?`);\n});\n\nexport function getNumberParts(value: string, decimals: number = TONCOIN.decimals) {\n  const regex = getNumberRegex(decimals);\n  return value.match(regex) || undefined;\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useLayoutEffect, useRef } from '../../lib/teact/teact';\n\nimport type { SensitiveDataMaskSkin } from '../common/SensitiveDataMask';\n\nimport { FRACTION_DIGITS } from '../../config';\nimport { getNumberRegex } from '../../global/helpers/number';\nimport buildClassName from '../../util/buildClassName';\nimport { buildContentHtml } from './helpers/buildContentHtml';\n\nimport useFontScale from '../../hooks/useFontScale';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SensitiveData from './SensitiveData';\n\nimport styles from './Input.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  labelText?: string;\n  value?: string;\n  error?: string;\n  prefix?: string;\n  suffix?: string;\n  zeroValue?: string;\n  decimals?: number;\n  className?: string;\n  isSensitiveData?: true;\n  isSensitiveDataHidden?: true;\n  sensitiveDataMaskSkin?: SensitiveDataMaskSkin;\n  isStatic?: boolean;\n  inputClassName?: string;\n  labelClassName?: string;\n  valueClassName?: string;\n  children?: TeactNode;\n};\n\nconst MIN_LENGTH_FOR_SHRINK = 5;\n\nfunction RichNumberField({\n  id,\n  labelText,\n  value,\n  error,\n  prefix,\n  suffix,\n  zeroValue,\n  decimals = FRACTION_DIGITS,\n  className,\n  isSensitiveData,\n  isSensitiveDataHidden,\n  sensitiveDataMaskSkin,\n  isStatic,\n  inputClassName,\n  labelClassName,\n  valueClassName,\n  children,\n}: OwnProps) {\n  const contentRef = useRef<HTMLInputElement>();\n  const prevValueRef = useRef<string>('');\n  const { updateFontScale, isFontChangedRef } = useFontScale(contentRef, true);\n\n  const renderValue = useLastCallback((inputValue = '', noFallbackToPrev = false) => {\n    const contentEl = contentRef.current!;\n\n    const valueRegex = getNumberRegex(decimals);\n    const values = inputValue.match(valueRegex);\n\n    // eslint-disable-next-line no-null/no-null\n    if (values === null || values.length < 4 || values[0] === '') {\n      if (noFallbackToPrev || inputValue === '') {\n        prevValueRef.current = '';\n        contentEl.innerText = '';\n      } else {\n        renderValue(prevValueRef.current, true);\n      }\n\n      return;\n    }\n    const textContent = values?.[0] || '';\n    prevValueRef.current = inputValue;\n\n    contentEl.innerHTML = buildContentHtml(inputValue, prefix, suffix, decimals, true);\n\n    if (textContent.length > MIN_LENGTH_FOR_SHRINK || isFontChangedRef.current) {\n      updateFontScale();\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (value) {\n      renderValue(value);\n    } else if (zeroValue) {\n      contentRef.current!.textContent = zeroValue;\n    }\n  }, [prefix, suffix, decimals, renderValue, value, zeroValue]);\n\n  const inputWrapperFullClass = buildClassName(\n    styles.input__wrapper,\n    isStatic && styles.inputWrapperStatic,\n    inputClassName,\n  );\n  const inputFullClass = buildClassName(\n    styles.rich__value,\n    styles.input,\n    styles.large,\n    styles.disabled,\n    error && styles.error,\n    'rounded-font',\n    valueClassName,\n  );\n  const labelTextClassName = buildClassName(\n    styles.label,\n    labelClassName,\n  );\n\n  return (\n    <div className={buildClassName(styles.wrapper, className)}>\n      {error && (\n        <label className={buildClassName(styles.label, styles.label_error, styles.error)} htmlFor={id}>{error}</label>\n      )}\n      {labelText && (\n        <label\n          className={labelTextClassName}\n          htmlFor={id}\n          id={`${id}Label`}\n        >\n          {labelText}\n        </label>\n      )}\n      <div className={inputWrapperFullClass}>\n        {isSensitiveData ? (\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={8}\n            rows={3}\n            cellSize={16}\n            maskSkin={sensitiveDataMaskSkin}\n            // Adding `.large` to remove the excessive bottom padding created by SensitiveData (the `height` property does the job)\n            className={buildClassName(styles.rich, styles.large)}\n            maskClassName={styles.mask}\n          >\n            <div ref={contentRef} id={id} className={inputFullClass} />\n          </SensitiveData>\n        ) : (\n          <div className={styles.rich}>\n            <div ref={contentRef} id={id} className={inputFullClass} />\n          </div>\n        )}\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(RichNumberField);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"oJIiPolp\",\"welcome\":\"TiFPq3C6\",\"welcome_static\":\"Rv6oYnJ8\",\"welcomeStatic\":\"Rv6oYnJ8\",\"welcomeInformation\":\"Xg9cqUJJ\",\"welcomeInformation_static\":\"o_nJd5KS\",\"welcomeInformationStatic\":\"o_nJd5KS\",\"stakingApy\":\"HKeaaGYy\",\"textButton\":\"fole9hpS\",\"sticker\":\"bPhlS4F_\",\"sticker_static\":\"uaQ89610\",\"stickerStatic\":\"uaQ89610\",\"stakingSafeDialog\":\"zNAkvVGS\",\"amountBottomRight\":\"VuUMtt0r\",\"amountBottomRight_error\":\"XziKGimY\",\"amountBottomRightError\":\"XziKGimY\",\"amountBottomRight_slide\":\"D7jfmDqZ\",\"amountBottomRightSlide\":\"D7jfmDqZ\",\"animating\":\"idaRXWqT\",\"from\":\"w5MTAdBs\",\"to\":\"OH6m_v4W\",\"balanceError\":\"XV91oi_1\",\"historyTotalValue\":\"ps_1E9fe\",\"stakingBalance\":\"ZzjyhAIi\",\"balanceResultWrapper\":\"vtSKtwOl\",\"balanceResultWrapper__slide\":\"ri2mpmSG\",\"balanceResultWrapperSlide\":\"ri2mpmSG\",\"balanceResultInput\":\"oiRjkkEM\",\"balanceResultLabel\":\"h10QGypW\",\"balanceStakedLabel\":\"DlWk_wtQ\",\"balanceStakedResult\":\"Zvcxz1_r\",\"balanceResult\":\"ANb8RM_U\",\"stakingInfoModal\":\"WPEajhsz\",\"stakingInfoModal_withHistory\":\"RmyjusO4\",\"stakingInfoModalWithHistory\":\"RmyjusO4\",\"stakingInfo\":\"jqjfDFur\",\"stakingInfo_modal\":\"WPEajhsz\",\"stakingInfoNoHistory\":\"JhvH7wqN\",\"stakingInfoModalContent\":\"adkWFcPE\",\"history\":\"vrPulHrK\",\"historyList\":\"Y0yHbYn0\",\"withBackground\":\"seOnXIX2\",\"stakingInfoLoading\":\"FpmrUch0\",\"stakingInfoLoadingAnimation\":\"HhFmzxoC\",\"stakingInfoClose\":\"hUegI624\",\"stakingInfoButtons\":\"p0aoyqxp\",\"stakingInfoButtons_withMargin\":\"pa9mJcSA\",\"stakingInfoButtonsWithMargin\":\"pa9mJcSA\",\"stakingInfoButtons_adaptiveWidth\":\"KhWpHXOV\",\"stakingInfoButtonsAdaptiveWidth\":\"KhWpHXOV\",\"stakingInfoButton\":\"ANY2XY_3\",\"checkEligibilityButton\":\"aM6EzHZ6\",\"insufficientBalance\":\"rGOjgmuu\",\"unstakeTime\":\"AQ56tknq\",\"unstakeTime_purple\":\"LqS98rhM\",\"unstakeTimePurple\":\"LqS98rhM\",\"unstakeTimeIcon\":\"tyhEzoP5\",\"history_static\":\"s2VvvIeZ\",\"historyStatic\":\"s2VvvIeZ\",\"historyTotal\":\"saWAKbAc\",\"historyTitle\":\"Y0cCgJMS\",\"historyList_static\":\"axMdO17j\",\"historyListStatic\":\"axMdO17j\",\"transactionBanner\":\"qrdHJFDS\",\"unstakeInfoTransition\":\"dyqJuGUL\",\"unstakeInfo\":\"m1LUZiWL\"};","import { Dialog } from '@capacitor/dialog';\nimport React, { memo, type TeactNode, useCallback, useEffect, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport type { Big } from '../../lib/big.js';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_MIDDLE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  CURRENCIES,\n  DEFAULT_PRICE_CURRENCY,\n  ETHENA_ELIGIBILITY_CHECK_URL,\n  HELP_CENTER_ETHENA_URL,\n  JVAULT_URL,\n  SHORT_FRACTION_DIGITS,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport { bigintMax } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { vibrate } from '../../util/haptics';\nimport { openUrl } from '../../util/openUrl';\nimport { throttle } from '../../util/schedulers';\nimport { getStakingMinAmount, getStakingTitle } from '../../util/staking';\nimport { buildUserToken, getIsNativeToken, getNativeToken } from '../../util/tokens';\nimport calcJettonStakingApr from '../../util/ton/calcJettonStakingApr';\nimport { getHostnameFromUrl } from '../../util/url';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\nimport { useTokenDropdown } from './hooks/useTokenDropdown';\n\nimport AmountInput from '../ui/AmountInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport RichNumberField from '../ui/RichNumberField';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  isLoading?: boolean;\n  isViewMode: boolean;\n  apiError?: string;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  stakingState?: ApiStakingState;\n  states?: ApiStakingState[];\n  shouldUseNominators?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency: ApiBaseCurrency;\n}\n\nconst enum BottomRightSlide {\n  Fee,\n  InsufficientBalance,\n  InsufficientFee,\n  BelowMinimumAmount,\n  ApiError,\n}\n\nconst ACTIVE_STATES = new Set([StakingState.StakeInitial, StakingState.None]);\n\nconst runThrottled = throttle((cb) => cb(), 1500, true);\n\nfunction StakingInitial({\n  isActive,\n  isStatic,\n  isLoading,\n  isViewMode,\n  apiError,\n  tokens,\n  tokenBySlug,\n  stakingState,\n  states,\n  shouldUseNominators,\n  isSensitiveDataHidden,\n  baseCurrency,\n}: OwnProps & StateProps) {\n  const {\n    submitStakingInitial, fetchStakingFee, cancelStaking, changeCurrentStaking,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [isSafeInfoModalOpen, openSafeInfoModal, closeSafeInfoModal] = useFlag();\n  const [amount, setAmount] = useState<bigint | undefined>();\n  let isIncorrectAmount = false;\n  let isInsufficientBalance = false;\n  let isInsufficientFee = false;\n  let isBelowMinimumAmount = false;\n\n  const {\n    id: stakingId,\n    type: stakingType,\n    tokenSlug,\n  } = stakingState ?? {};\n\n  const token: UserToken | undefined = useMemo(() => {\n    if (!tokenSlug || !tokens || !tokenBySlug) return undefined;\n    let userToken = tokens.find(({ slug }) => slug === tokenSlug);\n    if (!userToken && tokenSlug in tokenBySlug) {\n      userToken = buildUserToken(tokenBySlug[tokenSlug]);\n    }\n    return userToken;\n  }, [tokenSlug, tokens, tokenBySlug]);\n  const { amount: balance = 0n, symbol, decimals = TONCOIN.decimals } = token ?? {};\n\n  let { annualYield = 0 } = stakingState ?? {};\n  let annualYieldText = `${annualYield}%`;\n  if (stakingState?.type === 'jetton' && amount) {\n    annualYield = calcJettonStakingApr({\n      tvl: stakingState.tvl + amount,\n      dailyReward: stakingState.dailyReward,\n      decimals,\n    });\n  } else if (stakingState?.type === 'ethena') {\n    const { annualYieldStandard, annualYieldVerified } = stakingState;\n    annualYieldText = `${annualYieldStandard}%${annualYieldVerified}%`;\n  }\n\n  const isNativeToken = getIsNativeToken(token?.slug);\n  const nativeToken = useMemo(() => {\n    if (!tokens || !token) return undefined;\n    if (isNativeToken) return token;\n    const nativeSlug = getNativeToken(token.chain).slug;\n    return tokens.find(({ slug }) => slug === nativeSlug);\n  }, [tokens, token, isNativeToken]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const minAmount = getStakingMinAmount(stakingType);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeAmount = isNativeToken && amount ? amount + networkFee : networkFee;\n  const doubleNetworkFee = networkFee * 2n;\n  const shouldLeaveForUnstake = isNativeToken && balance >= doubleNetworkFee;\n  const maxAmount = (() => {\n    let value = balance;\n    if (isNativeToken && value) {\n      value -= shouldLeaveForUnstake ? doubleNetworkFee : networkFee;\n    }\n    return bigintMax(0n, value);\n  })();\n\n  const title = getStakingTitle();\n\n  if (amount !== undefined) {\n    if (Number.isNaN(amount) || amount < 0) {\n      isIncorrectAmount = true;\n    } else if (amount < minAmount) {\n      isBelowMinimumAmount = true;\n    } else if (!maxAmount || amount > balance) {\n      isInsufficientBalance = true;\n    } else if (nativeBalance < networkFee || (isNativeToken && nativeAmount > balance)) {\n      isInsufficientFee = true;\n    }\n  }\n\n  const [selectedToken, selectableTokens] = useTokenDropdown({\n    tokenBySlug,\n    states,\n    shouldUseNominators,\n    selectedStakingId: stakingId,\n  });\n\n  const handleHelpCenterClick = useLastCallback(() => {\n    const url = HELP_CENTER_ETHENA_URL[lang.code as never] ?? HELP_CENTER_ETHENA_URL.en;\n    void openUrl(url, { title: lang('Help Center'), subtitle: getHostnameFromUrl(url) });\n  });\n\n  useEffect(() => {\n    if (!amount) {\n      return;\n    }\n\n    runThrottled(() => {\n      fetchStakingFee({\n        amount,\n      });\n    });\n  }, [amount, fetchStakingFee]);\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isSafeInfoModalOpen) {\n      let text: string[];\n      switch (stakingState?.type) {\n        case 'jetton':\n          text = [\n            // We use `replace` instead of `lang` argument to avoid JSX output\n            `${lang('$safe_staking_description_jetton1').replace('%jvault_link%', 'JVault')}`,\n            `${lang('$safe_staking_description_jetton2')}`,\n          ];\n          break;\n        case 'ethena':\n          text = [\n            `1. ${lang('$safe_staking_ethena_description1')}`,\n            `2. ${lang('$safe_staking_ethena_description2')}`,\n            `3. ${lang('$safe_staking_ethena_description3')}`,\n          ];\n          break;\n        default:\n          text = [\n            `1. ${lang('$safe_staking_description1')}`,\n            `2. ${lang('$safe_staking_description2')}`,\n            `3. ${lang('$safe_staking_description3')}`,\n          ];\n      }\n\n      if (stakingState?.type === 'ethena') {\n        void Dialog.confirm({\n          title: lang(title),\n          message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n          okButtonTitle: lang('Close'),\n          cancelButtonTitle: lang('Help Center'),\n        })\n          .then((result) => {\n            closeSafeInfoModal();\n\n            if (!result.value) {\n              handleHelpCenterClick();\n            }\n          });\n      } else {\n        void Dialog.alert({\n          title: lang(title),\n          message: text.join('\\n\\n').replace(/\\*\\*/g, ''),\n        })\n          .then(closeSafeInfoModal);\n      }\n    }\n  }, [isSafeInfoModalOpen, lang, stakingState, title]);\n\n  const canSubmit = amount\n    && maxAmount\n    && !isViewMode\n    && !isIncorrectAmount\n    && !isBelowMinimumAmount\n    && !isInsufficientFee\n    && !isInsufficientBalance;\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitStakingInitial({ amount });\n  });\n\n  const handleCheckEligibility = useLastCallback(() => {\n    void openUrl(ETHENA_ELIGIBILITY_CHECK_URL);\n  });\n\n  const [error, errorTransitionKey] = useMemo(() => {\n    if (isInsufficientBalance) {\n      return [\n        lang('Insufficient balance'),\n        BottomRightSlide.InsufficientBalance,\n      ];\n    }\n\n    if (isInsufficientFee) {\n      return [\n        lang('$insufficient_fee', { fee: formatCurrency(toDecimal(networkFee), nativeToken?.symbol ?? '') }),\n        BottomRightSlide.InsufficientFee,\n      ];\n    }\n\n    if (isBelowMinimumAmount) {\n      return [\n        lang('$min_value', { value: formatCurrency(toDecimal(minAmount, decimals), symbol ?? '') }),\n        BottomRightSlide.BelowMinimumAmount,\n      ];\n    }\n\n    return apiError\n      ? [lang(apiError), BottomRightSlide.ApiError]\n      : [undefined, BottomRightSlide.Fee];\n  }, [\n    apiError, decimals, isBelowMinimumAmount, isInsufficientBalance, isInsufficientFee, lang, minAmount,\n    nativeToken?.symbol, networkFee, symbol,\n  ]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    let content: string | TeactNode[] | React.JSX.Element = ' ';\n\n    if (error) {\n      content = (\n        <span className={styles.balanceError}>{error}</span>\n      );\n    } else {\n      content = token ? lang('$fee_value', {\n        fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n      }) : '';\n    }\n\n    return (\n      <Transition\n        className={buildClassName(\n          styles.amountBottomRight,\n          isIncorrectAmount && styles.amountBottomRight_error,\n          className,\n        )}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"semiFade\"\n        activeKey={errorTransitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [error, errorTransitionKey, isIncorrectAmount, lang, realFee, token]);\n\n  function renderJettonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton1', {\n            jvault_link: (\n              <a href={JVAULT_URL} target=\"_blank\" rel=\"noreferrer\"><b>JVault</b></a>\n            ),\n          }))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description_jetton2'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderTonDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderEthenaDescription() {\n    return (\n      <>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description1'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description2'))}\n        </p>\n        <p className={modalStyles.text}>\n          {renderText(lang('$safe_staking_ethena_description3'))}\n        </p>\n      </>\n    );\n  }\n\n  function renderSafeDescription() {\n    switch (stakingState!.type) {\n      case 'jetton':\n        return renderJettonDescription();\n\n      case 'ethena':\n        return renderEthenaDescription();\n\n      default:\n        return renderTonDescription();\n    }\n  }\n\n  function renderSafeInfoModal() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isSafeInfoModalOpen}\n        title={lang(title)}\n        onClose={closeSafeInfoModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        {!!stakingState && renderSafeDescription()}\n        <div className={modalStyles.buttons}>\n          {stakingState!.type === 'ethena' && (\n            <Button onClick={handleHelpCenterClick}>\n              {lang('Help Center')}\n            </Button>\n          )}\n          <Button onClick={closeSafeInfoModal}>{lang('Close')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  function renderStakingResult() {\n    const amountBig = toBig(amount ?? 0, decimals);\n    let currentAmount: Big;\n    let prefix: string | undefined;\n    let suffix: string | undefined;\n\n    if (amountInputProps.isBaseCurrency) {\n      currentAmount = amountBig.mul(token?.price ?? 0);\n      const { shortSymbol } = CURRENCIES[baseCurrency];\n      if (shortSymbol) {\n        prefix = shortSymbol;\n      } else {\n        suffix = baseCurrency;\n      }\n    } else {\n      currentAmount = amountBig;\n    }\n\n    const balanceResult = currentAmount.mul((annualYield / 100) + 1).toString();\n\n    return (\n      <Transition\n        activeKey={amountInputProps.isBaseCurrency ? 0 : 1}\n        name=\"semiFade\"\n        className={styles.balanceResultWrapper}\n        slideClassName={styles.balanceResultWrapper__slide}\n        shouldCleanup\n      >\n        <RichNumberField\n          labelText={lang('Est. balance in a year')}\n          zeroValue=\"...\"\n          value={balanceResult}\n          decimals={SHORT_FRACTION_DIGITS}\n          prefix={prefix}\n          suffix={suffix}\n          isStatic={isStatic}\n          inputClassName={styles.balanceResultInput}\n          labelClassName={styles.balanceResultLabel}\n          valueClassName={styles.balanceResult}\n        />\n      </Transition>\n    );\n  }\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    cancelStaking();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  const amountInputProps = useAmountInputState({\n    amount,\n    token,\n    baseCurrency,\n    onAmountChange: setAmount,\n    onTokenChange: handleChangeStaking,\n  });\n\n  return (\n    <form\n      className={isStatic ? undefined : modalStyles.transitionContent}\n      onSubmit={handleSubmit}\n    >\n      <div className={buildClassName(styles.welcome, isStatic && styles.welcome_static)}>\n        <AnimatedIconWithPreview\n          size={isStatic ? ANIMATED_STICKER_MIDDLE_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          className={buildClassName(styles.sticker, isStatic && styles.sticker_static)}\n          tgsUrl={ANIMATED_STICKERS_PATHS.wait}\n          previewUrl={ANIMATED_STICKERS_PATHS.waitPreview}\n        />\n        <div className={buildClassName(styles.welcomeInformation, isStatic && styles.welcomeInformation_static)}>\n          <div>{lang('Earn from your tokens while holding them', { symbol })}</div>\n          <div className={styles.stakingApy}>{lang('Est. %annual_yield%', { annual_yield: annualYieldText })}</div>\n          {stakingType === 'ethena' && (\n            <Button isText className={styles.textButton} onClick={handleCheckEligibility}>\n              {lang('Check eligibility')}\n            </Button>\n          )}\n          <Button isText className={styles.textButton} onClick={openSafeInfoModal}>\n            {lang(getStakingTitle(stakingType))}\n          </Button>\n        </div>\n      </div>\n\n      <AmountInput\n        {...amountInputProps}\n        maxAmount={maxAmount}\n        token={selectedToken}\n        allTokens={selectableTokens}\n        isStatic={isStatic}\n        hasError={isIncorrectAmount || isInsufficientBalance}\n        isMaxAmountLoading={!selectedToken}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        renderBottomRight={renderBottomRight}\n        onPressEnter={handleSubmit}\n      />\n\n      {renderStakingResult()}\n\n      {!isViewMode && (\n        <div className={modalStyles.buttons}>\n          <Button\n            isPrimary\n            isSubmit\n            isDisabled={!canSubmit}\n            isLoading={isLoading}\n          >\n            {lang('$stake_asset', { symbol: token?.symbol })}\n          </Button>\n        </div>\n      )}\n      {renderSafeInfoModal()}\n    </form>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const accountState = selectCurrentAccountState(global);\n      const tokens = selectCurrentAccountTokens(global);\n      const tokenBySlug = global.tokenInfo.bySlug;\n      const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n\n      const {\n        state,\n        isLoading,\n        error: apiError,\n      } = global.currentStaking;\n\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const stakingState = selectAccountStakingState(global, global.currentAccountId!);\n\n      return {\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        isLoading: isLoading && ACTIVE_STATES.has(state),\n        tokens,\n        tokenBySlug,\n        apiError,\n        stakingState,\n        states,\n        shouldUseNominators: accountState?.staking?.shouldUseNominators,\n        isSensitiveDataHidden,\n        baseCurrency,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(StakingInitial),\n);\n","import { DAYS_IN_YEAR } from '../../api/constants';\nimport { toBig } from '../decimals';\n\nexport default function calcJettonStakingApr({\n  tvl, dailyReward, decimals,\n}: {\n  tvl: bigint;\n  dailyReward: bigint;\n  decimals: number;\n}) {\n  if (!tvl) {\n    return 0;\n  }\n\n  const apr = toBig(dailyReward, decimals)\n    .div(toBig(tvl, decimals))\n    .mul(DAYS_IN_YEAR)\n    .mul(100)\n    .toFixed(2);\n\n  return Number(apr);\n}\n","export const SEC = 1000;\nexport const MINUTE = 60 * SEC;\nexport const DAYS_IN_YEAR = 365;\nexport const FIRST_TRANSACTIONS_LIMIT = 50;\n\nexport const FAKE_TX_ID = 'fakeTxId';\n","import React, { memo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { GlobalState } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport StakingInitial from './StakingInitial';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  stakingState?: ApiStakingState;\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  isMultichainAccount: boolean;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.StakeInitial,\n  StakingState.StakePassword,\n  StakingState.StakeConnectHardware,\n  StakingState.StakeConfirmHardware,\n  StakingState.StakeComplete,\n]);\n\nfunction StakeModal({\n  state,\n  stakingState,\n  isLoading,\n  amount,\n  error,\n  tokenBySlug,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    startStaking,\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingPassword,\n    submitStakingHardware,\n    openStakingInfo,\n  } = getActions();\n\n  const { tokenSlug } = stakingState ?? {};\n\n  const token = tokenSlug && tokenBySlug ? tokenBySlug[tokenSlug] : undefined;\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n  const [renderedStakingAmount, setRenderedStakingAmount] = useState(amount);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.StakePassword) {\n      clearStakingError();\n      setStakingScreen({ state: StakingState.StakeInitial });\n    }\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setRenderedStakingAmount(amount);\n    submitStakingHardware();\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedStakingAmount(amount);\n    submitStakingPassword({ password });\n  });\n\n  const handleViewStakingInfoClick = useLastCallback(() => {\n    cancelStaking();\n    openStakingInfo();\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !amount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"purple\"\n        text={formatCurrency(toDecimal(amount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Staking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          error={error}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"staking\"\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n          skipAuthScreen\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Coins have been staked!')} onClose={cancelStaking} />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color=\"purple\"\n            playAnimation={isActive}\n            amount={renderedStakingAmount}\n            decimals={token?.decimals}\n            tokenSymbol={token?.symbol}\n            noSign\n            firstButtonText={lang('View')}\n            secondButtonText={lang('Stake More')}\n            onFirstButtonClick={handleViewStakingInfoClick}\n            onSecondButtonClick={startStaking}\n          />\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.StakeInitial:\n        return (\n          <>\n            <ModalHeader title={lang('$stake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n            <StakingInitial isActive={isActive} />\n          </>\n        );\n\n      case StakingState.StakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.StakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.StakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.StakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"stake\"\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={renderingKey === StakingState.StakePassword}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const tokenBySlug = global.tokenInfo.bySlug;\n\n  return {\n    ...global.currentStaking,\n    stakingState,\n    tokenBySlug,\n    isMultichainAccount,\n  };\n})(StakeModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiEthenaStakingState, ApiJettonStakingState } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { StakingState } from '../../global/types';\n\nimport { SHORT_FRACTION_DIGITS, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './StakingClaimModal.module.scss';\n\ninterface StateProps {\n  stakingState?: ApiJettonStakingState | ApiEthenaStakingState;\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: StakingState;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.ClaimPassword,\n  StakingState.ClaimConfirmHardware,\n  StakingState.ClaimConnectHardware,\n  StakingState.ClaimComplete,\n]);\n\nfunction StakingClaimModal({\n  stakingState,\n  isOpen,\n  tokens,\n  isLoading,\n  address,\n  error,\n  state = StakingState.ClaimPassword,\n  isHardwareAccount,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    submitStakingClaim,\n    submitStakingClaimHardware,\n    cancelStakingClaim,\n    clearStakingError,\n  } = getActions();\n\n  const {\n    tokenSlug,\n  } = stakingState ?? {};\n\n  const rewardAmount = stakingState && 'unclaimedRewards' in stakingState\n    ? stakingState.unclaimedRewards\n    : stakingState?.unstakeRequestAmount ?? 0n;\n\n  const lang = useLang();\n\n  const token = useMemo(() => tokens?.find(({ slug }) => slug === tokenSlug), [tokens, tokenSlug]);\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const nativeBalance = nativeToken?.amount ?? 0n;\n\n  const { gas: networkFee, real: realNetworkFee } = getTonStakingFees(stakingState?.type).claim!;\n  const isNativeEnough = nativeBalance > networkFee;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = state === StakingState.ClaimComplete || (!isHardwareAccount && !getDoesUsePinPad());\n  const modalTitle = withModalHeader\n    ? lang(state === StakingState.ClaimComplete\n      ? 'Coins have been unstaked!'\n      : stakingState?.type === 'ethena'\n        ? 'Confirm Unstaking'\n        : 'Confirm Rewards Claim')\n    : undefined;\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (!isNativeEnough) return;\n    submitStakingClaim({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (!isNativeEnough) return;\n    submitStakingClaimHardware();\n  });\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n    const content = isSensitiveDataHidden\n      ? `*** ${token!.symbol}`\n      : formatCurrency(toDecimal(rewardAmount, token!.decimals), token!.symbol, SHORT_FRACTION_DIGITS);\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={token}\n          withChainIcon={isMultichainAccount}\n          text={content}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={address && shortenAddress(address)}\n        />\n        <div className={feeClassName}>\n          {token && renderText(lang('$fee_value_bold', {\n            fee: (\n              <Fee\n                terms={{ native: isNativeEnough ? realNetworkFee : networkFee }}\n                precision={isNativeEnough ? 'approximate' : 'lessThan'}\n                token={token}\n              />\n            ),\n          }))}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.ClaimConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelStakingClaim}\n          />\n        );\n\n      case StakingState.ClaimConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelStakingClaim}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case StakingState.ClaimPassword:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"claim\"\n            error={!isNativeEnough ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelStakingClaim}\n            onUpdate={clearStakingError}\n            skipAuthScreen\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n\n      case StakingState.ClaimComplete:\n        return (\n          <div className={modalStyles.transitionContent}>\n            <TransferResult\n              isSensitiveDataHidden={isSensitiveDataHidden}\n              color=\"green\"\n              playAnimation={isActive}\n              amount={rewardAmount}\n              tokenSymbol={token?.symbol}\n              decimals={token?.decimals}\n              noSign\n            />\n\n            <div className={styles.unstakeInfo}>\n              {lang('$unstake_information_instantly')}\n            </div>\n\n            <div className={modalStyles.buttons}>\n              <Button onClick={cancelStakingClaim} isPrimary>{lang('Close')}</Button>\n            </div>\n          </div>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={modalTitle}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"staking-claim\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelStakingClaim}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const { addressByChain } = selectAccount(global, accountId!) || {};\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    state,\n    isLoading,\n    error,\n  } = global?.currentStaking || {};\n\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n  const tokens = selectCurrentAccountTokens(global);\n  const canBeClaimed = stakingState?.type === 'jetton' || stakingState?.type === 'ethena';\n\n  return {\n    stakingState: canBeClaimed ? stakingState : undefined,\n    isOpen: IS_OPEN_STATES.has(state),\n    state,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, accountId!),\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(StakingClaimModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"kJywiaI2\",\"passwordModalDialog\":\"FYtlcmCw\",\"transactionBanner\":\"yYT_DSGe\",\"operationInfoFee\":\"k75dvmdJ\",\"operationInfoFeeWithGap\":\"F2nQ3VmO\",\"unstakeInfo\":\"zw06OBVe\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatHumanDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './StakingProfileItem.module.scss';\n\ninterface OwnProps {\n  tonToken: UserToken;\n  timestamp: number;\n  profit: string;\n  isSensitiveDataHidden?: true;\n}\n\nfunction StakingProfitItem({\n  tonToken, timestamp, profit, isSensitiveDataHidden,\n}: OwnProps) {\n  const lang = useLang();\n  const amountCols = useMemo(() => getPseudoRandomNumber(4, 10, timestamp.toString()), [timestamp]);\n\n  return (\n    <div className={styles.item}>\n      <i className={buildClassName(styles.icon, 'icon-earn')} aria-hidden />\n      <div className={styles.leftBlock}>\n        <div className={styles.operationName}>{lang('Earned')}</div>\n        <div className={styles.date}>{formatHumanDay(lang, timestamp)}, {formatTime(timestamp)}</div>\n      </div>\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cellSize={8}\n        rows={2}\n        cols={amountCols}\n        align=\"right\"\n        className={styles.amount}\n      >\n        {formatCurrencyExtended(profit, tonToken.symbol)}\n      </SensitiveData>\n    </div>\n  );\n}\n\nexport default memo(StakingProfitItem);\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"nq4YjGn3\",\"icon\":\"jLdRlENh\",\"leftBlock\":\"nxAiUgO_\",\"amount\":\"x2kd8DjZ\",\"operationName\":\"uDw7ob8E\",\"date\":\"aJl0mknc\"};","import React, {\n  memo, type TeactNode, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingHistory, ApiStakingState, ApiTokenWithPrice } from '../../api/types';\nimport type { Theme, UserToken } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ETHENA_ELIGIBILITY_CHECK_URL,\n  SHORT_FRACTION_DIGITS,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectAccountStakingHistory,\n  selectAccountStakingState,\n  selectAccountStakingStates,\n  selectAccountStakingTotalProfit,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { openUrl } from '../../util/openUrl';\nimport { getStakingStateStatus, getUnstakeTime } from '../../util/staking';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport { useTokenDropdown } from './hooks/useTokenDropdown';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\nimport Spinner from '../ui/Spinner';\nimport TokenDropdown from '../ui/TokenDropdown';\nimport Transition from '../ui/Transition';\nimport StakingProfitItem from './StakingProfitItem';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isStatic?: boolean;\n  onClose?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  states?: ApiStakingState[];\n  stakingState?: ApiStakingState;\n  totalProfit: bigint;\n  stakingHistory?: ApiStakingHistory;\n  tokens?: UserToken[];\n  tokenBySlug?: Record<string, ApiTokenWithPrice>;\n  theme: Theme;\n  shouldUseNominators?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst HISTORY_SCROLL_APPEARANCE_HEIGHT_PX = 640;\nconst FRACTION_DIGITS = 2;\n\nfunction StakingInfoContent({\n  states,\n  stakingState,\n  isActive,\n  isStatic,\n  totalProfit,\n  stakingHistory,\n  tokens,\n  tokenBySlug,\n  theme,\n  shouldUseNominators,\n  isViewMode,\n  isSensitiveDataHidden,\n  onClose,\n}: OwnProps & StateProps) {\n  const {\n    startStaking,\n    startUnstaking,\n    startStakingClaim,\n    fetchStakingHistory,\n    changeCurrentStaking,\n  } = getActions();\n\n  const {\n    id: stakingId,\n    tokenSlug,\n    balance: amount,\n    annualYield = 0,\n    unstakeRequestAmount,\n    type: stakingType,\n  } = stakingState ?? {};\n\n  const unstakeTime = getUnstakeTime(stakingState);\n  const canBeClaimed = stakingState ? getStakingStateStatus(stakingState) === 'readyToClaim' : undefined;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => tokenSlug === slug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  const { decimals, symbol } = token ?? {};\n\n  const lang = useLang();\n  const isLoading = amount === undefined;\n  const hasHistory = Boolean(stakingHistory?.length);\n  const {\n    shouldRender: shouldRenderSpinner,\n    ref: spinnerRef,\n  } = useShowTransition({\n    isOpen: isLoading && isActive,\n    withShouldRender: true,\n  });\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens])!;\n  const forceUpdate = useForceUpdate();\n  const { height } = useWindowSize();\n  const appTheme = useAppTheme(theme);\n  const {\n    shouldRender: shouldRenderTotalAmount,\n    ref: totalAmountRef,\n  } = useShowTransition({\n    isOpen: !isSensitiveDataHidden,\n    withShouldRender: true,\n  });\n\n  const unclaimedRewards = stakingState?.type === 'jetton'\n    ? stakingState.unclaimedRewards\n    : undefined;\n\n  // Updates the unstaking countdown\n  useInterval(forceUpdate, unstakeRequestAmount ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isActive) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isActive]);\n\n  const handleStakeClick = useLastCallback(() => {\n    onClose?.();\n    startStaking();\n  });\n\n  const handleUnstakeClick = useLastCallback(() => {\n    onClose?.();\n    startUnstaking();\n  });\n\n  const handleClaimClick = useLastCallback(() => {\n    onClose?.();\n    startStakingClaim();\n  });\n\n  let stakingResult = '0';\n  let balanceResult = '0';\n  if (amount) {\n    stakingResult = toBig(amount, decimals).round(SHORT_FRACTION_DIGITS).toString();\n    balanceResult = toBig(amount, decimals).mul((annualYield / 100) + 1).round(SHORT_FRACTION_DIGITS).toString();\n  }\n\n  const handleCheckEligibility = useLastCallback(() => {\n    void openUrl(ETHENA_ELIGIBILITY_CHECK_URL);\n  });\n\n  const [selectedToken, selectableTokens] = useTokenDropdown({\n    tokenBySlug,\n    states,\n    shouldUseNominators,\n    selectedStakingId: stakingId,\n    isViewMode,\n  });\n\n  function renderUnstakeDescription() {\n    let text: string | TeactNode[] | undefined;\n\n    if (unstakeTime) {\n      text = lang(stakingType === 'nominators' ? '$unstaking_when_receive' : '$unstaking_when_receive_with_amount', {\n        time: (\n          <strong>\n            {formatRelativeHumanDateTime(lang.code, unstakeTime)}\n          </strong>\n        ),\n        amount: (\n          <strong>\n            {formatCurrency(toDecimal(unstakeRequestAmount ?? 0n, decimals), symbol!).replace(' ', '\\u00A0')}\n          </strong>\n        ),\n      });\n    }\n\n    return (\n      <div className={buildClassName(styles.unstakeTime, styles.unstakeTime_purple)}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n        />\n        <div>\n          {text}\n        </div>\n      </div>\n    );\n  }\n\n  function renderHistory() {\n    return (\n      <div className={buildClassName(styles.history, isStatic && styles.history_static)}>\n        {shouldRenderTotalAmount && (\n          <div ref={totalAmountRef} className={styles.historyTotal}>\n            {lang('$total', {\n              value: (\n                <span className={styles.historyTotalValue}>\n                  {formatCurrency(toDecimal(totalProfit), TONCOIN.symbol)}\n                </span>\n              ),\n            })}\n          </div>\n        )}\n        <div className={styles.historyTitle}>{lang('Earning History')}</div>\n        <div className={buildClassName(\n          styles.historyList,\n          isStatic && styles.historyList_static,\n          isStatic && 'custom-scroll',\n          !isStatic && height >= HISTORY_SCROLL_APPEARANCE_HEIGHT_PX && 'custom-scroll',\n        )}\n        >\n          {stakingHistory?.map((record) => (\n            <StakingProfitItem\n              key={record.timestamp}\n              profit={record.profit}\n              timestamp={record.timestamp}\n              tonToken={tonToken}\n              isSensitiveDataHidden={isSensitiveDataHidden}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.stakingInfo,\n    !isStatic && styles.stakingInfo_modal,\n    !hasHistory && styles.stakingInfoNoHistory,\n    isStatic && 'staking-info',\n  );\n\n  const handleChangeStaking = useLastCallback((id: string) => {\n    onClose?.();\n\n    changeCurrentStaking({ stakingId: id, shouldReopenModal: !isStatic });\n  });\n\n  function renderRewards() {\n    const rewardString = toDecimal(unclaimedRewards!, decimals);\n\n    return (\n      <>\n        <RichNumberField\n          isSensitiveData\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          sensitiveDataMaskSkin=\"purple\"\n          labelText={lang('Accumulated Rewards')}\n          zeroValue=\"...\"\n          value={rewardString}\n          decimals={decimals}\n          suffix={symbol}\n          labelClassName={styles.balanceStakedLabel}\n          valueClassName={styles.balanceResult}\n        />\n        {!isViewMode && (\n          <div className={styles.stakingInfoButtons}>\n            <Button\n              className={styles.stakingInfoButton}\n              isDisabled={isLoading}\n              onClick={handleClaimClick}\n            >\n              {lang('Claim')}\n            </Button>\n          </div>\n        )}\n      </>\n    );\n  }\n\n  function render() {\n    return (\n      <>\n        <div className={fullClassName}>\n          {!isStatic && (\n            <ModalHeader\n              title={lang('Staking')}\n              closeClassName={styles.stakingInfoClose}\n              onClose={onClose}\n            />\n          )}\n\n          <RichNumberField\n            isSensitiveData\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            sensitiveDataMaskSkin=\"purple\"\n            labelText={lang('Currently Staked')}\n            zeroValue=\"...\"\n            value={stakingResult}\n            decimals={decimals}\n            className={styles.stakingBalance}\n            labelClassName={styles.balanceStakedLabel}\n            valueClassName={styles.balanceStakedResult}\n          >\n            <div className={styles.stakingInfoLoading}>\n              {shouldRenderSpinner && (\n                <Spinner ref={spinnerRef} className={styles.stakingInfoLoadingAnimation} />\n              )}\n            </div>\n\n            <TokenDropdown\n              selectedToken={selectedToken}\n              allTokens={selectableTokens}\n              theme=\"purple\"\n              onChange={handleChangeStaking}\n            />\n\n          </RichNumberField>\n          {unstakeRequestAmount && unstakeRequestAmount > 0n && stakingType !== 'ethena'\n            ? renderUnstakeDescription()\n            : (\n              <>\n                <RichNumberField\n                  isSensitiveData\n                  isSensitiveDataHidden={isSensitiveDataHidden}\n                  sensitiveDataMaskSkin=\"purple\"\n                  labelText={lang('Est. balance in a year')}\n                  zeroValue=\"...\"\n                  value={balanceResult}\n                  decimals={decimals}\n                  suffix={symbol}\n                  labelClassName={styles.balanceStakedLabel}\n                  valueClassName={styles.balanceResult}\n                />\n                {stakingType === 'ethena' && !canBeClaimed && !!unstakeRequestAmount && renderUnstakeDescription()}\n                {!isViewMode && (\n                  <div\n                    className={buildClassName(\n                      styles.stakingInfoButtons,\n                      stakingType === 'ethena' && styles.stakingInfoButtonsAdaptiveWidth,\n                      !!unclaimedRewards && styles.stakingInfoButtonsWithMargin,\n                    )}\n                  >\n                    <Button\n                      className={styles.stakingInfoButton}\n                      isPrimary\n                      isDisabled={isLoading}\n                      onClick={handleStakeClick}\n                    >\n                      {lang('Stake More')}\n                    </Button>\n                    {(stakingType !== 'ethena' || !canBeClaimed) && (\n                      <Button\n                        className={styles.stakingInfoButton}\n                        isDisabled={isLoading}\n                        onClick={handleUnstakeClick}\n                      >\n                        {lang(stakingType === 'ethena' ? 'Request Unstaking' : 'Unstake')}\n                      </Button>\n                    )}\n                    {canBeClaimed && (\n                      <Button\n                        className={styles.stakingInfoButton}\n                        isDisabled={isLoading}\n                        onClick={handleClaimClick}\n                      >\n                        {lang('Unstake %amount%', {\n                          amount: isSensitiveDataHidden\n                            ? `*** ${symbol}`\n                            : formatCurrency(toDecimal(unstakeRequestAmount!, decimals), symbol!, FRACTION_DIGITS),\n                        })}\n                      </Button>\n                    )}\n                  </div>\n                )}\n                {!isViewMode && stakingType === 'ethena' && (\n                  <Button isText className={styles.checkEligibilityButton} onClick={handleCheckEligibility}>\n                    {lang('Check eligibility for max APY')}\n                  </Button>\n                )}\n                {!!unclaimedRewards && renderRewards()}\n              </>\n            )}\n        </div>\n\n        {hasHistory && renderHistory()}\n      </>\n    );\n  }\n\n  // No need to animate if it's in modal (`!isStatic`), because the modal is animated itself\n  const activeKey = useTransitionActiveKey([isStatic, stakingId], !isStatic);\n\n  return (\n    <Transition\n      name=\"fade\"\n      activeKey={activeKey}\n      shouldCleanup\n      className={styles.stakingTransition}\n      slideClassName={isStatic ? 'staking-info' : undefined}\n    >\n      {render()}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const {\n    settings: { theme, isSensitiveDataHidden },\n    tokenInfo: { bySlug: tokenBySlug },\n  } = global;\n  const accountState = selectCurrentAccountState(global);\n\n  const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  const stakingHistory = accountId ? selectAccountStakingHistory(global, accountId) : undefined;\n  const totalProfit = accountId ? selectAccountStakingTotalProfit(global, accountId) : 0n;\n\n  return {\n    stakingState,\n    states,\n    totalProfit,\n    stakingHistory,\n    tokens: selectCurrentAccountTokens(global),\n    tokenBySlug,\n    theme,\n    shouldUseNominators: accountState?.staking?.shouldUseNominators,\n    isSensitiveDataHidden,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(StakingInfoContent));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TONCOIN } from '../../config';\nimport { selectAccountStakingHistory, selectAccountStakingState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport Modal from '../ui/Modal';\nimport StakingInfoContent from './StakingInfoContent';\n\nimport styles from './Staking.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokenSlug?: string;\n  hasHistory?: boolean;\n}\n\nfunction StakingInfoModal({\n  isOpen,\n  tokenSlug,\n  hasHistory,\n  onClose,\n}: OwnProps & StateProps) {\n  const { fetchStakingHistory } = getActions();\n  const withBackground = tokenSlug !== TONCOIN.slug;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={buildClassName(styles.stakingInfoModalContent, withBackground && styles.withBackground)}\n      nativeBottomSheetKey=\"staking-info\"\n      onClose={onClose}\n      forceFullNative={hasHistory}\n    >\n      <StakingInfoContent isActive={isOpen} onClose={onClose} />\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountId = global.currentAccountId;\n  const stakingHistory = accountId\n    ? selectAccountStakingHistory(global, accountId)\n    : undefined;\n  const stakingState = accountId ? selectAccountStakingState(global, accountId) : undefined;\n\n  return {\n    tokenSlug: stakingState?.tokenSlug,\n    hasHistory: Boolean(stakingHistory?.length),\n  };\n})(StakingInfoModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../api/types';\nimport type { GlobalState, Theme, UserToken } from '../../global/types';\nimport { ApiTransactionDraftError } from '../../api/types';\nimport { StakingState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  DEFAULT_PRICE_CURRENCY,\n  IS_CAPACITOR,\n  TONCOIN,\n  VALIDATION_PERIOD_MS,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatRelativeHumanDateTime } from '../../util/dateFormat';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { getTonStakingFees } from '../../util/fee/getTonOperationFees';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { getIsLongUnstake, getUnstakeTime } from '../../util/staking';\nimport { getIsMobileTelegramApp } from '../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport TransferResult from '../common/TransferResult';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AmountInput from '../ui/AmountInput';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Staking.module.scss';\n\ntype StateProps = GlobalState['currentStaking'] & {\n  isViewMode: boolean;\n  tokens?: UserToken[];\n  baseCurrency: ApiBaseCurrency;\n  isNominators?: boolean;\n  theme: Theme;\n  isMultichainAccount: boolean;\n  stakingState?: ApiStakingState;\n  isSensitiveDataHidden?: true;\n};\n\nconst IS_OPEN_STATES = new Set([\n  StakingState.UnstakeInitial,\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n  StakingState.UnstakeComplete,\n]);\n\nconst FULL_SIZE_NBS_STATES = new Set([\n  StakingState.UnstakePassword,\n  StakingState.UnstakeConnectHardware,\n  StakingState.UnstakeConfirmHardware,\n]);\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\n\nfunction UnstakeModal({\n  state,\n  isViewMode,\n  isLoading,\n  error,\n  tokens,\n  baseCurrency,\n  isNominators,\n  isMultichainAccount,\n  theme,\n  amount,\n  stakingState,\n  isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    setStakingScreen,\n    cancelStaking,\n    clearStakingError,\n    submitStakingInitial,\n    submitStakingPassword,\n    submitStakingHardware,\n    fetchStakingHistory,\n  } = getActions();\n\n  const {\n    type: stakingType,\n    tokenSlug,\n    balance: stakingBalance,\n  } = stakingState ?? {};\n\n  const lang = useLang();\n  const isOpen = IS_OPEN_STATES.has(state);\n\n  const { gas: networkFee, real: realFee } = getTonStakingFees(stakingState?.type).stake;\n\n  const nativeToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n  const isNativeEnough = nativeToken && nativeToken.amount >= networkFee;\n  const instantAvailable = stakingState?.type === 'liquid' ? stakingState.instantAvailable : undefined;\n\n  const token = useMemo(() => {\n    return tokenSlug ? tokens?.find(({ slug }) => slug === tokenSlug) : undefined;\n  }, [tokenSlug, tokens]);\n\n  let hasAmountError = false;\n  let isInsufficientBalance = false;\n\n  const isOnlyFullAmount = isNominators;\n  const [unstakeAmount, setUnstakeAmount] = useState(isOnlyFullAmount ? stakingBalance : undefined);\n  const [successUnstakeAmount, setSuccessUnstakeAmount] = useState<bigint | undefined>(undefined);\n\n  const unstakeTime = getUnstakeTime(stakingState);\n  const isLongUnstake = stakingState ? getIsLongUnstake(stakingState, unstakeAmount) : undefined;\n\n  const [unstakeDate, setUnstakeDate] = useState<number>(unstakeTime ?? Date.now() + VALIDATION_PERIOD_MS);\n  const forceUpdate = useForceUpdate();\n  const appTheme = useAppTheme(theme);\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const isUnstakeDisabled = !isNativeEnough || isInsufficientBalance || !unstakeAmount;\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n      setUnstakeAmount(isOnlyFullAmount ? stakingBalance : undefined);\n    }\n  }, [isOpen, fetchStakingHistory, isOnlyFullAmount, stakingBalance]);\n\n  useSyncEffect(() => {\n    if (unstakeTime) {\n      setUnstakeDate(unstakeTime);\n    }\n  }, [unstakeTime]);\n\n  if (error === ApiTransactionDraftError.InsufficientBalance) {\n    isInsufficientBalance = true;\n  }\n\n  const refreshUnstakeDate = useLastCallback(() => {\n    if (unstakeDate < Date.now()) {\n      fetchStakingHistory();\n    }\n    forceUpdate();\n  });\n\n  useInterval(refreshUnstakeDate, UPDATE_UNSTAKE_DATE_INTERVAL_MS);\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === StakingState.UnstakePassword) {\n      setStakingScreen({ state: StakingState.UnstakeInitial });\n    }\n  });\n\n  const handleStartUnstakeClick = useLastCallback(() => {\n    submitStakingInitial({ isUnstaking: true, amount: unstakeAmount });\n  });\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setSuccessUnstakeAmount(amount);\n\n    submitStakingPassword({ password, isUnstaking: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    setSuccessUnstakeAmount(amount);\n    submitStakingHardware({ isUnstaking: true });\n  });\n\n  function renderTransactionBanner() {\n    if (!token || !unstakeAmount) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={token}\n        withChainIcon={isMultichainAccount}\n        color=\"green\"\n        text={formatCurrency(toDecimal(unstakeAmount, token.decimals), token.symbol)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  if (unstakeAmount !== undefined) {\n    if (unstakeAmount < 0) {\n      hasAmountError = true;\n    } else if (!stakingBalance || unstakeAmount > stakingBalance) {\n      hasAmountError = true;\n      isInsufficientBalance = true;\n    }\n  }\n\n  const amountInputProps = useAmountInputState({\n    amount: unstakeAmount,\n    token,\n    baseCurrency,\n    isAmountReadonly: isOnlyFullAmount,\n    onAmountChange: setUnstakeAmount,\n  });\n\n  // Wa want to render just the token name, not a token select button. To achieve that, we rely on the fact that\n  // `Dropdown` renders with no button border when there is only 1 item.\n  const selectableTokens = useMemo(() => token && [token], [token]);\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    const activeKey = isInsufficientBalance ? 0\n      : !isNativeEnough ? 1\n        : instantAvailable ? 2\n          : 3;\n\n    let content: string | React.JSX.Element | TeactNode[] = token ? lang('$fee_value', {\n      fee: <Fee terms={{ native: realFee }} precision=\"approximate\" token={token} />,\n    }) : '';\n\n    if (token) {\n      if (isInsufficientBalance) {\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (!isNativeEnough) {\n        content = (\n          <span className={styles.balanceError}>\n            {lang('$insufficient_fee', {\n              fee: formatCurrency(toBig(networkFee), nativeToken?.symbol ?? ''),\n            })}\n          </span>\n        );\n      } else if (instantAvailable) {\n        content = lang('$unstake_up_to_information', {\n          value: formatCurrency(toDecimal(instantAvailable, token.decimals), token.symbol),\n        });\n      }\n    }\n\n    return (\n      <Transition\n        className={buildClassName(styles.amountBottomRight, className)}\n        slideClassName={styles.amountBottomRight_slide}\n        name=\"semiFade\"\n        activeKey={activeKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [instantAvailable, isInsufficientBalance, isNativeEnough, lang, nativeToken?.symbol, networkFee, realFee, token]);\n\n  function renderUnstakeTimer() {\n    const unstakeDateText = stakingType === 'ethena'\n      ? renderText(lang('$unstaking_when_receive_ethena'))\n      : lang('$unstaking_when_receive', {\n        time: (\n          <strong>{formatRelativeHumanDateTime(lang.code, unstakeDate)}</strong>\n        ),\n      });\n\n    return (\n      <div className={buildClassName(styles.unstakeTime)}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>{unstakeDateText}</div>\n      </div>\n    );\n  }\n\n  function renderUnstakeInfo() {\n    const shouldShowInfo = !isInsufficientBalance && unstakeAmount;\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={!shouldShowInfo ? 0 : !isLongUnstake ? 1 : 2}\n        className={styles.unstakeInfoTransition}\n      >\n        {!shouldShowInfo ? undefined\n          : (\n            !isLongUnstake\n              ? (\n                <div className={styles.unstakeInfo}>\n                  {lang('$unstake_information_instantly')}\n                </div>\n              )\n              : renderUnstakeTimer()\n          )}\n      </Transition>\n    );\n  }\n\n  function renderInitial() {\n    return (\n      <>\n        <ModalHeader title={lang('$unstake_asset', { symbol: token?.symbol })} onClose={cancelStaking} />\n        <div className={modalStyles.transitionContent}>\n          <AmountInput\n            {...amountInputProps}\n            labelText={lang('Amount to unstake')}\n            maxAmount={stakingBalance}\n            token={token}\n            allTokens={selectableTokens}\n            hasError={hasAmountError}\n            isMaxAmountLoading={stakingBalance === undefined || !token}\n            isMaxAmountAllMode\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            renderBottomRight={renderBottomRight}\n          />\n\n          {renderUnstakeInfo()}\n\n          {!isViewMode && (\n            <div className={modalStyles.buttons}>\n              <Button\n                isPrimary\n                isLoading={isLoading}\n                isDisabled={isUnstakeDisabled}\n                onClick={handleStartUnstakeClick}\n              >\n                {lang('Unstake')}\n              </Button>\n            </div>\n          )}\n        </div>\n      </>\n    );\n  }\n\n  function renderPassword(isActive: boolean) {\n    return (\n      <>\n        {!getDoesUsePinPad() && (\n          <ModalHeader title={lang('Confirm Unstaking')} onClose={cancelStaking} />\n        )}\n        <PasswordForm\n          isActive={isActive}\n          isLoading={isLoading}\n          withCloseButton={IS_CAPACITOR}\n          operationType=\"unstaking\"\n          error={error}\n          placeholder=\"Confirm operation with your password\"\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Back')}\n          onSubmit={handleTransferSubmit}\n          onCancel={handleBackClick}\n          onUpdate={clearStakingError}\n          skipAuthScreen\n        >\n          {renderTransactionBanner()}\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={getIsMobileTelegramApp()\n            ? lang('Request is sent!')\n            : stakingType === 'ethena'\n              ? lang('Request for unstaking is sent!')\n              : lang('Coins have been unstaked!')}\n          onClose={cancelStaking}\n        />\n\n        <div className={modalStyles.transitionContent}>\n          <TransferResult\n            color={stakingType !== 'ethena' ? 'green' : undefined}\n            playAnimation={isActive}\n            amount={successUnstakeAmount}\n            tokenSymbol={token?.symbol}\n            decimals={token?.decimals}\n            noSign\n          />\n\n          {isLongUnstake && renderUnstakeTimer()}\n\n          <div className={modalStyles.buttons}>\n            <Button onClick={cancelStaking} isPrimary>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: StakingState) {\n    switch (currentKey) {\n      case StakingState.UnstakeInitial:\n        return renderInitial();\n\n      case StakingState.UnstakePassword:\n        return renderPassword(isActive);\n\n      case StakingState.UnstakeConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={cancelStaking}\n          />\n        );\n\n      case StakingState.UnstakeConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm operation on your Ledger')}\n            error={error}\n            onClose={cancelStaking}\n            onTryAgain={handleLedgerConnect}\n          />\n        );\n\n      case StakingState.UnstakeComplete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"unstake\"\n      forceFullNative={FULL_SIZE_NBS_STATES.has(renderingKey)}\n      onClose={cancelStaking}\n      onCloseAnimationEnd={updateNextKey}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountId = global.currentAccountId!;\n  const tokens = selectCurrentAccountTokens(global);\n  const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n  const isMultichainAccount = selectIsMultichainAccount(global, accountId);\n  const stakingState = selectAccountStakingState(global, accountId);\n  const isNominators = stakingState?.type === 'nominators';\n\n  return {\n    ...global.currentStaking,\n    tokens,\n    baseCurrency,\n    isNominators,\n    theme: global.settings.theme,\n    isMultichainAccount,\n    stakingState,\n    isSensitiveDataHidden,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(UnstakeModal));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport {\n  APP_INSTALL_URL,\n  APP_NAME,\n  APP_REPO_URL,\n  IS_ANDROID_DIRECT,\n  IS_FIREFOX_EXTENSION,\n} from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { openUrl } from '../../util/openUrl';\nimport {\n  IS_ANDROID_APP,\n  IS_CHROME_EXTENSION,\n  IS_EDGE,\n  IS_IOS_APP,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport styles from './UpdateAvailable.module.scss';\n\ninterface StateProps {\n  isAppUpdateAvailable?: boolean;\n  isAppUpdateRequired?: boolean;\n  newAppVersion?: string;\n}\n\nfunction UpdateAvailable({ isAppUpdateAvailable, newAppVersion, isAppUpdateRequired }: StateProps) {\n  const lang = useLang();\n\n  const { shouldRender, ref } = useShowTransition<HTMLButtonElement>({\n    isOpen: (IS_ANDROID_DIRECT && isAppUpdateAvailable) || isAppUpdateRequired,\n    withShouldRender: true,\n  });\n\n  const handleClick = () => {\n    if (IS_WEB) {\n      window.location.reload();\n      return;\n    }\n\n    void openUrl(getUrl(newAppVersion), { isExternal: true });\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <button ref={ref} type=\"button\" className={styles.wrapper} onClick={handleClick}>\n      <i className={buildClassName('icon icon-download-filled', styles.icon)} aria-hidden />\n      {lang('Update %app_name%', { app_name: APP_NAME })}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => ({\n  isAppUpdateAvailable: global.isAppUpdateAvailable,\n  newAppVersion: global.latestAppVersion,\n  isAppUpdateRequired: global.isAppUpdateRequired,\n}))(UpdateAvailable));\n\nfunction getUrl(appVersion?: string) {\n  if (IS_ANDROID_DIRECT) {\n    return appVersion\n      ? `${APP_REPO_URL}/releases/download/v${encodeURIComponent(appVersion || '')}/${encodeURIComponent(APP_NAME)}.apk`\n      : 'https://github.com/mytonwallet-org/mytonwallet/releases/latest';\n  }\n\n  if (IS_ANDROID_APP) {\n    return `${APP_INSTALL_URL}android-store`;\n  }\n\n  if (IS_IOS_APP) {\n    return `${APP_INSTALL_URL}ios`;\n  }\n\n  if (IS_CHROME_EXTENSION) {\n    return `${APP_INSTALL_URL}${IS_EDGE ? 'edge-extension' : 'chrome-extension'}`;\n  }\n\n  if (IS_FIREFOX_EXTENSION) {\n    return `${APP_INSTALL_URL}firefox-extension`;\n  }\n\n  return APP_INSTALL_URL;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"eU8arlH4\",\"icon\":\"X9C5VDdJ\"};","import type { ApiVestingInfo, ApiVestingPartStatus } from '../../../api/types';\n\nexport function calcVestingAmountByStatus(vesting: ApiVestingInfo[], statuses: ApiVestingPartStatus[]) {\n  return vesting.reduce((acc, currentVesting) => {\n    return acc + currentVesting.parts.reduce((currentAcc, part) => {\n      return currentAcc + (statuses.includes(part.status) ? part.amount : 0);\n    }, 0);\n  }, 0).toString();\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"Z3AdvY3j\",\"modalHeader\":\"UGaC6iSp\",\"passwordModalDialog\":\"TSf_GkYf\",\"amountWrapper\":\"nmSXdbkU\",\"close\":\"gj76sp0s\",\"inputWrapper\":\"WYLJUay4\",\"inputLabel\":\"af6G76Qu\",\"inputValue\":\"W2jkzSKT\",\"unfreezeInput\":\"laFaO54G\",\"unfreezeResult\":\"Da5SKOto\",\"buttons\":\"TDJhFbKs\",\"button\":\"q0MWzlSV\",\"unfreezeTime\":\"nOY_rRWD\",\"unfreezeTimeIcon\":\"B_mbvdNt\",\"actions\":\"qVDajNe7\",\"actionsTitle\":\"mwrjA2Wq\",\"actionsList\":\"Gvf3taGj\",\"block\":\"N60lIj1U\",\"vestingInfo\":\"aLa4cQLd\",\"blockTitle\":\"RlCMRY3O\",\"blockSubtitle\":\"A2xAIJdW\",\"part\":\"tbB7hrjM\",\"partInteractive\":\"Fi06J8yl\",\"active\":\"hNrDT2Be\",\"partIcon\":\"Bc1llfyb\",\"partValue\":\"oTZtwcWo\",\"transactionBanner\":\"pu3vP7ZP\",\"operationInfoFee\":\"V5IIeyTC\",\"operationInfoFeeWithGap\":\"ZROURKjf\",\"partName\":\"SkSkSLJA\",\"bold\":\"_7RDFG6sc\",\"date\":\"F8H8tP5h\"};","import React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { Theme } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, SHORT_FRACTION_DIGITS } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectMycoin,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../util/dateFormat';\nimport { formatCurrency } from '../../util/formatNumber';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport RichNumberField from '../ui/RichNumberField';\n\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isViewMode: boolean;\n  isUnfreezeRequested?: boolean;\n  vesting?: ApiVestingInfo[];\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n}\n\nconst UPDATE_UNSTAKE_DATE_INTERVAL_MS = 30000; // 30 sec\nconst MY_TOKEN_SYMBOL = 'MY';\n\nfunction VestingModal({\n  isOpen,\n  isViewMode,\n  isUnfreezeRequested,\n  vesting,\n  mycoin,\n  theme,\n}: StateProps) {\n  const { fetchStakingHistory, closeVestingModal, startClaimingVesting } = getActions();\n\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const currentlyFrozenAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [vesting]);\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const isDisabledUnfreeze = currentlyReadyToUnfreezeAmount === '0';\n  const appTheme = useAppTheme(theme);\n\n  useInterval(forceUpdate, isUnfreezeRequested ? UPDATE_UNSTAKE_DATE_INTERVAL_MS : undefined);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchStakingHistory();\n    }\n  }, [fetchStakingHistory, isOpen]);\n\n  const handleStartClaimingVesting = useLastCallback(() => {\n    startClaimingVesting();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderUnfrozenDescription() {\n    return (\n      <div className={styles.unfreezeTime}>\n        <AnimatedIconWithPreview\n          play={isOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unfreezeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockBlue}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockBlue}\n        />\n        <div>\n          {lang('You will receive your unfrozen coins in a few minutes.')}\n        </div>\n      </div>\n    );\n  }\n\n  function renderVestingInfo(info: ApiVestingInfo) {\n    return (\n      <div key={info.id} className={styles.block}>\n        <div className={styles.vestingInfo}>\n          <div className={styles.blockTitle}>{info.title}</div>\n          <div className={styles.blockSubtitle}>\n            {lang('%volume% in %amount% parts', {\n              volume: <b>{formatCurrency(info.initialAmount, mycoin!.symbol, mycoin!.decimals)}</b>,\n              amount: info.parts.length.toString(),\n            })}\n          </div>\n        </div>\n        {info.parts.map((part) => {\n          const icon = part.status === 'frozen'\n            ? 'icon-snow'\n            : (part.status === 'missed' ? 'icon-missed' : part.status === 'unfrozen' ? 'icon-check' : 'icon-fire');\n          const title = part.status === 'frozen'\n            ? 'Frozen'\n            : (part.status === 'missed' ? 'Missed' : part.status === 'unfrozen' ? 'Unfrozen' : 'Ready to Unfreeze');\n          const isInteractive = !isViewMode && !isUnfreezeRequested && part.status === 'ready';\n          const endsAt = part.status === 'frozen'\n            ? part.time\n            : part.status === 'ready'\n              ? part.timeEnd\n              : undefined;\n\n          return (\n            <div\n              key={part.id}\n              role={isInteractive ? 'button' : undefined}\n              className={buildClassName(styles.part, part.status, isInteractive && styles.partInteractive)}\n              onClick={isInteractive ? handleStartClaimingVesting : undefined}\n            >\n              <i\n                className={buildClassName(styles.partIcon, icon, part.status)}\n                aria-hidden\n              />\n              <div className={styles.partName}>\n                {lang(title)}\n                {Boolean(endsAt) && (\n                  <div className={styles.date}>\n                    {lang('until %date%', {\n                      date: (\n                        <>\n                          <span className={styles.bold}>{formatFullDay(lang.code!, endsAt)}</span>,\n                          {' '}{formatTime(endsAt)}\n                        </>),\n                    })}\n                  </div>\n                )}\n              </div>\n              <div className={buildClassName(styles.partValue, part.status)}>\n                {formatCurrency(part.amount, mycoin!.symbol, mycoin!.decimals)}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderVestingSchedule() {\n    return (\n      <div className={styles.actions}>\n        <div className={styles.actionsTitle}>{lang('Vesting Schedule')}</div>\n        <div className={buildClassName(styles.actionsList, 'custom-scroll')}>\n          {vesting?.map(renderVestingInfo)}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <>\n        <div className={styles.amountWrapper}>\n          <ModalHeader\n            title={lang('Vesting')}\n            className={styles.modalHeader}\n            closeClassName={styles.close}\n            onClose={closeVestingModal}\n          />\n          <RichNumberField\n            labelText={lang('Vesting Balance')}\n            zeroValue=\"...\"\n            value={currentlyFrozenAmount || '0'}\n            decimals={SHORT_FRACTION_DIGITS}\n            suffix={MY_TOKEN_SYMBOL}\n            className={styles.inputWrapper}\n            labelClassName={styles.inputLabel}\n            valueClassName={styles.inputValue}\n          />\n          {isUnfreezeRequested\n            ? renderUnfrozenDescription()\n            : (\n              <>\n                <RichNumberField\n                  labelText={lang('Ready to Unfreeze')}\n                  zeroValue=\"...\"\n                  value={currentlyReadyToUnfreezeAmount}\n                  decimals={SHORT_FRACTION_DIGITS}\n                  suffix={MY_TOKEN_SYMBOL}\n                  className={styles.inputWrapper}\n                  inputClassName={styles.unfreezeInput}\n                  labelClassName={styles.inputLabel}\n                  valueClassName={styles.unfreezeResult}\n                />\n                {!isViewMode && (\n                  <div className={styles.buttons}>\n                    <Button\n                      className={styles.button}\n                      isPrimary\n                      isDisabled={isDisabledUnfreeze}\n                      onClick={!isDisabledUnfreeze ? handleStartClaimingVesting : undefined}\n                    >\n                      {lang('Unfreeze')}\n                    </Button>\n                  </div>\n                )}\n              </>\n            )}\n        </div>\n        {renderVestingSchedule()}\n      </>\n    );\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      contentClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"vesting-info\"\n      forceFullNative\n      onClose={closeVestingModal}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { info: vesting, unfreezeRequestedIds } = accountState?.vesting || {};\n\n  return {\n    isOpen: global.isVestingModalOpen,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    vesting,\n    isUnfreezeRequested: Boolean(unfreezeRequestedIds?.length),\n    mycoin: selectMycoin(global),\n    theme: global.settings.theme,\n  };\n})(VestingModal));\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTokenWithPrice, ApiVestingInfo } from '../../api/types';\nimport type { UserToken } from '../../global/types';\nimport { VestingUnfreezeState } from '../../global/types';\n\nimport { CLAIM_AMOUNT, TONCOIN } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectAccount,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectMycoin,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { toBig } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport { calcVestingAmountByStatus } from '../main/helpers/calcVestingAmountByStatus';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './VestingModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  vesting?: ApiVestingInfo[];\n  isLoading?: boolean;\n  address?: string;\n  error?: string;\n  state?: VestingUnfreezeState;\n  mycoin?: ApiTokenWithPrice;\n  isHardwareAccount?: boolean;\n  isMultichainAccount: boolean;\n}\nfunction VestingPasswordModal({\n  isOpen,\n  vesting,\n  tokens,\n  isLoading,\n  address,\n  error,\n  mycoin,\n  state = VestingUnfreezeState.Password,\n  isHardwareAccount,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitClaimingVesting,\n    submitClaimingVestingHardware,\n    cancelClaimingVesting,\n    clearVestingError,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    amount: balance,\n  } = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]) || {};\n  const claimAmount = toBig(CLAIM_AMOUNT);\n  const hasAmountError = !balance || balance < CLAIM_AMOUNT;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, Boolean(isOpen));\n  const withModalHeader = !isHardwareAccount && !getDoesUsePinPad();\n\n  const currentlyReadyToUnfreezeAmount = useMemo(() => {\n    if (!vesting) return '0';\n\n    return calcVestingAmountByStatus(vesting, ['ready']);\n  }, [vesting]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (hasAmountError) return;\n    submitClaimingVesting({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    if (hasAmountError) return;\n    submitClaimingVestingHardware();\n  });\n\n  if (!mycoin) {\n    return undefined;\n  }\n\n  function renderInfo() {\n    const feeClassName = buildClassName(\n      styles.operationInfoFee,\n      !getDoesUsePinPad() && styles.operationInfoFeeWithGap,\n    );\n\n    return (\n      <>\n        <TransactionBanner\n          tokenIn={mycoin}\n          withChainIcon={isMultichainAccount}\n          text={formatCurrency(currentlyReadyToUnfreezeAmount, mycoin!.symbol, mycoin!.decimals)}\n          className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n          secondText={address && shortenAddress(address)}\n        />\n        <div className={feeClassName}>\n          {renderText(lang('$fee_value_bold', { fee: formatCurrency(claimAmount, TONCOIN.symbol) }))}\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: VestingUnfreezeState) {\n    switch (currentKey) {\n      case VestingUnfreezeState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={cancelClaimingVesting}\n          />\n        );\n\n      case VestingUnfreezeState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={cancelClaimingVesting}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case VestingUnfreezeState.Password:\n        return (\n          <PasswordForm\n            isActive={Boolean(isOpen)}\n            isLoading={isLoading}\n            withCloseButton\n            operationType=\"unfreeze\"\n            error={hasAmountError ? lang('Insufficient Balance for Fee') : error}\n            submitLabel={lang('Confirm')}\n            onSubmit={handleSubmit}\n            onCancel={cancelClaimingVesting}\n            onUpdate={clearVestingError}\n          >\n            {renderInfo()}\n          </PasswordForm>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={withModalHeader ? lang('Confirm Unfreezing') : undefined}\n      hasCloseButton={withModalHeader}\n      forceFullNative\n      nativeBottomSheetKey=\"vesting-confirm\"\n      contentClassName={styles.passwordModalDialog}\n      onClose={cancelClaimingVesting}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const accountState = selectCurrentAccountState(global);\n  const isHardwareAccount = selectIsHardwareAccount(global);\n\n  const {\n    isConfirmRequested: isOpen,\n    info: vesting,\n    isLoading,\n    error,\n    unfreezeState,\n  } = accountState?.vesting || {};\n  const tokens = selectCurrentAccountTokens(global);\n\n  return {\n    isOpen,\n    vesting,\n    tokens,\n    isLoading,\n    error,\n    address: addressByChain?.ton,\n    state: unfreezeState,\n    mycoin: selectMycoin(global),\n    isHardwareAccount,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(VestingPasswordModal));\n","import type { DropdownItem } from '../../../../ui/Dropdown';\n\nimport { MYTONWALLET_MULTISEND_DAPP_URL } from '../../../../../config';\nimport { vibrate } from '../../../../../util/haptics';\nimport { getTranslation } from '../../../../../util/langProvider';\nimport { openUrl } from '../../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../../util/url';\n\nexport type MenuHandler = 'multisend';\n\nexport const SEND_CONTEXT_MENU_ITEMS: DropdownItem<MenuHandler>[] = [{\n  name: 'Multisend',\n  fontIcon: 'menu-multisend',\n  value: 'multisend',\n}];\n\nexport function handleSendMenuItemClick(value: MenuHandler) {\n  if (value === 'multisend') {\n    void vibrate();\n    void openUrl(MYTONWALLET_MULTISEND_DAPP_URL, {\n      title: getTranslation('Multisend'),\n      subtitle: getHostnameFromUrl(MYTONWALLET_MULTISEND_DAPP_URL),\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ejEBAbV8\",\"chartLabels\":\"SpaIcYmy\",\"chartLabel\":\"Ehn5yB9o\",\"realFee\":\"ZXtTwJ2M\",\"excessFee\":\"wvOK88A2\",\"chartLines\":\"f8dLAhsP\",\"chartLine\":\"ow57IO0l\",\"explanation\":\"Tbn84o8Q\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { FeePrecision, FeeTerms, FeeValue } from '../../util/fee/types';\nimport type { FeeToken } from '../ui/Fee';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { getChainConfig } from '../../util/chain';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport Modal from '../ui/Modal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './FeeDetailsModal.module.scss';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  fullFee: FeeTerms | undefined;\n  realFee: FeeTerms | undefined;\n  realFeePrecision: FeePrecision | undefined;\n  /** The excess fee is always measured in the native token */\n  excessFee: FeeValue | undefined;\n  excessFeePrecision: FeePrecision | undefined;\n  /** The token denoting the `token` fields of the `FeeTerms` objects. */\n  token: FeeToken | undefined;\n  title?: TeactNode;\n  extraContent?: TeactNode;\n};\n\nfunction FeeDetailsModal({ isOpen, onClose, title, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      isCompact\n      title={title ?? lang('Blockchain Fee Details')}\n      contentClassName={styles.content}\n    >\n      <FeeDetailsContent onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nexport default memo(FeeDetailsModal);\n\nfunction FeeDetailsContent({\n  onClose,\n  fullFee,\n  realFee,\n  realFeePrecision = 'exact',\n  excessFee,\n  excessFeePrecision = 'exact',\n  token,\n  extraContent,\n}: Omit<OwnProps, 'isOpen' | 'title'>) {\n  const chain = token && getChainBySlug(token.slug);\n  const nativeToken = chain && getChainConfig(chain).nativeToken;\n  const lang = useLang();\n\n  return (\n    <>\n      <div>\n        <div className={styles.chartLabels}>\n          <div className={buildClassName(styles.chartLabel, styles.realFee)}>\n            {lang('Final Fee')}\n          </div>\n          <div className={buildClassName(styles.chartLabel, styles.excessFee)}>\n            {lang('Excess')}\n          </div>\n        </div>\n        <div className={styles.chartLines}>\n          <div className={buildClassName(styles.chartLine, styles.realFee)}>\n            {realFee && token && (\n              <Fee\n                terms={realFee}\n                precision={realFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n          <div className={buildClassName(styles.chartLine, styles.excessFee)}>\n            {excessFee !== undefined && token && (\n              <Fee\n                terms={{ native: excessFee }}\n                precision={excessFeePrecision}\n                token={token}\n                shouldPreferIcons\n              />\n            )}\n          </div>\n        </div>\n      </div>\n      <div className={styles.explanation}>\n        <div>\n          {renderText(lang('$fee_details', {\n            full_fee: fullFee && token && <b><Fee terms={fullFee} precision=\"exact\" token={token} /></b>,\n            excess_symbol: <b>{nativeToken?.symbol}</b>,\n            chain_name: chain?.toUpperCase(),\n          }))}\n        </div>\n        {extraContent}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button isPrimary className={modalStyles.button} onClick={onClose}>\n          {lang('Got It')}\n        </Button>\n      </div>\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"tGUq61Uw\",\"scrollContent\":\"m5XAGki9\",\"amountInput\":\"SZC58ifv\",\"amountInputBuy\":\"uBBR78Gi\",\"inputLabel\":\"EeV5B584\",\"amountInputInner\":\"L752Cv1F\",\"advancedSlippageContainer\":\"jiH3u0SA\",\"content\":\"dQUuISOK\",\"inputContainer\":\"IkAedzyb\",\"advancedSlippageButton\":\"nnFruaI2\",\"swapButtonWrapper\":\"eEwTqlEP\",\"swapButtonWrapperStatic\":\"z1UgQ2yi\",\"swapButton\":\"hrHymNJu\",\"footerBlock\":\"yPmfwG9j\",\"footerBlockStatic\":\"Edk19FlP\",\"dot\":\"ru4rAllW\",\"advancedBlock\":\"dx6Hf2xp\",\"advancedRow\":\"QPeOMoOM\",\"advancedDescription\":\"YzXjxATB\",\"advancedTooltip\":\"QdMU2Tgb\",\"advancedTooltipContainer\":\"VGq4FFXS\",\"advancedValue\":\"JTLP1WRv\",\"advancedSlippageError\":\"NW_aag3U\",\"advancedSlippage\":\"K4rGLITC\",\"advancedInput\":\"uWjxL_tL\",\"advancedInputValue\":\"Y_KEhiFS\",\"isEmpty\":\"lP4fP0kG\",\"advancedError\":\"X2kTDRkO\",\"advancedLink\":\"NlT_I8kT\",\"advancedLinkIcon\":\"A0XDmIY2\",\"advancedPlaceholder\":\"vvtzW7L0\",\"footerButtonWrapper\":\"_5_NPQXE0\",\"footerButton\":\"qzfAPYMD\",\"footerButtonInner\":\"Ns4lxltP\",\"swapArrowIcon\":\"Vzdj7mTH\",\"changellyInfo\":\"gCMqbJwS\",\"priceImpact\":\"nwwHhwFa\",\"feeLine\":\"vz3aF88G\",\"priceImpactSticker\":\"YaZn9OUh\",\"priceImpactContent\":\"UUOZvXZT\",\"priceImpactTitle\":\"sbyrAyQC\",\"priceImpactArrow\":\"cEk2aQ7Z\",\"priceImpactDescription\":\"olGNOU3k\",\"swapCornerTop\":\"csDd7Ni1\",\"swapCornerBottom\":\"xyxUxtsY\",\"swapCornerStaticTop\":\"B7ECmlJ1\",\"swapCornerStaticBottom\":\"WuHn_HeC\",\"selectBlockchainBlock\":\"prVCHnG1\",\"inputAddressWrapper\":\"DTAq0std\",\"inputAddress\":\"b7EwDSEo\",\"blockchainHintWrapper\":\"ywkeppF2\",\"changellyDescription\":\"V7p8St7r\",\"blockchainHintText\":\"CBP3_LjF\",\"blockchainHintTextError\":\"t2EtyAQD\",\"inputButton\":\"IpN3STYq\",\"inputButtonShifted\":\"xDE5m07O\",\"changellyInfoStatic\":\"EvrCvWOD\",\"priceImpactStatic\":\"eoiWwJ0m\",\"changellyInfoTitle\":\"fwJQ9lpO\",\"changellyInfoDescription\":\"Y38OidS3\",\"changellyIcon\":\"ieB34P8k\",\"changellyInfoBlock\":\"aQOSkXKG\",\"blockchainButtons\":\"pQ9YM0ta\",\"changellyTextField\":\"cTKYWTLL\",\"textFieldWrapperFullWidth\":\"VR4c3lOH\",\"changellyImportantRed\":\"M_DwJtlB\",\"arrowContainer\":\"abK4XtWe\",\"arrowContainerInverted\":\"OSP7z62u\",\"arrow\":\"ZktBDvds\",\"arrowNew\":\"Z8CqJe5c\",\"arrowOld\":\"G_2MIwOh\",\"animateDisappear\":\"PpIbnc8v\",\"arrow-disappear\":\"VKHzIRP6\",\"arrowDisappear\":\"VKHzIRP6\",\"animateAppear\":\"STVPF9rF\",\"arrow-appear\":\"igBksUDT\",\"arrowAppear\":\"igBksUDT\",\"transactionBanner\":\"T1jLnRBM\",\"changellyDescriptionBold\":\"Vbj5MEAN\",\"qrCode\":\"MuLyFrfU\",\"qrCodeHidden\":\"Fn7oQpnQ\",\"textFieldLabel\":\"ak6Vmppj\"};","import React, { memo, useRef } from '../../../lib/teact/teact';\n\nimport type { DieselStatus, UserSwapToken } from '../../../global/types';\nimport { SwapErrorType, SwapType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrencySimple } from '../../../util/formatNumber';\n\nimport { useThrottledSignal } from '../../../hooks/useAsyncResolvers';\nimport useDerivedSignal from '../../../hooks/useDerivedSignal';\nimport useDerivedState from '../../../hooks/useDerivedState';\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Transition from '../../ui/Transition';\n\nimport styles from '../Swap.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  isEstimating?: boolean;\n  isSending?: boolean;\n  isNotEnoughNative?: boolean;\n  nativeToken?: UserSwapToken;\n  dieselStatus?: DieselStatus;\n  isPriceImpactError?: boolean;\n  canSubmit?: boolean;\n  errorType?: SwapErrorType;\n  limits?: {\n    fromMin?: string;\n    fromMax?: string;\n  };\n}\n\nconst BUTTON_ANIMATION_DURATION = 250 + ANIMATION_END_DELAY;\n\nfunction SwapSubmitButton({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  isEstimating,\n  isSending,\n  isNotEnoughNative,\n  nativeToken,\n  dieselStatus,\n  isPriceImpactError,\n  canSubmit,\n  errorType,\n  limits,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isErrorExist = errorType !== undefined;\n  const shouldSendingBeVisible = isSending && swapType === SwapType.CrosschainToWallet;\n  const isDisabled = !canSubmit || shouldSendingBeVisible;\n  const isLoading = isEstimating || shouldSendingBeVisible;\n\n  const errorMsgByType = {\n    [SwapErrorType.UnexpectedError]: lang('Unexpected Error'),\n    [SwapErrorType.InvalidPair]: lang('Invalid Pair'),\n    [SwapErrorType.NotEnoughLiquidity]: lang('Insufficient liquidity'),\n    [SwapErrorType.ChangellyMinSwap]: lang('Minimum amount', {\n      value: formatCurrencySimple(limits?.fromMin ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.ChangellyMaxSwap]: lang('Maximum amount', {\n      value: formatCurrencySimple(limits?.fromMax ?? '0', tokenIn?.symbol ?? '', tokenIn?.decimals),\n    }),\n    [SwapErrorType.NotEnoughForFee]: lang('Not Enough %symbol%', {\n      symbol: tokenIn?.symbol,\n    }),\n    [SwapErrorType.TooSmallAmount]: lang('$swap_too_small_amount'),\n  };\n\n  const isTouched = Boolean(amountIn || amountOut);\n\n  let text: string | string[] = '$swap_from_to';\n\n  if (isTouched) {\n    if (isErrorExist) {\n      text = errorMsgByType[errorType] as string;\n    } else if (nativeToken) {\n      if (isNotEnoughNative && tokenIn?.chain === 'ton' && tokenIn?.tokenAddress) {\n        if (dieselStatus === 'not-available') {\n          text = lang('Not Enough %symbol%', { symbol: 'TON' }) as string;\n        } else if (dieselStatus === 'pending-previous') {\n          text = lang('Awaiting Previous Fee');\n        } else if (dieselStatus === 'not-authorized') {\n          text = lang('Authorize %token% Fee', { token: tokenIn?.symbol }) as string;\n        }\n      } else if (isNotEnoughNative) {\n        text = lang('Not Enough %symbol%', { symbol: nativeToken?.symbol }) as string;\n      }\n    }\n  }\n\n  const textStr = Array.isArray(text) ? text.join('') : text;\n\n  const shouldShowError = !isEstimating && (\n    isPriceImpactError\n    || isErrorExist\n    || (nativeToken && isNotEnoughNative && (\n      !dieselStatus\n      || dieselStatus === 'not-available'\n      || dieselStatus === 'pending-previous'\n    ))\n  );\n\n  const isDestructive = isTouched && shouldShowError;\n\n  const transitionKeyRef = useRef(0);\n  const render = useDerivedSignal(() => {\n    const renderedText = textStr === '$swap_from_to'\n      ? lang('$swap_from_to', {\n        from: tokenIn?.symbol,\n        icon: <i className={buildClassName('icon-chevron-right', styles.swapArrowIcon)} aria-hidden />,\n        to: tokenOut?.symbol,\n      })\n      : textStr;\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        className={styles.footerButtonWrapper}\n        activeKey={transitionKeyRef.current++}\n      >\n        <Button\n          isPrimary\n          isSubmit\n          className={styles.footerButton}\n          isDisabled={isDisabled}\n          isLoading={isLoading}\n          isDestructive={isDestructive}\n        >\n          {/* The <span> is to have inline content positioning to align the icon properly */}\n          <span className={styles.footerButtonInner}>{renderedText}</span>\n        </Button>\n      </Transition>\n    );\n  }, [isDestructive, isDisabled, isLoading, lang, textStr, tokenIn?.symbol, tokenOut?.symbol]);\n\n  const renderThrottled = useThrottledSignal(render, BUTTON_ANIMATION_DURATION);\n  const rendered = useDerivedState(renderThrottled);\n\n  return rendered;\n}\n\nexport default memo(SwapSubmitButton);\n","import type { Scheduler } from '../util/schedulers';\nimport type { Signal } from '../util/signals';\n\nimport useDebouncedCallback from './useDebouncedCallback';\nimport useDerivedSignal from './useDerivedSignal';\nimport useThrottledCallback from './useThrottledCallback';\n\nexport function useThrottledResolver<T>(\n  resolver: () => T,\n  deps: unknown[],\n  msOrSchedulerFn: number | Scheduler,\n  noFirst = false,\n) {\n  return useThrottledCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, msOrSchedulerFn, noFirst);\n}\n\nexport function useThrottledSignal<T>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n): Signal<T> {\n  const throttledResolver = useThrottledResolver(() => getValue(), [getValue], ms, noFirst);\n\n  return useDerivedSignal(\n    throttledResolver, [throttledResolver, getValue], true,\n  );\n}\n\nexport function useDebouncedResolver<T>(\n  resolver: () => T,\n  deps: any[],\n  ms: number,\n  noFirst = false,\n  noLast = false,\n) {\n  return useDebouncedCallback((setValue: (newValue: T) => void) => {\n    setValue(resolver());\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, deps, ms, noFirst, noLast);\n}\n\nexport function useDebouncedSignal<T>(\n  getValue: Signal<T>,\n  ms: number,\n  noFirst = false,\n  noLast = false,\n): Signal<T> {\n  const debouncedResolver = useDebouncedResolver(() => getValue(), [getValue], ms, noFirst, noLast);\n\n  return useDerivedSignal(\n    debouncedResolver, [debouncedResolver, getValue], true,\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"mdHmid9q\",\"container\":\"y7MeqLtP\",\"content\":\"M5luQatq\",\"button\":\"bmtS8v9y\",\"static\":\"VF77TUMq\",\"label\":\"Er8PXP6e\",\"labelText\":\"IIv2eCYK\",\"iconArrowRight\":\"jDHaQfBV\",\"dexList\":\"NlzL4Voz\",\"dexItem\":\"lL1VFeQA\",\"bestRate\":\"AC6eCyuu\",\"current\":\"_F70O58C\",\"dexValue\":\"J5iGiLKz\",\"dexTitle\":\"YT_HY2ps\",\"dexIcon\":\"V0Td82aA\",\"dexValueFractional\":\"jQ6cgMjD\",\"dexExchangeRate\":\"JAHr4SCc\",\"dexInfo\":\"sRFnXBUF\",\"dexInfoDisabled\":\"e9qAwzfb\",\"bestLabel\":\"gq26TBf_\",\"dexSubmitSlide\":\"i8eq5QM3\",\"dexSubmitButtons\":\"IfkI_jwY\",\"dexBestRateButton\":\"MevYjouy\"};","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapDexLabel, ApiSwapEstimateVariant } from '../../api/types';\nimport type { GlobalState, UserSwapToken } from '../../global/types';\nimport { SwapInputSource } from '../../global/types';\n\nimport {\n  DEFAULT_OUR_SWAP_FEE,\n  SHORT_FRACTION_DIGITS,\n  SWAP_DEX_LABELS,\n  WHOLE_PART_DELIMITER,\n} from '../../config';\nimport { getNumberParts } from '../../global/helpers/number';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport useCurrentOrPrev from '../../hooks/useCurrentOrPrev';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './SwapDexChooser.module.scss';\n\nimport DedustPath from '../../assets/logo/dedust.png';\nimport StonfiPath from '../../assets/logo/stonfi.png';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  isStatic?: boolean;\n}\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n}\n\nconst IS_WHOLE_PART_BIG_REGEX = /^\\d{5,}([.,]|$)/;\n\nfunction SwapDexChooser({\n  tokenIn,\n  tokenOut,\n  isStatic,\n  currentSwap: {\n    amountOut,\n    amountIn,\n    estimates,\n    currentDexLabel,\n    bestRateDexLabel,\n    inputSource,\n    ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  },\n}: OwnProps & StateProps) {\n  const { setSwapDex } = getActions();\n\n  const lang = useLang();\n\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [selectedDexLabel, setSelectedDexLabel] = useState<ApiSwapDexLabel | undefined>(currentDexLabel);\n  const renderedDexItems = useCurrentOrPrev(estimates?.length ? estimates : undefined, true);\n  const renderedCurrentDexLabel = useCurrentOrPrev(currentDexLabel, true);\n  const renderedBestRateDexLabel = useCurrentOrPrev(bestRateDexLabel, true);\n  const isBestRateSelected = Boolean(bestRateDexLabel && bestRateDexLabel === selectedDexLabel);\n  const confirmLabel = isBestRateSelected\n    ? lang('Use Best Rate')\n    : lang('Switch to %dex_name%', {\n      dex_name: selectedDexLabel ? SWAP_DEX_LABELS[selectedDexLabel] : '',\n    });\n\n  const { shouldRender, ref: rootRef } = useShowTransition({\n    isOpen: !!estimates?.length && !!tokenOut && !!amountOut && !!amountIn,\n    withShouldRender: true,\n  });\n\n  const handleDexConfirm = useLastCallback(() => {\n    if (selectedDexLabel) {\n      setSwapDex({ dexLabel: selectedDexLabel });\n    }\n    closeModal();\n  });\n\n  function toggleDexMenu() {\n    if (isModalOpen) {\n      closeModal();\n    } else {\n      setSelectedDexLabel(currentDexLabel);\n      openModal();\n    }\n  }\n\n  const { shouldRender: shouldRenderBenefit, value: benefitAmount } = useMemo(() => {\n    return calculateBenefitAmount({\n      ourFeePercent,\n      decimals: inputSource === SwapInputSource.In ? tokenOut?.decimals : tokenIn?.decimals,\n      estimates,\n      inputSource,\n      bestRateDexLabel: renderedBestRateDexLabel,\n    });\n  }, [renderedBestRateDexLabel, estimates, inputSource, ourFeePercent, tokenIn?.decimals, tokenOut?.decimals]);\n\n  const renderedAmounts = useMemo<Record<ApiSwapDexLabel, TeactNode> | undefined>(() => {\n    if (!renderedDexItems?.length || renderedDexItems.length < 2) return undefined;\n\n    return renderedDexItems.reduce((acc, item) => {\n      const { fromAmount, toAmount, dexLabel } = item;\n      const amount = inputSource === SwapInputSource.In ? toAmount : fromAmount;\n      const token = inputSource === SwapInputSource.In ? tokenOut! : tokenIn!;\n\n      if (IS_WHOLE_PART_BIG_REGEX.test(amount)) {\n        const formattedAmount = formatDexItemAmount(amount, token);\n\n        if (formattedAmount) {\n          acc[dexLabel] = formattedAmount;\n        }\n      } else {\n        acc[dexLabel] = formatCurrency(amount, token.symbol);\n      }\n\n      return acc;\n    }, {} as Record<ApiSwapDexLabel, TeactNode>);\n  }, [inputSource, renderedDexItems, tokenIn, tokenOut]);\n\n  if (!shouldRender || !renderedDexItems?.length) return undefined;\n\n  const buttonContent = (\n    <>\n      {renderedBestRateDexLabel === renderedCurrentDexLabel && renderedDexItems.length > 1 && (\n        <span className={styles.label}><span className={styles.labelText}>{lang('Best Rate')}</span></span>\n      )}\n      {lang('via %dex_name%', {\n        dex_name: <strong>{SWAP_DEX_LABELS[renderedCurrentDexLabel!]}</strong>,\n      })}\n      {renderedDexItems.length > 1 && (\n        <i className={buildClassName('icon-chevron-right', styles.iconArrowRight)} aria-hidden />\n      )}\n    </>\n  );\n\n  if (renderedDexItems.length === 1) {\n    return (\n      <div ref={rootRef} className={styles.root}>\n        <div className={styles.container}>\n          <span className={buildClassName(styles.content, isStatic && styles.static)}>{buttonContent}</span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderedDexItem(item: ApiSwapEstimateVariant) {\n    const rate = getSwapRate(item.fromAmount, item.toAmount, tokenIn, tokenOut);\n\n    return (\n      <div\n        key={item.dexLabel}\n        tabIndex={0}\n        role=\"button\"\n        className={buildClassName(\n          styles.dexItem,\n          renderedBestRateDexLabel === item.dexLabel && styles.bestRate,\n          selectedDexLabel === item.dexLabel && styles.current,\n        )}\n        onClick={() => { setSelectedDexLabel(item.dexLabel); }}\n      >\n        <div className={styles.dexTitle}>\n          <img\n            src={item.dexLabel === 'dedust' ? DedustPath : StonfiPath}\n            alt={SWAP_DEX_LABELS[item.dexLabel]}\n            className={styles.dexIcon}\n          />\n          {SWAP_DEX_LABELS[item.dexLabel]}\n        </div>\n        <div className={styles.dexValue}>{renderedAmounts?.[item.dexLabel]}</div>\n        <div className={styles.dexExchangeRate}>\n          {rate ? <>{rate.firstCurrencySymbol}&nbsp; {rate.price}&nbsp;{rate.secondCurrencySymbol}</> : undefined}\n        </div>\n        {item.dexLabel === renderedBestRateDexLabel && (\n          <span className={styles.bestLabel}>{lang('Best')}</span>\n        )}\n      </div>\n    );\n  }\n\n  function renderBenefitAmount() {\n    if (inputSource === SwapInputSource.Out) {\n      return (\n        <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n          {renderText(lang('You will spend %amount% **less**.', {\n            amount: <strong>{formatCurrency(benefitAmount, tokenIn!.symbol)}</strong>,\n          }))}\n        </p>\n      );\n    }\n\n    return (\n      <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n        {renderText(lang('You will receive %amount% **more**.', {\n          amount: <strong>{formatCurrency(benefitAmount, tokenOut!.symbol)}</strong>,\n        }))}\n      </p>\n    );\n  }\n\n  return (\n    <div ref={rootRef} className={styles.root}>\n      <div className={styles.container}>\n        <button\n          type=\"button\"\n          className={buildClassName(styles.button, isStatic && styles.static)}\n          onClick={toggleDexMenu}\n        >\n          {buttonContent}\n        </button>\n        <Modal\n          isOpen={isModalOpen}\n          isCompact\n          title={lang('Built-in DEX Aggregator')}\n          onClose={closeModal}\n        >\n          <div className={styles.dexList}>\n            {renderedDexItems.map((item) => renderedDexItem(item))}\n          </div>\n\n          <p className={buildClassName(styles.dexInfo, !isBestRateSelected && styles.dexInfoDisabled)}>\n            {renderText(lang('$swap_dex_chooser_rate_title'))}\n          </p>\n          {shouldRenderBenefit && renderBenefitAmount()}\n\n          <div className={buildClassName(modalStyles.buttons, styles.dexSubmitButtons)}>\n            <Transition\n              activeKey={isBestRateSelected ? 0 : 1}\n              name=\"semiFade\"\n              slideClassName={styles.dexSubmitSlide}\n            >\n              <Button\n                isPrimary\n                className={buildClassName(modalStyles.buttonFullWidth, isBestRateSelected && styles.dexBestRateButton)}\n                onClick={handleDexConfirm}\n              >\n                {confirmLabel}\n              </Button>\n            </Transition>\n\n          </div>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    currentSwap: global.currentSwap,\n  };\n})(SwapDexChooser));\n\nfunction calculateBenefitAmount({\n  ourFeePercent,\n  decimals,\n  bestRateDexLabel,\n  estimates,\n  inputSource,\n}: {\n  ourFeePercent: number;\n  decimals?: number;\n  estimates?: ApiSwapEstimateVariant[];\n  bestRateDexLabel?: ApiSwapDexLabel;\n  inputSource?: SwapInputSource;\n}) {\n  if (!estimates || estimates.length < 2) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const bestRateEstimate = estimates.find(({ dexLabel }) => dexLabel === bestRateDexLabel);\n  const otherEstimate = estimates.find(({ dexLabel }) => dexLabel !== bestRateDexLabel);\n\n  if (!otherEstimate || !bestRateEstimate) {\n    return { shouldRender: false, value: '0' };\n  }\n\n  const isDirectSwap = inputSource === SwapInputSource.In;\n  const amountKey = isDirectSwap ? 'toAmount' : 'fromAmount';\n  const ourFeeValue = (Number(bestRateEstimate[amountKey]) / 100) * ourFeePercent;\n  const benefit = (fromDecimal(bestRateEstimate[amountKey], decimals) - fromDecimal(otherEstimate[amountKey], decimals))\n    * (isDirectSwap ? 1n : -1n);\n  const shouldRender = (benefit - fromDecimal(ourFeeValue, decimals)) > 0n;\n\n  return {\n    shouldRender,\n    value: toDecimal(benefit, decimals),\n  };\n}\n\nfunction formatDexItemAmount(toAmount: string, tokenOut: UserSwapToken): TeactNode | undefined {\n  const parts = getNumberParts(toAmount, SHORT_FRACTION_DIGITS);\n  if (!parts) return undefined;\n\n  const [, wholePartRaw, dotPart, fractionPart] = parts;\n  const fractionStr = fractionPart || dotPart\n    ? `.${(fractionPart || '').substring(0, SHORT_FRACTION_DIGITS)}`\n    : '';\n\n  const formattedWholePart = wholePartRaw.replace(/\\d(?=(\\d{3})+($))/g, `$&${WHOLE_PART_DELIMITER}`);\n\n  return (\n    <>\n      {formattedWholePart}\n      <span className={styles.dexValueFractional}>{fractionStr}&thinsp;{tokenOut.symbol}</span>\n    </>\n  );\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { DieselStatus } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { DEFAULT_OUR_SWAP_FEE } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport {\n  selectCurrentAccountTokenBalance,\n  selectCurrentSwapTokenIn,\n  selectCurrentSwapTokenOut,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { explainSwapFee } from '../../util/fee/swapFee';\nimport { formatCurrency } from '../../util/formatNumber';\nimport getSwapRate from '../../util/swap/getSwapRate';\nimport { getChainBySlug } from '../../util/tokens';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport Modal from '../ui/Modal';\nimport RichNumberInput from '../ui/RichNumberInput';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  showFullNetworkFee?: boolean;\n  onClose: () => void;\n  onNetworkFeeClick?: () => void;\n}\n\ninterface StateProps {\n  amountIn?: string;\n  amountOut?: string;\n  tokenIn?: ApiSwapAsset;\n  tokenOut?: ApiSwapAsset;\n  networkFee?: string;\n  realNetworkFee?: string;\n  swapType: SwapType;\n  slippage: number;\n  priceImpact?: number;\n  amountOutMin?: string;\n  ourFee?: string;\n  ourFeePercent?: number;\n  dieselStatus?: DieselStatus;\n  dieselFee?: string;\n  nativeTokenInBalance?: bigint;\n}\n\nconst SLIPPAGE_VALUES = [0.5, 1, 2, 5, 10];\nconst MAX_SLIPPAGE_VALUE = 50;\n\nexport const MAX_PRICE_IMPACT_VALUE = 5;\n\nfunction SwapSettingsContent({\n  onClose,\n  amountIn,\n  amountOut,\n  swapType,\n  tokenIn,\n  tokenOut,\n  slippage,\n  priceImpact,\n  networkFee,\n  realNetworkFee,\n  amountOutMin,\n  ourFee,\n  ourFeePercent = DEFAULT_OUR_SWAP_FEE,\n  dieselStatus,\n  dieselFee,\n  nativeTokenInBalance,\n  showFullNetworkFee,\n  onNetworkFeeClick,\n}: Omit<OwnProps, 'isOpen'> & StateProps) {\n  const { setSlippage } = getActions();\n  const lang = useLang();\n  const canEditSlippage = swapType === SwapType.OnChain;\n\n  // In order to reset this state when the modal is closed, we rely on the fact that Modal unmounts the content when\n  // it's closed.\n  const [currentSlippage, setCurrentSlippage] = useState<number | undefined>(slippage);\n\n  const priceImpactError = (priceImpact ?? 0) >= MAX_PRICE_IMPACT_VALUE;\n  const slippageError = currentSlippage === undefined\n    ? 'Slippage not specified'\n    : currentSlippage > MAX_SLIPPAGE_VALUE\n      ? 'Slippage too high'\n      : '';\n\n  const handleSave = useLastCallback(() => {\n    setSlippage({ slippage: currentSlippage! });\n    onClose();\n  });\n\n  const handleInputChange = useLastCallback((stringValue?: string) => {\n    const value = stringValue ? Number(stringValue) : undefined;\n    setCurrentSlippage(value);\n  });\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug: tokenIn?.slug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenIn, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  function renderSlippageValues() {\n    const slippageList = SLIPPAGE_VALUES.map((value, index) => {\n      return (\n        <div key={value} className={styles.advancedSlippageButton}>\n          <div\n            role=\"button\"\n            tabIndex={0}\n            onClick={() => setCurrentSlippage(value)}\n            className={styles.balanceLink}\n          >{value}%\n          </div>\n          {index + 1 !== SLIPPAGE_VALUES.length && <i className={styles.dot} aria-hidden />}\n        </div>\n      );\n    });\n\n    return (\n      <div className={styles.advancedSlippageContainer}>\n        <span className={styles.advancedSlippage}>{slippageList}</span>\n      </div>\n    );\n  }\n\n  function renderSlippageError() {\n    return (\n      <div className={styles.advancedSlippageError}>\n        <span>{lang(slippageError)}</span>\n      </div>\n    );\n  }\n\n  function renderRate() {\n    const rate = getSwapRate(\n      amountIn,\n      amountOut,\n      tokenIn,\n      tokenOut,\n      true,\n    );\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Exchange Rate')}\n        </span>\n        <span className={styles.advancedValue}>\n          {rate\n            ? `${rate.firstCurrencySymbol}  ${rate.price} ${rate.secondCurrencySymbol}`\n            : <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderNetworkFee() {\n    const actualFee = showFullNetworkFee ? explainedFee.fullFee : explainedFee.realFee;\n    let feeElement = actualFee && tokenIn && (\n      <Fee\n        terms={actualFee.networkTerms}\n        precision={actualFee.precision}\n        token={tokenIn}\n      />\n    );\n\n    if (feeElement && onNetworkFeeClick) {\n      feeElement = (\n        <span\n          role=\"button\"\n          tabIndex={0}\n          className={styles.advancedLink}\n          onClick={() => onNetworkFeeClick()}\n        >\n          <span>{feeElement}</span>\n          <i className={buildClassName('icon-chevron-right', styles.advancedLinkIcon)} aria-hidden />\n        </span>\n      );\n    }\n\n    return (\n      <div className={styles.advancedRow}>\n        <span className={styles.advancedDescription}>\n          {lang('Blockchain Fee')}\n        </span>\n        <span className={styles.advancedValue}>\n          {feeElement || <ValuePlaceholder />}\n        </span>\n      </div>\n    );\n  }\n\n  function renderSlippageLabel() {\n    return (\n      <>\n        {lang('Slippage')}\n        <Tooltip isError={Boolean(slippageError)}>\n          <span>{lang('$swap_slippage_tooltip1')}</span>\n          <span>{lang('$swap_slippage_tooltip2')}</span>\n        </Tooltip>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {canEditSlippage && (\n        <div className={styles.advancedInput}>\n          {renderSlippageValues()}\n          <RichNumberInput\n            labelText={renderSlippageLabel()}\n            labelClassName={styles.slippageLabel}\n            value={currentSlippage?.toString()}\n            hasError={Boolean(slippageError)}\n            decimals={2}\n            suffix=\"%\"\n            size=\"normal\"\n            onChange={handleInputChange}\n          />\n          {renderSlippageError()}\n        </div>\n      )}\n      <div className={styles.advancedBlock}>\n        {renderRate()}\n        {renderNetworkFee()}\n\n        {explainedFee.shouldShowOurFee && (\n          <div className={styles.advancedRow}>\n            <span className={styles.advancedDescription}>\n              {lang('Aggregator Fee')}\n              <Tooltip>\n                <span>{renderText(lang('$swap_aggregator_fee_tooltip', { percent: `${ourFeePercent}%` }))}</span>\n              </Tooltip>\n            </span>\n            <span className={styles.advancedValue}>\n              {ourFee !== undefined\n                ? formatCurrency(ourFee, tokenIn?.symbol ?? '', undefined, true)\n                : <ValuePlaceholder />}\n            </span>\n          </div>\n        )}\n        {swapType === SwapType.OnChain && (\n          <>\n            <div className={styles.advancedRow}>\n              <span className={buildClassName(styles.advancedDescription, priceImpactError && styles.advancedError)}>\n                {lang('Price Impact')}\n                <Tooltip isError={Boolean(priceImpactError)}>\n                  <span>{lang('$swap_price_impact_tooltip1')}</span>\n                  <span>{lang('$swap_price_impact_tooltip2')}</span>\n                </Tooltip>\n              </span>\n              <span className={buildClassName(styles.advancedValue, priceImpactError && styles.advancedError)}>\n                {priceImpact !== undefined ? `${priceImpact}%` : <ValuePlaceholder />}\n              </span>\n            </div>\n            <div className={styles.advancedRow}>\n              <span className={styles.advancedDescription}>\n                {lang('Minimum Received')}\n                <Tooltip>\n                  <span>{lang('$swap_minimum_received_tooltip1')}</span>\n                  <span>{lang('$swap_minimum_received_tooltip2')}</span>\n                </Tooltip>\n              </span>\n              <span className={styles.advancedValue}>\n                {amountOutMin !== undefined && tokenOut\n                  ? formatCurrency(amountOutMin, tokenOut.symbol)\n                  : <ValuePlaceholder />}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n      <div className={modalStyles.buttons}>\n        <Button\n          className={modalStyles.button}\n          onClick={onClose}\n        >\n          {lang('Close')}\n        </Button>\n        {canEditSlippage && (\n          <Button\n            isPrimary\n            isDisabled={Boolean(slippageError)}\n            className={modalStyles.button}\n            onClick={handleSave}\n          >\n            {lang('Save')}\n          </Button>\n        )}\n      </div>\n    </>\n  );\n}\n\nconst SwapSettings = memo(\n  withGlobal<Omit<OwnProps, 'isOpen'>>((global): StateProps => {\n    const {\n      tokenInSlug,\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n    } = global.currentSwap;\n\n    const nativeToken = tokenInSlug ? findChainConfig(getChainBySlug(tokenInSlug))?.nativeToken : undefined;\n    const nativeTokenInBalance = nativeToken ? selectCurrentAccountTokenBalance(global, nativeToken.slug) : undefined;\n\n    return {\n      amountIn,\n      amountOut,\n      networkFee,\n      realNetworkFee,\n      swapType: selectSwapType(global),\n      tokenIn: selectCurrentSwapTokenIn(global),\n      tokenOut: selectCurrentSwapTokenOut(global),\n      slippage,\n      priceImpact,\n      amountOutMin,\n      ourFee,\n      ourFeePercent,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    };\n  })(SwapSettingsContent),\n);\n\nexport default function SwapSettingsModal({ isOpen, onClose, ...restProps }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} isCompact title={lang('Swap Details')}>\n      <SwapSettings onClose={onClose} {...restProps} />\n    </Modal>\n  );\n}\n\nfunction ValuePlaceholder() {\n  const lang = useLang();\n  return <span className={styles.advancedPlaceholder}>{lang('No Data')}</span>;\n}\n\nfunction Tooltip({ children, isError }: { children: TeactNode; isError?: boolean }) {\n  return (\n    <>\n      {' '}\n      <IconWithTooltip\n        message={children}\n        size=\"small\"\n        iconClassName={buildClassName(styles.advancedTooltip, isError && styles.advancedError)}\n        tooltipClassName={styles.advancedTooltipContainer}\n      />\n    </>\n  );\n}\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../global';\n\nimport type { ApiChain, ApiToken } from '../../api/types';\nimport type {\n  Account, ActionPayloads, AssetPairs, GlobalState, UserSwapToken,\n} from '../../global/types';\nimport type { LangFn } from '../../hooks/useLang';\nimport type { ExplainedSwapFee } from '../../util/fee/swapFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { SwapInputSource, SwapState, SwapType } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_SIZE_PX,\n  ANIMATION_LEVEL_MAX,\n  CHANGELLY_AML_KYC,\n  CHANGELLY_PRIVACY_POLICY,\n  CHANGELLY_TERMS_OF_USE,\n  DEFAULT_SWAP_SECOND_TOKEN_SLUG,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccount,\n  selectIsMultichainAccount,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { findChainConfig } from '../../util/chain';\nimport { fromDecimal, toDecimal } from '../../util/decimals';\nimport { stopEvent } from '../../util/domEvents';\nimport { explainSwapFee, getMaxSwapAmount, isBalanceSufficientForSwap } from '../../util/fee/swapFee';\nimport { vibrate } from '../../util/haptics';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport SelectTokenButton from '../common/SelectTokenButton';\nimport AmountInputMaxButton from '../ui/AmountInputMaxButton';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport FeeLine from '../ui/FeeLine';\nimport RichNumberInput from '../ui/RichNumberInput';\nimport SwapSubmitButton from './components/SwapSubmitButton';\nimport SwapDexChooser from './SwapDexChooser';\nimport SwapSettingsModal, { MAX_PRICE_IMPACT_VALUE } from './SwapSettingsModal';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  currentSwap: GlobalState['currentSwap'];\n  tokens?: UserSwapToken[];\n  isMultichainAccount?: boolean;\n  swapType: SwapType;\n  isSensitiveDataHidden?: true;\n  pairsBySlug?: Record<string, AssetPairs>;\n}\n\nconst ESTIMATE_REQUEST_INTERVAL = 1_000;\nconst SET_AMOUNT_DEBOUNCE_TIME = 500;\n\nfunction SwapInitial({\n  currentSwap: {\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn,\n    amountOut,\n    errorType,\n    isEstimating,\n    networkFee,\n    realNetworkFee,\n    priceImpact = 0,\n    inputSource,\n    limits,\n    isLoading,\n    dieselStatus,\n    ourFee,\n    ourFeePercent,\n    dieselFee,\n  },\n  addressByChain,\n  tokens,\n  isActive,\n  isStatic,\n  isMultichainAccount,\n  swapType,\n  isSensitiveDataHidden,\n  pairsBySlug,\n}: OwnProps & StateProps) {\n  const {\n    setDefaultSwapParams,\n    setSwapAmountIn,\n    setSwapAmountOut,\n    switchSwapTokens,\n    estimateSwap,\n    setSwapScreen,\n    setSwapCexAddress,\n    authorizeDiesel,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n\n  const inputInRef = useRef<HTMLDivElement>();\n  const inputOutRef = useRef<HTMLDivElement>();\n\n  const currentTokenInSlug = tokenInSlug ?? TONCOIN.slug;\n  const currentTokenOutSlug = tokenOutSlug ?? DEFAULT_SWAP_SECOND_TOKEN_SLUG;\n\n  const tokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenInSlug),\n    [currentTokenInSlug, tokens],\n  );\n  const tokenOut = useMemo(\n    () => tokens?.find((token) => token.slug === currentTokenOutSlug),\n    [currentTokenOutSlug, tokens],\n  );\n\n  const nativeTokenInSlug = isMultichainAccount || tokenIn?.chain === 'ton'\n    ? findChainConfig(tokenIn?.chain)?.nativeToken.slug\n    : undefined;\n  const nativeUserTokenIn = useMemo(\n    () => tokens?.find((token) => token.slug === nativeTokenInSlug),\n    [nativeTokenInSlug, tokens],\n  );\n  const nativeTokenInBalance = nativeUserTokenIn?.amount ?? 0n;\n\n  const amountInBigint = amountIn && tokenIn ? fromDecimal(amountIn, tokenIn.decimals) : undefined;\n  const amountOutBigint = amountOut && tokenOut ? fromDecimal(amountOut, tokenOut.decimals) : undefined;\n  const balanceIn = tokenIn?.amount ?? 0n;\n\n  const explainedFee = useMemo(\n    () => explainSwapFee({\n      swapType,\n      tokenInSlug,\n      networkFee,\n      realNetworkFee,\n      ourFee,\n      dieselStatus,\n      dieselFee,\n      nativeTokenInBalance,\n    }),\n    [swapType, tokenInSlug, networkFee, realNetworkFee, ourFee, dieselStatus, dieselFee, nativeTokenInBalance],\n  );\n\n  const maxAmount = getMaxSwapAmount({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n  });\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForSwap({\n    swapType,\n    tokenInBalance: balanceIn,\n    tokenIn,\n    fullNetworkFee: explainedFee.fullFee?.networkTerms,\n    ourFeePercent,\n    amountIn,\n    nativeTokenInBalance,\n  });\n\n  const networkFeeBigint = networkFee !== undefined && nativeUserTokenIn\n    ? fromDecimal(networkFee, nativeUserTokenIn.decimals)\n    : 0n;\n  const isEnoughNative = nativeTokenInBalance >= networkFeeBigint;\n\n  const isDieselNotAuthorized = explainedFee.isGasless && dieselStatus === 'not-authorized';\n\n  const canSubmit = isDieselNotAuthorized || (\n    (amountInBigint ?? 0n) > 0n\n    && (amountOutBigint ?? 0n) > 0n\n    && isEnoughBalance\n    && (!explainedFee.isGasless || dieselStatus === 'available' || dieselStatus === 'stars-fee')\n    && !isEstimating\n    && errorType === undefined\n  );\n\n  const hasAmountInError = amountInBigint !== undefined && maxAmount !== undefined && amountInBigint > maxAmount;\n  const amountOutValue = (amountInBigint ?? 0n) <= 0n && inputSource === SwapInputSource.In\n    ? ''\n    : amountOut?.toString();\n  const isAmountGreaterThanBalance = balanceIn !== undefined && amountInBigint !== undefined\n    && amountInBigint > balanceIn;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && dieselStatus !== 'not-authorized' && dieselStatus !== 'pending-previous';\n\n  const isPriceImpactError = priceImpact >= MAX_PRICE_IMPACT_VALUE;\n  const isCrosschain = swapType === SwapType.CrosschainFromWallet || swapType === SwapType.CrosschainToWallet;\n\n  const [isBuyAmountInputDisabled, handleBuyAmountInputClick] = useReverseProhibited(\n    isCrosschain,\n    pairsBySlug,\n    currentTokenInSlug,\n    currentTokenOutSlug,\n    showNotification,\n    lang,\n  );\n\n  const handleEstimateSwap = useLastCallback(() => {\n    if ((!isActive || isBackgroundModeActive()) && !isEstimating) return;\n\n    estimateSwap();\n  });\n\n  const debounceSetAmountIn = useDebouncedCallback(\n    setSwapAmountIn, [setSwapAmountIn], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n  const debounceSetAmountOut = useDebouncedCallback(\n    setSwapAmountOut, [setSwapAmountOut], SET_AMOUNT_DEBOUNCE_TIME, true,\n  );\n\n  const [currentSubModal, openSettingsModal, openFeeModal, closeSubModal] = useSubModals(explainedFee);\n\n  useEffect(() => {\n    if (!tokenInSlug && !tokenOutSlug) {\n      setDefaultSwapParams();\n    }\n  }, [tokenInSlug, tokenOutSlug]);\n\n  useEffect(() => {\n    if (isEstimating) {\n      handleEstimateSwap();\n    }\n\n    const intervalId = setInterval(handleEstimateSwap, ESTIMATE_REQUEST_INTERVAL);\n    return () => clearInterval(intervalId);\n  }, [isEstimating]);\n\n  const handleAmountInChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountIn({ amount: amount || undefined });\n    },\n  );\n\n  const handleSelectTokenInModalOpen = useLastCallback(() => {\n    setSwapScreen({ state: SwapState.SelectTokenFrom });\n  });\n\n  const handleSelectTokenOutModalOpen = useLastCallback(() => {\n    setSwapScreen({ state: SwapState.SelectTokenTo });\n  });\n\n  const handleAmountOutChange = useLastCallback(\n    (amount: string | undefined) => {\n      debounceSetAmountOut({ amount: amount || undefined });\n    },\n  );\n\n  const handleMaxAmountClick = useLastCallback(() => {\n    if (maxAmount === undefined) {\n      return;\n    }\n\n    void vibrate();\n\n    const amount = toDecimal(maxAmount, tokenIn!.decimals);\n    setSwapAmountIn({ amount, isMaxAmount: true });\n  });\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (!canSubmit) {\n      return;\n    }\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    void vibrate();\n\n    if (isCrosschain) {\n      setSwapCexAddress({ toAddress: '' });\n      if (swapType === SwapType.CrosschainToWallet) {\n        setSwapScreen({ state: SwapState.Password });\n      } else if (\n        isMultichainAccount\n        && addressByChain![tokenIn!.chain as ApiChain]\n        && addressByChain![tokenOut!.chain as ApiChain]\n      ) {\n        setSwapCexAddress({ toAddress: addressByChain![tokenOut!.chain as ApiChain]! });\n        setSwapScreen({ state: SwapState.Password });\n      } else {\n        setSwapScreen({ state: SwapState.Blockchain });\n      }\n      return;\n    }\n\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleSwitchTokens = useLastCallback(() => {\n    void vibrate();\n    switchSwapTokens();\n  });\n\n  function renderBalance() {\n    return (\n      <AmountInputMaxButton\n        maxAmount={maxAmount}\n        token={tokenIn}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onAmountClick={handleMaxAmountClick}\n      />\n    );\n  }\n\n  function renderFee() {\n    const shouldShow = (amountIn && amountOut) // We aim to synchronize the disappearing of the fee with the DEX chooser disappearing\n      || ((amountIn || amountOut) && errorType); // Without this sub-condition the fee wouldn't be shown when the amount is outside the Changelly limits\n\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (shouldShow) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : undefined;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={tokenIn}\n        precision={precision}\n        keepDetailsButtonWithoutFee\n        onDetailsClick={openSettingsModal}\n        className={styles.feeLine}\n      />\n    );\n  }\n\n  function renderPriceImpactWarning() {\n    if (!priceImpact || !isPriceImpactError || isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div\n        className={buildClassName(styles.priceImpact, isStatic && styles.priceImpactStatic)}\n        onClick={openSettingsModal}\n      >\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.run}\n          previewUrl={ANIMATED_STICKERS_PATHS.runPreview}\n          noLoop={false}\n          nonInteractive\n          size={ANIMATED_STICKER_TINY_SIZE_PX}\n          className={styles.priceImpactSticker}\n        />\n        <div className={styles.priceImpactContent}>\n          <span className={styles.priceImpactTitle}>\n            {lang('The exchange rate is below market value!', { value: `${priceImpact}%` })}\n            <i className={buildClassName(styles.priceImpactArrow, 'icon-chevron-right')} aria-hidden />\n          </span>\n          <span className={styles.priceImpactDescription}>\n            {lang('We do not recommend to perform an exchange, try to specify a lower amount.')}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (!isCrosschain) {\n      return undefined;\n    }\n\n    return (\n      <div className={buildClassName(styles.changellyInfo, isStatic && styles.changellyInfoStatic)}>\n        <span className={styles.changellyInfoTitle}>\n          <i className={buildClassName('icon-changelly', styles.changellyIcon)} aria-hidden />\n          {lang('Cross-chain exchange provided by Changelly')}\n        </span>\n        <span className={styles.changellyInfoDescription}>\n          {\n            lang('$swap_changelly_agreement_message', {\n              terms: (\n                <a href={CHANGELLY_TERMS_OF_USE} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_terms_of_use')}\n                </a>\n              ),\n              policy: (\n                <a href={CHANGELLY_PRIVACY_POLICY} target=\"_blank\" rel=\"noreferrer\">\n                  {lang('$swap_changelly_privacy_policy')}\n                </a>\n              ),\n              kyc: <a href={CHANGELLY_AML_KYC} target=\"_blank\" rel=\"noreferrer\">Changelly AML/KYC</a>,\n            })\n          }\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <form className={isStatic ? undefined : modalStyles.transitionContent} onSubmit={handleSubmit}>\n        <div className={styles.content}>\n          <div ref={inputInRef} className={styles.inputContainer}>\n            {renderBalance()}\n            <RichNumberInput\n              id=\"swap-sell\"\n              labelText={lang('You sell')}\n              className={styles.amountInput}\n              hasError={hasAmountInError}\n              value={amountIn?.toString()}\n              isLoading={isEstimating && inputSource === SwapInputSource.Out}\n              onChange={handleAmountInChange}\n              onPressEnter={handleSubmit}\n              decimals={tokenIn?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerTop, isStatic && styles.swapCornerStaticTop)}\n              isStatic={isStatic}\n            >\n              <SelectTokenButton token={tokenIn as ApiToken} onClick={handleSelectTokenInModalOpen} />\n            </RichNumberInput>\n          </div>\n\n          <div className={buildClassName(styles.swapButtonWrapper, isStatic && styles.swapButtonWrapperStatic)}>\n            <AnimatedArrows onClick={handleSwitchTokens} />\n          </div>\n\n          <div ref={inputOutRef} className={styles.inputContainer}>\n            <RichNumberInput\n              id=\"swap-buy\"\n              labelText={lang('You buy')}\n              className={styles.amountInputBuy}\n              value={amountOutValue}\n              isLoading={isEstimating && inputSource === SwapInputSource.In}\n              disabled={isBuyAmountInputDisabled}\n              onChange={handleAmountOutChange}\n              onPressEnter={handleSubmit}\n              onInputClick={handleBuyAmountInputClick}\n              decimals={tokenOut?.decimals}\n              labelClassName={styles.inputLabel}\n              inputClassName={styles.amountInputInner}\n              cornerClassName={buildClassName(styles.swapCornerBottom, isStatic && styles.swapCornerStaticBottom)}\n              isStatic={isStatic}\n            >\n              <SelectTokenButton token={tokenOut as ApiToken} onClick={handleSelectTokenOutModalOpen} />\n            </RichNumberInput>\n          </div>\n        </div>\n        <SwapDexChooser tokenIn={tokenIn} tokenOut={tokenOut} isStatic={isStatic} />\n\n        <div className={buildClassName(styles.footerBlock, isStatic && styles.footerBlockStatic)}>\n          {renderFee()}\n          {renderPriceImpactWarning()}\n          {renderChangellyInfo()}\n\n          <SwapSubmitButton\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            amountIn={amountIn}\n            amountOut={amountOut}\n            swapType={swapType}\n            isEstimating={isEstimating}\n            isNotEnoughNative={!isEnoughNative}\n            nativeToken={nativeUserTokenIn}\n            dieselStatus={dieselStatus}\n            isSending={isLoading}\n            isPriceImpactError={isPriceImpactError}\n            canSubmit={canSubmit}\n            errorType={errorType}\n            limits={limits}\n          />\n        </div>\n      </form>\n      <SwapSettingsModal\n        isOpen={currentSubModal === 'settings'}\n        onClose={closeSubModal}\n        onNetworkFeeClick={openFeeModal}\n        showFullNetworkFee={hasInsufficientFeeError}\n      />\n      <FeeDetailsModal\n        isOpen={currentSubModal === 'feeDetails'}\n        onClose={closeSubModal}\n        fullFee={explainedFee.fullFee?.networkTerms}\n        realFee={explainedFee.realFee?.networkTerms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={tokenIn}\n      />\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const account = selectCurrentAccount(global);\n\n      return {\n        currentSwap: global.currentSwap,\n        tokens: selectSwapTokens(global),\n        addressByChain: account?.addressByChain,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        swapType: selectSwapType(global),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        pairsBySlug: global.swapPairs?.bySlug,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(SwapInitial),\n);\n\nfunction useReverseProhibited(\n  isCrosschain: boolean,\n  pairsBySlug: Record<string, AssetPairs> | undefined,\n  currentTokenInSlug: string,\n  currentTokenOutSlug: string,\n  showNotification: (arg: ActionPayloads['showNotification']) => void,\n  lang: LangFn,\n) {\n  const isReverseProhibited = isCrosschain\n    || pairsBySlug?.[currentTokenInSlug]?.[currentTokenOutSlug]?.isReverseProhibited;\n  const isBuyAmountInputDisabled = isReverseProhibited;\n\n  const handleBuyAmountInputClick = useMemo(() => {\n    return isReverseProhibited\n      ? () => {\n        void vibrate();\n        showNotification({ message: lang('$swap_reverse_prohibited') });\n      }\n      : undefined;\n  }, [isReverseProhibited, lang, showNotification]);\n\n  return [isBuyAmountInputDisabled, handleBuyAmountInputClick] as const;\n}\n\nfunction AnimatedArrows({ onClick }: { onClick?: NoneToVoidFunction }) {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const shouldAnimate = (animationLevel === ANIMATION_LEVEL_MAX);\n  const [hasAnimation, startAnimation, stopAnimation] = useFlag(false);\n\n  const handleClick = useLastCallback(() => {\n    if (shouldAnimate) {\n      startAnimation();\n      window.setTimeout(() => {\n        stopAnimation();\n      }, 350);\n    }\n\n    onClick?.();\n  });\n\n  function renderArrow(isInverted?: boolean) {\n    return (\n      <div className={buildClassName(styles.arrowContainer, isInverted && styles.arrowContainerInverted)}>\n        <div className={styles.arrow}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowOld, hasAnimation && styles.animateDisappear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n        <div className={buildClassName(styles.arrowNew, hasAnimation && styles.animateAppear)}>\n          <i className=\"icon-arrow-up-swap\" aria-hidden />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.swapButton} onClick={handleClick}>\n      {renderArrow()}\n      {renderArrow(true)}\n    </div>\n  );\n}\n\nfunction useSubModals(explainedFee: ExplainedSwapFee) {\n  const isFeeModalAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [currentModal, setCurrentModal] = useState<'settings' | 'feeDetails'>();\n\n  const openSettings = useLastCallback(() => setCurrentModal('settings'));\n  const openFeeDetailsIfAvailable = useMemo(\n    () => (isFeeModalAvailable ? () => setCurrentModal('feeDetails') : undefined),\n    [isFeeModalAvailable],\n  );\n  const close = useLastCallback(() => setCurrentModal(undefined));\n\n  return [currentModal, openSettings, openFeeDetailsIfAvailable, close] as const;\n}\n","export function trimStringByMaxBytes(str: string, maxBytes: number): string {\n  const decoder = new TextDecoder('utf-8');\n  const encoded = new TextEncoder().encode(str);\n  const sliced = encoded.slice(0, maxBytes);\n\n  return decoder.decode(sliced).replace(/\\uFFFD/g, '');\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiChain } from '../../api/types';\n\nimport renderText from '../../global/helpers/renderText';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Dropdown from '../ui/Dropdown';\nimport Input from '../ui/Input';\nimport InteractiveTextField from '../ui/InteractiveTextField';\n\nimport styles from './Transfer.module.scss';\n\nconst COMMENT_DROPDOWN_ITEMS = [\n  { value: 'raw', name: 'Comment or Memo' },\n  { value: 'encrypted', name: 'Encrypted Message' },\n];\n\ninterface OwnProps {\n  comment: string;\n  shouldEncrypt?: boolean;\n  binPayload?: string;\n  stateInit?: string;\n  chain?: ApiChain;\n  isStatic?: boolean;\n  isCommentRequired?: boolean;\n  isEncryptedCommentSupported: boolean;\n  onCommentChange: (value: string) => void;\n}\n\nfunction CommentSection({\n  comment,\n  shouldEncrypt,\n  binPayload,\n  stateInit,\n  chain,\n  isStatic,\n  isCommentRequired,\n  isEncryptedCommentSupported,\n  onCommentChange,\n}: OwnProps) {\n  const { setTransferShouldEncrypt } = getActions();\n\n  const lang = useLang();\n\n  const handleCommentOptionsChange = useLastCallback((option: string) => {\n    setTransferShouldEncrypt({ shouldEncrypt: option === 'encrypted' });\n  });\n\n  const dropdownItems = useMemo(\n    () => isEncryptedCommentSupported ? COMMENT_DROPDOWN_ITEMS : COMMENT_DROPDOWN_ITEMS.slice(0, 1),\n    [isEncryptedCommentSupported],\n  );\n\n  function renderCommentLabel() {\n    return (\n      <Dropdown\n        items={dropdownItems}\n        selectedValue={COMMENT_DROPDOWN_ITEMS[shouldEncrypt ? 1 : 0].value}\n        theme=\"inherit\"\n        disabled={chain === 'tron'}\n        menuPositionX=\"left\"\n        shouldTranslateOptions\n        onChange={handleCommentOptionsChange}\n      />\n    );\n  }\n\n  if (binPayload || stateInit) {\n    return (\n      <>\n        {binPayload && (\n          <>\n            <div className={styles.label}>{lang('Signing Data')}</div>\n            <InteractiveTextField\n              text={binPayload}\n              copyNotification={lang('Data was copied!')}\n              className={styles.addressWidget}\n            />\n          </>\n        )}\n\n        {stateInit && (\n          <>\n            <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n            <InteractiveTextField\n              text={stateInit}\n              copyNotification={lang('Data was copied!')}\n              className={styles.addressWidget}\n            />\n          </>\n        )}\n\n        <div className={styles.error}>\n          {renderText(lang('$signature_warning'))}\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <Input\n      wrapperClassName={styles.commentInputWrapper}\n      className={isStatic ? styles.inputStatic : undefined}\n      label={renderCommentLabel()}\n      placeholder={isCommentRequired ? lang('Required') : lang('Optional')}\n      value={comment}\n      isMultiline\n      isDisabled={chain === 'tron'}\n      onInput={onCommentChange}\n      isRequired={isCommentRequired}\n    />\n  );\n}\n\nexport default memo(CommentSection);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useCallback, useEffect, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiFetchEstimateDieselResult } from '../../api/chains/ton/types';\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport type { Account, SavedAddress, UserToken } from '../../global/types';\nimport type { ExplainedTransferFee } from '../../util/fee/transferFee';\nimport type { FeePrecision, FeeTerms } from '../../util/fee/types';\nimport { TransferState } from '../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, HELP_CENTER_SEED_SCAM_URL, TONCOIN } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokenBalance,\n  selectCurrentAccountTokens,\n  selectIsHardwareAccount,\n  selectIsMultichainAccount,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { stopEvent } from '../../util/domEvents';\nimport {\n  explainApiTransferFee, getMaxTransferAmount, isBalanceSufficientForTransfer,\n} from '../../util/fee/transferFee';\nimport { vibrate } from '../../util/haptics';\nimport { isValidAddressOrDomain } from '../../util/isValidAddressOrDomain';\nimport { debounce } from '../../util/schedulers';\nimport { trimStringByMaxBytes } from '../../util/text';\nimport { getChainBySlug, getIsServiceToken, getNativeToken } from '../../util/tokens';\n\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { useTransitionActiveKey } from '../../hooks/useTransitionActiveKey';\nimport { useAmountInputState } from '../ui/hooks/useAmountInputState';\n\nimport FeeDetailsModal from '../common/FeeDetailsModal';\nimport AddressInput from '../ui/AddressInput';\nimport AmountInputSection from '../ui/AmountInput';\nimport Button from '../ui/Button';\nimport FeeLine from '../ui/FeeLine';\nimport Modal from '../ui/Modal';\nimport Transition from '../ui/Transition';\nimport CommentSection from './CommentSection';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isStatic?: boolean;\n  slideClassName?: string;\n}\n\ninterface StateProps {\n  toAddress?: string;\n  resolvedAddress?: string;\n  toAddressName?: string;\n  amount?: bigint;\n  comment?: string;\n  shouldEncrypt?: boolean;\n  isActive: boolean;\n  isLoading?: boolean;\n  fee?: bigint;\n  realFee?: bigint;\n  tokenSlug: string;\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  currentAccountId: string;\n  accounts?: Record<string, Account>;\n  nativeTokenBalance: bigint;\n  isEncryptedCommentSupported: boolean;\n  isMemoRequired?: boolean;\n  baseCurrency: ApiBaseCurrency;\n  nfts?: ApiNft[];\n  binPayload?: string;\n  stateInit?: string;\n  diesel?: ApiFetchEstimateDieselResult;\n  isDieselAuthorizationStarted?: boolean;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n  shouldShowScamWarning?: true;\n}\n\nconst COMMENT_MAX_SIZE_BYTES = 5000;\nconst ACTIVE_STATES = new Set([TransferState.Initial, TransferState.None]);\nconst AUTHORIZE_DIESEL_INTERVAL_MS = SECOND;\n\nconst runDebounce = debounce((cb) => cb(), 500, false);\n\nfunction TransferInitial({\n  isStatic,\n  slideClassName,\n  tokenSlug,\n  toAddress = '',\n  resolvedAddress,\n  toAddressName = '',\n  amount,\n  comment = '',\n  shouldEncrypt,\n  tokens,\n  fee,\n  realFee,\n  savedAddresses,\n  accounts,\n  nativeTokenBalance,\n  currentAccountId,\n  isEncryptedCommentSupported,\n  isMemoRequired,\n  isActive,\n  isLoading,\n  baseCurrency,\n  nfts,\n  binPayload,\n  stateInit,\n  diesel,\n  isDieselAuthorizationStarted,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  shouldShowScamWarning,\n}: OwnProps & StateProps) {\n  const {\n    submitTransferInitial,\n    fetchTransferFee,\n    fetchNftFee,\n    changeTransferToken,\n    setTransferAmount,\n    setTransferToAddress,\n    setTransferComment,\n    setTransferShouldEncrypt,\n    cancelTransfer,\n    showDialog,\n    authorizeDiesel,\n    fetchTransferDieselState,\n    checkTransferAddress,\n    dismissTransferScamWarning,\n  } = getActions();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    // Token and amount can't be selected in the NFT transfer form, so they are overwritten once for convenience\n    tokenSlug = TONCOIN.slug;\n    amount = undefined;\n  }\n\n  const lang = useLang();\n\n  const transferToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const { amount: balance, symbol, chain } = transferToken || {};\n\n  const isDisabledDebounce = useRef<boolean>(false);\n  const isToncoin = tokenSlug === TONCOIN.slug;\n  const isAddressValid = chain ? isValidAddressOrDomain(toAddress, chain) : undefined;\n  const doesSupportComment = chain === 'ton';\n  const transitionKey = useTransitionActiveKey(nfts?.length ? nfts : [tokenSlug]);\n  const helpCenterLink = (\n    HELP_CENTER_SEED_SCAM_URL[lang.code as keyof typeof HELP_CENTER_SEED_SCAM_URL]\n    || HELP_CENTER_SEED_SCAM_URL.en\n  );\n\n  const handleAddressInput = useLastCallback((newToAddress?: string, isValueReplaced?: boolean) => {\n    // If value is replaced, callbacks must be executed immediately, without debounce\n    if (isValueReplaced) {\n      isDisabledDebounce.current = true;\n    }\n\n    setTransferToAddress({ toAddress: newToAddress });\n  });\n\n  const shouldDisableClearButton = !toAddress && !(comment || binPayload) && !shouldEncrypt\n    && !(isNftTransfer ? isStatic : amount !== undefined);\n\n  const explainedFee = useMemo(\n    () => explainApiTransferFee({\n      fee, realFee, diesel, tokenSlug,\n    }),\n    [fee, realFee, diesel, tokenSlug],\n  );\n\n  // Note: this constant has 3 distinct meaningful values\n  const isEnoughBalance = isBalanceSufficientForTransfer({\n    tokenBalance: balance,\n    nativeTokenBalance,\n    transferAmount: isNftTransfer ? 0n : amount,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isAmountMissing = !isNftTransfer && !amount;\n\n  const maxAmount = getMaxTransferAmount({\n    tokenBalance: balance,\n    tokenSlug,\n    fullFee: explainedFee.fullFee?.terms,\n    canTransferFullBalance: explainedFee.canTransferFullBalance,\n  });\n\n  const isDieselNotAuthorized = diesel?.status === 'not-authorized';\n  const authorizeDieselInterval = isDieselNotAuthorized && isDieselAuthorizationStarted\n    ? AUTHORIZE_DIESEL_INTERVAL_MS\n    : undefined;\n\n  const updateDieselState = useLastCallback(() => {\n    fetchTransferDieselState({ tokenSlug });\n  });\n\n  useInterval(updateDieselState, authorizeDieselInterval);\n\n  useEffect(() => {\n    if (\n      isToncoin\n      && balance && amount && fee\n      && amount < balance\n      && fee < balance\n      && amount + fee >= balance\n    ) {\n      setTransferAmount({ amount: balance - fee });\n    }\n  }, [isToncoin, amount, balance, fee]);\n\n  // Note: this effect doesn't watch amount changes mainly because it's tricky to program a fee recalculation avoidance\n  // when the amount changes due to a fee change. And it's not needed because the fee doesn't depend on the amount.\n  useEffect(() => {\n    if (isAmountMissing || !isAddressValid) {\n      return;\n    }\n\n    const runFunction = () => {\n      if (isNftTransfer) {\n        fetchNftFee({\n          toAddress,\n          comment,\n          nfts: nfts ?? [],\n        });\n      } else {\n        fetchTransferFee({\n          tokenSlug,\n          toAddress,\n          comment,\n          shouldEncrypt,\n          binPayload,\n          stateInit,\n        });\n      }\n    };\n\n    if (!isDisabledDebounce.current) {\n      runDebounce(runFunction);\n    } else {\n      isDisabledDebounce.current = false;\n      runFunction();\n    }\n  }, [\n    isAmountMissing, binPayload, comment, shouldEncrypt, isAddressValid, isNftTransfer, nfts, stateInit, toAddress,\n    tokenSlug,\n  ]);\n\n  useEffect(() => {\n    if (getIsServiceToken(transferToken)) {\n      showDialog({\n        title: lang('Warning!'),\n        message: lang('$service_token_transfer_warning'),\n        noBackdropClose: true,\n      });\n    }\n  }, [lang, transferToken]);\n\n  const handleTokenChange = useLastCallback((slug: string) => {\n    changeTransferToken({ tokenSlug: slug });\n  });\n\n  const handleClear = useLastCallback(() => {\n    if (isStatic) {\n      cancelTransfer({ shouldReset: true });\n    } else {\n      handleAddressInput('');\n      checkTransferAddress({ address: '' });\n      setTransferAmount({ amount: undefined });\n      setTransferComment({ comment: undefined });\n      setTransferShouldEncrypt({ shouldEncrypt: false });\n    }\n  });\n\n  const handleAmountChange = (amount?: bigint, isValueReplaced?: boolean) => {\n    // The amount input may change the amount when it's in the base currency mode and the token price changes.\n    // Meanwhile, the amount in the global state must not change after the transfer form is submitted.\n    if (!isActive) {\n      return;\n    }\n\n    if (amount !== undefined && amount < 0) {\n      return;\n    }\n\n    // If the value is replaced, callbacks must be executed immediately, without debounce\n    if (isValueReplaced) {\n      isDisabledDebounce.current = true;\n    }\n\n    setTransferAmount({ amount });\n  };\n\n  const handlePaste = useLastCallback(() => {\n    isDisabledDebounce.current = true;\n  });\n\n  const handleCommentChange = useLastCallback((value) => {\n    setTransferComment({ comment: trimStringByMaxBytes(value, COMMENT_MAX_SIZE_BYTES) });\n  });\n\n  const isAmountGreaterThanBalance = !isNftTransfer && balance !== undefined && amount !== undefined\n    && amount > balance;\n  const hasInsufficientFeeError = isEnoughBalance === false && !isAmountGreaterThanBalance\n    && diesel?.status !== 'not-authorized' && diesel?.status !== 'pending-previous';\n  const hasAmountError = !isNftTransfer && amount !== undefined && (\n    (maxAmount !== undefined && amount > maxAmount)\n    || hasInsufficientFeeError // Ideally, the insufficient fee error message should be displayed somewhere else\n  );\n  const isCommentRequired = Boolean(toAddress) && isMemoRequired;\n  const hasCommentError = isCommentRequired && !comment;\n\n  const canSubmit = isDieselNotAuthorized || Boolean(\n    isAddressValid\n    && !isAmountMissing && !hasAmountError\n    && isEnoughBalance\n    && !hasCommentError\n    && (!explainedFee.isGasless || diesel?.status === 'available' || diesel?.status === 'stars-fee')\n    && !(isNftTransfer && !nfts?.length),\n  );\n\n  const handleSubmit = useLastCallback((e: React.FormEvent | React.UIEvent) => {\n    stopEvent(e);\n\n    if (isDieselNotAuthorized) {\n      authorizeDiesel();\n      return;\n    }\n\n    if (!canSubmit) {\n      return;\n    }\n\n    void vibrate();\n\n    submitTransferInitial({\n      tokenSlug,\n      amount: amount ?? 0n,\n      toAddress,\n      comment,\n      binPayload,\n      shouldEncrypt,\n      nfts,\n      withDiesel: explainedFee.isGasless,\n      isGaslessWithStars: diesel?.status === 'stars-fee',\n      stateInit,\n    });\n  });\n\n  const [isFeeModalOpen, openFeeModal, closeFeeModal] = useFeeModal(explainedFee);\n\n  const tokensToSelect = useMemo(\n    () => (tokens ?? []).filter((token) => isSelectableToken(token, tokenSlug)),\n    [tokens, tokenSlug],\n  );\n\n  const amountInputProps = useAmountInputState({\n    amount,\n    token: transferToken,\n    baseCurrency,\n    onAmountChange: handleAmountChange,\n    onTokenChange: handleTokenChange,\n  });\n\n  // It is necessary to use useCallback instead of useLastCallback here\n  const renderBottomRight = useCallback((className?: string) => {\n    let transitionKey = 0;\n    let content: TeactNode = ' ';\n\n    if (amount) {\n      if (isAmountGreaterThanBalance) {\n        transitionKey = 1;\n        content = <span className={styles.balanceError}>{lang('Insufficient balance')}</span>;\n      } else if (hasInsufficientFeeError) {\n        transitionKey = 2;\n        content = <span className={styles.balanceError}>{lang('Insufficient fee')}</span>;\n      }\n    }\n\n    return (\n      <Transition\n        className={className}\n        name=\"fade\"\n        activeKey={transitionKey}\n      >\n        {content}\n      </Transition>\n    );\n  }, [amount, hasInsufficientFeeError, isAmountGreaterThanBalance, lang]);\n\n  function renderButtonText() {\n    if (diesel?.status === 'not-authorized') {\n      return lang('Authorize %token% Fee', { token: symbol! });\n    }\n    if (diesel?.status === 'pending-previous') {\n      return lang('Awaiting Previous Fee');\n    }\n    return lang('$send_token_symbol', isNftTransfer ? 'NFT' : symbol || 'TON');\n  }\n\n  function renderFee() {\n    let terms: FeeTerms | undefined;\n    let precision: FeePrecision = 'exact';\n\n    if (!isAmountMissing) {\n      const actualFee = hasInsufficientFeeError ? explainedFee.fullFee : explainedFee.realFee;\n      if (actualFee) {\n        ({ terms, precision } = actualFee);\n      }\n    }\n\n    return (\n      <FeeLine\n        isStatic={isStatic}\n        terms={terms}\n        token={transferToken}\n        precision={precision}\n        onDetailsClick={openFeeModal}\n      />\n    );\n  }\n\n  return (\n    <>\n      <form\n        className={isStatic ? undefined : modalStyles.transitionContent}\n        onSubmit={handleSubmit}\n        onPaste={handlePaste}\n      >\n        <Transition\n          activeKey={transitionKey}\n          name=\"semiFade\"\n          direction={isStatic && !doesSupportComment ? 'inverse' : undefined}\n          shouldCleanup\n          slideClassName={buildClassName(styles.formSlide, isStatic && styles.formSlide_static, slideClassName)}\n        >\n          {nfts?.length === 1 && <NftInfo nft={nfts[0]} isStatic={isStatic} withMediaViewer />}\n          {Boolean(nfts?.length) && nfts.length > 1 && <NftChips nfts={nfts} isStatic={isStatic} />}\n\n          <AddressInput\n            label={lang('Recipient Address')}\n            value={toAddress}\n            chain={chain}\n            // NFT transfers are available only on the TON blockchain on this moment\n            addressBookChain={isNftTransfer ? 'ton' : undefined}\n            currentAccountId={currentAccountId}\n            accounts={accounts}\n            savedAddresses={savedAddresses}\n            validateAddress={checkTransferAddress}\n            isStatic={isStatic}\n            withQrScan\n            address={resolvedAddress || toAddress}\n            addressName={toAddressName}\n            onInput={handleAddressInput}\n            onClose={cancelTransfer}\n          />\n\n          {!isNftTransfer && (\n            <AmountInputSection\n              {...amountInputProps}\n              maxAmount={maxAmount}\n              token={transferToken}\n              allTokens={tokensToSelect}\n              isStatic={isStatic}\n              hasError={hasAmountError}\n              isMultichainAccount={isMultichainAccount}\n              isMaxAmountLoading={maxAmount === undefined}\n              isSensitiveDataHidden={isSensitiveDataHidden}\n              renderBottomRight={renderBottomRight}\n              onPressEnter={handleSubmit}\n            />\n          )}\n\n          {doesSupportComment && (\n            <CommentSection\n              comment={comment}\n              shouldEncrypt={shouldEncrypt}\n              binPayload={binPayload}\n              stateInit={stateInit}\n              chain={chain}\n              isStatic={isStatic}\n              isCommentRequired={isCommentRequired}\n              isEncryptedCommentSupported={isEncryptedCommentSupported}\n              onCommentChange={handleCommentChange}\n            />\n          )}\n\n          <div className={buildClassName(styles.footer, isStatic && chain !== 'ton' && styles.footer_shifted)}>\n            {renderFee()}\n\n            <div className={styles.buttons}>\n              <Button\n                isDisabled={shouldDisableClearButton || isLoading}\n                className={styles.button}\n                onClick={handleClear}\n              >\n                {lang('Clear')}\n              </Button>\n              <Button\n                isPrimary\n                isSubmit\n                isDisabled={!canSubmit}\n                isLoading={isLoading}\n                className={styles.button}\n              >\n                {renderButtonText()}\n              </Button>\n            </div>\n          </div>\n        </Transition>\n      </form>\n      <FeeDetailsModal\n        isOpen={isFeeModalOpen}\n        onClose={closeFeeModal}\n        fullFee={explainedFee.fullFee?.terms}\n        realFee={explainedFee.realFee?.terms}\n        realFeePrecision={explainedFee.realFee?.precision}\n        excessFee={explainedFee.excessFee}\n        excessFeePrecision=\"approximate\"\n        token={transferToken}\n      />\n      <Modal\n        isOpen={shouldShowScamWarning}\n        isCompact\n        title={lang('Warning!')}\n        noBackdropClose\n        onClose={dismissTransferScamWarning}\n      >\n        <div>\n          {lang('$seed_phrase_scam_warning', {\n            help_center_link: (\n              <a href={helpCenterLink} target=\"_blank\" rel=\"noreferrer\">\n                <b>{lang('$help_center_prepositional')}</b>\n              </a>\n            ),\n          })}\n        </div>\n        <div className={modalStyles.footerButtons}>\n          <Button onClick={dismissTransferScamWarning}>{lang('OK')}</Button>\n        </div>\n      </Modal>\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        toAddress,\n        resolvedAddress,\n        toAddressName,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        tokenSlug,\n        isLoading,\n        state,\n        nfts,\n        binPayload,\n        isMemoRequired,\n        diesel,\n        stateInit,\n        shouldShowScamWarning,\n      } = global.currentTransfer;\n\n      const isLedger = selectIsHardwareAccount(global);\n      const accountState = selectCurrentAccountState(global);\n      const { baseCurrency = DEFAULT_PRICE_CURRENCY, isSensitiveDataHidden } = global.settings;\n      const isActive = ACTIVE_STATES.has(state);\n\n      return {\n        toAddress,\n        resolvedAddress,\n        toAddressName,\n        amount,\n        comment,\n        shouldEncrypt,\n        fee,\n        realFee,\n        nfts,\n        tokenSlug,\n        binPayload,\n        stateInit,\n        tokens: selectCurrentAccountTokens(global),\n        savedAddresses: accountState?.savedAddresses,\n        isEncryptedCommentSupported: !isLedger && !nfts?.length && !isMemoRequired,\n        isMemoRequired,\n        isActive,\n        isLoading: isLoading && isActive,\n        baseCurrency,\n        currentAccountId: global.currentAccountId!,\n        accounts: selectNetworkAccounts(global),\n        nativeTokenBalance: selectCurrentAccountTokenBalance(global, getNativeToken(getChainBySlug(tokenSlug)).slug),\n        diesel,\n        isDieselAuthorizationStarted: accountState?.isDieselAuthorizationStarted,\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        isSensitiveDataHidden,\n        shouldShowScamWarning,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(TransferInitial),\n);\n\nfunction useFeeModal(explainedFee: ExplainedTransferFee) {\n  const isAvailable = explainedFee.realFee?.precision !== 'exact';\n  const [isOpen, open, close] = useFlag(false);\n  const openIfAvailable = isAvailable ? open : undefined;\n  return [isOpen, openIfAvailable, close] as const;\n}\n\nfunction isSelectableToken(token: UserToken, selectedTokenSlug: string) {\n  return token.type !== 'lp_token'\n    || (token.amount > 0 && !token.isDisabled)\n    || token.slug === selectedTokenSlug;\n}\n","import { type ElementRef, useEffect, useState } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../global/types';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { stopEvent } from '../util/domEvents';\nimport { vibrate } from '../util/haptics';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\ninterface OwnProps {\n  elementRef: ElementRef<HTMLElement>;\n  isMenuDisabled?: boolean;\n  shouldDisableOnLink?: boolean;\n  shouldDisableOnLongTap?: boolean;\n  shouldDisablePropagation?: boolean;\n}\n\nconst useContextMenuHandlers = ({\n  elementRef,\n  isMenuDisabled,\n  shouldDisableOnLink,\n  shouldDisableOnLongTap,\n  shouldDisablePropagation,\n}: OwnProps) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuAnchor, setContextMenuAnchor] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    stopEvent(e);\n\n    if (contextMenuAnchor) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuAnchor({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n    void vibrate();\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuAnchor(undefined);\n  });\n\n  const handleTouchMove = useLastCallback((e: TouchEvent) => {\n    if (isContextMenuOpen) {\n      stopEvent(e);\n    }\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n    const clearLongPressTimerAndStopEvent = (origialEvent: TouchEvent) => {\n      clearLongPressTimer();\n      handleTouchMove(origialEvent);\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuAnchor || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      document.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            document.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            document.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        document.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        document.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuAnchor({ x: clientX, y: clientY });\n      void vibrate();\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      if (shouldDisablePropagation) e.stopPropagation();\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    // `useCapture` is needed to prevent the content from scrolling behind the context menu\n    element.addEventListener('touchmove', clearLongPressTimerAndStopEvent, true);\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimerAndStopEvent, true);\n    };\n  }, [\n    contextMenuAnchor, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink,\n    shouldDisablePropagation,\n  ]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","import type { ElementRef, TeactNode } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport type { Layout } from '../../hooks/useMenuPosition';\nimport type { DropdownItem } from './Dropdown';\n\nimport useContextMenuHandlers from '../../hooks/useContextMenuHandlers';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport DropdownMenu from './DropdownMenu';\nimport MenuBackdrop from './MenuBackdrop';\n\ninterface Props<T extends string> {\n  items: DropdownItem<T>[];\n  rootRef?: ElementRef<HTMLDivElement>;\n  onItemClick: (value: T) => void;\n  children: (buttonProps: {\n    ref: ElementRef<HTMLDivElement | HTMLButtonElement>;\n    onMouseDown: (e: React.MouseEvent) => void;\n    onContextMenu: (e: React.MouseEvent) => void;\n    className?: string;\n  }, isMenuOpen: boolean) => TeactNode;\n  menuClassName?: string;\n  menuPositionY?: 'top' | 'bottom';\n}\n\nexport default function WithContextMenu<T extends string>({\n  items,\n  rootRef,\n  onItemClick,\n  children,\n  menuClassName,\n  menuPositionY = 'bottom',\n}: Props<T>) {\n  const buttonRef = useRef<HTMLDivElement | HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n\n  const { isPortrait } = useDeviceScreen();\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => rootRef?.current ?? document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout: () => Layout = useLastCallback(() => ({\n    withPortal: true,\n    doNotCoverTrigger: true,\n    centerHorizontally: true,\n  }));\n\n  const {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  } = useContextMenuHandlers({\n    elementRef: buttonRef,\n    shouldDisablePropagation: true,\n  });\n\n  const handleMenuItemSelect = useLastCallback((value: T) => {\n    onItemClick(value);\n  });\n\n  return (\n    <>\n      {isPortrait && (\n        <MenuBackdrop\n          isMenuOpen={isContextMenuOpen}\n          contentRef={buttonRef}\n          contentClassName={menuClassName}\n        />\n      )}\n      {children(\n        {\n          ref: buttonRef,\n          onMouseDown: handleBeforeContextMenu,\n          onContextMenu: handleContextMenu,\n        },\n        isContextMenuOpen,\n      )}\n      {!!contextMenuAnchor && (\n        <DropdownMenu\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          isOpen={isContextMenuOpen}\n          items={items}\n          menuPositionY={menuPositionY}\n          menuAnchor={contextMenuAnchor}\n          bubbleClassName={menuClassName}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={handleMenuItemSelect}\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n    </>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oiB1R7GB\",\"tabs\":\"Sue0UN3j\",\"notAllTabs\":\"QLxHVfeT\",\"tab\":\"qUqbpDN6\",\"active\":\"PSKCyspY\",\"tab_purple\":\"Hw7rCAOU\",\"tabPurple\":\"Hw7rCAOU\",\"tab_purpleText\":\"Y4BNELoX\",\"tabPurpleText\":\"Y4BNELoX\",\"tabDelimiter\":\"CLfyAuI6\",\"withContextMenu\":\"xFC2ES5I\",\"tabDecoration\":\"SSnDTAfy\",\"tabIcon\":\"nIk_Y_3d\",\"tabText\":\"IfCQ498V\",\"contentHeader\":\"LzaI7YWC\",\"firstActive\":\"G0Sd_POg\",\"contentHeaderInner\":\"rWtZ588N\",\"lastActive\":\"Y80L38VI\",\"contentBg\":\"ibE61V3n\",\"contentFooter\":\"WvrNEDxt\",\"contentSlideStaked\":\"F0M6K6CS\",\"tab-0\":\"NmGloXOI\",\"tab0\":\"NmGloXOI\",\"tab-1\":\"S7XD0emA\",\"tab1\":\"S7XD0emA\",\"slideContent\":\"bTsglo_e\",\"transitionContent\":\"YJuoqMiV\",\"slideContentAddBuy\":\"QO6jMpRA\",\"spinner\":\"KCsGLTLM\",\"menu\":\"Q6q8HQcu\"};","import React, { type ElementRef, memo, useEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\nimport type { StakingStateStatus } from '../../../../util/staking';\nimport { ActiveTab } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_ICON_PX, DEFAULT_LANDSCAPE_ACTION_TAB_ID } from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport {\n  selectAccountState,\n  selectCurrentAccountSettings,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n} from '../../../../global/selectors';\nimport { ACCENT_COLORS } from '../../../../util/accentColor/constants';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { handleSendMenuItemClick, SEND_CONTEXT_MENU_ITEMS } from './helpers/sendMenu';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useUniqueId from '../../../../hooks/useUniqueId';\n\nimport Content from '../../../receive/Content';\nimport StakingInfoContent from '../../../staking/StakingInfoContent';\nimport StakingInitial from '../../../staking/StakingInitial';\nimport SwapInitial from '../../../swap/SwapInitial';\nimport TransferInitial from '../../../transfer/TransferInitial';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Transition, { ACTIVE_SLIDE_CLASS_NAME, TO_SLIDE_CLASS_NAME } from '../../../ui/Transition';\nimport WithContextMenu from '../../../ui/WithContextMenu';\n\nimport styles from './LandscapeActions.module.scss';\n\ninterface OwnProps {\n  containerRef: ElementRef<HTMLDivElement>;\n  stakingStatus: StakingStateStatus;\n  isLedger?: boolean;\n  theme: Theme;\n}\n\ninterface StateProps {\n  activeTabIndex?: ActiveTab;\n  isTestnet?: boolean;\n  isSwapDisabled: boolean;\n  isStakingDisabled: boolean;\n  isOnRampDisabled: boolean;\n  accentColorIndex?: number;\n}\n\nconst TABS = [ActiveTab.Receive, ActiveTab.Transfer, ActiveTab.Swap, ActiveTab.Stake];\nconst ANIMATED_STICKER_SPEED = 2;\nexport const STAKING_TAB_TEXT_VARIANTS: Record<StakingStateStatus, string> = {\n  inactive: 'Earn',\n  active: 'Earning',\n  unstakeRequested: '$unstaking_short',\n  readyToClaim: '$unstaking_short',\n};\n\nfunction LandscapeActions({\n  containerRef,\n  stakingStatus,\n  isLedger,\n  theme,\n  activeTabIndex = DEFAULT_LANDSCAPE_ACTION_TAB_ID,\n  isTestnet,\n  isSwapDisabled,\n  isOnRampDisabled,\n  isStakingDisabled,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const { setLandscapeActionsActiveTabIndex: setActiveTabIndex } = getActions();\n\n  const lang = useLang();\n\n  const isStaking = activeTabIndex === ActiveTab.Stake && stakingStatus !== 'inactive';\n\n  const transferSlideClassName = `transfer_slide_${useUniqueId()}`;\n  const {\n    renderedBgHelpers,\n    transitionRef,\n  } = useTabHeightAnimation(\n    styles.slideContent,\n    transferSlideClassName,\n    isStaking ? styles.contentSlideStaked : undefined,\n    isStaking,\n  );\n\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const areNotAllTabs = isSwapDisabled || isStakingDisabled;\n  const isLastTab = (isStakingDisabled && isSwapDisabled && activeTabIndex === ActiveTab.Transfer)\n    || (isStakingDisabled && !isSwapDisabled && activeTabIndex === ActiveTab.Swap)\n    || (!isStakingDisabled && activeTabIndex === ActiveTab.Stake);\n\n  const [isAddBuyAnimating, playAddBuyAnimation, stopAddBuyAnimation] = useFlag();\n  const [isSendAnimating, playSendAnimation, stopSendAnimation] = useFlag();\n  const [isSwapAnimating, playSwapAnimation, stopSwapAnimation] = useFlag();\n  const [isStakeAnimating, playStakeAnimation, stopStakeAnimation] = useFlag();\n  const appTheme = useAppTheme(theme);\n  const stickerPaths = ANIMATED_STICKERS_PATHS[appTheme];\n  const accentColor = accentColorIndex ? ACCENT_COLORS[appTheme][accentColorIndex] : undefined;\n  const buttonTransitionKeyRef = useRef(0);\n  useSyncEffect(() => {\n    buttonTransitionKeyRef.current++;\n  }, [accentColor]);\n\n  useEffect(() => {\n    if (\n      (isSwapDisabled && activeTabIndex === ActiveTab.Swap)\n      || (isStakingDisabled && activeTabIndex === ActiveTab.Stake)\n    ) {\n      setActiveTabIndex({ index: ActiveTab.Transfer });\n    }\n  }, [activeTabIndex, isTestnet, isLedger, isSwapDisabled, isStakingDisabled]);\n\n  function renderCurrentTab(isActive: boolean) {\n    switch (activeTabIndex) {\n      case ActiveTab.Receive:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentAddBuy)}>\n            <Content isOpen={isActive} isStatic />\n          </div>\n        );\n\n      case ActiveTab.Transfer:\n        return (\n          <div className={buildClassName(styles.slideContent, styles.slideContentTransfer)}>\n            <TransferInitial isStatic slideClassName={transferSlideClassName} />\n          </div>\n        );\n\n      case ActiveTab.Swap:\n        return (\n          <div className={styles.slideContent}>\n            <SwapInitial isStatic isActive={isActive} />\n          </div>\n        );\n\n      case ActiveTab.Stake:\n        return (\n          <div className={styles.slideContent}>\n            {\n              stakingStatus === 'inactive'\n                ? <StakingInitial isStatic isActive={isActive} />\n                : <StakingInfoContent isStatic isActive={isActive} />\n            }\n          </div>\n        );\n\n      default:\n        return undefined;\n    }\n  }\n\n  function handleSelectTab(index: ActiveTab, onTouchStart: NoneToVoidFunction) {\n    if (IS_TOUCH_ENV) onTouchStart();\n\n    setActiveTabIndex({ index }, { forceOnHeavyAnimation: true });\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={buildClassName(styles.tabs, areNotAllTabs && styles.notAllTabs)}>\n        <div\n          className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Receive && styles.active)}\n          onMouseEnter={!IS_TOUCH_ENV ? playAddBuyAnimation : undefined}\n          onContextMenu={stopEvent}\n          onClick={() => {\n            handleSelectTab(ActiveTab.Receive, playAddBuyAnimation);\n          }}\n        >\n          <AnimatedIconWithPreview\n            play={isAddBuyAnimating}\n            size={ANIMATED_STICKER_ICON_PX}\n            speed={ANIMATED_STICKER_SPEED}\n            className={styles.tabIcon}\n            key={accentColor}\n            color={accentColor}\n            nonInteractive\n            forceOnHeavyAnimation\n            tgsUrl={stickerPaths.iconAdd}\n            iconPreviewClass=\"icon-action-add\"\n            onEnded={stopAddBuyAnimation}\n          />\n          <span className={styles.tabText}>{lang(!isSwapDisabled || isOnRampAllowed ? 'Add / Buy' : 'Add')}</span>\n\n          <span className={styles.tabDecoration} aria-hidden />\n        </div>\n        <WithContextMenu\n          items={SEND_CONTEXT_MENU_ITEMS}\n          rootRef={containerRef}\n          menuClassName={styles.menu}\n          onItemClick={handleSendMenuItemClick}\n        >\n          {({ ref, ...restButtonProps }) => (\n            <div\n              {...restButtonProps}\n              ref={ref as ElementRef<HTMLDivElement>}\n              className={buildClassName(\n                styles.tab,\n                activeTabIndex === ActiveTab.Transfer && styles.active,\n                styles.withContextMenu,\n              )}\n              onMouseEnter={!IS_TOUCH_ENV ? playSendAnimation : undefined}\n              onClick={() => {\n                handleSelectTab(ActiveTab.Transfer, playSendAnimation);\n              }}\n            >\n              <AnimatedIconWithPreview\n                play={isSendAnimating}\n                size={ANIMATED_STICKER_ICON_PX}\n                speed={ANIMATED_STICKER_SPEED}\n                className={styles.tabIcon}\n                key={accentColor}\n                color={accentColor}\n                nonInteractive\n                forceOnHeavyAnimation\n                tgsUrl={stickerPaths.iconSend}\n                iconPreviewClass=\"icon-action-send\"\n                onEnded={stopSendAnimation}\n              />\n              <span className={styles.tabText}>{lang('Send')}</span>\n              <span className={styles.tabDecoration} aria-hidden />\n              <span className={styles.tabDelimiter} aria-hidden />\n            </div>\n          )}\n        </WithContextMenu>\n        {!isSwapDisabled && (\n          <div\n            className={buildClassName(styles.tab, activeTabIndex === ActiveTab.Swap && styles.active)}\n            onMouseEnter={!IS_TOUCH_ENV ? playSwapAnimation : undefined}\n            onContextMenu={stopEvent}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Swap, playSwapAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isSwapAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths.iconSwap}\n              iconPreviewClass=\"icon-action-swap\"\n              onEnded={stopSwapAnimation}\n            />\n            <span className={styles.tabText}>{lang('Swap')}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n        {!isStakingDisabled && (\n          <div\n            className={buildClassName(\n              styles.tab,\n              activeTabIndex === ActiveTab.Stake && styles.active,\n              isStaking && styles.tab_purple,\n              stakingStatus !== 'inactive' && styles.tab_purpleText,\n            )}\n            onMouseEnter={!IS_TOUCH_ENV ? playStakeAnimation : undefined}\n            onContextMenu={stopEvent}\n            onClick={() => {\n              handleSelectTab(ActiveTab.Stake, playStakeAnimation);\n            }}\n          >\n            <AnimatedIconWithPreview\n              play={isStakeAnimating}\n              size={ANIMATED_STICKER_ICON_PX}\n              speed={ANIMATED_STICKER_SPEED}\n              className={styles.tabIcon}\n              key={accentColor}\n              color={accentColor}\n              nonInteractive\n              forceOnHeavyAnimation\n              tgsUrl={stickerPaths[stakingStatus !== 'inactive' ? 'iconEarnPurple' : 'iconEarn']}\n              iconPreviewClass={buildClassName(\n                'icon-action-earn',\n                stakingStatus !== 'inactive' && styles.tab_purpleText,\n              )}\n              onEnded={stopStakeAnimation}\n            />\n            <span className={styles.tabText}>{lang(STAKING_TAB_TEXT_VARIANTS[stakingStatus])}</span>\n            <span className={styles.tabDecoration} aria-hidden />\n            <span className={styles.tabDelimiter} aria-hidden />\n          </div>\n        )}\n      </div>\n\n      <div\n        className={buildClassName(\n          styles.contentHeader,\n          activeTabIndex === ActiveTab.Receive && styles.firstActive,\n          isLastTab && styles.lastActive,\n        )}\n      >\n        <div className={buildClassName(styles.contentHeaderInner, isStaking && styles.contentSlideStaked)} />\n      </div>\n      {renderedBgHelpers}\n\n      <Transition\n        ref={transitionRef}\n        name=\"slideFade\"\n        activeKey={activeTabIndex}\n        renderCount={TABS.length}\n        className={buildClassName(styles.transitionContent, 'static-container')}\n      >\n        {renderCurrentTab}\n      </Transition>\n    </div>\n  );\n}\n\nfunction useTabHeightAnimation(\n  slideClassName: string,\n  transferSlideClassName: string,\n  contentBackgroundClassName?: string,\n  isUnstaking = false,\n) {\n  const transitionRef = useRef<HTMLDivElement>();\n  const contentBgRef = useRef<HTMLDivElement>();\n  const contentFooterRef = useRef<HTMLDivElement>();\n  const lastHeightRef = useRef<number>();\n\n  const adjustBg = useLastCallback((noTransition = false) => {\n    const activeSlideSelector = `.${slideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const toSlideSelector = `.${slideClassName}.${TO_SLIDE_CLASS_NAME}`;\n    const suffix = isUnstaking ? ' .staking-info' : '';\n    // eslint-disable-next-line @stylistic/max-len\n    const transferQuery = `${activeSlideSelector} .${transferSlideClassName}.${TO_SLIDE_CLASS_NAME}, ${activeSlideSelector} .${transferSlideClassName}.${ACTIVE_SLIDE_CLASS_NAME}`;\n    const query = `${toSlideSelector}${suffix}, ${activeSlideSelector}${suffix}`;\n    const slide = (transitionRef.current?.querySelector(transferQuery) || transitionRef.current?.querySelector(query))!;\n    const rect = slide.getBoundingClientRect();\n    const shouldRenderWithoutTransition = !lastHeightRef.current || noTransition;\n\n    if (lastHeightRef.current === rect.height || !contentBgRef.current) return;\n\n    requestMutation(() => {\n      if (!contentBgRef.current || !contentFooterRef.current) return;\n\n      const contentBgStyle = contentBgRef.current.style;\n      const contentFooterStyle = contentFooterRef.current.style;\n\n      if (shouldRenderWithoutTransition) {\n        contentBgStyle.transition = 'none';\n        contentFooterStyle.transition = 'none';\n      }\n\n      contentBgStyle.transform = `scaleY(calc(${rect.height} / 100))`;\n      contentFooterStyle.transform = `translateY(${Math.floor(rect.height)}px)`;\n\n      if (shouldRenderWithoutTransition) {\n        requestMutation(() => {\n          if (!contentBgRef.current || !contentFooterRef.current) return;\n\n          contentBgRef.current.style.transition = '';\n          contentFooterRef.current.style.transition = '';\n        });\n      }\n\n      lastHeightRef.current = rect.height;\n    });\n  });\n\n  useEffect(() => {\n    adjustBg(true);\n\n    const componentObserver = new ResizeObserver((entries) => {\n      if (!entries.length) return;\n      adjustBg();\n    });\n\n    if (transitionRef.current) {\n      componentObserver.observe(transitionRef.current);\n    }\n\n    return () => {\n      componentObserver.disconnect();\n    };\n  }, [adjustBg]);\n\n  const renderedBgHelpers = useMemo(() => {\n    return (\n      <>\n        <div ref={contentBgRef} className={buildClassName(styles.contentBg, contentBackgroundClassName)} />\n        <div ref={contentFooterRef} className={buildClassName(styles.contentFooter, contentBackgroundClassName)} />\n      </>\n    );\n  }, [contentBackgroundClassName]);\n\n  return {\n    renderedBgHelpers,\n    transitionRef,\n  };\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectAccountState(global, global.currentAccountId!) ?? {};\n\n      const { isOnRampDisabled } = global.restrictions;\n\n      return {\n        activeTabIndex: accountState?.landscapeActionsActiveTabIndex,\n        isTestnet: global.settings.isTestnet,\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n        isOnRampDisabled,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(LandscapeActions),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"oAYeit4x\",\"buttons\":\"Xw7VtigI\",\"button\":\"f9uDJdvE\",\"button_purple\":\"DSist0sY\",\"buttonPurple\":\"DSist0sY\",\"buttonActive\":\"s05GLla1\",\"buttonIcon\":\"iQddp8Ac\",\"menu\":\"kJbEm897\"};","import React, { type ElementRef, memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { StakingStateStatus } from '../../../../util/staking';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleSendMenuItemClick, SEND_CONTEXT_MENU_ITEMS } from './helpers/sendMenu';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport WithContextMenu from '../../../ui/WithContextMenu';\nimport { STAKING_TAB_TEXT_VARIANTS } from './LandscapeActions';\n\nimport styles from './PortraitActions.module.scss';\n\ninterface OwnProps {\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  stakingStatus: StakingStateStatus;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  containerRef: ElementRef<HTMLDivElement>;\n  onEarnClick: NoneToVoidFunction;\n}\n\nfunction PortraitActions({\n  isTestnet,\n  stakingStatus,\n  isStakingDisabled,\n  isSwapDisabled,\n  isOnRampDisabled,\n  containerRef,\n  onEarnClick,\n}: OwnProps) {\n  const {\n    startTransfer, startSwap, openReceiveModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const isOnRampAllowed = !isTestnet && !isOnRampDisabled;\n  const addBuyButtonName = IS_CORE_WALLET\n    ? 'Receive'\n    : (!isSwapDisabled || isOnRampAllowed ? 'Add / Buy' : 'Add');\n\n  const handleStartSwap = useLastCallback(() => {\n    void vibrate();\n\n    startSwap();\n  });\n\n  const handleStartTransfer = useLastCallback(() => {\n    void vibrate();\n\n    startTransfer({ isPortrait: true });\n  });\n\n  const handleAddBuyClick = useLastCallback(() => {\n    void vibrate();\n\n    openReceiveModal();\n  });\n\n  const handleEarnClick = useLastCallback(() => {\n    void vibrate();\n\n    onEarnClick();\n  });\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.buttons}>\n        <Button\n          isSimple\n          className={styles.button}\n          onClick={handleAddBuyClick}\n        >\n          <i className={buildClassName(styles.buttonIcon, 'icon-action-add')} aria-hidden />\n          {lang(addBuyButtonName)}\n        </Button>\n        <WithContextMenu\n          rootRef={containerRef}\n          items={SEND_CONTEXT_MENU_ITEMS}\n          menuClassName={styles.menu}\n          onItemClick={handleSendMenuItemClick}\n        >\n          {(buttonProps, isMenuOpen) => (\n            <Button\n              {...buttonProps}\n              isSimple\n              className={buildClassName(styles.button, isMenuOpen && styles.buttonActive)}\n              onClick={handleStartTransfer}\n              ref={buttonProps.ref as ElementRef<HTMLButtonElement>}\n            >\n              <i className={buildClassName(styles.buttonIcon, 'icon-action-send')} aria-hidden />\n              {lang('Send')}\n            </Button>\n          )}\n        </WithContextMenu>\n        {!isSwapDisabled && (\n          <Button\n            isSimple\n            className={styles.button}\n            onClick={handleStartSwap}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-swap')} aria-hidden />\n            {lang('Swap')}\n          </Button>\n        )}\n        {!isStakingDisabled && (\n          <Button\n            isSimple\n            className={buildClassName(styles.button, stakingStatus !== 'inactive' && styles.button_purple)}\n            onClick={handleEarnClick}\n          >\n            <i className={buildClassName(styles.buttonIcon, 'icon-action-earn')} aria-hidden />\n            {lang(STAKING_TAB_TEXT_VARIANTS[stakingStatus])}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(PortraitActions);\n","import { Big } from '../lib/big.js';\n\nexport function calcChangeValue(currentPrice: number, changeFactor: number) {\n  return currentPrice - currentPrice / (1 + changeFactor);\n}\n\nexport function calcBigChangeValue(currentPrice: Big | string, changeFactor: Big | number) {\n  currentPrice = Big(currentPrice);\n  changeFactor = Big(changeFactor);\n  return currentPrice.minus(currentPrice.div(changeFactor.plus(1)));\n}\n","import type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\n\nimport { STAKED_TOKEN_SLUGS } from '../../../../../config';\nimport { Big } from '../../../../../lib/big.js';\nimport { calcBigChangeValue } from '../../../../../util/calcChangeValue';\nimport { toBig } from '../../../../../util/decimals';\nimport { formatNumber } from '../../../../../util/formatNumber';\nimport { buildCollectionByKey } from '../../../../../util/iteratees';\nimport { round } from '../../../../../util/math';\nimport { getFullStakingBalance } from '../../../../../util/staking';\n\ntype ChangePrefix = 'up' | 'down' | undefined;\n\nexport function calculateFullBalance(tokens: UserToken[], stakingStates?: ApiStakingState[]) {\n  const stakingStateBySlug = buildCollectionByKey(stakingStates ?? [], 'tokenSlug');\n\n  const primaryValue = tokens.reduce((acc, token) => {\n    if (STAKED_TOKEN_SLUGS.has(token.slug)) {\n      // Cost of staked tokens is already taken into account\n      return acc;\n    }\n\n    const stakingState = stakingStateBySlug[token.slug];\n\n    if (stakingState) {\n      const stakingAmount = toBig(getFullStakingBalance(stakingState), token.decimals);\n      acc = acc.plus(stakingAmount.mul(token.price));\n    }\n\n    return acc.plus(token.totalValue);\n  }, Big(0));\n\n  const [primaryWholePart, primaryFractionPart] = formatNumber(primaryValue).split('.');\n  const changeValue = tokens.reduce((acc, token) => {\n    return acc.plus(calcBigChangeValue(token.totalValue, token.change24h));\n  }, Big(0)).round(4).toNumber();\n\n  const changePercent = round(primaryValue ? (changeValue / (primaryValue.toNumber() - changeValue)) * 100 : 0, 2);\n  const changePrefix: ChangePrefix = changeValue > 0 ? 'up' : changeValue < 0 ? 'down' : undefined;\n\n  return {\n    primaryValue: primaryValue.toString(),\n    primaryWholePart,\n    primaryFractionPart,\n    changePrefix,\n    changePercent,\n    changeValue,\n  };\n}\n","import { useState } from '../lib/teact/teact';\nimport { getGlobal } from '../global';\n\nimport { selectCurrentAccountState } from '../global/selectors';\nimport useInterval from './useInterval';\n\nconst ONE_SECOND = 1000;\nconst SHOW_INDICATOR_DELAY_MS = 2 * ONE_SECOND;\n\nexport default function useUpdateIndicator(updateStartedAtKey: 'balanceUpdateStartedAt' | 'activitiesUpdateStartedAt') {\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useInterval(() => {\n    const updateStartedAt = selectCurrentAccountState(getGlobal())?.[updateStartedAtKey];\n\n    if (!updateStartedAt) {\n      setIsUpdating(false);\n      return;\n    }\n\n    const timeElapsedSinceLastUpdateStarted = Date.now() - updateStartedAt;\n\n    setIsUpdating(timeElapsedSinceLastUpdateStarted > SHOW_INDICATOR_DELAY_MS);\n  }, ONE_SECOND, false);\n\n  return isUpdating;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"icon\":\"avkqxacs\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport useUniqueId from '../../hooks/useUniqueId';\n\nimport styles from './ClockIcon.module.scss';\n\ninterface OwnProps {\n  className?: string;\n  noAnimation?: boolean;\n}\n\nfunction ClockIcon({ className, noAnimation }: OwnProps) {\n  const svgMaskId = useUniqueId('transparentMask-');\n\n  return (\n    <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 32 32\" xmlns=\"http://www.w3.org/2000/svg\" className={className}>\n      <mask id={svgMaskId}>\n        <rect width=\"32\" height=\"32\" fill=\"black\" />\n        <circle cx=\"16\" cy=\"16\" r=\"16\" fill=\"white\" />\n        <path\n          d=\"M17.375 8.87438C17.375 8.11563 16.7594 7.5 16 7.5C15.2406 7.5 14.625 8.11563 14.625\n              8.87438V16.0006C14.625 16.76 15.2406 17.375 16 17.375C16.7594 17.375 17.375 16.76 17.375 16.0006V8.87438Z\"\n          fill=\"black\"\n        >\n          {!noAnimation && (\n            <animateTransform\n              attributeName=\"transform\"\n              type=\"rotate\"\n              from=\"0 16 16\"\n              to=\"360 16 16\"\n              dur=\"2s\"\n              repeatCount=\"indefinite\"\n            />\n          )}\n        </path>\n        <path\n          d=\"M17.375 11.985C17.375 11.2337 16.7594 10.625 16 10.625C15.2406 10.625 14.625 11.2337 14.625\n              11.985V16.015C14.625 16.7662 15.2406 17.375 16 17.375C16.7594 17.375 17.375 16.7662 17.375 16.015V11.985Z\"\n          fill=\"black\"\n        >\n          {!noAnimation && (\n            <animateTransform\n              attributeName=\"transform\"\n              type=\"rotate\"\n              from=\"0 16 16\"\n              to=\"360 16 16\"\n              dur=\"12s\"\n              repeatCount=\"indefinite\"\n            />\n          )}\n        </path>\n      </mask>\n\n      <rect\n        className={styles.icon}\n        width=\"32\"\n        height=\"32\"\n        mask={`url(#${svgMaskId})`}\n      />\n    </svg>\n  );\n}\n\nexport default memo(ClockIcon);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MIN } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\n\nimport useLang from '../../hooks/useLang';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport ClockIcon from '../ui/ClockIcon';\n\nimport styles from './MintCardButton.module.scss';\n\ninterface StateProps {\n  isCardMinting?: boolean;\n  hasCardsInfo?: boolean;\n  noAnimation?: boolean;\n}\n\nfunction MintCardButton({\n  isCardMinting,\n  hasCardsInfo,\n  noAnimation,\n}: StateProps) {\n  const { openMintCardModal } = getActions();\n\n  const lang = useLang();\n  const {\n    shouldRender: shouldRenderMintCardsButton,\n    ref: mintCardsButtonRef,\n  } = useShowTransition<HTMLButtonElement>({\n    isOpen: hasCardsInfo || isCardMinting,\n    withShouldRender: true,\n  });\n\n  if (!shouldRenderMintCardsButton) return undefined;\n\n  return (\n    <button\n      ref={mintCardsButtonRef}\n      type=\"button\"\n      className={styles.button}\n      aria-label={lang('Mint Cards')}\n      title={lang('Mint Cards')}\n      onClick={() => openMintCardModal()}\n    >\n      <i className={isCardMinting ? 'icon-magic-wand-loading' : 'icon-magic-wand'} aria-hidden />\n      {isCardMinting && <ClockIcon className={styles.icon} noAnimation={noAnimation} />}\n    </button>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const { config } = selectCurrentAccountState(global) || {};\n  const animationLevel = global.settings.animationLevel;\n\n  return {\n    hasCardsInfo: Boolean(config?.cardsInfo),\n    isCardMinting: accountState?.isCardMinting,\n    noAnimation: animationLevel === ANIMATION_LEVEL_MIN,\n  };\n})(MintCardButton));\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"XUXxtxF8\",\"icon\":\"uN651IGD\"};","import type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useEffect, useMemo } from '../../lib/teact/teact';\nimport { getGlobal } from '../../global';\n\nimport { ANIMATION_LEVEL_MAX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { throttleWithTickEnd } from '../../util/schedulers';\n\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLang from '../../hooks/useLang';\nimport usePrevious from '../../hooks/usePrevious';\n\nimport styles from './AnimatedCounter.module.scss';\n\ntype OwnProps = {\n  text: string;\n  isDisabled?: boolean;\n};\n\nconst ANIMATION_TIME = 200;\nconst MAX_SIMULTANEOUS_ANIMATIONS = 10;\n\nlet scheduledAnimationsCounter = 0;\n\nconst resetCounterOnTickEnd = throttleWithTickEnd(() => {\n  scheduledAnimationsCounter = 0;\n});\n\nconst AnimatedCounter: FC<OwnProps> = ({\n  text,\n  isDisabled,\n}) => {\n  const animationLevel = getGlobal().settings.animationLevel;\n  const { isRtl } = useLang();\n\n  const prevText = usePrevious(text);\n  const forceUpdate = useForceUpdate();\n\n  const shouldAnimate = scheduleAnimation(\n    !isDisabled && animationLevel === ANIMATION_LEVEL_MAX && prevText !== undefined && prevText !== text,\n  );\n\n  const characters = useMemo(() => {\n    return shouldAnimate ? renderAnimatedCharacters(text, prevText) : text;\n  }, [shouldAnimate, prevText, text]);\n\n  useEffect(() => {\n    if (!shouldAnimate) return undefined;\n\n    const timeoutId = window.setTimeout(() => {\n      forceUpdate();\n    }, ANIMATION_TIME);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [shouldAnimate, text]);\n\n  return (\n    <span className={buildClassName(!isDisabled && styles.root)} dir={isRtl ? 'rtl' : undefined}>\n      {characters}\n    </span>\n  );\n};\n\nexport default memo(AnimatedCounter);\n\nfunction scheduleAnimation(condition: boolean) {\n  if (!condition || scheduledAnimationsCounter >= MAX_SIMULTANEOUS_ANIMATIONS) return false;\n\n  if (scheduledAnimationsCounter === 0) {\n    resetCounterOnTickEnd();\n  }\n\n  scheduledAnimationsCounter++;\n\n  return true;\n}\n\nfunction renderAnimatedCharacters(text: string, prevText?: string) {\n  const elements: TeactNode[] = [];\n  const textLength = text.length;\n  const prevTextLength = prevText?.length ?? 0;\n\n  for (let i = 0; i <= textLength; i++) {\n    const charIndex = textLength - i;\n    const prevTextCharIndex = prevTextLength - i;\n\n    if (prevText && prevTextCharIndex >= 0 && text[charIndex] !== prevText[prevTextCharIndex]) {\n      elements.unshift(\n        <div className={styles.characterContainer}>\n          <div className={styles.character}>{text[charIndex] ?? ''}</div>\n          <div className={styles.characterOld}>{prevText[prevTextCharIndex]}</div>\n          <div className={styles.characterNew}>{text[charIndex] ?? ''}</div>\n        </div>,\n      );\n    } else {\n      elements.unshift(<span>{text[charIndex] ?? ''}</span>);\n    }\n  }\n\n  return elements;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UizaBW8F\",\"character-container\":\"o6dPPa5S\",\"characterContainer\":\"o6dPPa5S\",\"character\":\"wT7hwE_a\",\"character-old\":\"pSP5fUMh\",\"characterOld\":\"pSP5fUMh\",\"character-disappear\":\"duRfv5fl\",\"characterDisappear\":\"duRfv5fl\",\"character-new\":\"FtEeojTc\",\"characterNew\":\"FtEeojTc\",\"character-appear\":\"pwumvTMk\",\"characterAppear\":\"pwumvTMk\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerWrapper\":\"wKxh3a3S\",\"isLoading\":\"iGGNu8pc\",\"center\":\"JhiFICIH\",\"container\":\"DeiKNEF2\",\"backstage\":\"Z0VKHxKs\",\"tokenCard\":\"lPzc1tFZ\",\"containerInner\":\"CJuAKeNp\",\"balanceSlide\":\"_S0PhahZ\",\"balanceTransition\":\"Q_lPdCwD\",\"currencySymbol\":\"l0dhdAHZ\",\"primaryValue\":\"_jSits6S\",\"primaryFractionPart\":\"L4sI_b_K\",\"iconCaret\":\"S_WiTJlv\",\"iconCaretSmall\":\"AyZvbJo1\",\"iconCaretFraction\":\"UPrAgVuY\",\"currencySwitcher\":\"JRDSCLUm\",\"currencySwitcherMenu\":\"ouGIASNp\",\"addressContainer\":\"Hscx8f3y\",\"icon\":\"Z4odaM4f\",\"addressLabel\":\"bU030X2g\",\"address\":\"xtFe1Hpt\",\"menuItem\":\"DYEcCh8V\",\"menuIcon\":\"reCfAfE0\",\"menuItemName\":\"XG4JwTZX\",\"menuFontIcon\":\"SR492iSb\",\"menuExplorerIcon\":\"F5fuBEwJ\",\"addressMenuBubble\":\"eqrUlhby\",\"domainText\":\"FeL3tHeI\",\"addressText\":\"W__Ag4Sn\",\"separator\":\"x_DIVHjK\",\"explorerButton\":\"a6nY4qXV\",\"changeSpoiler\":\"u3xBtJOM\",\"blurred\":\"VWmNqmzU\",\"change\":\"p0ADnah2\",\"changePrefix\":\"cuZcbnpx\",\"chainIcon\":\"m2FMwrjB\",\"multichainIcon\":\"f7vAJ3qA\",\"tokenInfo\":\"bGU6MKkV\",\"tokenLogo\":\"KjXvLECZ\",\"tokenInfoHeader\":\"JX6roGM_\",\"tokenInfoSubheader\":\"RxOFnjoX\",\"tokenAmount\":\"eIbQBxJS\",\"tokenName\":\"BnrECUAN\",\"tokenValue\":\"FJv4OzYN\",\"tokenChange\":\"GGm5XDND\",\"tokenChangeSensitiveData\":\"f4V9saRa\",\"tokenChangeSpoiler\":\"_12taTXqz\",\"tokenTitle\":\"RmC9TfSK\",\"tokenHistoryPrice\":\"_4dlU8cE\",\"tokenCurrentPrice\":\"gV90_PgX\",\"tokenPriceDate\":\"iPGWJEAe\",\"apy\":\"NuM0o0NU\",\"interactive\":\"qQdmiqxi\",\"tokenExplorerButton\":\"OG4bpDUn\",\"chart\":\"lKplVEJ6\",\"chartImg\":\"RidGreTo\",\"backButton\":\"rzhYg9wP\",\"periodChooser\":\"fJhqjFVE\",\"periodChooserHidden\":\"xPL1t22b\",\"periodItem\":\"il0Zz8yE\",\"periodItem_active\":\"fcYKEjig\",\"periodItemActive\":\"fcYKEjig\",\"periodInput\":\"PIahT0n2\",\"loadingDotsContainer\":\"iRUbIPAX\",\"cardCustomBackground\":\"A2ptDHpn\",\"visible\":\"aEg2wczx\",\"black\":\"ah_6og0J\",\"platinum\":\"nnklDXWY\",\"gold\":\"c4y77fMq\",\"silver\":\"M9_HMKD7\",\"borderShine_down\":\"VoOVf4tq\",\"borderShineDown\":\"VoOVf4tq\",\"borderShine_left\":\"dWc8MTsx\",\"borderShineLeft\":\"dWc8MTsx\",\"borderShine_up\":\"k8VOGUyt\",\"borderShineUp\":\"k8VOGUyt\",\"borderShine_right\":\"tqABUy73\",\"borderShineRight\":\"tqABUy73\"};","import React, { memo, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiChain } from '../../../../api/types';\nimport type { Account, AccountType, IAnchorPosition } from '../../../../global/types';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\n\nimport { selectAccount } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { handleUrlClick, openUrl } from '../../../../util/openUrl';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport getChainNetworkIcon from '../../../../util/swap/getChainNetworkIcon';\nimport { getExplorerAddressUrl, getExplorerName } from '../../../../util/url';\nimport { IS_TOUCH_ENV } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Menu from '../../../ui/Menu';\n\nimport menuStyles from '../../../ui/Dropdown.module.scss';\nimport styles from './Card.module.scss';\n\nimport multichainIconSrc from '../../../../assets/multichain_account.svg';\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  domainByChain?: Account['domainByChain'];\n  isTestnet?: boolean;\n  accountType?: AccountType;\n  withTextGradient?: boolean;\n}\n\nconst MOUSE_LEAVE_TIMEOUT = 150;\n\nfunction CardAddress({\n  addressByChain, domainByChain, isTestnet, accountType, withTextGradient,\n}: StateProps) {\n  const { showNotification } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const ref = useRef<HTMLDivElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n\n  const chains = useMemo(() => Object.keys(addressByChain || {}) as ApiChain[], [addressByChain]);\n  const isHardwareAccount = accountType === 'hardware';\n  const isViewAccount = accountType === 'view';\n  const explorerTitle = lang('View on Explorer');\n  const chainDropdownItems = useMemo(() => {\n    const hasDomain = chains[0] && domainByChain?.[chains[0]];\n\n    if (chains.length < 2 && !hasDomain) return undefined;\n\n    return chains.map((chain) => ({\n      value: addressByChain![chain]!,\n      address: shortenAddress(addressByChain![chain]!, domainByChain?.[chain] ? 4 : undefined)!,\n      ...(domainByChain?.[chain] && { domain: domainByChain[chain] }),\n      icon: getChainNetworkIcon(chain),\n      fontIcon: 'copy',\n      chain,\n      label: (lang('View address on %ton_explorer_name%', {\n        ton_explorer_name: getExplorerName(chain),\n      }) as string[]\n      ).join(''),\n    }));\n  }, [addressByChain, domainByChain, chains, lang]);\n\n  const openMenu = () => {\n    const { left, width, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x: left + width / 2, y });\n  };\n\n  const closeMenu = () => {\n    setMenuAnchor(undefined);\n  };\n\n  const handleCopyAddress = useLastCallback((address: string) => {\n    showNotification({ message: lang('Address was copied!'), icon: 'icon-copy' });\n    void copyTextToClipboard(address);\n  });\n\n  const handleItemClick = useLastCallback((e: React.MouseEvent, address: string) => {\n    handleCopyAddress(address);\n    closeMenu();\n  });\n\n  const handleDomainClick = useLastCallback((e: React.MouseEvent, domain: string) => {\n    showNotification({ message: lang('Domain was copied!'), icon: 'icon-copy' });\n    void copyTextToClipboard(domain);\n    closeMenu();\n  });\n\n  const handleExplorerClick = useLastCallback((e: React.MouseEvent, chain: ApiChain, address: string) => {\n    void openUrl(getExplorerAddressUrl(chain, address, isTestnet)!);\n    closeMenu();\n  });\n\n  const closeTimeoutRef = useRef<number>();\n  const handleMouseEnter = useLastCallback(() => {\n    if (closeTimeoutRef.current) {\n      clearTimeout(closeTimeoutRef.current);\n    }\n    openMenu();\n  });\n  const handleMouseLeave = useLastCallback(() => {\n    closeTimeoutRef.current = window.setTimeout(closeMenu, MOUSE_LEAVE_TIMEOUT);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    centerHorizontally: isPortrait,\n    preferredPositionX: 'left' as const,\n    doNotCoverTrigger: isPortrait,\n  }));\n\n  function renderAddressMenu() {\n    return (\n      <Menu\n        menuRef={menuRef}\n        isOpen={isMenuOpen}\n        type=\"dropdown\"\n        withPortal\n        getTriggerElement={getTriggerElement}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        anchor={menuAnchor}\n        bubbleClassName={styles.addressMenuBubble}\n        noBackdrop={!IS_TOUCH_ENV}\n        onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n        onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n        onClose={closeMenu}\n      >\n        {chainDropdownItems!.map((item, index) => {\n          const fullItemClassName = buildClassName(\n            menuStyles.item,\n            index > 0 && menuStyles.separator,\n            styles.menuItem,\n          );\n\n          return (\n            <div key={item.value} className={fullItemClassName}>\n              {chainDropdownItems!.length > 1 && (\n                <img src={item.icon} alt=\"\" className={buildClassName('icon', menuStyles.itemIcon, styles.menuIcon)} />\n              )}\n              <span className={buildClassName(menuStyles.itemName, styles.menuItemName)}>\n                {item.domain && (\n                  <>\n                    <span\n                      tabIndex={0}\n                      role=\"button\"\n                      className={styles.domainText}\n                      onClick={(e) => handleDomainClick(e, item.domain!)}\n                    >\n                      {item.domain}\n                    </span>\n                    <span className={styles.separator}></span>\n                  </>\n                )}\n                <span\n                  tabIndex={0}\n                  role=\"button\"\n                  onClick={(e) => handleItemClick(e, item.value)}\n                  className={item.domain && styles.addressText}\n                >\n                  {item.address}\n                </span>\n                <i\n                  className={buildClassName(`icon icon-${item.fontIcon}`, menuStyles.fontIcon, styles.menuFontIcon)}\n                  aria-hidden\n                  onClick={(e) => handleItemClick(e, item.value)}\n                />\n              </span>\n              <i\n                tabIndex={0}\n                role=\"button\"\n                className={buildClassName(menuStyles.close, 'icon icon-tonexplorer-small', styles.menuExplorerIcon)}\n                aria-label={item.label}\n                onClick={(e) => handleExplorerClick(e, item.chain, item.value)}\n              />\n            </div>\n          );\n        })}\n      </Menu>\n    );\n  }\n\n  if (chainDropdownItems) {\n    const chain = chains[0];\n    const domain = domainByChain?.[chain];\n    const buttonText = chains.length === 1 && domain ? domain : lang('Multichain');\n\n    return (\n      <div ref={ref} className={styles.addressContainer}>\n        {isViewAccount && (\n          <span className={styles.addressLabel}>\n            <i className={buildClassName(styles.icon, 'icon-eye-filled')} aria-hidden />\n            {lang('$view_mode')}\n          </span>\n        )}\n        {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n        <button\n          type=\"button\"\n          className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n          onMouseEnter={!IS_TOUCH_ENV ? handleMouseEnter : undefined}\n          onMouseLeave={!IS_TOUCH_ENV ? handleMouseLeave : undefined}\n          onClick={openMenu}\n        >\n          {chains.length > 1\n            ? <img src={multichainIconSrc} alt=\"\" className={styles.multichainIcon} />\n            : <img src={getChainNetworkIcon(chain)} alt=\"\" className={styles.chainIcon} />}\n\n          <span className={buildClassName(styles.itemName, 'itemName')}>\n            {buttonText}\n          </span>\n          <i className={buildClassName(styles.icon, 'icon-caret-down')} aria-hidden />\n        </button>\n        {renderAddressMenu()}\n      </div>\n    );\n  }\n\n  const chain = chains[0];\n  if (!chain) return undefined;\n\n  const address = addressByChain![chain]!;\n  const domain = domainByChain?.[chain];\n  const displayText = domain || shortenAddress(address);\n\n  return (\n    <div className={styles.addressContainer}>\n      {isViewAccount && (\n        <span className={styles.addressLabel}>\n          <i className={buildClassName(styles.icon, 'icon-eye-filled')} aria-hidden />\n          {lang('$view_mode')}\n        </span>\n      )}\n      {isHardwareAccount && <i className={buildClassName(styles.icon, 'icon-ledger')} aria-hidden />}\n      <button\n        type=\"button\"\n        className={buildClassName(styles.address, withTextGradient && 'gradientText')}\n        aria-label={lang('Copy wallet address')}\n        onClick={() => handleCopyAddress(address)}\n      >\n        <img src={getChainNetworkIcon(chain)} alt=\"\" className={styles.chainIcon} />\n        {displayText}\n        <i className={buildClassName(styles.icon, 'icon-copy')} aria-hidden />\n      </button>\n      <a\n        href={getExplorerAddressUrl(chain, address, isTestnet)}\n        className={styles.explorerButton}\n        title={explorerTitle}\n        aria-label={explorerTitle}\n        target=\"_blank\"\n        rel=\"noreferrer noopener\"\n        onClick={handleUrlClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-tonexplorer-small')} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { type: accountType, addressByChain, domainByChain } = selectAccount(global, global.currentAccountId!) || {};\n\n  return {\n    addressByChain,\n    domainByChain,\n    isTestnet: global.settings.isTestnet,\n    accountType,\n  };\n})(CardAddress));\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency } from '../../../../api/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport { CURRENCIES } from '../../../../config';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  excludedCurrency?: string;\n  menuPositionX?: 'right' | 'left';\n  onClose: NoneToVoidFunction;\n  onChange?: (currency: ApiBaseCurrency) => void;\n}\n\ninterface StateProps {\n  currentCurrency?: ApiBaseCurrency;\n}\n\nfunction CurrencySwitcherMenu({\n  isOpen,\n  currentCurrency,\n  excludedCurrency,\n  menuPositionX,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { changeBaseCurrency } = getActions();\n\n  const currencyList = useMemo<DropdownItem<ApiBaseCurrency>[]>(\n    () => Object.entries(CURRENCIES)\n      .filter(([currency]) => currency !== excludedCurrency)\n      .map(([currency, { name }]) => ({ value: currency as keyof typeof CURRENCIES, name })),\n    [excludedCurrency],\n  );\n\n  const handleBaseCurrencyChange = useLastCallback((currency: string) => {\n    onClose();\n\n    if (currency === currentCurrency) return;\n\n    changeBaseCurrency({ currency: currency as ApiBaseCurrency });\n    onChange?.(currency as ApiBaseCurrency);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      items={currencyList}\n      shouldTranslateOptions\n      selectedValue={currentCurrency}\n      menuPositionX={menuPositionX}\n      className={styles.currencySwitcherMenu}\n      onClose={onClose}\n      onSelect={handleBaseCurrencyChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global) => {\n  return {\n    currentCurrency: global.settings.baseCurrency,\n  };\n})(CurrencySwitcherMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UUXTSSNb\",\"sticky\":\"GydVN6zu\",\"image\":\"GnuUYTcY\",\"borderShine_down\":\"eZtdmQCz\",\"borderShineDown\":\"eZtdmQCz\",\"borderShine_left\":\"u_5j0LEw\",\"borderShineLeft\":\"u_5j0LEw\",\"borderShine_up\":\"DBu8v2wg\",\"borderShineUp\":\"DBu8v2wg\",\"borderShine_right\":\"iOyJF5OB\",\"borderShineRight\":\"iOyJF5OB\",\"borderShine_radioactive\":\"omctwMWw\",\"borderShineRadioactive\":\"omctwMWw\",\"shadow\":\"rm7OVuVh\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCardNftImageUrl } from '../../../../util/url';\n\nimport { useCachedImage } from '../../../../hooks/useCachedImage';\nimport useCardCustomization from '../../../../hooks/useCardCustomization';\nimport useFlag from '../../../../hooks/useFlag';\nimport useMediaTransition from '../../../../hooks/useMediaTransition';\n\nimport styles from './CustomCardBackground.module.scss';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft: ApiNft;\n  noShowAnimation?: boolean;\n  shouldHide?: boolean;\n  onLoad?: (hasGradient: boolean, className?: string) => void;\n  onTransitionEnd: NoneToVoidFunction;\n}\n\nfunction CustomCardBackground({\n  isSticky,\n  nft,\n  noShowAnimation,\n  shouldHide,\n  onLoad,\n  onTransitionEnd,\n}: OwnProps) {\n  const { imageUrl } = useCachedImage(nft ? getCardNftImageUrl(nft) : undefined);\n  const [isLoaded, markLoaded] = useFlag();\n  const ref = useMediaTransition(noShowAnimation || (isLoaded && !shouldHide));\n\n  const {\n    borderShineType,\n    withTextGradient,\n    classNames: cardClassName,\n  } = useCardCustomization(nft);\n\n  function handleLoad() {\n    markLoaded();\n\n    onLoad?.(withTextGradient, cardClassName);\n  }\n\n  const rootClassName = buildClassName(\n    styles.root,\n    isSticky && styles.sticky,\n    cardClassName,\n    borderShineType && styles[`borderShine_${borderShineType}`],\n    isLoaded && !shouldHide && styles.loaded,\n    shouldHide && styles.hide,\n  );\n\n  const withShadow = nft.metadata?.mtwCardType === 'standard';\n\n  return (\n    <div ref={ref} className={rootClassName} onTransitionEnd={onTransitionEnd}>\n      {imageUrl && (\n        <img\n          src={imageUrl}\n          alt={nft.name}\n          className={styles.image}\n          onLoad={handleLoad}\n        />\n      )}\n      {withShadow && <div className={styles.shadow} />}\n    </div>\n  );\n}\n\nexport default memo(CustomCardBackground);\n","import React, { memo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\n\nimport CustomCardBackground from './CustomCardBackground';\n\ninterface OwnProps {\n  isSticky?: boolean;\n  nft?: ApiNft;\n  onCardChange: (hasGradient: boolean, className?: string) => void;\n}\n\nfunction CustomCardManager({ isSticky, nft, onCardChange }: OwnProps) {\n  const prevNftRef = useRef<ApiNft | undefined>(undefined);\n  const forceUpdate = useForceUpdate();\n\n  useSyncEffectWithPrevDeps(([prevNft, prevNftAddress]) => {\n    if (nft?.address !== prevNftAddress) {\n      prevNftRef.current = prevNft;\n    }\n\n    if (!nft) {\n      onCardChange(false, undefined);\n    }\n  }, [nft, nft?.address]);\n\n  const prevNft = prevNftRef.current;\n\n  const isMountRef = useRef(true);\n  const noShowAnimation = nft && isMountRef.current;\n  isMountRef.current = false;\n\n  const handleTransitionEnd = useLastCallback(() => {\n    prevNftRef.current = undefined;\n    forceUpdate();\n  });\n\n  return (\n    <div teactFastList>\n      {prevNft && (\n        <CustomCardBackground\n          key={prevNft.address}\n          isSticky={isSticky}\n          nft={prevNft}\n          shouldHide={!nft}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n      {nft && (\n        <CustomCardBackground\n          key={nft.address}\n          isSticky={isSticky}\n          nft={nft}\n          noShowAnimation={noShowAnimation}\n          onLoad={onCardChange}\n          onTransitionEnd={handleTransitionEnd}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(CustomCardManager);\n","import type { UserToken } from '../../../global/types';\nimport type { RGBColor } from '../../../util/colors';\n\nimport {\n  STAKED_TON_SLUG, TON_USDT_SLUG, TONCOIN, TRC20_USDT_MAINNET_SLUG, TRC20_USDT_TESTNET_SLUG, TRX,\n} from '../../../config';\nimport { deltaE, hex2rgb } from '../../../util/colors';\n\nconst TOKEN_CARD_COLORS: Record<string, RGBColor> = {\n  green: [80, 135, 51],\n  orange: [173, 84, 54],\n  pink: [154, 60, 144],\n  purple: [104, 48, 149],\n  red: [156, 52, 75],\n  sea: [43, 116, 123],\n  tegro: [3, 93, 229],\n  blue: [47, 108, 173],\n};\n\nexport const TOKEN_EXCEPTION_COLORS: Record<string, string> = {\n  [TONCOIN.slug]: 'blue',\n  [TRX.slug]: 'red',\n  [TON_USDT_SLUG]: 'sea',\n  [TRC20_USDT_MAINNET_SLUG]: 'sea',\n  [TRC20_USDT_TESTNET_SLUG]: 'sea',\n  [STAKED_TON_SLUG]: 'green',\n};\n\nconst DISTANCE_THRESHOLD = 35;\n\nexport function calculateTokenCardColor(token?: UserToken): string {\n  let closestColor = 'blue';\n  let smallestDistance = Infinity;\n\n  if (!token) return closestColor;\n\n  if (TOKEN_EXCEPTION_COLORS[token.slug]) {\n    return TOKEN_EXCEPTION_COLORS[token.slug];\n  }\n\n  if (!token.color) return closestColor;\n\n  const tokenRgbColor = hex2rgb(token.color);\n\n  Object.entries(TOKEN_CARD_COLORS).forEach(([colorName, colorValue]) => {\n    const distance = deltaE(tokenRgbColor, colorValue);\n    if (distance < smallestDistance) {\n      smallestDistance = distance;\n      closestColor = colorName;\n    }\n  });\n\n  if (smallestDistance > DISTANCE_THRESHOLD) {\n    return 'blue';\n  }\n\n  return closestColor;\n}\n","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiHistoryList } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport {\n  disableTelegramMiniAppSwipeToClose,\n  enableTelegramMiniAppSwipeToClose,\n} from '../../util/telegram';\n\nimport useLang from '../../hooks/useLang';\n\nimport Transition from '../ui/Transition';\n\ninterface OwnProps {\n  width: number;\n  height: number;\n  prices: ApiHistoryList;\n  selectedIndex: number;\n  className?: string;\n  imgClassName?: string;\n  onSelectIndex: (index: number) => void;\n  isUpdating?: boolean;\n}\n\nconst IS_SMOOTH = true;\nconst PATH_SMOOTHING = 0.0001;\nconst MIN_CHART_HEIGHT = 0.000000001;\n\nfunction TokenPriceChart({\n  width,\n  height,\n  prices,\n  selectedIndex,\n  className,\n  imgClassName,\n  onSelectIndex,\n  isUpdating,\n}: OwnProps) {\n  const lang = useLang();\n\n  const boundingPoints = useMemo(() => {\n    const priceValues = prices.map(([, price]) => price);\n    const min = Math.min(...priceValues);\n    const max = Math.max(...priceValues);\n\n    return {\n      width: prices.length - 1,\n      height: Math.max(MIN_CHART_HEIGHT, max - min),\n      min,\n    };\n  }, [prices]);\n\n  const points = useMemo(() => {\n    const scaleX = width / boundingPoints.width;\n    const scaleY = height / boundingPoints.height;\n\n    return prices.map(([, y], i) => ({ x: i * scaleX + 3, y: (y - boundingPoints.min) * scaleY + 3 }));\n  }, [boundingPoints.height, boundingPoints.min, boundingPoints.width, height, width, prices]);\n\n  function getBasisPoint(i: number) {\n    const indexesCount = points.length - 1;\n    const index = i < 0 ? 0 : i > indexesCount ? indexesCount : i;\n    const point = points[index];\n    const ratio = 1 - PATH_SMOOTHING;\n    const tangent = index / indexesCount;\n    const firstPoint = points[0];\n    const distance = {\n      x: points[indexesCount].x - firstPoint.x,\n      y: points[indexesCount].y - firstPoint.y,\n    };\n\n    return {\n      x: ratio * point.x + (1 - ratio) * (firstPoint.x + tangent * distance.x),\n      y: ratio * point.y + (1 - ratio) * (firstPoint.y + tangent * distance.y),\n    };\n  }\n\n  function getCurvePath(i: number) {\n    const pCurrent = getBasisPoint(i);\n    const pMinus1 = getBasisPoint(i - 1);\n    const pMinus2 = getBasisPoint(i - 2);\n\n    const x1 = (2 * pMinus2.x + pMinus1.x) / 3;\n    const y1 = (2 * pMinus2.y + pMinus1.y) / 3;\n    const x2 = (pMinus2.x + 2 * pMinus1.x) / 3;\n    const y2 = (pMinus2.y + 2 * pMinus1.y) / 3;\n    const x3 = (pMinus2.x + 4 * pMinus1.x + pCurrent.x) / 6;\n    const y3 = (pMinus2.y + 4 * pMinus1.y + pCurrent.y) / 6;\n\n    return `C ${x1} ${y1} ${x2} ${y2} ${x3} ${y3}`;\n  }\n\n  function getLinePath(point: { x: number; y: number }) {\n    return `L ${point.x} ${point.y}`;\n  }\n\n  function getPath() {\n    let d = points.reduce((acc, point, i) => {\n      const partialPath = IS_SMOOTH\n        ? getCurvePath(i)\n        : getLinePath(point);\n      return i === 0\n        ? `M ${point.x} ${point.y} `\n        : `${acc} ${partialPath} `;\n    }, '');\n\n    if (IS_SMOOTH) {\n      d += getCurvePath(points.length);\n      d += getLinePath(points[points.length - 1]);\n    }\n\n    return d;\n  }\n\n  function renderSvg() {\n    const activePoint = points[selectedIndex] || points[points.length - 1];\n\n    const svg = `<svg viewBox=\"0 0 ${width + 6} ${height + 6}\" height=\"${height + 6}\" width=\"${width + 6}\"\n        xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: scale(1,-1)\">\n        <g fill=\"none\" stroke=\"white\">\n          <path stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"${getPath()}\" style=\"stroke-linecap: round\" />\n          <circle r=\"2.5\" fill=\"white\" cx=\"${activePoint.x}\" cy=\"${activePoint.y}\" />\n        </g>\n      </svg>`;\n\n    return `data:image/svg+xml;utf8,${(svg)}`;\n  }\n\n  function handleMouseMove(e: React.MouseEvent<HTMLDivElement> | React.TouchEvent<HTMLDivElement>) {\n    const { x: containerX, width: containerWidth } = e.currentTarget.getBoundingClientRect();\n    const { clientX } = 'touches' in e ? e.touches[0] : e;\n    const segmentHalfWidth = (containerWidth / points.length) / 2;\n    const x = clientX - containerX - segmentHalfWidth;\n    const nextIndex = Math.max(0, Math.min(Math.round(points.length * (x / containerWidth)), points.length - 1));\n\n    onSelectIndex(nextIndex);\n  }\n\n  function handleTouchStart(e: React.TouchEvent<HTMLDivElement>) {\n    handleMouseMove(e);\n\n    disableTelegramMiniAppSwipeToClose();\n  }\n\n  function handleMouseLeave() {\n    onSelectIndex(-1);\n\n    enableTelegramMiniAppSwipeToClose();\n  }\n\n  return (\n    <div\n      className={className}\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onTouchStart={handleTouchStart}\n      onTouchMove={handleMouseMove}\n      onTouchEnd={handleMouseLeave}\n      onTouchCancel={handleMouseLeave}\n    >\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"semiFade\" shouldCleanup>\n        <img\n          src={renderSvg()}\n          className={buildClassName(imgClassName, isUpdating && 'glare-image')}\n          alt={lang('Currency History')}\n        />\n      </Transition>\n    </div>\n  );\n}\n\nexport default memo(TokenPriceChart);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TokenPeriod } from '../../../../global/types';\n\nimport { HISTORY_PERIODS } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './ChartHistorySwitcher.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n  onChange?: (period: TokenPeriod) => void;\n}\n\ninterface StateProps {\n  currentPeriod?: TokenPeriod;\n}\n\nconst ITEMS = HISTORY_PERIODS.map((key) => ({ value: key, name: key === 'ALL' ? 'All' : key }));\n\nfunction ChartHistorySwitcher({\n  isOpen,\n  currentPeriod,\n  onClose,\n  onChange,\n}: OwnProps & StateProps) {\n  const { setCurrentTokenPeriod } = getActions();\n\n  const handlePeriodChange = useLastCallback((period: string) => {\n    onClose();\n\n    if (period === currentPeriod) return;\n\n    void vibrate();\n\n    setCurrentTokenPeriod({ period: period as TokenPeriod });\n    onChange?.(period as TokenPeriod);\n  });\n\n  return (\n    <DropdownMenu\n      isOpen={isOpen}\n      onClose={onClose}\n      items={ITEMS}\n      className={styles.menuWrapper}\n      bubbleClassName={styles.menu}\n      buttonClassName={styles.menuItem}\n      selectedValue={currentPeriod}\n      menuPositionX=\"right\"\n      onSelect={handlePeriodChange}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentPeriod: accountState?.currentTokenPeriod,\n  };\n})(ChartHistorySwitcher));\n","// extracted by mini-css-extract-plugin\nexport default {\"menuWrapper\":\"Lfs6oB99\",\"menu\":\"EJsuJXfx\",\"menuItem\":\"J7O_MmwF\"};","import type { ElementRef } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState } from '../../../../api/types';\nimport type { PriceHistoryPeriods, TokenPeriod, UserToken } from '../../../../global/types';\n\nimport { DEFAULT_PRICE_CURRENCY, HISTORY_PERIODS, IS_CORE_WALLET } from '../../../../config';\nimport { selectAccountStakingStates, selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcBigChangeValue } from '../../../../util/calcChangeValue';\nimport { formatShortDay, SECOND } from '../../../../util/dateFormat';\nimport { toBig, toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport { handleUrlClick } from '../../../../util/openUrl';\nimport { round } from '../../../../util/round';\nimport { getExplorerName, getExplorerTokenUrl } from '../../../../util/url';\nimport { IS_IOS } from '../../../../util/windowEnvironment';\nimport { calculateTokenCardColor } from '../../helpers/cardColors';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useInterval from '../../../../hooks/useInterval';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\nimport useTimeout from '../../../../hooks/useTimeout';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport TokenPriceChart from '../../../common/TokenPriceChart';\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport ChartHistorySwitcher from './ChartHistorySwitcher';\nimport CurrencySwitcherMenu from './CurrencySwitcherMenu';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLDivElement>;\n  token: UserToken;\n  classNames?: string;\n  isUpdating?: boolean;\n  onYieldClick?: (stakingId?: string) => void;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  period?: TokenPeriod;\n  baseCurrency?: ApiBaseCurrency;\n  historyPeriods?: PriceHistoryPeriods;\n  tokenAddress?: string;\n  isTestnet?: boolean;\n  stakingStates?: ApiStakingState[];\n  isSensitiveDataHidden?: true;\n}\n\nconst OFFLINE_TIMEOUT = 120000; // 2 minutes\n\nconst CHART_DIMENSIONS = { width: 300, height: 64 };\nconst INTERVAL = 5 * SECOND;\n\nconst DEFAULT_PERIOD = HISTORY_PERIODS[0];\n\nfunction TokenCard({\n  ref,\n  isTestnet,\n  token,\n  classNames,\n  period = DEFAULT_PERIOD,\n  isUpdating,\n  baseCurrency,\n  historyPeriods,\n  tokenAddress,\n  stakingStates,\n  isSensitiveDataHidden,\n  onYieldClick,\n  onClose,\n}: OwnProps & StateProps) {\n  const { loadPriceHistory } = getActions();\n  const lang = useLang();\n  const forceUpdate = useForceUpdate();\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const [isHistoryMenuOpen, openHistoryMenu, closeHistoryMenu] = useFlag(false);\n\n  const shouldUseDefaultCurrency = baseCurrency === undefined || baseCurrency === token.symbol;\n  const chartCurrency = shouldUseDefaultCurrency ? DEFAULT_PRICE_CURRENCY : baseCurrency;\n\n  const currencySymbol = getShortCurrencySymbol(chartCurrency);\n\n  const [selectedHistoryIndex, setSelectedHistoryIndex] = useState(-1);\n\n  useSyncEffect(([prevHistoryIndex]) => {\n    if (!IS_IOS) return;\n\n    if (prevHistoryIndex !== undefined) {\n      void vibrate();\n    }\n  }, [selectedHistoryIndex]);\n\n  const {\n    slug, symbol, amount, name, price: lastPrice, decimals,\n  } = token;\n\n  const { annualYield, yieldType, id: stakingId } = useMemo(() => {\n    if (IS_CORE_WALLET) return undefined;\n\n    return stakingStates?.reduce((bestState, state) => {\n      if (state.tokenSlug === slug && (!bestState || state.balance > bestState.balance)) {\n        return state;\n      }\n      return bestState;\n    }, undefined as ApiStakingState | undefined);\n  }, [stakingStates, slug]) ?? {};\n\n  const refreshHistory = useLastCallback((newPeriod?: TokenPeriod) => {\n    loadPriceHistory({ slug, period: newPeriod ?? period });\n  });\n\n  const handleCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    loadPriceHistory({ slug, period, currency });\n  });\n\n  useInterval(refreshHistory, INTERVAL);\n\n  const history = historyPeriods?.[period];\n\n  const tokenLastUpdatedAt = history?.length ? history[history.length - 1][0] * 1000 : undefined;\n  const tokenLastHistoryPrice = history?.length ? history[history.length - 1][1] : lastPrice;\n  const selectedHistoryPoint = history?.[selectedHistoryIndex];\n  const price = selectedHistoryPoint?.[1]\n    ?? (shouldUseDefaultCurrency ? tokenLastHistoryPrice : undefined)\n    ?? lastPrice;\n  // To prevent flickering with spoiler\n  const tokenChangePrice = isSensitiveDataHidden ? lastPrice : price;\n  const isLoading = !tokenLastUpdatedAt || (Date.now() - tokenLastUpdatedAt > OFFLINE_TIMEOUT);\n  const dateStr = selectedHistoryPoint\n    ? formatShortDay(lang.code!, selectedHistoryPoint[0] * 1000, true, true)\n    : (isLoading && tokenLastUpdatedAt ? formatShortDay(lang.code!, tokenLastUpdatedAt, true, false) : lang('Now'));\n\n  useTimeout(forceUpdate, isLoading ? undefined : OFFLINE_TIMEOUT, [tokenLastUpdatedAt]);\n\n  const initialPrice = useMemo(() => {\n    return history?.find(([, value]) => Boolean(value))?.[1];\n  }, [history]);\n\n  const valueBig = toBig(amount, decimals).mul(price);\n  const value = valueBig.toString();\n  const change = initialPrice && price ? price - initialPrice : 0;\n  const changeFactor = initialPrice && tokenChangePrice ? tokenChangePrice / initialPrice - 1 : 0;\n  const amountChange = initialPrice && tokenChangePrice ? calcBigChangeValue(valueBig, changeFactor).toNumber() : 0;\n  const changePrefix = change === undefined ? change : change > 0 ? '' : change < 0 ? '' : 0;\n\n  const changeValue = amountChange ? Math.abs(round(amountChange, 4)) : 0;\n  const changePercent = change ? Math.abs(round((change / initialPrice!) * 100, 2)) : 0;\n\n  const withChange = Boolean(change !== undefined);\n  const historyStartDay = history?.length ? new Date(history[0][0] * 1000) : undefined;\n  const withExplorerButton = Boolean(token.cmcSlug || tokenAddress);\n  const shouldHideChartPeriodSwitcher = !history?.length && token.priceUsd === 0;\n\n  const color = useMemo(() => calculateTokenCardColor(token), [token]);\n\n  function renderExplorerLink() {\n    const url = getExplorerTokenUrl(token.chain, token.cmcSlug, tokenAddress, isTestnet);\n    if (!url) return undefined;\n\n    const title = (lang(\n      'Open on %ton_explorer_name%',\n      { ton_explorer_name: getExplorerName(token.chain) },\n    ) as string[]).join('');\n\n    return (\n      <>\n        {'  '}\n        <a\n          href={url}\n          title={title}\n          aria-label={title}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n          className={styles.tokenExplorerButton}\n          onClick={handleUrlClick}\n        >\n          <i className=\"icon-tonexplorer-small\" aria-hidden />\n        </a>\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={buildClassName(styles.container, styles.tokenCard, classNames, color, 'token-card')}>\n      <div className={styles.tokenInfo}>\n        <Button className={styles.backButton} isSimple onClick={onClose} ariaLabel={lang('Back')}>\n          <i className=\"icon-chevron-left\" aria-hidden />\n        </Button>\n        <TokenIcon\n          token={token}\n          size=\"x-large\"\n          className={styles.tokenLogo}\n        />\n        <div className={styles.tokenInfoHeader}>\n          <b className={styles.tokenAmount}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              maskSkin=\"cardLightText\"\n              cols={10}\n              rows={2}\n              cellSize={8}\n            >\n              {formatCurrency(toDecimal(amount, token.decimals), symbol)}\n            </SensitiveData>\n          </b>\n          {withChange && (\n            <div className={styles.tokenValue}>\n              <SensitiveData\n                isActive={isSensitiveDataHidden}\n                maskSkin=\"cardLightText\"\n                align=\"right\"\n                cols={10}\n                rows={2}\n                cellSize={8}\n              >\n                <div className={styles.currencySwitcher} role=\"button\" tabIndex={0} onClick={openCurrencyMenu}>\n                  &thinsp;{formatCurrency(value, currencySymbol, undefined, true)}\n                  <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n                </div>\n                <CurrencySwitcherMenu\n                  isOpen={isCurrencyMenuOpen}\n                  menuPositionX=\"right\"\n                  excludedCurrency={token.symbol}\n                  onClose={closeCurrencyMenu}\n                  onChange={handleCurrencyChange}\n                />\n              </SensitiveData>\n            </div>\n          )}\n        </div>\n        <div className={styles.tokenInfoSubheader}>\n          <span className={styles.tokenTitle}>\n            <span className={styles.tokenName}>{name}</span>\n            {yieldType && (\n              <span\n                className={buildClassName(styles.apy, onYieldClick && styles.interactive)}\n                onClick={onYieldClick ? () => onYieldClick(stakingId) : undefined}\n              >\n                {yieldType} {round(annualYield ?? 0, 2)}%\n              </span>\n            )}\n          </span>\n          {withChange && Boolean(changeValue) && (\n            <div className={styles.tokenChange}>\n              {changePrefix}&thinsp;\n              {Math.abs(changePercent)}% \n              <SensitiveData\n                isActive={isSensitiveDataHidden}\n                align=\"right\"\n                maskSkin=\"cardLightText\"\n                cols={6}\n                rows={2}\n                cellSize={8}\n                className={styles.tokenChangeSensitiveData}\n                maskClassName={styles.tokenChangeSpoiler}\n              >\n                {formatCurrency(Math.abs(changeValue), currencySymbol)}\n              </SensitiveData>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Transition activeKey={!history ? 0 : history.length ? HISTORY_PERIODS.indexOf(period) + 1 : -1} name=\"fade\">\n        {!history ? (\n          <div className={buildClassName(styles.isLoading)}>\n            <Spinner color=\"white\" className={styles.center} />\n          </div>\n        ) : history?.length ? (\n          <>\n            <TokenPriceChart\n              className={styles.chart}\n              imgClassName={styles.chartImg}\n              width={CHART_DIMENSIONS.width}\n              height={CHART_DIMENSIONS.height}\n              prices={history}\n              selectedIndex={selectedHistoryIndex}\n              onSelectIndex={setSelectedHistoryIndex}\n              isUpdating={isUpdating}\n            />\n\n            <div className={styles.tokenHistoryPrice}>\n              {formatCurrency(history[0][1], currencySymbol, 2, true)}\n              <div className={styles.tokenPriceDate}>{formatShortDay(lang.code!, historyStartDay!)}</div>\n            </div>\n          </>\n        ) : undefined}\n      </Transition>\n\n      <span\n        className={buildClassName(styles.periodChooser, shouldHideChartPeriodSwitcher && styles.periodChooserHidden)}\n        role=\"button\"\n        tabIndex={0}\n        onClick={openHistoryMenu}\n      >\n        {period === 'ALL' ? 'All' : period}\n        <i className={buildClassName('icon', 'icon-caret-down', styles.iconCaretSmall)} aria-hidden />\n        <ChartHistorySwitcher\n          isOpen={isHistoryMenuOpen}\n          onChange={refreshHistory}\n          onClose={closeHistoryMenu}\n        />\n      </span>\n\n      <div className={styles.tokenCurrentPrice}>\n        {formatCurrency(price, currencySymbol, selectedHistoryIndex === -1 ? 2 : 4, true)}\n        <div className={styles.tokenPriceDate}>\n          {dateStr}\n          {withExplorerButton && renderExplorerLink()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, ownProps): StateProps => {\n    const slug = ownProps.token.slug;\n    const accountState = selectCurrentAccountState(global);\n    const tokenAddress = global.tokenInfo.bySlug[slug]?.tokenAddress;\n    const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n\n    return {\n      isTestnet: global.settings.isTestnet,\n      period: accountState?.currentTokenPeriod,\n      baseCurrency: global.settings.baseCurrency,\n      historyPeriods: global.tokenPriceHistory.bySlug[ownProps.token.slug],\n      tokenAddress,\n      stakingStates,\n      isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n    };\n  })(TokenCard),\n);\n","import React, {\n  type ElementRef,\n  memo, useEffect, useLayoutEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { UserToken } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { IS_IOS, IS_SAFARI } from '../../../../util/windowEnvironment';\nimport { calculateFullBalance } from './helpers/calculateFullBalance';\nimport getSensitiveDataMaskSkinFromCardNft from './helpers/getSensitiveDataMaskSkinFromCardNft';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useFlag from '../../../../hooks/useFlag';\nimport useFontScale from '../../../../hooks/useFontScale';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\nimport useWindowSize from '../../../../hooks/useWindowSize';\n\nimport MintCardButton from '../../../mintCard/MintCardButton';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport CardAddress from './CardAddress';\nimport CurrencySwitcherMenu from './CurrencySwitcherMenu';\nimport CustomCardManager from './CustomCardManager';\nimport TokenCard from './TokenCard';\n\nimport styles from './Card.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLDivElement>;\n  onTokenCardClose: NoneToVoidFunction;\n  onYieldClick: (stakingId?: string) => void;\n}\n\ninterface StateProps {\n  tokens?: UserToken[];\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  cardNft?: ApiNft;\n  isSensitiveDataHidden?: true;\n  isNftBuyingDisabled: boolean;\n  isViewMode: boolean;\n}\n\nfunction Card({\n  ref,\n  tokens,\n  currentTokenSlug,\n  onTokenCardClose,\n  onYieldClick,\n  baseCurrency,\n  stakingStates,\n  isSensitiveDataHidden,\n  isNftBuyingDisabled,\n  cardNft,\n  isViewMode,\n}: OwnProps & StateProps) {\n  const amountRef = useRef<HTMLDivElement>();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const [customCardClassName, setCustomCardClassName] = useState<string | undefined>(undefined);\n  const [withTextGradient, setWithTextGradient] = useState<boolean>(false);\n\n  const { isPortrait } = useDeviceScreen();\n  const { width: screenWidth } = useWindowSize();\n  const isUpdating = useUpdateIndicator('balanceUpdateStartedAt');\n  const { updateFontScale } = useFontScale(amountRef);\n  // Screen width affects font size only in portrait orientation\n  const screenWidthDep = isPortrait ? screenWidth : 0;\n\n  const [isCurrencyMenuOpen, openCurrencyMenu, closeCurrencyMenu] = useFlag(false);\n  const currentToken = useMemo(() => {\n    return tokens ? tokens.find((token) => token.slug === currentTokenSlug) : undefined;\n  }, [currentTokenSlug, tokens]);\n  const renderedToken = useCurrentOrPrev(currentToken, true);\n  const {\n    shouldRender: shouldRenderTokenCard,\n    ref: tokenCardRef,\n  } = useShowTransition({\n    isOpen: Boolean(currentTokenSlug),\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const sensitiveDataMaskSkin = getSensitiveDataMaskSkinFromCardNft(cardNft);\n\n  const handleCardChange = useLastCallback((hasGradient: boolean, className?: string) => {\n    setCustomCardClassName(className);\n    setWithTextGradient(hasGradient);\n  });\n\n  const values = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n\n  useHistoryBack({\n    isActive: Boolean(currentTokenSlug),\n    onBack: onTokenCardClose,\n  });\n\n  useEffect(\n    () => (shouldRenderTokenCard ? captureEscKeyListener(onTokenCardClose) : undefined),\n    [shouldRenderTokenCard, onTokenCardClose],\n  );\n\n  const {\n    primaryValue, primaryWholePart, primaryFractionPart, changePrefix, changePercent, changeValue,\n  } = values || {};\n\n  useLayoutEffect(() => {\n    if (primaryValue !== undefined) {\n      updateFontScale();\n    }\n  }, [primaryFractionPart, primaryValue, primaryWholePart, shortBaseSymbol, updateFontScale, screenWidthDep]);\n\n  function renderLoader() {\n    return (\n      <div className={buildClassName(styles.isLoading)}>\n        <Spinner color=\"white\" className={styles.center} />\n      </div>\n    );\n  }\n\n  function renderBalance() {\n    const iconCaretClassNames = buildClassName(\n      'icon',\n      'icon-caret-down',\n      primaryFractionPart || shortBaseSymbol.length > 1 ? styles.iconCaretFraction : styles.iconCaret,\n    );\n    const noAnimationCounter = !isUpdating || IS_SAFARI || IS_IOS;\n    return (\n      <>\n        <Transition\n          ref={amountRef}\n          activeKey={isUpdating && !isSensitiveDataHidden ? 1 : 0}\n          name=\"fade\"\n          shouldCleanup\n          className={styles.balanceTransition}\n          slideClassName={styles.balanceSlide}\n        >\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            maskSkin={sensitiveDataMaskSkin}\n            rows={4}\n            cols={14}\n            cellSize={13}\n            align=\"center\"\n            maskClassName={styles.blurred}\n          >\n            <div className={buildClassName(styles.primaryValue, 'rounded-font')}>\n              <span\n                className={buildClassName(\n                  styles.currencySwitcher,\n                  isUpdating && 'glare-text',\n                  !isUpdating && withTextGradient && 'gradientText',\n                )}\n                role=\"button\"\n                tabIndex={0}\n                onClick={!isSensitiveDataHidden ? openCurrencyMenu : undefined}\n              >\n                {shortBaseSymbol.length === 1 && <span className={styles.currencySymbol}>{shortBaseSymbol}</span>}\n                <AnimatedCounter isDisabled={noAnimationCounter} text={primaryWholePart ?? ''} />\n                {primaryFractionPart && (\n                  <span className={styles.primaryFractionPart}>\n                    <AnimatedCounter isDisabled={noAnimationCounter} text={`.${primaryFractionPart}`} />\n                  </span>\n                )}\n                {shortBaseSymbol.length > 1 && (\n                  <span className={styles.primaryFractionPart}>&nbsp;{shortBaseSymbol}</span>\n                )}\n                <i className={iconCaretClassNames} aria-hidden />\n              </span>\n            </div>\n          </SensitiveData>\n        </Transition>\n        <CurrencySwitcherMenu isOpen={isCurrencyMenuOpen} menuPositionX=\"right\" onClose={closeCurrencyMenu} />\n        {primaryValue !== '0' && (\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            maskSkin={sensitiveDataMaskSkin}\n            rows={2}\n            cols={11}\n            align=\"center\"\n            cellSize={14}\n            className={styles.changeSpoiler}\n            maskClassName={styles.blurred}\n          >\n            <div className={buildClassName(styles.change, 'rounded-font')}>\n              {!!changePrefix && (\n                <>\n                  <i\n                    className={buildClassName(\n                      styles.changePrefix,\n                      changePrefix === 'up' ? 'icon-arrow-up' : 'icon-arrow-down',\n                    )}\n                    aria-hidden\n                  />\n                  <AnimatedCounter text={`${Math.abs(changePercent!)}%`} />\n                  {'  '}\n                </>\n              )}\n              <AnimatedCounter text={formatCurrency(Math.abs(changeValue!), shortBaseSymbol)} />\n            </div>\n          </SensitiveData>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <div ref={ref} className={styles.containerWrapper}>\n      <Transition activeKey={isUpdating ? 1 : 0} name=\"fade\" shouldCleanup className={styles.loadingDotsContainer}>\n        {isUpdating ? <LoadingDots isActive isDoubled /> : undefined}\n      </Transition>\n\n      <div className={buildClassName(styles.container, currentTokenSlug && styles.backstage, customCardClassName)}>\n        <CustomCardManager nft={cardNft} onCardChange={handleCardChange} />\n\n        <div className={buildClassName(styles.containerInner, customCardClassName)}>\n          {values ? renderBalance() : renderLoader()}\n          <CardAddress withTextGradient={withTextGradient} />\n          {!IS_CORE_WALLET && !isNftBuyingDisabled && !isViewMode && <MintCardButton />}\n        </div>\n      </div>\n\n      {shouldRenderTokenCard && (\n        <TokenCard\n          token={renderedToken!}\n          ref={tokenCardRef}\n          isUpdating={isUpdating}\n          onYieldClick={isViewMode ? undefined : onYieldClick}\n          onClose={onTokenCardClose}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountState = selectCurrentAccountState(global);\n      const stakingStates = selectAccountStakingStates(global, global.currentAccountId!);\n      const { cardBackgroundNft: cardNft } = selectCurrentAccountSettings(global) || {};\n\n      return {\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        tokens: selectCurrentAccountTokens(global),\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        stakingStates,\n        cardNft,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        isNftBuyingDisabled: global.restrictions.isNftBuyingDisabled,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Card),\n);\n","import type { ApiNft } from '../../../../../api/types';\nimport type { SensitiveDataMaskSkin } from '../../../../common/SensitiveDataMask';\n\nexport default function getSensitiveDataMaskSkinFromCardNft(cardNft?: ApiNft): SensitiveDataMaskSkin {\n  const { mtwCardType, mtwCardTextType } = cardNft?.metadata || {};\n\n  return mtwCardType === 'gold'\n    ? 'cardGoldText'\n    : mtwCardType === 'silver' || mtwCardTextType === 'dark'\n      ? 'cardDarkText'\n      : 'cardLightText';\n}\n","/** Finds the appropriate scrollable container */\nexport function getScrollableContainer(\n  element: HTMLElement | null | undefined,\n  isPortrait?: boolean,\n) {\n  // eslint-disable-next-line no-null/no-null\n  if (!element) return null;\n  const selector = getScrollableContainerSelector(isPortrait);\n\n  if (isPortrait) {\n    return element.closest(selector);\n  } else {\n    return element.matches(selector)\n      ? element\n      : element.querySelector(selector);\n  }\n}\n\n// In portrait mode, find the parent `.app-slide-content` container, which contains the all app scrollable content\nfunction getScrollableContainerSelector(isPortrait?: boolean) {\n  return isPortrait ? '.app-slide-content' : '.custom-scroll';\n}\n\nexport function getScrollContainerClosestSelector(isActive?: boolean, isPortrait?: boolean) {\n  return !isActive || !isPortrait ? undefined : '.app-slide-content';\n}\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n}\n\nfunction HideNftModal({\n  isOpen,\n  selectedNftsToHide,\n}: OwnProps) {\n  const {\n    addNftsToBlacklist,\n    closeNftCollection,\n    closeHideNftModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleHide = useLastCallback(() => {\n    addNftsToBlacklist({\n      addresses: selectedNftsToHide!.addresses,\n    });\n    if (selectedNftsToHide?.isCollection) closeNftCollection();\n    closeHideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeHideNftModal}\n      title={lang('Hide NFTs')}\n    >\n      <p className={modalStyles.text}>\n        {\n          selectedNftsToHide?.isCollection\n            ? lang(\n              'Are you sure you want to hide this NFT collection containing %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n            : lang(\n              'Are you sure you want to hide these %number% NFTs?',\n              { number: selectedNftsToHide?.addresses.length },\n            )\n        }\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeHideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleHide} className={modalStyles.button}>\n          {lang('Hide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(HideNftModal);\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../global/types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePrevious from './usePrevious';\nimport usePrevious2 from './usePrevious2';\nimport useSyncEffect from './useSyncEffect';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype ResetScroll = () => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n  slug?: string,\n  isActive?: boolean,\n  withResetOnInactive = false,\n): [ListId[]?, GetMore?, ResetScroll?] => {\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  const prevSlug = usePrevious2(slug);\n\n  const resetScroll: ResetScroll = useLastCallback(() => {\n    if (!listIds?.length) return;\n\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  });\n\n  useSyncEffect(() => {\n    if (slug !== prevSlug || (withResetOnInactive && !isActive)) {\n      resetScroll();\n    }\n  }, [isActive, prevSlug, slug, withResetOnInactive]);\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds: oldViewportIds, isOnTop: oldIsOnTop } = currentStateRef.current ?? {};\n    const { newViewportIds, newIsOnTop } = getViewportSliceAfterListChange(\n      listIds,\n      oldViewportIds,\n      oldIsOnTop,\n      listSlice,\n    );\n\n    if (!oldViewportIds || !areSortedArraysEqual(oldViewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    if (!isActive) return;\n\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, resetScroll];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n  };\n}\n\nfunction getViewportSliceAfterListChange<ListId extends string | number>(\n  newListIds: ListId[],\n  oldViewportIds: ListId[] | undefined,\n  oldIsOnTop: boolean | undefined,\n  sliceLength: number,\n) {\n  if (oldIsOnTop) {\n    // When the offsetId is on the top, the viewport slice must include at least as many items as it already has.\n    // Otherwise, the ids, that the user is seeing, can disappear (that causes the list to scroll higher instantly).\n    // Subtracting 1 prevents getViewportSlice from expanding the viewport slice 1 item with each newListIds change.\n    sliceLength = Math.max(sliceLength, (oldViewportIds?.length ?? 0) - 1);\n    return getViewportSlice(newListIds, LoadMoreDirection.Backwards, sliceLength, newListIds[0]);\n  }\n\n  let offsetId = oldViewportIds?.[Math.round(oldViewportIds.length / 2)];\n  if (offsetId && !newListIds.includes(offsetId)) offsetId = newListIds[0];\n  // The direction must be Forwards for getViewportSlice to keep the offsetId at the newViewportIds middle. Otherwise,\n  // the viewport slice will \"walk\" 1 item backward with each newListIds change.\n  return getViewportSlice(newListIds, LoadMoreDirection.Forwards, sliceLength, offsetId);\n}\n\nexport default useInfiniteScroll;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import type { UIEvent } from 'react';\nimport type { ElementRef, FC, TeactNode } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../../global/types';\n\nimport { requestForcedReflow } from '../../lib/fasterdom/fasterdom';\nimport buildStyle from '../../util/buildStyle';\nimport { SECOND } from '../../util/dateFormat';\nimport resetScroll from '../../util/resetScroll';\nimport { debounce } from '../../util/schedulers';\nimport { IS_ANDROID } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../hooks/useLayoutEffectWithPrevDeps';\n\ntype OwnProps = {\n  ref?: ElementRef<HTMLDivElement>;\n  style?: string;\n  className?: string;\n  items?: any[];\n  itemSelector?: string;\n  preloadBackwards?: number;\n  sensitiveArea?: number;\n  withAbsolutePositioning?: boolean;\n  /* A CSS value */\n  maxHeight?: string;\n  noScrollRestore?: boolean;\n  noScrollRestoreOnTop?: boolean;\n  noFastList?: boolean;\n  cacheBuster?: any;\n  beforeChildren?: TeactNode;\n  scrollContainerClosest?: string;\n  children: TeactNode;\n  onLoadMore?: ({ direction }: { direction: LoadMoreDirection }) => void;\n  onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n  onWheel?: (e: React.WheelEvent<HTMLDivElement>) => void;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n  onDragOver?: (e: React.DragEvent<HTMLDivElement>) => void;\n  onDragLeave?: (e: React.DragEvent<HTMLDivElement>) => void;\n};\n\nconst DEFAULT_LIST_SELECTOR = '.ListItem';\nconst DEFAULT_PRELOAD_BACKWARDS = 20;\nconst DEFAULT_SENSITIVE_AREA = 800;\n\nconst InfiniteScroll: FC<OwnProps> = ({\n  ref,\n  style,\n  className,\n  items,\n  itemSelector = DEFAULT_LIST_SELECTOR,\n  preloadBackwards = DEFAULT_PRELOAD_BACKWARDS,\n  sensitiveArea = DEFAULT_SENSITIVE_AREA,\n  withAbsolutePositioning,\n  maxHeight,\n  // Used to turn off restoring scroll position (e.g. for frequently re-ordered chat or user lists)\n  noScrollRestore = false,\n  noScrollRestoreOnTop = false,\n  noFastList,\n  // Used to re-query `listItemElements` if rendering is delayed by transition\n  cacheBuster,\n  beforeChildren,\n  scrollContainerClosest,\n  children,\n  onLoadMore,\n  onScroll,\n  onWheel,\n  onClick,\n  onKeyDown,\n  onDragOver,\n  onDragLeave,\n}: OwnProps) => {\n  let containerRef = useRef<HTMLDivElement>();\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const stateRef = useRef<{\n    listItemElements?: NodeListOf<HTMLDivElement>;\n    isScrollTopJustUpdated?: boolean;\n    currentAnchor?: HTMLDivElement | undefined;\n    currentAnchorTop?: number;\n  }>({});\n\n  const [loadMoreBackwards, loadMoreForwards] = useMemo(() => {\n    if (!onLoadMore) {\n      return [];\n    }\n\n    return [\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Backwards });\n      }, SECOND, true, false),\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Forwards });\n      }, SECOND, true, false),\n    ];\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [onLoadMore, items]);\n\n  // Initial preload\n  useEffect(() => {\n    if (!loadMoreBackwards) {\n      return;\n    }\n\n    if (preloadBackwards > 0 && (!items || items.length < preloadBackwards)) {\n      loadMoreBackwards();\n      return;\n    }\n\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n\n    const { scrollHeight, clientHeight } = scrollContainer;\n    if (clientHeight && scrollHeight <= clientHeight) {\n      loadMoreBackwards();\n    }\n  }, [items, loadMoreBackwards, preloadBackwards, scrollContainerClosest]);\n\n  // Restore `scrollTop` after adding items\n  useLayoutEffectWithPrevDeps(([prevItems]) => {\n    const scrollContainer = scrollContainerClosest\n      ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n      : containerRef.current!;\n    const state = stateRef.current;\n\n    const listItemElements = scrollContainer.querySelectorAll<HTMLDivElement>(itemSelector);\n    state.listItemElements = listItemElements;\n\n    if (!prevItems?.length) return;\n\n    requestForcedReflow(() => {\n      let newScrollTop: number;\n\n      if (state.currentAnchor && Array.from(listItemElements).includes(state.currentAnchor)) {\n        const { scrollTop } = scrollContainer;\n        const newAnchorTop = state.currentAnchor.getBoundingClientRect().top;\n        newScrollTop = scrollTop + (newAnchorTop - state.currentAnchorTop!);\n      } else {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          state.currentAnchor = nextAnchor;\n          state.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n        }\n      }\n\n      if (withAbsolutePositioning || noScrollRestore) {\n        return undefined;\n      }\n\n      const { scrollTop } = scrollContainer;\n      if (noScrollRestoreOnTop && scrollTop === 0) {\n        return undefined;\n      }\n\n      return () => {\n        resetScroll(scrollContainer, newScrollTop);\n\n        state.isScrollTopJustUpdated = true;\n      };\n    });\n  }, [\n    items, itemSelector, noScrollRestore, noScrollRestoreOnTop, cacheBuster, withAbsolutePositioning,\n    scrollContainerClosest,\n  ]);\n\n  const handleScroll = useLastCallback((e: UIEvent<HTMLDivElement>) => {\n    if (loadMoreForwards && loadMoreBackwards) {\n      const {\n        isScrollTopJustUpdated, currentAnchor, currentAnchorTop,\n      } = stateRef.current;\n      const listItemElements = stateRef.current.listItemElements!;\n\n      if (isScrollTopJustUpdated) {\n        stateRef.current.isScrollTopJustUpdated = false;\n        return;\n      }\n\n      const listLength = listItemElements.length;\n      const scrollContainer = scrollContainerClosest\n        ? containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest)!\n        : containerRef.current!;\n      const { scrollTop, scrollHeight, offsetHeight } = scrollContainer;\n      const top = listLength ? listItemElements[0].offsetTop : 0;\n      const isNearTop = scrollTop <= top + sensitiveArea;\n      const bottom = listLength\n        ? listItemElements[listLength - 1].offsetTop + listItemElements[listLength - 1].offsetHeight\n        : scrollHeight;\n      const isNearBottom = bottom - (scrollTop + offsetHeight) <= sensitiveArea;\n      let isUpdated = false;\n\n      if (isNearTop) {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingUp = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop > currentAnchorTop\n          );\n\n          if (isMovingUp) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreForwards();\n          }\n        }\n      }\n\n      if (isNearBottom) {\n        const nextAnchor = listItemElements[listLength - 1];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingDown = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop < currentAnchorTop\n          );\n\n          if (isMovingDown) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreBackwards();\n          }\n        }\n      }\n\n      if (!isUpdated) {\n        if (currentAnchor?.offsetParent) {\n          stateRef.current.currentAnchorTop = currentAnchor.getBoundingClientRect().top;\n        } else {\n          const nextAnchor = listItemElements[0];\n\n          if (nextAnchor) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n          }\n        }\n      }\n    }\n\n    if (onScroll) {\n      onScroll(e);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest) return undefined;\n\n    const closestScrollContainer = containerRef.current!.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    const handleNativeScroll = (e: Event) => handleScroll(e as unknown as UIEvent<HTMLDivElement>);\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [handleScroll, scrollContainerClosest]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      onScroll={handleScroll}\n      onWheel={onWheel}\n      teactFastList={!noFastList && !withAbsolutePositioning}\n      onKeyDown={onKeyDown}\n      onDragOver={onDragOver}\n      onDragLeave={onDragLeave}\n      onClick={onClick}\n      style={style}\n    >\n      {beforeChildren}\n      {withAbsolutePositioning && items?.length ? (\n        <div\n          teactFastList={!noFastList}\n          style={buildStyle('position: relative', IS_ANDROID && maxHeight !== undefined && `height: ${maxHeight}`)}\n        >\n          {children}\n        </div>\n      ) : children}\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import { IS_IOS } from './windowEnvironment';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport default resetScroll;\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"qI7nEtyA\",\"emptyListTitle\":\"ddnxH_YM\",\"emptyListLoading\":\"BUMeW3vl\",\"greeting\":\"HZCBxAlC\",\"sticker\":\"L93gae4c\",\"loaderThreshold\":\"tFv_lTfa\",\"itemLoading\":\"aJcdkBz7\",\"date\":\"t2U79mme\",\"date_withLoadingDots\":\"vFLWFB14\",\"dateWithLoadingDots\":\"vFLWFB14\",\"loadingDots\":\"Ig34AhI2\",\"dateContainer\":\"ubrkPkql\",\"dateSlide\":\"rHTS83Rc\",\"listItem\":\"ebD9lZA7\",\"listGroup\":\"fUr4n5dv\",\"animateOpacity\":\"a2p7XeQH\",\"animateTransform\":\"xJCALuqk\"};","import { useRef } from '../../../../../lib/teact/teact';\n\nimport { requestMutation } from '../../../../../lib/fasterdom/fasterdom';\n\nimport useLayoutEffectWithPrevDeps from '../../../../../hooks/useLayoutEffectWithPrevDeps';\n\nimport styles from '../Activities.module.scss';\n\nconst ANIMATION_DURATION = 200;\nconst ANIMATION_END_DELAY = 50;\n\nexport default function useActivityListEntry(\n  withAnimation: boolean,\n  topOffset: number, // rem\n) {\n  const ref = useRef<HTMLDivElement>();\n\n  useLayoutEffectWithPrevDeps(([prevTopOffset]) => {\n    const element = ref.current;\n\n    if (!withAnimation || !element) {\n      return;\n    }\n\n    if (prevTopOffset === undefined) {\n      // A new activity\n      animateOpacity(element);\n      cleanupAnimation(element);\n    } else if (topOffset !== prevTopOffset) {\n      // An existing activity that has moved\n      animateMove(element, topOffset - prevTopOffset);\n      cleanupAnimation(element);\n    }\n  }, [topOffset, withAnimation]);\n\n  return { ref };\n}\n\nfunction animateOpacity(element: HTMLElement) {\n  element.style.opacity = '0';\n\n  requestMutation(() => {\n    element.classList.add(styles.animateOpacity);\n    element.style.opacity = '1';\n  });\n}\n\nfunction animateMove(element: HTMLElement, offsetY: number) {\n  element.style.transform = `translate3d(0, ${-offsetY}rem, 0)`;\n\n  requestMutation(() => {\n    element.classList.add(styles.animateTransform);\n    element.style.transform = '';\n  });\n}\n\nfunction cleanupAnimation(element: HTMLElement) {\n  setTimeout(() => {\n    requestMutation(() => {\n      element.classList.remove(styles.animateOpacity, styles.animateTransform);\n      element.style.opacity = '';\n      element.style.transform = '';\n    });\n  }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n}\n","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React from '../../../../lib/teact/teact';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useActivityListEntry from './hooks/useActivityListEntry';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  /** In rem */\n  topOffset: number;\n  withAnimation: boolean;\n  children?: TeactNode;\n}\n\nfunction ActivityListItem({\n  topOffset,\n  withAnimation,\n  children,\n}: OwnProps) {\n  const { ref: animationRef } = useActivityListEntry(withAnimation, topOffset);\n\n  return (\n    <div\n      ref={animationRef}\n      style={`top: ${topOffset}rem`}\n      className={buildClassName('ListItem', styles.listItem)}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport default ActivityListItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"k3PjQTgC\",\"panel\":\"ZX_ET6v1\",\"emptyList\":\"y3OrMGkQ\",\"text\":\"W7PJUQAi\",\"header\":\"vhx2gdHr\",\"description\":\"iQxbUd1C\"};","import React, { memo } from '../../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, ANIMATED_STICKER_SMALL_SIZE_PX } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\n\nimport styles from './NewWalletGreeting.module.scss';\n\ninterface Props {\n  isActive?: boolean;\n  isMutlichainAccount?: boolean;\n  mode: 'panel' | 'emptyList';\n}\n\nfunction NewWalletGreeting({ isActive, isMutlichainAccount, mode }: Props) {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.container, styles[mode])}>\n      <AnimatedIconWithPreview\n        play={isActive}\n        tgsUrl={ANIMATED_STICKERS_PATHS.hello}\n        previewUrl={ANIMATED_STICKERS_PATHS.helloPreview}\n        nonInteractive\n        noLoop={false}\n        size={mode === 'emptyList' ? ANIMATED_STICKER_BIG_SIZE_PX : ANIMATED_STICKER_SMALL_SIZE_PX}\n      />\n\n      <div className={styles.text}>\n        <p className={styles.header}>\n          {lang(isMutlichainAccount\n            ? 'You have just created a new multichain wallet'\n            : 'You have just created a new wallet')}\n        </p>\n        <p className={styles.description}>\n          {lang(\n            isMutlichainAccount\n              ? 'Now you can transfer tokens from your TON and TRON wallets.'\n              : 'You can now transfer your tokens from another wallet or exchange.',\n          )}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(NewWalletGreeting);\n","import type { TeactNode } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiActivity,\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenWithPrice,\n} from '../../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../../global/types';\nimport { ContentTab } from '../../../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n} from '../../../../config';\nimport { forceMeasure } from '../../../../lib/fasterdom/stricterdom';\nimport { getIsTinyOrScamTransaction } from '../../../../global/helpers';\nimport {\n  selectAccounts,\n  selectAccountStakingStatesBySlug,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsFirstTransactionsLoaded,\n  selectIsMultichainAccount,\n  selectIsNewWallet,\n} from '../../../../global/selectors';\nimport { getActivityIdReplacements } from '../../../../util/activities';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatHumanDay, getDayStartAt, SECOND } from '../../../../util/dateFormat';\nimport generateUniqueId from '../../../../util/generateUniqueId';\nimport { compact, swapKeysAndValues } from '../../../../util/iteratees';\nimport { getIsTransactionWithPoisoning } from '../../../../util/poisoningHash';\nimport { REM } from '../../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport {\n  getScrollableContainer,\n  getScrollContainerClosestSelector,\n} from '../../helpers/scrollableContainer';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport { getIsPortrait, useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useLayoutEffectWithPrevDeps from '../../../../hooks/useLayoutEffectWithPrevDeps';\nimport useSyncEffectWithPrevDeps from '../../../../hooks/useSyncEffectWithPrevDeps';\nimport useThrottledCallback from '../../../../hooks/useThrottledCallback';\nimport useUpdateIndicator from '../../../../hooks/useUpdateIndicator';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport LoadingDots from '../../../ui/LoadingDots';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport Activity, { getActivityHeight } from './Activity';\nimport ActivityListItem from './ActivityListItem';\nimport NewWalletGreeting from './NewWalletGreeting';\n\nimport styles from './Activities.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  totalTokensAmount: number;\n}\n\ntype StateProps = {\n  currentAccountId: string;\n  slug?: string;\n  isNewWallet: boolean;\n  isMultichainAccount: boolean;\n  areTinyTransfersHidden?: boolean;\n  byId?: Record<string, ApiActivity>;\n  idsBySlug?: Record<string, string[]>;\n  idsMain?: string[];\n  tokensBySlug: Record<string, ApiTokenWithPrice>;\n  swapTokensBySlug?: Record<string, ApiSwapAsset>;\n  currentActivityId?: string;\n  savedAddresses?: SavedAddress[];\n  isMainHistoryEndReached?: boolean;\n  isHistoryEndReachedBySlug?: Record<string, boolean>;\n  alwaysShownSlugs?: string[];\n  theme: Theme;\n  baseCurrency?: ApiBaseCurrency;\n  isFirstTransactionsLoaded?: boolean;\n  isSensitiveDataHidden?: true;\n  stakingStateBySlug?: Record<string, ApiStakingState>;\n  nftsByAddress?: Record<string, ApiNft>;\n  accounts?: Record<string, Account>;\n};\n\ninterface ItemPosition {\n  /** In rem */\n  top: number;\n  /** In rem */\n  height: number;\n}\n\nconst FURTHER_SLICE = 30;\nconst THROTTLE_TIME = SECOND;\n\nconst LIST_TOP_PADDING = 0.5; // rem\nconst DATE_HEADER_HEIGHT = 2.125; // rem\n\n// After this threshold, the animations of adding new activities (controlled by `useActivityOrderDiff`) won't be visible\n// to the user, so the animation is disabled to improve the performance. An important part that makes the additions\n// invisible is the `usePreventScrolledListShift` hook.\nconst SCROLL_THRESHOLD = (LIST_TOP_PADDING + DATE_HEADER_HEIGHT) * REM;\n\nconst DATE_ID_PREFIX = 'date:';\n\nconst EMPTY_ARRAY = Object.freeze([]);\nconst EMPTY_DICTIONARY = Object.freeze({});\n\nfunction Activities({\n  isActive,\n  currentAccountId,\n  isNewWallet,\n  isMultichainAccount,\n  slug,\n  idsBySlug,\n  idsMain,\n  byId,\n  tokensBySlug,\n  swapTokensBySlug,\n  areTinyTransfersHidden,\n  currentActivityId,\n  savedAddresses,\n  isMainHistoryEndReached,\n  isHistoryEndReachedBySlug,\n  alwaysShownSlugs,\n  theme,\n  baseCurrency,\n  isFirstTransactionsLoaded,\n  isSensitiveDataHidden,\n  stakingStateBySlug,\n  nftsByAddress,\n  accounts,\n}: Omit<OwnProps, 'totalTokensAmount'> & StateProps) {\n  const {\n    fetchTokenTransactions, fetchAllTransactions, showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isLandscape, isPortrait } = useDeviceScreen();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const isUpdating = useUpdateIndicator('activitiesUpdateStartedAt');\n\n  const appTheme = useAppTheme(theme);\n  const hasUserScrolledRef = useRef(false);\n\n  const allActivityIds = useMemo(() => {\n    let idList: string[] | undefined;\n\n    const bySlug = idsBySlug ?? {};\n\n    if (byId) {\n      if (slug) {\n        idList = bySlug[slug] ?? EMPTY_ARRAY;\n      } else {\n        idList = idsMain;\n      }\n    }\n\n    return idList;\n  }, [byId, slug, idsBySlug, idsMain]);\n\n  const listItemIds = useMemo(() => {\n    const activityIds = filterActivityIds(\n      allActivityIds,\n      byId,\n      slug,\n      tokensBySlug,\n      areTinyTransfersHidden,\n      alwaysShownSlugs,\n    );\n\n    return addDatesToActivityIds(activityIds, byId);\n  }, [areTinyTransfersHidden, byId, alwaysShownSlugs, allActivityIds, slug, tokensBySlug]);\n\n  const firstListItemId = listItemIds[0] as string | undefined;\n\n  const isHistoryEndReached = useMemo(() => {\n    if (slug) {\n      return !!isHistoryEndReachedBySlug?.[slug];\n    }\n\n    return !!isMainHistoryEndReached;\n  }, [isHistoryEndReachedBySlug, isMainHistoryEndReached, slug]);\n\n  const loadMore = useLastCallback(() => {\n    if (slug) {\n      fetchTokenTransactions({ slug, limit: FURTHER_SLICE * 2, shouldLoadWithBudget: true });\n    } else {\n      fetchAllTransactions({ limit: FURTHER_SLICE * 2, shouldLoadWithBudget: true });\n    }\n  });\n\n  const throttledLoadMore = useThrottledCallback(loadMore, [loadMore], THROTTLE_TIME, true);\n\n  const [viewportIds, getMore, resetScroll] = useInfiniteScroll(\n    throttledLoadMore, listItemIds, undefined, FURTHER_SLICE, slug, isActive,\n  );\n\n  const getListItemKey = useListItemKeys(viewportIds ?? EMPTY_ARRAY, byId ?? EMPTY_DICTIONARY);\n\n  const shouldUseAnimations = Boolean(isActive && !hasUserScrolledRef.current);\n\n  const isActivitiesEmpty = !listItemIds.length;\n\n  const itemPositionById = useMemo(() => {\n    const itemPositionById: Record<string, ItemPosition> = {};\n    let top = 0;\n\n    listItemIds.forEach((itemId, index) => {\n      const height = itemId.startsWith(DATE_ID_PREFIX)\n        ? DATE_HEADER_HEIGHT + (index === 0 ? LIST_TOP_PADDING : 0)\n        : getActivityHeight(byId![itemId]);\n\n      itemPositionById[itemId] = { top, height };\n      top += height;\n    });\n\n    return itemPositionById;\n  }, [byId, listItemIds]);\n\n  const currentContainerHeight = useMemo(\n    () => {\n      if (!viewportIds?.length) return 0;\n\n      const lastViewportId = viewportIds[viewportIds.length - 1];\n      const activityOffset = itemPositionById[lastViewportId];\n\n      return activityOffset ? activityOffset.top + activityOffset.height : 0;\n    },\n    [itemPositionById, viewportIds],\n  );\n\n  usePreventScrolledListShift(\n    viewportIds ?? EMPTY_ARRAY,\n    itemPositionById,\n    isPortrait,\n    containerRef,\n    hasUserScrolledRef,\n  );\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, { height: isLandscape ? '' : `${currentContainerHeight}rem` });\n  }, [isLandscape, currentContainerHeight]);\n\n  useEffect(() => {\n    if (!isHistoryEndReached && allActivityIds && isActivitiesEmpty) {\n      throttledLoadMore();\n    }\n  }, [allActivityIds, isActivitiesEmpty, isHistoryEndReached, throttledLoadMore]);\n\n  // Reset scroll and scroll tracking when the tab becomes inactive\n  useEffect(() => {\n    if (!isActive && !isLandscape) {\n      resetScroll?.();\n      hasUserScrolledRef.current = false;\n    }\n  }, [isActive, isLandscape, resetScroll]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    const scrollTop = (e.target as HTMLDivElement).scrollTop;\n\n    hasUserScrolledRef.current = scrollTop >= SCROLL_THRESHOLD;\n  });\n\n  const handleActivityClick = useLastCallback((id: string) => {\n    showActivityInfo({ id });\n  });\n\n  if (!currentAccountId) {\n    return undefined;\n  }\n\n  function renderDate(dateValue: number, isFirst?: boolean) {\n    const formattedDate = formatHumanDay(lang, dateValue);\n    const date = <div className={styles.date}>{formattedDate}</div>;\n\n    if (!isFirst) {\n      return date;\n    }\n\n    const dateWithLoader = (\n      <div className={buildClassName(styles.date, styles.date_withLoadingDots)}>\n        {formattedDate}\n        <LoadingDots isActive isDoubled className={styles.loadingDots} />\n      </div>\n    );\n\n    return (\n      <Transition\n        name=\"semiFade\"\n        activeKey={isUpdating ? 1 : 0}\n        className={styles.dateContainer}\n        slideClassName={styles.dateSlide}\n      >\n        {isUpdating ? dateWithLoader : date}\n      </Transition>\n    );\n  }\n\n  function renderHistory() {\n    if (!viewportIds) return undefined;\n\n    return viewportIds.map((itemId, index) => {\n      const topOffset = itemPositionById[itemId]?.top ?? 0;\n      let itemContent: TeactNode;\n\n      if (itemId.startsWith(DATE_ID_PREFIX)) {\n        itemContent = renderDate(\n          Number(itemId.slice(DATE_ID_PREFIX.length)),\n          itemId === firstListItemId,\n        );\n      } else {\n        const activity = byId?.[itemId];\n        if (!activity) return undefined;\n\n        const isActivityActive = activity.id === currentActivityId;\n        const isLastInDay = index === viewportIds.length - 1 || viewportIds[index + 1].startsWith(DATE_ID_PREFIX);\n\n        itemContent = (\n          <Activity\n            activity={activity}\n            isLast={isLastInDay}\n            isActive={isActivityActive}\n            tokensBySlug={tokensBySlug}\n            swapTokensBySlug={swapTokensBySlug}\n            appTheme={appTheme}\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            nftsByAddress={nftsByAddress}\n            currentAccountId={currentAccountId}\n            stakingStateBySlug={stakingStateBySlug}\n            savedAddresses={savedAddresses}\n            withChainIcon={isMultichainAccount}\n            accounts={accounts}\n            baseCurrency={baseCurrency}\n            onClick={handleActivityClick}\n          />\n        );\n      }\n\n      return (\n        <ActivityListItem key={getListItemKey(itemId)} topOffset={topOffset} withAnimation={shouldUseAnimations}>\n          {itemContent}\n        </ActivityListItem>\n      );\n    });\n  }\n\n  if (isActivitiesEmpty && !isFirstTransactionsLoaded) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (isNewWallet) {\n    return (\n      <div className={buildClassName(isLandscape && styles.greeting)}>\n        <NewWalletGreeting\n          isActive={isActive}\n          isMutlichainAccount={isMultichainAccount}\n          mode={isLandscape ? 'emptyList' : 'panel'}\n        />\n      </div>\n    );\n  }\n\n  if (isHistoryEndReached && isActivitiesEmpty) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No Activity')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName('custom-scroll', styles.listGroup)}\n      scrollContainerClosest={getScrollContainerClosestSelector(isActive, isPortrait)}\n      items={viewportIds}\n      preloadBackwards={FURTHER_SLICE}\n      withAbsolutePositioning\n      maxHeight={`${currentContainerHeight}rem`}\n      onLoadMore={getMore}\n      onScroll={handleScroll}\n    >\n      {renderHistory()}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const accountState = selectCurrentAccountState(global);\n      const accountSettings = selectCurrentAccountSettings(global);\n      const isFirstTransactionsLoaded = selectIsFirstTransactionsLoaded(global, global.currentAccountId!);\n      const isNewWallet = selectIsNewWallet(global, isFirstTransactionsLoaded);\n      const slug = accountState?.currentTokenSlug;\n      const stakingStateBySlug = accountId ? selectAccountStakingStatesBySlug(global, accountId) : undefined;\n      const {\n        idsBySlug, byId, isMainHistoryEndReached, isHistoryEndReachedBySlug, idsMain,\n      } = accountState?.activities ?? {};\n      const { byAddress } = accountState?.nfts || {};\n      const accounts = selectAccounts(global);\n\n      return {\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        currentAccountId: global.currentAccountId!,\n        slug,\n        byId,\n        isNewWallet,\n        idsBySlug,\n        idsMain,\n        tokensBySlug: global.tokenInfo.bySlug,\n        swapTokensBySlug: global.swapTokenInfo?.bySlug,\n        areTinyTransfersHidden: global.settings.areTinyTransfersHidden,\n        savedAddresses: accountState?.savedAddresses,\n        isMainHistoryEndReached,\n        isHistoryEndReachedBySlug,\n        currentActivityId: accountState?.currentActivityId,\n        alwaysShownSlugs: accountSettings?.alwaysShownSlugs,\n        theme: global.settings.theme,\n        baseCurrency: global.settings.baseCurrency,\n        isFirstTransactionsLoaded,\n        stakingStateBySlug,\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        nftsByAddress: byAddress,\n        accounts,\n      };\n    },\n    (global, { totalTokensAmount }, stickToFirst) => {\n      const accountState = selectCurrentAccountState(global);\n      const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n        getIsPortrait() ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n      );\n\n      return stickToFirst((\n        accountState?.activeContentTab === ContentTab.Activity\n        || (accountState?.activeContentTab === ContentTab.Assets && shouldShowSeparateAssetsPanel)\n      ) && global.currentAccountId);\n    },\n  )(Activities),\n);\n\nfunction filterActivityIds(\n  allActivityIds: string[] | undefined,\n  byId: Record<string, ApiActivity> | undefined,\n  slug: string | undefined,\n  tokensBySlug: Record<string, ApiTokenWithPrice>,\n  areTinyTransfersHidden?: boolean,\n  alwaysShownSlugs?: string[],\n) {\n  if (!allActivityIds || !byId) {\n    return EMPTY_ARRAY;\n  }\n\n  return allActivityIds.filter((id) => {\n    const activity = byId?.[id];\n    if (!activity) return false;\n\n    if (activity?.shouldHide) return false;\n\n    if (activity?.kind === 'swap') {\n      return !slug || activity.from === slug || activity.to === slug;\n    } else {\n      return activity?.slug\n        && (!slug || activity.slug === slug)\n        && (\n          !areTinyTransfersHidden\n          || (slug && tokensBySlug[activity.slug]?.priceUsd === 0)\n          || !getIsTinyOrScamTransaction(activity, tokensBySlug[activity.slug])\n          || alwaysShownSlugs?.includes(activity.slug)\n        )\n        && !getIsTransactionWithPoisoning(activity);\n    }\n  });\n}\n\nfunction addDatesToActivityIds(activityIds: readonly string[], byId: Record<string, ApiActivity> = {}) {\n  let lastActivityDayStart = Infinity;\n  const listItemIds: string[] = [];\n\n  // Mix-in the date headers to the list of activity ids\n  for (const activityId of activityIds) {\n    const activityDayStart = getDayStartAt(byId[activityId].timestamp);\n\n    // The clause is not `activityDayStart !== lastActivityDayStart`, because the days can go backwards, which will\n    // cause duplicated date Teact keys. The days can go backwards because the pending activities are on the top\n    // regardless of their timestamp.\n    const isNewDay = activityDayStart < lastActivityDayStart;\n\n    if (isNewDay) {\n      lastActivityDayStart = activityDayStart;\n      listItemIds.push(`${DATE_ID_PREFIX}${activityDayStart}`);\n    }\n    listItemIds.push(activityId);\n  }\n\n  return listItemIds;\n}\n\n/**\n * Pending activity ids may change. If the ids are used as the list keys, excessive blinking animations occur.\n * This hook creates stable keys for the list items, which prevents the excessive animations.\n */\nfunction useListItemKeys(viewportIds: readonly string[], activityById: Record<string, ApiActivity>) {\n  const keyByIdRef = useRef<Record<string, string>>();\n  keyByIdRef.current ??= {};\n\n  useSyncEffectWithPrevDeps(([oldViewportIds = [], oldActivityById = {}]) => {\n    const keyById = keyByIdRef.current!;\n    const oldActivities = compact(oldViewportIds.map((id) => oldActivityById[id]));\n    const newActivities = compact(viewportIds.map((id) => activityById[id]));\n\n    // Transfer the keys from the old activities to the new activities. Besides the obvious goal, `swapKeysAndValues`\n    // ensures that the `idReplacements` values are unique, which results into unique output keys.\n    const idReplacements = swapKeysAndValues(getActivityIdReplacements(oldActivities, newActivities));\n    for (const { id: newActivityId } of newActivities) {\n      const oldActivityId = idReplacements[newActivityId];\n      keyById[newActivityId] = (oldActivityId && keyById[oldActivityId]) ?? generateUniqueId();\n    }\n\n    // Clean the memory\n    const newActivityIds = new Set(viewportIds);\n    for (const itemId of Object.keys(keyById)) {\n      if (!newActivityIds.has(itemId)) {\n        delete keyById[itemId];\n      }\n    }\n  }, [viewportIds, activityById]);\n\n  return useLastCallback((itemId: string) => keyByIdRef.current?.[itemId] ?? itemId);\n}\n\n/**\n * In order to make the list look stationary after it has been scrolled, this hook compensates the scroll position when\n * new items are added and user scrolled content.\n */\nfunction usePreventScrolledListShift(\n  viewportIds: readonly string[],\n  itemPositionById: Record<string, ItemPosition>,\n  isPortrait: boolean,\n  containerRef: React.RefObject<HTMLDivElement | undefined>,\n  hasUserScrolledRef: React.RefObject<boolean>,\n) {\n  useLayoutEffectWithPrevDeps(([prevItemPositionById]) => {\n    const container = getScrollableContainer(containerRef.current, isPortrait);\n    if (!hasUserScrolledRef.current || !container || !prevItemPositionById || !viewportIds.length) return;\n\n    const anchorId = viewportIds[Math.floor(viewportIds.length / 2)];\n    const prevTop = prevItemPositionById[anchorId]?.top;\n    const nextTop = itemPositionById[anchorId]?.top;\n\n    if (prevTop === undefined || nextTop === undefined || prevTop === nextTop) return;\n\n    forceMeasure(() => {\n      container.scrollBy({\n        top: (nextTop - prevTop) * REM,\n        behavior: 'instant',\n      });\n    });\n  }, [itemPositionById, viewportIds, containerRef, hasUserScrolledRef, isPortrait]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"y_zyRtG4\",\"button\":\"mDOHosrF\",\"vestingIcon\":\"vKLHR9fe\",\"percent\":\"JLnToFoo\",\"readyToClaim\":\"T4MfMcFP\",\"active\":\"gcp9pSal\",\"iconArrow\":\"zzgzZR90\",\"iconChevron\":\"WLJ2jON8\",\"primaryCell\":\"MWjR4yCQ\",\"secondaryCell\":\"zBTGbg76\",\"subtitle\":\"v9EXZKHv\",\"amountChange\":\"fvwKm83g\",\"name\":\"IJaceq0j\",\"name_text\":\"JMnoFXEt\",\"nameText\":\"JMnoFXEt\",\"secondaryValue\":\"yB7hzLme\",\"secondaryValue_staked\":\"Fy56cR9i\",\"secondaryValueStaked\":\"Fy56cR9i\",\"change\":\"ka5acfM4\",\"change_up\":\"VR0vGdiX\",\"changeUp\":\"VR0vGdiX\",\"change_down\":\"osD2vwqW\",\"changeDown\":\"osD2vwqW\",\"dot\":\"zJntRecr\",\"label\":\"jN5w9AWO\",\"apyLabel\":\"xWg00BgF\",\"apyLabel_staked\":\"UeDUf_9U\",\"apyLabelStaked\":\"UeDUf_9U\",\"chainLabel\":\"B9HfGrEc\",\"tokenIcon\":\"BcTpLjhN\",\"secondaryValue_vesting\":\"rE0JGav4\",\"secondaryValueVesting\":\"rE0JGav4\",\"secondaryValue_vestingUnfreeze\":\"LHgVJV2I\",\"secondaryValueVestingUnfreeze\":\"LHgVJV2I\",\"wrapperVisible\":\"n7iUgDe0\",\"menu\":\"ilWFIqJF\"};","import React, { type ElementRef, memo, useMemo, useRef } from '../../../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiYieldType } from '../../../../api/types';\nimport type { AppTheme, UserToken } from '../../../../global/types';\nimport type { LangFn } from '../../../../hooks/useLang';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\nimport type { StakingStateStatus } from '../../../../util/staking';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX, IS_CORE_WALLET, TOKEN_WITH_LABEL, TON_USDE } from '../../../../config';\nimport { Big } from '../../../../lib/big.js';\nimport buildClassName from '../../../../util/buildClassName';\nimport { calcChangeValue } from '../../../../util/calcChangeValue';\nimport { DAY, formatFullDay } from '../../../../util/dateFormat';\nimport { toDecimal } from '../../../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport getPseudoRandomNumber from '../../../../util/getPseudoRandomNumber';\nimport { round } from '../../../../util/round';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useTokenContextMenu from './hooks/useTokenContextMenu';\n\nimport TokenIcon from '../../../common/TokenIcon';\nimport AnimatedCounter from '../../../ui/AnimatedCounter';\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport MenuBackdrop from '../../../ui/MenuBackdrop';\nimport SensitiveData from '../../../ui/SensitiveData';\n\nimport styles from './Token.module.scss';\n\ninterface OwnProps {\n  ref?: ElementRef<HTMLButtonElement>;\n  token: UserToken;\n  // Undefined means that it's not a staked token\n  stakingStatus?: StakingStateStatus;\n  stakingState?: ApiStakingState;\n  vestingStatus?: 'frozen' | 'readyToUnfreeze';\n  unfreezeEndDate?: number;\n  amount?: string;\n  isInvestorView?: boolean;\n  classNames?: string;\n  style?: string;\n  annualYield?: number;\n  yieldType?: ApiYieldType;\n  isActive?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  appTheme: AppTheme;\n  withChainIcon?: boolean;\n  withContextMenu?: boolean;\n  isSensitiveDataHidden?: true;\n  isSwapDisabled?: boolean;\n  isStakingAvailable?: boolean;\n  isViewMode?: boolean;\n  onClick: (slug: string) => void;\n}\n\nconst UNFREEZE_DANGER_DURATION = 7 * DAY;\nconst CONTEXT_MENU_VERTICAL_SHIFT_PX = 4;\nexport const OPEN_CONTEXT_MENU_CLASS_NAME = 'open-context-menu';\n\nfunction Token({\n  ref,\n  token,\n  amount,\n  stakingStatus,\n  stakingState,\n  vestingStatus,\n  unfreezeEndDate,\n  annualYield,\n  isInvestorView,\n  classNames,\n  style,\n  appTheme,\n  isActive,\n  baseCurrency,\n  withChainIcon,\n  withContextMenu,\n  isSensitiveDataHidden,\n  isStakingAvailable,\n  isSwapDisabled,\n  isViewMode,\n  yieldType,\n  onClick,\n}: OwnProps) {\n  const {\n    symbol,\n    slug,\n    amount: tokenAmount,\n    price,\n    change24h: change,\n    decimals,\n  } = token;\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  let buttonRef = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const isVesting = Boolean(vestingStatus?.length);\n  const renderedAmount = amount ?? toDecimal(tokenAmount, decimals, true);\n  const value = Big(renderedAmount).mul(price).toString();\n  const changeClassName = change > 0 ? styles.change_up : change < 0 ? styles.change_down : undefined;\n  const changeValue = Math.abs(round(calcChangeValue(Number(value), change), 4));\n  const changePercent = Math.abs(round(change * 100, 2));\n  const withYield = !IS_CORE_WALLET && annualYield !== undefined;\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const withLabel = Boolean(!isVesting && TOKEN_WITH_LABEL[slug]);\n  const stakingId = stakingState?.id;\n  const name = getTokenName(lang, token, !!stakingId);\n  const amountCols = useMemo(() => getPseudoRandomNumber(4, 12, name), [name]);\n  const fiatAmountCols = 5 + (amountCols % 6);\n  if (ref) {\n    buttonRef = ref;\n  }\n\n  const {\n    shouldRender: shouldRenderYield,\n    ref: yieldRef,\n  } = useShowTransition<HTMLSpanElement>({\n    isOpen: withYield,\n    withShouldRender: true,\n  });\n\n  const handleClick = useLastCallback(() => {\n    onClick(stakingId ?? slug);\n  });\n\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    doNotCoverTrigger: isPortrait,\n    // The shift is needed to prevent the mouse cursor from highlighting the first menu item\n    topShiftY: !isPortrait ? CONTEXT_MENU_VERTICAL_SHIFT_PX : undefined,\n    preferredPositionX: 'left',\n  }));\n\n  const {\n    isContextMenuOpen,\n    isContextMenuShown,\n    contextMenuAnchor,\n    items,\n    isBackdropRendered,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n    handleMenuItemSelect,\n  } = useTokenContextMenu(buttonRef, {\n    token,\n    isPortrait,\n    withContextMenu,\n    isStakingAvailable,\n    isSwapDisabled,\n    isViewMode,\n    stakingState,\n  });\n\n  function renderYield() {\n    const labelClassName = buildClassName(\n      styles.label,\n      styles.apyLabel,\n      stakingStatus && styles.apyLabel_staked,\n    );\n\n    return (\n      <span ref={yieldRef} className={labelClassName}>\n        {yieldType} {annualYield}%\n      </span>\n    );\n  }\n\n  function renderChangeIcon() {\n    if (change === 0) {\n      return undefined;\n    }\n\n    return (\n      <i\n        className={buildClassName(styles.iconArrow, change > 0 ? 'icon-arrow-up' : 'icon-arrow-down')}\n        aria-hidden\n      />\n    );\n  }\n\n  function renderStakingIcon() {\n    if (stakingStatus === 'active') {\n      return (\n        <i\n          className={buildClassName('icon-percent', styles.percent)}\n          aria-hidden\n        />\n      );\n    }\n\n    if (stakingStatus === 'readyToClaim') {\n      return (\n        <i\n          className={buildClassName('icon-check-alt', styles.readyToClaim)}\n          aria-hidden\n        />\n      );\n    }\n\n    return (\n      <AnimatedIconWithPreview\n        play\n        size={ANIMATED_STICKER_TINY_ICON_PX}\n        className={styles.percent}\n        nonInteractive\n        noLoop={false}\n        tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockPurple}\n        previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockPurple}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.button,\n    isActive && styles.active,\n    isContextMenuOpen && OPEN_CONTEXT_MENU_CLASS_NAME,\n  );\n\n  function renderInvestorView() {\n    return (\n      <Button\n        ref={buttonRef}\n        isSimple\n        className={fullClassName}\n        onMouseDown={handleBeforeContextMenu}\n        onContextMenu={handleContextMenu}\n        onClick={handleClick}\n      >\n        <TokenIcon\n          size=\"large\"\n          token={token}\n          withChainIcon={withChainIcon}\n          className={styles.tokenIcon}\n        >\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {shouldRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={fiatAmountCols}\n              rows={2}\n              cellSize={8}\n            >\n              <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n            </SensitiveData>\n            <i className={styles.dot} aria-hidden />\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={amountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={buildClassName(\n              styles.secondaryValue,\n              stakingStatus && styles.secondaryValue_staked,\n              isVesting && styles.secondaryValue_vesting,\n              isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n            )}\n          >\n            <AnimatedCounter text={formatCurrency(value, shortBaseSymbol)} />\n          </SensitiveData>\n          {unfreezeEndDate ? (\n            <div\n              className={buildClassName(\n                styles.change,\n                (unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down,\n              )}\n            >\n              {lang('Unfreeze')}\n              {' '}\n              {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n            </div>\n          ) : (\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={fiatAmountCols}\n              rows={2}\n              cellSize={8}\n              align=\"right\"\n              className={buildClassName(styles.change, changeClassName)}\n            >\n              {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(changeValue, shortBaseSymbol, undefined, true)} />\n            </SensitiveData>\n          )}\n        </div>\n      </Button>\n    );\n  }\n\n  function renderDefaultView() {\n    const totalAmount = Big(renderedAmount).mul(price);\n    const canRenderYield = annualYield !== undefined;\n\n    return (\n      <Button\n        ref={buttonRef}\n        isSimple\n        className={fullClassName}\n        onMouseDown={handleBeforeContextMenu}\n        onContextMenu={handleContextMenu}\n        onClick={handleClick}\n      >\n        <TokenIcon\n          token={token}\n          size=\"large\"\n          withChainIcon={withChainIcon}\n          className={styles.tokenIcon}\n        >\n          <>\n            {stakingStatus && renderStakingIcon()}\n            {vestingStatus && (\n              <i\n                className={buildClassName(vestingStatus === 'frozen' ? 'icon-snow' : 'icon-fire', styles.vestingIcon)}\n                aria-hidden\n              />\n            )}\n          </>\n        </TokenIcon>\n        <div className={styles.primaryCell}>\n          <div className={styles.name}>\n            <span className={styles.nameText}>{name}</span>\n            {canRenderYield && renderYield()}\n            {withLabel && (\n              <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[slug]}</span>\n            )}\n          </div>\n          <div className={styles.subtitle}>\n            <AnimatedCounter text={formatCurrency(price, shortBaseSymbol, undefined, true)} />\n            {!stakingStatus && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                {unfreezeEndDate ? (\n                  <span className={(unfreezeEndDate - Date.now() < UNFREEZE_DANGER_DURATION) && styles.change_down}>\n                    {lang('Unfreeze')}\n                    {' '}\n                    {lang('until %date%', { date: `${formatFullDay(lang.code!, unfreezeEndDate)}` })}\n                  </span>\n                ) : (\n                  <span className={changeClassName}>\n                    {renderChangeIcon()}<AnimatedCounter text={String(changePercent)} />%\n                  </span>\n                )}\n              </>\n            )}\n          </div>\n        </div>\n        <div className={styles.secondaryCell}>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={amountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={buildClassName(\n              styles.secondaryValue,\n              stakingStatus && styles.secondaryValue_staked,\n              isVesting && styles.secondaryValue_vesting,\n              isVesting && vestingStatus === 'readyToUnfreeze' && styles.secondaryValue_vestingUnfreeze,\n            )}\n          >\n            <AnimatedCounter text={formatCurrency(renderedAmount, symbol)} />\n          </SensitiveData>\n          <SensitiveData\n            isActive={isSensitiveDataHidden}\n            cols={fiatAmountCols}\n            rows={2}\n            cellSize={8}\n            align=\"right\"\n            className={styles.subtitle}\n          >\n            {totalAmount.gt(0) ? '' : ''}&thinsp;\n            <AnimatedCounter text={formatCurrency(totalAmount, shortBaseSymbol, undefined, true)} />\n          </SensitiveData>\n        </div>\n      </Button>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.container, classNames)} style={style}>\n      <MenuBackdrop\n        isMenuOpen={isBackdropRendered}\n        contentRef={buttonRef}\n        contentClassName={styles.wrapperVisible}\n      />\n      {isInvestorView ? renderInvestorView() : renderDefaultView()}\n      {withContextMenu && isContextMenuShown && (\n        <DropdownMenu\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          isOpen={isContextMenuOpen}\n          items={items}\n          menuAnchor={contextMenuAnchor}\n          bubbleClassName={styles.menu}\n          fontIconClassName={styles.menuIcon}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          onSelect={handleMenuItemSelect}\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction getTokenName(lang: LangFn, token: UserToken, isStaking: boolean): string {\n  if (!isStaking) {\n    return token.name;\n  }\n\n  switch (token.slug) {\n    case TON_USDE.slug:\n      return lang('%token% Staking', { token: 'Ethena' })[0] as any;\n    default:\n      return lang('%token% Staking', { token: token.name })[0] as any;\n  }\n}\n\nexport default memo(Token);\n","import { type ElementRef, useMemo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport type { ApiStakingState } from '../../../../../api/types';\nimport type { UserToken } from '../../../../../global/types';\nimport type { DropdownItem } from '../../../../ui/Dropdown';\nimport { ActiveTab, SettingsState } from '../../../../../global/types';\n\nimport { DEFAULT_SWAP_FIRST_TOKEN_SLUG, DEFAULT_SWAP_SECOND_TOKEN_SLUG } from '../../../../../config';\nimport { vibrate } from '../../../../../util/haptics';\nimport { compact } from '../../../../../util/iteratees';\nimport { getStakingStateStatus } from '../../../../../util/staking';\nimport { getIsServiceToken } from '../../../../../util/tokens';\n\nimport useContextMenuHandlers from '../../../../../hooks/useContextMenuHandlers';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nexport type MenuHandler = 'add' | 'send' | 'swap' | 'stake' | 'hide' | 'settings'\n  | 'unstake' | 'stakeMore' | 'claimRewards';\n\nfunction useTokenContextMenu(ref: ElementRef<HTMLButtonElement>, options: {\n  isPortrait?: boolean;\n  withContextMenu?: boolean;\n  token: UserToken;\n  isSwapDisabled?: boolean;\n  isStakingAvailable?: boolean;\n  isViewMode?: boolean;\n  stakingState?: ApiStakingState;\n}) {\n  const {\n    openReceiveModal,\n    startTransfer,\n    startSwap,\n    startStaking,\n    openSettingsWithState,\n    toggleTokenVisibility,\n    setLandscapeActionsActiveTabIndex,\n    setReceiveActiveTab,\n    startUnstaking,\n    startStakingClaim,\n  } = getActions();\n\n  const {\n    token,\n    isPortrait,\n    withContextMenu,\n    isStakingAvailable,\n    isSwapDisabled,\n    isViewMode,\n    stakingState,\n  } = options;\n\n  const {\n    isContextMenuOpen, contextMenuAnchor,\n    handleBeforeContextMenu, handleContextMenu,\n    handleContextMenuClose, handleContextMenuHide,\n  } = useContextMenuHandlers({\n    elementRef: ref,\n    isMenuDisabled: !withContextMenu,\n  });\n  const isServiceToken = getIsServiceToken(token);\n  const stakingId = stakingState?.id;\n  const isContextMenuShown = contextMenuAnchor !== undefined;\n  const canBeClaimed = stakingState ? getStakingStateStatus(stakingState) === 'readyToClaim' : undefined;\n  const hasUnclaimedRewards = stakingState?.type === 'jetton'\n    ? !!stakingState.unclaimedRewards\n    : undefined;\n\n  const items: DropdownItem<MenuHandler>[] = useMemo(() => {\n    const mandatoryItems: (false | DropdownItem<MenuHandler>)[] = [\n      !stakingId && {\n        name: 'Hide',\n        fontIcon: 'eye-closed',\n        value: 'hide',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Manage Tokens',\n        fontIcon: 'menu-params',\n        withDelimiter: !(isViewMode && stakingId),\n        value: 'settings',\n      } satisfies DropdownItem<MenuHandler>,\n    ];\n\n    if (isViewMode) {\n      return compact(mandatoryItems);\n    }\n\n    const result: (false | undefined | DropdownItem<MenuHandler>)[] = stakingId\n      ? [(stakingState?.type !== 'ethena' || !canBeClaimed) && {\n        name: stakingState?.type === 'ethena' ? 'Request Unstaking' : 'Unstake',\n        fontIcon: 'menu-send',\n        value: 'unstake',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Stake More',\n        fontIcon: 'menu-receive',\n        value: 'stakeMore',\n      } satisfies DropdownItem<MenuHandler>,\n      (canBeClaimed || hasUnclaimedRewards) && {\n        name: 'Claim Rewards',\n        fontIcon: 'menu-gem',\n        value: 'claimRewards',\n      } satisfies DropdownItem<MenuHandler>]\n      : [!isServiceToken && {\n        name: 'Add / Buy',\n        fontIcon: 'menu-plus',\n        value: 'add',\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Send',\n        fontIcon: 'menu-send',\n        value: 'send',\n      } satisfies DropdownItem<MenuHandler>,\n      !isSwapDisabled && {\n        name: 'Swap',\n        fontIcon: 'menu-swap',\n        value: 'swap',\n      } satisfies DropdownItem<MenuHandler>,\n      isStakingAvailable && {\n        name: 'Stake',\n        fontIcon: 'menu-percent',\n        value: 'stake',\n      } satisfies DropdownItem<MenuHandler>];\n\n    return compact(result.concat(mandatoryItems));\n  }, [\n    canBeClaimed, hasUnclaimedRewards, isStakingAvailable, isSwapDisabled, isViewMode,\n    stakingId, stakingState?.type, isServiceToken,\n  ]);\n\n  const handleMenuItemSelect = useLastCallback((value: MenuHandler) => {\n    void vibrate();\n\n    switch (value) {\n      case 'add':\n        if (isPortrait) {\n          openReceiveModal({ chain: token.chain });\n        } else {\n          setReceiveActiveTab({ chain: token.chain });\n          setLandscapeActionsActiveTabIndex({ index: ActiveTab.Receive });\n        }\n        break;\n\n      case 'send':\n        startTransfer({\n          isPortrait,\n          tokenSlug: token.slug,\n        });\n        break;\n\n      case 'swap':\n        startSwap({\n          tokenInSlug: token.slug,\n          tokenOutSlug: token.slug === DEFAULT_SWAP_FIRST_TOKEN_SLUG\n            ? DEFAULT_SWAP_SECOND_TOKEN_SLUG\n            : DEFAULT_SWAP_FIRST_TOKEN_SLUG,\n        });\n        break;\n\n      case 'stake':\n      case 'stakeMore':\n        startStaking({ tokenSlug: token.slug });\n        break;\n\n      case 'settings':\n        openSettingsWithState({ state: SettingsState.Assets });\n        break;\n\n      case 'hide':\n        toggleTokenVisibility({ slug: token.slug, shouldShow: false });\n        break;\n\n      case 'unstake':\n        startUnstaking({ stakingId: stakingId! });\n        break;\n\n      case 'claimRewards':\n        startStakingClaim({ stakingId: stakingId! });\n        break;\n    }\n\n    handleContextMenuClose();\n  });\n\n  return {\n    isContextMenuOpen,\n    isContextMenuShown,\n    contextMenuAnchor,\n    items,\n    isBackdropRendered: isPortrait && isContextMenuOpen,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n    handleMenuItemSelect,\n  };\n}\n\nexport default useTokenContextMenu;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"EmokOdHM\",\"wrapperLoading\":\"QP7e6eAO\",\"emptyList\":\"XSZ9FBiN\",\"emptyListSeparate\":\"SHa5wmx_\",\"noTokens\":\"KNRqFMNX\",\"noTokens_text\":\"XwRCmsa8\",\"noTokensText\":\"XwRCmsa8\",\"noTokens_header\":\"qDi9Fjks\",\"noTokensHeader\":\"qDi9Fjks\",\"noTokens_description\":\"Lxfq6_5v\",\"noTokensDescription\":\"Lxfq6_5v\",\"openSettingsButton\":\"L2IEb5c3\"};","import React, { memo, useLayoutEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { setExtraStyles } from '../../../../lib/teact/teact-dom';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiBaseCurrency, ApiStakingState, ApiTokenWithPrice, ApiVestingInfo } from '../../../../api/types';\nimport type { Theme, UserSwapToken, UserToken } from '../../../../global/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { ANIMATED_STICKER_SMALL_SIZE_PX, IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsMultichainAccount,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n  selectMycoin,\n  selectSwapTokens,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { toDecimal } from '../../../../util/decimals';\nimport { buildCollectionByKey } from '../../../../util/iteratees';\nimport { getFullStakingBalance, getIsActiveStakingState, getStakingStateStatus } from '../../../../util/staking';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { getScrollContainerClosestSelector } from '../../helpers/scrollableContainer';\n\nimport useAppTheme from '../../../../hooks/useAppTheme';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useInfiniteScroll from '../../../../hooks/useInfiniteScroll';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useVesting from '../../../../hooks/useVesting';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Button from '../../../ui/Button';\nimport InfiniteScroll from '../../../ui/InfiniteScroll';\nimport Spinner from '../../../ui/Spinner';\nimport Token from './Token';\n\nimport styles from './Assets.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isSeparatePanel?: boolean;\n  onTokenClick: (slug: string) => void;\n  onStakedTokenClick: (stakingId?: string) => void;\n};\n\ninterface StateProps {\n  tokens?: UserToken[];\n  swapTokens?: UserSwapToken[];\n  vesting?: ApiVestingInfo[];\n  isInvestorViewEnabled?: boolean;\n  currentTokenSlug?: string;\n  baseCurrency?: ApiBaseCurrency;\n  theme: Theme;\n  mycoin?: ApiTokenWithPrice;\n  isMultichainAccount: boolean;\n  isSensitiveDataHidden?: true;\n  states?: ApiStakingState[];\n  isViewMode?: boolean;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n}\n\nconst LIST_SLICE = 30;\nconst TOKEN_HEIGHT_REM = 4;\n\nfunction Assets({\n  isActive,\n  tokens,\n  swapTokens,\n  vesting,\n  isInvestorViewEnabled,\n  isSeparatePanel,\n  currentTokenSlug,\n  onTokenClick,\n  onStakedTokenClick,\n  baseCurrency,\n  mycoin,\n  isMultichainAccount,\n  isSensitiveDataHidden,\n  theme,\n  states,\n  isViewMode,\n  isSwapDisabled,\n  isStakingDisabled,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const { openSettingsWithState } = getActions();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const renderedTokens = useCurrentOrPrev(tokens, true);\n  const renderedMycoin = useCurrentOrPrev(mycoin, true);\n\n  const userMycoin = useMemo(() => {\n    if (!renderedTokens || !renderedMycoin) return undefined;\n\n    return renderedTokens.find(({ slug }) => slug === renderedMycoin.slug);\n  }, [renderedMycoin, renderedTokens]);\n\n  const { isLandscape, isPortrait } = useDeviceScreen();\n  const appTheme = useAppTheme(theme);\n\n  const activeStates = useMemo(() => {\n    if (IS_CORE_WALLET) return [];\n\n    return states?.filter(getIsActiveStakingState) ?? [];\n  }, [states]);\n\n  const stakedTokens = useMemo(() => {\n    return activeStates.reduce((prevValue, state) => {\n      const token = tokens?.find(({ slug }) => slug === state.tokenSlug);\n      if (token) {\n        prevValue[state.tokenSlug] = { token, state };\n      }\n      return prevValue;\n    }, {} as Record<string, { token: UserToken; state: ApiStakingState }>);\n  }, [tokens, activeStates]);\n\n  const swapTokensBySlug = useMemo(() => {\n    return buildCollectionByKey<UserSwapToken>(swapTokens ?? [], 'slug');\n  }, [swapTokens]);\n\n  const {\n    shouldRender: shouldRenderStakedTokens,\n  } = useShowTransition({\n    isOpen: Boolean(Object.keys(stakedTokens).length),\n    withShouldRender: true,\n  });\n\n  const {\n    ref: vestingTokenRef,\n    shouldRender: shouldRenderVestingToken,\n    amount: vestingAmount,\n    vestingStatus,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  } = useVesting({ vesting, userMycoin, isDisabled: IS_CORE_WALLET });\n\n  const tokenSlugs = useMemo(() => (\n    renderedTokens\n      ?.filter(({ isDisabled }) => !isDisabled)\n      .map(({ slug }) => slug)\n  ), [renderedTokens]);\n  const [viewportSlugs, getMore] = useInfiniteScroll(\n    undefined, tokenSlugs, undefined, undefined, undefined, isActive, isPortrait,\n  );\n  const viewportIndex = useMemo(() => {\n    if (!viewportSlugs) return -1;\n\n    let index = tokenSlugs!.indexOf(viewportSlugs[0]);\n    if (shouldRenderStakedTokens) {\n      index += Object.keys(stakedTokens).length;\n    }\n    if (shouldRenderVestingToken) {\n      index++;\n    }\n\n    return index;\n  }, [shouldRenderStakedTokens, shouldRenderVestingToken, tokenSlugs, viewportSlugs, stakedTokens]);\n  const tokensBySlug = useMemo(() => (\n    renderedTokens ? buildCollectionByKey(renderedTokens, 'slug') : undefined\n  ), [renderedTokens]);\n  const withAbsolutePositioning = tokenSlugs && tokenSlugs.length > LIST_SLICE;\n\n  const currentContainerHeight = useMemo(() => {\n    if (!withAbsolutePositioning || !viewportSlugs?.length || viewportIndex < 0) return undefined;\n\n    return (viewportIndex + viewportSlugs.length) * TOKEN_HEIGHT_REM;\n  }, [viewportIndex, viewportSlugs?.length, withAbsolutePositioning]);\n\n  useLayoutEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    setExtraStyles(container, {\n      height: currentContainerHeight && !isLandscape ? `${currentContainerHeight}rem` : '',\n    });\n  }, [isLandscape, currentContainerHeight]);\n\n  const handleOpenTokenSettings = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.Assets });\n  });\n\n  const stateByTokenSlug = buildCollectionByKey(states ?? [], 'tokenSlug');\n\n  function renderVestingToken() {\n    return (\n      <Token\n        ref={vestingTokenRef}\n        key=\"vesting\"\n        token={userMycoin!}\n        vestingStatus={vestingStatus}\n        unfreezeEndDate={unfreezeEndDate}\n        amount={vestingAmount}\n        isInvestorView={isInvestorViewEnabled}\n        baseCurrency={baseCurrency}\n        appTheme={appTheme}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        onClick={onVestingTokenClick}\n      />\n    );\n  }\n\n  function renderStakedTokens() {\n    return Object.values(stakedTokens).map(({ state, token }) => {\n      const { id, annualYield, yieldType } = state;\n      const stakingStatus = getStakingStateStatus(state);\n      const stakingBalance = getFullStakingBalance(state);\n\n      return (\n        <Token\n          key={`staking-${id}`}\n          token={token}\n          stakingStatus={stakingStatus}\n          annualYield={annualYield}\n          yieldType={yieldType}\n          amount={toDecimal(stakingBalance, token.decimals)}\n          isInvestorView={isInvestorViewEnabled}\n          baseCurrency={baseCurrency}\n          appTheme={appTheme}\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          withContextMenu\n          isViewMode={isViewMode}\n          isSwapDisabled={isSwapDisabled}\n          stakingState={state}\n          onClick={onStakedTokenClick}\n        />\n      );\n    });\n  }\n\n  function renderToken(token: UserToken, indexInViewport: number) {\n    const style = withAbsolutePositioning\n      ? `position: absolute; top: ${(viewportIndex + indexInViewport) * TOKEN_HEIGHT_REM}rem`\n      : undefined;\n\n    const {\n      annualYield,\n      yieldType,\n    } = (!(token.slug in stakedTokens) && stateByTokenSlug[token.slug]) || {};\n    const isStakingAvailable = Boolean(!isStakingDisabled && stateByTokenSlug[token.slug]);\n    const isSwapAvailable = Boolean(swapTokensBySlug[token.slug]);\n\n    return (\n      <Token\n        classNames=\"token-list-item\"\n        style={style}\n        key={token.slug}\n        token={token}\n        annualYield={annualYield}\n        yieldType={yieldType}\n        isInvestorView={isInvestorViewEnabled}\n        isActive={token.slug === currentTokenSlug}\n        baseCurrency={baseCurrency}\n        withChainIcon={isMultichainAccount}\n        appTheme={appTheme}\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        withContextMenu\n        isViewMode={isViewMode}\n        isStakingAvailable={isStakingAvailable}\n        isSwapDisabled={isSwapDisabled || !isSwapAvailable}\n        onClick={onTokenClick}\n      />\n    );\n  }\n\n  const isEmpty = !shouldRenderVestingToken && !shouldRenderStakedTokens && !tokenSlugs?.length;\n\n  if (isEmpty) {\n    return (\n      <div className={styles.noTokens}>\n        <AnimatedIconWithPreview\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_SMALL_SIZE_PX}\n          nonInteractive\n          noLoop={false}\n          className={styles.sticker}\n        />\n        <div className={styles.noTokensText}>\n          <span className={styles.noTokensHeader}>{lang('No tokens yet')}</span>\n          <span className={styles.noTokensDescription}>{lang('$no_tokens_description')}</span>\n          <Button\n            onClick={handleOpenTokenSettings}\n            isPrimary\n            isSmall\n            className={styles.openSettingsButton}\n          >\n            {lang('Add Tokens')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      ref={containerRef}\n      className={buildClassName(\n        styles.wrapper,\n        isSeparatePanel && !renderedTokens && styles.wrapperLoading,\n      )}\n      scrollContainerClosest={getScrollContainerClosestSelector(isActive, isPortrait)}\n      items={viewportSlugs}\n      itemSelector=\".token-list-item\"\n      withAbsolutePositioning={withAbsolutePositioning}\n      maxHeight={currentContainerHeight === undefined ? undefined : `${currentContainerHeight}rem`}\n      onLoadMore={getMore}\n    >\n      {!renderedTokens && (\n        <div key=\"loading\" className={isSeparatePanel ? styles.emptyListSeparate : styles.emptyList}>\n          <Spinner />\n        </div>\n      )}\n      {shouldRenderVestingToken && renderVestingToken()}\n      {shouldRenderStakedTokens && renderStakedTokens()}\n      {viewportSlugs?.map((tokenSlug, i) => renderToken(tokensBySlug![tokenSlug], i))}\n    </InfiniteScroll>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId!;\n      const tokens = selectCurrentAccountTokens(global);\n      const swapTokens = selectSwapTokens(global);\n      const accountState = selectCurrentAccountState(global);\n      const { isInvestorViewEnabled } = global.settings;\n\n      const states = selectAccountStakingStates(global, accountId);\n      const isViewMode = selectIsCurrentAccountViewMode(global);\n\n      return {\n        tokens,\n        swapTokens,\n        vesting: accountState?.vesting?.info,\n        isInvestorViewEnabled,\n        currentTokenSlug: accountState?.currentTokenSlug,\n        baseCurrency: global.settings.baseCurrency,\n        mycoin: selectMycoin(global),\n        isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n        isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n        theme: global.settings.theme,\n        states,\n        isViewMode,\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Assets),\n);\n","import { useEffect, useMemo } from '../lib/teact/teact';\nimport { getActions } from '../global';\n\nimport type { ApiVestingInfo } from '../api/types';\nimport type { UserToken } from '../global/types';\n\nimport { calcVestingAmountByStatus } from '../components/main/helpers/calcVestingAmountByStatus';\nimport useLastCallback from './useLastCallback';\nimport useShowTransition from './useShowTransition';\n\nexport default function useVesting(\n  { vesting, userMycoin, isDisabled }: {\n    vesting?: ApiVestingInfo[];\n    userMycoin?: UserToken;\n    isDisabled?: boolean;\n  },\n) {\n  const { loadMycoin, openVestingModal } = getActions();\n\n  const hasVesting = !isDisabled && Boolean(vesting?.length);\n  const isMycoinLoaded = Boolean(userMycoin);\n\n  useEffect(() => {\n    if (isMycoinLoaded || !hasVesting) return;\n\n    loadMycoin();\n  }, [hasVesting, isMycoinLoaded]);\n\n  const amount = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    return calcVestingAmountByStatus(vesting, ['frozen', 'ready']);\n  }, [hasVesting, vesting]);\n\n  const unfreezeEndDate = useMemo(() => {\n    if (!hasVesting) return undefined;\n\n    for (const { parts } of vesting) {\n      for (const part of parts) {\n        if (part.status === 'ready') {\n          return new Date(part.timeEnd).getTime();\n        }\n      }\n    }\n\n    return undefined;\n  }, [hasVesting, vesting]);\n\n  const {\n    shouldRender,\n    ref,\n  } = useShowTransition<HTMLButtonElement>({\n    isOpen: Boolean(hasVesting && isMycoinLoaded && userMycoin && amount !== '0'),\n    withShouldRender: true,\n  });\n\n  const onVestingTokenClick = useLastCallback(() => {\n    openVestingModal();\n  });\n\n  return {\n    shouldRender,\n    ref,\n    amount,\n    vestingStatus: unfreezeEndDate ? 'readyToUnfreeze' as const : 'frozen' as const,\n    unfreezeEndDate,\n    onVestingTokenClick,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"aKYq5U9K\",\"backButton\":\"_XXYEoWI\",\"backIcon\":\"bCLB_xx7\",\"content\":\"ADFSqjjF\",\"title\":\"L1JCMSY4\",\"amount\":\"hsn7RdaK\",\"menuButton\":\"vvSB5YmR\",\"menu\":\"X205Pp2C\",\"menuItem\":\"S3NdyNSK\",\"menuItemDescription\":\"lRocmYkd\",\"sendAllButton\":\"PREqGxPp\",\"burnAllButton\":\"AsupPLFP\",\"buttonIcon\":\"clmFLMte\"};","import React, { memo, useEffect, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  NFT_FRAGMENT_COLLECTIONS,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n  TON_DNS_COLLECTION,\n} from '../../../../config';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { getDomainsExpirationDate } from '../../../../util/dns';\nimport { compact } from '../../../../util/iteratees';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getExplorerName, getExplorerNftCollectionUrl } from '../../../../util/url';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ntype MenuHandler = 'sendAll' | 'fragment' | 'getgems' | 'tonExplorer' | 'hideAll' | 'burnAll' | 'selectAll'\n  | 'removeTab' | 'addTab' | 'renew';\n\ninterface StateProps {\n  currentCollectionAddress?: string;\n  nfts?: Record<string, ApiNft>;\n  isTestnet?: boolean;\n  isViewMode?: boolean;\n  collectionTabs?: string[];\n  dnsExpiration?: Record<string, number>;\n}\n\nfunction NftCollectionHeader({\n  currentCollectionAddress,\n  nfts,\n  isTestnet,\n  isViewMode,\n  collectionTabs,\n  dnsExpiration,\n}: StateProps) {\n  const {\n    closeNftCollection,\n    selectNfts,\n    startTransfer,\n    burnNfts,\n    openHideNftModal,\n    addCollectionTab,\n    removeCollectionTab,\n    openDomainRenewalModal,\n  } = getActions();\n\n  const lang = useLang();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n  const ref = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n\n  const isTelegramGifts = currentCollectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION;\n\n  const collectionNfts = useMemo(() => {\n    if (!currentCollectionAddress || !nfts) {\n      return [];\n    }\n\n    return Object.values(nfts).filter((nft) => {\n      return (isTelegramGifts && nft.isTelegramGift) || nft.collectionAddress === currentCollectionAddress;\n    });\n  }, [currentCollectionAddress, isTelegramGifts, nfts]);\n\n  const dnsExpireInDays = useMemo(() => {\n    if (currentCollectionAddress !== TON_DNS_COLLECTION) return undefined;\n    const date = getDomainsExpirationDate(collectionNfts, undefined, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [collectionNfts, currentCollectionAddress, dnsExpiration]);\n\n  const collectionName = isTelegramGifts\n    ? lang('Telegram Gifts')\n    : collectionNfts[0].collectionName ?? lang('Unnamed Collection');\n\n  const menuItems: DropdownItem<MenuHandler>[] = useMemo(() => {\n    const isInTabs = collectionTabs?.includes(currentCollectionAddress!);\n\n    return compact([\n      !isViewMode && {\n        name: 'Send All',\n        value: 'sendAll',\n      } satisfies DropdownItem<MenuHandler>,\n      collectionNfts[0].isOnFragment && {\n        name: 'Fragment',\n        value: 'fragment',\n        fontIcon: 'external',\n      } satisfies DropdownItem<MenuHandler>,\n      {\n        name: 'Getgems',\n        value: 'getgems',\n        fontIcon: 'external',\n      },\n      !isTelegramGifts && {\n        name: getExplorerName('ton'),\n        value: 'tonExplorer',\n        fontIcon: 'external',\n      },\n      !isViewMode && currentCollectionAddress === TON_DNS_COLLECTION && {\n        name: collectionNfts.length > 1 ? 'Renew All' : 'Renew',\n        value: 'renew',\n        description: dnsExpireInDays && dnsExpireInDays < 0\n          ? (collectionNfts.length > 1 ? '$expired_many' : 'Expired')\n          : lang('$expires_in %days%', {\n            days: lang('$in_days', dnsExpireInDays),\n          }, undefined, collectionNfts.length) as string,\n      } satisfies DropdownItem<MenuHandler>,\n      !IS_CORE_WALLET && {\n        name: 'Hide All',\n        value: 'hideAll',\n      } satisfies DropdownItem<MenuHandler>,\n      !isViewMode && {\n        name: 'Burn All',\n        value: 'burnAll',\n        isDangerous: true,\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Select All',\n        value: 'selectAll',\n        withDelimiter: true,\n      },\n      {\n        name: isInTabs ? lang('Remove Tab') : lang('Add Tab'),\n        value: isInTabs ? 'removeTab' : 'addTab',\n      },\n    ]);\n  }, [collectionNfts, collectionTabs, currentCollectionAddress, dnsExpireInDays, isTelegramGifts, isViewMode, lang]);\n\n  useHistoryBack({\n    isActive: true,\n    onBack: closeNftCollection,\n  });\n\n  useEffect(() => captureEscKeyListener(closeNftCollection), []);\n\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    switch (value) {\n      case 'sendAll': {\n        startTransfer({\n          nfts: collectionNfts.filter(({ isOnSale }) => !isOnSale),\n          isPortrait: getIsPortrait(),\n        });\n\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        void openUrl(\n          isTelegramGifts ? `${getgemsBaseUrl}top-gifts` : `${getgemsBaseUrl}collection/${currentCollectionAddress}`,\n        );\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftCollectionUrl(currentCollectionAddress, isTestnet);\n        if (url) {\n          void openUrl(url);\n        }\n\n        break;\n      }\n\n      case 'fragment': {\n        if (isTelegramGifts) {\n          void openUrl('https://fragment.com/gifts');\n        } else if (currentCollectionAddress === NFT_FRAGMENT_COLLECTIONS[0]) {\n          void openUrl('https://fragment.com/numbers');\n        } else if (currentCollectionAddress === NFT_FRAGMENT_COLLECTIONS[1]) {\n          void openUrl('https://fragment.com');\n        } else {\n          const collectionSlug = collectionName.toLowerCase().replace(/\\W/g, '').replace(/s$/, '');\n          void openUrl(`https://fragment.com/gifts/${collectionSlug}`);\n        }\n\n        break;\n      }\n\n      case 'selectAll': {\n        selectNfts({\n          addresses: collectionNfts\n            .filter(({ isOnSale }) => !isOnSale)\n            .map(({ address }) => address),\n        });\n\n        break;\n      }\n\n      case 'burnAll': {\n        burnNfts({ nfts: collectionNfts.filter(({ isOnSale }) => !isOnSale) });\n\n        break;\n      }\n\n      case 'hideAll': {\n        openHideNftModal({ addresses: collectionNfts.map((nft) => nft.address), isCollection: true });\n\n        break;\n      }\n\n      case 'addTab': {\n        addCollectionTab({ collectionAddress: currentCollectionAddress! });\n\n        break;\n      }\n\n      case 'removeTab': {\n        closeNftCollection();\n        removeCollectionTab({ collectionAddress: currentCollectionAddress! });\n\n        break;\n      }\n\n      case 'renew': {\n        openDomainRenewalModal({ addresses: collectionNfts.map((nft) => nft.address) });\n        break;\n      }\n    }\n  });\n\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleMenuClose = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button\n        isSimple\n        isText\n        ariaLabel={lang('Back')}\n        className={styles.backButton}\n        onClick={closeNftCollection}\n      >\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n      </Button>\n\n      <div className={styles.content}>\n        <div className={styles.title}>{collectionName}</div>\n        <div className={styles.amount}>\n          {collectionNfts.length > 1 ? lang('%amount% NFTs', { amount: collectionNfts.length }) : lang('1 NFT')}\n        </div>\n      </div>\n\n      <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n        <i className=\"icon-menu-dots\" aria-hidden />\n      </Button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        ref={menuRef}\n        withPortal\n        shouldTranslateOptions\n        menuPositionX=\"right\"\n        menuAnchor={menuAnchor}\n        getTriggerElement={getTriggerElement}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        buttonClassName={styles.menuItem}\n        bubbleClassName={styles.menu}\n        itemDescriptionClassName={styles.menuItemDescription}\n        items={menuItems}\n        onSelect={handleMenuItemClick}\n        onClose={handleMenuClose}\n      />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    byAddress: nfts,\n    currentCollectionAddress,\n    collectionTabs,\n    dnsExpiration,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    currentCollectionAddress,\n    nfts,\n    isTestnet: global.settings.isTestnet,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    collectionTabs,\n    dnsExpiration,\n  };\n}, (global, ownProps, stickToFirst) => {\n  const {\n    currentCollectionAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return stickToFirst(currentCollectionAddress);\n})(NftCollectionHeader));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Radio.module.scss';\n\ninterface OwnProps {\n  id?: string;\n  name: string;\n  value: string;\n  className?: string;\n  isChecked?: boolean;\n  onChange?: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nfunction Radio({\n  id, name, value, isChecked, className, onChange,\n}: OwnProps) {\n  return (\n    <div className={buildClassName(styles.root, className, isChecked && styles.checked)}>\n      <input\n        id={id}\n        type=\"radio\"\n        name={name}\n        className=\"visually-hidden\"\n        value={value}\n        checked={isChecked}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nexport default memo(Radio);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"OyHWXuOj\",\"checked\":\"BCTrjQeD\"};","import { useEffect, useState } from '../lib/teact/teact';\n\n// Use previous value during animation without checking for presence\nexport function usePrevDuringAnimationSimple<T>(current: T, durationMs: number = 300): T {\n  const [prev, setPrev] = useState<T>(current);\n\n  useEffect(() => {\n    if (current === prev) return undefined;\n    const timeoutId = window.setTimeout(() => {\n      setPrev(current);\n    }, durationMs);\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [current, durationMs, prev]);\n\n  return prev;\n}\n","import type React from '../../../lib/teact/teact';\nimport { useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal } from '../../../global';\n\nimport type { ApiNft } from '../../../api/types';\nimport type { DropdownItem } from '../../ui/Dropdown';\n\nimport {\n  GETGEMS_BASE_MAINNET_URL,\n  GETGEMS_BASE_TESTNET_URL,\n  IS_CORE_WALLET,\n  MTW_CARDS_COLLECTION,\n} from '../../../config';\nimport { isTonDnsNft } from '../../../util/dns';\nimport { compact } from '../../../util/iteratees';\nimport { openUrl } from '../../../util/openUrl';\nimport { getExplorerName, getExplorerNftUrl } from '../../../util/url';\n\nimport { getIsPortrait } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nexport type NftMenuHandler = 'send' | 'tondns' | 'fragment' | 'getgems' | 'tonExplorer' | 'collection' | 'hide'\n  | 'unhide' | 'not_scam' | 'burn' | 'select' | 'installCard' | 'resetCard' | 'installAccentColor' | 'resetAccentColor'\n  | 'renew' | 'linkDomain';\n\nconst ON_SALE_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Cannot be sent',\n  value: 'send',\n  description: 'NFT is for sale',\n  isDisabled: true,\n};\nconst TON_DNS_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Configure DNS',\n  value: 'tondns',\n  fontIcon: 'external',\n};\nconst SEND_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Send',\n  value: 'send',\n};\nconst FRAGMENT_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Fragment',\n  value: 'fragment',\n  fontIcon: 'external',\n};\nconst GETGEMS_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Getgems',\n  value: 'getgems',\n  fontIcon: 'external',\n};\nconst TON_EXPLORER_ITEM: DropdownItem<NftMenuHandler> = {\n  name: getExplorerName('ton'),\n  value: 'tonExplorer',\n  fontIcon: 'external',\n};\nconst COLLECTION_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Collection',\n  value: 'collection',\n};\nconst HIDE_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Hide',\n  value: 'hide',\n};\nconst RENEW_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Renew',\n  value: 'renew',\n};\nconst NOT_SCAM: DropdownItem<NftMenuHandler> = {\n  name: 'Not Scam',\n  value: 'not_scam',\n};\nconst UNHIDE: DropdownItem<NftMenuHandler> = {\n  name: 'Unhide',\n  value: 'unhide',\n};\nconst BURN_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Burn',\n  value: 'burn',\n  isDangerous: true,\n};\nconst SELECT_ITEM: DropdownItem<NftMenuHandler> = {\n  name: 'Select',\n  value: 'select',\n  withDelimiter: true,\n};\nconst INSTALL_CARD: DropdownItem<NftMenuHandler> = {\n  name: 'Install Card',\n  value: 'installCard',\n};\nconst RESET_CARD: DropdownItem<NftMenuHandler> = {\n  name: 'Reset Card',\n  value: 'resetCard',\n};\nconst INSTALL_ACCENT_COLOR: DropdownItem<NftMenuHandler> = {\n  name: 'Apply Palette',\n  value: 'installAccentColor',\n};\nconst RESET_ACCENT_COLOR: DropdownItem<NftMenuHandler> = {\n  name: 'Reset Palette',\n  value: 'resetAccentColor',\n};\nconst LINK_TO_ADDRESS: DropdownItem<NftMenuHandler> = {\n  name: 'Link to Wallet',\n  value: 'linkDomain',\n};\nconst CHANGE_LINKED_ADDRESS: DropdownItem<NftMenuHandler> = {\n  name: 'Change Wallet',\n  value: 'linkDomain',\n};\n\nexport default function useNftMenu({\n  nft,\n  isViewMode,\n  dnsExpireInDays,\n  linkedAddress,\n  isNftBlacklisted,\n  isNftWhitelisted,\n  isNftInstalled,\n  isNftAccentColorInstalled,\n}: {\n  nft?: ApiNft;\n  isViewMode: boolean;\n  dnsExpireInDays?: number;\n  linkedAddress?: string;\n  isNftBlacklisted?: boolean;\n  isNftWhitelisted?: boolean;\n  isNftInstalled?: boolean;\n  isNftAccentColorInstalled?: boolean;\n}) {\n  const {\n    startTransfer,\n    selectNfts,\n    openNftCollection,\n    burnNfts,\n    addNftsToBlacklist,\n    addNftsToWhitelist,\n    closeMediaViewer,\n    closeNftAttributesModal,\n    openUnhideNftModal,\n    setCardBackgroundNft,\n    clearCardBackgroundNft,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n    openDomainRenewalModal,\n    openDomainLinkingModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  function closeOverlays() {\n    closeMediaViewer();\n    closeNftAttributesModal();\n  }\n\n  const handleMenuItemSelect = useLastCallback((\n    value: NftMenuHandler,\n    e?: React.MouseEvent,\n  ) => {\n    const { isTestnet } = getGlobal().settings;\n    const isExternal = e?.shiftKey || e?.ctrlKey || e?.metaKey;\n\n    switch (value) {\n      case 'send': {\n        startTransfer({\n          isPortrait: getIsPortrait(),\n          nfts: [nft!],\n        });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'tonExplorer': {\n        const url = getExplorerNftUrl(nft!.address, isTestnet)!;\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'getgems': {\n        const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n        const getgemsUrl = nft!.collectionAddress\n          ? `${getgemsBaseUrl}collection/${nft!.collectionAddress}/${nft!.address}`\n          : `${getgemsBaseUrl}nft/${nft!.address}`;\n\n        void openUrl(getgemsUrl, { isExternal });\n        break;\n      }\n\n      case 'tondns': {\n        const url = `https://dns.ton.org/#${(nft!.name || '').replace(/\\.ton$/i, '')}`;\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'installCard': {\n        setCardBackgroundNft({ nft: nft! });\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetCard': {\n        clearCardBackgroundNft();\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'installAccentColor': {\n        installAccentColorFromNft({ nft: nft! });\n        break;\n      }\n\n      case 'resetAccentColor': {\n        clearAccentColorFromNft();\n        break;\n      }\n\n      case 'fragment': {\n        let url: string;\n        const { collectionName, name, metadata: { fragmentUrl } } = nft!;\n\n        if (fragmentUrl) {\n          url = fragmentUrl;\n        } else if (collectionName?.toLowerCase().includes('numbers')) {\n          url = `https://fragment.com/number/${name?.replace(/[^0-9]/g, '')}`;\n        } else {\n          url = `https://fragment.com/username/${encodeURIComponent(name?.substring(1) || '')}`;\n        }\n\n        void openUrl(url, { isExternal });\n        break;\n      }\n\n      case 'collection': {\n        openNftCollection({ address: nft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'hide': {\n        addNftsToBlacklist({ addresses: [nft!.address] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'not_scam': {\n        openUnhideNftModal({ address: nft!.address, name: nft!.name });\n\n        break;\n      }\n\n      case 'unhide': {\n        addNftsToWhitelist({ addresses: [nft!.address] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'burn': {\n        burnNfts({ nfts: [nft!] });\n        closeOverlays();\n\n        break;\n      }\n\n      case 'select': {\n        selectNfts({ addresses: [nft!.address] });\n        break;\n      }\n\n      case 'renew': {\n        openDomainRenewalModal({ addresses: [nft!.address] });\n        break;\n      }\n\n      case 'linkDomain': {\n        openDomainLinkingModal({ address: nft!.address });\n        break;\n      }\n    }\n  });\n\n  const menuItems: DropdownItem<NftMenuHandler>[] = useMemo(() => {\n    if (!nft) return [];\n\n    const {\n      collectionAddress, isOnSale, isOnFragment, isScam,\n    } = nft;\n    const isTonDns = isTonDnsNft(nft);\n    const isCard = !IS_CORE_WALLET && nft.collectionAddress === MTW_CARDS_COLLECTION;\n\n    return compact([\n      !isViewMode && (isOnSale ? ON_SALE_ITEM : SEND_ITEM),\n      !isViewMode && isTonDns && !isOnSale && dnsExpireInDays !== undefined && {\n        ...RENEW_ITEM,\n        description: dnsExpireInDays < 0\n          ? 'Expired'\n          : lang('$expires_in %days%', { days: lang('$in_days', dnsExpireInDays) }, undefined, 1),\n      },\n      !isViewMode && isTonDns && !isOnSale && (linkedAddress ? CHANGE_LINKED_ADDRESS : LINK_TO_ADDRESS),\n      !IS_CORE_WALLET && ((!isScam && !isNftBlacklisted) || isNftWhitelisted) && HIDE_ITEM,\n      !IS_CORE_WALLET && isScam && !isNftWhitelisted && NOT_SCAM,\n      !IS_CORE_WALLET && !isScam && isNftBlacklisted && UNHIDE,\n      ...(!isOnSale && !isViewMode ? [\n        BURN_ITEM,\n        SELECT_ITEM,\n      ] : []),\n      collectionAddress && COLLECTION_ITEM,\n      isTonDns && !isViewMode && TON_DNS_ITEM,\n      ...(isCard ? [!isNftInstalled ? INSTALL_CARD : RESET_CARD] : []),\n      ...(isCard ? [!isNftAccentColorInstalled ? INSTALL_ACCENT_COLOR : RESET_ACCENT_COLOR] : []),\n\n      isOnFragment && FRAGMENT_ITEM,\n      GETGEMS_ITEM,\n      TON_EXPLORER_ITEM,\n    ]);\n  }, [\n    nft, isViewMode, dnsExpireInDays, lang, linkedAddress, isNftBlacklisted,\n    isNftWhitelisted, isNftInstalled, isNftAccentColorInstalled,\n  ]);\n\n  return { menuItems, handleMenuItemSelect };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"Zwrm7aDb\",\"icon\":\"lGtsxpv1\",\"menu\":\"Pc0Y7YGI\",\"contextMenu\":\"kuj1PIIl\",\"menuBubble\":\"UhvMK8mg\",\"item\":\"AZjbQROQ\",\"menuItemDescription\":\"XbyfBxfu\"};","import type { ElementRef } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { IAnchorPosition } from '../../../../global/types';\nimport type { Layout } from '../../../../hooks/useMenuPosition';\n\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectTonDnsLinkedAddress,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { vibrate } from '../../../../util/haptics';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from '../../../mediaViewer/hooks/useNftMenu';\n\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../../../ui/Menu';\n\nimport styles from './NftMenu.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  ref?: ElementRef<HTMLButtonElement>;\n  isContextMenuMode?: boolean;\n  dnsExpireInDays?: number;\n  menuAnchor?: IAnchorPosition;\n  className?: string;\n  onOpen: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  onCloseAnimationEnd?: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  linkedAddress?: string;\n}\n\nconst CONTEXT_MENU_VERTICAL_SHIFT_PX = 4;\n\nfunction NftMenu({\n  isViewMode,\n  isContextMenuMode,\n  nft,\n  ref,\n  dnsExpireInDays,\n  linkedAddress,\n  menuAnchor,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n  className,\n  onOpen,\n  onClose,\n  onCloseAnimationEnd,\n}: OwnProps & StateProps) {\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft,\n    isViewMode,\n    dnsExpireInDays,\n    linkedAddress,\n    isNftBlacklisted,\n    isNftWhitelisted,\n    isNftInstalled,\n    isNftAccentColorInstalled,\n  });\n  let buttonRef = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const isOpen = Boolean(menuAnchor);\n  if (ref) {\n    buttonRef = ref;\n  }\n\n  const getTriggerElement = useLastCallback(() => buttonRef.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback((): Layout => ({\n    withPortal: true,\n    topShiftY: isContextMenuMode ? CONTEXT_MENU_VERTICAL_SHIFT_PX : 0,\n    preferredPositionX: isContextMenuMode ? 'left' : 'right',\n  }));\n\n  const lang = useLang();\n\n  const handleButtonClick = (e: React.MouseEvent) => {\n    stopEvent(e);\n\n    if (isOpen) {\n      onClose();\n    } else {\n      void vibrate();\n      onOpen();\n    }\n  };\n\n  return (\n    <>\n      <button\n        ref={buttonRef}\n        type=\"button\"\n        className={buildClassName(styles.button, className)}\n        aria-label={lang('NFT Menu')}\n        onClick={handleButtonClick}\n      >\n        <i className={buildClassName(styles.icon, 'icon-menu-dots')} aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isOpen}\n        ref={menuRef}\n        withPortal\n        menuAnchor={menuAnchor}\n        menuPositionX=\"right\"\n        getTriggerElement={!isContextMenuMode ? getTriggerElement : undefined}\n        getRootElement={getRootElement}\n        getMenuElement={getMenuElement}\n        getLayout={getLayout}\n        items={menuItems}\n        shouldTranslateOptions\n        className={isContextMenuMode ? styles.contextMenu : styles.menu}\n        bubbleClassName={styles.menuBubble}\n        buttonClassName={styles.item}\n        itemDescriptionClassName={styles.menuItemDescription}\n        shouldCleanup\n        onClose={onClose}\n        onCloseAnimationEnd={onCloseAnimationEnd}\n        onSelect={handleMenuItemSelect}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { nft }): StateProps => {\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n  const linkedAddress = selectTonDnsLinkedAddress(global, nft);\n\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    cardBackgroundNft,\n    accentColorNft,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    linkedAddress,\n  };\n})(NftMenu));\n","// extracted by mini-css-extract-plugin\nexport default {\"emptyList\":\"ITYna3lB\",\"emptyListContent\":\"VvA3zcqe\",\"emptyListTitle\":\"dfDaqpor\",\"emptyListText\":\"T93VHAYd\",\"emptyListLoading\":\"AmFNUCBn\",\"emptyListButton\":\"MQHqPBS8\",\"sticker\":\"e1KDXttI\",\"list\":\"dpiMguJa\",\"landscapeList\":\"UaTzvOas\",\"item\":\"wdIabR9U\",\"image\":\"P5UTNS9t\",\"item_onSale\":\"TcBQN9hf\",\"itemOnSale\":\"TcBQN9hf\",\"nonInteractive\":\"O3ePb4wF\",\"itemWithMenu\":\"AFzPXqVX\",\"imageWrapper\":\"wvB9itFX\",\"warning\":\"qtSm9QOQ\",\"imageSelected\":\"xeApkBtH\",\"fullImage\":\"tWs_EVqC\",\"warningBlock\":\"VpqrQ0wB\",\"infoWrapper\":\"v0SE1VHL\",\"title\":\"KokxXqZI\",\"collection\":\"_xEjK2pw\",\"radio\":\"VqbpRLGL\",\"notcoinVoucherButton\":\"GIjQ3tN4\",\"notcoinVoucherIcon\":\"mfxV4144\"};","import React, {\n  type ElementRef,\n  memo, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport type { ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { TON_DNS_RENEWAL_NFT_WARNING_DAYS } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { vibrate } from '../../../../util/haptics';\nimport { shortenAddress } from '../../../../util/shortenAddress';\nimport { IS_ANDROID, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport useContextMenuHandlers from '../../../../hooks/useContextMenuHandlers';\nimport useFlag from '../../../../hooks/useFlag';\nimport { useIsIntersecting } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Image from '../../../ui/Image';\nimport Radio from '../../../ui/Radio';\nimport NftMenu from './NftMenu';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  selectedAddresses?: string[];\n  observeIntersection: ObserveFn;\n  tonDnsExpiration?: number;\n  isViewAccount?: boolean;\n}\n\ninterface UseLottieReturnType {\n  isLottie: boolean;\n  shouldPlay?: boolean;\n  noLoop?: boolean;\n  markHover?: NoneToVoidFunction;\n  unmarkHover?: NoneToVoidFunction;\n}\n\nfunction Nft({\n  nft,\n  selectedAddresses,\n  tonDnsExpiration,\n  observeIntersection,\n  isViewAccount,\n}: OwnProps) {\n  const {\n    selectNfts,\n    clearNftSelection,\n    openDomainRenewalModal,\n    openNftAttributesModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const ref = useRef<HTMLDivElement>();\n\n  const {\n    isLottie, shouldPlay, noLoop, markHover, unmarkHover,\n  } = useLottie(nft, ref, observeIntersection);\n\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isSelectionEnabled = !!selectedAddresses && selectedAddresses.length > 0;\n  const isSelected = useMemo(() => selectedAddresses?.includes(nft.address), [selectedAddresses, nft.address]);\n  const isMenuOpen = Boolean(menuAnchor);\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const isDnsExpireSoon = dnsExpireInDays !== undefined ? dnsExpireInDays <= TON_DNS_RENEWAL_NFT_WARNING_DAYS : false;\n  const {\n    shouldRender: shouldRenderWarning,\n    ref: warningRef,\n  } = useShowTransition({\n    isOpen: isSelectionEnabled && nft.isOnSale,\n    withShouldRender: true,\n  });\n\n  const {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuHide,\n    handleContextMenuClose,\n  } = useContextMenuHandlers({\n    elementRef: ref,\n  });\n\n  const fullClassName = buildClassName(\n    styles.item,\n    !isSelectionEnabled && nft.isOnSale && styles.item_onSale,\n    isMenuOpen && styles.itemWithMenu,\n    isSelectionEnabled && nft.isOnSale && styles.nonInteractive,\n  );\n\n  function handleClick() {\n    if (isSelectionEnabled) {\n      if (isSelected) {\n        clearNftSelection({ address: nft.address });\n      } else {\n        selectNfts({ addresses: [nft.address] });\n      }\n      return;\n    }\n\n    void vibrate();\n    openNftAttributesModal({ nft });\n  }\n\n  function handleRenewDomainClick(e: React.MouseEvent) {\n    stopEvent(e);\n\n    openDomainRenewalModal({ addresses: [nft.address] });\n  }\n\n  const handleOpenContextMenu = useLastCallback(() => {\n    setMenuAnchor(contextMenuAnchor);\n  });\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuAnchor(undefined);\n    handleContextMenuClose();\n  });\n\n  useSyncEffect(() => {\n    if (isContextMenuOpen) {\n      handleOpenContextMenu();\n    } else {\n      handleCloseMenu();\n    }\n  }, [isContextMenuOpen]);\n\n  function renderDnsExpireWarning() {\n    return (\n      <button\n        type=\"button\"\n        className={buildClassName(styles.warningBlock, isViewAccount && styles.nonInteractive)}\n        onClick={!isViewAccount ? handleRenewDomainClick : undefined}\n      >\n        {dnsExpireInDays! < 0\n          ? 'Expired'\n          : lang('$expires_in %days%', { days: lang('$in_days', dnsExpireInDays) }, undefined, 1)}\n      </button>\n    );\n  }\n\n  return (\n    <div\n      key={nft.address}\n      ref={ref}\n      className={fullClassName}\n      onMouseEnter={markHover}\n      onMouseLeave={unmarkHover}\n      onClick={!isSelectionEnabled || !nft.isOnSale ? handleClick : undefined}\n      onMouseDown={handleBeforeContextMenu}\n      onContextMenu={handleContextMenu}\n    >\n      {isSelectionEnabled && !nft.isOnSale && (\n        <Radio\n          isChecked={isSelected}\n          name=\"nft\"\n          value={nft.address}\n          className={styles.radio}\n        />\n      )}\n      {!isSelectionEnabled && (\n        <NftMenu\n          nft={nft}\n          isContextMenuMode={Boolean(contextMenuAnchor)}\n          dnsExpireInDays={dnsExpireInDays}\n          menuAnchor={menuAnchor}\n          onOpen={handleOpenMenu}\n          onClose={handleCloseMenu}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n      {isLottie ? (\n        <div\n          className={styles.imageWrapper}\n        >\n          <AnimatedIconWithPreview\n            shouldStretch\n            play={shouldPlay}\n            noLoop={noLoop}\n            tgsUrl={nft.metadata.lottie}\n            previewUrl={nft.thumbnail}\n            noPreviewTransition\n            className={buildClassName(styles.image, isSelected && styles.imageSelected)}\n          />\n          {isDnsExpireSoon && renderDnsExpireWarning()}\n        </div>\n      ) : (\n        <Image\n          url={nft.thumbnail}\n          className={styles.imageWrapper}\n          imageClassName={buildClassName(styles.image, isSelected && styles.imageSelected)}\n        >\n          {isDnsExpireSoon && renderDnsExpireWarning()}\n        </Image>\n      )}\n      {shouldRenderWarning && (\n        <div ref={warningRef} className={styles.warning}>\n          {lang('For sale. Cannot be sent and burned')}\n        </div>\n      )}\n      <div className={styles.infoWrapper}>\n        <b className={styles.title}>{nft.name || shortenAddress(nft.address, 4)}</b>\n      </div>\n      <div className={styles.collection}>{nft.collectionName}</div>\n    </div>\n  );\n}\n\nexport default memo(Nft);\n\nfunction useLottie(\n  nft: ApiNft,\n  ref: ElementRef<HTMLDivElement>,\n  observeIntersection: ObserveFn,\n): UseLottieReturnType {\n  const isLottie = Boolean(nft.metadata?.lottie);\n\n  const isIntersecting = useIsIntersecting(ref, isLottie ? observeIntersection : undefined);\n  const [isHover, markHover, unmarkHover] = useFlag();\n\n  if (!isLottie) {\n    return { isLottie };\n  }\n\n  const shouldPlay = isIntersecting || isHover;\n  const noLoop = !isHover;\n\n  return {\n    isLottie,\n    shouldPlay,\n    noLoop,\n    ...!(IS_IOS || IS_ANDROID) && {\n      markHover,\n      unmarkHover,\n    },\n  };\n}\n","import React, { memo, useEffect, useLayoutEffect, useMemo, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  NFT_MARKETPLACE_TITLE,\n  NFT_MARKETPLACE_URL,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../../config';\nimport renderText from '../../../../global/helpers/renderText';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getTonDnsExpirationDate } from '../../../../util/dns';\nimport { stopEvent } from '../../../../util/domEvents';\nimport { openUrl } from '../../../../util/openUrl';\nimport { getHostnameFromUrl } from '../../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../../ui/helpers/animatedAssets';\nimport { getScrollContainerClosestSelector } from '../../helpers/scrollableContainer';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport { useIntersectionObserver } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../../ui/AnimatedIconWithPreview';\nimport Spinner from '../../../ui/Spinner';\nimport Transition from '../../../ui/Transition';\nimport Nft from './Nft';\n\nimport styles from './Nft.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  selectedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  isNftBuyingDisabled?: boolean;\n  dnsExpiration?: Record<string, number>;\n  isViewAccount?: boolean;\n}\n\nconst INTERSECTION_THROTTLE = 200;\nconst INITIAL_SLICE_LENGTH = 50;\nconst SCROLL_THRESHOLD = 800;\n\nfunction Nfts({\n  isActive,\n  orderedAddresses,\n  selectedAddresses,\n  byAddress,\n  currentCollectionAddress,\n  dnsExpiration,\n  isNftBuyingDisabled,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  isViewAccount,\n}: OwnProps & StateProps) {\n  const { clearNftsSelection } = getActions();\n\n  const lang = useLang();\n  const containerRef = useRef<HTMLDivElement>();\n  const { isPortrait, isLandscape } = useDeviceScreen();\n  const hasSelection = Boolean(selectedAddresses?.length);\n  const [isScrolled, setIsScrolled] = useState(false);\n  const scrollContainerClosest = getScrollContainerClosestSelector(true, isPortrait) || '.nfts-container';\n\n  useEffect(clearNftsSelection, [clearNftsSelection, isActive, currentCollectionAddress]);\n  useEffect(() => (hasSelection ? captureEscKeyListener(clearNftsSelection) : undefined), [hasSelection]);\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    const result = orderedAddresses.reduce<ApiNft[]>((acc, address) => {\n      const nft = byAddress[address];\n\n      if (nft && (\n        !currentCollectionAddress\n        || nft.collectionAddress === currentCollectionAddress\n        || (currentCollectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION && nft.isTelegramGift)\n      ) && (\n        !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n      ) && (\n        !blacklistedNftAddressesSet.has(nft.address)\n      )) {\n        acc.push(nft);\n      }\n\n      return acc;\n    }, []);\n\n    return isScrolled ? result : result.slice(0, INITIAL_SLICE_LENGTH);\n  }, [\n    byAddress, currentCollectionAddress, orderedAddresses, blacklistedNftAddresses, whitelistedNftAddresses,\n    isScrolled,\n  ]);\n\n  const handleNativeScroll = useLastCallback(() => {\n    const closestScrollContainer = containerRef.current?.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer || isScrolled) {\n      return;\n    }\n\n    const { scrollTop, scrollHeight, clientHeight } = closestScrollContainer;\n    const distanceToBottom = scrollHeight - scrollTop - clientHeight;\n\n    if (distanceToBottom <= SCROLL_THRESHOLD) {\n      setIsScrolled(true);\n    }\n  });\n\n  useLayoutEffect(() => {\n    if (!scrollContainerClosest || !nfts?.length) return undefined;\n\n    const closestScrollContainer = containerRef.current?.closest<HTMLDivElement>(scrollContainerClosest);\n    if (!closestScrollContainer) return undefined;\n\n    closestScrollContainer.addEventListener('scroll', handleNativeScroll);\n\n    return () => {\n      closestScrollContainer.removeEventListener('scroll', handleNativeScroll);\n    };\n  }, [nfts?.length, scrollContainerClosest]);\n\n  const { observe: observeIntersection } = useIntersectionObserver({\n    throttleMs: INTERSECTION_THROTTLE,\n    isDisabled: !nfts?.length,\n  });\n\n  function handleNftMarketplaceClick(e: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n    stopEvent(e);\n\n    void openUrl(NFT_MARKETPLACE_URL, {\n      title: NFT_MARKETPLACE_TITLE,\n      subtitle: getHostnameFromUrl(NFT_MARKETPLACE_URL),\n    });\n  }\n\n  if (nfts === undefined) {\n    return (\n      <div className={buildClassName(styles.emptyList, styles.emptyListLoading)}>\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (nfts.length === 0) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          tgsUrl={ANIMATED_STICKERS_PATHS.happy}\n          previewUrl={ANIMATED_STICKERS_PATHS.happyPreview}\n          size={isPortrait ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_BIG_SIZE_PX}\n          className={styles.sticker}\n          noLoop={false}\n          nonInteractive\n        />\n        <div className={styles.emptyListContent}>\n          <p className={styles.emptyListTitle}>{lang('No NFTs yet')}</p>\n          {!isNftBuyingDisabled && (\n            <>\n              <p className={styles.emptyListText}>\n                {renderText(lang('$nft_explore_offer'), isPortrait ? ['simple_markdown'] : undefined)}\n              </p>\n              <button type=\"button\" className={styles.emptyListButton} onClick={handleNftMarketplaceClick}>\n                {lang('Open %nft_marketplace%', { nft_marketplace: NFT_MARKETPLACE_TITLE })}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Transition\n      ref={containerRef}\n      name=\"fade\"\n      activeKey={nfts.length}\n      shouldCleanup\n      slideClassName={buildClassName(styles.list, isLandscape && styles.landscapeList)}\n    >\n      {nfts.map((nft) => (\n        <Nft\n          key={nft.address}\n          nft={nft}\n          selectedAddresses={selectedAddresses}\n          tonDnsExpiration={getTonDnsExpirationDate(nft, dnsExpiration)}\n          isViewAccount={isViewAccount}\n          observeIntersection={observeIntersection}\n        />\n      ))}\n    </Transition>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const {\n        orderedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        selectedAddresses,\n        dnsExpiration,\n      } = selectCurrentAccountState(global)?.nfts || {};\n      const { isNftBuyingDisabled } = global.restrictions;\n\n      const {\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n      } = selectCurrentAccountState(global) || {};\n\n      return {\n        orderedAddresses,\n        selectedAddresses,\n        byAddress,\n        currentCollectionAddress,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        isNftBuyingDisabled,\n        dnsExpiration,\n        isViewAccount: selectIsCurrentAccountViewMode(global),\n      };\n    },\n    (global, _, stickToFirst) => {\n      const {\n        currentCollectionAddress,\n      } = selectCurrentAccountState(global)?.nfts || {};\n\n      return stickToFirst(`${global.currentAccountId}_${currentCollectionAddress || 'all'}`);\n    },\n  )(Nfts),\n);\n","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\nimport { type IAnchorPosition } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { getDomainsExpirationDate, isTonDnsNft } from '../../../../util/dns';\nimport { compact } from '../../../../util/iteratees';\n\nimport { getIsPortrait } from '../../../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport { type DropdownItem } from '../../../ui/Dropdown';\nimport DropdownMenu from '../../../ui/DropdownMenu';\n\nimport styles from './NftCollectionHeader.module.scss';\n\ntype MenuHandler = 'send' | 'hide' | 'renew' | 'burn' | 'select-all';\n\ninterface StateProps {\n  isViewMode: boolean;\n  byAddress?: Record<string, ApiNft>;\n  dnsExpiration?: Record<string, number>;\n  selectedAddresses?: string[];\n  currentCollectionAddress?: string;\n}\n\nfunction NftSelectionHeader({\n  isViewMode, selectedAddresses, byAddress, dnsExpiration, currentCollectionAddress,\n}: StateProps) {\n  const {\n    selectAllNfts, clearNftsSelection, startTransfer, burnNfts, openHideNftModal, openDomainRenewalModal,\n  } = getActions();\n\n  const lang = useLang();\n  const amount = selectedAddresses?.length ?? 1;\n  const isActive = Boolean(selectedAddresses?.length);\n  const allSelectedIsTonDnsNft = useMemo(() => {\n    return selectedAddresses?.length\n      ? selectedAddresses.every((address) => isTonDnsNft(byAddress?.[address]))\n      : false;\n  }, [byAddress, selectedAddresses]);\n  const dnsExpireInDays = useMemo(() => {\n    if (!allSelectedIsTonDnsNft) return undefined;\n    const date = getDomainsExpirationDate(selectedAddresses ?? [], byAddress, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [allSelectedIsTonDnsNft, dnsExpiration, selectedAddresses, byAddress]);\n  const tonDnsMultiSelected = (selectedAddresses?.length ?? 0) > 1;\n\n  useHistoryBack({\n    isActive,\n    onBack: clearNftsSelection,\n  });\n\n  useEffect(() => (isActive ? captureEscKeyListener(clearNftsSelection) : undefined), [isActive]);\n\n  const menuItems: DropdownItem<MenuHandler>[] = useMemo(() => {\n    return compact([\n      !isViewMode && {\n        name: 'Send',\n        value: 'send',\n      },\n      !isViewMode && allSelectedIsTonDnsNft && {\n        name: tonDnsMultiSelected ? 'Renew All' : 'Renew',\n        value: 'renew',\n        description: dnsExpireInDays && dnsExpireInDays < 0\n          ? (tonDnsMultiSelected ? '$expired_many' : 'Expired')\n          : lang('$expires_in %days%', {\n            days: lang('$in_days', dnsExpireInDays),\n          }, undefined, selectedAddresses?.length ?? 1) as string,\n      } satisfies DropdownItem<MenuHandler>,\n      !IS_CORE_WALLET && {\n        name: 'Hide',\n        value: 'hide',\n      } satisfies DropdownItem<MenuHandler>,\n      !isViewMode && {\n        name: 'Burn',\n        value: 'burn',\n        isDangerous: true,\n      } satisfies DropdownItem<MenuHandler>, {\n        name: 'Select All',\n        value: 'select-all',\n        withDelimiter: true,\n      },\n    ]);\n  }, [allSelectedIsTonDnsNft, dnsExpireInDays, isViewMode, lang, selectedAddresses?.length, tonDnsMultiSelected]);\n\n  const handleSendClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    startTransfer({\n      isPortrait: getIsPortrait(),\n      nfts,\n    });\n  });\n\n  const handleBurnClick = useLastCallback(() => {\n    const nfts = selectedAddresses!.map((address) => byAddress![address]) ?? [];\n\n    clearNftsSelection();\n\n    burnNfts({ nfts });\n  });\n\n  const handleHideClick = useLastCallback(() => {\n    clearNftsSelection();\n\n    openHideNftModal({ addresses: selectedAddresses!, isCollection: false });\n  });\n\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const isMenuOpen = Boolean(menuAnchor);\n  const ref = useRef<HTMLButtonElement>();\n  const menuRef = useRef<HTMLDivElement>();\n  const handleMenuOpen = useLastCallback(() => {\n    const { right: x, bottom: y } = ref.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n  const handleMenuClose = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n  const getTriggerElement = useLastCallback(() => ref.current);\n  const getRootElement = useLastCallback(() => document.body);\n  const getMenuElement = useLastCallback(() => menuRef.current);\n  const getLayout = useLastCallback(() => ({ withPortal: true }));\n\n  const handleMenuItemClick = useLastCallback((value: MenuHandler) => {\n    switch (value) {\n      case 'send': {\n        handleSendClick();\n        break;\n      }\n      case 'hide': {\n        handleHideClick();\n        break;\n      }\n      case 'burn': {\n        handleBurnClick();\n        break;\n      }\n      case 'select-all': {\n        selectAllNfts({ collectionAddress: currentCollectionAddress });\n        break;\n      }\n      case 'renew': {\n        openDomainRenewalModal({ addresses: selectedAddresses! });\n        break;\n      }\n    }\n  });\n\n  return (\n    <div className={styles.root}>\n      <Button\n        isSimple\n        isText\n        ariaLabel={lang('Back')}\n        className={styles.backButton}\n        onClick={clearNftsSelection}\n      >\n        <i className={buildClassName(styles.backIcon, 'icon-chevron-left')} aria-hidden />\n      </Button>\n      <div className={styles.content}>\n        <div className={styles.title}>\n          {amount > 1 ? lang('%amount% NFTs Selected', { amount }) : lang('1 NFT Selected')}\n        </div>\n      </div>\n      <div>\n        <Button isSimple ref={ref} className={styles.menuButton} onClick={handleMenuOpen} ariaLabel={lang('Open Menu')}>\n          <i className=\"icon-menu-dots\" aria-hidden />\n        </Button>\n        <DropdownMenu\n          isOpen={isMenuOpen}\n          ref={menuRef}\n          withPortal\n          shouldTranslateOptions\n          menuPositionX=\"right\"\n          menuAnchor={menuAnchor}\n          getTriggerElement={getTriggerElement}\n          getRootElement={getRootElement}\n          getMenuElement={getMenuElement}\n          getLayout={getLayout}\n          buttonClassName={styles.menuItem}\n          bubbleClassName={styles.menu}\n          itemDescriptionClassName={styles.menuItemDescription}\n          items={menuItems}\n          onSelect={handleMenuItemClick}\n          onClose={handleMenuClose}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    selectedAddresses, byAddress, currentCollectionAddress, dnsExpiration,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  return {\n    selectedAddresses,\n    byAddress,\n    currentCollectionAddress,\n    dnsExpiration,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(NftSelectionHeader));\n","// extracted by mini-css-extract-plugin\nexport default {\"contentPanel\":\"i_rtpHaE\",\"landscapeContentPanel\":\"UzEmZry2\",\"container\":\"wmmKI_Q8\",\"landscapeContainer\":\"xwYhKvej\",\"assetsPanel\":\"LsCBKsIM\",\"portraitContainer\":\"joLgqn25\",\"tabsContainer\":\"qxl4O9Cg\",\"tabsContainerStuck\":\"dFLD_EZz\",\"tabsContent\":\"VjN3P9Zv\",\"tabs\":\"q8lTUtx5\",\"tabsOverlay\":\"razu85QH\",\"tabsSlide\":\"ES31v1R7\",\"tab\":\"Sd0JpmLp\",\"slides\":\"vxe8iSc4\",\"slide\":\"MU2eE1B1\"};","import React, { memo, useEffect, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft, ApiStakingState } from '../../../../api/types';\nimport type { DropdownItem } from '../../../ui/Dropdown';\nimport { ContentTab, SettingsState } from '../../../../global/types';\n\nimport {\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_TELEGRAM_APP,\n  LANDSCAPE_MIN_ASSETS_TAB_VIEW,\n  PORTRAIT_MIN_ASSETS_TAB_VIEW,\n  TELEGRAM_GIFTS_SUPER_COLLECTION,\n} from '../../../../config';\nimport { requestMutation } from '../../../../lib/fasterdom/fasterdom';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectDoesAccountSupportNft,\n  selectEnabledTokensCountMemoizedFor,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getStatusBarHeight } from '../../../../util/capacitor';\nimport { captureEvents, SwipeDirection } from '../../../../util/captureEvents';\nimport { compact } from '../../../../util/iteratees';\nimport { getIsActiveStakingState } from '../../../../util/staking';\nimport { getTelegramApp } from '../../../../util/telegram';\nimport { IS_TOUCH_ENV, STICKY_CARD_INTERSECTION_THRESHOLD } from '../../../../util/windowEnvironment';\nimport windowSize from '../../../../util/windowSize';\nimport { getScrollableContainer } from '../../helpers/scrollableContainer';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport useElementVisibility from '../../../../hooks/useElementVisibility';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../../hooks/useSyncEffect';\n\nimport CategoryHeader from '../../../explore/CategoryHeader';\nimport Explore from '../../../explore/Explore';\nimport TabList from '../../../ui/TabList';\nimport Transition from '../../../ui/Transition';\nimport HideNftModal from '../../modals/HideNftModal';\nimport Activity from './Activities';\nimport Assets from './Assets';\nimport NftCollectionHeader from './NftCollectionHeader';\nimport Nfts from './Nfts';\nimport NftSelectionHeader from './NftSelectionHeader';\nimport { OPEN_CONTEXT_MENU_CLASS_NAME } from './Token';\n\nimport styles from './Content.module.scss';\n\ninterface OwnProps {\n  onStakedTokenClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  tokensCount: number;\n  nfts?: Record<string, ApiNft>;\n  currentCollectionAddress?: string;\n  selectedAddresses?: string[];\n  activeContentTab?: ContentTab;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  states?: ApiStakingState[];\n  hasVesting: boolean;\n  isFullscreen?: boolean;\n  selectedNftsToHide?: {\n    addresses: string[];\n    isCollection: boolean;\n  };\n  currentSiteCategoryId?: number;\n  doesSupportNft: boolean;\n  collectionTabs?: string[];\n}\n\nconst MAIN_CONTENT_TABS_LENGTH = Object.values(ContentTab).length / 2;\n\nlet activeNftKey = 0;\n\nfunction Content({\n  activeContentTab,\n  tokensCount,\n  nfts,\n  currentCollectionAddress,\n  selectedAddresses,\n  onStakedTokenClick,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  selectedNftsToHide,\n  states,\n  hasVesting,\n  isFullscreen,\n  currentSiteCategoryId,\n  doesSupportNft,\n  collectionTabs,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    showTokenActivity,\n    setActiveContentTab,\n    openNftCollection,\n    closeNftCollection,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const tabsRef = useRef<HTMLDivElement>();\n  const hasNftSelection = Boolean(selectedAddresses?.length);\n\n  const numberOfStaking = useMemo(() => {\n    return states?.filter(getIsActiveStakingState).length ?? 0;\n  }, [states]);\n\n  useSyncEffect(() => {\n    if (currentCollectionAddress) {\n      activeNftKey += 1;\n    } else {\n      activeNftKey = 0;\n    }\n  }, [currentCollectionAddress]);\n\n  const handleNftsMenuButtonClick = useLastCallback((value: string) => {\n    if (value === 'hidden_nfts') {\n      openSettingsWithState({ state: SettingsState.HiddenNfts });\n    } else {\n      openNftCollection({ address: value }, { forceOnHeavyAnimation: true });\n    }\n  });\n\n  const nftCollections = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedNftAddressesSet = new Set(whitelistedNftAddresses);\n\n    let hasTelegramGifts = false;\n\n    const itemsByAddress = Object.values(nfts ?? {})\n      .reduce((acc, nft) => {\n        if (nft.collectionAddress && (\n          !nft.isHidden || whitelistedNftAddressesSet.has(nft.address)\n        ) && (\n          !blacklistedNftAddressesSet.has(nft.address)\n        )) {\n          if (!acc[nft.collectionAddress]) {\n            acc[nft.collectionAddress] = {\n              value: nft.collectionAddress,\n              name: nft.collectionName || lang('Unnamed collection'),\n            };\n          }\n\n          if (!hasTelegramGifts && nft.isTelegramGift) {\n            hasTelegramGifts = true;\n          }\n        }\n\n        return acc;\n      }, {} as Record<string, DropdownItem>);\n\n    const items = Object.values(itemsByAddress);\n\n    items.sort((a, b) => a.name.localeCompare(b.name));\n\n    if (hasTelegramGifts) {\n      items.unshift({\n        value: TELEGRAM_GIFTS_SUPER_COLLECTION,\n        name: lang('Telegram Gifts'),\n        fontIcon: 'gift',\n        withDelimiterAfter: true,\n      });\n    }\n\n    return items;\n  }, [lang, nfts, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  const shouldRenderHiddenNftsSection = useMemo(() => {\n    if (IS_CORE_WALLET) return false;\n\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    return Object.values(nfts ?? {}).some(\n      (nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden,\n    );\n  }, [blacklistedNftAddresses, nfts]);\n\n  const transitionRef = useRef<HTMLDivElement>();\n\n  const totalTokensAmount = tokensCount + (hasVesting ? 1 : 0) + numberOfStaking;\n  const shouldShowSeparateAssetsPanel = totalTokensAmount <= (\n    isPortrait ? PORTRAIT_MIN_ASSETS_TAB_VIEW : LANDSCAPE_MIN_ASSETS_TAB_VIEW\n  );\n\n  const [mainContentTabsCount, tabs] = useMemo(() => {\n    const mainContentTabs = compact([\n      !shouldShowSeparateAssetsPanel && { id: ContentTab.Assets, title: lang('Assets'), className: styles.tab },\n      { id: ContentTab.Activity, title: lang('Activity'), className: styles.tab },\n      !isPortrait && !IS_CORE_WALLET && { id: ContentTab.Explore, title: lang('Explore'), className: styles.tab },\n      doesSupportNft && {\n        id: ContentTab.Nft,\n        title: lang('Collectibles'),\n        className: styles.tab,\n        menuItems: shouldRenderHiddenNftsSection\n          ? [\n            ...nftCollections,\n            {\n              name: lang('Hidden NFTs'),\n              value: 'hidden_nfts',\n              withDelimiter: true,\n            } as DropdownItem,\n          ]\n          : nftCollections,\n        onMenuItemClick: handleNftsMenuButtonClick,\n      },\n    ]);\n\n    return [\n      mainContentTabs.length,\n      mainContentTabs.concat(\n        collectionTabs?.map((collectionAddress, index) => {\n          const collection = nftCollections.find((nc) => nc.value === collectionAddress);\n          if (!collection) return undefined;\n\n          return {\n            id: MAIN_CONTENT_TABS_LENGTH + index,\n            title: collection.name,\n            className: styles.tab,\n            collectionAddress,\n            icon: collectionAddress === TELEGRAM_GIFTS_SUPER_COLLECTION ? 'icon-gift' : undefined,\n          };\n        }).filter(Boolean) ?? [],\n      ),\n    ];\n  }, [\n    collectionTabs, doesSupportNft, isPortrait, lang, nftCollections,\n    shouldRenderHiddenNftsSection, shouldShowSeparateAssetsPanel,\n  ]);\n\n  const activeTabIndex = useMemo(\n    () => {\n      const tabIndex = tabs.findIndex((tab) => tab.id === activeContentTab);\n\n      if (tabIndex === -1) {\n        return ContentTab.Assets;\n      }\n\n      return tabIndex;\n    },\n    [tabs, activeContentTab],\n  );\n\n  const contentTransitionKey = useMemo(() => {\n    if (!currentCollectionAddress || tabs[activeTabIndex].id === ContentTab.Nft) return activeTabIndex;\n\n    const nftCollectionIndex = collectionTabs?.indexOf(currentCollectionAddress) ?? -1;\n\n    return nftCollectionIndex === -1 ? activeTabIndex : mainContentTabsCount + nftCollectionIndex;\n  }, [activeTabIndex, collectionTabs, currentCollectionAddress, mainContentTabsCount, tabs]);\n\n  useEffectOnce(() => {\n    if (activeContentTab === undefined) {\n      setActiveContentTab({ tab: ContentTab.Assets });\n    }\n  });\n\n  const handleSwitchTab = useLastCallback((tab: ContentTab | number) => {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    const tabIndex = tabs.findIndex(({ id }) => id === tab);\n    if (tabIndex >= mainContentTabsCount) {\n      const collectionAddress = collectionTabs![tabIndex - mainContentTabsCount];\n      openNftCollection({ address: collectionAddress }, { forceOnHeavyAnimation: true });\n      return;\n    }\n\n    selectToken({ slug: undefined }, { forceOnHeavyAnimation: true });\n    setActiveContentTab({ tab });\n  });\n\n  const handleScrollToTop = useLastCallback(() => {\n    const scrollContainer = getScrollableContainer(transitionRef.current, isPortrait);\n    scrollContainer?.scrollTo(0, 0);\n  });\n\n  useHistoryBack({\n    isActive: activeTabIndex !== 0,\n    onBack: () => handleSwitchTab(ContentTab.Assets),\n  });\n\n  const safeAreaTop = IS_CAPACITOR\n    ? getStatusBarHeight()\n    : IS_TELEGRAM_APP\n      ? getTelegramApp()!.safeAreaInset.top + getTelegramApp()!.contentSafeAreaInset.top\n      : windowSize.get().safeAreaTop;\n  const rootMarginTop = STICKY_CARD_INTERSECTION_THRESHOLD - safeAreaTop - 1;\n\n  const handleTabIntersection = useLastCallback((e: IntersectionObserverEntry) => {\n    requestMutation(() => {\n      e.target.classList.toggle(styles.tabsContainerStuck, e.intersectionRatio < 1);\n    });\n  });\n\n  useElementVisibility({\n    isDisabled: !isPortrait,\n    targetRef: tabsRef,\n    rootMargin: `${rootMarginTop}px 0px 0px 0px`,\n    threshold: [1],\n    cb: handleTabIntersection,\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      includedClosestSelector: '.swipe-container',\n      excludedClosestSelector: '.dapps-feed',\n      onSwipe: (e, direction) => {\n        if (\n          direction === SwipeDirection.Up\n          || direction === SwipeDirection.Down\n          // For preventing swipe in one interaction with a long press event handler\n          || (e.target as HTMLElement | null)?.closest(`.${OPEN_CONTEXT_MENU_CLASS_NAME}`)\n        ) {\n          return false;\n        }\n\n        if (direction === SwipeDirection.Left) {\n          const tab = tabs[Math.min(tabs.length - 1, activeTabIndex + 1)];\n          handleSwitchTab(tab.id);\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          if (currentSiteCategoryId) return false;\n\n          if (currentCollectionAddress) {\n            closeNftCollection();\n          } else {\n            const tab = tabs[Math.max(0, activeTabIndex - 1)];\n            handleSwitchTab(tab.id);\n          }\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, [tabs, handleSwitchTab, activeTabIndex, currentCollectionAddress, currentSiteCategoryId]);\n\n  const handleClickAsset = useLastCallback((slug: string) => {\n    showTokenActivity({ slug });\n  });\n\n  const containerClassName = buildClassName(\n    styles.container,\n    IS_TOUCH_ENV && 'swipe-container',\n    isPortrait ? styles.portraitContainer : styles.landscapeContainer,\n  );\n\n  function renderTabsPanel() {\n    if (hasNftSelection) {\n      return <NftSelectionHeader />;\n    }\n\n    if (!isPortrait && currentSiteCategoryId) {\n      return <CategoryHeader id={currentSiteCategoryId} />;\n    }\n\n    return currentCollectionAddress ? <NftCollectionHeader key=\"collection\" /> : (\n      <TabList\n        tabs={tabs}\n        activeTab={activeTabIndex}\n        onSwitchTab={handleSwitchTab}\n        onActiveTabClick={handleScrollToTop}\n        className={buildClassName(styles.tabs, 'content-tabslist')}\n        overlayClassName={styles.tabsOverlay}\n      />\n    );\n  }\n\n  function renderCurrentTab(isActive: boolean) {\n    // When assets are shown separately, there is effectively no tab with index 0,\n    // so we fall back to next tab to not break parent's component logic.\n    if (activeTabIndex === 0 && shouldShowSeparateAssetsPanel) {\n      return <Activity isActive={isActive} totalTokensAmount={totalTokensAmount} />;\n    }\n\n    if (currentCollectionAddress && tabs[activeTabIndex].id !== ContentTab.Nft) {\n      return (\n        <Nfts key={`custom:${currentCollectionAddress}`} isActive={isActive} />\n      );\n    }\n\n    switch (tabs[activeTabIndex].id) {\n      case ContentTab.Assets:\n        return <Assets isActive={isActive} onTokenClick={handleClickAsset} onStakedTokenClick={onStakedTokenClick} />;\n      case ContentTab.Activity:\n        return <Activity isActive={isActive} totalTokensAmount={totalTokensAmount} />;\n      case ContentTab.Explore:\n        return <Explore isActive={isActive} />;\n      case ContentTab.Nft:\n        return (\n          <Transition\n            activeKey={activeNftKey}\n            name={isPortrait ? 'slide' : 'slideFade'}\n            className=\"nfts-container\"\n          >\n            <Nfts key={currentCollectionAddress || 'all'} isActive={isActive} />\n          </Transition>\n        );\n      default:\n        return undefined;\n    }\n  }\n\n  function renderContent() {\n    const headerTransitionKey = hasNftSelection || (!isPortrait && currentSiteCategoryId)\n      ? 2\n      : (currentCollectionAddress ? 1 : 0);\n\n    return (\n      <>\n        <div ref={tabsRef} className={styles.tabsContainer}>\n          <Transition\n            name=\"slideFade\"\n            className={styles.tabsContent}\n            activeKey={headerTransitionKey}\n            slideClassName={styles.tabsSlide}\n            shouldCleanup\n            cleanupExceptionKey={0}\n          >\n            {renderTabsPanel()}\n          </Transition>\n        </div>\n        <Transition\n          ref={transitionRef}\n          name={isPortrait ? 'slide' : 'slideFade'}\n          activeKey={contentTransitionKey}\n          renderCount={mainContentTabsCount + (collectionTabs?.length ?? 0)}\n          className={buildClassName(styles.slides, 'content-transition')}\n          slideClassName={buildClassName(styles.slide, 'custom-scroll')}\n        >\n          {renderCurrentTab}\n        </Transition>\n      </>\n    );\n  }\n\n  return (\n    <div className={containerClassName}>\n      {shouldShowSeparateAssetsPanel && (\n        <div className={styles.assetsPanel}>\n          <Assets\n            isActive\n            isSeparatePanel\n            onStakedTokenClick={onStakedTokenClick}\n            onTokenClick={handleClickAsset}\n          />\n        </div>\n      )}\n      <div className={buildClassName(isPortrait ? styles.contentPanel : styles.landscapeContentPanel)}>\n        {renderContent()}\n      </div>\n      <HideNftModal\n        isOpen={Boolean(selectedNftsToHide?.addresses.length)}\n        selectedNftsToHide={selectedNftsToHide}\n      />\n\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const accountId = global.currentAccountId;\n      const {\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        vesting,\n        nfts: {\n          byAddress: nfts,\n          currentCollectionAddress,\n          selectedAddresses,\n          collectionTabs,\n        } = {},\n        currentSiteCategoryId,\n      } = selectCurrentAccountState(global) ?? {};\n\n      const tokens = selectCurrentAccountTokens(global);\n      const tokensCount = selectEnabledTokensCountMemoizedFor(global.currentAccountId!)(tokens);\n      const hasVesting = Boolean(vesting?.info?.length);\n      const states = accountId ? selectAccountStakingStates(global, accountId) : undefined;\n      const doesSupportNft = selectDoesAccountSupportNft(global);\n\n      return {\n        nfts,\n        currentCollectionAddress,\n        selectedAddresses,\n        tokensCount,\n        activeContentTab,\n        blacklistedNftAddresses,\n        whitelistedNftAddresses,\n        selectedNftsToHide,\n        states,\n        hasVesting,\n        currentSiteCategoryId,\n        isFullscreen: global.isFullscreen,\n        doesSupportNft,\n        collectionTabs,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Content),\n);\n","import React, { memo, useEffect, useRef, useState } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport useFocusAfterAnimation from '../../../../hooks/useFocusAfterAnimation';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Input from '../../../ui/Input';\nimport Modal from '../../../ui/Modal';\n\nimport modalStyles from '../../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  name: string;\n  currentAccountId: string;\n  onClose: NoneToVoidFunction;\n}\n\nconst ACCOUNT_NAME_MAX_LENGTH = 255;\n\nfunction AccountRenameModal({ isOpen, name, currentAccountId, onClose }: OwnProps) {\n  const { renameAccount } = getActions();\n\n  const lang = useLang();\n  const inputRef = useRef<HTMLInputElement>();\n  const [newName, setNewName] = useState<string>(name);\n\n  useEffect(() => {\n    if (isOpen) {\n      setNewName(name);\n    }\n  }, [isOpen, name]);\n\n  useFocusAfterAnimation(inputRef, !isOpen);\n\n  const handleSubmit = useLastCallback(() => {\n    renameAccount({ accountId: currentAccountId, title: newName.trim() });\n    onClose();\n  });\n\n  return (\n    <Modal\n      isCompact\n      isOpen={isOpen}\n      title={lang('Rename Wallet')}\n      onClose={onClose}\n    >\n      <p>{lang('You can rename this wallet for easier identification.')}</p>\n      <Input\n        ref={inputRef}\n        placeholder={lang('Name')}\n        onInput={setNewName}\n        value={newName}\n        maxLength={ACCOUNT_NAME_MAX_LENGTH}\n      />\n\n      <div className={modalStyles.buttons}>\n        <Button onClick={onClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button\n          onClick={handleSubmit}\n          isPrimary\n          isDisabled={newName.trim().length === 0}\n          className={modalStyles.button}\n        >\n          {lang('Save')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(AccountRenameModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"a3WLGvJB\",\"slide\":\"HwTx4nDa\",\"accountTitle\":\"MoMRv8lX\",\"withBalance\":\"VUELTqry\",\"accountTitleInteractive\":\"KaXidGii\",\"accountTitleInner\":\"CsZvEIzk\",\"arrowIcon\":\"fwj1nsFY\",\"balance\":\"ReXRdYnq\",\"balanceFractionPart\":\"rMdzMb2a\",\"balanceCurrency\":\"LJreYpVF\",\"balanceCurrencyPrefix\":\"iYR_GSsp\",\"container\":\"yg1dh4un\",\"dialog\":\"_GKFEXQQ\",\"backdrop\":\"Yb4jStqu\",\"dialog_compact\":\"VQfOatN5\",\"dialogCompact\":\"VQfOatN5\",\"createAccountButton\":\"_cBvU9yb\",\"createAccountIcon\":\"wWwtr3AE\"};","import React, { memo, useEffect, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiTonWalletVersion } from '../../../../api/chains/ton/types';\nimport type { ApiBaseCurrency } from '../../../../api/types';\nimport type { Account, AccountSettings, AccountType, UserToken } from '../../../../global/types';\nimport { type ApiStakingState } from '../../../../api/types';\nimport { SettingsState } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport {\n  selectAccountStakingStates,\n  selectCurrentAccountTokens,\n  selectNetworkAccounts,\n} from '../../../../global/selectors';\nimport { getAccountTitle } from '../../../../util/account';\nimport buildClassName from '../../../../util/buildClassName';\nimport captureEscKeyListener from '../../../../util/captureEscKeyListener';\nimport { getShortCurrencySymbol } from '../../../../util/formatNumber';\nimport { vibrate } from '../../../../util/haptics';\nimport trapFocus from '../../../../util/trapFocus';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport Button from '../../../ui/Button';\nimport SensitiveData from '../../../ui/SensitiveData';\nimport Transition from '../../../ui/Transition';\nimport { calculateFullBalance } from '../Card/helpers/calculateFullBalance';\nimport AccountButton from './AccountButton';\nimport AccountRenameModal from './AccountRenameModal';\n\nimport styles from './AccountSelector.module.scss';\n\ninterface OwnProps {\n  forceClose?: boolean;\n  accountClassName?: string;\n  accountSelectorClassName?: string;\n  withAccountSelector?: boolean;\n  withBalance?: boolean;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentAccount?: Account;\n  accounts?: Record<string, Account>;\n  currentWalletVersion?: ApiTonWalletVersion;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  tokens?: UserToken[];\n  baseCurrency?: ApiBaseCurrency;\n  stakingStates?: ApiStakingState[];\n  isSensitiveDataHidden?: true;\n}\n\nconst ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG = 2;\n\nfunction AccountSelector({\n  currentAccountId,\n  currentAccount,\n  forceClose,\n  accountClassName,\n  accountSelectorClassName,\n  withAccountSelector,\n  withBalance,\n  tokens,\n  baseCurrency,\n  stakingStates,\n  isSensitiveDataHidden,\n  accounts,\n  currentWalletVersion,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const {\n    switchAccount,\n    openAddAccountModal,\n    openSettingsWithState,\n  } = getActions();\n\n  const lang = useLang();\n  const [isOpen, openAccountSelector, closeAccountSelector] = useFlag(false);\n  const [isEdit, openEdit, closeEdit] = useFlag(false);\n  const { shouldRender: shouldRenderDialog, ref: dialogContainerRef } = useShowTransition({\n    isOpen,\n    className: 'slow',\n    withShouldRender: true,\n  });\n\n  // The API doesn't check the TON wallet version for BIP39 and Tron-only accounts,\n  // therefore `currentWalletVersion !== 'W5'` can be incorrectly true in that cases.\n  const isBip39Account = currentAccount?.type === 'mnemonic' && Boolean(currentAccount?.addressByChain.tron);\n  const hasTonWallet = Boolean(currentAccount?.addressByChain.ton);\n  const withAddW5Button = currentWalletVersion !== 'W5' && currentAccount?.type !== 'hardware'\n    && hasTonWallet && !isBip39Account;\n\n  const accountsAmount = useMemo(() => Object.keys(accounts || {}).length, [accounts]);\n\n  const balanceValues = useMemo(() => {\n    return tokens ? calculateFullBalance(tokens, stakingStates) : undefined;\n  }, [tokens, stakingStates]);\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n  const { primaryWholePart, primaryFractionPart } = balanceValues || {};\n\n  useEffect(() => {\n    if (isOpen && forceClose) closeAccountSelector();\n  }, [forceClose, isOpen]);\n\n  useEffect(\n    () => (shouldRenderDialog ? captureEscKeyListener(closeAccountSelector) : undefined),\n    [closeAccountSelector, isOpen, shouldRenderDialog],\n  );\n  useEffect(\n    () => (shouldRenderDialog && dialogContainerRef.current ? trapFocus(dialogContainerRef.current) : undefined),\n    [dialogContainerRef, shouldRenderDialog],\n  );\n\n  const handleOpenAccountSelector = () => {\n    openAccountSelector();\n  };\n\n  const handleSwitchAccount = useLastCallback((accountId: string) => {\n    void vibrate();\n    closeAccountSelector();\n    switchAccount({ accountId });\n  });\n\n  const handleAddWalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openAddAccountModal();\n  });\n\n  const handleAddV5WalletClick = useLastCallback(() => {\n    void vibrate();\n    closeAccountSelector();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderButton(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const isActive = accountId === currentAccountId;\n\n    return (\n      <AccountButton\n        key={accountId}\n        accountId={accountId}\n        addressByChain={addressByChain}\n        accountType={accountType}\n        isActive={isActive}\n        title={title}\n        cardBackgroundNft={cardBackgroundNft}\n        canEditAccount={!IS_CORE_WALLET}\n        onClick={handleSwitchAccount}\n        onEdit={openEdit}\n      />\n    );\n  }\n\n  const fullClassName = buildClassName(\n    styles.container,\n    accountSelectorClassName,\n  );\n  const accountTitleClassName = buildClassName(\n    styles.accountTitle,\n    withAccountSelector && !withBalance && styles.accountTitleInteractive,\n    withBalance && styles.withBalance,\n    accountClassName,\n  );\n\n  function renderCurrentAccount() {\n    return (\n      <Transition\n        name=\"slideVerticalFade\"\n        activeKey={withBalance ? 1 : 0}\n        className={styles.root}\n        slideClassName={styles.slide}\n      >\n        {withBalance && (\n          <div className={buildClassName(styles.balance, 'rounded-font')}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              shouldHoldSize\n              align=\"center\"\n              cols={10}\n              rows={2}\n              cellSize={8.5}\n            >\n              <span\n                className={styles.currencySwitcher}\n              >\n                {shortBaseSymbol.length === 1 && (\n                  <span className={buildClassName(styles.balanceCurrency, styles.balanceCurrencyPrefix)}>\n                    {shortBaseSymbol}\n                  </span>\n                )}\n                {primaryWholePart}\n                {primaryFractionPart && <span className={styles.balanceFractionPart}>.{primaryFractionPart}</span>}\n                {shortBaseSymbol.length > 1 && (\n                  <span className={styles.balanceCurrency}>&nbsp;{shortBaseSymbol}</span>\n                )}\n              </span>\n            </SensitiveData>\n          </div>\n        )}\n        <div className={accountTitleClassName} onClick={withAccountSelector ? handleOpenAccountSelector : undefined}>\n          <span className={styles.accountTitleInner}>\n            {(currentAccount && getAccountTitle(currentAccount)) ?? ''}\n          </span>\n          {withAccountSelector && !withBalance && (\n            <i className={buildClassName('icon icon-caret-down', styles.arrowIcon)} aria-hidden />\n          )}\n        </div>\n      </Transition>\n    );\n  }\n\n  function renderAccountsSelector() {\n    const dialogFullClassName = buildClassName(\n      styles.dialog,\n      accountsAmount <= ACCOUNTS_AMOUNT_FOR_COMPACT_DIALOG && styles.dialog_compact,\n    );\n\n    return (\n      <div\n        ref={dialogContainerRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className={styles.backdrop} onClick={() => closeAccountSelector()} />\n        <div className={dialogFullClassName}>\n          {accounts && Object.entries(accounts).map(\n            ([accountId, { title, addressByChain, type }]) => {\n              return renderButton(accountId, addressByChain, type, title);\n            },\n          )}\n          {withAddW5Button && (\n            <Button className={styles.createAccountButton} onClick={handleAddV5WalletClick}>\n              {lang('Switch to W5')}\n              <i className={buildClassName(styles.createAccountIcon, 'icon-versions')} aria-hidden />\n            </Button>\n          )}\n          <Button className={styles.createAccountButton} onClick={handleAddWalletClick}>\n            {lang('Add Wallet')}\n            <i className={buildClassName(styles.createAccountIcon, 'icon-plus')} aria-hidden />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderCurrentAccount()}\n\n      {shouldRenderDialog && renderAccountsSelector()}\n\n      <AccountRenameModal\n        isOpen={isEdit}\n        currentAccountId={currentAccountId}\n        name={currentAccount?.title ?? ''}\n        onClose={closeEdit}\n      />\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      walletVersions,\n      settings: {\n        byAccountId: settingsByAccountId,\n        baseCurrency,\n        isSensitiveDataHidden,\n      },\n    } = global;\n\n    const accounts = selectNetworkAccounts(global);\n    const currentAccountId = global.currentAccountId!;\n    const currentAccount = accounts?.[currentAccountId];\n\n    const stakingStates = selectAccountStakingStates(global, currentAccountId);\n\n    return {\n      currentAccountId,\n      currentAccount,\n      accounts,\n      currentWalletVersion: walletVersions?.currentVersion,\n      settingsByAccountId,\n      tokens: selectCurrentAccountTokens(global),\n      baseCurrency,\n      stakingStates,\n      isSensitiveDataHidden,\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(AccountSelector));\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"heOBVClj\",\"qrScannerButton\":\"qduFjDA3\"};","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport { vibrate } from '../../../../../util/haptics';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction AppLockButton() {\n  const { setIsManualLockActive } = getActions();\n\n  const lang = useLang();\n\n  const handleManualLock = useLastCallback(() => {\n    setIsManualLockActive({ isActive: true, shouldHideBiometrics: true });\n\n    void vibrate();\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('App Lock')}\n      onClick={handleManualLock}\n    >\n      <i className=\"icon-manual-lock\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(AppLockButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport buildClassName from '../../../../../util/buildClassName';\nimport { getIsMobileTelegramApp, IS_IOS } from '../../../../../util/windowEnvironment';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../../../../hooks/useQrScannerSupport';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isViewMode?: boolean;\n}\n\nfunction QrScannerButton({ isViewMode }: OwnProps) {\n  const { requestOpenQrScanner } = getActions();\n\n  const lang = useLang();\n  const isQrScannerSupported = useQrScannerSupport() && !isViewMode;\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n  });\n\n  if (!isQrScannerSupported) return undefined;\n\n  return (\n    <Button\n      className={buildClassName(styles.button, styles.qrScannerButton)}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Scan QR Code')}\n      onClick={handleQrScanClick}\n    >\n      <i className=\"icon-qr-scanner\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(QrScannerButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport useLang from '../../../../../hooks/useLang';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction SettingsButton() {\n  const { openSettings } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Main menu')}\n      onClick={openSettings}\n    >\n      <i className=\"icon-cog\" aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(SettingsButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\n\nimport { getTelegramApp } from '../../../../../util/telegram';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isFullscreen: boolean;\n}\n\nfunction ToggleFullscreenButton({ isFullscreen }: OwnProps) {\n  const lang = useLang();\n\n  const handleFullscreenToggle = useLastCallback(() => {\n    if (isFullscreen) {\n      getTelegramApp()?.exitFullscreen();\n    } else {\n      getTelegramApp()?.requestFullscreen();\n    }\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang('Toggle fullscreen')}\n      onClick={handleFullscreenToggle}\n    >\n      <i className={isFullscreen ? 'icon-fullscreen-exit' : 'icon-fullscreen'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleFullscreenButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport { useDeviceScreen } from '../../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\nfunction ToggleLayoutButton() {\n  const { setAppLayout } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const handleAppLayoutToggle = useLastCallback(() => {\n    setAppLayout({ layout: isPortrait ? 'landscape' : 'portrait' });\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang(isPortrait ? 'Toggle to landscape layout' : 'Toggle to portrait layout')}\n      onClick={handleAppLayoutToggle}\n    >\n      <i className={isPortrait ? 'icon-view-landscape' : 'icon-view-portrait'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleLayoutButton);\n","import React, { memo } from '../../../../../lib/teact/teact';\nimport { getActions } from '../../../../../global';\n\nimport useLang from '../../../../../hooks/useLang';\nimport useLastCallback from '../../../../../hooks/useLastCallback';\n\nimport Button from '../../../../ui/Button';\n\nimport styles from './Buttons.module.scss';\n\ninterface OwnProps {\n  isSensitiveDataHidden: boolean;\n}\n\nfunction ToggleSensitiveDataButton({ isSensitiveDataHidden }: OwnProps) {\n  const { setIsSensitiveDataHidden } = getActions();\n\n  const lang = useLang();\n\n  const handleSensitiveDataToggle = useLastCallback(() => {\n    setIsSensitiveDataHidden({ isHidden: !isSensitiveDataHidden });\n  });\n\n  return (\n    <Button\n      className={styles.button}\n      isText\n      isSimple\n      kind=\"transparent\"\n      ariaLabel={lang(isSensitiveDataHidden ? 'Show Sensitive Data' : 'Hide Sensitive Data')}\n      onClick={handleSensitiveDataToggle}\n    >\n      <i className={isSensitiveDataHidden ? 'icon-eye' : 'icon-eye-closed'} aria-hidden />\n    </Button>\n  );\n}\n\nexport default memo(ToggleSensitiveDataButton);\n","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"gwvxwQs9\",\"withSeparator\":\"YLxLG2q6\",\"isScrolled\":\"_sQ5O2j4\",\"headerInner\":\"EX9t6A36\",\"landscapeActions\":\"mKaPMjmN\",\"portraitActions\":\"oLoKLzOb\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectIsCurrentAccountViewMode, selectIsPasswordPresent } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { IS_ELECTRON } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\n\nimport AccountSelector from './AccountSelector';\nimport AppLockButton from './actionButtons/AppLockButton';\nimport QrScannerButton from './actionButtons/QrScannerButton';\nimport SettingsButton from './actionButtons/SettingsButton';\nimport ToggleFullscreenButton from './actionButtons/ToggleFullscreenButton';\nimport ToggleLayoutButton from './actionButtons/ToggleLayoutButton';\nimport ToggleSensitiveDataButton from './actionButtons/ToggleSensitiveDataButton';\n\nimport styles from './Header.module.scss';\n\nexport const HEADER_HEIGHT_REM = 3;\n\ninterface OwnProps {\n  isScrolled?: boolean;\n  withBalance?: boolean;\n}\n\ninterface StateProps {\n  isViewMode?: boolean;\n  isAppLockEnabled?: boolean;\n  isSensitiveDataHidden: boolean;\n  isFullscreen: boolean;\n}\n\nfunction Header({\n  isViewMode,\n  withBalance,\n  isScrolled,\n  isAppLockEnabled,\n  isSensitiveDataHidden,\n  isFullscreen,\n}: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const canToggleAppLayout = IS_EXTENSION || IS_ELECTRON;\n\n  if (isPortrait) {\n    const fullClassName = buildClassName(\n      styles.header,\n      withBalance && styles.withSeparator,\n      isScrolled && styles.isScrolled,\n    );\n    const iconsAmount = 1 + (isAppLockEnabled ? 1 : 0) + (IS_TELEGRAM_APP ? 1 : 0) + (canToggleAppLayout ? 1 : 0);\n\n    return (\n      <div className={fullClassName}>\n        <div className={styles.headerInner} style={`--icons-amount: ${iconsAmount}`}>\n          <QrScannerButton isViewMode={isViewMode} />\n          <AccountSelector withBalance={withBalance} withAccountSelector={!IS_CORE_WALLET} />\n\n          <div className={styles.portraitActions}>\n            {isAppLockEnabled && <AppLockButton />}\n            <ToggleSensitiveDataButton isSensitiveDataHidden={isSensitiveDataHidden} />\n            {IS_TELEGRAM_APP && <ToggleFullscreenButton isFullscreen={isFullscreen} />}\n            {canToggleAppLayout && <ToggleLayoutButton />}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.header}>\n      <div className={styles.headerInner}>\n        <div className={styles.landscapeActions}>\n          <ToggleSensitiveDataButton isSensitiveDataHidden={isSensitiveDataHidden} />\n          <QrScannerButton isViewMode={isViewMode} />\n          {isAppLockEnabled && <AppLockButton />}\n        </div>\n\n        <AccountSelector withBalance={withBalance} withAccountSelector={!IS_CORE_WALLET} />\n\n        <div className={styles.landscapeActions}>\n          {IS_TELEGRAM_APP && <ToggleFullscreenButton isFullscreen={isFullscreen} />}\n          {canToggleAppLayout && <ToggleLayoutButton />}\n          <SettingsButton />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      isFullscreen,\n      settings: {\n        isAppLockEnabled,\n        isSensitiveDataHidden,\n      },\n    } = global;\n\n    const isPasswordPresent = selectIsPasswordPresent(global);\n    const isViewMode = selectIsCurrentAccountViewMode(global);\n\n    return {\n      isViewMode,\n      isAppLockEnabled: isAppLockEnabled && isPasswordPresent,\n      isFullscreen: Boolean(isFullscreen),\n      isSensitiveDataHidden: Boolean(isSensitiveDataHidden),\n    };\n  },\n  (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n)(Header));\n","import { useEffect } from '../lib/teact/teact';\n\nimport type { Theme } from '../global/types';\n\ninterface Props {\n  isActive: boolean;\n  currentTheme: Theme;\n  lightColor: string;\n  darkColor: string;\n}\n\nexport default function useBrowserUiColor({\n  isActive,\n  currentTheme,\n  lightColor,\n  darkColor,\n}: Props) {\n  useEffect(() => {\n    const metaElementLight = getThemeColorMetaElement(true);\n    const metaElementDark = getThemeColorMetaElement();\n    const lightContent = currentTheme === 'dark' ? darkColor : lightColor;\n    const darkContent = currentTheme === 'light' ? lightColor : darkColor;\n\n    if (isActive) {\n      metaElementLight.setAttribute('content', lightContent);\n      metaElementDark.setAttribute('content', darkContent);\n    }\n\n    return () => {\n      metaElementLight.remove();\n      metaElementDark.remove();\n    };\n  }, [lightColor, isActive, darkColor, currentTheme]);\n}\n\nfunction getThemeColorMetaElement(isLight?: boolean) {\n  let metaThemeColor = document.querySelector(\n    `meta[name=\"theme-color\"][media=\"(prefers-color-scheme: ${isLight ? 'light' : 'dark'})\"]`,\n  );\n\n  if (!metaThemeColor) {\n    metaThemeColor = document.createElement('meta');\n    metaThemeColor.setAttribute('name', 'theme-color');\n    metaThemeColor.setAttribute('media', `(prefers-color-scheme: ${isLight ? 'light' : 'dark'})`);\n    document.getElementsByTagName('head')[0].appendChild(metaThemeColor);\n  }\n\n  return metaThemeColor;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"nDlx2B3w\",\"container\":\"H35Oa6Xc\",\"testnetWarning\":\"FeOh0iRA\",\"wrapper\":\"PUMHiqAW\",\"wrapper_landscape\":\"j9PIExiC\",\"wrapperLandscape\":\"j9PIExiC\",\"wrapperFlex\":\"WUreitT1\",\"icon\":\"l3sBnS54\",\"text\":\"WFekTm0y\",\"light\":\"TR3h5nXi\",\"closeButton\":\"tQS1IhkF\",\"domainPreviewWrapper\":\"qB47T3_D\",\"domainPreview\":\"VOiW6ZiQ\",\"domainPreview_1\":\"qdZywUBz\",\"domainPreview1\":\"qdZywUBz\",\"domainPreview_2\":\"z795yKpX\",\"domainPreview2\":\"z795yKpX\",\"domainPreview_3\":\"QhDZUBwR\",\"domainPreview3\":\"QhDZUBwR\"};","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { Theme } from '../../../../global/types';\n\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useBrowserUiColor from '../../../../hooks/useBrowserUiColor';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  isRequired: boolean;\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  theme: Theme;\n};\n\nconst UI_BG_RED_LIGHT = '#F36A6B';\nconst UI_BG_RED_DARK = '#C44646';\n\nfunction BackupWarning({ isRequired, theme, onOpenBackupWallet }: OwnProps & StateProps) {\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: isRequired,\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  useBrowserUiColor({\n    isActive: isRequired,\n    currentTheme: theme,\n    lightColor: UI_BG_RED_LIGHT,\n    darkColor: UI_BG_RED_DARK,\n  });\n\n  const handleClick = () => {\n    onOpenBackupWallet();\n  };\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape)}\n      onClick={handleClick}\n    >\n      {lang('Wallet is not backed up')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>\n        {lang('Back up wallet to have full access to it')}\n      </p>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      return {\n        theme: global.settings.theme,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(BackupWarning),\n);\n","import React, { memo, useRef, useState } from '../../lib/teact/teact';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../util/buildClassName';\n\nimport usePrevious from '../../hooks/usePrevious';\n\nimport './Collapsible.scss';\n\nconst CLASSES = {\n  collapsible: 'collapsible',\n  shown: 'shown',\n  open: 'open',\n  content: 'content',\n} as const;\n\ninterface OwnProps {\n  children: TeactJsx;\n  isShown: boolean;\n}\n\nconst DELAY = 200;\n\nfunction Collapsible({ children, isShown }: OwnProps) {\n  const containerRef = useRef<HTMLDivElement>();\n  const isOpenRef = useRef(isShown);\n  const [shouldRender, setShouldRender] = useState(isShown);\n  const prevIsShown = usePrevious(isShown);\n  const hideTimeoutRef = useRef<number>();\n\n  function toggleOpen() {\n    if (!containerRef.current) return;\n    containerRef.current.classList.toggle(CLASSES.open);\n    isOpenRef.current = !isOpenRef.current;\n  }\n\n  if (prevIsShown !== undefined && prevIsShown !== isShown) {\n    if (isShown && !isOpenRef.current) {\n      setShouldRender(true);\n      if (hideTimeoutRef.current) window.clearTimeout(hideTimeoutRef.current);\n      setTimeout(() => requestMutation(toggleOpen), DELAY);\n    } else {\n      requestMutation(toggleOpen);\n      hideTimeoutRef.current = window.setTimeout(() => {\n        setShouldRender(false);\n      }, DELAY);\n    }\n  }\n\n  const render = <div className={CLASSES.content}>{children}</div>;\n\n  return (\n    <div\n      ref={containerRef}\n      className={buildClassName(CLASSES.collapsible, isShown && CLASSES.shown, isOpenRef.current && CLASSES.open)}\n    >\n      {shouldRender ? render : undefined}\n    </div>\n  );\n}\n\nexport default memo(Collapsible);\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiNft } from '../../../../api/types';\n\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../../util/dateFormat';\nimport { filterExpiringDomains, getDomainsExpirationDate, getTonDnsExpirationDate } from '../../../../util/dns';\nimport { stopEvent } from '../../../../util/domEvents';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../../../hooks/useForceUpdate';\nimport useLang from '../../../../hooks/useLang';\n\nimport Collapsible from '../../../ui/Collapsible';\n\nimport styles from './Warnings.module.scss';\n\ninterface StateProps {\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n  dnsExpiration?: Record<string, number>;\n}\n\n// Store the addresses that the user ignores for the current session\nlet ignoredAddressForRenewal: string[] = [];\n\nfunction RenewDomainWarning({ orderedAddresses, byAddress, dnsExpiration }: StateProps) {\n  const { openDomainRenewalModal } = getActions();\n\n  const lang = useLang();\n  const { isLandscape } = useDeviceScreen();\n  const forceUpdate = useForceUpdate();\n\n  const nftForRenewal = useMemo(() => {\n    return filterExpiringDomains(orderedAddresses ?? [], byAddress, dnsExpiration)\n      .filter(({ address }) => !ignoredAddressForRenewal.includes(address));\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [byAddress, ignoredAddressForRenewal, orderedAddresses]);\n  const isShown = nftForRenewal.length > 0;\n  const renderedNftForRenewal = useCurrentOrPrev(isShown ? nftForRenewal : undefined, true);\n\n  const expireInDays = useMemo(() => {\n    const date = getDomainsExpirationDate(renderedNftForRenewal ?? [], undefined, dnsExpiration);\n\n    return date ? getCountDaysToDate(date) : undefined;\n  }, [renderedNftForRenewal, dnsExpiration]);\n\n  const expiredDomains = useMemo(() => {\n    if (!expireInDays || expireInDays >= 0 || !renderedNftForRenewal) return [];\n\n    const now = Date.now();\n\n    return renderedNftForRenewal.filter((nft) => {\n      const date = getTonDnsExpirationDate(nft, dnsExpiration);\n      return date && date < now;\n    });\n  }, [dnsExpiration, expireInDays, renderedNftForRenewal]);\n\n  function handleClick() {\n    const addresses = (renderedNftForRenewal ?? []).map(({ address }) => address);\n    openDomainRenewalModal({ addresses });\n  }\n\n  function handleClose(e: React.MouseEvent) {\n    stopEvent(e);\n\n    ignoredAddressForRenewal = [\n      ...ignoredAddressForRenewal,\n      ...(nftForRenewal.map(({ address }) => address)),\n    ];\n\n    forceUpdate();\n  }\n\n  function renderPreview() {\n    const previewNfts = (renderedNftForRenewal ?? []).slice(0, 3);\n    return (\n      <div className={styles.domainPreviewWrapper}>\n        {previewNfts.map((nft, index) => {\n          return (\n            <img\n              key={nft.address}\n              src={nft.thumbnail}\n              alt={nft.name}\n              style={`--index: ${index}`}\n              className={buildClassName(styles.domainPreview, styles[`domainPreview_${previewNfts.length}`])}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderWarningMessage() {\n    if (expireInDays === undefined) return undefined;\n\n    if (nftForRenewal.length === 1) {\n      return expireInDays < 0\n        ? lang('$domain_was_expired', { domain: nftForRenewal[0].name })\n        : lang('$domain_expire', {\n          domain: nftForRenewal[0].name,\n          days: lang('$in_days', expireInDays, 'i'),\n        });\n    }\n\n    return expireInDays < 0\n      ? lang('$domains_was_expired', { domain: expiredDomains.length }, undefined, expiredDomains.length)\n      : lang('$domains_expire', {\n        domain: nftForRenewal.length,\n        days: lang('$in_days', expireInDays, 'i'),\n      }, undefined, nftForRenewal.length);\n  }\n\n  return (\n    <Collapsible isShown={isShown}>\n      <div\n        className={buildClassName(\n          styles.wrapper,\n          styles.wrapperFlex,\n          isLandscape && styles.wrapper_landscape,\n        )}\n        onClick={handleClick}\n      >\n        {renderPreview()}\n        <div>\n          {(renderedNftForRenewal ?? []).length === 1 ? lang('Renew Domain') : lang('Renew Domains')}\n          <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n          <p className={buildClassName(styles.text, styles.light)}>\n            {renderWarningMessage()}\n          </p>\n        </div>\n        <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n          <i className=\"icon-close\" aria-hidden />\n        </button>\n      </div>\n    </Collapsible>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { nfts } = selectCurrentAccountState(global) || {};\n\n  return {\n    orderedAddresses: nfts?.orderedAddresses,\n    byAddress: nfts?.byAddress,\n    dnsExpiration: nfts?.dnsExpiration,\n  };\n})(RenewDomainWarning));\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { MYTONWALLET_PROMO_URL } from '../../../../config';\nimport buildClassName from '../../../../util/buildClassName';\nimport { openUrl } from '../../../../util/openUrl';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useShowTransition from '../../../../hooks/useShowTransition';\n\nimport styles from './Warnings.module.scss';\n\ntype StateProps = {\n  isSecurityWarningHidden?: boolean;\n};\n\nfunction SecurityWarning({ isSecurityWarningHidden }: StateProps) {\n  const { closeSecurityWarning } = getActions();\n\n  const { shouldRender, ref } = useShowTransition({\n    isOpen: !isSecurityWarningHidden,\n    noMountTransition: true,\n    withShouldRender: true,\n  });\n  const { isLandscape } = useDeviceScreen();\n\n  const lang = useLang();\n\n  function handleClick() {\n    void openUrl(MYTONWALLET_PROMO_URL);\n  }\n\n  const handleClose = useLastCallback((e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n\n    closeSecurityWarning();\n  });\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.wrapper, isLandscape && styles.wrapper_landscape)}\n      onClick={handleClick}\n    >\n      {lang('Consider More Secure Version')}\n      <i className={buildClassName(styles.icon, 'icon-chevron-right')} aria-hidden />\n      <p className={styles.text}>{lang('Install our native app or browser extension.')}</p>\n\n      <button type=\"button\" className={styles.closeButton} aria-label={lang('Close')} onClick={handleClose}>\n        <i className=\"icon-close\" aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    return {\n      isSecurityWarningHidden: global.settings.isSecurityWarningHidden,\n    };\n  })(SecurityWarning),\n);\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport { IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../../../config';\nimport { selectCurrentAccountState, selectIsCurrentAccountViewMode } from '../../../../global/selectors';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from '../../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../../hooks/useDeviceScreen';\nimport useLang from '../../../../hooks/useLang';\n\nimport BackupWarning from './BackupWarning';\nimport RenewDomainWarning from './RenewDomainWarning';\nimport SecurityWarning from './SecurityWarning';\n\nimport styles from './Warnings.module.scss';\n\ntype OwnProps = {\n  onOpenBackupWallet: () => void;\n};\n\ntype StateProps = {\n  isTestnet?: boolean;\n  isBackupRequired: boolean;\n  isViewMode: boolean;\n};\n\nconst IS_UNSAFE_WEB = !IS_CORE_WALLET && !IS_ELECTRON && !IS_EXTENSION && !IS_IOS && !IS_ANDROID && !IS_TELEGRAM_APP;\n\nfunction Warnings({\n  isBackupRequired,\n  isTestnet,\n  isViewMode,\n  onOpenBackupWallet,\n}: OwnProps & StateProps) {\n  const { isPortrait } = useDeviceScreen();\n  const lang = useLang();\n\n  return (\n    <>\n      {isTestnet && (\n        <div className={isPortrait ? styles.portraitContainer : styles.container}>\n          <div className={styles.testnetWarning}>{lang('Testnet Version')}</div>\n        </div>\n      )}\n\n      {!isViewMode && (\n        <>\n          <BackupWarning isRequired={isBackupRequired} onOpenBackupWallet={onOpenBackupWallet} />\n          <RenewDomainWarning />\n        </>\n      )}\n      {IS_UNSAFE_WEB && <SecurityWarning />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal(\n    (global): StateProps => {\n      return {\n        isBackupRequired: Boolean(selectCurrentAccountState(global)?.isBackupRequired),\n        isTestnet: global.settings.isTestnet,\n        isViewMode: selectIsCurrentAccountViewMode(global),\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Warnings),\n);\n","import React, {\n  memo, useEffect, useRef,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiStakingState } from '../../api/types';\nimport { ActiveTab, ContentTab, type Theme } from '../../global/types';\n\nimport { IS_CAPACITOR, IS_CORE_WALLET } from '../../config';\nimport {\n  selectAccountStakingState,\n  selectCurrentAccount,\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectIsStakingDisabled,\n  selectIsSwapDisabled,\n} from '../../global/selectors';\nimport { useAccentColor } from '../../util/accentColor';\nimport buildClassName from '../../util/buildClassName';\nimport { getStatusBarHeight } from '../../util/capacitor';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { getStakingStateStatus } from '../../util/staking';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_TOUCH_ENV, REM,\n} from '../../util/windowEnvironment';\nimport windowSize from '../../util/windowSize';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useBackgroundMode, { isBackgroundModeActive } from '../../hooks/useBackgroundMode';\nimport { useOpenFromMainBottomSheet } from '../../hooks/useDelegatedBottomSheet';\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useElementVisibility from '../../hooks/useElementVisibility';\nimport useFlag from '../../hooks/useFlag';\nimport useInterval from '../../hooks/useInterval';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePreventPinchZoomGesture from '../../hooks/usePreventPinchZoomGesture';\n\nimport LinkingDomainModal from '../domain/LinkingDomainModal';\nimport RenewDomainModal from '../domain/RenewDomainModal';\nimport InvoiceModal from '../receive/InvoiceModal';\nimport ReceiveModal from '../receive/ReceiveModal';\nimport StakeModal from '../staking/StakeModal';\nimport StakingClaimModal from '../staking/StakingClaimModal';\nimport StakingInfoModal from '../staking/StakingInfoModal';\nimport UnstakeModal from '../staking/UnstakeModal';\nimport UpdateAvailable from '../ui/UpdateAvailable';\nimport VestingModal from '../vesting/VestingModal';\nimport VestingPasswordModal from '../vesting/VestingPasswordModal';\nimport { LandscapeActions, PortraitActions } from './sections/Actions';\nimport Card from './sections/Card';\nimport Content from './sections/Content';\nimport Header, { HEADER_HEIGHT_REM } from './sections/Header/Header';\nimport Warnings from './sections/Warnings';\n\nimport styles from './Main.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n}\n\ntype StateProps = {\n  currentTokenSlug?: string;\n  stakingState?: ApiStakingState;\n  isTestnet?: boolean;\n  isLedger?: boolean;\n  isViewMode?: boolean;\n  isStakingInfoModalOpen?: boolean;\n  isSwapDisabled?: boolean;\n  isStakingDisabled?: boolean;\n  isOnRampDisabled?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n};\n\nconst UPDATE_SWAPS_INTERVAL_NOT_FOCUSED = 15000; // 15 sec\nconst UPDATE_SWAPS_INTERVAL = 3000; // 3 sec\n\nfunction Main({\n  isActive,\n  currentTokenSlug,\n  stakingState,\n  isTestnet,\n  isViewMode,\n  isLedger,\n  isStakingInfoModalOpen,\n  isSwapDisabled,\n  isStakingDisabled,\n  isOnRampDisabled,\n  isMediaViewerOpen,\n  theme,\n  accentColorIndex,\n}: OwnProps & StateProps) {\n  const {\n    selectToken,\n    openBackupWalletModal,\n    setActiveContentTab,\n    closeStakingInfo,\n    openStakingInfoOrStart,\n    changeCurrentStaking,\n    setLandscapeActionsActiveTabIndex,\n    loadExploreSites,\n    openReceiveModal,\n    updatePendingSwaps,\n  } = getActions();\n\n  const cardRef = useRef<HTMLDivElement>();\n  const portraitContainerRef = useRef<HTMLDivElement>();\n  const landscapeContainerRef = useRef<HTMLDivElement>();\n\n  const safeAreaTop = IS_CAPACITOR ? getStatusBarHeight() : windowSize.get().safeAreaTop;\n  const [isFocused, markIsFocused, unmarkIsFocused] = useFlag(!isBackgroundModeActive());\n\n  const stakingStatus = stakingState ? getStakingStateStatus(stakingState) : 'inactive';\n\n  useBackgroundMode(unmarkIsFocused, markIsFocused);\n\n  useOpenFromMainBottomSheet('receive', openReceiveModal);\n  usePreventPinchZoomGesture(isMediaViewerOpen);\n\n  const { isPortrait, isLandscape } = useDeviceScreen();\n\n  useEffectOnce(() => {\n    if (IS_CORE_WALLET) return;\n\n    loadExploreSites({ isLandscape });\n  });\n\n  useInterval(updatePendingSwaps, isFocused ? UPDATE_SWAPS_INTERVAL : UPDATE_SWAPS_INTERVAL_NOT_FOCUSED);\n\n  // Use scroll detection for portrait mode\n  const { isVisible: isPageAtTop } = useElementVisibility({\n    isDisabled: !isPortrait || !isActive,\n    targetRef: cardRef,\n    rootMargin: `-${HEADER_HEIGHT_REM * REM + safeAreaTop}px 0px 0px 0px`,\n    threshold: [1],\n  });\n\n  const { isVisible: shouldHideBalanceInHeader } = useElementVisibility({\n    isDisabled: !isPortrait || !isActive,\n    targetRef: cardRef,\n    rootMargin: `-${HEADER_HEIGHT_REM * REM}px 0px 0px 0px`,\n  });\n\n  const handleTokenCardClose = useLastCallback(() => {\n    selectToken({ slug: undefined });\n    setActiveContentTab({ tab: ContentTab.Assets });\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV || !isPortrait || !portraitContainerRef.current || !currentTokenSlug) {\n      return undefined;\n    }\n\n    return captureEvents(portraitContainerRef.current, {\n      excludedClosestSelector: '.token-card',\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Right) {\n          handleTokenCardClose();\n          return true;\n        }\n\n        return false;\n      },\n    });\n  }, [currentTokenSlug, handleTokenCardClose, isPortrait]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor(isPortrait ? portraitContainerRef : landscapeContainerRef, appTheme, accentColorIndex);\n\n  const handleEarnClick = useLastCallback((stakingId?: string) => {\n    if (stakingId) changeCurrentStaking({ stakingId });\n\n    if (isPortrait || isViewMode) {\n      openStakingInfoOrStart();\n    } else {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n  });\n\n  function renderPortraitLayout() {\n    return (\n      <div ref={portraitContainerRef} className={styles.portraitContainer}>\n        <div className={styles.head}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n\n          <Header withBalance={!shouldHideBalanceInHeader} isScrolled={!isPageAtTop} />\n\n          <Card\n            ref={cardRef}\n            onTokenCardClose={handleTokenCardClose}\n            onYieldClick={handleEarnClick}\n          />\n\n          {!isViewMode && (\n            <PortraitActions\n              containerRef={portraitContainerRef}\n              isTestnet={isTestnet}\n              stakingStatus={stakingStatus}\n              isStakingDisabled={isStakingDisabled}\n              isSwapDisabled={isSwapDisabled}\n              isOnRampDisabled={isOnRampDisabled}\n              onEarnClick={handleEarnClick}\n            />\n          )}\n        </div>\n\n        <Content onStakedTokenClick={handleEarnClick} />\n      </div>\n    );\n  }\n\n  function renderLandscapeLayout() {\n    return (\n      <div ref={landscapeContainerRef} className={styles.landscapeContainer}>\n        <div className={buildClassName(styles.sidebar, 'custom-scroll')}>\n          <Warnings onOpenBackupWallet={openBackupWalletModal} />\n\n          <Header />\n\n          <Card onTokenCardClose={handleTokenCardClose} onYieldClick={handleEarnClick} />\n          {!isViewMode && (\n            <LandscapeActions\n              containerRef={landscapeContainerRef}\n              stakingStatus={stakingStatus}\n              isLedger={isLedger}\n              theme={theme}\n            />\n          )}\n        </div>\n        <div className={styles.main}>\n          <Content onStakedTokenClick={handleEarnClick} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {!IS_DELEGATED_BOTTOM_SHEET && (isPortrait ? renderPortraitLayout() : renderLandscapeLayout())}\n\n      <StakeModal />\n      <StakingInfoModal isOpen={isStakingInfoModalOpen} onClose={closeStakingInfo} />\n      <ReceiveModal />\n      <InvoiceModal />\n      <UnstakeModal />\n      <StakingClaimModal />\n      <VestingModal />\n      <VestingPasswordModal />\n      <RenewDomainModal />\n      <LinkingDomainModal />\n      {!IS_ELECTRON && !IS_DELEGATED_BOTTOM_SHEET && <UpdateAvailable />}\n    </>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>(\n    (global): StateProps => {\n      const { ledger } = selectCurrentAccount(global) || {};\n      const accountState = selectCurrentAccountState(global);\n      const { currentTokenSlug } = accountState ?? {};\n\n      const { isOnRampDisabled } = global.restrictions;\n\n      const stakingState = global.currentAccountId\n        ? selectAccountStakingState(global, global.currentAccountId)\n        : undefined;\n\n      return {\n        stakingState,\n        currentTokenSlug,\n        isTestnet: global.settings.isTestnet,\n        isLedger: Boolean(ledger),\n        isViewMode: selectIsCurrentAccountViewMode(global),\n        isStakingInfoModalOpen: global.isStakingInfoModalOpen,\n        isMediaViewerOpen: Boolean(global.mediaViewer?.mediaId),\n        isSwapDisabled: selectIsSwapDisabled(global),\n        isStakingDisabled: selectIsStakingDisabled(global),\n        isOnRampDisabled,\n        theme: global.settings.theme,\n        accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n      };\n    },\n    (global, _, stickToFirst) => stickToFirst(global.currentAccountId),\n  )(Main),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"portraitContainer\":\"c4YKj_bz\",\"head\":\"rfAUzAO1\",\"landscapeContainer\":\"nZyFvDbE\",\"sidebar\":\"mpB6taR7\",\"main\":\"Sr6Y7sw5\"};","import React, { memo } from '../../../lib/teact/teact';\n\nimport { IS_CAPACITOR } from '../../../config';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\n\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  onClearError: NoneToVoidFunction;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction AddAccountPasswordModal({\n  isActive,\n  isLoading,\n  error,\n  onClearError,\n  onSubmit,\n  onBack,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Enter Password')} onClose={onClose} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        error={error}\n        operationType=\"passcode\"\n        withCloseButton={IS_CAPACITOR}\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={onClearError}\n      />\n    </>\n  );\n}\n\nexport default memo(AddAccountPasswordModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"ZNc8nV1w\",\"modalContent\":\"BGrP96yj\",\"actionsSection\":\"cOGOPS4Q\",\"actionsSectionShift\":\"t8FNRQDi\",\"importText\":\"nnhxqZYR\",\"walletVersionBlock\":\"Ai_X8CqD\",\"walletVersionText\":\"d8gw7TAv\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { LedgerWalletInfo } from '../../../util/ledger/types';\nimport { type Account, SettingsState } from '../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../config';\nimport { selectIsPasswordPresent, selectNetworkAccounts } from '../../../global/selectors';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_LEDGER_SUPPORTED } from '../../../util/windowEnvironment';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AuthImportViewAccount from '../../auth/AuthImportViewAccount';\nimport LedgerConnect from '../../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../../ledger/LedgerSelectWallets';\nimport ListItem from '../../ui/ListItem';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\nimport AddAccountPasswordModal from './AddAccountPasswordModal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './AddAccountModal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  isLoading?: boolean;\n  error?: string;\n  isPasswordPresent: boolean;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  withOtherWalletVersions?: boolean;\n  forceAddingTonOnlyAccount?: boolean;\n}\n\nconst enum RenderingState {\n  Initial,\n  Password,\n\n  ConnectHardware,\n  SelectAccountsHardware,\n\n  ViewMode,\n}\n\nfunction AddAccountModal({\n  isOpen,\n  isLoading,\n  error,\n  hardwareWallets,\n  isPasswordPresent,\n  accounts,\n  withOtherWalletVersions,\n  forceAddingTonOnlyAccount,\n}: StateProps) {\n  const {\n    addAccount,\n    clearAccountError,\n    closeAddAccountModal,\n    afterSelectHardwareWallets,\n    openSettingsWithState,\n    resetHardwareWalletConnect,\n    clearAccountLoading,\n  } = getActions();\n\n  const lang = useLang();\n  const [renderingKey, setRenderingKey] = useState<RenderingState>(RenderingState.Initial);\n\n  const [isNewAccountImporting, setIsNewAccountImporting] = useState<boolean>(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    clearAccountError();\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setRenderingKey(RenderingState.Initial);\n    setIsNewAccountImporting(false);\n    clearAccountLoading();\n  });\n\n  const handleNewAccountClick = useLastCallback(() => {\n    if (!isPasswordPresent) {\n      addAccount({\n        method: 'createAccount',\n        password: '',\n      });\n      return;\n    }\n\n    if (getHasInMemoryPassword()) {\n      void getInMemoryPassword().then((password) => addAccount({\n        method: 'createAccount',\n        password: password!,\n      }));\n    } else {\n      setRenderingKey(RenderingState.Password);\n      setIsNewAccountImporting(false);\n    }\n  });\n  useEffect(() => {\n    if (forceAddingTonOnlyAccount) {\n      handleNewAccountClick();\n    }\n  }, [forceAddingTonOnlyAccount]);\n\n  const handleImportAccountClick = useLastCallback(() => {\n    if (!isPasswordPresent) {\n      addAccount({\n        method: 'importMnemonic',\n        password: '',\n      });\n      return;\n    }\n\n    setIsNewAccountImporting(true);\n\n    if (getHasInMemoryPassword()) {\n      void getInMemoryPassword().then((password) => addAccount({\n        method: 'importMnemonic',\n        password: password!,\n      }));\n    } else {\n      setRenderingKey(RenderingState.Password);\n    }\n  });\n\n  const handleViewModeWalletClick = useLastCallback(() => {\n    setRenderingKey(RenderingState.ViewMode);\n  });\n\n  const handleImportHardwareWalletClick = useLastCallback(() => {\n    resetHardwareWalletConnect();\n    setRenderingKey(RenderingState.ConnectHardware);\n  });\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    closeAddAccountModal();\n  });\n\n  const handleHardwareWalletConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setRenderingKey(RenderingState.SelectAccountsHardware);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    addAccount({ method: isNewAccountImporting ? 'importMnemonic' : 'createAccount', password });\n  });\n\n  const handleOpenSettingWalletVersion = useLastCallback(() => {\n    closeAddAccountModal();\n    openSettingsWithState({ state: SettingsState.WalletVersion });\n  });\n\n  function renderSelector() {\n    return (\n      <>\n        <ModalHeader title={lang('Add Wallet')} onClose={closeAddAccountModal} />\n\n        <div className={buildClassName(styles.actionsSection, styles.actionsSectionShift)}>\n          <ListItem\n            icon=\"wallet-add\"\n            label={lang('Create New Wallet')}\n            onClick={handleNewAccountClick}\n            isLoading={!isNewAccountImporting && isLoading}\n          />\n        </div>\n\n        <span className={styles.importText}>{lang('or import from')}</span>\n\n        <div className={styles.actionsSection}>\n          <ListItem\n            icon=\"key\"\n            label={lang(IS_CORE_WALLET ? '24 Secret Words' : '12/24 Secret Words')}\n            onClick={handleImportAccountClick}\n            isLoading={isNewAccountImporting && isLoading}\n          />\n          {IS_LEDGER_SUPPORTED && (\n            <ListItem\n              icon=\"ledger-alt\"\n              label={lang('Ledger')}\n              onClick={handleImportHardwareWalletClick}\n            />\n          )}\n        </div>\n\n        {!IS_CORE_WALLET && (\n          <div className={styles.actionsSection}>\n            <ListItem\n              icon=\"wallet-view\"\n              label={lang('View Any Address')}\n              onClick={handleViewModeWalletClick}\n            />\n          </div>\n        )}\n\n        {withOtherWalletVersions && (\n          <div className={styles.walletVersionBlock}>\n            <span>\n              {lang('$wallet_switch_version_1', {\n                action: (\n                  <div\n                    role=\"button\"\n                    tabIndex={0}\n                    onClick={handleOpenSettingWalletVersion}\n                    className={styles.walletVersionText}\n                  >\n                    {lang('$wallet_switch_version_2')}\n                  </div>\n                ),\n              })}\n            </span>\n          </div>\n        )}\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: RenderingState) {\n    switch (currentKey) {\n      case RenderingState.Initial:\n        return renderSelector();\n      case RenderingState.Password:\n        return (\n          <AddAccountPasswordModal\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onClearError={clearAccountError}\n            onSubmit={handleSubmit}\n            onBack={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareWalletConnected}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.SelectAccountsHardware:\n        return (\n          <LedgerSelectWallets\n            accounts={accounts}\n            hardwareWallets={hardwareWallets}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n      case RenderingState.ViewMode:\n        return (\n          <AuthImportViewAccount\n            isActive={isActive}\n            isLoading={isLoading}\n            onCancel={handleBackClick}\n            onClose={closeAddAccountModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"add-account\"\n      forceFullNative={renderingKey === RenderingState.Password}\n      onCloseAnimationEnd={handleModalClose}\n      onClose={closeAddAccountModal}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={\n          renderingKey === RenderingState.Initial && !getHasInMemoryPassword() ? RenderingState.Password : undefined\n        }\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const { byId: versionById } = global.walletVersions ?? {};\n  const versions = versionById?.[global.currentAccountId!];\n  const withOtherWalletVersions = !!versions?.length;\n\n  const { auth: { forceAddingTonOnlyAccount }, hardware: { hardwareWallets } } = global;\n\n  return {\n    isOpen: global.isAddAccountModalOpen,\n    isLoading: global.accounts?.isLoading,\n    error: global.accounts?.error,\n    accounts,\n    isPasswordPresent,\n    hardwareWallets,\n    withOtherWalletVersions,\n    forceAddingTonOnlyAccount,\n  };\n})(AddAccountModal));\n","import React, {\n  memo,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport CheckWordsForm from '../common/backup/CheckWordsForm';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  isInModal?: boolean;\n  mnemonic?: string[];\n  checkIndexes?: number[];\n  buttonLabel: string;\n  onSubmit: NoneToVoidFunction;\n  onCancel: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicCheck({\n  isActive, isInModal, mnemonic, checkIndexes, buttonLabel, onCancel, onSubmit, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Let\\'s Check!')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          {lang('Lets make sure your secrets words are recorded correctly.')}\n        </p>\n\n        <CheckWordsForm\n          descriptionClassName={buildClassName(styles.info, styles.small)}\n          isActive={isActive}\n          mnemonic={mnemonic}\n          checkIndexes={checkIndexes}\n          isInModal={isInModal}\n          errorClassName={buildClassName(styles.error, styles.small)}\n          onSubmit={onSubmit}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onCancel} className={modalStyles.button}>{lang('Back')}</Button>\n          <Button isPrimary forFormId=\"check_mnemonic_form\" className={modalStyles.button}>{buttonLabel}</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicCheck);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SecretWordsList from '../common/backup/SecretWordsList';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  mnemonic?: string[];\n  onClose: NoneToVoidFunction;\n  onNext?: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, mnemonic, onNext, onClose,\n}: OwnProps) {\n  const lang = useLang();\n  const wordsCount = mnemonic?.length || 0;\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('%1$d Secret Words', wordsCount) as string} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <SecretWordsList mnemonic={mnemonic} />\n        {onNext && (\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={onNext}>{lang('Let\\'s Check')}</Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo } from '../../lib/teact/teact';\n\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport Emoji from '../ui/Emoji';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  privateKeyHex?: string;\n  onClose: NoneToVoidFunction;\n};\n\nfunction MnemonicList({\n  isActive, privateKeyHex, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Private Key')} onClose={onClose} />\n      <div className={buildClassName(styles.mnemonicContainer, modalStyles.transitionContent, 'custom-scroll')}>\n        <p className={buildClassName(styles.info, styles.small)}>\n          <Emoji from=\"\" />{' '}{renderText(lang('$mnemonic_warning'))}\n        </p>\n        <p className={styles.privateKey}>\n          {privateKeyHex}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(MnemonicList);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport SafetyRulesContent from '../common/backup/SafetyRulesContent';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Auth.module.scss';\n\ntype OwnProps = {\n  isActive?: boolean;\n  onSubmit: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n};\n\nfunction SafetyRules({ isActive, onSubmit, onClose }: OwnProps) {\n  const lang = useLang();\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n  const canSubmit = writedownAccepted && openWalletAccepted && canBeStolenAccepted;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!canSubmit) {\n      return;\n    }\n\n    onSubmit();\n  });\n\n  return (\n    <div className={modalStyles.transitionContentWrapper}>\n      <ModalHeader title={lang('Safety Rules')} onClose={onClose} />\n      <div className={buildClassName(modalStyles.transitionContent, 'custom-scroll')}>\n        <SafetyRulesContent\n          customStickerClassName={styles.modalSticker}\n          customButtonWrapperClassName={modalStyles.buttons}\n          isFullSizeButton={false}\n          isActive={isActive}\n          isFirstCheckboxSelected={writedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          textFirst={lang('$safety_rules_one')}\n          textSecond={lang('$safety_rules_two')}\n          textThird={lang('$safety_rules_three')}\n          onFirstCheckboxClick={setWritedownAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SafetyRules);\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { IS_CAPACITOR, MNEMONIC_COUNT } from '../../../config';\nimport { selectMnemonicForCheck } from '../../../global/actions/api/auth';\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnError, vibrateOnSuccess } from '../../../util/haptics';\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { callApi } from '../../../api';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport MnemonicCheck from '../../auth/MnemonicCheck';\nimport MnemonicList from '../../auth/MnemonicList';\nimport MnemonicPrivateKey from '../../auth/MnemonicPrivateKey';\nimport SafetyRules from '../../auth/SafetyRules';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './BackupModal.module.scss';\n\ntype OwnProps = {\n  isOpen?: boolean;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  currentAccountId?: string;\n  isBackupRequired?: boolean;\n};\n\nenum SLIDES {\n  confirm,\n  password,\n  mnemonic,\n  check,\n}\n\nfunction BackupModal({\n  isOpen, currentAccountId, onClose, isBackupRequired,\n}: OwnProps & StateProps) {\n  const { setIsBackupRequired, setIsPinAccepted, clearIsPinAccepted } = getActions();\n\n  const lang = useLang();\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n  const [checkIndexes, setCheckIndexes] = useState<number[]>([]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | undefined>();\n\n  const mnemonicRef = useRef<string[] | undefined>(undefined);\n  const noResetFullNativeOnBlur = currentSlide === SLIDES.confirm || currentSlide === SLIDES.password;\n\n  useEffect(() => {\n    mnemonicRef.current = undefined;\n  }, [isOpen]);\n\n  const handleSafetyConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.mnemonic);\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    setIsLoading(true);\n    mnemonicRef.current = await callApi('fetchMnemonic', currentAccountId!, password);\n\n    if (!mnemonicRef.current) {\n      setError('Wrong password, please try again.');\n      setIsLoading(false);\n      void vibrateOnError();\n      return;\n    }\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n      clearIsPinAccepted();\n    }\n\n    setIsLoading(false);\n    setNextKey(SLIDES.check);\n    setCurrentSlide(SLIDES.mnemonic);\n  });\n\n  const handleBackupErrorUpdate = useLastCallback(() => {\n    setError(undefined);\n  });\n\n  const handleCheckMnemonic = useLastCallback(() => {\n    setCheckIndexes(selectMnemonicForCheck(mnemonicRef.current?.length || MNEMONIC_COUNT));\n    setCurrentSlide(SLIDES.check);\n    setNextKey(undefined);\n  });\n\n  const handleRestartCheckMnemonic = useLastCallback(() => {\n    setCurrentSlide(SLIDES.mnemonic);\n    setNextKey(SLIDES.check);\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    setIsLoading(false);\n    setError(undefined);\n    setCurrentSlide(SLIDES.confirm);\n    setNextKey(SLIDES.password);\n  });\n\n  const handleCheckMnemonicSubmit = useLastCallback(() => {\n    setIsBackupRequired({ isMnemonicChecked: true });\n    onClose();\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    const mnemonic = mnemonicRef.current;\n\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return (\n          <SafetyRules\n            isActive={isActive}\n            onSubmit={handleSafetyConfirm}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.password:\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={onClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error}\n              withCloseButton={IS_CAPACITOR}\n              submitLabel={lang('$back_up_auth')}\n              cancelLabel={lang('Cancel')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={onClose}\n              onUpdate={handleBackupErrorUpdate}\n            />\n          </>\n        );\n\n      case SLIDES.mnemonic:\n        return mnemonic && isMnemonicPrivateKey(mnemonic) ? (\n          <MnemonicPrivateKey\n            privateKeyHex={mnemonic[0]}\n            onClose={onClose}\n          />\n        ) : (\n          <MnemonicList\n            isActive={isActive}\n            mnemonic={mnemonic}\n            onNext={isBackupRequired ? handleCheckMnemonic : undefined}\n            onClose={onClose}\n          />\n        );\n\n      case SLIDES.check:\n        return (\n          <MnemonicCheck\n            isActive={isActive}\n            isInModal\n            mnemonic={mnemonicRef.current as string[]}\n            checkIndexes={checkIndexes}\n            buttonLabel={lang('Done')}\n            onSubmit={handleCheckMnemonicSubmit}\n            onCancel={handleRestartCheckMnemonic}\n            onClose={onClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      hasCloseButton\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"backup\"\n      forceFullNative={currentSlide === SLIDES.password}\n      noResetFullNativeOnBlur={noResetFullNativeOnBlur}\n      onClose={onClose}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { isBackupRequired } = selectCurrentAccountState(global) || {};\n  return { currentAccountId: global.currentAccountId, isBackupRequired };\n})(BackupModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"S7OzI0EB\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"gDlNRq3N\",\"dialog\":\"meAvQTC9\",\"container\":\"EWcWOV6u\",\"menuButton\":\"hLEOc4Ou\",\"closeButton\":\"mlPdYaCz\",\"icon\":\"xQLJ1EYA\",\"nftInfo\":\"VUUxnoTG\",\"thumbnail\":\"_LL4RfB7\",\"info\":\"j87GjThh\",\"nftName\":\"O9BeJGjg\",\"collectionName\":\"EHtLitju\",\"content\":\"uo4QatBc\",\"noData\":\"Tg1GGhMT\",\"label\":\"SiE9CJ9J\",\"description\":\"NsrMt36R\",\"attributesList\":\"bDlzAhU_\",\"attributeName\":\"Q59iVuTN\",\"attributeValue\":\"d7Ra9vbr\",\"first\":\"o8kAOnv4\",\"last\":\"gw8tS0Ge\",\"expandButton\":\"Wgu0lfq9\",\"collectionNameIcon\":\"BjwLITqA\",\"expandButtonIcon\":\"PcBlbvHP\"};","import React, { memo, useEffect, useRef, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiNft, ApiNftAttribute } from '../../../api/types';\nimport { type IAnchorPosition, MediaType } from '../../../global/types';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { getCountDaysToDate } from '../../../util/dateFormat';\nimport { getTonDnsExpirationDate } from '../../../util/dns';\nimport { stopEvent } from '../../../util/domEvents';\nimport { disableSwipeToClose, enableSwipeToClose } from '../../../util/modalSwipeManager';\nimport { IS_ELECTRON, IS_MAC_OS } from '../../../util/windowEnvironment';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Modal from '../../ui/Modal';\nimport NftMenu from '../sections/Content/NftMenu';\n\nimport styles from './NftAttributesModal.module.scss';\n\ninterface StateProps {\n  nft?: ApiNft;\n  dnsExpiration?: Record<string, number>;\n}\n\nconst FOLD_LIMIT = 5;\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction NftAttributesModal({ nft, dnsExpiration }: StateProps) {\n  const { closeNftAttributesModal, openMediaViewer, openNftCollection } = getActions();\n\n  const lang = useLang();\n  const menuButtonRef = useRef<HTMLButtonElement>();\n  const [menuAnchor, setMenuAnchor] = useState<IAnchorPosition>();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = !!nft;\n  const renderedNft = useCurrentOrPrev(nft, true);\n  const { metadata: { lottie, attributes } } = renderedNft || { metadata: {} };\n  const attributesCount = attributes?.length || 0;\n  const [isFolded, setIsFolded] = useState(attributesCount > FOLD_LIMIT);\n  const tonDnsExpiration = getTonDnsExpirationDate(renderedNft, dnsExpiration);\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const list = attributes?.slice(0, isFolded ? FOLD_LIMIT : undefined) || [];\n  const isNoData = !renderedNft?.description && list.length === 0;\n\n  useSyncEffect(() => {\n    setIsFolded(attributesCount > FOLD_LIMIT + 1);\n  }, [attributesCount, nft]);\n\n  useEffect(() => {\n    if (!isOpen) return undefined;\n\n    disableSwipeToClose();\n\n    return enableSwipeToClose;\n  }, [isOpen]);\n\n  const handleOpenMenu = useLastCallback(() => {\n    const { right: x, y } = menuButtonRef.current!.getBoundingClientRect();\n    setMenuAnchor({ x, y });\n  });\n\n  const handleCloseMenu = useLastCallback(() => {\n    setMenuAnchor(undefined);\n  });\n\n  const handleExpand = useLastCallback((e: React.MouseEvent<HTMLAnchorElement>) => {\n    stopEvent(e);\n\n    setIsFolded(false);\n  });\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({ mediaId: renderedNft!.address, mediaType: MediaType.Nft });\n  });\n\n  const handleCollectionClick = useLastCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    stopEvent(e);\n\n    closeNftAttributesModal(undefined, { forceOnHeavyAnimation: true });\n    openNftCollection({ address: renderedNft!.collectionAddress! }, { forceOnHeavyAnimation: true });\n  });\n\n  const renderAttributeRow = (attribute: ApiNftAttribute, index: number) => {\n    const isFirst = index === 0;\n    const isLast = index === list.length - 1;\n\n    return (\n      <tr key={index}>\n        <th className={buildClassName(styles.attributeName, isFirst && styles.first, isLast && styles.last)}>\n          {attribute.trait_type}\n        </th>\n        <td className={buildClassName(styles.attributeValue, isFirst && styles.first, isLast && styles.last)}>\n          {attribute.value}\n        </td>\n      </tr>\n    );\n  };\n\n  if (!renderedNft) return undefined;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      className={styles.modal}\n      dialogClassName={styles.dialog}\n      contentClassName={styles.container}\n      onClose={closeNftAttributesModal}\n    >\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.closeButton}\n        onClick={() => closeNftAttributesModal()}\n      >\n        <i\n          className={buildClassName(\n            styles.icon,\n            styles.actionIcon,\n            isPortrait && !(IS_ELECTRON && IS_MAC_OS) ? 'icon-chevron-left' : 'icon-close',\n          )}\n          aria-hidden\n        />\n      </button>\n      <NftMenu\n        nft={renderedNft}\n        ref={menuButtonRef}\n        dnsExpireInDays={dnsExpireInDays}\n        menuAnchor={menuAnchor}\n        className={styles.menuButton}\n        onOpen={handleOpenMenu}\n        onClose={handleCloseMenu}\n      />\n      <div className={buildClassName(styles.nftInfo, 'nft-container')} data-nft-address={renderedNft.address}>\n        {lottie ? (\n          <AnimatedIconWithPreview\n            size={ANIMATED_ICON_SIZE}\n            shouldStretch\n            play={isOpen}\n            noLoop={false}\n            tgsUrl={lottie}\n            previewUrl={renderedNft.thumbnail}\n            className={styles.thumbnail}\n            noPreviewTransition\n            onClick={handleNftClick}\n          />\n        ) : (\n          <img\n            src={renderedNft.image || renderedNft.thumbnail}\n            alt={renderedNft.name}\n            role=\"button\"\n            tabIndex={0}\n            className={styles.thumbnail}\n            onClick={handleNftClick}\n          />\n        )}\n        <div className={styles.info}>\n          <div className={styles.nftName}>{renderedNft.name}</div>\n          {renderedNft.collectionName && (\n            <div className={styles.collectionName} onClick={handleCollectionClick} tabIndex={0} role=\"button\">\n              {renderedNft.collectionName}\n              <i className={buildClassName(styles.collectionNameIcon, 'icon-chevron-right')} aria-hidden />\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className={buildClassName(styles.content, isNoData && styles.noData)}>\n        {isNoData && lang('No additional data.')}\n\n        {renderedNft.description && (\n          <>\n            <h3 className={styles.label}>{lang('Description')}</h3>\n            <div className={styles.description}>\n              {renderedNft.description}\n            </div>\n          </>\n        )}\n\n        {list.length > 0 && (\n          <>\n            <h3 className={styles.label}>{lang('Attributes')}</h3>\n            <table className={styles.attributesList}>\n              <tbody>\n                {list.map(renderAttributeRow)}\n              </tbody>\n            </table>\n\n            {isFolded && (\n              <a href=\"#\" className={styles.expandButton} onClick={handleExpand}>\n                {lang('Show All')}\n                <i className={buildClassName(styles.expandButtonIcon, 'icon-chevron-down')} aria-hidden />\n              </a>\n            )}\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentNftForAttributes, nfts } = selectCurrentAccountState(global) || {};\n  const { dnsExpiration } = nfts || {};\n\n  return {\n    nft: currentNftForAttributes,\n    dnsExpiration,\n  };\n})(NftAttributesModal));\n","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiChain, ApiCountryCode } from '../../../api/types';\nimport type { Theme } from '../../../global/types';\n\nimport { selectAccount } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport useLang from '../../../hooks/useLang';\n\nimport Modal from '../../ui/Modal';\nimport Spinner from '../../ui/Spinner';\n\nimport styles from './OnRampWidgetModal.module.scss';\n\ninterface StateProps {\n  chain?: ApiChain;\n  address?: string;\n  countryCode?: ApiCountryCode;\n  theme: Theme;\n}\n\nconst ANIMATION_TIMEOUT = 200;\n\nfunction OnRampWidgetModal({\n  chain, address, countryCode, theme,\n}: StateProps) {\n  const {\n    closeOnRampWidgetModal,\n    showError,\n  } = getActions();\n\n  const isOpen = Boolean(chain) && Boolean(address);\n  const lang = useLang();\n  const animationTimeoutRef = useRef<number>();\n  const [isAnimationInProgress, setIsAnimationInProgress] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [iframeSrc, setIframeSrc] = useState('');\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsAnimationInProgress(true);\n      setIsLoading(true);\n      setIframeSrc('');\n    }\n\n    return () => window.clearTimeout(animationTimeoutRef.current);\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n\n    if (countryCode === 'RU') {\n      setIframeSrc(`https://dreamwalkers.io/ru/mytonwallet/?wallet=${address}&give=CARDRUB&take=TON&type=buy`);\n      return;\n    }\n\n    void (async () => {\n      const response = await callApi('getMoonpayOnrampUrl', chain, address, appTheme);\n\n      if (response && 'error' in response) {\n        showError({ error: response.error });\n      } else {\n        setIframeSrc(response?.url || '');\n      }\n    })();\n  }, [address, appTheme, chain, countryCode, isOpen]);\n\n  const onIframeLoaded = () => {\n    setIsLoading(false);\n\n    animationTimeoutRef.current = window.setTimeout(() => {\n      setIsAnimationInProgress(false);\n    }, ANIMATION_TIMEOUT);\n  };\n\n  function renderContent() {\n    if (!iframeSrc) return undefined;\n\n    return (\n      <iframe\n        title=\"On Ramp Widget\"\n        onLoad={onIframeLoaded}\n        className={buildClassName(styles.iframe, !isLoading && styles.fadeIn)}\n        width=\"100%\"\n        height=\"100%\"\n        frameBorder=\"none\"\n        allow=\"autoplay; camera; microphone; payment\"\n        src={iframeSrc}\n      >\n        {lang('Cannot load widget')}\n      </iframe>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      title={lang('Buy with Card')}\n      dialogClassName={styles.modalDialog}\n      forceFullNative\n      nativeBottomSheetKey=\"onramp-widget\"\n      onClose={closeOnRampWidgetModal}\n    >\n      <div className={styles.content}>\n        <div className={buildClassName(\n          styles.loaderContainer,\n          !isLoading && styles.fadeOut,\n          !isAnimationInProgress && styles.inactive,\n        )}\n        >\n          <Spinner />\n        </div>\n        {renderContent()}\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { addressByChain } = selectAccount(global, global.currentAccountId!) || {};\n  const { countryCode } = global.restrictions;\n  const { chainForOnRampWidgetModal: chain } = global;\n\n  return {\n    chain,\n    address: chain && addressByChain?.[chain],\n    countryCode,\n    theme: global.settings.theme,\n  };\n})(OnRampWidgetModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"LcOFGyVq\",\"content\":\"ccR1JZvK\",\"iframe\":\"l_Jb77z9\",\"loaderContainer\":\"RfEkSEyB\",\"fadeOut\":\"X5xveqOQ\",\"fade-out-opacity\":\"MtIO76aE\",\"fadeOutOpacity\":\"MtIO76aE\",\"fadeIn\":\"ZRxV9CWH\",\"fade-in-opacity\":\"clpdzldq\",\"fadeInOpacity\":\"clpdzldq\",\"inactive\":\"m3F53tk6\"};","// extracted by mini-css-extract-plugin\nexport default {\"title\":\"D1xdmb1p\",\"square\":\"cQ9fX2T7\",\"squareInner\":\"Y5_NorwC\",\"closeButton\":\"CxvvAWsI\",\"flashLightButton\":\"GRYD1l1J\",\"flashLightButtonEnabled\":\"om10jZuu\",\"documentRoot\":\"Fq9FxTrz\",\"scanner\":\"D8GViz8d\",\"scannerStarted\":\"MmIKemUX\"};","import type { StartScanOptions } from '@capacitor-mlkit/barcode-scanning';\nimport { BarcodeFormat, BarcodeScanner } from '@capacitor-mlkit/barcode-scanning';\nimport React, { memo, useRef, useState } from '../../../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../../../lib/teact/teact-dom';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { pause } from '../../../util/schedulers';\nimport { DPR, IS_DELEGATING_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './QrScannerModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  onClose: NoneToVoidFunction;\n}\n\ntype Point = [number, number];\ntype Square = [Point, Point, Point, Point];\n\nconst START_SCAN_DELAY_MS = IS_IOS ? 160 : 360;\nconst MODAL_ANIMATION_DURATION_MS = IS_IOS ? 650 : 500;\nconst DESTROY_SCANNER_DELAY_MS = IS_IOS ? 250 : 500;\n\nfunction QrScannerModal({ isOpen, onClose }: OwnProps) {\n  const {\n    handleQrCode,\n  } = getActions();\n\n  const [isFlashlightAvailable, setIsFlashlightAvailable] = useState(false);\n  const [isFlashlightEnabled, setIsFlashlightEnabled] = useState(false);\n  const [isScannerStarted, setIsScannerStarted] = useState(false);\n  const { ref: flashlightRef, shouldRender: flashlightShouldRender } = useShowTransition({\n    isOpen: isFlashlightAvailable,\n    withShouldRender: true,\n  });\n\n  const lang = useLang();\n\n  const scanSquareRef = useRef<HTMLDivElement>();\n\n  const onCloseAnimationEnd = useLastCallback(async () => {\n    removeExtraClass(document.documentElement, styles.documentRoot);\n    await BarcodeScanner.stopScan();\n  });\n\n  const handleClose = useLastCallback(() => {\n    setIsScannerStarted(false);\n    setIsFlashlightEnabled(false);\n    onClose();\n  });\n\n  const startScan = useLastCallback(async () => {\n    const options: StartScanOptions = {\n      formats: [BarcodeFormat.QrCode],\n    };\n\n    const scanAreaCoordinates = getDomNodeDimensions(scanSquareRef.current);\n\n    await BarcodeScanner.removeAllListeners();\n    const listener = await BarcodeScanner.addListener(\n      'barcodesScanned',\n      async ({ barcodes: [barcode] }) => {\n        let qrCodeCoordinates = barcode.cornerPoints;\n        qrCodeCoordinates = qrCodeCoordinates ? sortCoordinatesClockwise(qrCodeCoordinates) : undefined;\n\n        if (\n          !scanAreaCoordinates\n          || !qrCodeCoordinates\n          || isQrCodeOutsideScanArea(scanAreaCoordinates, qrCodeCoordinates)\n        ) {\n          return;\n        }\n\n        await listener.remove();\n        await vibrateOnSuccess();\n        handleQrCode({ data: barcode.rawValue });\n        handleClose();\n        await pause(DESTROY_SCANNER_DELAY_MS);\n        if (IS_IOS) {\n          removeExtraClass(document.documentElement, styles.documentRoot);\n        }\n      },\n    );\n\n    setIsScannerStarted(true);\n    await BarcodeScanner.startScan(options);\n\n    // Wait until the scanner is started, after that we can determine if flashlight is available\n    if (!isFlashlightAvailable) {\n      void BarcodeScanner\n        .isTorchAvailable()\n        .then((result) => {\n          setIsFlashlightAvailable(result.available);\n        });\n    }\n    void BarcodeScanner\n      .isTorchEnabled()\n      .then((result) => {\n        setIsFlashlightEnabled(result.enabled);\n      });\n  });\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    if (IS_DELEGATING_BOTTOM_SHEET) return undefined;\n\n    let startScanTimeoutId: number;\n    let documentClassModifyTimeoutId: number;\n    if (isOpen) {\n      startScanTimeoutId = window.setTimeout(startScan, START_SCAN_DELAY_MS);\n      documentClassModifyTimeoutId = window.setTimeout(() => {\n        addExtraClass(document.documentElement, styles.documentRoot);\n      }, MODAL_ANIMATION_DURATION_MS);\n    } else if (prevIsOpen) {\n      handleClose();\n    }\n\n    return () => {\n      if (startScanTimeoutId) window.clearTimeout(startScanTimeoutId);\n      if (documentClassModifyTimeoutId) window.clearTimeout(documentClassModifyTimeoutId);\n    };\n  }, [isOpen, handleClose, startScan]);\n\n  const handleFlashlightClick = useLastCallback(async () => {\n    if (isFlashlightEnabled) {\n      await BarcodeScanner.disableTorch();\n    } else {\n      await BarcodeScanner.enableTorch();\n    }\n    setIsFlashlightEnabled(!isFlashlightEnabled);\n  });\n\n  const flashlightButtonClassName = buildClassName(\n    styles.flashLightButton,\n    isFlashlightEnabled && styles.flashLightButtonEnabled,\n  );\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      nativeBottomSheetKey=\"qr-scanner\"\n      forceFullNative\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      <div className={buildClassName(styles.scanner, isScannerStarted && styles.scannerStarted)}>\n        <div\n          className={styles.closeButton}\n          aria-label={lang('Close')}\n          role=\"button\"\n          tabIndex={0}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </div>\n\n        {flashlightShouldRender && (\n          <div\n            ref={flashlightRef}\n            className={flashlightButtonClassName}\n            onClick={handleFlashlightClick}\n            aria-label={lang('Toggle Flashlight')}\n            role=\"button\"\n            tabIndex={0}\n          >\n            <i className=\"icon-flashlight\" aria-hidden />\n          </div>\n        )}\n\n        <div className={styles.title}>{lang('Scan QR Code')}</div>\n\n        <div className={styles.square} ref={scanSquareRef}>\n          <div className={styles.squareInner} />\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(QrScannerModal);\n\nfunction sortCoordinatesClockwise(coordinates: Square): Square {\n  coordinates.sort((a, b) => a[1] - b[1]);\n\n  const topHalf = coordinates.slice(0, 2) as [Point, Point];\n  const bottomHalf = coordinates.slice(2) as [Point, Point];\n\n  topHalf.sort((a, b) => b[0] - a[0]);\n  bottomHalf.sort((a, b) => a[0] - b[0]);\n\n  return [...topHalf, ...bottomHalf];\n}\n\nfunction getDomNodeDimensions(node: HTMLDivElement | undefined): Square | undefined {\n  if (!node) {\n    return undefined;\n  }\n\n  const scanSquareRect = node.getBoundingClientRect();\n  const scaledRect = {\n    left: scanSquareRect.left * DPR,\n    right: scanSquareRect.right * DPR,\n    top: scanSquareRect.top * DPR,\n    bottom: scanSquareRect.bottom * DPR,\n    width: scanSquareRect.width * DPR,\n    height: scanSquareRect.height * DPR,\n  };\n\n  return [\n    [scaledRect.left, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top],\n    [scaledRect.left + scaledRect.width, scaledRect.top + scaledRect.height],\n    [scaledRect.left, scaledRect.top + scaledRect.height],\n  ];\n}\n\nfunction isQrCodeOutsideScanArea(scanArea: Square, qrCodeCoordinates: Square): boolean {\n  return (\n    scanArea[0][0] > qrCodeCoordinates[0][0]\n    || scanArea[0][1] > qrCodeCoordinates[0][1]\n    || scanArea[1][0] < qrCodeCoordinates[1][0]\n    || scanArea[1][1] > qrCodeCoordinates[1][1]\n    || scanArea[2][0] < qrCodeCoordinates[2][0]\n    || scanArea[2][1] < qrCodeCoordinates[2][1]\n    || scanArea[3][0] > qrCodeCoordinates[3][0]\n    || scanArea[3][1] < qrCodeCoordinates[3][1]\n  );\n}\n","import React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport captureKeyboardListeners from '../../../util/captureKeyboardListeners';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './SignatureModal.module.scss';\n\ntype StateProps = {\n  dataHex?: string;\n  error?: string;\n  isSigned?: boolean;\n};\n\nconst enum SLIDES {\n  confirm,\n  password,\n  complete,\n}\n\nfunction SignatureModal({\n  dataHex, error, isSigned,\n}: StateProps) {\n  const { submitSignature, clearSignatureError, cancelSignature } = getActions();\n\n  const lang = useLang();\n  const [isModalOpen, openModal, closeModal] = useFlag(false);\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.confirm);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n\n  useLayoutEffect(() => {\n    if (dataHex) {\n      setCurrentSlide(SLIDES.confirm);\n      setNextKey(SLIDES.password);\n      openModal();\n    }\n  }, [dataHex, openModal]);\n\n  useLayoutEffect(() => {\n    if (isSigned) {\n      setCurrentSlide(SLIDES.complete);\n      setNextKey(undefined);\n    }\n  }, [isSigned]);\n\n  useEffect(() => (\n    currentSlide === SLIDES.complete\n      ? captureKeyboardListeners({ onEnter: closeModal })\n      : undefined\n  ), [closeModal, currentSlide]);\n\n  const handleConfirm = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(SLIDES.complete);\n  });\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitSignature({ password });\n  });\n\n  function renderConfirm() {\n    return (\n      <>\n        <ModalHeader title={lang('Confirmation')} onClose={closeModal} />\n        <div className={modalStyles.transitionContent}>\n          <div className={transferStyles.label}>{lang('Signing Data')}</div>\n          <div className={transferStyles.inputReadOnly}>\n            {dataHex}\n          </div>\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n          <div className={modalStyles.buttons}>\n            <Button className={modalStyles.button} onClick={closeModal}>{lang('Cancel')}</Button>\n            <Button isPrimary className={modalStyles.button} onClick={handleConfirm}>{lang('Sign')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Enter Password')} onClose={closeModal} />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          submitLabel={lang('Sign')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeModal}\n          onUpdate={clearSignatureError}\n        />\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Done!')} onClose={closeModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n          <div className={styles.description}>\n            {lang('Signing was confirmed!')}\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button isPrimary onClick={closeModal}>{lang('Close')}</Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.confirm:\n        return renderConfirm();\n\n      case SLIDES.password:\n        return renderPasswordForm(isActive);\n\n      case SLIDES.complete:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isModalOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={closeModal}\n      onCloseAnimationEnd={cancelSignature}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const {\n      dataHex, error, isSigned,\n    } = global.currentSignature || {};\n\n    return {\n      dataHex, error, isSigned,\n    };\n  },\n)(SignatureModal));\n","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"nrINNy28\",\"error\":\"IHEwWBxd\",\"sticker\":\"wlPR2AOa\",\"description\":\"bgrj6VK3\"};","import { useRef } from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport usePrevious from './usePrevious';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function usePrevDuringAnimation<T>(current: T, duration?: number) {\n  const prev = usePrevious(current, true);\n  const timeoutRef = useRef<number>();\n  const forceUpdate = useForceUpdate();\n  // eslint-disable-next-line no-null/no-null\n  const isCurrentPresent = current !== undefined && current !== null;\n  // eslint-disable-next-line no-null/no-null\n  const isPrevPresent = prev !== undefined && prev !== null;\n\n  if (isCurrentPresent && timeoutRef.current) {\n    clearTimeout(timeoutRef.current);\n    timeoutRef.current = undefined;\n  }\n\n  useSyncEffect(() => {\n    // When `current` becomes empty\n    if (duration && !isCurrentPresent && isPrevPresent && !timeoutRef.current) {\n      timeoutRef.current = window.setTimeout(() => {\n        timeoutRef.current = undefined;\n        forceUpdate();\n      }, duration);\n    }\n  }, [duration, forceUpdate, isCurrentPresent, isPrevPresent]);\n\n  return !timeoutRef.current || !duration || isCurrentPresent ? current : prev;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"time\":\"AsvSkk14\",\"timeWarning\":\"CZBR69BT\"};","import React, { memo, useEffect, useState } from '../../lib/teact/teact';\n\nimport type { LangFn } from '../../hooks/useLang';\n\nimport buildClassName from '../../util/buildClassName';\nimport { SECOND } from '../../util/dateFormat';\nimport { setCancellableTimeout } from '../../util/schedulers';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './Countdown.module.scss';\n\ninterface OwnProps {\n  timestamp: number;\n  deadline: number;\n  onCompleted?: NoneToVoidFunction;\n}\n\nconst WARNING_TIME = 5 * 60; // 5 minutes in seconds;\n\nfunction Countdown({\n  timestamp,\n  deadline,\n  onCompleted,\n}: OwnProps) {\n  const lang = useLang();\n  const initialSeconds = Math.floor((timestamp + deadline - Date.now()) / SECOND);\n  const [secondsLeft, setSecondsLeft] = useState(Math.max(initialSeconds, 0));\n  const shouldShowWarning = secondsLeft <= WARNING_TIME;\n\n  useEffect(() => {\n    const clearTimer = setCancellableTimeout(SECOND, () => {\n      if (secondsLeft <= 0) return;\n\n      setSecondsLeft(Math.floor((timestamp + deadline - Date.now()) / SECOND));\n    });\n\n    if (secondsLeft <= 0) {\n      onCompleted?.();\n    }\n\n    return clearTimer;\n  }, [secondsLeft, onCompleted, timestamp, deadline]);\n\n  return (\n    <span className={buildClassName(\n      styles.time,\n      shouldShowWarning && styles.timeWarning,\n    )}\n    >\n      {formatTime(lang, secondsLeft)}\n    </span>\n  );\n}\n\nfunction formatTime(lang: LangFn, seconds: number): string {\n  const pad = (num: number) => num.toString().padStart(2, '0');\n\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds % 3600) / 60);\n  const remainingSeconds = seconds % 60;\n\n  let formattedTime = hours > 0 ? `${hours}:` : '';\n  formattedTime += `${hours > 0 ? pad(minutes) : minutes}:`;\n  formattedTime += pad(remainingSeconds);\n\n  return formattedTime;\n}\n\nexport default memo(Countdown);\n","// extracted by mini-css-extract-plugin\nexport default {\"infoBlock\":\"DqUj918m\",\"infoRow\":\"suN_Ci9f\",\"noIcon\":\"SUjgosvS\",\"noCurrency\":\"RjCLBwiu\",\"infoRowIcon\":\"kaMx21E_\",\"infoRowToken\":\"iNWWwjqK\",\"label\":\"uLUQH_M3\",\"infoRowChain\":\"NcAsWeQk\",\"infoRowAmount\":\"TzvDf_Jl\",\"infoRowAmountGreen\":\"I6xrY9jc\",\"infoRowAmountError\":\"iiFYcyID\",\"infoRowCurrency\":\"zab5hSsH\",\"infoRowCurrencyValue\":\"Q3pxLMbG\",\"infoSeparator\":\"ZO00ZPul\",\"infoSeparatorIcon\":\"fPy_1zLl\",\"infoSeparatorIconError\":\"GP0AJq0W\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport type { ApiSwapAsset } from '../../api/types';\nimport type { UserSwapToken } from '../../global/types';\n\nimport { TOKEN_WITH_LABEL } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getPseudoRandomNumber from '../../util/getPseudoRandomNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport getSwapRate from '../../util/swap/getSwapRate';\n\nimport SensitiveData from '../ui/SensitiveData';\nimport TokenIcon from './TokenIcon';\n\nimport styles from './SwapTokensInfo.module.scss';\n\ninterface OwnProps {\n  isSensitiveDataHidden?: true;\n  tokenIn?: UserSwapToken | ApiSwapAsset;\n  amountIn?: string;\n  tokenOut?: UserSwapToken | ApiSwapAsset;\n  amountOut?: string;\n  isError?: boolean;\n}\n\nfunction SwapTokensInfo({\n  isSensitiveDataHidden, tokenIn, amountIn, tokenOut, amountOut, isError = false,\n}: OwnProps) {\n  const amountInCols = useMemo(() => getPseudoRandomNumber(5, 13, amountIn ?? ''), [amountIn]);\n  const amountOutCols = useMemo(() => getPseudoRandomNumber(5, 13, amountOut ?? ''), [amountOut]);\n\n  function renderTokenInfo(\n    amountCols: number,\n    token?: UserSwapToken | ApiSwapAsset,\n    amount = '0',\n    isReceived = false,\n  ) {\n    const amountWithSign = isReceived ? amount : `-${amount}`;\n    const withLabel = Boolean(token && TOKEN_WITH_LABEL[token.slug]);\n\n    return (\n      <div className={buildClassName(styles.infoRow, !token && styles.noIcon, isReceived && styles.noCurrency)}>\n        {Boolean(token) && (\n          <TokenIcon\n            token={token}\n            withChainIcon\n            className={styles.infoRowIcon}\n          />\n        )}\n\n        <span className={styles.infoRowToken}>\n          {token?.name}\n          {withLabel && (\n            <span className={buildClassName(styles.label, styles.chainLabel)}>{TOKEN_WITH_LABEL[token!.slug]}</span>\n          )}\n        </span>\n        <SensitiveData\n          isActive={isSensitiveDataHidden}\n          cols={amountCols}\n          rows={2}\n          cellSize={8}\n          align=\"right\"\n          className={buildClassName(\n            styles.infoRowAmount,\n            isReceived && styles.infoRowAmountGreen,\n            isError && styles.infoRowAmountError,\n          )}\n        >\n          {formatCurrencyExtended(amountWithSign, token?.symbol ?? '')}\n        </SensitiveData>\n        <span className={styles.infoRowChain}>{getChainNetworkName(token?.chain)}</span>\n        {!isReceived && renderCurrency(amountIn, amountOut, tokenIn, tokenOut)}\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.infoBlock}>\n      {renderTokenInfo(amountInCols, tokenIn, amountIn)}\n      <div className={styles.infoSeparator}>\n        <i\n          className={buildClassName(\n            styles.infoSeparatorIcon,\n            isError && styles.infoSeparatorIconError,\n            isError ? 'icon-close' : 'icon-arrow-down',\n          )}\n          aria-hidden\n        />\n      </div>\n      {renderTokenInfo(amountOutCols, tokenOut, amountOut, true)}\n    </div>\n  );\n}\n\nexport default memo(SwapTokensInfo);\n\nfunction renderCurrency(amountIn?: string, amountOut?: string, fromToken?: ApiSwapAsset, toToken?: ApiSwapAsset) {\n  const rate = getSwapRate(amountIn, amountOut, fromToken, toToken);\n  if (!rate) return undefined;\n\n  return (\n    <span className={styles.infoRowCurrency}>\n      {rate.firstCurrencySymbol} \n      <span className={styles.infoRowCurrencyValue}>\n        {rate.price}{' '}{rate.secondCurrencySymbol}\n      </span>\n    </span>\n  );\n}\n","import React from '../../lib/teact/teact';\n\nimport type { OwnProps as FeeProps } from '../ui/Fee';\n\nimport useLang from '../../hooks/useLang';\n\nimport Fee from '../ui/Fee';\nimport LoadingDots from '../ui/LoadingDots';\nimport Transition from '../ui/Transition';\n\nimport styles from './TransactionFee.module.scss';\n\ninterface OwnProps extends Pick<FeeProps, 'terms' | 'token' | 'precision'> {\n  isLoading?: boolean;\n  className?: string;\n}\n\nexport default function TransactionFee({ terms, token, precision, isLoading, className }: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <div className={className}>\n      <div className={styles.label}>\n        {lang('Fee')}\n      </div>\n      <div className={styles.field}>\n        <Transition activeKey={isLoading ? 1 : 0} name=\"fade\" className={styles.field_transition}>\n          {isLoading\n            ? <LoadingDots isActive className={styles.field_loading} />\n            : <Fee terms={terms} token={token} precision={precision} />}\n        </Transition>\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"FHA1HU_P\",\"field\":\"OgExpTBf\",\"field_transition\":\"JaS_WGfX\",\"fieldTransition\":\"JaS_WGfX\",\"field_loading\":\"SFz4gihZ\",\"fieldLoading\":\"SFz4gihZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"E6N6MD3z\",\"unstakeModal\":\"gnNvHGfL\",\"passwordFormContent\":\"KL1uqo4o\",\"passwordFormContentInModal\":\"CZ9Kse33\",\"sticker\":\"AeVBXxbG\",\"footer\":\"rQ0tvCAk\",\"copyButtonWrapper\":\"VtMfi0Xs\",\"feeField\":\"fSQYvfg1\",\"comment\":\"jxc6euua\",\"button\":\"eww3tEAs\",\"buttonWide\":\"ND5LbWGY\",\"unstakeTime\":\"hDTeTwua\",\"unstakeTimeIcon\":\"tZ2WbGH0\",\"scamImage\":\"BASL0DzO\",\"scamAddress\":\"km7wfY2m\",\"modalTitle\":\"yadTct7r\",\"transactionHeader\":\"uAQ2u0Hd\",\"headerTitle\":\"J16GqrT7\",\"headerDate\":\"fiJguUso\",\"infoBlock\":\"NGumnj62\",\"textFieldWrapper\":\"UGOei_Ih\",\"swapSupportBlock\":\"mVgCbbey\",\"textFieldLabel\":\"lXDi3LO1\",\"advancedTooltip\":\"hr8oR5Ry\",\"advancedTooltipContainer\":\"t6X1h79H\",\"errorCexBlock\":\"Qr0LqmBg\",\"errorCexMessage\":\"uSKXuCCa\",\"errorCexEmail\":\"cQ1RlviM\",\"changellyInfoBlock\":\"IZsujzDG\",\"changellyDescription\":\"IgVxAVQB\",\"changellyDescriptionBold\":\"EOk33hg6\",\"qrCode\":\"DfLLakci\",\"qrCodeHidden\":\"L9e2rlZo\",\"scamWarning\":\"OAz9rga6\"};","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiSwapActivity, ApiSwapAsset } from '../../../api/types';\nimport type { Account, Theme } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  CHANGELLY_LIVE_CHAT_URL,\n  CHANGELLY_SECURITY_EMAIL,\n  CHANGELLY_SUPPORT_EMAIL,\n  CHANGELLY_WAITING_DEADLINE,\n  TONCOIN,\n} from '../../../config';\nimport { Big } from '../../../lib/big.js';\nimport { getIsInternalSwap, getIsSupportedChain, resolveSwapAsset } from '../../../global/helpers';\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../../global/selectors';\nimport { parseTxId } from '../../../util/activities';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatTime } from '../../../util/dateFormat';\nimport { formatCurrencyExtended } from '../../../util/formatNumber';\nimport getChainNetworkName from '../../../util/swap/getChainNetworkName';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useQrCode from '../../../hooks/useQrCode';\n\nimport Countdown from '../../common/Countdown';\nimport SwapTokensInfo from '../../common/SwapTokensInfo';\nimport TransactionFee from '../../common/TransactionFee';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\ntype StateProps = {\n  addressByChain?: Account['addressByChain'];\n  activity?: ApiSwapActivity;\n  tokensBySlug?: Record<string, ApiSwapAsset>;\n  theme: Theme;\n  isSwapDisabled?: boolean;\n  isSensitiveDataHidden?: true;\n};\n\nconst CHANGELLY_EXPIRE_CHECK_STATUSES = new Set(['new', 'waiting']);\nconst CHANGELLY_PENDING_STATUSES = new Set(['new', 'waiting', 'confirming', 'exchanging', 'sending']);\nconst CHANGELLY_ERROR_STATUSES = new Set(['failed', 'expired', 'refunded', 'overdue']);\nconst ONCHAIN_ERROR_STATUSES = new Set(['failed', 'expired']);\n\nfunction SwapActivityModal({\n  activity, tokensBySlug, theme, addressByChain, isSwapDisabled, isSensitiveDataHidden,\n}: StateProps) {\n  const {\n    fetchActivityDetails,\n    startSwap,\n    closeActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = Boolean(activity);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedActivity = usePrevDuringAnimation(activity, animationDuration);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    id,\n    hashes,\n    timestamp,\n    networkFee = '0',\n    ourFee = '0',\n    shouldLoadDetails,\n  } = renderedActivity ?? {};\n  const { payinAddress, payoutAddress, payinExtraId } = renderedActivity?.cex || {};\n\n  let fromAmount = '0';\n  let toAmount = '0';\n  let isPending = true;\n  let isError = false;\n  let shouldRenderCexInfo = false;\n  let isCex = false;\n  let isCexError = false;\n  let isCexHold = false;\n  let isCexWaiting = false;\n  let isCexPending = false;\n  let isExpired = false;\n  let cexTransactionId = '';\n  let title = '';\n  let cexErrorMessage = '';\n  let isFromToncoin = true;\n  let isCountdownFinished = false;\n\n  const fromToken = useMemo(() => {\n    if (!renderedActivity?.from || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.from);\n  }, [renderedActivity?.from, tokensBySlug]);\n\n  const toToken = useMemo(() => {\n    if (!renderedActivity?.to || !tokensBySlug) return undefined;\n\n    return resolveSwapAsset(tokensBySlug, renderedActivity.to);\n  }, [renderedActivity?.to, tokensBySlug]);\n  const isInternalSwap = getIsInternalSwap({\n    from: fromToken, to: toToken, toAddress: payoutAddress, addressByChain,\n  });\n\n  if (renderedActivity) {\n    const {\n      status, from, cex,\n    } = renderedActivity;\n    fromAmount = renderedActivity.fromAmount;\n    toAmount = renderedActivity.toAmount;\n    isFromToncoin = from === TONCOIN.slug;\n    isCex = Boolean(cex);\n\n    if (cex) {\n      isCountdownFinished = timestamp\n        ? (timestamp + CHANGELLY_WAITING_DEADLINE - Date.now() < 0)\n        : false;\n      isExpired = CHANGELLY_EXPIRE_CHECK_STATUSES.has(cex.status) && isCountdownFinished;\n      shouldRenderCexInfo = cex.status !== 'finished';\n      isPending = !isExpired && CHANGELLY_PENDING_STATUSES.has(cex.status);\n      isCexPending = isPending;\n      isCexError = isExpired || CHANGELLY_ERROR_STATUSES.has(cex.status);\n      isCexHold = cex.status === 'hold';\n      // Skip the 'waiting' status for transactions from Toncoin to other chains\n      // or from TRON to TON inside a multichain wallet for delayed status updates from hangelly\n      isCexWaiting = cex.status === 'waiting' && !isExpired && !isInternalSwap && !isFromToncoin;\n      cexTransactionId = cex.transactionId;\n    } else {\n      isPending = status === 'pending';\n      isError = ONCHAIN_ERROR_STATUSES.has(status);\n    }\n\n    if (isPending) {\n      title = lang('Swapping');\n    } else if (isCexHold) {\n      title = lang('Swap On Hold');\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'overdue') {\n        title = lang('Swap Expired');\n        cexErrorMessage = lang('You have not sent the coins to the specified address.');\n      } else if (cexStatus === 'refunded') {\n        title = lang('Swap Refunded');\n        cexErrorMessage = lang('Exchange failed and coins were refunded to your wallet.');\n      } else {\n        title = lang('Swap Failed');\n      }\n    } else if (isError) {\n      title = lang('Swap Failed');\n    } else {\n      title = lang('Swapped');\n    }\n  }\n\n  const transactionHash = id ? isCex ? hashes?.[0] : parseTxId(id).hash : undefined;\n  const transactionUrl = getExplorerTransactionUrl('ton', transactionHash);\n\n  const shouldShowQrCode = !payinExtraId && toToken?.chain === 'ton' && !isInternalSwap;\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive: Boolean(payinAddress),\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n  });\n\n  const handleSwapClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startSwap({\n      tokenInSlug: fromToken!.slug,\n      tokenOutSlug: toToken!.slug,\n      amountIn: fromAmount,\n    });\n  });\n\n  useEffect(() => {\n    if (id && shouldLoadDetails) fetchActivityDetails({ id });\n  }, [id, shouldLoadDetails]);\n\n  function renderHeader() {\n    return (\n      <div className={styles.transactionHeader}>\n        <div className={styles.headerTitle}>\n          {title}\n          {isPending && (\n            <AnimatedIconWithPreview\n              play={isOpen}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n            />\n          )}\n        </div>\n        {!!timestamp && (\n          <div className={styles.headerDate}>\n            {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooterButton() {\n    let isButtonVisible = true;\n    let buttonText = 'Swap Again';\n\n    if (isCexWaiting) {\n      return (\n        <Button onClick={handleClose} className={styles.button}>\n          {lang('Close')}\n        </Button>\n      );\n    }\n\n    if (isCexHold) {\n      isButtonVisible = false;\n    } else if (isCexError) {\n      const { status: cexStatus } = renderedActivity?.cex ?? {};\n      if (cexStatus === 'expired' || cexStatus === 'refunded' || cexStatus === 'overdue') {\n        buttonText = 'Try Again';\n      }\n    }\n\n    if (!isButtonVisible) {\n      return undefined;\n    }\n\n    return (\n      <Button onClick={handleSwapClick} className={styles.button}>\n        {lang(buttonText)}\n      </Button>\n    );\n  }\n\n  function renderCexInformation() {\n    if (isCexHold) {\n      return (\n        <div className={styles.textFieldWrapper}>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_kyc_security', {\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SECURITY_EMAIL}\n                </span>\n              ),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n            />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <div className={buildClassName(styles.textFieldWrapper, styles.swapSupportBlock)}>\n        {cexErrorMessage && <span className={styles.errorCexMessage}>{cexErrorMessage}</span>}\n\n        {isCexPending && (\n          <span className={buildClassName(styles.changellyDescription)}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        )}\n        {isCountdownFinished && (\n          <>\n            <span className={styles.changellyDescription}>\n              {lang('$swap_changelly_support', {\n                livechat: (\n                  <a\n                    href={CHANGELLY_LIVE_CHAT_URL}\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                    className={styles.changellyDescriptionBold}\n                  >\n                    {lang('Changelly Live Chat')}\n                  </a>\n                ),\n                email: (\n                  <span className={styles.changellyDescriptionBold}>\n                    {CHANGELLY_SUPPORT_EMAIL}\n                  </span>\n                ),\n              })}\n            </span>\n            {cexTransactionId && (\n              <InteractiveTextField\n                text={cexTransactionId}\n                copyNotification={lang('Transaction ID was copied!')}\n                noSavedAddress\n                noExplorer\n              />\n            )}\n          </>\n        )}\n      </div>\n    );\n  }\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n        />\n      </div>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain=\"ton\"\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n        />\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!(Number(networkFee) || shouldLoadDetails) || !fromToken) {\n      return undefined;\n    }\n\n    const terms = isFromToncoin ? {\n      native: Big(networkFee).add(ourFee).toString(),\n    } : {\n      native: networkFee,\n      token: ourFee,\n    };\n\n    return (\n      <TransactionFee\n        terms={terms}\n        token={fromToken}\n        precision={activity?.status === 'pending' ? 'approximate' : 'exact'}\n        isLoading={shouldLoadDetails}\n        className={styles.feeField}\n      />\n    );\n  }\n\n  function renderAddress() {\n    if (!payinAddress) return undefined;\n    const token = isFromToncoin ? toToken : fromToken;\n    const chain = getIsSupportedChain(token?.chain) ? token.chain : undefined;\n\n    return (\n      <div className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {isFromToncoin\n            ? lang('Your %blockchain% Address', { blockchain: toToken?.name })\n            : lang('Address for %blockchain% transfer', { blockchain: fromToken?.name })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={isFromToncoin ? payoutAddress : payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          noDimming\n        />\n      </div>\n    );\n  }\n\n  function renderSwapInfo() {\n    if (isCexWaiting) {\n      if (isInternalSwap) return undefined;\n      const chain = getIsSupportedChain(fromToken?.chain) ? fromToken.chain : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          {renderFee()}\n          <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n            value: (\n              <span className={styles.changellyDescriptionBold}>\n                {formatCurrencyExtended(Number(fromAmount), fromToken?.symbol ?? '', true)}\n              </span>\n            ),\n            blockchain: (\n              <span className={styles.changellyDescriptionBold}>\n                {getChainNetworkName(fromToken?.chain)}\n              </span>\n            ),\n            time: <Countdown timestamp={timestamp ?? 0} deadline={CHANGELLY_WAITING_DEADLINE} />,\n          })}\n          </span>\n          <InteractiveTextField\n            chain={chain}\n            address={payinAddress}\n            copyNotification={lang('Address was copied!')}\n            noSavedAddress\n            noExplorer\n            noDimming\n          />\n          {renderMemo()}\n          {shouldShowQrCode && (\n            <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <>\n        {renderFee()}\n        {!isInternalSwap && renderAddress()}\n        {!isInternalSwap && renderMemo()}\n      </>\n    );\n  }\n\n  function renderContent() {\n    return (\n      <div className={modalStyles.transitionContent}>\n        <SwapTokensInfo\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          tokenIn={fromToken}\n          amountIn={fromAmount}\n          tokenOut={toToken}\n          amountOut={toAmount}\n          isError={isError || isCexError}\n        />\n        <div className={styles.infoBlock}>\n          {renderSwapInfo()}\n          {shouldRenderCexInfo && renderCexInformation()}\n          {transactionUrl && renderTransactionId()}\n        </div>\n        {!isSwapDisabled && (\n          <div className={styles.footer}>\n            {renderFooterButton()}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      title={renderHeader()}\n      titleClassName={styles.modalTitle}\n      isOpen={isOpen}\n      nativeBottomSheetKey=\"swap-activity\"\n      onClose={handleClose}\n    >\n      {renderContent()}\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountState = selectCurrentAccountState(global);\n    const account = selectCurrentAccount(global);\n    const { isSwapDisabled } = global.restrictions;\n    const { theme, isSensitiveDataHidden } = global.settings;\n\n    const id = accountState?.currentActivityId;\n    const activity = id ? accountState?.activities?.byId[id] : undefined;\n\n    return {\n      activity: activity?.kind === 'swap' ? activity : undefined,\n      tokensBySlug: global.swapTokenInfo?.bySlug,\n      theme,\n      addressByChain: account?.addressByChain,\n      isSwapDisabled: isSwapDisabled || global.settings.isTestnet || selectIsCurrentAccountViewMode(global),\n      isSensitiveDataHidden,\n    };\n  })(SwapActivityModal),\n);\n","// extracted by mini-css-extract-plugin\nexport default {\"amountSensitiveData\":\"__I8XE5D\",\"baseCurrencyAmountSensitiveData\":\"tPLUuFQO\",\"withStatus\":\"MeZ5UFq3\",\"amount\":\"Qy2zkhK5\",\"baseCurrencyAmount\":\"BUzkYW_L\",\"status\":\"COF5DpZg\",\"amountSymbol\":\"AgH98knQ\",\"amountFraction\":\"F1teTrIV\",\"operationPositive\":\"cuIyqZ4t\",\"operationScam\":\"zrLwT6fF\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiBaseCurrency, ApiTokenWithPrice } from '../../api/types';\n\nimport { bigintAbs } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatBaseCurrencyAmount, formatCurrencyExtended } from '../../util/formatNumber';\n\nimport SensitiveData from '../ui/SensitiveData';\n\nimport styles from './TransactionAmount.module.scss';\n\ninterface OwnProps {\n  amount: bigint;\n  token?: Pick<ApiTokenWithPrice, 'decimals' | 'symbol' | 'price'>;\n  isIncoming?: boolean;\n  isScam?: boolean;\n  status?: string;\n  noSign?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency?: ApiBaseCurrency;\n}\n\nfunction TransactionAmount({\n  isIncoming,\n  isScam,\n  amount,\n  token,\n  status,\n  noSign = false,\n  isSensitiveDataHidden,\n  baseCurrency,\n}: OwnProps) {\n  const typeClass = isScam ? styles.operationScam : isIncoming ? styles.operationPositive : undefined;\n\n  function renderAmount() {\n    const { decimals, symbol } = token ?? {};\n    const amountString = toDecimal(noSign ? bigintAbs(amount) : amount, decimals);\n    const [wholePart, fractionPart]\n      = formatCurrencyExtended(amountString, '', noSign, decimals, !isIncoming).split('.');\n    const withStatus = Boolean(status);\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={12}\n        rows={withStatus ? 7 : 4}\n        align=\"center\"\n        cellSize={withStatus ? 17 : 18}\n        className={buildClassName(styles.amountSensitiveData, status && styles.withStatus)}\n      >\n        <div\n          className={buildClassName(\n            styles.amount,\n            status && styles.withStatus,\n            typeClass,\n            'rounded-font',\n          )}\n        >\n          {wholePart.trim().replace('\\u202F', '')}\n          {fractionPart && <span className={styles.amountFraction}>.{fractionPart.trim()}</span>}\n          <span className={styles.amountSymbol}>{symbol}</span>\n        </div>\n        {withStatus && (\n          <div className={buildClassName(styles.status, typeClass)}>\n            {status}\n          </div>\n        )}\n      </SensitiveData>\n    );\n  }\n\n  function renderBaseCurrencyAmount() {\n    if (!token) {\n      return undefined;\n    }\n\n    return (\n      <SensitiveData\n        isActive={isSensitiveDataHidden}\n        cols={10}\n        rows={3}\n        align=\"center\"\n        cellSize={12}\n        className={styles.baseCurrencyAmountSensitiveData}\n        contentClassName={buildClassName(styles.baseCurrencyAmount, 'rounded-font', typeClass)}\n      >\n        {formatBaseCurrencyAmount(amount, baseCurrency, token)}\n      </SensitiveData>\n    );\n  }\n\n  return (\n    <>\n      {renderAmount()}\n      {renderBaseCurrencyAmount()}\n    </>\n  );\n}\n\nexport default memo(TransactionAmount);\n","import type { TeactNode } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiBaseCurrency,\n  ApiNft,\n  ApiStakingState,\n  ApiTokenWithPrice,\n  ApiToncoinStakingState,\n  ApiTransactionActivity,\n} from '../../../api/types';\nimport type { Account, SavedAddress, Theme } from '../../../global/types';\nimport { ActiveTab } from '../../../global/types';\n\nimport {\n  ANIMATED_STICKER_TINY_ICON_PX,\n  ANIMATION_END_DELAY,\n  ANIMATION_LEVEL_MIN,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  TONCOIN,\n  VALIDATION_PERIOD_MS,\n} from '../../../config';\nimport {\n  selectAccounts,\n  selectAccountStakingStates,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectIsHardwareAccount,\n} from '../../../global/selectors';\nimport {\n  getIsActivityWithHash,\n  getTransactionAmountDisplayMode,\n  getTransactionTitle,\n  isOurStakingTransaction,\n  isScamTransaction,\n  parseTxId,\n  shouldShowTransactionAddress,\n} from '../../../util/activities';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../../util/authApi/inMemoryPasswordStore';\nimport { bigintAbs } from '../../../util/bigint';\nimport { getDoesUsePinPad } from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatFullDay, formatRelativeHumanDateTime, formatTime } from '../../../util/dateFormat';\nimport { getLocalAddressName } from '../../../util/getLocalAddressName';\nimport { vibrateOnSuccess } from '../../../util/haptics';\nimport { getIsTransactionWithPoisoning } from '../../../util/poisoningHash';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { getStakingStateStatus } from '../../../util/staking';\nimport { getNativeToken } from '../../../util/tokens';\nimport { getExplorerTransactionUrl } from '../../../util/url';\nimport { callApi } from '../../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../../hooks/useAppTheme';\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport usePrevDuringAnimation from '../../../hooks/usePrevDuringAnimation';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport TransactionAmount from '../../common/TransactionAmount';\nimport TransactionFee from '../../common/TransactionFee';\nimport NftInfo from '../../transfer/NftInfo';\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\nimport Modal, { CLOSE_DURATION, CLOSE_DURATION_PORTRAIT } from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport transferStyles from '../../transfer/Transfer.module.scss';\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './TransactionModal.module.scss';\n\nimport scamImg from '../../../assets/scam.svg';\n\ntype StateProps = {\n  transaction?: ApiTransactionActivity;\n  tokensBySlug?: Record<string, ApiTokenWithPrice>;\n  savedAddresses?: SavedAddress[];\n  isHardwareAccount: boolean;\n  isTestnet?: boolean;\n  isViewMode: boolean;\n  stakingStates?: ApiStakingState[];\n  isLongUnstakeRequested?: boolean;\n  isMediaViewerOpen?: boolean;\n  theme: Theme;\n  isSensitiveDataHidden?: true;\n  nftsByAddress?: Record<string, ApiNft>;\n  accounts?: Record<string, Account>;\n  currentAccountId: string;\n  baseCurrency?: ApiBaseCurrency;\n};\n\nconst enum SLIDES {\n  initial,\n  password,\n}\n\nfunction TransactionModal({\n  transaction,\n  tokensBySlug,\n  savedAddresses,\n  isTestnet,\n  isHardwareAccount,\n  isViewMode,\n  stakingStates,\n  isLongUnstakeRequested,\n  isMediaViewerOpen,\n  theme,\n  isSensitiveDataHidden,\n  nftsByAddress,\n  accounts,\n  currentAccountId,\n  baseCurrency,\n}: StateProps) {\n  const {\n    fetchActivityDetails,\n    startTransfer,\n    startStaking,\n    startUnstaking,\n    closeActivityInfo,\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    setLandscapeActionsActiveTabIndex,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.initial);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.password);\n  const animationLevel = getGlobal().settings.animationLevel;\n  const animationDuration = animationLevel === ANIMATION_LEVEL_MIN\n    ? 0\n    : (isPortrait ? CLOSE_DURATION_PORTRAIT : CLOSE_DURATION) + ANIMATION_END_DELAY;\n  const renderedTransaction = usePrevDuringAnimation(transaction, animationDuration);\n  const [unstakeDate, setUnstakeDate] = useState<number>(Date.now() + VALIDATION_PERIOD_MS);\n  const appTheme = useAppTheme(theme);\n\n  const {\n    fromAddress,\n    toAddress,\n    amount,\n    comment,\n    encryptedComment,\n    fee,\n    id,\n    isIncoming,\n    slug,\n    timestamp,\n    nft,\n    shouldLoadDetails,\n    isPending,\n  } = renderedTransaction || {};\n  const isActivityWithHash = Boolean(renderedTransaction && getIsActivityWithHash(renderedTransaction));\n  const isOurStaking = renderedTransaction && isOurStakingTransaction(renderedTransaction);\n  const isOurUnstaking = isOurStaking && renderedTransaction?.type === 'unstake';\n  const isNftTransfer = Boolean(renderedTransaction?.nft);\n\n  const token = slug ? tokensBySlug?.[slug] : undefined;\n  const chain = token?.chain;\n\n  const nativeToken = token ? getNativeToken(token.chain) : undefined;\n  const address = isIncoming ? fromAddress : toAddress;\n  const localAddressName = useMemo(() => {\n    if (!chain) return undefined;\n\n    return getLocalAddressName({\n      address,\n      chain,\n      currentAccountId,\n      accounts: accounts!,\n      savedAddresses,\n    });\n  }, [accounts, address, chain, currentAccountId, savedAddresses]);\n  const addressName = localAddressName || transaction?.metadata?.name;\n  const isTransactionWithPoisoning = isIncoming && getIsTransactionWithPoisoning(renderedTransaction!);\n  const isScam = Boolean(transaction) && isScamTransaction(transaction);\n  const isModalOpen = Boolean(transaction) && !isMediaViewerOpen;\n  const transactionHash = chain && id ? parseTxId(id).hash : undefined;\n  const doesNftExist = Boolean(nft && nftsByAddress?.[nft.address]);\n  const canDecryptComment = !isViewMode && !isHardwareAccount;\n\n  const [decryptedComment, setDecryptedComment] = useState<string>();\n  const [passwordError, setPasswordError] = useState<string>();\n\n  const transactionUrl = chain ? getExplorerTransactionUrl(chain, transactionHash, isTestnet) : undefined;\n\n  const {\n    shouldRender: shouldRenderTransactionId,\n    ref: transactionIdRef,\n  } = useShowTransition({\n    isOpen: Boolean(isActivityWithHash && transactionUrl),\n    withShouldRender: true,\n  });\n\n  const stakingState = useMemo(() => {\n    return stakingStates?.find((staking): staking is ApiToncoinStakingState => {\n      return staking.tokenSlug === TONCOIN.slug && staking.balance > 0n;\n    });\n  }, [stakingStates]);\n\n  const stakingStatus = stakingState && getStakingStateStatus(stakingState);\n  const startOfStakingCycle = stakingState?.start;\n  const endOfStakingCycle = stakingState?.end;\n\n  const {\n    shouldRender: shouldRenderUnstakeTimer,\n    ref: unstakeTimerRef,\n  } = useShowTransition({\n    isOpen: transaction?.type === 'unstakeRequest'\n      && startOfStakingCycle !== undefined\n      && (stakingStatus === 'unstakeRequested' || isLongUnstakeRequested)\n      && transaction.timestamp >= startOfStakingCycle,\n    withShouldRender: true,\n  });\n\n  useSyncEffect(() => {\n    if (renderedTransaction) {\n      setDecryptedComment(undefined);\n    }\n  }, [renderedTransaction]);\n\n  useSyncEffect(() => {\n    if (endOfStakingCycle) {\n      setUnstakeDate(endOfStakingCycle);\n    }\n  }, [endOfStakingCycle]);\n\n  useEffect(() => {\n    if (id && shouldLoadDetails) fetchActivityDetails({ id });\n  }, [id, shouldLoadDetails]);\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const openPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.password);\n    setNextKey(undefined);\n  });\n\n  const closePasswordSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.initial);\n    setNextKey(SLIDES.password);\n    clearPasswordError();\n  });\n\n  const handleSendClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    startTransfer({\n      isPortrait,\n      tokenSlug: slug || TONCOIN.slug,\n      toAddress: address,\n      amount: bigintAbs(amount!),\n      comment: !isIncoming ? comment : undefined,\n    });\n  });\n\n  const handleStartStakingClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n      return;\n    }\n\n    startStaking();\n  });\n\n  const handleUnstakeMoreClick = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n\n    if (!isPortrait) {\n      setLandscapeActionsActiveTabIndex({ index: ActiveTab.Stake });\n    }\n\n    startUnstaking();\n  });\n\n  const handlePasswordSubmit = useLastCallback(async (password: string) => {\n    const result = await callApi(\n      'decryptComment',\n      getGlobal().currentAccountId!,\n      encryptedComment!,\n      fromAddress!,\n      password,\n    );\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    closePasswordSlide();\n    setDecryptedComment(result);\n  });\n\n  const openHiddenComment = useLastCallback(async () => {\n    if (!encryptedComment) {\n      return;\n    }\n\n    if (getHasInMemoryPassword()) {\n      const password = await getInMemoryPassword();\n\n      if (password) {\n        void handlePasswordSubmit(password);\n        return;\n      }\n    }\n\n    openPasswordSlide();\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeActivityInfo({ id: id! });\n    if (getDoesUsePinPad()) {\n      clearIsPinAccepted();\n    }\n  });\n\n  function renderHeader() {\n    return (\n      <div\n        className={buildClassName(\n          modalStyles.header,\n          modalStyles.header_wideContent,\n        )}\n      >\n        <div className={buildClassName(modalStyles.title, styles.modalTitle)}>\n          <div className={styles.headerTitle}>\n            {transaction && getTransactionTitle(transaction, isPending ? 'present' : 'past', lang)}\n            {isPending && (\n              <AnimatedIconWithPreview\n                play={isModalOpen}\n                size={ANIMATED_STICKER_TINY_ICON_PX}\n                nonInteractive\n                noLoop={false}\n                tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClock}\n                previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClock}\n              />\n            )}\n            {isScam && isIncoming && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n          </div>\n          {!!timestamp && (\n            <div className={styles.headerDate}>\n              {formatFullDay(lang.code!, timestamp)}, {formatTime(timestamp)}\n            </div>\n          )}\n        </div>\n        <Button\n          isRound\n          className={modalStyles.closeButton}\n          ariaLabel={lang('Close')}\n          onClick={handleClose}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n      </div>\n    );\n  }\n\n  function renderTransactionWithPoisoningWarning() {\n    return (\n      <div className={styles.scamWarning}>\n        {lang('This address mimics another address that you previously interacted with.')}\n      </div>\n    );\n  }\n\n  function renderFee() {\n    if (!(fee || shouldLoadDetails) || !nativeToken) {\n      return undefined;\n    }\n\n    return (\n      <TransactionFee\n        terms={{ native: fee }}\n        token={nativeToken}\n        precision={isPending ? 'approximate' : 'exact'}\n        isLoading={shouldLoadDetails}\n        className={styles.feeField}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (!comment && !encryptedComment) {\n      return undefined;\n    }\n\n    const spoiler = encryptedComment\n      ? lang('Message is encrypted.')\n      : isScam\n        ? lang('Scam comment is hidden.')\n        : undefined;\n\n    return (\n      <>\n        <div className={transferStyles.label}>{lang('Comment')}</div>\n        <InteractiveTextField\n          text={encryptedComment ? decryptedComment : comment}\n          spoiler={spoiler}\n          spoilerRevealText={encryptedComment ? (canDecryptComment ? lang('Decrypt') : undefined) : lang('Display')}\n          spoilerCallback={canDecryptComment ? openHiddenComment : undefined}\n          copyNotification={lang('Comment was copied!')}\n          className={styles.copyButtonWrapper}\n          textClassName={styles.comment}\n        />\n      </>\n    );\n  }\n\n  function renderTransactionId() {\n    return (\n      <div ref={transactionIdRef} className={styles.textFieldWrapper}>\n        <span className={styles.textFieldLabel}>\n          {lang('Transaction ID')}\n        </span>\n        <InteractiveTextField\n          noSavedAddress\n          chain={chain}\n          address={transactionHash}\n          addressUrl={transactionUrl}\n          isTransaction\n          copyNotification={lang('Transaction ID was copied!')}\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderUnstakeTimer() {\n    return (\n      <div ref={unstakeTimerRef} className={styles.unstakeTime}>\n        <AnimatedIconWithPreview\n          play={isModalOpen}\n          size={ANIMATED_STICKER_TINY_ICON_PX}\n          className={styles.unstakeTimeIcon}\n          nonInteractive\n          noLoop={false}\n          tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n          previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n        />\n        <div>\n          {lang('$unstaking_when_receive', {\n            time: (\n              <strong>\n                {formatRelativeHumanDateTime(lang.code, unstakeDate)}\n              </strong>\n            ),\n          })}\n        </div>\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const canUnstake = isOurStaking && (isOurUnstaking || transaction?.type === 'unstakeRequest')\n      && stakingStatus === 'active';\n    const buttons: TeactNode[] = [];\n\n    if (!isOurStaking && !isIncoming && !isNftTransfer) {\n      buttons.push(\n        <Button onClick={handleSendClick} className={styles.button}>\n          {lang('Repeat')}\n        </Button>,\n      );\n    }\n    if (!IS_CORE_WALLET && isOurStaking) {\n      buttons.push(\n        <Button\n          onClick={handleStartStakingClick}\n          className={buildClassName(styles.button, canUnstake && styles.buttonWide)}\n        >\n          {lang('Stake Again')}\n        </Button>,\n      );\n    }\n    if (canUnstake) {\n      buttons.push(\n        <Button onClick={handleUnstakeMoreClick} className={buildClassName(styles.button, styles.buttonWide)}>\n          {lang('Unstake More')}\n        </Button>,\n      );\n    }\n\n    return buttons.length ? <div className={styles.footer}>{buttons}</div> : undefined;\n  }\n\n  function renderTransactionContent() {\n    const amountDisplayMode = transaction && getTransactionAmountDisplayMode(transaction);\n\n    return (\n      <div className={modalStyles.transitionContent}>\n        {amountDisplayMode !== 'hide' && (\n          <TransactionAmount\n            isSensitiveDataHidden={isSensitiveDataHidden}\n            isIncoming={isIncoming}\n            isScam={isScam}\n            amount={amount ?? 0n}\n            token={token}\n            status={isOurUnstaking && !shouldRenderUnstakeTimer ? lang('Successfully') : undefined}\n            noSign={amountDisplayMode === 'noSign'}\n            baseCurrency={baseCurrency}\n          />\n        )}\n        {nft && <NftInfo nft={nft} withMediaViewer={doesNftExist} withTonExplorer />}\n\n        {isTransactionWithPoisoning && renderTransactionWithPoisoningWarning()}\n\n        {transaction && shouldShowTransactionAddress(transaction).includes('modal') && (\n          <>\n            <div className={transferStyles.label}>{lang(isIncoming ? 'Sender' : 'Recipient')}</div>\n            <InteractiveTextField\n              chain={chain}\n              addressName={addressName}\n              address={address}\n              isScam={isScam && !isIncoming}\n              copyNotification={lang('Address was copied!')}\n              className={styles.copyButtonWrapper}\n              textClassName={isScam && isIncoming ? styles.scamAddress : undefined}\n            />\n          </>\n        )}\n\n        {renderFee()}\n        {renderComment()}\n        {shouldRenderTransactionId && renderTransactionId()}\n        {shouldRenderUnstakeTimer && renderUnstakeTimer()}\n\n        {!isViewMode && renderFooter()}\n      </div>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.initial:\n        return (\n          <>\n            {renderHeader()}\n            {renderTransactionContent()}\n          </>\n        );\n      case SLIDES.password:\n        if (!encryptedComment) return undefined;\n\n        return (\n          <>\n            {!getDoesUsePinPad() && (\n              <ModalHeader title={lang('Enter Password')} onClose={handleClose} />\n            )}\n            <PasswordForm\n              isActive={isActive}\n              error={passwordError}\n              withCloseButton={IS_CAPACITOR}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              submitLabel={lang('Send')}\n              onSubmit={handlePasswordSubmit}\n              onCancel={closePasswordSlide}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      hasCloseButton\n      nativeBottomSheetKey=\"transaction-info\"\n      forceFullNative={currentSlide === SLIDES.password}\n      dialogClassName={buildClassName(styles.modalDialog, isOurUnstaking && styles.unstakeModal)}\n      onClose={handleClose}\n      onCloseAnimationEnd={closePasswordSlide}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(\n  withGlobal((global): StateProps => {\n    const accountId = global.currentAccountId!;\n    const accountState = selectCurrentAccountState(global);\n\n    const txId = accountState?.currentActivityId;\n    const activity = txId ? accountState?.activities?.byId[txId] : undefined;\n    const savedAddresses = accountState?.savedAddresses;\n    const { byAddress } = accountState?.nfts || {};\n\n    const stakingStates = selectAccountStakingStates(global, accountId);\n    const { isTestnet, theme, isSensitiveDataHidden } = global.settings;\n    const accounts = selectAccounts(global);\n    const isHardwareAccount = selectIsHardwareAccount(global);\n\n    return {\n      transaction: activity?.kind === 'transaction' ? activity : undefined,\n      tokensBySlug: global.tokenInfo?.bySlug,\n      savedAddresses,\n      isHardwareAccount,\n      isTestnet,\n      isViewMode: selectIsCurrentAccountViewMode(global),\n      isLongUnstakeRequested: accountState?.isLongUnstakeRequested,\n      isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n      theme,\n      stakingStates,\n      isSensitiveDataHidden,\n      nftsByAddress: byAddress,\n      accounts,\n      currentAccountId: accountId,\n      baseCurrency: global.settings.baseCurrency,\n    };\n  })(TransactionModal),\n);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { selectCurrentAccountState } from '../../../global/selectors';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface StateProps {\n  isOpen?: boolean;\n  nftAddress?: string;\n  nftName?: string;\n}\n\nfunction UnhideNftModal({\n  isOpen,\n  nftAddress,\n  nftName,\n}: StateProps) {\n  const { addNftsToWhitelist, closeUnhideNftModal } = getActions();\n\n  const lang = useLang();\n\n  const handleUnhide = useLastCallback(() => {\n    addNftsToWhitelist({ addresses: [nftAddress!] });\n    closeUnhideNftModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={closeUnhideNftModal}\n      title={lang('Unhide NFT')}\n    >\n      <p className={modalStyles.text}>\n        {lang('$unhide_nft_warning', { name: <b>{nftName}</b> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={closeUnhideNftModal} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleUnhide} className={modalStyles.button}>\n          {lang('Unhide')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    isUnhideNftModalOpen,\n    selectedNftToUnhide,\n  } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    isOpen: isUnhideNftModalOpen,\n    nftAddress: selectedNftToUnhide?.address,\n    nftName: selectedNftToUnhide?.name,\n  };\n})(UnhideNftModal));\n","import type { FC } from '../../lib/teact/teact';\nimport React, {\n  useEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\n\nimport styles from './Notification.module.scss';\n\ntype OwnProps = {\n  containerId?: string;\n  message: string;\n  icon?: string;\n  onDismiss: () => void;\n};\n\nconst DURATION_MS = 5000;\nconst ANIMATION_DURATION = 250;\n\nconst Notification: FC<OwnProps> = ({\n  icon, message, containerId, onDismiss,\n}) => {\n  const [isOpen, setIsOpen] = useState(true);\n  const timerRef = useRef<number | undefined>();\n\n  const { ref } = useShowTransition({ isOpen });\n\n  const closeAndDismiss = useLastCallback(() => {\n    setIsOpen(false);\n    setTimeout(onDismiss, ANIMATION_DURATION);\n  });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(closeAndDismiss) : undefined), [isOpen, closeAndDismiss]);\n\n  useEffect(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n\n    return () => {\n      if (timerRef.current) {\n        clearTimeout(timerRef.current);\n        timerRef.current = undefined;\n      }\n    };\n  }, [closeAndDismiss]);\n\n  const handleMouseEnter = useLastCallback(() => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = undefined;\n    }\n  });\n\n  const handleMouseLeave = useLastCallback(() => {\n    timerRef.current = window.setTimeout(closeAndDismiss, DURATION_MS);\n  });\n\n  return (\n    <Portal\n      className={buildClassName(styles.container, IS_ELECTRON && styles.container_electron)}\n      containerId={containerId}\n    >\n      <div\n        ref={ref}\n        className={styles.notification}\n        onClick={closeAndDismiss}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n      >\n        <div className={styles.content}>\n          {icon && <i className={buildClassName(styles.icon, icon)} aria-hidden />}\n          {message}\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Notification;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"h7PLFJQu\",\"container_electron\":\"I0vM5N9Z\",\"containerElectron\":\"I0vM5N9Z\",\"notification\":\"cBuXIi04\",\"content\":\"FOpmIM3s\",\"icon\":\"yRP0zVnL\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { NotificationType } from '../../global/types';\n\nimport { pick } from '../../util/iteratees';\n\nimport Notification from '../ui/Notification';\n\ntype StateProps = {\n  notifications: NotificationType[];\n};\n\nfunction Notifications({ notifications }: StateProps) {\n  const { dismissNotification } = getActions();\n\n  if (!notifications.length) {\n    return undefined;\n  }\n\n  return (\n    <div id=\"Notifications\">\n      {notifications.map(({ message, icon }) => (\n        <Notification\n          key={message}\n          icon={icon}\n          message={message}\n\n          onDismiss={dismissNotification}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default memo(withGlobal(\n  (global): StateProps => pick(global, ['notifications']),\n)(Notifications));\n","import { useEffect } from '../lib/teact/teact';\n\nimport { createCallbackManager } from '../util/callbacks';\n\nlet bottomBarHideCounter = 0;\nconst bottomBarListeners = createCallbackManager();\n\nexport function getIsBottomBarHidden() {\n  return bottomBarHideCounter > 0;\n}\n\nexport function subscribeToBottomBarVisibility(callback: () => void) {\n  return bottomBarListeners.addCallback(callback);\n}\n\nfunction notifyBottomBarListeners() {\n  bottomBarListeners.runCallbacks();\n}\n\nfunction hideBottomBar() {\n  const wasHidden = getIsBottomBarHidden();\n  bottomBarHideCounter += 1;\n\n  if (!wasHidden && getIsBottomBarHidden()) {\n    notifyBottomBarListeners();\n  }\n}\n\nfunction showBottomBar() {\n  const wasHidden = getIsBottomBarHidden();\n  bottomBarHideCounter = Math.max(0, bottomBarHideCounter - 1);\n\n  if (wasHidden && !getIsBottomBarHidden()) {\n    notifyBottomBarListeners();\n  }\n}\n\n// Use this hook when you need to temporarily hide the bottom bar on a screen, for example,\n// when assumes the use of the entire screen height - `PasswordForm` with biometrics\nexport default function useHideBottomBar(isHidden: boolean) {\n  useEffect(() => {\n    if (!isHidden) return undefined;\n\n    hideBottomBar();\n\n    return showBottomBar;\n  }, [isHidden]);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"QlVPgZym\",\"hidden\":\"YMl6tuqD\",\"button\":\"A4iuMrwm\",\"active\":\"lTI19L4Y\",\"icon\":\"Q6nK70OA\",\"label\":\"Hzc2OPCD\"};","import React, { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport { ContentTab } from '../../../../global/types';\n\nimport { IS_CORE_WALLET } from '../../../../config';\nimport { selectCurrentAccountState } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useEffectOnce from '../../../../hooks/useEffectOnce';\nimport { getIsBottomBarHidden, subscribeToBottomBarVisibility } from '../../../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../../../hooks/useHistoryBack';\nimport useLang from '../../../../hooks/useLang';\n\nimport Button from '../../../ui/Button';\n\nimport styles from './BottomBar.module.scss';\n\ninterface StateProps {\n  areSettingsOpen?: boolean;\n  areAssetsActive?: boolean;\n  isExploreOpen?: boolean;\n}\n\nfunction BottomBar({ areSettingsOpen, areAssetsActive, isExploreOpen }: StateProps) {\n  const { switchToWallet, switchToExplore, switchToSettings } = getActions();\n\n  const lang = useLang();\n  const [isHidden, setIsHidden] = useState(getIsBottomBarHidden());\n  const isWalletTabActive = !isExploreOpen && !areSettingsOpen;\n\n  useEffectOnce(() => {\n    return subscribeToBottomBarVisibility(() => {\n      setIsHidden(getIsBottomBarHidden());\n    });\n  });\n\n  useHistoryBack({\n    isActive: isExploreOpen,\n    onBack: switchToWallet,\n  });\n\n  return (\n    <div className={buildClassName(styles.root, isHidden && styles.hidden)}>\n      <Button\n        isSimple\n        className={buildClassName(styles.button, isWalletTabActive && styles.active)}\n        onClick={switchToWallet}\n      >\n        <i className={buildClassName(styles.icon, 'icon-wallet')} />\n        <span className={styles.label}>{lang('Wallet')}</span>\n      </Button>\n      {!IS_CORE_WALLET && (\n        <Button\n          isSimple\n          className={buildClassName(styles.button, isExploreOpen && styles.active)}\n          onClick={switchToExplore}\n        >\n          <i className={buildClassName(styles.icon, 'icon-explore')} />\n          <span className={styles.label}>{lang('Explore')}</span>\n        </Button>\n      )}\n      <Button\n        isSimple\n        className={buildClassName(styles.button, areSettingsOpen && styles.active)}\n        onClick={switchToSettings}\n      >\n        <i className={buildClassName(styles.icon, 'icon-settings')} />\n        <span className={styles.label}>{lang('Settings')}</span>\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { areSettingsOpen, isExploreOpen } = global;\n  const { activeContentTab } = selectCurrentAccountState(global) ?? {};\n\n  return {\n    areSettingsOpen,\n    areAssetsActive: activeContentTab === ContentTab.Assets,\n    isExploreOpen,\n  };\n})(BottomBar));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"A0PipQQQ\",\"header\":\"Gbi50r5P\",\"headerTransition\":\"lDJDJyJx\",\"actions\":\"U5k3MGwt\",\"actionButton\":\"iX71Jk4y\",\"actionIcon\":\"TYO_mnqL\",\"menuButton\":\"g5Mpmfqz\",\"menuButton_active\":\"Jb3ZSQ8D\",\"menuButtonActive\":\"Jb3ZSQ8D\",\"menuItem\":\"nZ_OU1oY\",\"slides\":\"X2XelzZ1\",\"slide\":\"piyY_yBE\",\"slide_active\":\"sCCso48U\",\"slideActive\":\"sCCso48U\",\"slide_moving\":\"NMBicc6s\",\"slideMoving\":\"NMBicc6s\",\"content\":\"BjD2X1I7\",\"image\":\"BA7uSk12\",\"contentDescription\":\"XeanWEkZ\",\"contentTextWrapper\":\"fJxRvPrW\",\"contentText\":\"gAnXMdfd\",\"navigation\":\"mO73YmbZ\",\"portraitContainer\":\"PDCSQygm\",\"navigation_prev\":\"Mx1XT28C\",\"navigationPrev\":\"Mx1XT28C\",\"navigation_next\":\"FmNwnO3_\",\"navigationNext\":\"FmNwnO3_\",\"mediaInfo\":\"lzTnItyh\",\"mediaInfoTitle\":\"Iork7lBy\",\"mediaInfoDescription\":\"gVhA_SZL\",\"descriptionText\":\"VjBacQN8\",\"tooltip\":\"j_sdE8In\",\"ghost\":\"FjT6eSrl\",\"ghost_roundedOpening\":\"GUrvismB\",\"ghostRoundedOpening\":\"GUrvismB\",\"ghost_roundedClosing\":\"oGeErVyy\",\"ghostRoundedClosing\":\"oGeErVyy\",\"ghostImage\":\"oaQkWH7i\",\"scamImage\":\"HAC1deVa\"};","import { MediaType } from '../../../global/types';\n\nimport { ANIMATION_END_DELAY, MOBILE_SCREEN_MAX_WIDTH } from '../../../config';\nimport { requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport { applyStyles } from '../../../util/animation';\nimport { stopEvent } from '../../../util/domEvents';\nimport { isElementInViewport } from '../../../util/isElementInViewport';\nimport { REM } from '../../../util/windowEnvironment';\nimport windowSize from '../../../util/windowSize';\n\nimport styles from '../MediaViewer.module.scss';\n\nexport const ANIMATION_DURATION = 200;\n\n// Header height + bottom padding, keep in sync with styles.image max-height\nconst OCCUPIED_HEIGHT = 14 * REM;\n\nexport function animateOpening(\n  type: MediaType, mediaId: string, mediaUrl?: string, txId?: string, hiddenNfts?: 'user' | 'scam',\n) {\n  const { image: fromImage } = getNode(type, mediaId, txId, hiddenNfts);\n  if (!fromImage || !mediaUrl) {\n    return;\n  }\n\n  requestMutation(async () => {\n    document.body.classList.add('ghost-animating');\n\n    const { width: windowWidth, height: windowHeight } = windowSize.get();\n    const { width: mediaWidth, height: mediaHeight } = await getImageDimension(mediaUrl);\n\n    const availableHeight = windowHeight - OCCUPIED_HEIGHT;\n    const offsetTop = (windowWidth <= MOBILE_SCREEN_MAX_WIDTH ? 8 : 7) * REM;\n\n    const { width: toWidth, height: toHeight } = calculateDimensions(\n      windowWidth,\n      availableHeight,\n      mediaWidth,\n      mediaHeight,\n    );\n\n    const toLeft = (windowWidth - toWidth) / 2;\n    const toTop = offsetTop + (availableHeight - toHeight) / 2;\n\n    const {\n      top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n    } = fromImage.getBoundingClientRect();\n\n    const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n    const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n    const fromScaleX = fromWidth / toWidth;\n    const fromScaleY = fromHeight / toHeight;\n\n    requestMutation(() => {\n      const ghost = createGhost(fromImage);\n      applyShape(ghost, type, true);\n      applyStyles(ghost, {\n        top: `${toTop}px`,\n        left: `${toLeft}px`,\n        width: `${toWidth}px`,\n        height: `${toHeight}px`,\n        transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n      });\n\n      document.body.appendChild(ghost);\n\n      requestMutation(() => {\n        ghost.style.transform = '';\n        clearShape(ghost, type, true);\n\n        setTimeout(() => {\n          requestMutation(() => {\n            if (document.body.contains(ghost)) {\n              document.body.removeChild(ghost);\n            }\n            document.body.classList.remove('ghost-animating');\n          });\n        }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n      });\n    });\n  });\n}\n\nexport function animateClosing(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  const { container, image: toImage } = getNode(type, mediaId, txId, hiddenNfts);\n  const fromImage = document.querySelector<HTMLImageElement>(\n    `.${styles.slide_active} img, .${styles.slide_active} canvas`,\n  );\n  if (!fromImage || !toImage) {\n    return;\n  }\n\n  const {\n    top: fromTop, left: fromLeft, width: fromWidth, height: fromHeight,\n  } = fromImage.getBoundingClientRect();\n  const {\n    top: targetTop, left: toLeft, width: toWidth, height: toHeight,\n  } = toImage.getBoundingClientRect();\n\n  let toTop = targetTop;\n  if (!isElementInViewport(toImage)) {\n    const { height: windowHeight } = windowSize.get();\n    toTop = targetTop < fromTop ? -toHeight : windowHeight;\n  }\n\n  const fromTranslateX = (fromLeft + fromWidth / 2) - (toLeft + toWidth / 2);\n  const fromTranslateY = (fromTop + fromHeight / 2) - (toTop + toHeight / 2);\n  const fromScaleX = fromWidth / toWidth;\n  const fromScaleY = fromHeight / toHeight;\n\n  const existingGhost = document.querySelector<HTMLDivElement>(`.${styles.ghost}`);\n  const ghost = existingGhost || createGhost(fromImage);\n\n  let ghostStyles: Record<string, string>;\n  if (existingGhost) {\n    const {\n      top, left, width, height,\n    } = existingGhost.getBoundingClientRect();\n    const scaleX = width / toWidth;\n    const scaleY = height / toHeight;\n\n    ghostStyles = {\n      transition: 'none',\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      transformOrigin: 'top left',\n      transform: `translate3d(${left - toLeft}px, ${top - toTop}px, 0) scale(${scaleX}, ${scaleY})`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n    };\n  } else {\n    ghostStyles = {\n      top: `${toTop}px`,\n      left: `${toLeft}px`,\n      width: `${toWidth}px`,\n      height: `${toHeight}px`,\n      transform: `translate3d(${fromTranslateX}px, ${fromTranslateY}px, 0) scale(${fromScaleX}, ${fromScaleY})`,\n    };\n  }\n\n  requestMutation(() => {\n    applyShape(ghost, type);\n    applyStyles(ghost, ghostStyles);\n    if (!existingGhost) document.body.appendChild(ghost);\n    document.body.classList.add('ghost-animating');\n    if (container) {\n      container.classList.add('ghost-target');\n    }\n\n    requestMutation(() => {\n      if (existingGhost) {\n        existingGhost.style.transition = '';\n      }\n\n      ghost.style.transform = '';\n\n      setTimeout(() => {\n        requestMutation(() => {\n          if (document.body.contains(ghost)) {\n            document.body.removeChild(ghost);\n          }\n          document.body.classList.remove('ghost-animating');\n          if (container) {\n            container.classList.remove('ghost-target');\n          }\n        });\n      }, ANIMATION_DURATION + ANIMATION_END_DELAY);\n    });\n  });\n}\n\nfunction getNode(type: MediaType, mediaId: string, txId?: string, hiddenNfts?: 'user' | 'scam') {\n  let image: HTMLImageElement | HTMLCanvasElement | undefined;\n  let container: HTMLElement | undefined;\n  if (type === MediaType.Nft) {\n    container = document.querySelector(\n      txId\n        ? `.transaction-nft[data-tx-id=\"${txId}\"][data-nft-address=\"${mediaId}\"]`\n        : hiddenNfts\n          ? `.hidden-nfts-${hiddenNfts} [data-nft-address=\"${mediaId}\"]`\n          : `.nft-container[data-nft-address=\"${mediaId}\"]`,\n    ) as HTMLElement;\n    image = container?.querySelector('img, canvas') as HTMLImageElement | HTMLCanvasElement;\n  }\n  return { container, image };\n}\n\nfunction createGhost(source: HTMLImageElement | HTMLCanvasElement) {\n  const ghost = document.createElement('div');\n  ghost.classList.add(styles.ghost);\n\n  const img = new Image();\n  img.classList.add(styles.ghostImage);\n  img.draggable = false;\n  img.oncontextmenu = stopEvent;\n  img.src = source instanceof HTMLImageElement\n    ? source.src\n    : source.parentElement?.parentElement?.dataset.previewUrl || '';\n\n  ghost.appendChild(img);\n\n  return ghost;\n}\n\nfunction calculateDimensions(\n  availableWidth: number,\n  availableHeight: number,\n  mediaWidth: number,\n  mediaHeight: number,\n) {\n  const aspectRatio = mediaHeight / mediaWidth;\n  const calculatedWidth = Math.min(mediaWidth, availableWidth);\n  const calculatedHeight = Math.round(calculatedWidth * aspectRatio);\n\n  if (calculatedHeight > availableHeight) {\n    return {\n      width: Math.round(availableHeight / aspectRatio),\n      height: availableHeight,\n    };\n  }\n\n  return {\n    width: calculatedWidth,\n    height: Math.round(calculatedWidth * aspectRatio),\n  };\n}\n\nfunction applyShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.add(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nfunction clearShape(ghost: HTMLDivElement, type: MediaType, isOpening = false) {\n  if (type === MediaType.Nft) {\n    ghost.classList.remove(isOpening ? styles.ghost_roundedOpening : styles.ghost_roundedClosing);\n  }\n}\n\nasync function getImageDimension(url: string) {\n  const img = new Image();\n  img.src = url;\n  await new Promise((resolve) => {\n    img.onload = resolve;\n  });\n  return { width: img.width, height: img.height };\n}\n","import type { RefObject } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { useRef } from '../../lib/teact/teact';\n\nimport usePrevious from '../../hooks/usePrevious';\nimport useShowTransition from '../../hooks/useShowTransition';\n\ntype OwnProps = {\n  isOpen: boolean;\n  isCustom?: boolean;\n  isHidden?: boolean;\n  id?: string;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLElement, MouseEvent>) => void;\n  noCloseTransition?: boolean;\n  shouldAnimateFirstRender?: boolean;\n  style?: string;\n  children: TeactNode;\n  ref?: RefObject<HTMLDivElement>;\n};\n\nconst ShowTransition: FC<OwnProps> = ({\n  isOpen,\n  isHidden,\n  isCustom,\n  id,\n  className,\n  onClick,\n  children,\n  noCloseTransition,\n  shouldAnimateFirstRender,\n  style,\n  ref: externalRef,\n}) => {\n  const prevIsOpen = usePrevious(isOpen);\n  const prevChildren = usePrevious(children);\n  const fromChildrenRef = useRef<TeactNode>();\n  const isFirstRender = prevIsOpen === undefined;\n\n  const { ref, shouldRender } = useShowTransition({\n    isOpen: isOpen && !isHidden,\n    ref: externalRef,\n    noMountTransition: isFirstRender && !shouldAnimateFirstRender,\n    className: isCustom ? false : undefined,\n    noCloseTransition,\n    withShouldRender: true,\n  });\n\n  if (prevIsOpen && !isOpen) {\n    fromChildrenRef.current = prevChildren;\n  }\n\n  return (\n    (shouldRender || isHidden) && (\n      <div\n        id={id}\n        ref={ref}\n        className={className}\n        onClick={onClick}\n        style={style}\n      >\n        {isOpen ? children : fromChildrenRef.current!}\n      </div>\n    )\n  );\n};\n\nexport default ShowTransition;\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { NftMenuHandler } from './hooks/useNftMenu';\nimport { MediaType } from '../../global/types';\n\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n  selectTonDnsLinkedAddress,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { getCountDaysToDate } from '../../util/dateFormat';\nimport { getTonDnsExpirationDate } from '../../util/dns';\n\nimport useFlag from '../../hooks/useFlag';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport { usePrevDuringAnimationSimple } from '../../hooks/usePrevDuringAnimationSimple';\nimport useNftMenu from './hooks/useNftMenu';\n\nimport DropdownMenu from '../ui/DropdownMenu';\nimport { ANIMATION_DURATION } from '../ui/Menu';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n  mediaId?: string;\n  onClose: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  nft?: ApiNft;\n  tonDnsExpiration?: number;\n  linkedAddress?: string;\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  cardBackgroundNft?: ApiNft;\n  accentColorNft?: ApiNft;\n  isViewMode: boolean;\n};\n\nconst SHOULD_CLOSE_VIEWER_HANDLERS: NftMenuHandler[] = [\n  'send',\n  'renew',\n  'burn',\n  'collection',\n  'select',\n  'linkDomain',\n];\n\nfunction Actions({\n  nft,\n  tonDnsExpiration,\n  linkedAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  cardBackgroundNft,\n  accentColorNft,\n  isViewMode,\n  onClose,\n}: StateProps & OwnProps) {\n  const lang = useLang();\n  const [isMenuOpen, openMenu, closeMenu] = useFlag();\n\n  const dnsExpireInDays = tonDnsExpiration ? getCountDaysToDate(tonDnsExpiration) : undefined;\n  const isNftBlacklisted = useMemo(() => {\n    return blacklistedNftAddresses?.includes(nft!.address);\n  }, [nft, blacklistedNftAddresses]);\n  const isNftWhitelisted = useMemo(() => {\n    return whitelistedNftAddresses?.includes(nft!.address);\n  }, [nft, whitelistedNftAddresses]);\n  const isNftInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === cardBackgroundNft?.address, ANIMATION_DURATION,\n  );\n  const isNftAccentColorInstalled = usePrevDuringAnimationSimple(\n    nft && nft.address === accentColorNft?.address, ANIMATION_DURATION,\n  );\n\n  const { menuItems, handleMenuItemSelect } = useNftMenu({\n    nft,\n    isViewMode,\n    dnsExpireInDays,\n    linkedAddress,\n    isNftBlacklisted,\n    isNftWhitelisted,\n    isNftInstalled,\n    isNftAccentColorInstalled,\n  });\n\n  const handleSelect = useLastCallback((value: NftMenuHandler) => {\n    if (SHOULD_CLOSE_VIEWER_HANDLERS.includes(value)) {\n      onClose();\n    }\n\n    handleMenuItemSelect(value);\n  });\n\n  return (\n    <div className={styles.actions}>\n      <button\n        type=\"button\"\n        aria-label={lang('More actions')}\n        className={buildClassName(styles.actionButton, styles.menuButton, isMenuOpen && styles.menuButton_active)}\n        onClick={openMenu}\n      >\n        <i className=\"icon icon-more\" aria-hidden />\n      </button>\n      <DropdownMenu\n        isOpen={isMenuOpen}\n        items={menuItems}\n        menuPositionY=\"top\"\n        menuPositionX=\"right\"\n        shouldTranslateOptions\n        onClose={closeMenu}\n        className=\"component-theme-dark\"\n        buttonClassName={styles.menuItem}\n        onSelect={handleSelect}\n      />\n\n      <button\n        type=\"button\"\n        aria-label={lang('Close')}\n        className={styles.actionButton}\n        onClick={onClose}\n      >\n        <i className={buildClassName('icon-windows-close', styles.actionIcon)} aria-hidden />\n      </button>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n  const isViewMode = selectIsCurrentAccountViewMode(global);\n\n  if (!mediaId || mediaType !== MediaType.Nft) return { isViewMode };\n\n  const { byAddress, dnsExpiration } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return { isViewMode };\n\n  const { blacklistedNftAddresses, whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n  const { cardBackgroundNft, accentColorNft } = selectCurrentAccountSettings(global) || {};\n  const tonDnsExpiration = getTonDnsExpirationDate(nft, dnsExpiration);\n  const linkedAddress = selectTonDnsLinkedAddress(global, nft);\n\n  return {\n    nft,\n    tonDnsExpiration,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    cardBackgroundNft,\n    accentColorNft,\n    isViewMode,\n    linkedAddress,\n  };\n})(Actions));\n","import React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { GETGEMS_BASE_MAINNET_URL, GETGEMS_BASE_TESTNET_URL } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { handleUrlClick } from '../../util/openUrl';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './MediaViewer.module.scss';\n\ntype OwnProps = {\n\n  mediaId?: string;\n};\n\ntype StateProps = {\n  title?: string;\n  description?: string;\n  descriptionUrl?: string;\n};\n\nfunction MediaInfo({ title, description, descriptionUrl }: OwnProps & StateProps) {\n  const lang = useLang();\n\n  return (\n    <div className={styles.mediaInfo}>\n      <span className={styles.mediaInfoTitle}>{title}</span>\n      <a\n        href={descriptionUrl}\n        target=\"_blank\"\n        aria-label={lang('Open NFT Collection')}\n        className={styles.mediaInfoDescription}\n        rel=\"noreferrer\"\n        onClick={handleUrlClick}\n      >\n        <span className={styles.descriptionText}>{description}</span>\n        <i className={buildClassName('icon-tooltip', styles.tooltip)} aria-hidden />\n      </a>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (!mediaId || mediaType !== MediaType.Nft) return {};\n\n  const isTestnet = global.settings.isTestnet;\n\n  const getgemsBaseUrl = isTestnet ? GETGEMS_BASE_TESTNET_URL : GETGEMS_BASE_MAINNET_URL;\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  return {\n    title: nft.name || shortenAddress(nft.address, 4),\n    description: nft.collectionName,\n    descriptionUrl: `${getgemsBaseUrl}collection/${nft.collectionAddress}`,\n  };\n})(MediaInfo));\n","import { useRef } from '../lib/teact/teact';\n\nimport type { Signal } from '../util/signals';\n\nimport useEffectOnce from './useEffectOnce';\n\n// Allows to use signal value as \"silent\" dependency in hooks (not causing updates)\nexport function useSignalRef<T>(getValue: Signal<T>) {\n  const ref = useRef<T>(getValue());\n\n  useEffectOnce(() => {\n    return getValue.subscribe(() => {\n      ref.current = getValue();\n    });\n  });\n\n  return ref;\n}\n","import { useEffect } from '../../../lib/teact/teact';\n\nimport { createSignal } from '../../../util/signals';\n\nconst [getZoomChange, setZoomChange] = createSignal(1);\n\nexport default function useZoomChange() {\n  useEffect(() => {\n    return () => {\n      setZoomChange(1);\n    };\n  }, []);\n\n  return [getZoomChange, setZoomChange] as const;\n}\n","import React, {\n  memo, useEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { MediaType } from '../../global/types';\n\nimport { requestMutation } from '../../lib/fasterdom/fasterdom';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\n\nimport styles from './MediaViewer.module.scss';\n\nimport scamImg from '../../assets/scam.svg';\n\ninterface OwnProps {\n\n  mediaId: string;\n}\n\ninterface StateProps {\n  alt?: string;\n  thumbnail?: string;\n  image?: string;\n  lottie?: string;\n  description?: string;\n  isScam?: boolean;\n  whitelistedMediaIds?: string[];\n}\n\nconst ANIMATED_ICON_SIZE = 250; // Preview size (500px) / 2\n\nfunction Media({\n  mediaId, alt, thumbnail, image, lottie, description, isScam, whitelistedMediaIds,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n  const src = image || thumbnail;\n  const ref = useRef<HTMLDivElement>();\n  const { isPortrait } = useDeviceScreen();\n\n  useEffect(() => {\n    const element = ref.current!;\n    const { height } = element.getBoundingClientRect();\n    requestMutation(() => {\n      // Inner scroll requires max-height to be set\n      element.style.setProperty('--max-height', `${height}px`);\n    });\n  }, [isPortrait]);\n\n  const isNftWhiteListed = useMemo(() => {\n    return whitelistedMediaIds?.includes(mediaId);\n  }, [mediaId, whitelistedMediaIds]);\n\n  return (\n    <div className={styles.content}>\n      {lottie ? (\n        <AnimatedIconWithPreview\n          size={ANIMATED_ICON_SIZE}\n          shouldStretch\n          play\n          noLoop={false}\n          tgsUrl={lottie}\n          previewUrl={src}\n          className={styles.image}\n          noPreviewTransition\n        />\n      ) : (\n        <img src={src} alt={alt} className={styles.image} />\n      )}\n      <div className={buildClassName(styles.contentDescription, 'custom-scroll')} ref={ref}>\n        {description && (\n          <div className={styles.contentTextWrapper}>\n            <div className={buildClassName(styles.contentText, 'custom-scroll')} dir=\"auto\">\n              {isScam && !isNftWhiteListed && <img src={scamImg} alt={lang('Scam')} className={styles.scamImage} />}\n              {description}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { mediaId }): StateProps => {\n  const { mediaType = MediaType.Nft } = global.mediaViewer || {};\n\n  if (mediaType !== MediaType.Nft) return {};\n\n  const { byAddress } = selectCurrentAccountState(global)?.nfts || {};\n  const nft = byAddress?.[mediaId];\n  if (!nft) return {};\n\n  const { whitelistedNftAddresses } = selectCurrentAccountState(global) || {};\n\n  return {\n    alt: nft.name,\n    thumbnail: nft.thumbnail,\n    image: nft.image,\n    lottie: nft.metadata?.lottie,\n    description: nft.description,\n    isScam: nft.isScam,\n    whitelistedMediaIds: whitelistedNftAddresses,\n  };\n})(Media));\n","import React, {\n  memo, useEffect, useLayoutEffect, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport type { RealTouchEvent } from '../../util/captureEvents';\n\nimport { animateNumber, timingFunctions } from '../../util/animation';\nimport buildClassName from '../../util/buildClassName';\nimport {\n  captureEvents,\n  IOS_SCREEN_EDGE_THRESHOLD,\n  SWIPE_DIRECTION_THRESHOLD,\n  SWIPE_DIRECTION_TOLERANCE,\n} from '../../util/captureEvents';\nimport { clamp, isBetween, round } from '../../util/math';\nimport { debounce } from '../../util/schedulers';\nimport { IS_IOS, IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useDebouncedCallback from '../../hooks/useDebouncedCallback';\nimport useDerivedState from '../../hooks/useDerivedState';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSignal from '../../hooks/useSignal';\nimport { useSignalRef } from '../../hooks/useSignalRef';\nimport useWindowSize from '../../hooks/useWindowSize';\nimport useZoomChange from './hooks/useZoomChangeSignal';\n\nimport Media from './Media';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  mediaId?: string;\n  getMediaId: (fromId?: string, direction?: number) => string | undefined;\n  selectMedia: (id: string) => void;\n  withAnimation: boolean;\n  onClose: () => void;\n}\n\ntype Transform = {\n  x: number;\n  y: number;\n  scale: number;\n};\n\nenum SwipeDirection {\n  Horizontal,\n  Vertical,\n}\n\nconst SWIPE_X_THRESHOLD = 50; // px\nconst SWIPE_Y_THRESHOLD = 50; // px\nconst SLIDES_GAP = IS_TOUCH_ENV ? 40 : 0; // px\nconst ANIMATION_DURATION = 350; // ms\nconst DEBOUNCE_SELECT_MEDIA = 350; // ms\nconst DEBOUNCE_SWIPE = 500; // ms\nconst DOUBLE_TAP_ZOOM = 3;\nconst CLICK_Y_THRESHOLD = 80; // px\nconst MAX_ZOOM = 4;\nconst MIN_ZOOM = 1;\n\nconst { easeOutCubic, easeOutQuart } = timingFunctions;\n\nlet cancelAnimation: ReturnType<typeof animateNumber> | undefined;\nlet cancelZoomAnimation: ReturnType<typeof animateNumber> | undefined;\n\nfunction Slides({\n  isOpen, mediaId, selectMedia, getMediaId, withAnimation, onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const containerRef = useRef<HTMLDivElement>();\n  const activeSlideRef = useRef<HTMLDivElement>();\n  const leftSlideRef = useRef<HTMLDivElement>();\n  const rightSlideRef = useRef<HTMLDivElement>();\n  const lastTransformRef = useRef<Transform>({ x: 0, y: 0, scale: 1 });\n  const swipeDirectionRef = useRef<SwipeDirection | undefined>(undefined);\n  const initialContentRectRef = useRef<DOMRect | undefined>(undefined);\n  const isReleasedRef = useRef(false);\n  const [getZoomChange] = useZoomChange();\n  const prevZoomChangeRef = useRef(getZoomChange());\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [getTransform, setTransform] = useSignal<Transform>({ x: 0, y: 0, scale: 1 });\n  const transformRef = useSignalRef(getTransform);\n  const [getActiveMediaId, setActiveMediaId] = useSignal<string | undefined>(mediaId);\n  const activeMediaIdRef = useSignalRef(getActiveMediaId);\n  const isScaled = useDerivedState(() => getTransform().scale !== 1, [getTransform]);\n  const activeMediaId = useDerivedState(getActiveMediaId);\n  const { height: windowHeight, width: windowWidth, isResizing } = useWindowSize();\n\n  useHistoryBack({\n    isActive: isOpen,\n    onBack: onClose,\n    shouldBeReplaced: true,\n  });\n\n  const selectMediaDebounced = useDebouncedCallback(selectMedia, [selectMedia], DEBOUNCE_SELECT_MEDIA, true);\n  const clearSwipeDirectionDebounced = useDebouncedCallback(() => {\n    swipeDirectionRef.current = undefined;\n  }, [], DEBOUNCE_SWIPE, true);\n\n  const clickXThreshold = IS_TOUCH_ENV ? 40 : windowWidth / 10;\n\n  useEffect(() => {\n    const { scale, x, y } = transformRef.current;\n    // Only update active media if slide is in default position\n    if (x === 0 && y === 0 && scale === 1) {\n      setActiveMediaId(mediaId);\n    }\n  }, [mediaId, setActiveMediaId, transformRef]);\n\n  useLayoutEffect(() => {\n    const { x, y, scale } = getTransform();\n    if (leftSlideRef.current) {\n      leftSlideRef.current.style.transform = getTransformStyle(-windowWidth + x - SLIDES_GAP);\n    }\n    if (activeSlideRef.current) {\n      activeSlideRef.current.style.transform = getTransformStyle(x, y, scale);\n    }\n    if (rightSlideRef.current) {\n      rightSlideRef.current.style.transform = getTransformStyle(windowWidth + x + SLIDES_GAP);\n    }\n  }, [getTransform, windowWidth]);\n\n  const changeSlide = useLastCallback((direction: number, dryRun = false) => {\n    let lastTransform = lastTransformRef.current;\n    const mId = getMediaId(activeMediaIdRef.current, direction);\n    if (dryRun) return mId !== undefined;\n    if (mId === undefined) return false;\n    const offset = (windowWidth + SLIDES_GAP) * direction;\n    const transform = transformRef.current;\n    const x = transform.x + offset;\n    setActiveMediaId(mId);\n    selectMediaDebounced(mId);\n    lastTransform = { x: 0, y: 0, scale: 1 };\n    if (!withAnimation) {\n      setTransform(lastTransform);\n      return true;\n    }\n    cancelAnimation = animateNumber({\n      from: x,\n      to: 0,\n      duration: ANIMATION_DURATION,\n      timing: easeOutCubic,\n      onUpdate: (value) => setTransform({\n        y: 0,\n        x: value,\n        scale: 1,\n      }),\n    });\n    return true;\n  });\n\n  const handleNextSlide = useLastCallback(() => changeSlide(1));\n  const handlePrevSlide = useLastCallback(() => changeSlide(-1));\n\n  useEffect(() => {\n    if (!containerRef.current || activeMediaIdRef.current === undefined) {\n      return undefined;\n    }\n    let lastTransform = lastTransformRef.current;\n    const lastDragOffset = {\n      x: 0,\n      y: 0,\n    };\n    const lastZoomCenter = {\n      x: 0,\n      y: 0,\n    };\n    const panDelta = {\n      x: 0,\n      y: 0,\n    };\n    let lastGestureTime = Date.now();\n    let content: HTMLElement | null;\n    const setLastGestureTime = debounce(() => {\n      lastGestureTime = Date.now();\n    }, 500, false, true);\n\n    const changeSlideOnClick = (e: MouseEvent): [boolean, boolean] => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return [false, false];\n      let direction = 0;\n      if (windowHeight - e.pageY < CLICK_Y_THRESHOLD) {\n        return [false, false];\n      }\n      if (e.pageX < clickXThreshold) {\n        direction = -1;\n      } else if (e.pageX > windowWidth - clickXThreshold) {\n        direction = 1;\n      }\n      const hasNextSlide = changeSlide(direction, !IS_TOUCH_ENV);\n      const isInThreshold = direction !== 0;\n      return [isInThreshold, hasNextSlide];\n    };\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      const { scale } = transformRef.current;\n      if (scale !== 1) return;\n      switch (e.key) {\n        case 'Left': // IE/Edge specific value\n        case 'ArrowLeft':\n          changeSlide(-1);\n          break;\n\n        case 'Right': // IE/Edge specific value\n        case 'ArrowRight':\n          changeSlide(1);\n          break;\n      }\n    };\n\n    const calculateOffsetBoundaries = (\n      { x, y, scale }: Transform,\n      offsetTop = 0,\n    ): [Transform, boolean, boolean] => {\n      const initialContentRect = initialContentRectRef.current;\n      if (!initialContentRect) return [{ x, y, scale }, true, true];\n      // Get current content boundaries\n      let inBoundsX = true;\n      let inBoundsY = true;\n\n      const centerX = (windowWidth - windowWidth * scale) / 2;\n      const centerY = (windowHeight - windowHeight * scale) / 2;\n\n      // If content is outside window we calculate offset boundaries\n      // based on initial content rect and current scale\n      const minOffsetX = Math.max(-initialContentRect.left * scale, centerX);\n      const maxOffsetX = windowWidth - initialContentRect.right * scale;\n      inBoundsX = isBetween(x, maxOffsetX, minOffsetX);\n      x = clamp(x, maxOffsetX, minOffsetX);\n\n      const minOffsetY = Math.max(-initialContentRect.top * scale + offsetTop, centerY);\n      const maxOffsetY = windowHeight - initialContentRect.bottom * scale;\n      inBoundsY = isBetween(y, maxOffsetY, minOffsetY);\n      y = clamp(y, maxOffsetY, minOffsetY);\n\n      return [{ x, y, scale }, inBoundsX, inBoundsY];\n    };\n\n    const onRelease = (e: MouseEvent | RealTouchEvent | WheelEvent) => {\n      // This allows to prevent onRelease triggered by debounced wheel event\n      // after onRelease was triggered manually in onDrag\n      if (isReleasedRef.current) {\n        isReleasedRef.current = false;\n        return;\n      }\n      if (e.type === 'mouseup') {\n        setIsMouseDown(false);\n      }\n      const transform = transformRef.current;\n      const { y, scale } = transform;\n      let x = transform.x;\n      const absX = Math.abs(x);\n      const absY = Math.abs(y);\n\n      clearSwipeDirectionDebounced();\n\n      // If scale is less than 1 we need to bounce back\n      if (scale < 1) {\n        lastTransform = { x: 0, y: 0, scale: 1 };\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [0, 0, 1],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      if (scale > 1) {\n        // Get current content boundaries\n        const s1 = Math.min(scale, MAX_ZOOM);\n        const scaleFactor = s1 / scale;\n\n        // Calculate new position based on the last zoom center to keep the zoom center\n        // at the same position when bouncing back from max zoom\n        let x1 = x * scaleFactor + (lastZoomCenter.x - scaleFactor * lastZoomCenter.x);\n        let y1 = y * scaleFactor + (lastZoomCenter.y - scaleFactor * lastZoomCenter.y);\n\n        // Arbitrary pan velocity coefficient\n        const k = 0.15;\n\n        // If scale didn't change, we need to add inertia to pan gesture\n        if (e.type !== 'wheel' && lastTransform.scale === scale) {\n          // Calculate user gesture velocity\n          const Vx = Math.abs(lastDragOffset.x) / (Date.now() - lastGestureTime);\n          const Vy = Math.abs(lastDragOffset.y) / (Date.now() - lastGestureTime);\n\n          // Add extra distance based on gesture velocity and last pan delta\n          x1 -= Math.abs(lastDragOffset.x) * Vx * k * panDelta.x;\n          y1 -= Math.abs(lastDragOffset.y) * Vy * k * panDelta.y;\n        }\n\n        [lastTransform] = calculateOffsetBoundaries({ x: x1, y: y1, scale: s1 });\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: value[0],\n            y: value[1],\n            scale: value[2],\n          }),\n        });\n        return;\n      }\n      lastTransform = {\n        x,\n        y,\n        scale,\n      };\n      if (absY >= SWIPE_Y_THRESHOLD) {\n        onClose();\n        return;\n      }\n      // Bounce back if vertical swipe is below threshold\n      if (absY > 0) {\n        cancelAnimation = animateNumber({\n          from: y,\n          to: 0,\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => setTransform({\n            x: 0,\n            y: value,\n            scale,\n          }),\n        });\n        return;\n      }\n      // Get horizontal swipe direction\n      const direction = x < 0 ? 1 : -1;\n      const mId = getMediaId(activeMediaIdRef.current, x < 0 ? 1 : -1);\n      // Get the direction of the last pan gesture.\n      // Could be different from the total horizontal swipe direction\n      // if user starts a swipe in one direction and then changes the direction\n      // we need to cancel slide transition\n      const dirX = panDelta.x < 0 ? -1 : 1;\n      if (mId !== undefined && absX >= SWIPE_X_THRESHOLD && direction === dirX) {\n        const offset = (windowWidth + SLIDES_GAP) * direction;\n        // If image is shifted by more than SWIPE_X_THRESHOLD,\n        // We shift everything by one screen width and then set new active message id\n        x += offset;\n        setActiveMediaId(mId);\n        selectMediaDebounced(mId);\n      }\n      // Then we always return to the original position\n      cancelAnimation = animateNumber({\n        from: x,\n        to: 0,\n        duration: ANIMATION_DURATION,\n        timing: easeOutCubic,\n        onUpdate: (value) => setTransform({\n          y: 0,\n          x: value,\n          scale: scale ?? 1,\n        }),\n      });\n    };\n\n    const cleanup = captureEvents(containerRef.current, {\n      isNotPassive: true,\n      withNativeDrag: true,\n      excludedClosestSelector: `${styles.header}, .${styles.contentDescription}`,\n      minZoom: MIN_ZOOM,\n      maxZoom: MAX_ZOOM,\n      doubleTapZoom: DOUBLE_TAP_ZOOM,\n      withWheelDrag: true,\n      onCapture: (e) => {\n        const { x, y, scale } = transformRef.current;\n        if (e.type === 'mousedown') {\n          setIsMouseDown(true);\n          if (scale !== 1) {\n            e.preventDefault();\n            return;\n          }\n        }\n        lastGestureTime = Date.now();\n        if (x === 0 && y === 0 && scale === 1) {\n          if (!activeSlideRef.current) return;\n          content = activeSlideRef.current.querySelector('img, video');\n          if (!content) return;\n          // Store initial content rect, without transformations\n          initialContentRectRef.current = content.getBoundingClientRect();\n        }\n      },\n      onDrag: (event, captureEvent, {\n        dragOffsetX,\n        dragOffsetY,\n      }, cancelDrag) => {\n        if (isReleasedRef.current) return;\n        // Avoid conflicts with swipe-to-back gestures\n        if (IS_IOS && captureEvent.type === 'touchstart') {\n          const { pageX } = (captureEvent as RealTouchEvent).touches[0];\n          if (pageX <= IOS_SCREEN_EDGE_THRESHOLD || pageX >= windowWidth - IOS_SCREEN_EDGE_THRESHOLD) {\n            return;\n          }\n        }\n        if (cancelAnimation) {\n          cancelAnimation();\n          cancelAnimation = undefined;\n        }\n        panDelta.x = lastDragOffset.x - dragOffsetX;\n        panDelta.y = lastDragOffset.y - dragOffsetY;\n        lastDragOffset.x = dragOffsetX;\n        lastDragOffset.y = dragOffsetY;\n        const absOffsetX = Math.abs(dragOffsetX);\n        const absOffsetY = Math.abs(dragOffsetY);\n        const { x, y, scale } = transformRef.current;\n\n        // If user is inactive but is still touching the screen\n        // we reset last gesture time\n        setLastGestureTime();\n\n        // If image is scaled we just need to pan it\n        if (scale !== 1) {\n          const x1 = lastTransform.x + dragOffsetX;\n          const y1 = lastTransform.y + dragOffsetY;\n          if (['wheel', 'mousemove'].includes(event.type)) {\n            const [transform, inBoundsX, inBoundsY] = calculateOffsetBoundaries({ x: x1, y: y1, scale });\n            if (cancelDrag) cancelDrag(!inBoundsX, !inBoundsY);\n            setTransform(transform);\n            return;\n          }\n          if ('touches' in event && event.touches.length === 1) {\n            setTransform({\n              x: x1,\n              y: y1,\n              scale,\n            });\n          }\n          return;\n        }\n        if (event.type === 'mousemove') return;\n        if (swipeDirectionRef.current !== SwipeDirection.Vertical) {\n          // If user is swiping horizontally or horizontal shift is dominant\n          // we change only horizontal position\n          if (swipeDirectionRef.current === SwipeDirection.Horizontal\n            || Math.abs(x) > SWIPE_DIRECTION_THRESHOLD || absOffsetX / absOffsetY > SWIPE_DIRECTION_TOLERANCE) {\n            swipeDirectionRef.current = SwipeDirection.Horizontal;\n            const limit = windowWidth + SLIDES_GAP;\n            const x1 = clamp(dragOffsetX, -limit, limit);\n            setTransform({\n              x: x1,\n              y: 0,\n              scale,\n            });\n            // We know that at this point onRelease will trigger slide change,\n            // We can trigger onRelease directly instead of waiting for the debounced callback\n            // to avoid a delay\n            if (event.type === 'wheel' && Math.abs(x1) > SWIPE_X_THRESHOLD * 2) {\n              onRelease(event);\n              isReleasedRef.current = true;\n            }\n            return;\n          }\n        }\n        // If vertical shift is dominant we change only vertical position\n        if (swipeDirectionRef.current === SwipeDirection.Vertical\n          || Math.abs(y) > SWIPE_DIRECTION_THRESHOLD || absOffsetY / absOffsetX > SWIPE_DIRECTION_TOLERANCE) {\n          swipeDirectionRef.current = SwipeDirection.Vertical;\n          const limit = windowHeight;\n          const y1 = clamp(dragOffsetY, -limit, limit);\n          setTransform({\n            x: 0,\n            y: y1,\n            scale,\n          });\n          if (event.type === 'wheel' && Math.abs(y1) > SWIPE_Y_THRESHOLD * 2) {\n            onRelease(event);\n            isReleasedRef.current = true;\n          }\n        }\n      },\n      onZoom: (e, {\n        zoom,\n        zoomFactor,\n        initialCenterX,\n        initialCenterY,\n        dragOffsetX,\n        dragOffsetY,\n        currentCenterX,\n        currentCenterY,\n      }) => {\n        if (cancelAnimation) cancelAnimation();\n        initialCenterX = initialCenterX || windowWidth / 2;\n        initialCenterY = initialCenterY || windowHeight / 2;\n        currentCenterX = currentCenterX || windowWidth / 2;\n        currentCenterY = currentCenterY || windowHeight / 2;\n\n        // Calculate current scale based on zoom factor and limits, add zoom margin for bounce back effect\n        const scale = zoom ?? clamp(lastTransform.scale * zoomFactor!, MIN_ZOOM * 0.5, MAX_ZOOM * 3);\n        const scaleFactor = scale / lastTransform.scale;\n        const offsetX = Math.abs(Math.min(lastTransform.x, 0));\n        const offsetY = Math.abs(Math.min(lastTransform.y, 0));\n\n        // Save last zoom center for bounce back effect\n        lastZoomCenter.x = currentCenterX;\n        lastZoomCenter.y = currentCenterY;\n\n        // Calculate new center relative to the shifted image\n        const scaledCenterX = offsetX + initialCenterX;\n        const scaledCenterY = offsetY + initialCenterY;\n\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (scaledCenterX - scaleFactor * scaledCenterX);\n        const scaleOffsetY = (scaledCenterY - scaleFactor * scaledCenterY);\n\n        const [transform] = calculateOffsetBoundaries({\n          x: lastTransform.x + scaleOffsetX + dragOffsetX,\n          y: lastTransform.y + scaleOffsetY + dragOffsetY,\n          scale,\n        });\n\n        setTransform(transform);\n      },\n      onClick(e) {\n        setIsMouseDown(false);\n        const [isInThreshold, hasNextSlide] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          if (IS_TOUCH_ENV) return;\n          if (!hasNextSlide) onClose();\n          return;\n        }\n        if (lastTransform.scale !== 1 || IS_TOUCH_ENV) return;\n        onClose();\n      },\n      onDoubleClick(e, {\n        centerX,\n        centerY,\n      }) {\n        const [isInThreshold] = changeSlideOnClick(e as MouseEvent);\n        if (isInThreshold) {\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n        if (!IS_TOUCH_ENV && e.type !== 'wheel') return;\n        const { x, y, scale } = transformRef.current;\n        // Calculate how much we need to shift the image to keep the zoom center at the same position\n        const scaleOffsetX = (centerX - DOUBLE_TAP_ZOOM * centerX);\n        const scaleOffsetY = (centerY - DOUBLE_TAP_ZOOM * centerY);\n        if (scale === 1) {\n          if (x !== 0 || y !== 0) return;\n          lastTransform = calculateOffsetBoundaries({\n            x: scaleOffsetX,\n            y: scaleOffsetY,\n            scale: DOUBLE_TAP_ZOOM,\n          })[0];\n        } else {\n          lastTransform = {\n            x: 0,\n            y: 0,\n            scale: 1,\n          };\n        }\n        cancelAnimation = animateNumber({\n          from: [x, y, scale],\n          to: [lastTransform.x, lastTransform.y, lastTransform.scale],\n          duration: ANIMATION_DURATION,\n          timing: easeOutCubic,\n          onUpdate: (value) => {\n            const transform = {\n              x: value[0],\n              y: value[1],\n              scale: value[2],\n            };\n            setTransform(transform);\n          },\n        });\n      },\n      onRelease,\n    });\n    document.addEventListener('keydown', handleKeyDown, false);\n    return () => {\n      cleanup();\n      document.removeEventListener('keydown', handleKeyDown, false);\n    };\n  },\n  [\n    onClose,\n    setTransform,\n    getMediaId,\n    windowWidth,\n    windowHeight,\n    clickXThreshold,\n    selectMediaDebounced,\n    clearSwipeDirectionDebounced,\n    withAnimation,\n    setIsMouseDown,\n    transformRef,\n    setActiveMediaId,\n    activeMediaIdRef,\n    changeSlide,\n  ]);\n\n  useEffect(() => {\n    const zoomChange = getZoomChange();\n    const hasZoomChanged = prevZoomChangeRef.current !== undefined\n      && prevZoomChangeRef.current !== zoomChange;\n    if (!containerRef.current || !hasZoomChanged) return;\n    prevZoomChangeRef.current = zoomChange;\n    const { scale } = transformRef.current;\n    const dir = zoomChange > 0 ? -1 : +1;\n    const minZoom = MIN_ZOOM * 0.6;\n    const maxZoom = MAX_ZOOM * 3;\n    let steps = 100;\n    let prevValue = 0;\n    if (scale <= minZoom && dir > 0) return;\n    if (scale >= maxZoom && dir < 0) return;\n    if (scale === 1 && dir > 0) steps = 20;\n    if (cancelZoomAnimation) cancelZoomAnimation();\n    cancelZoomAnimation = animateNumber({\n      from: dir,\n      to: dir * steps,\n      duration: ANIMATION_DURATION,\n      timing: easeOutQuart,\n      onUpdate: (value) => {\n        if (!containerRef.current) return;\n        const delta = round(value - prevValue, 2);\n        prevValue = value;\n        // To reuse existing logic we trigger wheel event for zoom buttons\n        const wheelEvent = new WheelEvent('wheel', {\n          deltaY: delta,\n          ctrlKey: true,\n        });\n        containerRef.current.dispatchEvent(wheelEvent);\n      },\n    });\n  }, [getZoomChange, transformRef]);\n\n  // eslint-disable-next-line no-null/no-null\n  if (activeMediaId === undefined) return null;\n\n  const nextMediaId = getMediaId(activeMediaId, 1);\n  const prevMediaId = getMediaId(activeMediaId, -1);\n  const hasPrev = prevMediaId !== undefined;\n  const hasNext = nextMediaId !== undefined;\n  const isMoving = isMouseDown && isScaled;\n\n  return (\n    <div className={styles.slides} ref={containerRef}>\n      <div className={styles.slide} ref={leftSlideRef}>\n        {hasPrev && !isScaled && !isResizing && (\n          <Media mediaId={prevMediaId} />\n        )}\n      </div>\n      <div\n        className={buildClassName(styles.slide, styles.slide_active, isMoving && styles.slide_moving)}\n        ref={activeSlideRef}\n      >\n        <Media mediaId={activeMediaId} />\n      </div>\n      <div className={styles.slide} ref={rightSlideRef}>\n        {hasNext && !isScaled && !isResizing && (\n          <Media mediaId={nextMediaId} />\n        )}\n      </div>\n      {hasPrev && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handlePrevSlide}\n          className={buildClassName(styles.navigation, styles.navigation_prev)}\n          aria-label={lang('Previous')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n      {hasNext && !isScaled && !IS_TOUCH_ENV && (\n        <button\n          type=\"button\"\n          onClick={handleNextSlide}\n          className={buildClassName(styles.navigation, styles.navigation_next)}\n          aria-label={lang('Next')}\n          dir={lang.isRtl ? 'rtl' : undefined}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default memo(Slides);\n\nfunction getTransformStyle(x = 0, y = 0, scale = 1) {\n  return `translate3d(${x.toFixed(3)}px, ${y.toFixed(3)}px, 0px) scale(${scale.toFixed(3)})`;\n}\n","import React, {\n  beginHeavyAnimation,\n  memo,\n  useEffect,\n  useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport { MediaType } from '../../global/types';\n\nimport { ANIMATION_END_DELAY } from '../../config';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { animateClosing, animateOpening, ANIMATION_DURATION } from './helpers/ghostAnimation';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useToggleClass from '../../hooks/useToggleClass';\n\nimport ShowTransition from '../ui/ShowTransition';\nimport Transition from '../ui/Transition';\nimport Actions from './Actions';\nimport MediaInfo from './MediaInfo';\nimport Slides from './Slides';\n\nimport styles from './MediaViewer.module.scss';\n\ninterface StateProps {\n  mediaId?: string;\n  txId?: string;\n  hiddenNfts?: 'user' | 'scam';\n  noGhostAnimation?: boolean;\n  mediaIds: string[];\n  mediaUrl?: string;\n  mediaType: MediaType;\n  mediaByIds?: Record<string, ApiNft>;\n  blacklistedIds: string[];\n  withAnimation: boolean;\n}\n\nfunction MediaViewer({\n  mediaId, mediaIds, mediaType, mediaUrl, withAnimation, mediaByIds, blacklistedIds, txId, hiddenNfts, noGhostAnimation,\n}: StateProps) {\n  const { closeMediaViewer, openMediaViewer } = getActions();\n\n  const isOpen = Boolean(mediaId);\n  const lang = useLang();\n  const prevMediaId = usePrevious(mediaId);\n  const prevTxId = usePrevious(txId);\n  const prevHiddenNfts = usePrevious(hiddenNfts);\n  const prevNoGhostAnimation = usePrevious(noGhostAnimation);\n  const headerAnimation = withAnimation ? 'slideFade' : 'none';\n  const shouldAnimateOpening = withAnimation && isOpen && !prevMediaId && !noGhostAnimation;\n  const shouldAnimateClosing = withAnimation && !isOpen && !!prevMediaId && !prevNoGhostAnimation;\n\n  const handleClose = useLastCallback(() => closeMediaViewer());\n\n  const renderedMediaIds = useMemo(() => {\n    return mediaIds.filter((id) => {\n      const media = mediaByIds?.[id];\n      return media && !media.isHidden && !blacklistedIds.includes(id);\n    });\n  }, [blacklistedIds, mediaByIds, mediaIds]);\n  const selectedMediaIndex = renderedMediaIds.indexOf(mediaId!);\n\n  const getMediaId = useLastCallback((fromId?: string, direction?: number): string | undefined => {\n    if (fromId === undefined) return undefined;\n    const index = renderedMediaIds.indexOf(fromId);\n    if ((direction === -1 && index > 0) || (direction === 1 && index < renderedMediaIds.length - 1)) {\n      return renderedMediaIds[index + direction];\n    }\n    return undefined;\n  });\n\n  const selectMedia = useLastCallback((id: string) => {\n    openMediaViewer({ mediaType, mediaId: id });\n  });\n\n  useToggleClass({ className: 'is-media-viewer-open', isActive: isOpen, element: document.body });\n\n  useEffect(() => (isOpen ? captureEscKeyListener(handleClose) : undefined), [handleClose, isOpen]);\n\n  useEffect(() => {\n    if (shouldAnimateOpening) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateOpening(mediaType, mediaId, mediaUrl, txId, hiddenNfts);\n    }\n    if (shouldAnimateClosing) {\n      beginHeavyAnimation(ANIMATION_DURATION + ANIMATION_END_DELAY);\n      animateClosing(mediaType, prevMediaId, prevTxId, prevHiddenNfts);\n    }\n  }, [\n    shouldAnimateOpening,\n    shouldAnimateClosing,\n    mediaId,\n    mediaType,\n    mediaUrl,\n    prevMediaId,\n    txId,\n    prevTxId,\n    hiddenNfts,\n    prevHiddenNfts,\n  ]);\n\n  return (\n    <ShowTransition\n      className={buildClassName(styles.root, 'opacity-transition', 'slow')}\n      isOpen={isOpen}\n      shouldAnimateFirstRender\n      isCustom\n    >\n      <div className={styles.header} dir={lang.isRtl ? 'rtl' : undefined}>\n        <Transition activeKey={selectedMediaIndex} name={headerAnimation} className={styles.headerTransition}>\n          <MediaInfo mediaId={mediaId} />\n        </Transition>\n        <Actions mediaId={mediaId} onClose={handleClose} />\n      </div>\n      <Slides\n        isOpen={isOpen}\n        mediaId={mediaId}\n        getMediaId={getMediaId}\n        selectMedia={selectMedia}\n        withAnimation={withAnimation}\n        onClose={handleClose}\n      />\n    </ShowTransition>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const {\n    mediaId, mediaType = MediaType.Nft, txId, hiddenNfts, noGhostAnimation,\n  } = global.mediaViewer || {};\n  const animationLevel = global.settings?.animationLevel;\n  const accountState = selectCurrentAccountState(global);\n\n  let mediaIds: string[] = MEMO_EMPTY_ARRAY;\n  let mediaUrl: string | undefined;\n  let mediaByIds: Record<string, ApiNft> | undefined;\n  let blacklistedIds: string[] = MEMO_EMPTY_ARRAY;\n\n  if (mediaType === MediaType.Nft) {\n    const { orderedAddresses, byAddress } = accountState?.nfts || {};\n    const { blacklistedNftAddresses } = accountState || {};\n    const nft = byAddress?.[mediaId!];\n    mediaUrl = (!nft?.metadata?.lottie && nft?.image) || nft?.thumbnail;\n    mediaIds = orderedAddresses || MEMO_EMPTY_ARRAY;\n    mediaByIds = byAddress;\n    if (blacklistedNftAddresses?.length) {\n      blacklistedIds = blacklistedNftAddresses;\n    }\n  }\n\n  return {\n    mediaId,\n    txId,\n    hiddenNfts,\n    noGhostAnimation,\n    mediaIds,\n    mediaType,\n    mediaUrl,\n    mediaByIds,\n    blacklistedIds,\n    withAnimation: animationLevel > 0,\n  };\n})(MediaViewer));\n","import windowSize from './windowSize';\n\nexport function isElementInViewport(el: HTMLElement) {\n  if (el.style.display === 'none') {\n    return false;\n  }\n\n  const rect = el.getBoundingClientRect();\n  const { height: windowHeight } = windowSize.get();\n\n  return (rect.top <= windowHeight) && ((rect.top + rect.height) >= 0);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"TyYDeoPI\",\"standard\":\"ZzhmGZX8\",\"silver\":\"VOCPN2H2\",\"gold\":\"eIy_VriQ\",\"platinum\":\"ThB2aK4u\",\"black\":\"pSEqHC9v\",\"list\":\"VuKYnODy\",\"term\":\"De4BJ4HR\",\"icon\":\"WsbPBan7\",\"data\":\"SmGuh0xn\",\"button\":\"hn6cNzho\",\"currencyIcon\":\"uJl349yd\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiMtwCardType } from '../../api/types';\n\nimport { DEFAULT_FEE, TONCOIN } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { fromDecimal } from '../../util/decimals';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\n\nimport styles from './CardPros.module.scss';\n\ninterface OwnProps {\n  type: ApiMtwCardType;\n  price?: number;\n  balance?: bigint;\n  isAvailable?: boolean;\n}\n\nfunction CardPros({ type, price, balance, isAvailable }: OwnProps) {\n  const { startCardMinting, showDialog } = getActions();\n\n  const lang = useLang();\n  const isEnoughBalance = price && balance ? fromDecimal(price, TONCOIN.decimals) + DEFAULT_FEE < balance : false;\n\n  const handleSubmit = useLastCallback(() => {\n    if (!isEnoughBalance) {\n      showDialog({\n        title: lang('Insufficient Balance'),\n        message: lang('Please top up your TON balance.'),\n      });\n\n      return;\n    }\n\n    startCardMinting({ type });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, styles[type])}>\n      <dl className={styles.list}>\n        <dt className={styles.term}>\n          {lang('Unique')}\n          <i className={buildClassName(styles.icon, 'icon-diamond')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>\n          {lang('Get a card with unique background and personalized palette for wallet interface.')}\n        </dd>\n\n        <dt className={styles.term}>\n          {lang('Transferable')}\n          <i className={buildClassName(styles.icon, 'icon-swap')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>{lang('Easily send your upgraded card to any of your friends.')}</dd>\n\n        <dt className={styles.term}>\n          {lang('Tradable')}\n          <i className={buildClassName(styles.icon, 'icon-auction')} aria-hidden />\n        </dt>\n        <dd className={styles.data}>{lang('Sell or auction your card on third-party NFT marketplaces.')}</dd>\n      </dl>\n\n      {!!price && (\n        <Button\n          isPrimary\n          isDisabled={!isAvailable}\n          className={styles.button}\n          onClick={handleSubmit}\n        >\n          {lang('Upgrade for %currency% %amount%', {\n            amount: price,\n            currency: <i className={buildClassName(styles.currencyIcon, 'icon-ton')} aria-label=\"TON\" />,\n          })}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default memo(CardPros);\n","// extracted by mini-css-extract-plugin\nexport default {\"dialog\":\"CjwvIYmY\",\"transition\":\"Tv22S5Gs\",\"transitionSlide\":\"zUSYH0x7\",\"content\":\"LpuTVkiG\",\"slide\":\"ZfVQ8KGW\",\"standard\":\"k0gL3sAb\",\"black\":\"MUamKAQw\",\"slideInner\":\"k2_YXVBE\",\"video\":\"wpccVVfq\",\"cardType\":\"CzdRPvVS\",\"close\":\"IBwesrC_\",\"navigation\":\"cIoUkENQ\",\"navigationLeft\":\"GF_wLd9i\",\"navigationRight\":\"y5oAUrMg\",\"navigationIcon\":\"aSeq5lrl\",\"avaliability\":\"OGLS5EQO\",\"progress\":\"Q3dzQZod\",\"soldOut\":\"VyfNbKU1\",\"amount\":\"wozoyd4S\",\"amountInner\":\"ZgsWpsHL\",\"amountLeft\":\"XMt08mOm\",\"amountSold\":\"F8mchLc4\",\"dots\":\"HY5hRBmJ\",\"dot\":\"tOktKTIK\",\"dotActive\":\"ZMU4FK04\",\"sticker\":\"eto_LEBm\",\"resultWithTime\":\"hlrWLhQ2\",\"resultTimeIcon\":\"W1LXu50q\",\"mintCardBanner\":\"ccNpjwpK\"};","import React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCardInfo, ApiCardsInfo, ApiMtwCardType } from '../../api/types';\nimport type { LangFn } from '../../hooks/useLang';\n\nimport { MTW_CARDS_MINT_BASE_URL } from '../../config';\nimport { selectCurrentToncoinBalance } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { captureEvents, SwipeDirection } from '../../util/captureEvents';\nimport { formatNumber } from '../../util/formatNumber';\nimport { round } from '../../util/round';\nimport { IS_TOUCH_ENV } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Transition from '../ui/Transition';\nimport CardPros from './CardPros';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './MintCardModal.module.scss';\n\nexport const MAP_CARD_TYPE_TO_NAME = {\n  standard: 'Standard Card',\n  silver: 'Silver Card',\n  gold: 'Gold Card',\n  platinum: 'Platinum Card',\n  black: 'Black Card',\n} as const;\n\ninterface OwnProps {\n  cardsInfo: ApiCardsInfo;\n}\n\ninterface StateProps {\n  tonBalance: bigint;\n}\n\nenum CardSlides {\n  Standard = 0,\n  Silver,\n  Gold,\n  Platinum,\n  Black,\n}\n\nconst TOTAL_SLIDES = Object.values(CardSlides).length / 2;\n\nfunction CardRoster({ cardsInfo, tonBalance }: OwnProps & StateProps) {\n  const { closeMintCardModal } = getActions();\n\n  const lang = useLang();\n\n  const transitionRef = useRef<HTMLDivElement>();\n  const [currentSlide, setCurrentSlide] = useState<CardSlides>(CardSlides.Standard);\n  const [nextKey, setNextKey] = useState<CardSlides>(CardSlides.Silver);\n\n  const showNextSlide = useLastCallback(() => {\n    setCurrentSlide((current) => (current === CardSlides.Black ? CardSlides.Standard : current + 1));\n    setNextKey((current) => (current === CardSlides.Black ? CardSlides.Standard : current + 1));\n  });\n\n  const showPrevSlide = useLastCallback(() => {\n    setCurrentSlide((current) => (current === CardSlides.Standard ? CardSlides.Black : current - 1));\n    setNextKey((current) => (current === CardSlides.Standard ? CardSlides.Black : current - 1));\n  });\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureEvents(transitionRef.current!, {\n      onSwipe: (e, direction) => {\n        if (direction === SwipeDirection.Left) {\n          showNextSlide();\n          return true;\n        } else if (direction === SwipeDirection.Right) {\n          showPrevSlide();\n          return true;\n        }\n\n        return false;\n      },\n      selectorToPreventScroll: '.custom-scroll',\n    });\n  }, []);\n\n  function renderControls() {\n    return (\n      <>\n        <Button\n          isRound\n          className={buildClassName(styles.close, modalStyles.closeButton)}\n          ariaLabel={lang('Close')}\n          onClick={closeMintCardModal}\n        >\n          <i className={buildClassName(modalStyles.closeIcon, 'icon-close')} aria-hidden />\n        </Button>\n        <button\n          className={buildClassName(styles.navigation, styles.navigationLeft)}\n          type=\"button\"\n          aria-label={lang('Prev')}\n          onClick={() => showPrevSlide()}\n        >\n          <i className={buildClassName(styles.navigationIcon, 'icon-chevron-left')} aria-hidden />\n        </button>\n        <button\n          className={buildClassName(styles.navigation, styles.navigationRight)}\n          type=\"button\"\n          onClick={() => showNextSlide()}\n          aria-label={lang('Next')}\n        >\n          <i className={buildClassName(styles.navigationIcon, 'icon-chevron-right')} aria-hidden />\n        </button>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: CardSlides) {\n    const defaultProps = {\n      lang,\n      tonBalance,\n      currentKey,\n    };\n\n    switch (currentKey) {\n      case CardSlides.Standard:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.standard,\n          type: 'standard',\n          cardInfo: cardsInfo?.standard,\n        });\n\n      case CardSlides.Silver:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.silver,\n          type: 'silver',\n          cardInfo: cardsInfo?.silver,\n        });\n\n      case CardSlides.Gold:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.gold,\n          type: 'gold',\n          cardInfo: cardsInfo?.gold,\n        });\n\n      case CardSlides.Platinum:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.platinum,\n          type: 'platinum',\n          cardInfo: cardsInfo?.platinum,\n        });\n\n      case CardSlides.Black:\n        return renderMediaCard({\n          ...defaultProps,\n          title: MAP_CARD_TYPE_TO_NAME.black,\n          type: 'black',\n          cardInfo: cardsInfo?.black,\n        });\n    }\n  }\n\n  return (\n    <>\n      {renderControls()}\n      <Transition\n        ref={transitionRef}\n        name=\"semiFade\"\n        className={buildClassName(styles.transition, 'custom-scroll')}\n        activeKey={currentSlide}\n        nextKey={nextKey}\n      >\n        {renderContent}\n      </Transition>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    tonBalance: selectCurrentToncoinBalance(global),\n  };\n})(CardRoster));\n\nfunction renderMediaCard({\n  lang,\n  title,\n  type,\n  cardInfo,\n  tonBalance,\n  currentKey,\n}: {\n  lang: LangFn;\n  title: string;\n  type: ApiMtwCardType;\n  cardInfo?: ApiCardInfo;\n  tonBalance?: bigint;\n  currentKey: number;\n}) {\n  return (\n    (\n      <div className={styles.content}>\n        <div className={buildClassName(styles.slide, styles[type])}>\n          <video\n            autoPlay\n            muted\n            loop\n            playsInline\n            poster={`${MTW_CARDS_MINT_BASE_URL}mtw_card_${type}.avif`}\n            className={styles.video}\n          >\n            <source\n              src={`${MTW_CARDS_MINT_BASE_URL}mtw_card_${type}.h264.mp4`}\n              type=\"video/mp4; codecs=avc1.4D401E,mp4a.40.2\"\n            />\n          </video>\n          <div className={styles.slideInner}>\n            {renderDots(currentKey)}\n            <div className={styles.cardType}>{title}</div>\n            {renderAvailability(lang, cardInfo)}\n          </div>\n        </div>\n        <CardPros type={type} price={cardInfo?.price} balance={tonBalance} isAvailable={Boolean(cardInfo?.notMinted)} />\n      </div>\n    )\n  );\n}\n\nfunction renderDots(currentKey: number) {\n  return (\n    <div className={styles.dots}>\n      {Array.from({ length: TOTAL_SLIDES }).map((_, index) => {\n        return (\n          <div key={index} className={buildClassName(styles.dot, index === currentKey && styles.dotActive)} />\n        );\n      })}\n    </div>\n  );\n}\n\nfunction renderAvailability(lang: LangFn, cardInfo?: ApiCardInfo) {\n  const { all, notMinted } = cardInfo || {};\n  if (!all || !notMinted) {\n    return (\n      <div className={styles.avaliability}>\n        <div className={styles.soldOut}>{lang('This card has been sold out')}</div>\n      </div>\n    );\n  }\n\n  const sold = all - notMinted;\n  const leftAmount = lang('%amount% left', { amount: formatNumber(notMinted) });\n  const soldAmount = lang('%amount% sold', { amount: formatNumber(sold) });\n\n  return (\n    <div className={styles.avaliability}>\n      <div\n        className={styles.progress}\n        style={`--progress: ${round(notMinted / all, 2)};}`}\n      >\n        <div className={buildClassName(styles.amount, styles.amountInner, styles.amountLeft)}>{leftAmount}</div>\n        <div className={buildClassName(styles.amount, styles.amountInner, styles.amountSold)}>{soldAmount}</div>\n      </div>\n      <div className={buildClassName(styles.amount, styles.amountLeft)}>{leftAmount}</div>\n      <div className={buildClassName(styles.amount, styles.amountSold)}>{soldAmount}</div>\n    </div>\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiCardsInfo, ApiMtwCardType } from '../../api/types';\nimport type { Theme } from '../../global/types';\nimport { MintCardState } from '../../global/types';\n\nimport { ANIMATED_STICKER_TINY_ICON_PX } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport Transition from '../ui/Transition';\nimport CardRoster, { MAP_CARD_TYPE_TO_NAME } from './CardRoster';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './MintCardModal.module.scss';\n\ninterface StateProps {\n  isOpen: boolean;\n  cardsInfo?: ApiCardsInfo;\n  isLoading?: boolean;\n  state?: MintCardState;\n  error?: string;\n  theme: Theme;\n  selectedCardType?: ApiMtwCardType;\n}\n\nfunction MintCardModal({\n  isOpen,\n  cardsInfo,\n  isLoading,\n  state,\n  error,\n  theme,\n  selectedCardType,\n}: StateProps) {\n  const {\n    closeMintCardModal, clearMintCardError, submitMintCard, submitMintCardHardware,\n  } = getActions();\n\n  const lang = useLang();\n  const appTheme = useAppTheme(theme);\n  const { renderingKey, nextKey } = useModalTransitionKeys(state ?? 0, isOpen);\n\n  const selectedCardName = selectedCardType ? MAP_CARD_TYPE_TO_NAME[selectedCardType] : '';\n\n  const handlePasswordSubmit = useLastCallback((password: string) => {\n    submitMintCard({ password });\n  });\n\n  const handleHardwareSubmit = useLastCallback(() => {\n    submitMintCardHardware();\n  });\n\n  function renderPasswordForm(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader\n          title={!getDoesUsePinPad() ? lang('Confirm Upgrading') : undefined}\n          onClose={getDoesUsePinPad() ? closeMintCardModal : undefined}\n          onBackButtonClick={!getDoesUsePinPad() ? closeMintCardModal : undefined}\n        />\n        <PasswordForm\n          isActive={isActive}\n          error={error}\n          isLoading={isLoading}\n          submitLabel={lang('Confirm')}\n          cancelLabel={lang('Cancel')}\n          onSubmit={handlePasswordSubmit}\n          onCancel={closeMintCardModal}\n          onUpdate={clearMintCardError}\n          operationType=\"mintCard\"\n          skipAuthScreen\n        >\n          <TransactionBanner\n            className={styles.mintCardBanner}\n            secondText={selectedCardName}\n          />\n        </PasswordForm>\n      </>\n    );\n  }\n\n  function renderComplete(isActive: boolean) {\n    return (\n      <>\n        <ModalHeader title={lang('Card has been upgraded!')} onClose={closeMintCardModal} />\n\n        <div className={buildClassName(modalStyles.transitionContent, modalStyles.transitionContent_simple)}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={styles.sticker}\n            tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n            previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n          />\n\n          <div className={buildClassName(styles.resultWithTime)}>\n            <AnimatedIconWithPreview\n              play={isActive}\n              size={ANIMATED_STICKER_TINY_ICON_PX}\n              className={styles.resultTimeIcon}\n              nonInteractive\n              noLoop={false}\n              tgsUrl={ANIMATED_STICKERS_PATHS[appTheme].iconClockGray}\n              previewUrl={ANIMATED_STICKERS_PATHS[appTheme].preview.iconClockGray}\n            />\n            <div>\n              {renderText(lang('$mint_card_result'))}\n            </div>\n          </div>\n\n          <div className={modalStyles.buttons}>\n            <Button\n              isPrimary\n              className={modalStyles.buttonFullWidth}\n              onClick={closeMintCardModal}\n            >\n              {lang('Done')}\n            </Button>\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: MintCardState) {\n    switch (currentKey) {\n      case MintCardState.Initial:\n        return (<CardRoster cardsInfo={cardsInfo!} />);\n\n      case MintCardState.Password:\n        return renderPasswordForm(isActive);\n\n      case MintCardState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleHardwareSubmit}\n            onClose={closeMintCardModal}\n          />\n        );\n\n      case MintCardState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={closeMintCardModal}\n            onTryAgain={handleHardwareSubmit}\n          />\n        );\n\n      case MintCardState.Done:\n        return renderComplete(isActive);\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      forceFullNative\n      nativeBottomSheetKey=\"mint-card\"\n      dialogClassName={styles.dialog}\n      onClose={closeMintCardModal}\n    >\n      <Transition\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(styles.transition, 'custom-scroll')}\n        slideClassName={styles.transitionSlide}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const { currentMintCard } = global;\n  const { config } = selectCurrentAccountState(global) || {};\n  const { cardsInfo } = config || {};\n\n  return {\n    isOpen: currentMintCard?.state !== undefined,\n    cardsInfo,\n    isLoading: currentMintCard?.isLoading,\n    state: currentMintCard?.state,\n    error: currentMintCard?.error,\n    theme: global.settings.theme,\n    selectedCardType: currentMintCard?.type,\n  };\n})(MintCardModal));\n","import type { ChangeEvent } from 'react';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './Switcher.module.scss';\n\ntype OwnProps = {\n  id?: string;\n  name?: string;\n  value?: string;\n  label?: string;\n  checked?: boolean;\n  className?: string;\n  onChange?: (e: ChangeEvent<HTMLInputElement>) => void;\n  onCheck?: (isChecked: boolean) => void;\n  shouldStopPropagation?: boolean;\n};\n\nfunction Switcher({\n  id,\n  name,\n  value,\n  label,\n  checked = false,\n  className,\n  onChange,\n  onCheck,\n  shouldStopPropagation,\n}: OwnProps) {\n  function handleChange(e: ChangeEvent<HTMLInputElement>) {\n    onChange?.(e);\n    onCheck?.(e.currentTarget.checked);\n  }\n\n  return (\n    <label\n      className={buildClassName(styles.container, className)}\n      title={label}\n      aria-label={label}\n      onClick={shouldStopPropagation ? (e) => e.stopPropagation() : undefined}\n      tabIndex={0}\n      role=\"button\"\n    >\n      <input\n        type=\"checkbox\"\n        id={id}\n        name={name}\n        value={value}\n        checked={checked}\n        className={styles.input}\n        onChange={handleChange}\n      />\n      <span className={styles.widget} />\n    </label>\n  );\n}\n\nexport default memo(Switcher);\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"pDx55knh\",\"input\":\"cLbaNjJ_\",\"widget\":\"tiLjiStY\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"v8rRtn7B\",\"sticker\":\"CC8Q5sJb\",\"stickerHuge\":\"bQ7CA6_X\",\"error\":\"iEiAdwiC\",\"step\":\"TI5caump\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport CreatePasswordForm from '../../ui/CreatePasswordForm';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOff({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { disableBiometrics } = getActions();\n\n  const lang = useLang();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const handleSubmit = useLastCallback((password: string, isPasswordNumeric?: boolean) => {\n    disableBiometrics({ password, isPasswordNumeric });\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: BiometricsState) {\n    switch (currentKey) {\n      case BiometricsState.TurnOffBiometricConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Confirmation')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              {error ? (\n                <div className={styles.error}>{lang(error)}</div>\n              ) : (\n                <div className={styles.step}>{lang('Please verify the operation.')}</div>\n              )}\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffCreatePassword:\n        return (\n          <>\n            <ModalHeader title={lang('Create Password')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isActive}\n                isLoading={isLoading}\n                formId=\"biometrics-create-password\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n              />\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOffComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Disabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOff);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TurnOffWaning({ isOpen, onClose }: OwnProps) {\n  const { openBiometricsTurnOff } = getActions();\n\n  const lang = useLang();\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      title={lang('Turn Off Biometrics')}\n      onClose={onClose}\n    >\n      <p className={modalStyles.text}>\n        {lang('If you turn off biometric protection, you will need to create a password.')}\n      </p>\n\n      <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsNoExtraSpace)}>\n        <Button className={modalStyles.button} onClick={onClose}>\n          {lang('Cancel')}\n        </Button>\n        <Button isPrimary className={modalStyles.button} onClick={openBiometricsTurnOff}>\n          {lang('Continue')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOffWaning);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport { ANIMATED_STICKER_HUGE_SIZE_PX } from '../../../config';\nimport buildClassName from '../../../util/buildClassName';\nimport resolveSlideTransitionName from '../../../util/resolveSlideTransitionName';\nimport { IS_ELECTRON } from '../../../util/windowEnvironment';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../../hooks/useModalTransitionKeys';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport ModalHeader from '../../ui/ModalHeader';\nimport PasswordForm from '../../ui/PasswordForm';\nimport Transition from '../../ui/Transition';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './Biometrics.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  state: BiometricsState;\n  error?: string;\n  onClose: NoneToVoidFunction;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nconst STICKER_SIZE = 180;\n\nfunction TurnOn({\n  isOpen, isLoading, isInsideModal, state, error, onClose,\n}: OwnProps) {\n  const { enableBiometrics } = getActions();\n\n  const lang = useLang();\n  const [localError, setLocalError] = useState<string | undefined>();\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n  const shouldDisablePasswordForm = Boolean(state !== BiometricsState.TurnOnPasswordConfirmation);\n\n  useEffect(() => {\n    if (isOpen) {\n      setLocalError('');\n    }\n  }, [isOpen]);\n\n  const handleClearError = useLastCallback(() => {\n    setLocalError(undefined);\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    if (shouldDisablePasswordForm) {\n      return;\n    }\n\n    try {\n      enableBiometrics({ password });\n    } catch (err: any) {\n      setLocalError(err.message || 'Unknown error.');\n    }\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: BiometricsState) {\n    switch (currentKey) {\n      case BiometricsState.TurnOnPasswordConfirmation:\n        return (\n          <>\n            <ModalHeader title={lang('Turn On Biometrics')} onClose={onClose} />\n            <PasswordForm\n              isActive={isActive}\n              isLoading={isLoading}\n              error={error || localError}\n              operationType=\"turnOnBiometrics\"\n              help={lang('Enabling biometric confirmation will reset the password.')}\n              submitLabel={lang('Continue')}\n              onSubmit={handleSubmit}\n              onCancel={onClose}\n              onUpdate={handleClearError}\n            />\n          </>\n        );\n\n      case BiometricsState.TurnOnRegistration:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>{lang('Step 1 of 2. Registration')}</div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnVerification:\n        return (\n          <>\n            <ModalHeader title={lang('Biometric Registration')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.holdTon}\n                previewUrl={ANIMATED_STICKERS_PATHS.holdTonPreview}\n                play={isActive}\n                size={STICKER_SIZE}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n\n              <div className={styles.step}>\n                {lang(IS_ELECTRON ? 'Verification' : 'Step 2 of 2. Verification')}\n              </div>\n\n              <div className={modalStyles.buttons}>\n                <Button onClick={onClose} className={modalStyles.customCancelButton}>\n                  {lang('Cancel')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n\n      case BiometricsState.TurnOnComplete:\n        return (\n          <>\n            <ModalHeader title={lang('Biometrics Enabled')} onClose={onClose} />\n            <div className={modalStyles.transitionContent}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={onClose} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n    }\n  }\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen}\n      dialogClassName={styles.modalDialog}\n      onClose={onClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(TurnOn);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { BiometricsState } from '../../../global/types';\n\nimport BiometricsTurnOff from './TurnOff';\nimport BiometricsTurnOffWarning from './TurnOffWarning';\nimport BiometricsTurnOn from './TurnOn';\n\ninterface StateProps {\n  state: BiometricsState;\n  error?: string;\n  isLoading?: boolean;\n  isInsideModal?: boolean;\n}\n\nfunction Biometrics({\n  state, error, isLoading, isInsideModal,\n}: StateProps) {\n  const { closeBiometricSettings } = getActions();\n\n  const isTurnOnBiometricsOpened = state === BiometricsState.TurnOnPasswordConfirmation\n    || state === BiometricsState.TurnOnRegistration\n    || state === BiometricsState.TurnOnVerification\n    || state === BiometricsState.TurnOnComplete;\n  const isTurnOffBiometricsOpened = state === BiometricsState.TurnOffBiometricConfirmation\n    || state === BiometricsState.TurnOffCreatePassword\n    || state === BiometricsState.TurnOffComplete;\n  const isTurnOffBiometricsWarningOpened = state === BiometricsState.TurnOffWarning;\n\n  return (\n    <>\n      <BiometricsTurnOn\n        isOpen={isTurnOnBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOff\n        isOpen={isTurnOffBiometricsOpened}\n        isLoading={isLoading}\n        isInsideModal={isInsideModal}\n        state={state}\n        error={error}\n        onClose={closeBiometricSettings}\n      />\n      <BiometricsTurnOffWarning isOpen={isTurnOffBiometricsWarningOpened} onClose={closeBiometricSettings} />\n    </>\n  );\n}\n\nexport default memo(withGlobal((global) => {\n  const { biometrics: { state, error } } = global;\n\n  return {\n    state,\n    error,\n    isLoading: global.auth.isLoading,\n  };\n})(Biometrics));\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport { PIN_LENGTH } from '../../../config';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useEffectWithPrevDeps from '../../../hooks/useEffectWithPrevDeps';\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport PinPad from '../../ui/PinPad';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isPinAccepted?: boolean;\n  error?: string;\n  isNativeBiometricsEnabled?: boolean;\n}\n\nfunction NativeBiometricsTurnOn({\n  isActive,\n  isInsideModal,\n  isPinAccepted,\n  error,\n  isNativeBiometricsEnabled,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const { enableNativeBiometrics, clearNativeBiometricsError } = getActions();\n\n  const lang = useLang();\n  const { isSmallHeight } = useDeviceScreen();\n  const [pin, setPin] = useState<string>('');\n  const pinPadType = pin.length !== PIN_LENGTH\n    ? undefined\n    : (isPinAccepted ? 'success' : (error ? 'error' : undefined));\n  const pinTitle = isPinAccepted\n    ? 'Correct'\n    : (error && pin.length === PIN_LENGTH ? error : 'Enter your code');\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  useEffect(() => {\n    if (!isActive) return;\n\n    setPin('');\n  }, [isActive]);\n\n  useEffectWithPrevDeps(([prevIsEnabled]) => {\n    if (isNativeBiometricsEnabled && !prevIsEnabled) {\n      handleBackClick();\n    }\n  }, [isNativeBiometricsEnabled, handleBackClick]);\n\n  const handleSubmit = useLastCallback((password: string) => {\n    enableNativeBiometrics({ password });\n  });\n\n  return (\n    <div className={styles.slide}>\n      <div className={buildClassName(styles.content, styles.contentFullSize)}>\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n\n        <div className={styles.pinPadHeader}>\n          {!isInsideModal && (\n            <AnimatedIconWithPreview\n              play={isActive}\n              tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n              previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n              noLoop={false}\n              nonInteractive\n              className={styles.stickerNativeBiometric}\n            />\n          )}\n\n          {!isSmallHeight && <div className={styles.pinPadTitle}>{lang('Confirm Passcode')}</div>}\n        </div>\n\n        <PinPad\n          isActive={isActive}\n          onClearError={clearNativeBiometricsError}\n          title={lang(pinTitle)}\n          type={pinPadType}\n\n          length={PIN_LENGTH}\n          value={pin}\n          onChange={setPin}\n          onSubmit={handleSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { nativeBiometricsError, isPinAccepted } = global;\n\n  return {\n    isPinAccepted,\n    error: nativeBiometricsError,\n    isNativeBiometricsEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsTurnOn));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\nimport type { AnimationLevel, Theme } from '../../global/types';\n\nimport {\n  ANIMATION_LEVEL_MAX,\n  ANIMATION_LEVEL_MIN,\n  IS_CORE_WALLET,\n  MTW_CARDS_WEBSITE,\n} from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectIsCurrentAccountViewMode,\n} from '../../global/selectors';\nimport { ACCENT_COLORS } from '../../util/accentColor/constants';\nimport buildClassName from '../../util/buildClassName';\nimport getAccentColorsFromNfts from '../../util/getAccentColorsFromNfts';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport switchAnimationLevel from '../../util/switchAnimationLevel';\nimport switchTheme from '../../util/switchTheme';\nimport { IS_ELECTRON, IS_WINDOWS } from '../../util/windowEnvironment';\n\nimport useAppTheme from '../../hooks/useAppTheme';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\nimport darkThemeImg from '../../assets/theme/theme_dark.png';\nimport lightThemeImg from '../../assets/theme/theme_light.png';\nimport systemThemeImg from '../../assets/theme/theme_system.png';\n\ninterface OwnProps {\n  isActive?: boolean;\n  theme: Theme;\n  handleBackClick: () => void;\n  animationLevel: AnimationLevel;\n  isInsideModal?: boolean;\n  isTrayIconEnabled: boolean;\n  onTrayIconEnabledToggle: VoidFunction;\n}\n\ninterface StateProps {\n  isViewMode: boolean;\n  accentColorIndex?: number;\n  nftsByAddress?: Record<string, ApiNft>;\n  nftAddresses?: string[];\n  isMintingCardsAvailable?: boolean;\n  isNftBuyingDisabled: boolean;\n}\n\nconst SWITCH_THEME_DURATION_MS = 300;\nconst THEME_OPTIONS = [{\n  value: 'light',\n  name: 'Light',\n  icon: lightThemeImg,\n}, {\n  value: 'system',\n  name: 'System',\n  icon: systemThemeImg,\n}, {\n  value: 'dark',\n  name: 'Dark',\n  icon: darkThemeImg,\n}];\n\nfunction SettingsAppearance({\n  isActive,\n  theme,\n  animationLevel,\n  accentColorIndex,\n  nftAddresses,\n  nftsByAddress,\n  isInsideModal,\n  isViewMode,\n  isTrayIconEnabled,\n  isMintingCardsAvailable,\n  isNftBuyingDisabled,\n  onTrayIconEnabledToggle,\n  handleBackClick,\n}: OwnProps & StateProps) {\n  const {\n    setTheme,\n    setAnimationLevel,\n    openMintCardModal,\n    installAccentColorFromNft,\n    clearAccentColorFromNft,\n    showNotification,\n  } = getActions();\n\n  const lang = useLang();\n  const [isAvailableAccentLoading, setIsAvailableAccentLoading] = useState(false);\n  const [availableAccentColorIds, setAvailableAccentColorIds] = useState<number[]>(MEMO_EMPTY_ARRAY);\n  const [nftByColorIndexes, setNftsByColorIndex] = useState<Record<number, ApiNft>>({});\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const appTheme = useAppTheme(theme);\n\n  useEffect(() => {\n    if (IS_CORE_WALLET) return;\n\n    void (async () => {\n      setIsAvailableAccentLoading(true);\n      const result = await getAccentColorsFromNfts(nftAddresses, nftsByAddress);\n      if (result) {\n        setAvailableAccentColorIds(result.availableAccentColorIds);\n        setNftsByColorIndex(result.nftsByColorIndex);\n      } else {\n        setAvailableAccentColorIds(MEMO_EMPTY_ARRAY);\n        setNftsByColorIndex({});\n      }\n      setIsAvailableAccentLoading(false);\n    })();\n  }, [nftsByAddress, nftAddresses]);\n\n  const sortedColors = useMemo(() => {\n    return ACCENT_COLORS[appTheme]\n      .map((color, index) => ({ color, index }))\n      .sort((a, b) => {\n        return Number(!availableAccentColorIds.includes(a.index)) - Number(!availableAccentColorIds.includes(b.index));\n      });\n  }, [appTheme, availableAccentColorIds]);\n\n  const handleThemeChange = useLastCallback((newTheme: string) => {\n    document.documentElement.classList.add('no-transitions');\n    setTheme({ theme: newTheme as Theme });\n    switchTheme(newTheme as Theme, isInsideModal);\n    setTimeout(() => {\n      document.documentElement.classList.remove('no-transitions');\n    }, SWITCH_THEME_DURATION_MS);\n  });\n\n  const handleAnimationLevelToggle = useLastCallback(() => {\n    const level = animationLevel === ANIMATION_LEVEL_MIN ? ANIMATION_LEVEL_MAX : ANIMATION_LEVEL_MIN;\n    setAnimationLevel({ level });\n    switchAnimationLevel(level);\n  });\n\n  function handleAccentColorClick(colorIndex?: number) {\n    const isLocked = colorIndex !== undefined ? !availableAccentColorIds.includes(colorIndex) : false;\n\n    if (isLocked) {\n      showNotification({ message: lang('Get a unique MyTonWallet Card to unlock new palettes.') });\n    } else if (colorIndex === undefined) {\n      clearAccentColorFromNft();\n    } else {\n      installAccentColorFromNft({ nft: nftByColorIndexes[colorIndex] });\n    }\n  }\n\n  const handleUnlockNewPalettesClick = useLastCallback(() => {\n    if (!isViewMode && isMintingCardsAvailable) {\n      openMintCardModal();\n    } else {\n      void openUrl(MTW_CARDS_WEBSITE);\n    }\n  });\n\n  function renderThemes() {\n    return THEME_OPTIONS.map(({ name, value, icon }) => {\n      return (\n        <div\n          key={value}\n          className={buildClassName(styles.theme, value === theme && styles.theme_active)}\n          onClick={() => handleThemeChange(value)}\n        >\n          <div className={buildClassName(styles.themeIcon, value === theme && styles.themeIcon_active)}>\n            <img src={icon} alt=\"\" className={styles.themeImg} aria-hidden />\n          </div>\n          <span>{lang(name)}</span>\n        </div>\n      );\n    });\n  }\n\n  function renderColorButton(color?: string, index?: number) {\n    const isSelected = accentColorIndex === index;\n    const isLocked = index !== undefined ? !availableAccentColorIds.includes(index) : false;\n\n    return (\n      <button\n        key={color || 'default'}\n        type=\"button\"\n        disabled={isSelected}\n        style={color ? `--current-accent-color: ${color}` : undefined}\n        className={buildClassName(styles.colorButton, isSelected && styles.colorButtonCurrent)}\n        aria-label={lang('Change Palette')}\n        onClick={() => handleAccentColorClick(index)}\n      >\n        {isAvailableAccentLoading && isLocked && <Spinner color=\"white\" />}\n        {!isAvailableAccentLoading && isLocked && (\n          <i\n            className={buildClassName(styles.iconLock, 'icon-lock', color === '#FFFFFF' && styles.iconLockInverted)}\n            aria-hidden\n          />\n        )}\n      </button>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Appearance')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Appearance')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <p className={styles.blockTitle}>{lang('Theme')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={styles.themeWrapper}>\n            {renderThemes()}\n          </div>\n        </div>\n\n        {!IS_CORE_WALLET && !isNftBuyingDisabled && (\n          <>\n            <p className={styles.blockTitle}>{lang('Palette')}</p>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={styles.colorList}>\n                {renderColorButton()}\n                {sortedColors.map(({ color, index }) => renderColorButton(color, index))}\n              </div>\n              <div\n                className={styles.subBlockAsButton}\n                role=\"button\"\n                tabIndex={0}\n                onClick={() => handleUnlockNewPalettesClick()}\n              >\n                {lang('Unlock New Palettes')}\n              </div>\n            </div>\n            <p className={styles.blockDescription}>{lang('Get a unique MyTonWallet Card to unlock new palettes.')}</p>\n          </>\n        )}\n\n        <p className={styles.blockTitle}>{lang('Other')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAnimationLevelToggle}>\n            {lang('Enable Animations')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Enable Animations')}\n              checked={animationLevel !== ANIMATION_LEVEL_MIN}\n            />\n          </div>\n          {IS_ELECTRON && IS_WINDOWS && (\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={onTrayIconEnabledToggle}>\n              {lang('Display Tray Icon')}\n\n              <Switcher\n                className={styles.menuSwitcher}\n                label={lang('Display Tray Icon')}\n                checked={isTrayIconEnabled}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    orderedAddresses: nftAddresses,\n    byAddress: nftsByAddress,\n  } = selectCurrentAccountState(global)?.nfts || {};\n\n  const { config: { cardsInfo } = {} } = selectCurrentAccountState(global) || {};\n\n  return {\n    isViewMode: selectIsCurrentAccountViewMode(global),\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n    nftAddresses,\n    nftsByAddress,\n    isMintingCardsAvailable: Boolean(cardsInfo),\n    isNftBuyingDisabled: global.restrictions.isNftBuyingDisabled,\n  };\n})(SettingsAppearance));\n","import type { ApiNft } from '../api/types';\n\nimport { MTW_CARDS_COLLECTION } from '../config';\nimport { getAccentColorIndexFromNft } from './accentColor';\nimport { compact, unique } from './iteratees';\nimport { logDebugError } from './logs';\n\nexport default async function getAccentColorsFromNfts(\n  nftAddresses?: string[],\n  nftsByAddress?: Record<string, ApiNft>,\n) {\n  try {\n    const nftCards = (nftAddresses || []).reduce((result, nftAddress) => {\n      const nft = nftsByAddress?.[nftAddress];\n      if (nft?.collectionAddress === MTW_CARDS_COLLECTION) {\n        result.push(nft);\n      }\n      return result;\n    }, [] as ApiNft[]);\n\n    if (!nftCards.length) {\n      return undefined;\n    }\n\n    const colors = await Promise.all(nftCards.map((nft) => getAccentColorIndexFromNft(nft)));\n    const nftsByColorIndex = colors.reduce((result, colorIndex, i) => {\n      if (colorIndex !== undefined) {\n        result[colorIndex] = nftCards[i];\n      }\n      return result;\n    }, {} as Record<number, ApiNft>);\n\n    const availableAccentColorIds = unique(compact(colors));\n\n    return {\n      availableAccentColorIds,\n      nftsByColorIndex,\n    };\n  } catch (err: any) {\n    logDebugError('[getAccentColorsFromNfts]: Error fetching accent colors', err);\n    return undefined;\n  }\n}\n","import React, {\n  memo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { UserToken } from '../../../global/types';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from './DeleteTokenModal.module.scss';\n\ninterface OwnProps {\n  token?: UserToken;\n}\n\nfunction DeleteTokenModal({ token }: OwnProps) {\n  const {\n    deleteToken,\n  } = getActions();\n\n  const [isOpen, setIsOpen] = useState(false);\n  const lang = useLang();\n\n  useSyncEffect(() => {\n    if (token) {\n      setIsOpen(true);\n    }\n  }, [token]);\n\n  const handleClose = useLastCallback(() => {\n    setIsOpen(false);\n  });\n\n  const handleDeleteToken = useLastCallback(() => {\n    handleClose();\n    deleteToken({ slug: token!.slug });\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={handleClose}\n      title={lang('Delete Token')}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>\n        {lang('Are you sure you want to delete?', { token: <strong>{token?.name}</strong> })}\n      </p>\n      <div className={modalStyles.buttons}>\n        <Button onClick={handleClose} className={modalStyles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={handleDeleteToken} className={modalStyles.button}>\n          {lang('Delete')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DeleteTokenModal);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"yflPd0zm\",\"description\":\"KH236kiH\"};","import { BottomSheet } from '@mytonwallet/native-bottom-sheet';\nimport type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  type ElementRef,\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { clamp } from '../../util/math';\nimport { IS_DELEGATED_BOTTOM_SHEET } from '../../util/windowEnvironment';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport styles from './Draggable.module.scss';\n\ntype TPoint = {\n  x: number;\n  y: number;\n};\n\ntype Offset = {\n  top?: number;\n  bottom?: number;\n  left?: number;\n  right?: number;\n};\n\ntype DraggableState = {\n  isDragging: boolean;\n  scrollTop: number;\n  origin: TPoint;\n  translation: TPoint;\n  width?: number;\n  height?: number;\n};\n\ntype OwnProps = {\n  children: TeactNode;\n  onDrag: (translation: TPoint, id: number | string) => void;\n  onDragEnd: NoneToVoidFunction;\n  id: number | string;\n  style?: string;\n  knobStyle?: string;\n  isDisabled?: boolean;\n  offset?: Offset;\n  parentRef?: ElementRef<HTMLDivElement>;\n  scrollRef?: ElementRef<HTMLDivElement>;\n  className?: string;\n  onClick: (e: React.MouseEvent | React.TouchEvent) => void;\n};\n\nconst ZERO_POINT: TPoint = { x: 0, y: 0 };\n\nconst DEFAULT_OFFSET: Offset = {\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n};\n\nconst EDGE_THRESHOLD = 150;\n\nfunction Draggable({\n  children,\n  id,\n  onDrag,\n  onDragEnd,\n  style: externalStyle,\n  knobStyle,\n  isDisabled,\n  offset = DEFAULT_OFFSET,\n  parentRef,\n  scrollRef,\n  className,\n  onClick,\n}: OwnProps) {\n  const lang = useLang();\n  const ref = useRef<HTMLDivElement>();\n  const buttonRef = useRef<HTMLDivElement>();\n  const scrollIntervalId = useRef<number>();\n\n  const [state, setState] = useState<DraggableState>({\n    isDragging: false,\n    scrollTop: 0,\n    origin: ZERO_POINT,\n    translation: ZERO_POINT,\n  });\n\n  const lastMousePosition = useRef<TPoint>({ x: 0, y: 0 });\n\n  const updateDraggablePosition = () => {\n    if (!state.isDragging || !ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  };\n\n  const stopContinuousScroll = () => {\n    if (scrollIntervalId.current !== undefined) {\n      cancelAnimationFrame(scrollIntervalId.current);\n      scrollIntervalId.current = undefined;\n    }\n  };\n\n  const startContinuousScroll = (scrollContainer: HTMLElement, speed: number) => {\n    const animateScroll = () => {\n      scrollContainer.scrollBy(0, speed);\n      updateDraggablePosition();\n      scrollIntervalId.current = requestAnimationFrame(animateScroll);\n    };\n\n    stopContinuousScroll();\n    animateScroll();\n  };\n\n  const setInitialState = (e: React.MouseEvent | TouchEvent) => {\n    const origin = getClientCoordinate(e);\n    const scrollTop = scrollRef?.current?.scrollTop ?? 0;\n\n    setState({\n      ...state,\n      isDragging: true,\n      origin,\n      scrollTop,\n      width: ref.current?.offsetWidth,\n      height: ref.current?.offsetHeight,\n    });\n  };\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setInitialState(e);\n  };\n\n  const handleTouchStart = useLastCallback((e: TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    setInitialState(e);\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.clearScrollPatch();\n    }\n  });\n\n  const handleMouseMove = useLastCallback((e: MouseEvent | TouchEvent) => {\n    if (!ref.current || !parentRef?.current || !scrollRef?.current) return;\n\n    const { x, y } = getClientCoordinate(e);\n    lastMousePosition.current = { x, y };\n\n    const translation = calculateConstrainedTranslation(\n      state,\n      lastMousePosition.current,\n      scrollRef.current.scrollTop,\n      ref.current,\n      parentRef.current,\n      offset,\n    );\n\n    const scrollRect = scrollRef.current.getBoundingClientRect();\n    const distanceFromTop = y - scrollRect.top;\n    const distanceFromBottom = scrollRect.bottom - y;\n\n    if (distanceFromTop < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        -scaledEase((EDGE_THRESHOLD - distanceFromTop) / EDGE_THRESHOLD),\n      );\n    } else if (distanceFromBottom < EDGE_THRESHOLD) {\n      startContinuousScroll(\n        scrollRef.current,\n        scaledEase((EDGE_THRESHOLD - distanceFromBottom) / EDGE_THRESHOLD),\n      );\n    } else {\n      stopContinuousScroll();\n    }\n\n    setState((current) => ({\n      ...current,\n      translation,\n    }));\n\n    onDrag(translation, id);\n  });\n\n  const handleMouseUp = useLastCallback(() => {\n    setState((current) => ({\n      ...current,\n      isDragging: false,\n      width: undefined,\n      height: undefined,\n    }));\n\n    if (IS_DELEGATED_BOTTOM_SHEET) {\n      void BottomSheet.applyScrollPatch();\n    }\n\n    onDragEnd();\n  });\n\n  const handleClick = useLastCallback((e: React.MouseEvent | React.TouchEvent) => {\n    if (state.isDragging) {\n      return;\n    }\n\n    onClick(e);\n  });\n\n  useEffect(() => {\n    const dragButtonRef = buttonRef.current;\n\n    if (dragButtonRef) {\n      dragButtonRef.addEventListener('touchstart', handleTouchStart, { passive: false });\n    }\n\n    if (state.isDragging) {\n      window.addEventListener('touchmove', handleMouseMove);\n      window.addEventListener('mousemove', handleMouseMove);\n      window.addEventListener('touchend', handleMouseUp);\n      window.addEventListener('touchcancel', handleMouseUp);\n      window.addEventListener('mouseup', handleMouseUp);\n    } else {\n      stopContinuousScroll();\n      window.removeEventListener('touchmove', handleMouseMove);\n      window.removeEventListener('mousemove', handleMouseMove);\n      window.removeEventListener('touchend', handleMouseUp);\n      window.removeEventListener('touchcancel', handleMouseUp);\n      window.removeEventListener('mouseup', handleMouseUp);\n\n      setState((current) => ({\n        ...current,\n        translation: ZERO_POINT,\n      }));\n    }\n\n    return () => {\n      if (state.isDragging) {\n        stopContinuousScroll();\n        window.removeEventListener('touchmove', handleMouseMove);\n        window.removeEventListener('mousemove', handleMouseMove);\n        window.removeEventListener('touchend', handleMouseUp);\n        window.removeEventListener('touchcancel', handleMouseUp);\n        window.removeEventListener('mouseup', handleMouseUp);\n\n        if (dragButtonRef) {\n          dragButtonRef.removeEventListener('touchstart', handleTouchStart);\n        }\n      }\n    };\n  }, [handleMouseMove, handleMouseUp, handleTouchStart, state.isDragging, buttonRef, isDisabled]);\n\n  const fullClassName = buildClassName(styles.container, className, state.isDragging && styles.isDragging);\n\n  const cssStyles = useMemo(() => {\n    return buildStyle(\n      state.isDragging && `transform: translate(${state.translation.x}px, ${state.translation.y}px)`,\n      state.width ? `width: ${state.width}px` : undefined,\n      state.height ? `height: ${state.height}px` : undefined,\n      externalStyle,\n    );\n  }, [externalStyle, state.height, state.isDragging, state.translation.x, state.translation.y, state.width]);\n\n  return (\n    <div style={cssStyles} className={fullClassName} ref={ref} onClick={handleClick}>\n      {!isDisabled && (\n        <div\n          ref={buttonRef}\n          aria-label={lang('i18n_dragToSort')}\n          tabIndex={0}\n          role=\"button\"\n          className={buildClassName(styles.knob, 'div-button', 'draggable-knob')}\n          onMouseDown={handleMouseDown}\n          style={knobStyle}\n        >\n          <i className=\"icon icon-sort\" aria-hidden />\n        </div>\n      )}\n      {children}\n    </div>\n  );\n}\n\nexport default memo(Draggable);\n\nfunction getClientCoordinate(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent) {\n  let x;\n  let y;\n\n  if ('touches' in e) {\n    x = e.touches[0].clientX;\n    y = e.touches[0].clientY;\n  } else {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  return { x, y };\n}\n\nfunction scaledEase(n: number) {\n  return 5 * (n ** 3) + 1;\n}\n\nfunction calculateConstrainedTranslation(\n  state: DraggableState,\n  lastMousePosition: TPoint,\n  lastScrollTop: number,\n  draggableElement: HTMLDivElement,\n  parentElement: HTMLDivElement,\n  offset: Offset,\n) {\n  const translation = {\n    x: lastMousePosition.x - state.origin.x,\n    y: lastMousePosition.y - state.origin.y + lastScrollTop - state.scrollTop,\n  };\n\n  const {\n    top = 0, right = 0, bottom = 0, left = 0,\n  } = offset;\n\n  const parentRect = parentElement.getBoundingClientRect();\n  const draggableRect = draggableElement.getBoundingClientRect();\n\n  const minX = -draggableElement.offsetLeft + left;\n  const maxX = parentRect.width - draggableRect.width - draggableElement.offsetLeft + right;\n  const minY = -draggableElement.offsetTop + top;\n  const maxY = parentRect.height - draggableRect.height - draggableElement.offsetTop + bottom;\n\n  return {\n    x: clamp(translation.x, minX, maxX),\n    y: clamp(translation.y, minY, maxY),\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"kWQHzIMD\",\"isDragging\":\"k0c5WDAy\",\"knob\":\"UpzQzcvs\"};","import React, {\n  type ElementRef,\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiBaseCurrency } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { DEFAULT_ENABLED_TOKEN_SLUGS } from '../../config';\nimport { bigintMultiplyToNumber } from '../../util/bigint';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { isBetween } from '../../util/math';\n\nimport useEffectOnce from '../../hooks/useEffectOnce';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenIcon from '../common/TokenIcon';\nimport DeleteTokenModal from '../main/modals/DeleteTokenModal';\nimport AnimatedCounter from '../ui/AnimatedCounter';\nimport Draggable from '../ui/Draggable';\nimport SensitiveData from '../ui/SensitiveData';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface SortState {\n  orderedTokenSlugs?: string[];\n  dragOrderTokenSlugs?: string[];\n  draggedIndex?: number;\n}\n\ninterface OwnProps {\n  parentContainer: ElementRef<HTMLDivElement>;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  isSortByValueEnabled?: boolean;\n  baseCurrency?: ApiBaseCurrency;\n  withChainIcon?: boolean;\n  isSensitiveDataHidden?: true;\n}\n\nconst TOKEN_HEIGHT_PX = 64;\nconst TOP_OFFSET = 48;\n\nfunction SettingsTokens({\n  parentContainer,\n  tokens,\n  orderedSlugs,\n  isSortByValueEnabled,\n  baseCurrency,\n  withChainIcon,\n  isSensitiveDataHidden,\n}: OwnProps) {\n  const {\n    openSettingsWithState,\n    updateOrderedSlugs,\n    rebuildOrderedSlugs,\n    toggleTokenVisibility,\n  } = getActions();\n  const lang = useLang();\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tokensRef = useRef<HTMLDivElement>();\n  const sortableContainerRef = useRef<HTMLDivElement>();\n\n  const [tokenToDelete, setTokenToDelete] = useState<UserToken | undefined>();\n  const [state, setState] = useState<SortState>({\n    orderedTokenSlugs: orderedSlugs,\n    dragOrderTokenSlugs: orderedSlugs,\n    draggedIndex: undefined,\n  });\n\n  useEffectOnce(() => {\n    rebuildOrderedSlugs();\n  });\n\n  useEffect(() => {\n    if (!arraysAreEqual(orderedSlugs, state.orderedTokenSlugs)) {\n      setState({\n        orderedTokenSlugs: orderedSlugs,\n        dragOrderTokenSlugs: orderedSlugs,\n        draggedIndex: undefined,\n      });\n    }\n  }, [orderedSlugs, state.orderedTokenSlugs]);\n\n  const handleOpenAddTokenPage = useLastCallback(() => {\n    openSettingsWithState({ state: SettingsState.SelectTokenList });\n  });\n\n  const handleDrag = useLastCallback((translation: { x: number; y: number }, id: string | number) => {\n    const delta = Math.round(translation.y / TOKEN_HEIGHT_PX);\n    const index = state.orderedTokenSlugs?.indexOf(id as string) ?? 0;\n    const dragOrderTokenSlugs = state.orderedTokenSlugs?.filter((tokenSlug) => tokenSlug !== id);\n\n    if (!dragOrderTokenSlugs || !isBetween(index + delta, 0, orderedSlugs?.length ?? 0)) {\n      return;\n    }\n\n    dragOrderTokenSlugs.splice(index + delta, 0, id as string);\n    setState((current) => ({\n      ...current,\n      draggedIndex: index,\n      dragOrderTokenSlugs,\n    }));\n  });\n\n  const handleDragEnd = useLastCallback(() => {\n    setState((current) => {\n      updateOrderedSlugs({\n        orderedSlugs: current.dragOrderTokenSlugs!,\n      });\n\n      return {\n        ...current,\n        orderedTokenSlugs: current.dragOrderTokenSlugs,\n        draggedIndex: undefined,\n      };\n    });\n  });\n\n  const handleTokenVisibility = useLastCallback((token: UserToken, e: React.MouseEvent | React.TouchEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    toggleTokenVisibility({ slug: token.slug, shouldShow: Boolean(token.isDisabled) });\n  });\n\n  const handleDeleteToken = useLastCallback((token: UserToken, e: React.MouseEvent<HTMLSpanElement>) => {\n    e.stopPropagation();\n    setTokenToDelete(token);\n  });\n\n  function renderToken(token: UserToken, index: number) {\n    const {\n      symbol, name, amount, price, slug, isDisabled,\n    } = token;\n\n    const totalAmount = bigintMultiplyToNumber(amount, price);\n    const isDragged = state.draggedIndex === index;\n\n    const draggedTop = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.orderedTokenSlugs);\n    const top = isSortByValueEnabled ? getOffsetByIndex(index) : getOffsetBySlug(slug, state.dragOrderTokenSlugs);\n\n    const style = `top: ${isDragged ? draggedTop : top}px;`;\n    const knobStyle = 'left: 1rem;';\n\n    const isDeleteButtonVisible = amount === 0n && !DEFAULT_ENABLED_TOKEN_SLUGS.includes(slug);\n\n    const isDragDisabled = isSortByValueEnabled || tokens!.length <= 1;\n\n    return (\n      <Draggable\n        key={slug}\n        id={slug}\n        onDrag={handleDrag}\n        onDragEnd={handleDragEnd}\n        style={style}\n        knobStyle={knobStyle}\n        isDisabled={isDragDisabled}\n        className={buildClassName(styles.item, styles.item_token, !isSortByValueEnabled && styles.draggable)}\n        offset={{ top: TOP_OFFSET }}\n        parentRef={tokensRef}\n        scrollRef={parentContainer}\n\n        onClick={(e) => handleTokenVisibility(token, e)}\n      >\n        <TokenIcon token={token} withChainIcon={withChainIcon} />\n        <div className={styles.tokenInfo}>\n          <div className={styles.tokenTitle}>\n            {name}\n          </div>\n          <div className={styles.tokenDescription}>\n            <SensitiveData\n              isActive={isSensitiveDataHidden}\n              cols={4 + (top % 6)}\n              rows={2}\n              cellSize={8}\n              contentClassName={styles.tokenAmount}\n            >\n              <AnimatedCounter text={formatCurrency(toDecimal(totalAmount, token.decimals, true), shortBaseSymbol)} />\n              <i className={styles.dot} aria-hidden />\n              <AnimatedCounter text={formatCurrency(toDecimal(amount, token.decimals), symbol)} />\n            </SensitiveData>\n            {isDeleteButtonVisible && (\n              <>\n                <i className={styles.dot} aria-hidden />\n                <span className={styles.deleteText} onClick={(e) => handleDeleteToken(token, e)}>\n                  {lang('Delete')}\n                </span>\n              </>\n            )}\n          </div>\n        </div>\n        <Switcher\n          className={styles.menuSwitcher}\n          checked={!isDisabled}\n        />\n      </Draggable>\n    );\n  }\n\n  return (\n    <>\n      <p className={styles.blockTitle}>{lang('My Tokens')}</p>\n      <div className={styles.contentRelative} ref={sortableContainerRef}>\n        <div\n          className={buildClassName(styles.settingsBlock, styles.sortableContainer)}\n          style={`height: ${(tokens?.length ?? 0) * TOKEN_HEIGHT_PX + TOP_OFFSET}px`}\n          ref={tokensRef}\n        >\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenAddTokenPage}>\n            {lang('Add Token')}\n            <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n          </div>\n\n          {tokens?.map(renderToken)}\n        </div>\n      </div>\n\n      <DeleteTokenModal token={tokenToDelete} />\n    </>\n  );\n}\n\nfunction arraysAreEqual<T>(arr1: T[] = [], arr2: T[] = []) {\n  return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);\n}\n\nfunction getOffsetBySlug(slug: string, list: string[] = []) {\n  const realIndex = list.indexOf(slug);\n  const index = realIndex === -1 ? list.length : realIndex;\n  return getOffsetByIndex(index);\n}\n\nfunction getOffsetByIndex(index: number) {\n  return index * TOKEN_HEIGHT_PX + TOP_OFFSET;\n}\n\nexport default memo(SettingsTokens);\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiBaseCurrency, ApiNft } from '../../api/types';\nimport { SettingsState, type UserToken } from '../../global/types';\n\nimport { CURRENCIES, DEFAULT_PRICE_CURRENCY, TINY_TRANSFER_MAX_COST } from '../../config';\nimport {\n  selectCurrentAccountSettings,\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport SettingsTokens from './SettingsTokens';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  onBack: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isInvestorViewEnabled?: boolean;\n  isSortByValueEnabled?: boolean;\n  areTinyTransfersHidden?: boolean;\n  areTokensWithNoCostHidden?: boolean;\n  isSensitiveDataHidden?: true;\n  baseCurrency?: ApiBaseCurrency;\n  isMultichainAccount: boolean;\n  tokens?: UserToken[];\n  orderedSlugs?: string[];\n  nftsByAddress?: Record<string, ApiNft>;\n  blacklistedNftAddresses: string[];\n  whitelistedNftAddresses: string[];\n}\n\nfunction SettingsAssets({\n  isActive,\n  isInsideModal,\n  isInvestorViewEnabled,\n  isSortByValueEnabled,\n  isSensitiveDataHidden,\n  areTinyTransfersHidden,\n  areTokensWithNoCostHidden,\n  baseCurrency,\n  isMultichainAccount,\n  tokens,\n  orderedSlugs,\n  nftsByAddress,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  onBack,\n}: OwnProps & StateProps) {\n  const {\n    toggleTinyTransfersHidden,\n    toggleInvestorView,\n    toggleTokensWithNoCost,\n    toggleSortByValue,\n    changeBaseCurrency,\n    setSettingsState,\n  } = getActions();\n\n  const lang = useLang();\n\n  const scrollContainerRef = useRef<HTMLDivElement>();\n\n  useHistoryBack({ isActive, onBack });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const currencyItems = useMemo<DropdownItem<ApiBaseCurrency>[]>(() => (\n    Object.entries(CURRENCIES)\n      .map(([currency, { name }]) => ({ value: currency as keyof typeof CURRENCIES, name }))\n  ), []);\n\n  const handleTinyTransfersHiddenToggle = useLastCallback(() => {\n    toggleTinyTransfersHidden({ isEnabled: !areTinyTransfersHidden });\n  });\n\n  const handleInvestorViewToggle = useLastCallback(() => {\n    toggleInvestorView({ isEnabled: !isInvestorViewEnabled });\n  });\n\n  const handleOpenHiddenNfts = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.HiddenNfts });\n  });\n\n  const handleTokensWithNoPriceToggle = useLastCallback(() => {\n    toggleTokensWithNoCost({ isEnabled: !areTokensWithNoCostHidden });\n  });\n\n  const handleSortByValueToggle = useLastCallback(() => {\n    toggleSortByValue({ isEnabled: !isSortByValueEnabled });\n  });\n\n  const [localBaseCurrency, setLocalBaseCurrency] = useState(baseCurrency);\n\n  const handleBaseCurrencyChange = useLastCallback((currency: ApiBaseCurrency) => {\n    setLocalBaseCurrency(currency);\n    changeBaseCurrency({ currency });\n  });\n\n  const {\n    shouldRenderHiddenNftsSection,\n    hiddenNftsCount,\n  } = useMemo(() => {\n    const nfts = Object.values(nftsByAddress || {});\n    const blacklistedAddressesSet = new Set(blacklistedNftAddresses);\n    const whitelistedAddressesSet = new Set(whitelistedNftAddresses);\n    const shouldRender = nfts.some((nft) => blacklistedAddressesSet.has(nft.address) || nft.isHidden);\n    const hiddenNfts = nfts.filter(\n      (nft) => !whitelistedAddressesSet.has(nft.address) && (blacklistedAddressesSet.has(nft.address) || nft.isHidden),\n    );\n\n    return {\n      shouldRenderHiddenNftsSection: shouldRender,\n      hiddenNftsCount: hiddenNfts.length,\n    };\n  }, [nftsByAddress, blacklistedNftAddresses, whitelistedNftAddresses]);\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Assets & Activity')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBack}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBack} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Assets & Activity')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n        ref={scrollContainerRef}\n      >\n        <div className={styles.settingsBlock}>\n          <Dropdown\n            label={lang('Base Currency')}\n            items={currencyItems}\n            selectedValue={baseCurrency ?? DEFAULT_PRICE_CURRENCY}\n            theme=\"light\"\n            shouldTranslateOptions\n            className={buildClassName(styles.item, styles.item_small)}\n            onChange={handleBaseCurrencyChange}\n            isLoading={localBaseCurrency !== baseCurrency}\n          />\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleInvestorViewToggle}>\n            <div>\n              {lang('Investor View')}\n              {' '}\n              <IconWithTooltip\n                message={lang('Focus on asset value rather than current balance')}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Investor View')}\n              checked={isInvestorViewEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTinyTransfersHiddenToggle}>\n            <div>\n              {lang('Hide Tiny Transfers')}\n              {' '}\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$tiny_transfers_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.wideTooltip)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tiny Transfers')}\n              checked={areTinyTransfersHidden}\n            />\n          </div>\n        </div>\n        {\n          shouldRenderHiddenNftsSection && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handleOpenHiddenNfts}>\n                {lang('Hidden NFTs')}\n                <div className={styles.itemInfo}>\n                  {hiddenNftsCount}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            </div>\n          )\n        }\n        <p className={styles.blockTitle}>{lang('Token Settings')}</p>\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleSortByValueToggle}>\n            {lang('Sort By Cost')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Sort By Cost')}\n              checked={isSortByValueEnabled}\n            />\n          </div>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleTokensWithNoPriceToggle}>\n            <div>\n              {lang('Hide Tokens With No Cost')}\n              {' '}\n              <IconWithTooltip\n                message={\n                  lang(\n                    '$hide_tokens_no_cost_help',\n                    { value: TINY_TRANSFER_MAX_COST },\n                  ) as string\n                }\n                tooltipClassName={buildClassName(styles.wideTooltip)}\n                iconClassName={styles.iconQuestion}\n              />\n            </div>\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Hide Tokens With No Cost')}\n              checked={areTokensWithNoCostHidden}\n            />\n          </div>\n        </div>\n\n        <SettingsTokens\n          isSensitiveDataHidden={isSensitiveDataHidden}\n          parentContainer={scrollContainerRef}\n          tokens={tokens}\n          orderedSlugs={orderedSlugs}\n          isSortByValueEnabled={isSortByValueEnabled}\n          baseCurrency={baseCurrency}\n          withChainIcon={isMultichainAccount}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isSensitiveDataHidden,\n  } = global.settings;\n\n  const {\n    orderedSlugs,\n  } = selectCurrentAccountSettings(global) ?? {};\n\n  const {\n    blacklistedNftAddresses = MEMO_EMPTY_ARRAY,\n    whitelistedNftAddresses = MEMO_EMPTY_ARRAY,\n    nfts: {\n      byAddress: nftsByAddress,\n    } = {},\n  } = selectCurrentAccountState(global) || {};\n\n  return {\n    isInvestorViewEnabled,\n    isSortByValueEnabled,\n    areTinyTransfersHidden,\n    areTokensWithNoCostHidden,\n    baseCurrency,\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n    tokens: selectCurrentAccountTokens(global),\n    orderedSlugs,\n    nftsByAddress,\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    isSensitiveDataHidden,\n  };\n})(SettingsAssets));\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ofWxr4DU\",\"description\":\"XlFYElV7\",\"buttons\":\"gixyiSx7\",\"button\":\"Uez1mztb\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiDapp } from '../../../api/types';\n\nimport { getDappConnectionUniqueId } from '../../../util/getDappConnectionUniqueId';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\n\nimport styles from './DisconnectDappModal.module.scss';\n\ninterface OwnProps {\n  isOpen?: boolean;\n  dapp?: ApiDapp;\n  onClose: NoneToVoidFunction;\n}\n\nfunction DisconnectDappModal({ isOpen, dapp, onClose }: OwnProps) {\n  const {\n    deleteAllDapps,\n    deleteDapp,\n  } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteAllDapps = useLastCallback(() => {\n    void deleteAllDapps();\n    onClose();\n  });\n\n  const handleDeleteDapp = useLastCallback(() => {\n    void deleteDapp({ url: dapp!.url, uniqueId: getDappConnectionUniqueId(dapp!) });\n    onClose();\n  });\n\n  const title = dapp ? lang('Disconnect Dapp') : lang('Disconnect Dapps');\n  const description = dapp\n    ? lang('Are you sure you want to disconnect?', { dappname: <strong>{dapp.name}</strong> })\n    : lang('Are you sure you want to disconnect all websites?');\n  const onDisconnect = dapp ? handleDeleteDapp : handleDeleteAllDapps;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      isCompact\n      onClose={onClose}\n      title={title}\n      contentClassName={styles.content}\n    >\n      <p className={styles.description}>{description}</p>\n      <div className={styles.buttons}>\n        <Button onClick={onClose} className={styles.button}>{lang('Cancel')}</Button>\n        <Button isDestructive onClick={onDisconnect} className={styles.button}>\n          {lang('Disconnect')}\n        </Button>\n      </div>\n    </Modal>\n  );\n}\n\nexport default memo(DisconnectDappModal);\n","import React, { memo, useState } from '../../lib/teact/teact';\n\nimport type { ApiDapp } from '../../api/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX, APP_NAME } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { getDappConnectionUniqueId } from '../../util/getDappConnectionUniqueId';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport DappInfo from '../dapps/DappInfo';\nimport DisconnectDappModal from '../main/modals/DisconnectDappModal';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  dapps: ApiDapp[];\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDapps({\n  isActive,\n  dapps,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isDisconnectModalOpen, openDisconnectModal, closeDisconnectModal] = useFlag();\n  const [dappToDelete, setDappToDelete] = useState<ApiDapp | undefined>();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleDisconnectDapp = useLastCallback((url: string) => {\n    const dapp = dapps.find((d) => d.url === url);\n    setDappToDelete(dapp);\n    openDisconnectModal();\n  });\n\n  const handleDisconnectAll = useLastCallback(() => {\n    setDappToDelete(undefined);\n    openDisconnectModal();\n  });\n\n  function renderDapps() {\n    return (\n      <div className={styles.dapps}>\n        <div className={styles.disconnectAllBlock}>\n          <Button\n            className={styles.disconnectButton}\n            isSimple\n            onClick={handleDisconnectAll}\n          >\n            {lang('Disconnect All Dapps')}\n          </Button>\n          <p className={styles.blockDescription}>{lang('$dapps-description', { app_name: APP_NAME })}</p>\n        </div>\n\n        <p className={styles.blockTitle}>{lang('Logged in with %app_name%', { app_name: APP_NAME })}</p>\n\n        <div className={styles.block}>\n          {dapps.map((dapp) => (\n            <DappInfo\n              key={`dapp-${dapp.url}-${getDappConnectionUniqueId(dapp)}`}\n              dapp={dapp}\n              className={styles.dapp}\n              onDisconnect={handleDisconnectDapp}\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  function renderEmptyDappsMessage(isPlaying: boolean) {\n    return (\n      <div className={styles.emptyList}>\n        <AnimatedIconWithPreview\n          play={isPlaying}\n          tgsUrl={ANIMATED_STICKERS_PATHS.noData}\n          previewUrl={ANIMATED_STICKERS_PATHS.noDataPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n          noLoop={false}\n          nonInteractive\n        />\n        <p className={styles.emptyListTitle}>{lang('No active connections')}</p>\n      </div>\n    );\n  }\n\n  const content = dapps.length === 0\n    ? renderEmptyDappsMessage(isActive)\n    : renderDapps();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Dapps')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Dapps')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <Transition activeKey={dapps.length === 0 ? 0 : 1} name=\"fade\">\n          {content}\n        </Transition>\n      </div>\n      <DisconnectDappModal isOpen={isDisconnectModalOpen} onClose={closeDisconnectModal} dapp={dappToDelete} />\n    </div>\n  );\n}\n\nexport default memo(SettingsDapps);\n","import type { Platforms } from '@twa-dev/types';\n\nimport {\n  IS_AIR_APP,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  IS_FIREFOX_EXTENSION,\n  IS_OPERA_EXTENSION,\n  IS_PACKAGED_ELECTRON,\n  IS_TELEGRAM_APP,\n} from '../config';\nimport { getTelegramApp } from './telegram';\nimport { IS_ANDROID, IS_ELECTRON, IS_IOS } from './windowEnvironment';\n\nexport type BuildPlatform = Platforms\n  | 'web'\n  | 'extension'\n  | 'firefox-extension'\n  | 'opera-extension'\n  | 'electron'\n  | 'android'\n  | 'android-air'\n  | 'android-air-direct'\n  | 'android-direct'\n  | 'ios'\n  | 'ios-air'\n  | 'telegram-unknown';\n\nexport function getBuildPlatform(): BuildPlatform {\n  if (IS_FIREFOX_EXTENSION) return 'firefox-extension';\n  if (IS_OPERA_EXTENSION) return 'opera-extension';\n  if (IS_EXTENSION) return 'extension';\n\n  if (IS_CAPACITOR) {\n    if (IS_AIR_APP) {\n      if (IS_IOS) return 'ios-air';\n      if (IS_ANDROID_DIRECT) return 'android-air-direct';\n      if (IS_ANDROID) return 'android-air';\n    }\n    if (IS_ANDROID_DIRECT) return 'android-direct';\n    if (IS_ANDROID) return 'android';\n    if (IS_IOS) return 'ios';\n  }\n\n  if (IS_TELEGRAM_APP) {\n    return getTelegramApp()?.platform || 'telegram-unknown';\n  }\n\n  if (IS_ELECTRON) return 'electron';\n\n  return 'web';\n}\n\nexport function getFlagsValue() {\n  return {\n    IS_ANDROID_DIRECT,\n    IS_CAPACITOR,\n    IS_TELEGRAM_APP,\n    IS_EXTENSION,\n    IS_FIREFOX_EXTENSION,\n    IS_PACKAGED_ELECTRON,\n    IS_AIR_APP,\n    IS_ELECTRON,\n    IS_OPERA_EXTENSION,\n  };\n}\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiNetwork } from '../../api/types';\nimport type { Account } from '../../global/types';\nimport type { DropdownItem } from '../ui/Dropdown';\n\nimport { APP_COMMIT_HASH, APP_ENV, APP_VERSION, IS_CORE_WALLET, IS_EXTENSION, IS_TELEGRAM_APP } from '../../config';\nimport { selectIsMultichainAccount } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport { getBuildPlatform, getFlagsValue } from '../../util/getBuildPlatform';\nimport { getPlatform } from '../../util/getPlatform';\nimport { getLogs } from '../../util/logs';\nimport { getLogsFromNative } from '../../util/multitab';\nimport { shareFile } from '../../util/share';\nimport { IS_IOS } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\n\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport Dropdown from '../ui/Dropdown';\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isOpen: boolean;\n  isTestnet?: boolean;\n  isCopyStorageEnabled?: boolean;\n  onShowAllWalletVersions: () => void;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  currentAccountId?: string;\n  accountsById?: Record<string, Account>;\n  canViewAllWalletVersions: boolean;\n}\n\nconst NETWORK_OPTIONS: DropdownItem<ApiNetwork>[] = [{\n  value: 'mainnet',\n  name: 'Mainnet',\n}, {\n  value: 'testnet',\n  name: 'Testnet',\n}];\n\n// iOS allows downloading files even in TMA, however, in other platforms,\n// downloading files from `blob:https://` schemes is limited by Telegram itself.\n// Also, file downloading is limited in extensions.\nconst CAN_DOWNLOAD_LOGS = IS_IOS || !(IS_EXTENSION || IS_TELEGRAM_APP);\n\nfunction SettingsDeveloperOptions({\n  isOpen,\n  isTestnet,\n  isCopyStorageEnabled,\n  onShowAllWalletVersions,\n  onClose,\n  currentAccountId,\n  accountsById,\n  canViewAllWalletVersions,\n}: OwnProps & StateProps) {\n  const {\n    startChangingNetwork,\n    closeSettings,\n    openAddAccountModal,\n    copyStorageData,\n    showNotification,\n  } = getActions();\n  const lang = useLang();\n  const currentNetwork = NETWORK_OPTIONS[isTestnet ? 1 : 0].value;\n\n  const handleNetworkChange = useLastCallback((newNetwork: ApiNetwork) => {\n    startChangingNetwork({ network: newNetwork });\n    onClose();\n  });\n\n  const handleAddTonOnlyWallet = useLastCallback(() => {\n    onClose();\n    closeSettings();\n    openAddAccountModal({ forceAddingTonOnlyAccount: true });\n  });\n\n  const handleDownloadLogs = useLastCallback(async () => {\n    const logsString = await getLogsString({ currentAccountId, accountsById });\n\n    if (!CAN_DOWNLOAD_LOGS) {\n      await copyTextToClipboard(logsString);\n      showNotification({ message: lang('Logs were copied!'), icon: 'icon-copy' });\n      onClose();\n    } else {\n      const filename = `${IS_CORE_WALLET ? 'tonwallet' : 'mytonwallet'}_logs_${new Date().toISOString()}.json`;\n      await shareFile(filename, logsString, 'application/json');\n    }\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      noBackdropClose\n      isCompact\n      title={lang('Developer Options')}\n    >\n      <div className={styles.settingsBlock}>\n        <Dropdown\n          label={lang('Network')}\n          items={NETWORK_OPTIONS}\n          selectedValue={currentNetwork}\n          theme=\"light\"\n          arrow=\"chevron\"\n          className={buildClassName(styles.item, styles.item_small)}\n          onChange={handleNetworkChange}\n        />\n\n        <div className={buildClassName(styles.item, styles.item_small)} onClick={handleAddTonOnlyWallet}>\n          {lang('Create TON-Only Wallet')}\n\n          <i className={buildClassName(styles.iconChevronRight, 'icon-plus')} aria-hidden />\n        </div>\n\n        <div\n          className={buildClassName(styles.item, styles.item_small, !canViewAllWalletVersions && styles.item_disabled)}\n          onClick={onShowAllWalletVersions}\n        >\n          {lang('All Wallet Versions')}\n\n          <div className={styles.itemInfo}>\n            {canViewAllWalletVersions ? (\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n\n            ) : (\n              <>\n                <span className={styles.small}>{lang('Multichain')}</span>\n                <i className={buildClassName(styles.iconChevronRight, 'icon-lock')} aria-hidden />\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {isCopyStorageEnabled && (\n        <>\n          <p className={styles.blockTitle}>{lang('Dangerous')}</p>\n          <div className={styles.settingsBlock}>\n            <div className={buildClassName(styles.item, styles.item_small)} onClick={() => copyStorageData()}>\n              {lang('Copy Storage Data')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n            </div>\n          </div>\n        </>\n      )}\n\n      <div className={buildClassName(styles.settingsBlock)}>\n        <div className={buildClassName(styles.item, styles.item_small)} onClick={handleDownloadLogs}>\n          {\n            !CAN_DOWNLOAD_LOGS\n              ? (\n                <>\n                  {lang('Copy Logs')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-copy')} aria-hidden />\n                </>\n              ) : lang('Download Logs')\n          }\n        </div>\n      </div>\n\n      <Button\n        className={styles.developerCloseButton}\n        onClick={onClose}\n      >\n        {lang('Close')}\n      </Button>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const currentAccountId = global.currentAccountId;\n  const accountsById = global.accounts?.byId;\n  const canViewAllWalletVersions = !selectIsMultichainAccount(global, currentAccountId!);\n\n  return {\n    currentAccountId,\n    accountsById,\n    canViewAllWalletVersions,\n  };\n})(SettingsDeveloperOptions));\n\nasync function getLogsString({\n  currentAccountId,\n  accountsById,\n}: Partial<StateProps>) {\n  const accountsInfo = accountsById && Object.keys(accountsById).reduce((acc, accountId) => {\n    const { addressByChain, type } = accountsById[accountId];\n    acc[accountId] = {\n      type,\n      addressByChain,\n    };\n    return acc;\n  }, {} as any);\n\n  const [mainLogs, bottomSheetLogs, apiLogs = []] = await Promise.all([\n    getLogs(),\n    getLogsFromNative(),\n    callApi('getLogs'),\n  ]);\n\n  const time = new Date();\n  const timezoneOffset = -time.getTimezoneOffset();\n\n  return JSON.stringify(\n    {\n      time,\n      timezone: `UTC${timezoneOffset < 0 ? '-' : '+'}${Math.abs(timezoneOffset) / 60}`,\n      environment: APP_ENV,\n      version: APP_VERSION,\n      commit: APP_COMMIT_HASH,\n      platform: getPlatform(),\n      navigatorPlatform: navigator.platform,\n      userAgent: navigator.userAgent,\n      build: getBuildPlatform(),\n      flags: getFlagsValue(),\n      currentAccountId,\n      accountsInfo,\n      logs: [\n        ...mainLogs.map((log) => ({ ...log, context: 'main' })),\n        ...bottomSheetLogs.map((log) => ({ ...log, context: 'bottomSheet' })),\n        ...apiLogs.map((log) => ({ ...log, context: 'api' })),\n      ]\n        .sort((a, b) => a.time - b.time)\n        .map((log) => ({ ...log, time: new Date(log.time).toISOString() })),\n    },\n    undefined,\n    2,\n  );\n}\n","import React, { memo } from '../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX, APP_NAME } from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport buildClassName from '../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsDisclaimer({ isActive, handleBackClick, isInsideModal }: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title=\"\"\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n        </div>\n      )}\n      <div\n        className={buildClassName(\n          styles.content,\n          isInsideModal && 'custom-scroll',\n          !isInsideModal && styles.content_noScroll,\n        )}\n        onScroll={isInsideModal ? handleContentScroll : undefined}\n      >\n        <div className={styles.stickerAndTitle}>\n          <AnimatedIconWithPreview\n            play={isActive}\n            tgsUrl={ANIMATED_STICKERS_PATHS.snitch}\n            previewUrl={ANIMATED_STICKERS_PATHS.snitchPreview}\n            noLoop={false}\n            nonInteractive\n            size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n          />\n          <div className={styles.sideTitle}>{lang('Use Responsibly')}</div>\n        </div>\n        <div className={buildClassName(styles.blockAbout, !isInsideModal && 'custom-scroll')}>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description1', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description2'))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description3', { app_name: APP_NAME }))}</p>\n          <p className={styles.text}>{renderText(lang('$auth_responsibly_description4'))}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsDisclaimer);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useShowTransition from '../../../hooks/useShowTransition';\n\nimport Button from '../../ui/Button';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n}\n\nfunction HiddenByUserNft({ nft }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus } = getActions();\n  const lang = useLang();\n\n  const [isNftHidden, , unmarkNftHidden] = useFlag(true);\n\n  const handleUnhide = useLastCallback(() => {\n    removeNftSpecialStatus({ address: nft.address });\n  });\n\n  const { ref } = useShowTransition({\n    isOpen: isNftHidden,\n    onCloseAnimationEnd: handleUnhide,\n  });\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function handleNftClick() {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'user',\n    });\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name || lang('Untitled')}</span>\n        {\n          nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>\n        }\n      </div>\n\n      <Button\n        isSmall\n        isPrimary\n        isText\n        className={styles.nftButtonUnhide}\n        onClick={unmarkNftHidden}\n        shouldStopPropagation\n      >\n        {lang('Unhide')}\n      </Button>\n    </div>\n  );\n}\n\nexport default memo(HiddenByUserNft);\n","import { memo } from '../../../lib/teact/teact';\nimport React from '../../../lib/teact/teactn';\nimport { getActions } from '../../../global';\n\nimport { type ApiNft } from '../../../api/types';\nimport { MediaType } from '../../../global/types';\n\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../../hooks/useDeviceScreen';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport Switcher from '../../ui/Switcher';\n\nimport styles from '../Settings.module.scss';\n\ninterface OwnProps {\n  nft: ApiNft;\n  isWhitelisted?: boolean;\n}\n\nfunction ProbablyScamNft({ nft, isWhitelisted }: OwnProps) {\n  const { openMediaViewer, removeNftSpecialStatus, openUnhideNftModal } = getActions();\n  const lang = useLang();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  const handleNftClick = useLastCallback(() => {\n    openMediaViewer({\n      mediaId: nft.address, mediaType: MediaType.Nft, noGhostAnimation: areSettingsInModal, hiddenNfts: 'scam',\n    });\n  });\n\n  const handleSwitcherClick = useLastCallback((e: React.ChangeEvent) => {\n    e.stopPropagation();\n    if (isWhitelisted) {\n      removeNftSpecialStatus({ address: nft.address });\n    } else {\n      openUnhideNftModal({ address: nft.address, name: nft.name! });\n    }\n  });\n\n  return (\n    <div\n      className={styles.item}\n      onClick={handleNftClick}\n      key={nft.address}\n      role=\"button\"\n      tabIndex={0}\n      data-nft-address={!areSettingsInModal && nft.address}\n    >\n      <img className={styles.nftImage} src={nft.image} alt={nft.name} />\n      <div className={styles.nftPrimaryCell}>\n        <span className={styles.nftName}>{nft.name}</span>\n        {nft.collectionName && <span className={styles.nftCollection}>{nft.collectionName}</span>}\n      </div>\n\n      <Switcher\n        className={styles.menuSwitcher}\n        label={lang('Show')}\n        checked={isWhitelisted}\n        onChange={handleSwitcherClick}\n        shouldStopPropagation\n      />\n    </div>\n  );\n}\n\nexport default memo(ProbablyScamNft);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport { selectCurrentAccountState } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport HiddenByUserNft from './nfts/HiddenByUserNft';\nimport ProbablyScamNft from './nfts/ProbablyScamNft';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  blacklistedNftAddresses?: string[];\n  whitelistedNftAddresses?: string[];\n  orderedAddresses?: string[];\n  byAddress?: Record<string, ApiNft>;\n}\n\nfunction SettingsHiddenNfts({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  blacklistedNftAddresses,\n  whitelistedNftAddresses,\n  orderedAddresses,\n  byAddress,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const nfts = useMemo(() => {\n    if (!orderedAddresses || !byAddress) {\n      return undefined;\n    }\n\n    return orderedAddresses\n      .map((address) => byAddress[address])\n      .filter(Boolean);\n  }, [\n    byAddress, orderedAddresses,\n  ]);\n\n  const hiddenByUserNfts = useMemo(() => {\n    const blacklistedNftAddressesSet = new Set(blacklistedNftAddresses);\n    return nfts?.filter((nft) => blacklistedNftAddressesSet.has(nft.address));\n  }, [nfts, blacklistedNftAddresses]);\n\n  const probablyScamNfts = useMemo(() => {\n    return nfts?.filter((nft) => nft.isHidden);\n  }, [nfts]);\n\n  const whitelistedNftAddressesSet = useMemo(() => {\n    return new Set(whitelistedNftAddresses);\n  }, [whitelistedNftAddresses]);\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait || IS_ELECTRON || IS_DELEGATING_BOTTOM_SHEET || IS_DELEGATED_BOTTOM_SHEET;\n\n  function renderHiddenByUserNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Hidden By Me')}</p>\n        <div className={buildClassName(styles.block, !areSettingsInModal && 'hidden-nfts-user')}>\n          {hiddenByUserNfts!.map((nft) => <HiddenByUserNft key={nft.address} nft={nft} />)}\n        </div>\n      </>\n    );\n  }\n\n  function renderProbablyScamNfts() {\n    return (\n      <>\n        <p className={styles.blockTitle}>{lang('Probably Scam')}</p>\n        <div className={\n          buildClassName(styles.block, styles.settingsBlockWithDescription, !areSettingsInModal && 'hidden-nfts-scam')\n        }\n        >\n          {\n            probablyScamNfts!.map(\n              (nft) => (\n                <ProbablyScamNft\n                  key={nft.address}\n                  nft={nft}\n                  isWhitelisted={whitelistedNftAddressesSet.has(nft.address)}\n                />\n              ),\n            )\n          }\n        </div>\n        <p className={styles.blockDescription}>\n          {lang('$settings_nft_probably_scam_description')}\n        </p>\n      </>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Hidden NFTs')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Hidden NFTs')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {Boolean(hiddenByUserNfts?.length) && renderHiddenByUserNfts()}\n        {Boolean(probablyScamNfts?.length) && renderProbablyScamNfts()}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n  } = selectCurrentAccountState(global) ?? {};\n  const {\n    orderedAddresses,\n    byAddress,\n  } = selectCurrentAccountState(global)?.nfts ?? {};\n  return {\n    blacklistedNftAddresses,\n    whitelistedNftAddresses,\n    orderedAddresses,\n    byAddress,\n  };\n})(SettingsHiddenNfts));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { LangCode } from '../../global/types';\n\nimport { LANG_LIST } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { setLanguage } from '../../util/langProvider';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nimport checkmarkImg from '../../assets/settings/settings_checkmark.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  langCode: LangCode;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\nfunction SettingsLanguage({\n  isActive,\n  langCode,\n  handleBackClick,\n  isInsideModal,\n}: OwnProps) {\n  const {\n    changeLanguage,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const handleLanguageChange = useLastCallback((newLangCode: LangCode) => {\n    void setLanguage(newLangCode, () => {\n      changeLanguage({ langCode: newLangCode });\n    });\n  });\n\n  function renderLanguages() {\n    return LANG_LIST.map(({ name, nativeName, langCode: lc }) => (\n      <div\n        key={lc}\n        className={buildClassName(styles.item, styles.item_lang)}\n        onClick={() => handleLanguageChange(lc)}\n      >\n        <div className={styles.languageInfo}>\n          <span className={styles.languageMain}>{name}</span>\n          <span className={styles.languageNative}>{nativeName}</span>\n        </div>\n\n        {langCode === lc && <img src={checkmarkImg} alt={name} />}\n      </div>\n    ));\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Language')}\n          onBackButtonClick={handleBackClick}\n          className={buildClassName(styles.modalHeader, styles.languageHeader)}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Language')}</span>\n        </div>\n      )}\n      <div className={buildClassName(styles.content, 'custom-scroll')}>\n        <div className={styles.block}>\n          {renderLanguages()}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsLanguage);\n","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { Account, AccountSettings, AccountType, GlobalState } from '../../global/types';\n\nimport { MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT } from '../../config';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport { getMainAccountAddress } from '../../util/account';\nimport buildClassName from '../../util/buildClassName';\nimport { isKeyCountGreater } from '../../util/isEmptyObject';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AccountButton from '../common/AccountButton';\nimport AccountButtonWrapper from '../common/AccountButtonWrapper';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n}\n\ninterface StateProps {\n  accounts?: Record<string, Account>;\n  canPlaySounds?: boolean;\n  settingsByAccountId?: Record<string, AccountSettings>;\n  pushNotifications: GlobalState['pushNotifications'];\n}\n\nfunction SettingsPushNotifications({\n  isActive,\n  handleBackClick,\n  accounts,\n  canPlaySounds,\n  pushNotifications: {\n    enabledAccounts,\n    isAvailable: arePushNotificationsAvailable,\n  },\n  isInsideModal,\n  settingsByAccountId,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const { toggleNotifications, toggleNotificationAccount, toggleCanPlaySounds } = getActions();\n  const iterableAccounts = useMemo(() => Object.entries(accounts || {}), [accounts]);\n  const arePushNotificationsEnabled = Boolean(Object.keys(enabledAccounts).length);\n  const headerTitle = arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds');\n\n  const handlePushNotificationsToggle = useLastCallback(() => {\n    toggleNotifications({ isEnabled: !arePushNotificationsEnabled });\n  });\n\n  const handleCanPlaySoundToggle = useLastCallback(() => {\n    toggleCanPlaySounds({ isEnabled: !canPlaySounds });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  function renderAccount(\n    accountId: string,\n    addressByChain: Account['addressByChain'],\n    accountType: AccountType,\n    title?: string,\n  ) {\n    const onClick = !addressByChain.ton ? undefined : () => {\n      toggleNotificationAccount({ accountId });\n    };\n\n    const { cardBackgroundNft } = settingsByAccountId?.[accountId] || {};\n    const address = getMainAccountAddress(addressByChain) ?? '';\n\n    const isDisabled = enabledAccounts\n      && !enabledAccounts[accountId]\n      && isKeyCountGreater(enabledAccounts, MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT - 1);\n\n    return (\n      <AccountButton\n        className={buildClassName(\n          styles.account,\n          isDisabled ? styles.accountDisabled : undefined,\n        )}\n        key={accountId}\n        accountId={accountId}\n        address={address}\n        title={title}\n        ariaLabel={lang('Switch Account')}\n        accountType={accountType}\n        withCheckbox\n        isLoading={isDisabled}\n        isActive={Boolean(enabledAccounts && enabledAccounts[accountId])}\n\n        onClick={onClick}\n        cardBackgroundNft={cardBackgroundNft}\n      />\n    );\n  }\n\n  function renderAccounts() {\n    return (\n      <AccountButtonWrapper\n        accountLength={iterableAccounts.length}\n        className={styles.settingsBlock}\n      >\n        {iterableAccounts.map(\n          ([accountId, { title, addressByChain, type }]) => {\n            return renderAccount(accountId, addressByChain, type, title);\n          },\n        )}\n      </AccountButtonWrapper>\n    );\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={headerTitle}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{headerTitle}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {arePushNotificationsAvailable && (\n          <>\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item, styles.item_small)} onClick={handlePushNotificationsToggle}>\n                {lang('Push Notifications')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Push Notifications')}\n                  checked={arePushNotificationsEnabled}\n                />\n              </div>\n            </div>\n            <p className={styles.blockTitle}>{\n              lang(\n                'Select up to %count% wallets for notifications',\n                { count: MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT },\n              )\n            }\n            </p>\n            {renderAccounts()}\n          </>\n        )}\n        <div className={styles.settingsBlock}>\n          <div className={buildClassName(styles.item, styles.item_small)} onClick={handleCanPlaySoundToggle}>\n            {lang('Play Sounds')}\n\n            <Switcher\n              className={styles.menuSwitcher}\n              label={lang('Play Sounds')}\n              checked={canPlaySounds}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const accounts = selectNetworkAccounts(global);\n  return {\n    accounts,\n    canPlaySounds: global.settings.canPlaySounds,\n    pushNotifications: global.pushNotifications,\n    settingsByAccountId: global.settings.byAccountId,\n  };\n})(SettingsPushNotifications));\n","export var AndroidSettings;\r\n(function (AndroidSettings) {\r\n    /**\r\n     * Show settings for accessibility modules\r\n     */\r\n    AndroidSettings[\"Accessibility\"] = \"accessibility\";\r\n    /**\r\n     * Show add account screen for creating a new account\r\n     */\r\n    AndroidSettings[\"Account\"] = \"account\";\r\n    /**\r\n     * Show settings to allow entering/exiting airplane mode\r\n     */\r\n    AndroidSettings[\"AirplaneMode\"] = \"airplane_mode\";\r\n    /**\r\n     * Show settings to allow configuration of APNs\r\n     */\r\n    AndroidSettings[\"Apn\"] = \"apn\";\r\n    /**\r\n     * Show screen of details about a particular application\r\n     */\r\n    AndroidSettings[\"ApplicationDetails\"] = \"application_details\";\r\n    /**\r\n     * Show settings to allow configuration of application development-related settings\r\n     */\r\n    AndroidSettings[\"ApplicationDevelopment\"] = \"application_development\";\r\n    /**\r\n     * Show settings to allow configuration of application-related settings\r\n     */\r\n    AndroidSettings[\"Application\"] = \"application\";\r\n    /**\r\n     * Show settings to allow configuration of application-specific notifications\r\n     */\r\n    AndroidSettings[\"AppNotification\"] = \"app_notification\";\r\n    /**\r\n     * Show screen for controlling which apps can ignore battery optimizations\r\n     */\r\n    AndroidSettings[\"BatteryOptimization\"] = \"battery_optimization\";\r\n    /**\r\n     * Show settings to allow configuration of Bluetooth\r\n     */\r\n    AndroidSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Show settings for video captioning\r\n     */\r\n    AndroidSettings[\"Captioning\"] = \"captioning\";\r\n    /**\r\n     * Show settings to allow configuration of cast endpoints\r\n     */\r\n    AndroidSettings[\"Cast\"] = \"cast\";\r\n    /**\r\n     * Show settings for selection of 2G/3G/4G\r\n     */\r\n    AndroidSettings[\"DataRoaming\"] = \"data_roaming\";\r\n    /**\r\n     * Show settings to allow configuration of date and time\r\n     */\r\n    AndroidSettings[\"Date\"] = \"date\";\r\n    /**\r\n     * Show settings to allow configuration of display\r\n     */\r\n    AndroidSettings[\"Display\"] = \"display\";\r\n    /**\r\n     * Show Daydream settings\r\n     */\r\n    AndroidSettings[\"Dream\"] = \"dream\";\r\n    /**\r\n     * Show Home selection settings\r\n     */\r\n    AndroidSettings[\"Home\"] = \"home\";\r\n    /**\r\n     *    Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * Show settings to enable/disable input method subtypes\r\n     */\r\n    AndroidSettings[\"KeyboardSubType\"] = \"keyboard_subtype\";\r\n    /**\r\n     * Show settings to allow configuration of locale\r\n     */\r\n    AndroidSettings[\"Locale\"] = \"locale\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    AndroidSettings[\"Location\"] = \"location\";\r\n    /**\r\n     *    Show settings to manage installed applications\r\n     */\r\n    AndroidSettings[\"ManageApplications\"] = \"manage_applications\";\r\n    /**\r\n     * Show settings to manage all applications\r\n     */\r\n    AndroidSettings[\"ManageAllApplications\"] = \"manage_all_applications\";\r\n    /**\r\n     * Show settings for memory card storage\r\n     */\r\n    AndroidSettings[\"MemoryCard\"] = \"memory_card\";\r\n    /**\r\n     * Show settings for selecting the network operator\r\n     */\r\n    AndroidSettings[\"Network\"] = \"network\";\r\n    /**\r\n     * Show NFC Sharing settings\r\n     */\r\n    AndroidSettings[\"NfcSharing\"] = \"nfcsharing\";\r\n    /**\r\n     * Show NFC Tap & Pay settings\r\n     */\r\n    AndroidSettings[\"NfcPayment\"] = \"nfc_payment\";\r\n    /**\r\n     * Show NFC settings\r\n     */\r\n    AndroidSettings[\"NfcSettings\"] = \"nfc_settings\";\r\n    /**\r\n     * Show the top level print settings\r\n     */\r\n    AndroidSettings[\"Print\"] = \"print\";\r\n    /**\r\n     * Show settings to allow configuration of privacy options\r\n     */\r\n    AndroidSettings[\"Privacy\"] = \"privacy\";\r\n    /**\r\n     * Show settings to allow configuration of quick launch shortcuts\r\n     */\r\n    AndroidSettings[\"QuickLaunch\"] = \"quick_launch\";\r\n    /**\r\n     * Show settings for global search\r\n     */\r\n    AndroidSettings[\"Search\"] = \"search\";\r\n    /**\r\n     * Show settings to allow configuration of security and location privacy\r\n     */\r\n    AndroidSettings[\"Security\"] = \"security\";\r\n    /**\r\n     * Show system settings\r\n     */\r\n    AndroidSettings[\"Settings\"] = \"settings\";\r\n    /**\r\n     * Show the regulatory information screen for the device\r\n     */\r\n    AndroidSettings[\"ShowRegulatoryInfo\"] = \"show_regulatory_info\";\r\n    /**\r\n     * Show settings to a llow configuration of sound and volume\r\n     */\r\n    AndroidSettings[\"Sound\"] = \"sound\";\r\n    /**\r\n     * Show settings for internal storage\r\n     */\r\n    AndroidSettings[\"Storage\"] = \"storage\";\r\n    /**\r\n     * Show settings to allow configuration of sync settings\r\n     */\r\n    AndroidSettings[\"Sync\"] = \"sync\";\r\n    /**\r\n     * Show settings to control access to usage information\r\n     */\r\n    AndroidSettings[\"Usage\"] = \"usage\";\r\n    /**\r\n     * Show settings to manage the user input dictionary\r\n     */\r\n    AndroidSettings[\"UserDictionary\"] = \"user_dictionary\";\r\n    /**\r\n     * Show settings to configure input methods, in particular allowing the user to enable input methods\r\n     */\r\n    AndroidSettings[\"VoiceInput\"] = \"voice_input\";\r\n    /**\r\n     * Show settings to allow configuration of Wi-Fi\r\n     */\r\n    AndroidSettings[\"Wifi\"] = \"wifi\";\r\n    /**\r\n     * Show settings to allow configuration of a static IP address for Wi-Fi\r\n     */\r\n    AndroidSettings[\"WifiIp\"] = \"wifi_ip\";\r\n    /**\r\n     * Show settings to allow configuration of wireless controls such as Wi-Fi, Bluetooth and Mobile networks\r\n     */\r\n    AndroidSettings[\"Wireless\"] = \"wireless\";\r\n    /**\r\n     * Zen mode settings.\r\n     */\r\n    AndroidSettings[\"ZenMode\"] = \"zen_mode\";\r\n    /**\r\n     * Zen mode priority settings.\r\n     * Note that this may not work on every single device.\r\n     * See: https://github.com/RaphaelWoude/capacitor-native-settings/pull/63\r\n     */\r\n    AndroidSettings[\"ZenModePriority\"] = \"zen_mode_priority\";\r\n    /**\r\n     * Zen mode blocked effects settings.\r\n     * Note that this may not work on every single device.\r\n     * See: https://github.com/RaphaelWoude/capacitor-native-settings/pull/63\r\n     */\r\n    AndroidSettings[\"ZenModeBlockedEffects\"] = \"zen_mode_blocked_effects\";\r\n})(AndroidSettings || (AndroidSettings = {}));\r\nexport var IOSSettings;\r\n(function (IOSSettings) {\r\n    /**\r\n     * Settings > About page\r\n     */\r\n    IOSSettings[\"About\"] = \"about\";\r\n    /**\r\n     * Opens your app-specific settings screen. Note that this is the only officially supported settings screen by Apple.\r\n     */\r\n    IOSSettings[\"App\"] = \"app\";\r\n    /**\r\n     * Opens app-specific notification settings screen for iOS 15.4+; opens general app-specific settings for earlier versions.\"\r\n     */\r\n    IOSSettings[\"AppNotification\"] = \"appNotification\";\r\n    /**\r\n     * Used to set if and when the screen should be automatically locked.\r\n     */\r\n    IOSSettings[\"AutoLock\"] = \"autoLock\";\r\n    /**\r\n     * Bluetooth settings. Allows the users to enable/disable bluetooth and to search for devices.\r\n     */\r\n    IOSSettings[\"Bluetooth\"] = \"bluetooth\";\r\n    /**\r\n     * Date and time settings.\r\n     */\r\n    IOSSettings[\"DateTime\"] = \"dateTime\";\r\n    /**\r\n     * FaceTime settings.\r\n     */\r\n    IOSSettings[\"FaceTime\"] = \"facetime\";\r\n    /**\r\n     * Opens iOS general settings screen.\r\n     */\r\n    IOSSettings[\"General\"] = \"general\";\r\n    /**\r\n     * Keyboard settings.\r\n     */\r\n    IOSSettings[\"Keyboard\"] = \"keyboard\";\r\n    /**\r\n     * iCloud settings.\r\n     */\r\n    IOSSettings[\"ICloud\"] = \"iCloud\";\r\n    /**\r\n     * iCloud Storage and Backup settings.\r\n     */\r\n    IOSSettings[\"ICloudStorageBackup\"] = \"iCloudStorageBackup\";\r\n    /**\r\n     * Language and region settings.\r\n     */\r\n    IOSSettings[\"International\"] = \"international\";\r\n    /**\r\n     * Show settings to allow configuration of current location sources\r\n     */\r\n    IOSSettings[\"LocationServices\"] = \"locationServices\";\r\n    /**\r\n     * Music settings.\r\n     */\r\n    IOSSettings[\"Music\"] = \"music\";\r\n    /**\r\n     * Notes settings.\r\n     */\r\n    IOSSettings[\"Notes\"] = \"notes\";\r\n    /**\r\n     * Notifications settings.\r\n     */\r\n    IOSSettings[\"Notifications\"] = \"notifications\";\r\n    /**\r\n     * Phone settings.\r\n     */\r\n    IOSSettings[\"Phone\"] = \"phone\";\r\n    /**\r\n     * Photos settings.\r\n     */\r\n    IOSSettings[\"Photos\"] = \"photos\";\r\n    /**\r\n     * Allows the user to manage configuration profiles that are installed on the phone.\r\n     */\r\n    IOSSettings[\"ManagedConfigurationList\"] = \"managedConfigurationList\";\r\n    /**\r\n     * Screen where the user can reset the phone to factory settings.\r\n     */\r\n    IOSSettings[\"Reset\"] = \"reset\";\r\n    /**\r\n     * Ringtone settings.\r\n     */\r\n    IOSSettings[\"Ringtone\"] = \"ringtone\";\r\n    /**\r\n     * Used to set phone volume, vibration settings, etc.\r\n     */\r\n    IOSSettings[\"Sounds\"] = \"sounds\";\r\n    /**\r\n     * Software update screen.\r\n     */\r\n    IOSSettings[\"SoftwareUpdate\"] = \"softwareUpdate\";\r\n    /**\r\n     * Store settings.\r\n     */\r\n    IOSSettings[\"Store\"] = \"store\";\r\n    /**\r\n     * Tracking settings.\r\n     */\r\n    IOSSettings[\"Tracking\"] = \"tracking\";\r\n    /**\r\n     * Wallpaper settings.\r\n     */\r\n    IOSSettings[\"Wallpaper\"] = \"wallpaper\";\r\n    /**\r\n     * WiFi settings.\r\n     */\r\n    IOSSettings[\"WiFi\"] = \"wifi\";\r\n    /**\r\n     * Tethering settings (used to create a hotspot with mobile data).\r\n     */\r\n    IOSSettings[\"Tethering\"] = \"tethering\";\r\n    /**\r\n     * Do Not Disturb settings.\r\n     */\r\n    IOSSettings[\"DoNotDisturb\"] = \"doNotDisturb\";\r\n    /**\r\n     * Touch id passcode settings.\r\n     */\r\n    IOSSettings[\"TouchIdPasscode\"] = \"touchIdPasscode\";\r\n    /**\r\n     * Screen Time settings.\r\n     */\r\n    IOSSettings[\"ScreenTime\"] = \"screenTime\";\r\n    /**\r\n     * Accessibility settings.\r\n     */\r\n    IOSSettings[\"Accessibility\"] = \"accessibility\";\r\n})(IOSSettings || (IOSSettings = {}));\r\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\r\nconst NativeSettings = registerPlugin('NativeSettings', {\r\n    web: () => import('./web').then((m) => new m.NativeSettingsWeb()),\r\n});\r\nexport * from './definitions';\r\nexport { NativeSettings };\r\n//# sourceMappingURL=index.js.map","import React, { memo } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport styles from '../Settings.module.scss';\n\nimport privateKeyImg from '../../../assets/settings/settings_private-key.svg';\nimport secretWordsImg from '../../../assets/settings/settings_secret-words.svg';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  isMultichainAccount: boolean;\n  hasMnemonicWallet?: boolean;\n  onBackClick: () => void;\n  onOpenSecretWordsSafetyRules: () => void;\n  onOpenPrivateKeySafetyRules: () => void;\n  openSettingsSlide: () => void;\n}\n\nfunction Backup({\n  isActive,\n  isInsideModal,\n  isMultichainAccount,\n  hasMnemonicWallet,\n  onBackClick,\n  onOpenSecretWordsSafetyRules,\n  onOpenPrivateKeySafetyRules,\n  openSettingsSlide,\n}: OwnProps) {\n  const lang = useLang();\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          onBackButtonClick={openSettingsSlide}\n          className={styles.modalHeader}\n          withNotch={isScrolled}\n          title={lang('$back_up_security')}\n        />\n      ) : (\n        <div className={styles.header}>\n          <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('$back_up_security')}</span>\n        </div>\n      )}\n\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        {hasMnemonicWallet && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenSecretWordsSafetyRules}>\n                <img className={styles.menuIcon} src={secretWordsImg} alt={lang('View Secret Words')} />\n                {lang('View Secret Words')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            {isMultichainAccount && (\n              <p className={styles.blockDescription}>\n                {lang('Can be imported to any multichain wallet supporting TON.')}\n              </p>\n            )}\n          </>\n        )}\n\n        {(isMultichainAccount || !hasMnemonicWallet) && (\n          <>\n            <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n              <div className={buildClassName(styles.item)} onClick={onOpenPrivateKeySafetyRules}>\n                <img className={styles.menuIcon} src={privateKeyImg} alt={lang('View TON Private Key')} />\n                {lang('View TON Private Key')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n            <p className={styles.blockDescription}>\n              {lang('Can be imported to non-multichain wallets for TON.')}\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default memo(Backup);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport { ANIMATED_STICKER_MIDDLE_SIZE_PX } from '../../../config';\nimport renderText from '../../../global/helpers/renderText';\nimport buildClassName from '../../../util/buildClassName';\nimport { ANIMATED_STICKERS_PATHS } from '../../ui/helpers/animatedAssets';\n\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../../ui/AnimatedIconWithPreview';\nimport Button from '../../ui/Button';\nimport InteractiveTextField from '../../ui/InteractiveTextField';\n\nimport styles from './BackUpContent.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  privateKey?: string;\n  onSubmit: () => void;\n  buttonText: string;\n}\n\nfunction SecretWordsContent({\n  isActive,\n  privateKey,\n  onSubmit,\n  buttonText,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <AnimatedIconWithPreview\n        tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n        previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n        size={ANIMATED_STICKER_MIDDLE_SIZE_PX}\n        play={isActive}\n        nonInteractive\n        noLoop={false}\n        className={styles.modalSticker}\n      />\n      <p className={buildClassName(styles.info, styles.small)}>\n        {renderText(lang('$private_key_description'))}\n      </p>\n      <p className={styles.warning}>\n        {renderText(lang('$mnemonic_warning'))}\n      </p>\n      <InteractiveTextField\n        noExplorer\n        text={privateKey}\n        copyNotification={lang('Your private key was copied!')}\n      />\n\n      <div className={styles.buttonWrapper}>\n        <Button\n          isPrimary\n          className={styles.footerButton}\n          onClick={onSubmit}\n        >\n          {buttonText}\n        </Button>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SecretWordsContent);\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"gDO3tqgH\",\"buttonWrapper\":\"SCRKWYe1\",\"footerButton\":\"_xKVE3tH\",\"modalSticker\":\"vnMzCftS\"};","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport PrivateKeyContent from '../../common/backup/PrivateKeyContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isBackupSlideActive?: boolean;\n  isInsideModal?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupPrivateKey({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [privateKey, setPrivateKey] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    async function loadPrivateKey() {\n      if (isBackupSlideActive && enteredPassword) {\n        const privateKeyResult = await callApi('fetchPrivateKey', currentAccountId, enteredPassword);\n\n        setPrivateKey(privateKeyResult);\n      } else {\n        setPrivateKey(undefined);\n      }\n    }\n    void loadPrivateKey();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Private Key')}\n          withNotch={isScrolled}\n          onBackButtonClick={onBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={onBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Private Key')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <PrivateKeyContent\n          isActive={isActive}\n          privateKey={privateKey}\n          buttonText={lang('Close')}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupPrivateKey);\n","import React, { memo, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SafetyRulesContent from '../../common/backup/SafetyRulesContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n  isInsideModal?: boolean;\n  backupType: 'key' | 'words';\n}\n\nfunction BackupSafetyRules({\n  isActive,\n  onBackClick,\n  isInsideModal,\n  onSubmit,\n  backupType,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [writedownAccepted, setWritedownAccepted] = useState(false);\n  const [openWalletAccepted, setOpenWalletAccepted] = useState(false);\n  const [canBeStolenAccepted, setCanBeStolenAccepted] = useState(false);\n\n  const handleBackClick = useLastCallback(() => {\n    setWritedownAccepted(false);\n    setOpenWalletAccepted(false);\n    setCanBeStolenAccepted(false);\n    onBackClick();\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Safety Rules')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={settingsStyles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={settingsStyles.headerBack}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('Safety Rules')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SafetyRulesContent\n          isActive={isActive}\n          isFullSizeButton\n          textFirst={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_one'\n              : '$safety_rules_one',\n          )}\n          textSecond={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_two'\n              : '$safety_rules_two',\n          )}\n          textThird={lang(\n            backupType === 'key'\n              ? '$safety_rules_private_key_three'\n              : '$safety_rules_three',\n          )}\n          isFirstCheckboxSelected={writedownAccepted}\n          onFirstCheckboxClick={setWritedownAccepted}\n          isSecondCheckboxSelected={openWalletAccepted}\n          onSecondCheckboxClick={setOpenWalletAccepted}\n          isThirdCheckboxSelected={canBeStolenAccepted}\n          onThirdCheckboxClick={setCanBeStolenAccepted}\n          onSubmit={onSubmit}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSafetyRules);\n","import React, { memo, useEffect, useState } from '../../../lib/teact/teact';\n\nimport buildClassName from '../../../util/buildClassName';\nimport { callApi } from '../../../api';\n\nimport useHistoryBack from '../../../hooks/useHistoryBack';\nimport useLang from '../../../hooks/useLang';\nimport useScrolledState from '../../../hooks/useScrolledState';\n\nimport SecretWordsContent from '../../common/backup/SecretWordsContent';\nimport Button from '../../ui/Button';\nimport ModalHeader from '../../ui/ModalHeader';\n\nimport settingsStyles from '../Settings.module.scss';\nimport styles from './Backup.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  currentAccountId: string;\n  enteredPassword?: string;\n  isInsideModal?: boolean;\n  isBackupSlideActive?: boolean;\n  onBackClick: () => void;\n  onSubmit: () => void;\n}\n\nfunction BackupSecretWords({\n  isActive,\n  currentAccountId,\n  enteredPassword,\n  isBackupSlideActive,\n  isInsideModal,\n  onBackClick,\n  onSubmit,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [mnemonic, setMnemonic] = useState<string[] | undefined>(undefined);\n  const wordsCount = mnemonic?.length || 0;\n\n  useEffect(() => {\n    async function loadMnemonic() {\n      if (isBackupSlideActive && enteredPassword) {\n        const mnemonicResult = await callApi('fetchMnemonic', currentAccountId, enteredPassword);\n\n        setMnemonic(mnemonicResult);\n      } else {\n        setMnemonic(undefined);\n      }\n    }\n    void loadMnemonic();\n  }, [currentAccountId, enteredPassword, isBackupSlideActive]);\n\n  useHistoryBack({\n    isActive,\n    onBack: onBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  return (\n    <div className={settingsStyles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('%1$d Secret Words', wordsCount) as string}\n          withNotch={isScrolled}\n          className={settingsStyles.modalHeader}\n          onBackButtonClick={onBackClick}\n        />\n      ) : (\n        <div className={buildClassName(settingsStyles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText className={settingsStyles.headerBack} onClick={onBackClick}>\n            <i className={buildClassName(settingsStyles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={settingsStyles.headerTitle}>{lang('%1$d Secret Words', wordsCount) as string}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(settingsStyles.content, styles.content)}\n        onScroll={handleContentScroll}\n      >\n        <SecretWordsContent\n          isActive={isActive}\n          mnemonic={mnemonic}\n          onSubmit={onSubmit}\n          buttonText={lang('Close')}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default memo(BackupSecretWords);\n","import { Dialog } from '@capacitor/dialog';\nimport React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport renderText from '../../../global/helpers/renderText';\nimport { selectIsNativeBiometricAuthEnabled } from '../../../global/selectors';\nimport {\n  getIsFaceIdAvailable,\n  getIsNativeBiometricAuthSupported,\n  getIsTouchIdAvailable,\n} from '../../../util/biometrics';\nimport buildClassName from '../../../util/buildClassName';\nimport { getIsTelegramBiometricsRestricted, getTelegramApp } from '../../../util/telegram';\nimport { IS_DELEGATED_BOTTOM_SHEET, IS_IOS } from '../../../util/windowEnvironment';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useSyncEffect from '../../../hooks/useSyncEffect';\n\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Switcher from '../../ui/Switcher';\n\nimport modalStyles from '../../ui/Modal.module.scss';\nimport styles from '../Settings.module.scss';\n\nimport biometricsImg from '../../../assets/settings/settings_biometrics.svg';\nimport faceIdImg from '../../../assets/settings/settings_face-id.svg';\n\ninterface OwnProps {\n  onEnable: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n}\n\nfunction NativeBiometricsToggle({ isBiometricAuthEnabled, onEnable }: OwnProps & StateProps) {\n  const { disableNativeBiometrics } = getActions();\n  const isFaceId = getIsFaceIdAvailable() || (!getIsNativeBiometricAuthSupported() && IS_IOS);\n  const isTouchId = getIsTouchIdAvailable();\n\n  const lang = useLang();\n  const [isWarningModalOpen, openWarningModal, closeWarningModal] = useFlag();\n  const switcherTitle = isFaceId ? 'Face ID' : (isTouchId ? 'Touch ID' : lang('Biometric Authentication'));\n  const warningTitle = isFaceId\n    ? 'Turn Off Face ID'\n    : (isTouchId ? 'Turn Off Touch ID' : 'Turn Off Biometrics');\n  const warningDescription = isFaceId\n    ? 'Are you sure you want to disable Face ID?'\n    : (isTouchId ? 'Are you sure you want to disable Touch ID?' : 'Are you sure you want to disable biometrics?');\n\n  const icon = isFaceId ? faceIdImg : biometricsImg;\n\n  const handleConfirmDisableBiometrics = useLastCallback(() => {\n    closeWarningModal();\n    disableNativeBiometrics();\n  });\n\n  useSyncEffect(() => {\n    if (!IS_DELEGATED_BOTTOM_SHEET) return;\n\n    if (isWarningModalOpen) {\n      void Dialog.confirm({\n        title: lang(warningTitle),\n        message: lang(warningDescription),\n        okButtonTitle: lang('Yes'),\n        cancelButtonTitle: lang('Cancel'),\n      })\n        .then(({ value }) => {\n          if (value) {\n            handleConfirmDisableBiometrics();\n          }\n        })\n        .finally(closeWarningModal);\n    }\n  }, [handleConfirmDisableBiometrics, isWarningModalOpen, lang, warningDescription, warningTitle]);\n\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (getIsTelegramBiometricsRestricted()) {\n      getTelegramApp()?.BiometricManager.openSettings();\n      return;\n    }\n\n    if (isBiometricAuthEnabled) {\n      openWarningModal();\n    } else {\n      onEnable();\n    }\n  });\n\n  function renderDisableNativeBiometricsWarning() {\n    if (IS_DELEGATED_BOTTOM_SHEET) return undefined;\n\n    return (\n      <Modal\n        isCompact\n        isOpen={isWarningModalOpen}\n        title={lang(warningTitle)}\n        onClose={closeWarningModal}\n        dialogClassName={styles.stakingSafeDialog}\n      >\n        <p className={modalStyles.text}>\n          {renderText(lang(warningDescription))}\n        </p>\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={closeWarningModal}>{lang('Cancel')}</Button>\n          <Button onClick={handleConfirmDisableBiometrics}>{lang('Yes')}</Button>\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <>\n      <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n        <div className={styles.item} onClick={handleBiometricAuthToggle}>\n          <img className={styles.menuIcon} src={icon} alt=\"\" />\n          {switcherTitle}\n\n          <Switcher\n            className={styles.menuSwitcher}\n            label={switcherTitle}\n            checked={isBiometricAuthEnabled}\n          />\n        </div>\n        {renderDisableNativeBiometricsWarning()}\n      </div>\n      <p className={styles.blockDescription}>{\n        lang('To avoid entering the passcode every time, you can use biometrics.')\n      }\n      </p>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    isBiometricAuthEnabled: selectIsNativeBiometricAuthEnabled(global),\n  };\n})(NativeBiometricsToggle));\n","import { Dialog } from '@capacitor/dialog';\nimport { AndroidSettings, IOSSettings, NativeSettings } from 'capacitor-native-settings';\nimport React, {\n  memo, useEffect, useLayoutEffect, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { AutolockValueType } from '../../global/types';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_BIG_SIZE_PX,\n  ANIMATED_STICKER_HUGE_SIZE_PX,\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  APP_NAME,\n  AUTO_CONFIRM_DURATION_MINUTES,\n  AUTOLOCK_OPTIONS_LIST,\n  DEFAULT_AUTOLOCK_OPTION,\n  IS_CAPACITOR,\n  PIN_LENGTH,\n} from '../../config';\nimport {\n  selectIsBiometricAuthEnabled,\n  selectIsMnemonicAccount,\n  selectIsMultichainAccount,\n  selectIsNativeBiometricAuthEnabled,\n  selectIsPasswordPresent,\n} from '../../global/selectors';\nimport { getHasInMemoryPassword, getInMemoryPassword } from '../../util/authApi/inMemoryPasswordStore';\nimport { getDoesUsePinPad, getIsNativeBiometricAuthSupported } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { vibrateOnSuccess } from '../../util/haptics';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { pause } from '../../util/schedulers';\nimport { getIsTelegramBiometricsRestricted } from '../../util/telegram';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED, IS_ELECTRON, IS_IOS, IS_IOS_APP,\n} from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport usePrevious from '../../hooks/usePrevious';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Collapsible from '../ui/Collapsible';\nimport CreatePasswordForm from '../ui/CreatePasswordForm';\nimport Dropdown, { type DropdownItem } from '../ui/Dropdown';\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\nimport PinPad from '../ui/PinPad';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Backup from './backup/Backup';\nimport BackupPrivateKey from './backup/BackupPrivateKey';\nimport BackupSafetyRules from './backup/BackupSafetyRules';\nimport BackupSecretWords from './backup/BackupSecretWords';\nimport NativeBiometricsToggle from './biometrics/NativeBiometricsToggle';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport biometricsImg from '../../assets/settings/settings_biometrics.svg';\nimport backupImg from '../../assets/settings/settings_install-app.svg';\n\nexport const enum SLIDES {\n  password,\n  settings,\n  newPassword,\n  createNewPin,\n  confirmNewPin,\n  passwordChanged,\n  backup,\n  safetyRules,\n  privateKey,\n  secretWords,\n}\n\nconst SWITCH_CONFIRM_PASSCODE_PAUSE_MS = 500;\nconst CHANGE_PASSWORD_PAUSE_MS = 1500;\n\ninterface OwnProps {\n  isActive: boolean;\n  handleBackClick: NoneToVoidFunction;\n  isInsideModal?: boolean;\n  isAutoUpdateEnabled: boolean;\n  onAutoUpdateEnabledToggle: VoidFunction;\n  onSettingsClose: VoidFunction;\n}\n\ninterface StateProps {\n  isBiometricAuthEnabled: boolean;\n  isNativeBiometricAuthEnabled: boolean;\n  isPasswordNumeric?: boolean;\n  isPasswordPresent: boolean;\n  isMultichainAccount: boolean;\n  isAppLockEnabled?: boolean;\n  autolockValue?: AutolockValueType;\n  isAutoConfirmEnabled?: boolean;\n  shouldShowBackup: boolean;\n  isLoading?: boolean;\n  currentAccountId: string;\n}\n\nconst INITIAL_CHANGE_PASSWORD_SLIDE = getDoesUsePinPad() ? SLIDES.createNewPin : SLIDES.newPassword;\n\nfunction SettingsSecurity({\n  isActive,\n  handleBackClick: navigateBackToSettings,\n  isInsideModal,\n  isBiometricAuthEnabled,\n  isNativeBiometricAuthEnabled,\n  isPasswordNumeric,\n  isPasswordPresent,\n  isMultichainAccount,\n  isAppLockEnabled,\n  autolockValue = DEFAULT_AUTOLOCK_OPTION,\n  isAutoConfirmEnabled,\n  isAutoUpdateEnabled,\n  currentAccountId,\n  onSettingsClose,\n  onAutoUpdateEnabledToggle,\n  isLoading,\n  shouldShowBackup,\n}: OwnProps & StateProps) {\n  const {\n    setIsPinAccepted,\n    clearIsPinAccepted,\n    disableNativeBiometrics,\n    enableNativeBiometrics,\n    openBiometricsTurnOffWarning,\n    openBiometricsTurnOn,\n    setSettingsState,\n    setAppLockValue,\n    setIsAutoConfirmEnabled,\n    setIsAuthLoading,\n    setInMemoryPassword,\n  } = getActions();\n\n  const lang = useLang();\n  const {\n    isScrolled,\n    handleScroll: handleContentScroll,\n  } = useScrolledState();\n\n  const [currentSlide, setCurrentSlide] = useState<SLIDES>(SLIDES.password);\n  const previousSlide = usePrevious(currentSlide);\n  const [nextKey, setNextKey] = useState<SLIDES | undefined>(SLIDES.settings);\n  const [passwordError, setPasswordError] = useState<string>();\n  const [password, setPassword] = useState<string>();\n  const [backupType, setBackupType] = useState<'key' | 'words' | undefined>(undefined);\n  const [hasMnemonicWallet, setHasMnemonicWallet] = useState<boolean>(false);\n\n  // For Capacitor only\n  const [pinValue, setPinValue] = useState<string>('');\n  const [confirmPinValue, setConfirmPinValue] = useState<string>('');\n\n  const clearPasswordError = useLastCallback(() => {\n    setPasswordError(undefined);\n  });\n\n  const cleanup = useLastCallback((shouldKeepCurrentPassword?: boolean) => {\n    if (!shouldKeepCurrentPassword) setPassword(undefined);\n    setPinValue('');\n    setConfirmPinValue('');\n    clearPasswordError();\n    clearIsPinAccepted();\n  });\n\n  const handleBackToSettingsClick = useLastCallback(() => {\n    navigateBackToSettings();\n    cleanup();\n  });\n\n  const openConfirmNewPinSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.confirmNewPin);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openSettingsSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.settings);\n    setNextKey(undefined);\n    cleanup(true);\n  });\n\n  const openBackupPage = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      openSettingsSlide();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    setNextKey(SLIDES.safetyRules);\n  });\n\n  const openNewPasswordSlide = useLastCallback(() => {\n    setCurrentSlide(INITIAL_CHANGE_PASSWORD_SLIDE);\n    setNextKey(SLIDES.settings);\n  });\n\n  const openPasswordChangedSlide = useLastCallback(() => {\n    setCurrentSlide(SLIDES.passwordChanged);\n    setNextKey(SLIDES.settings);\n  });\n\n  useLayoutEffect(() => {\n    if (password === undefined && isActive) setCurrentSlide(SLIDES.password);\n    else if (!isActive) cleanup();\n  }, [password, isActive]);\n\n  useHistoryBack({ isActive, onBack: handleBackToSettingsClick });\n\n  const handlePasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    const result = await callApi('verifyPassword', enteredPassword);\n\n    if (!result) {\n      setPasswordError('Wrong password, please try again.');\n      return;\n    }\n\n    if (getDoesUsePinPad()) {\n      setIsPinAccepted();\n      await vibrateOnSuccess(true);\n    }\n\n    openSettingsSlide();\n    setPassword(enteredPassword);\n  });\n\n  const handleNewPasswordSubmit = useLastCallback(async (enteredPassword: string) => {\n    await callApi('changePassword', password!, enteredPassword);\n    setIsAuthLoading({ isLoading: true });\n    setPassword(enteredPassword);\n    setInMemoryPassword({ password: enteredPassword });\n    if (isNativeBiometricAuthEnabled) {\n      disableNativeBiometrics();\n      enableNativeBiometrics({ password: enteredPassword });\n    }\n    if (getDoesUsePinPad()) {\n      openSettingsSlide();\n    } else {\n      openPasswordChangedSlide();\n    }\n    setIsAuthLoading({ isLoading: undefined });\n  });\n\n  const handlePinSubmit = useLastCallback(async (enteredPassword: string) => {\n    setPinValue(enteredPassword);\n    await vibrateOnSuccess(true);\n    await pause(SWITCH_CONFIRM_PASSCODE_PAUSE_MS);\n    openConfirmNewPinSlide();\n  });\n\n  const handleConfirmPinSubmit = useLastCallback(async (enteredPassword: string) => {\n    if (enteredPassword === pinValue) {\n      setPasswordError(lang('New code set successfully'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      await handleNewPasswordSubmit(enteredPassword);\n    } else {\n      setPasswordError(lang('Codes dont match'));\n      await pause(CHANGE_PASSWORD_PAUSE_MS);\n      cleanup(true);\n      setCurrentSlide(SLIDES.createNewPin);\n    }\n  });\n\n  const handleChangePasswordClick = useLastCallback(() => {\n    setNextKey(INITIAL_CHANGE_PASSWORD_SLIDE);\n    openNewPasswordSlide();\n  });\n\n  const handleOpenPrivateKeySafetyRules = useLastCallback(() => {\n    setBackupType('key');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.privateKey);\n  });\n\n  const handleOpenSecretWordsSafetyRules = useLastCallback(() => {\n    setBackupType('words');\n    setCurrentSlide(SLIDES.safetyRules);\n    setNextKey(SLIDES.secretWords);\n  });\n\n  const handleOpenBackupWallet = useLastCallback(() => {\n    if (!isMultichainAccount) {\n      if (hasMnemonicWallet) handleOpenSecretWordsSafetyRules();\n      else handleOpenPrivateKeySafetyRules();\n      return;\n    }\n\n    setCurrentSlide(SLIDES.backup);\n    // Resetting next key to undefined unmounts and destroys components with mnemonic and private key\n    setNextKey(undefined);\n  });\n\n  const handleOpenPrivateKey = useLastCallback(() => {\n    setCurrentSlide(SLIDES.privateKey);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleOpenSecretWords = useLastCallback(() => {\n    setCurrentSlide(SLIDES.secretWords);\n    setNextKey(SLIDES.backup);\n  });\n\n  const handleAppLockToggle = useLastCallback(() => {\n    setAppLockValue({ value: autolockValue, isEnabled: !isAppLockEnabled });\n  });\n\n  const handleAutolockChange = useLastCallback((value: AutolockValueType) => {\n    setAppLockValue({ value, isEnabled: true });\n  });\n\n  const handleAutoConfirmToggle = useLastCallback(() => {\n    setIsAutoConfirmEnabled({ isEnabled: !isAutoConfirmEnabled });\n  });\n\n  // Biometrics\n  const handleBiometricAuthToggle = useLastCallback(() => {\n    if (isBiometricAuthEnabled) {\n      openBiometricsTurnOffWarning();\n    } else {\n      openBiometricsTurnOn();\n    }\n  });\n  const handleNativeBiometricsTurnOnOpen = useLastCallback(async () => {\n    if (getIsNativeBiometricAuthSupported()) {\n      setSettingsState({ state: SettingsState.NativeBiometricsTurnOn });\n      return;\n    }\n\n    const warningDescription = IS_IOS\n      ? 'To use this feature, first enable Face ID in your phone settings.'\n      : 'To use this feature, first enable biometrics in your phone settings.';\n\n    const { value } = await Dialog.confirm({\n      title: lang('Warning!'),\n      message: lang(warningDescription),\n      okButtonTitle: lang('Open Settings'),\n      cancelButtonTitle: lang('Cancel'),\n    });\n    if (value) {\n      await NativeSettings.open({\n        optionAndroid: AndroidSettings.ApplicationDetails,\n        optionIOS: IOSSettings.App,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (!password) return;\n\n    void callApi('fetchMnemonic', currentAccountId, password).then((mnemonic) => {\n      setHasMnemonicWallet(Boolean(mnemonic && !isMnemonicPrivateKey(mnemonic)));\n    });\n  }, [hasMnemonicWallet, currentAccountId, password]);\n\n  // The `getIsTelegramBiometricsRestricted` case is required to display a toggle switch.\n  // When activated, it will show a warning to the user indicating that they need to grant\n  // the appropriate permissions for biometric authentication to function properly.\n  const shouldRenderNativeBiometrics = isPasswordPresent\n    && (getIsNativeBiometricAuthSupported() || IS_IOS_APP || getIsTelegramBiometricsRestricted());\n  const shouldRenderMinifiedPinPad = isInsideModal && getDoesUsePinPad();\n\n  const isAutoConfirmAvailable = !isBiometricAuthEnabled;\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Security')}\n            withNotch={isScrolled}\n            onBackButtonClick={handleBackToSettingsClick}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Security')}</span>\n          </div>\n        )}\n        <div\n          className={buildClassName(styles.content, 'custom-scroll')}\n          onScroll={handleContentScroll}\n        >\n          {shouldShowBackup && (\n            <div className={styles.settingsBlock}>\n              <div className={buildClassName(styles.item)} onClick={handleOpenBackupWallet}>\n                <img className={styles.menuIcon} src={backupImg} alt={lang('$back_up_security')} />\n                {lang('$back_up_security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {shouldRenderNativeBiometrics && (\n            <NativeBiometricsToggle\n              onEnable={handleNativeBiometricsTurnOnOpen}\n            />\n          )}\n          {isPasswordPresent && IS_BIOMETRIC_AUTH_SUPPORTED && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={styles.item} onClick={handleBiometricAuthToggle}>\n                  <img className={styles.menuIcon} src={biometricsImg} alt={lang('Biometric Authentication')} />\n                  {lang('Biometric Authentication')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Biometric Authentication')}\n                    checked={isBiometricAuthEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>{\n                lang('To avoid entering the passcode every time, you can use biometrics.')\n              }\n              </p>\n            </>\n          )}\n\n          {!(isBiometricAuthEnabled && !isNativeBiometricAuthEnabled) && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <Button\n                  className={styles.changePasswordButton}\n                  isSimple\n                  onClick={handleChangePasswordClick}\n                >\n                  {isPasswordNumeric ? lang('Change Passcode') : lang('Change Password')}\n                </Button>\n              </div>\n              <p className={styles.blockDescription}>{lang('The passcode will be changed for all your wallets.')}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.itemSmall)} onClick={handleAppLockToggle}>\n                  {lang('App Lock')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Allow App Lock')}\n                    checked={isAppLockEnabled}\n                  />\n                </div>\n                <Collapsible isShown={!!isAppLockEnabled}>\n                  <Dropdown\n                    label={lang('Auto-Lock')}\n                    items={AUTOLOCK_OPTIONS_LIST as unknown as DropdownItem<AutolockValueType>[]}\n                    selectedValue={autolockValue}\n                    theme=\"light\"\n                    shouldTranslateOptions\n                    className={buildClassName(styles.item, styles.item_small, styles.itemAutoLock)}\n                    onChange={handleAutolockChange}\n                  />\n                </Collapsible>\n              </div>\n              <p className={styles.blockDescription}>{lang('$app_lock_description', { app_name: APP_NAME })}</p>\n            </>\n          )}\n\n          {isPasswordPresent && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div\n                  className={buildClassName(\n                    styles.item,\n                    styles.itemSmall,\n                    !isAutoConfirmAvailable && styles.itemDisabled,\n                  )}\n                  onClick={isAutoConfirmAvailable ? handleAutoConfirmToggle : undefined}\n                >\n                  {isPasswordNumeric ? lang('Remember Passcode') : lang('Remember Password')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={isPasswordNumeric ? lang('Remember Passcode') : lang('Remember Password')}\n                    checked={isAutoConfirmAvailable && isAutoConfirmEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {\n                  lang(\n                    'App will not ask for signature for %1$d minutes after last entry.',\n                    AUTO_CONFIRM_DURATION_MINUTES,\n                  )\n                }\n                {!isAutoConfirmAvailable && ` ${lang('Not available with biometrics.')}`}\n              </p>\n            </>\n          )}\n\n          {IS_ELECTRON && (\n            <>\n              <div className={buildClassName(styles.block, styles.settingsBlockWithDescription)}>\n                <div className={buildClassName(styles.item, styles.item_small)} onClick={onAutoUpdateEnabledToggle}>\n                  {lang('Auto-Updates')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Auto-Updates')}\n                    checked={isAutoUpdateEnabled}\n                  />\n                </div>\n              </div>\n              <p className={styles.blockDescription}>\n                {lang('Turn this off so you can manually download updates and verify signatures.')}\n              </p>\n            </>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: SLIDES) {\n    switch (currentKey) {\n      case SLIDES.settings:\n        return renderSettings();\n      case SLIDES.password:\n        if (getHasInMemoryPassword()) {\n          setCurrentSlide(SLIDES.settings);\n          void getInMemoryPassword().then((memoizedPassword) => setPassword(memoizedPassword));\n\n          return undefined;\n        }\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={isPasswordNumeric ? lang('Confirm Passcode') : lang('Confirm Password')}\n                onBackButtonClick={handleBackToSettingsClick}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={handleBackToSettingsClick} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Enter Password')}</span>\n              </div>\n            )}\n            <PasswordForm\n              isActive={isSlideActive && isActive}\n              error={passwordError}\n              containerClassName={IS_CAPACITOR ? styles.passwordFormContent : styles.passwordFormContentInModal}\n              forceBiometricsInMain={!isInsideModal}\n              placeholder={lang('Enter your current password')}\n              submitLabel={lang('Continue')}\n              onCancel={handleBackToSettingsClick}\n              onSubmit={handlePasswordSubmit}\n              onUpdate={clearPasswordError}\n            />\n          </>\n        );\n      case SLIDES.newPassword:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Change Password')}\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n                <span className={styles.headerTitle}>{lang('Change Password')}</span>\n              </div>\n            )}\n            <div className={buildClassName(\n              modalStyles.transitionContent,\n              styles.content,\n              isInsideModal && styles.contentInModal,\n            )}\n            >\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                play={isSlideActive}\n                size={ANIMATED_STICKER_BIG_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={styles.sticker}\n              />\n              <CreatePasswordForm\n                isActive={isSlideActive}\n                isLoading={isLoading}\n                onSubmit={handleNewPasswordSubmit}\n                onCancel={openSettingsSlide}\n                formId=\"auth-create-password\"\n              />\n            </div>\n          </>\n        );\n      case SLIDES.createNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && lang('Change Passcode')}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {!shouldRenderMinifiedPinPad && <div className={styles.pinPadTitle}>{lang('Change Passcode')}</div>}\n            </div>\n            <PinPad\n              isActive={isActive}\n              title={lang('Enter your new code')}\n              length={PIN_LENGTH}\n              value={pinValue}\n              onChange={setPinValue}\n              onSubmit={handlePinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.confirmNewPin:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                onBackButtonClick={openSettingsSlide}\n                className={styles.modalHeader}\n                title={shouldRenderMinifiedPinPad && (\n                  passwordError && pinValue === confirmPinValue\n                    ? lang('Passcode Changed!')\n                    : lang('Change Passcode')\n                )}\n              />\n            ) : (\n              <div className={styles.header}>\n                <Button isSimple isText onClick={openSettingsSlide} className={styles.headerBack}>\n                  <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n                  <span>{lang('Back')}</span>\n                </Button>\n              </div>\n            )}\n\n            <div\n              className={buildClassName(styles.pinPadHeader, shouldRenderMinifiedPinPad && styles.pinPadHeaderMinified)}\n            >\n              <AnimatedIconWithPreview\n                play={isActive}\n                tgsUrl={ANIMATED_STICKERS_PATHS.guard}\n                previewUrl={ANIMATED_STICKERS_PATHS.guardPreview}\n                noLoop={false}\n                size={shouldRenderMinifiedPinPad ? ANIMATED_STICKER_SMALL_SIZE_PX : ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n              />\n              {\n                !shouldRenderMinifiedPinPad && (\n                  <div className={styles.pinPadTitle}>\n                    {\n                      passwordError && pinValue === confirmPinValue\n                        ? lang('Passcode Changed!')\n                        : lang('Change Passcode')\n                    }\n                  </div>\n                )\n              }\n            </div>\n\n            <PinPad\n              isActive={isActive}\n              title={!passwordError ? lang('Re-enter your new code') : passwordError}\n              type={passwordError ? (pinValue === confirmPinValue ? 'success' : 'error') : undefined}\n              length={PIN_LENGTH}\n              value={confirmPinValue}\n              onChange={setConfirmPinValue}\n              onSubmit={handleConfirmPinSubmit}\n              isMinified={shouldRenderMinifiedPinPad}\n            />\n          </>\n        );\n      case SLIDES.passwordChanged:\n        return (\n          <>\n            {isInsideModal ? (\n              <ModalHeader\n                title={lang('Password Changed!')}\n                className={styles.modalHeader}\n              />\n            ) : (\n              <div className={buildClassName(styles.header, styles.onlyTextHeader)}>\n                <span className={styles.headerTitle}>{lang('Password Changed!')}</span>\n              </div>\n            )}\n            <div className={styles.content}>\n              <AnimatedIconWithPreview\n                tgsUrl={ANIMATED_STICKERS_PATHS.yeee}\n                previewUrl={ANIMATED_STICKERS_PATHS.yeeePreview}\n                play={isActive}\n                size={ANIMATED_STICKER_HUGE_SIZE_PX}\n                nonInteractive\n                noLoop={false}\n                className={buildClassName(styles.sticker, styles.stickerHuge)}\n              />\n\n              <div className={modalStyles.buttons}>\n                <Button isPrimary onClick={openSettingsSlide} className={modalStyles.customSubmitButton}>\n                  {lang('Done')}\n                </Button>\n              </div>\n            </div>\n          </>\n        );\n      case SLIDES.backup:\n        return (\n          <Backup\n            isActive={isActive && isSlideActive}\n            isMultichainAccount={isMultichainAccount}\n            openSettingsSlide={openSettingsSlide}\n            isInsideModal={isInsideModal}\n            onOpenPrivateKeySafetyRules={handleOpenPrivateKeySafetyRules}\n            onOpenSecretWordsSafetyRules={handleOpenSecretWordsSafetyRules}\n            onBackClick={handleBackToSettingsClick}\n            hasMnemonicWallet={hasMnemonicWallet}\n          />\n        );\n      case SLIDES.safetyRules:\n        return (\n          <BackupSafetyRules\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            backupType={backupType!}\n            onBackClick={openBackupPage}\n            onSubmit={\n              backupType === 'key'\n                ? handleOpenPrivateKey\n                : handleOpenSecretWords\n            }\n          />\n        );\n      case SLIDES.secretWords:\n        return (\n          <BackupSecretWords\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.secretWords || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n      case SLIDES.privateKey:\n        return (\n          <BackupPrivateKey\n            isActive={isActive && isSlideActive}\n            isBackupSlideActive={currentKey === SLIDES.privateKey || currentKey === SLIDES.safetyRules}\n            isInsideModal={isInsideModal}\n            enteredPassword={password}\n            currentAccountId={currentAccountId}\n            onBackClick={openBackupPage}\n            onSubmit={onSettingsClose}\n          />\n        );\n    }\n  }\n\n  return (\n    <Transition\n      direction={previousSlide === SLIDES.password && currentSlide === SLIDES.settings ? 1 : 'auto'}\n      name={resolveSlideTransitionName()}\n      className={buildClassName(modalStyles.transition, 'custom-scroll')}\n      slideClassName={buildClassName(styles.slide, isInsideModal && modalStyles.transitionSlide)}\n      activeKey={currentSlide}\n      nextKey={nextKey}\n      shouldCleanup\n    >\n      {renderContent}\n    </Transition>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    isPasswordNumeric, autolockValue, isAppLockEnabled, isAutoConfirmEnabled,\n  } = global.settings;\n\n  const isBiometricAuthEnabled = selectIsBiometricAuthEnabled(global);\n  const isNativeBiometricAuthEnabled = selectIsNativeBiometricAuthEnabled(global);\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const isMultichainAccount = selectIsMultichainAccount(global, global.currentAccountId!);\n  const isMnemonicAccount = selectIsMnemonicAccount(global);\n\n  return {\n    isBiometricAuthEnabled,\n    isNativeBiometricAuthEnabled,\n    isMultichainAccount,\n    isPasswordNumeric,\n    isPasswordPresent,\n    isAppLockEnabled,\n    autolockValue,\n    isAutoConfirmEnabled,\n    shouldShowBackup: isMnemonicAccount,\n    isLoading: global.auth.isLoading,\n    currentAccountId: global.currentAccountId!,\n  };\n})(SettingsSecurity));\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { UserSwapToken, UserToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TokenSelector from '../common/TokenSelector';\nimport Button from '../ui/Button';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  isActive?: boolean;\n  isInsideModal?: boolean;\n  handleBackClick: NoneToVoidFunction;\n}\n\nfunction SettingsTokenList({\n  isActive,\n  isInsideModal,\n  handleBackClick,\n}: OwnProps) {\n  const { addToken } = getActions();\n\n  const lang = useLang();\n\n  const handleTokenSelect = useLastCallback((token: UserToken | UserSwapToken) => {\n    addToken({ token: token as UserToken });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  function renderHeader() {\n    return (\n      <div className={buildClassName(styles.header, isInsideModal && styles.headerInsideModal)}>\n        <Button\n          isSimple\n          isText\n          className={buildClassName(styles.headerBack, isInsideModal && styles.isInsideModal)}\n          onClick={handleBackClick}\n        >\n          <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n          <span>{lang('Back')}</span>\n        </Button>\n        <span className={styles.headerTitle}>{lang('Select Token')}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.slide, styles.withTopSpace)}>\n      <TokenSelector\n        isActive={isActive}\n        shouldHideMyTokens\n        shouldHideNotSupportedTokens\n        header={renderHeader()}\n        onTokenSelect={handleTokenSelect}\n        onBack={handleBackClick}\n        onClose={handleBackClick}\n      />\n    </div>\n  );\n}\n\nexport default memo(SettingsTokenList);\n","import React, { memo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useScrolledState from '../../hooks/useScrolledState';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport styles from './Settings.module.scss';\n\nexport interface Wallet {\n  address: string;\n  version: ApiTonWalletVersion;\n  totalBalance: string;\n  tokens: string[];\n}\n\ninterface OwnProps {\n  isActive?: boolean;\n  handleBackClick: () => void;\n  isInsideModal?: boolean;\n  wallets?: Wallet[];\n  currentVersion?: ApiTonWalletVersion;\n}\n\nfunction SettingsWalletVersion({\n  isActive,\n  handleBackClick,\n  isInsideModal,\n  currentVersion,\n  wallets,\n}: OwnProps) {\n  const {\n    closeSettings,\n    importAccountByVersion,\n  } = getActions();\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: handleBackClick,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleAddWallet = useLastCallback((version: ApiTonWalletVersion) => {\n    closeSettings();\n    importAccountByVersion({ version });\n  });\n\n  function renderWallets() {\n    return wallets?.map((v) => {\n      return (\n        <div\n          key={v.address}\n          className={buildClassName(styles.item, styles.item_wallet_version)}\n          onClick={() => handleAddWallet(v.version)}\n        >\n          <div className={styles.walletVersionInfo}>\n            <span className={styles.walletVersionTitle}>{v.version}</span>\n            <span className={styles.walletVersionAddress}>{shortenAddress(v.address)}</span>\n          </div>\n          <div className={styles.walletVersionInfoRight}>\n            <span className={styles.walletVersionTokens}>\n              {v.tokens.join(', ')}\n            </span>\n            <span className={styles.walletVersionAmount}>\n              &thinsp;{v.totalBalance}\n            </span>\n          </div>\n          <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n        </div>\n      );\n    });\n  }\n\n  return (\n    <div className={styles.slide}>\n      {isInsideModal ? (\n        <ModalHeader\n          title={lang('Wallet Versions')}\n          withNotch={isScrolled}\n          onBackButtonClick={handleBackClick}\n          className={styles.modalHeader}\n        />\n      ) : (\n        <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n          <Button isSimple isText onClick={handleBackClick} className={styles.headerBack}>\n            <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n            <span>{lang('Back')}</span>\n          </Button>\n          <span className={styles.headerTitle}>{lang('Wallet Versions')}</span>\n        </div>\n      )}\n      <div\n        className={buildClassName(styles.content, 'custom-scroll')}\n        onScroll={handleContentScroll}\n      >\n        <div className={styles.blockWalletVersionText}>\n          <span>{lang('$current_wallet_version', { version: <strong>{currentVersion}</strong> })}</span>\n          <span>{lang('You have tokens on other versions of your wallet. You can import them from here.')}</span>\n        </div>\n        <div className={styles.block}>\n          {renderWallets()}\n        </div>\n        <div className={styles.blockWalletVersionReadMore}>\n          {lang('$read_more_about_wallet_version', {\n            ton_link: (\n              <a href=\"https://docs.ton.org/participate/wallets/contracts\" target=\"_blank\" rel=\"noreferrer\">\n                ton.org\n              </a>\n            ),\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default memo(SettingsWalletVersion);\n","import React, { memo, useEffect, useMemo, useRef, useState } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiTonWalletVersion } from '../../api/chains/ton/types';\nimport type { ApiDapp, ApiWalletWithVersionInfo } from '../../api/types';\nimport type { Account, GlobalState, UserToken } from '../../global/types';\nimport type { LedgerWalletInfo } from '../../util/ledger/types';\nimport type { Wallet } from './SettingsWalletVersion';\nimport { SettingsState } from '../../global/types';\n\nimport {\n  APP_ENV_MARKER,\n  APP_NAME,\n  APP_VERSION,\n  HELPCENTER_URL,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n  IS_EXTENSION,\n  LANG_LIST,\n  MTW_CARDS_WEBSITE,\n  MTW_TIPS_CHANNEL_NAME,\n  PROXY_HOSTS,\n  SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY,\n  SUPPORT_USERNAME,\n  TELEGRAM_WEB_URL,\n  TONCOIN,\n} from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsCurrentAccountViewMode,\n  selectIsPasswordPresent,\n  selectNetworkAccounts,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureEscKeyListener from '../../util/captureEscKeyListener';\nimport { toBig, toDecimal } from '../../util/decimals';\nimport { formatCurrency, getShortCurrencySymbol } from '../../util/formatNumber';\nimport { MEMO_EMPTY_ARRAY } from '../../util/memo';\nimport { openUrl } from '../../util/openUrl';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { captureControlledSwipe } from '../../util/swipeController';\nimport useTelegramMiniAppSwipeToClose from '../../util/telegram/hooks/useTelegramMiniAppSwipeToClose';\nimport {\n  IS_BIOMETRIC_AUTH_SUPPORTED,\n  IS_DAPP_SUPPORTED,\n  IS_DELEGATED_BOTTOM_SHEET,\n  IS_ELECTRON,\n  IS_LEDGER_SUPPORTED,\n  IS_TOUCH_ENV,\n  IS_WEB,\n} from '../../util/windowEnvironment';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHideBottomBar from '../../hooks/useHideBottomBar';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious2 from '../../hooks/usePrevious2';\nimport useScrolledState from '../../hooks/useScrolledState';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport { useStateRef } from '../../hooks/useStateRef';\n\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport LedgerSelectWallets from '../ledger/LedgerSelectWallets';\nimport LogOutModal from '../main/modals/LogOutModal';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Switcher from '../ui/Switcher';\nimport Transition from '../ui/Transition';\nimport Biometrics from './biometrics/Biometrics';\nimport SettingsNativeBiometricsTurnOn from './biometrics/NativeBiometricsTurnOn';\nimport SettingsAbout from './SettingsAbout';\nimport SettingsAppearance from './SettingsAppearance';\nimport SettingsAssets from './SettingsAssets';\nimport SettingsDapps from './SettingsDapps';\nimport SettingsDeveloperOptions from './SettingsDeveloperOptions';\nimport SettingsDisclaimer from './SettingsDisclaimer';\nimport SettingsHiddenNfts from './SettingsHiddenNfts';\nimport SettingsLanguage from './SettingsLanguage';\nimport SettingsPushNotifications from './SettingsPushNotifications';\nimport SettingsSecurity from './SettingsSecurity';\nimport SettingsTokenList from './SettingsTokenList';\nimport SettingsWalletVersion from './SettingsWalletVersion';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Settings.module.scss';\n\nimport aboutImg from '../../assets/settings/settings_about.svg';\nimport appearanceImg from '../../assets/settings/settings_appearance.svg';\nimport assetsActivityImg from '../../assets/settings/settings_assets-activity.svg';\nimport connectedDappsImg from '../../assets/settings/settings_connected-dapps.svg';\nimport disclaimerImg from '../../assets/settings/settings_disclaimer.svg';\nimport exitImg from '../../assets/settings/settings_exit.svg';\nimport helpcenterImg from '../../assets/settings/settings_helpcenter.svg';\nimport installAppImg from '../../assets/settings/settings_install-app.svg';\nimport installDesktopImg from '../../assets/settings/settings_install-desktop.svg';\nimport installMobileImg from '../../assets/settings/settings_install-mobile.svg';\nimport languageImg from '../../assets/settings/settings_language.svg';\nimport ledgerImg from '../../assets/settings/settings_ledger.svg';\nimport mtwCardsImg from '../../assets/settings/settings_mtw-cards.svg';\nimport upgradeImg from '../../assets/settings/settings_mytonwallet.svg';\nimport notifications from '../../assets/settings/settings_notifications.svg';\nimport securityImg from '../../assets/settings/settings_security.svg';\nimport supportImg from '../../assets/settings/settings_support.svg';\nimport telegramImg from '../../assets/settings/settings_telegram-menu.svg';\nimport tipsImg from '../../assets/settings/settings_tips.svg';\nimport tonLinksImg from '../../assets/settings/settings_ton-links.svg';\nimport tonMagicImg from '../../assets/settings/settings_ton-magic.svg';\nimport tonProxyImg from '../../assets/settings/settings_ton-proxy.svg';\nimport walletVersionImg from '../../assets/settings/settings_wallet-version.svg';\n\ntype OwnProps = {\n  isActive: boolean;\n  isInsideModal?: boolean;\n};\n\ntype StateProps = {\n  settings: GlobalState['settings'];\n  dapps: ApiDapp[];\n  isOpen?: boolean;\n  tokens?: UserToken[];\n  isPasswordPresent?: boolean;\n  currentVersion?: ApiTonWalletVersion;\n  versions?: ApiWalletWithVersionInfo[];\n  isCopyStorageEnabled?: boolean;\n  supportAccountsCount?: number;\n  hardwareWallets?: LedgerWalletInfo[];\n  accounts?: Record<string, Account>;\n  arePushNotificationsAvailable?: boolean;\n  isNftBuyingDisabled?: boolean;\n  isViewMode: boolean;\n};\n\nconst AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE = 5;\nconst SUPPORT_ACCOUNTS_COUNT_DEFAULT = 1;\n\nfunction Settings({\n  settings: {\n    state,\n    theme,\n    animationLevel,\n    isTestnet,\n    langCode,\n    isTonProxyEnabled,\n    isTonMagicEnabled,\n    isDeeplinkHookEnabled,\n    baseCurrency,\n  },\n  dapps,\n  isActive,\n  isOpen = false,\n  tokens,\n  isInsideModal,\n  isPasswordPresent,\n  currentVersion,\n  versions,\n  isCopyStorageEnabled,\n  supportAccountsCount = SUPPORT_ACCOUNTS_COUNT_DEFAULT,\n  accounts,\n  hardwareWallets,\n  arePushNotificationsAvailable,\n  isNftBuyingDisabled,\n  isViewMode,\n}: OwnProps & StateProps) {\n  const {\n    setSettingsState,\n    openSettingsHardwareWallet,\n    closeSettings,\n    toggleDeeplinkHook,\n    toggleTonProxy,\n    toggleTonMagic,\n    getDapps,\n    clearIsPinAccepted,\n    afterSelectHardwareWallets,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const transitionRef = useRef<HTMLDivElement>();\n  const { renderingKey } = useModalTransitionKeys(state, isOpen);\n  const { disableSwipeToClose, enableSwipeToClose } = useTelegramMiniAppSwipeToClose(isOpen);\n  const [clicksAmount, setClicksAmount] = useState<number>(isTestnet ? AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE : 0);\n  const prevRenderingKeyRef = useStateRef(usePrevious2(renderingKey));\n\n  const [isDeveloperModalOpen, openDeveloperModal, closeDeveloperModal] = useFlag();\n  const [withAllWalletVersions, markWithAllWalletVersions] = useFlag();\n\n  const [isLogOutModalOpened, openLogOutModal, closeLogOutModal] = useFlag();\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n  const isInitialScreen = renderingKey === SettingsState.Initial;\n\n  const activeLang = useMemo(() => LANG_LIST.find((l) => l.langCode === langCode), [langCode]);\n\n  const shortBaseSymbol = getShortCurrencySymbol(baseCurrency);\n\n  const tonToken = useMemo(() => tokens?.find(({ slug }) => slug === TONCOIN.slug), [tokens]);\n\n  const wallets = useMemo(() => {\n    return versions\n      ?.filter((v) => v.lastTxId || v.version === 'W5' || withAllWalletVersions)\n      ?.map((v) => {\n        const tonBalance = formatCurrency(toDecimal(v.balance), tonToken?.symbol ?? '');\n        const balanceInCurrency = formatCurrency(\n          toBig(v.balance).mul(tonToken?.price ?? 0).round(tonToken?.decimals),\n          shortBaseSymbol,\n        );\n\n        const accountTokens = [tonBalance];\n\n        return {\n          address: v.address,\n          version: v.version,\n          totalBalance: balanceInCurrency,\n          tokens: accountTokens,\n        } satisfies Wallet;\n      }) ?? [];\n  }, [shortBaseSymbol, tonToken, versions, withAllWalletVersions]);\n\n  const {\n    shouldRender: isTelegramLinkRendered,\n    ref: telegramLinkRef,\n  } = useShowTransition({\n    isOpen: isTonMagicEnabled,\n    withShouldRender: true,\n  });\n\n  const {\n    handleScroll: handleContentScroll,\n    isScrolled,\n  } = useScrolledState();\n\n  const handleSlideAnimationStop = useLastCallback(() => {\n    if (prevRenderingKeyRef.current === SettingsState.NativeBiometricsTurnOn) {\n      clearIsPinAccepted();\n    }\n  });\n\n  const handleCloseSettings = useLastCallback(() => {\n    closeSettings(undefined, { forceOnHeavyAnimation: true });\n    setSettingsState({ state: SettingsState.Initial });\n  });\n\n  useHistoryBack({\n    isActive: isActive && isInitialScreen,\n    onBack: handleCloseSettings,\n    shouldIgnoreForTelegram: isInsideModal,\n  });\n\n  useHideBottomBar(isOpen && !isInitialScreen);\n\n  const handlCloseDeveloperModal = useLastCallback(() => {\n    closeDeveloperModal();\n\n    if (IS_CORE_WALLET) {\n      handleCloseSettings();\n    }\n  });\n\n  const handleConnectedDappsOpen = useLastCallback(() => {\n    getDapps();\n    setSettingsState({ state: SettingsState.Dapps });\n  });\n\n  function handleAppearanceOpen() {\n    setSettingsState({ state: SettingsState.Appearance });\n  }\n\n  function handlePushNotificationsOpen() {\n    setSettingsState({ state: SettingsState.PushNotifications });\n  }\n\n  function handleSecurityOpen() {\n    setSettingsState({ state: SettingsState.Security });\n  }\n\n  function handleAssetsOpen() {\n    setSettingsState({ state: SettingsState.Assets });\n  }\n\n  function handleLanguageOpen() {\n    setSettingsState({ state: SettingsState.Language });\n  }\n\n  function handleAboutOpen() {\n    setSettingsState({ state: SettingsState.About });\n  }\n\n  function handleDisclaimerOpen() {\n    setSettingsState({ state: SettingsState.Disclaimer });\n  }\n\n  const handleBackClick = useLastCallback(() => {\n    switch (renderingKey as SettingsState) {\n      case SettingsState.HiddenNfts:\n      case SettingsState.SelectTokenList:\n        setSettingsState({ state: SettingsState.Assets });\n        break;\n\n      default:\n        setSettingsState({ state: SettingsState.Initial });\n    }\n  });\n\n  const handleBackClickToAssets = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.Assets });\n  });\n\n  const handleOpenWalletVersion = useLastCallback(() => {\n    setSettingsState({ state: SettingsState.WalletVersion });\n  });\n\n  const handleDeeplinkHookToggle = useLastCallback(() => {\n    toggleDeeplinkHook({ isEnabled: !isDeeplinkHookEnabled });\n  });\n\n  const handleTonProxyToggle = useLastCallback(() => {\n    toggleTonProxy({ isEnabled: !isTonProxyEnabled });\n  });\n\n  const handleTonMagicToggle = useLastCallback(() => {\n    toggleTonMagic({ isEnabled: !isTonMagicEnabled });\n  });\n\n  function handleClickInstallApp() {\n    void openUrl('https://mytonwallet.io/get', { isExternal: true });\n  }\n\n  function handleClickInstallOnDesktop() {\n    void openUrl('https://mytonwallet.io/get/desktop', { isExternal: true });\n  }\n\n  function handleClickInstallOnMobile() {\n    void openUrl('https://mytonwallet.io/get/mobile', { isExternal: true });\n  }\n\n  const handleAddLedgerWallet = useLastCallback(() => {\n    afterSelectHardwareWallets({ hardwareSelectedIndices: [hardwareWallets![0].index] });\n    handleCloseSettings();\n  });\n\n  const handleLedgerConnected = useLastCallback((isSingleWallet: boolean) => {\n    if (isSingleWallet) {\n      handleAddLedgerWallet();\n      return;\n    }\n    setSettingsState({ state: SettingsState.LedgerSelectWallets });\n  });\n\n  const [isTrayIconEnabled, setIsTrayIconEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsTrayIconEnabled().then(setIsTrayIconEnabled);\n  }, []);\n\n  const handleTrayIconEnabledToggle = useLastCallback(() => {\n    setIsTrayIconEnabled(!isTrayIconEnabled);\n    void window.electron?.setIsTrayIconEnabled(!isTrayIconEnabled);\n  });\n\n  const [isAutoUpdateEnabled, setIsAutoUpdateEnabled] = useState(false);\n  useEffect(() => {\n    void window.electron?.getIsAutoUpdateEnabled().then(setIsAutoUpdateEnabled);\n  }, []);\n\n  const handleAutoUpdateEnabledToggle = useLastCallback(() => {\n    setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n    void window.electron?.setIsAutoUpdateEnabled(!isAutoUpdateEnabled);\n  });\n\n  const handleBackOrCloseAction = useLastCallback(() => {\n    if (isInitialScreen) {\n      if (isInsideModal) handleCloseSettings();\n    } else {\n      handleBackClick();\n    }\n  });\n\n  const handleCloseLogOutModal = useLastCallback((shouldCloseSettings: boolean) => {\n    closeLogOutModal();\n    if (shouldCloseSettings) {\n      handleCloseSettings();\n    }\n  });\n\n  function handleOpenHardwareModal() {\n    openSettingsHardwareWallet();\n  }\n\n  const handleMultipleClick = () => {\n    if (clicksAmount + 1 >= AMOUNT_OF_CLICKS_FOR_DEVELOPERS_MODE) {\n      openDeveloperModal();\n    } else {\n      setClicksAmount(clicksAmount + 1);\n    }\n  };\n\n  const handleShowAllWalletVersions = useLastCallback(() => {\n    markWithAllWalletVersions();\n    handlCloseDeveloperModal();\n    handleOpenWalletVersion();\n  });\n\n  useEffect(\n    () => captureEscKeyListener(isInsideModal ? handleBackOrCloseAction : handleBackClick),\n    [isInsideModal],\n  );\n\n  useEffect(() => {\n    if (!IS_TOUCH_ENV) {\n      return undefined;\n    }\n\n    return captureControlledSwipe(transitionRef.current!, {\n      onSwipeRightStart: () => {\n        if (IS_DELEGATED_BOTTOM_SHEET) {\n          handleBackClick();\n        } else {\n          handleBackOrCloseAction();\n        }\n\n        disableSwipeToClose();\n      },\n      onCancel: () => {\n        setSettingsState({ state: prevRenderingKeyRef.current! });\n\n        enableSwipeToClose();\n      },\n    });\n  }, [disableSwipeToClose, enableSwipeToClose, prevRenderingKeyRef]);\n\n  function renderHandleDeeplinkButton() {\n    return (\n      <div className={styles.item} onClick={handleDeeplinkHookToggle}>\n        <img className={styles.menuIcon} src={tonLinksImg} alt={lang('Handle ton:// links')} />\n        {lang('Handle ton:// links')}\n\n        <Switcher\n          className={styles.menuSwitcher}\n          label={lang('Handle ton:// links')}\n          checked={isDeeplinkHookEnabled}\n        />\n      </div>\n    );\n  }\n\n  function renderSettings() {\n    return (\n      <div className={styles.slide}>\n        {isInsideModal ? (\n          <ModalHeader\n            title={lang('Settings')}\n            withNotch={isScrolled}\n            onClose={!isPortrait ? handleCloseSettings : undefined}\n            className={styles.modalHeader}\n          />\n        ) : (\n          <div className={buildClassName(styles.header, 'with-notch-on-scroll', isScrolled && 'is-scrolled')}>\n            <Button\n              isSimple\n              isText\n              onClick={handleCloseSettings}\n              className={buildClassName(styles.headerBack, isPortrait && styles.hidden)}\n            >\n              <i className={buildClassName(styles.iconChevron, 'icon-chevron-left')} aria-hidden />\n              <span>{lang('Back')}</span>\n            </Button>\n            <span className={styles.headerTitle}>{lang('Settings')}</span>\n          </div>\n        )}\n\n        <div\n          className={buildClassName(styles.content, 'custom-scroll', styles.withBottomSpace)}\n          onScroll={handleContentScroll}\n        >\n          {IS_CORE_WALLET && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={upgradeImg} alt={lang('Upgrade to MyTonWallet')} />\n                {lang('Upgrade to MyTonWallet')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {!IS_CORE_WALLET && IS_WEB && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallApp}>\n                <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                {lang('Install App')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n          {IS_EXTENSION && (\n            <div className={styles.block}>\n              {PROXY_HOSTS && (\n                <div className={styles.item} onClick={handleTonProxyToggle}>\n                  <img className={styles.menuIcon} src={tonProxyImg} alt={lang('TON Proxy')} />\n                  {lang('TON Proxy')}\n\n                  <Switcher\n                    className={styles.menuSwitcher}\n                    label={lang('Toggle TON Proxy')}\n                    checked={isTonProxyEnabled}\n                  />\n                </div>\n              )}\n              <div className={styles.item} onClick={handleTonMagicToggle}>\n                <img className={styles.menuIcon} src={tonMagicImg} alt={lang('TON Magic')} />\n                {lang('TON Magic')}\n\n                <Switcher\n                  className={styles.menuSwitcher}\n                  label={lang('Toggle TON Magic')}\n                  checked={isTonMagicEnabled}\n                />\n              </div>\n              {isTelegramLinkRendered && (\n                <div ref={telegramLinkRef} className={styles.item} onClick={handleOpenTelegramWeb}>\n                  <img className={styles.menuIcon} src={telegramImg} alt={lang('Open Telegram Web')} />\n                  {lang('Open Telegram Web')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n          {IS_ELECTRON && (\n            <div className={styles.block}>\n              {renderHandleDeeplinkButton()}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handlePushNotificationsOpen}>\n              <img\n                className={styles.menuIcon}\n                src={notifications}\n                alt={arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n              />\n              {arePushNotificationsAvailable ? lang('Notifications & Sounds') : lang('Sounds')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            <div className={styles.item} onClick={handleAppearanceOpen}>\n              <img className={styles.menuIcon} src={appearanceImg} alt={lang('Appearance')} />\n              {lang('Appearance')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n            {!SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY && (\n              <div className={styles.item} onClick={handleAssetsOpen}>\n                <img className={styles.menuIcon} src={assetsActivityImg} alt={lang('Assets & Activity')} />\n                {lang('Assets & Activity')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {isPasswordPresent && (\n              <div className={styles.item} onClick={handleSecurityOpen}>\n                <img className={styles.menuIcon} src={securityImg} alt={lang('Security')} />\n                {lang('Security')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            )}\n            {IS_DAPP_SUPPORTED && !isViewMode && (\n              <div className={styles.item} onClick={handleConnectedDappsOpen}>\n                <img className={styles.menuIcon} src={connectedDappsImg} alt={lang('Connected Dapps')} />\n                {lang('Connected Dapps')}\n\n                <div className={styles.itemInfo}>\n                  {dapps.length ? dapps.length : ''}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n            {!IS_CORE_WALLET && (\n              <div className={styles.item} onClick={handleLanguageOpen}>\n                <img className={styles.menuIcon} src={languageImg} alt={lang('Language')} />\n                {lang('Language')}\n                <div className={styles.itemInfo}>\n                  {activeLang?.name}\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {(!!versions?.length || IS_LEDGER_SUPPORTED) && (\n            <div className={styles.block}>\n              {!!versions?.length && (\n                <div className={styles.item} onClick={handleOpenWalletVersion}>\n                  <img className={styles.menuIcon} src={walletVersionImg} alt={lang('Wallet Versions')} />\n                  {lang('Wallet Versions')}\n\n                  <div className={styles.itemInfo}>\n                    {currentVersion}\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </div>\n                </div>\n              )}\n              {IS_LEDGER_SUPPORTED && (\n                <div className={styles.item} onClick={handleOpenHardwareModal}>\n                  <img className={styles.menuIcon} src={ledgerImg} alt={lang('Connect Ledger')} />\n                  {lang('Connect Ledger')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <>\n              {!isNftBuyingDisabled && (\n                <div className={styles.block}>\n                  <a\n                    href={MTW_CARDS_WEBSITE}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={mtwCardsImg} alt={lang('MyTonWallet Cards NFT')} />\n                    {lang('MyTonWallet Cards NFT')}\n\n                    <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                  </a>\n                </div>\n              )}\n              <div className={styles.block}>\n                <a\n                  href={`https://t.me/${MTW_TIPS_CHANNEL_NAME[langCode] ?? MTW_TIPS_CHANNEL_NAME.en}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={tipsImg} alt={lang('MyTonWallet Tips')} />\n                  {lang('MyTonWallet Tips')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                <a\n                  href={HELPCENTER_URL[langCode as never] ?? HELPCENTER_URL.en}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className={styles.item}\n                >\n                  <img className={styles.menuIcon} src={helpcenterImg} alt={lang('Help Center')} />\n                  {lang('Help Center')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </a>\n                {supportAccountsCount > 0 && (\n                  <a\n                    href={`https://t.me/${SUPPORT_USERNAME}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className={styles.item}\n                  >\n                    <img className={styles.menuIcon} src={supportImg} alt={lang('Get Support')} />\n                    {lang('Get Support')}\n\n                    <div className={styles.itemInfo}>\n                      <span className={styles.small}>@{SUPPORT_USERNAME}</span>\n                      <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                    </div>\n                  </a>\n                )}\n              </div>\n            </>\n          )}\n\n          <div className={styles.block}>\n            <div className={styles.item} onClick={handleDisclaimerOpen}>\n              <img className={styles.menuIcon} src={disclaimerImg} alt={lang('Use Responsibly')} />\n              {lang('Use Responsibly')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          {!IS_CORE_WALLET && IS_CAPACITOR && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnDesktop}>\n                <img className={styles.menuIcon} src={installDesktopImg} alt={lang('Install on Desktop')} />\n                {lang('Install on Desktop')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && IS_ELECTRON && (\n            <div className={styles.block}>\n              <div className={styles.item} onClick={handleClickInstallOnMobile}>\n                <img className={styles.menuIcon} src={installMobileImg} alt={lang('Install on Mobile')} />\n                {lang('Install on Mobile')}\n\n                <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n              </div>\n            </div>\n          )}\n\n          {!IS_CORE_WALLET && (\n            <div className={styles.block}>\n              {!IS_CORE_WALLET && IS_EXTENSION && (\n                <div className={styles.item} onClick={handleClickInstallApp}>\n                  <img className={styles.menuIcon} src={installAppImg} alt={lang('Install App')} />\n                  {lang('Install App')}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n              {!IS_CORE_WALLET && (\n                <div className={styles.item} onClick={handleAboutOpen}>\n                  <img className={styles.menuIcon} src={aboutImg} alt=\"\" />\n                  {lang('About %app_name%', { app_name: APP_NAME })}\n\n                  <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n                </div>\n              )}\n            </div>\n          )}\n\n          <div className={styles.block}>\n            <div className={buildClassName(styles.item, styles.item_red)} onClick={openLogOutModal}>\n              <img className={styles.menuIcon} src={exitImg} alt={lang('Exit')} />\n              {lang('Exit')}\n\n              <i className={buildClassName(styles.iconChevronRight, 'icon-chevron-right')} aria-hidden />\n            </div>\n          </div>\n\n          <div className={styles.version} onClick={handleMultipleClick}>\n            {APP_NAME} {APP_VERSION} {APP_ENV_MARKER}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  function renderContent(isSlideActive: boolean, isFrom: boolean, currentKey: SettingsState) {\n    switch (currentKey) {\n      case SettingsState.Initial:\n        return renderSettings();\n      case SettingsState.PushNotifications:\n        return (\n          <SettingsPushNotifications\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Appearance:\n        return (\n          <SettingsAppearance\n            isActive={isActive && isSlideActive}\n            theme={theme}\n            animationLevel={animationLevel}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isTrayIconEnabled={isTrayIconEnabled}\n            onTrayIconEnabledToggle={handleTrayIconEnabledToggle}\n          />\n        );\n      case SettingsState.Assets:\n        return (\n          <SettingsAssets\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            onBack={handleBackClick}\n          />\n        );\n      case SettingsState.Security:\n        return (\n          <SettingsSecurity\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            isAutoUpdateEnabled={isAutoUpdateEnabled}\n            onAutoUpdateEnabledToggle={handleAutoUpdateEnabledToggle}\n            onSettingsClose={handleCloseSettings}\n          />\n        );\n      case SettingsState.Dapps:\n        return (\n          <SettingsDapps\n            isActive={isActive && isSlideActive}\n            dapps={dapps}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.Language:\n        return (\n          <SettingsLanguage\n            isActive={isActive && isSlideActive}\n            langCode={langCode}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.About:\n        return (\n          <SettingsAbout\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            theme={theme}\n          />\n        );\n      case SettingsState.Disclaimer:\n        return (\n          <SettingsDisclaimer\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n          />\n        );\n      case SettingsState.NativeBiometricsTurnOn:\n        return (\n          <SettingsNativeBiometricsTurnOn\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClick}\n          />\n        );\n      case SettingsState.SelectTokenList:\n        return (\n          <SettingsTokenList\n            isActive={isActive && isSlideActive}\n            isInsideModal={isInsideModal}\n            handleBackClick={handleBackClickToAssets}\n          />\n        );\n      case SettingsState.WalletVersion:\n        return (\n          <SettingsWalletVersion\n            isActive={isActive && isSlideActive}\n            currentVersion={currentVersion}\n            handleBackClick={handleBackClick}\n            isInsideModal={isInsideModal}\n            wallets={wallets}\n          />\n        );\n      case SettingsState.LedgerConnectHardware:\n        return (\n          <div className={styles.slide}>\n            <LedgerConnect\n              isActive={isActive && isSlideActive}\n              isStatic={!isInsideModal}\n              className={styles.nestedTransition}\n              onBackButtonClick={handleBackClick}\n              onConnected={handleLedgerConnected}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.LedgerSelectWallets:\n        return (\n          <div className={styles.slide}>\n            <LedgerSelectWallets\n              isActive={isActive && isSlideActive}\n              isStatic={!isInsideModal}\n              accounts={accounts}\n              hardwareWallets={hardwareWallets}\n              onBackButtonClick={handleBackClick}\n              onClose={handleBackOrCloseAction}\n            />\n          </div>\n        );\n      case SettingsState.HiddenNfts:\n        return (\n          <SettingsHiddenNfts\n            isActive={isActive && isSlideActive}\n            handleBackClick={handleBackClickToAssets}\n            isInsideModal={isInsideModal}\n          />\n        );\n    }\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <Transition\n        ref={transitionRef}\n        name={resolveSlideTransitionName()}\n        className={buildClassName(isInsideModal ? modalStyles.transition : styles.transitionContainer, 'custom-scroll')}\n        activeKey={renderingKey}\n        slideClassName={buildClassName(isInsideModal && modalStyles.transitionSlide)}\n        withSwipeControl\n        onStop={getDoesUsePinPad() ? handleSlideAnimationStop : undefined}\n      >\n        {renderContent}\n      </Transition>\n      <SettingsDeveloperOptions\n        isOpen={isDeveloperModalOpen}\n        isTestnet={isTestnet}\n        isCopyStorageEnabled={isCopyStorageEnabled}\n        onShowAllWalletVersions={handleShowAllWalletVersions}\n        onClose={handlCloseDeveloperModal}\n      />\n      <LogOutModal isOpen={isLogOutModalOpened} onClose={handleCloseLogOutModal} />\n      {IS_BIOMETRIC_AUTH_SUPPORTED && <Biometrics isInsideModal={isInsideModal} />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const isPasswordPresent = selectIsPasswordPresent(global);\n  const accounts = selectNetworkAccounts(global);\n  const { isCopyStorageEnabled, supportAccountsCount = 1, isNftBuyingDisabled } = global.restrictions;\n\n  const { currentVersion, byId: versionsById } = global.walletVersions ?? {};\n  const versions = versionsById?.[global.currentAccountId!];\n  const { dapps = MEMO_EMPTY_ARRAY } = selectCurrentAccountState(global) || {};\n  const { hardwareWallets } = global.hardware;\n\n  return {\n    settings: global.settings,\n    dapps,\n    isOpen: global.areSettingsOpen,\n    tokens: selectCurrentAccountTokens(global),\n    isPasswordPresent,\n    currentVersion,\n    versions,\n    isCopyStorageEnabled,\n    supportAccountsCount,\n    hardwareWallets,\n    accounts,\n    isNftBuyingDisabled,\n    arePushNotificationsAvailable: global.pushNotifications.isAvailable,\n    isViewMode: selectIsCurrentAccountViewMode(global),\n  };\n})(Settings));\n\nfunction handleOpenTelegramWeb() {\n  window.open(TELEGRAM_WEB_URL, '_blank', 'noopener');\n}\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { IS_EXTENSION } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { IS_ELECTRON } from '../../util/windowEnvironment';\n\nimport Modal from '../ui/Modal';\n\nimport styles from './Settings.module.scss';\n\ninterface OwnProps {\n  children: TeactNode;\n  isOpen?: boolean;\n  onClose: () => void;\n}\n\ninterface StateProps {\n  isMediaViewerOpen?: boolean;\n}\n\nfunction SettingsModal({\n  children, isOpen, onClose, isMediaViewerOpen,\n}: OwnProps & StateProps) {\n  const fullDialogClassName = buildClassName(\n    styles.modalDialog,\n    !(IS_ELECTRON || IS_EXTENSION) && styles.modalDialogWeb,\n  );\n\n  return (\n    <Modal\n      hasCloseButton\n      isOpen={isOpen && !isMediaViewerOpen}\n      dialogClassName={fullDialogClassName}\n      contentClassName={styles.modalContent}\n      nativeBottomSheetKey=\"settings\"\n      forceFullNative\n      onClose={onClose}\n    >\n      {children}\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n  };\n})(SettingsModal));\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useRef, useState,\n} from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { SwapState, SwapType, type UserSwapToken } from '../../global/types';\n\nimport { ANIMATED_STICKER_BIG_SIZE_PX } from '../../config';\nimport buildClassName from '../../util/buildClassName';\nimport { readClipboardContent } from '../../util/clipboard';\nimport { vibrate } from '../../util/haptics';\nimport { shortenAddress } from '../../util/shortenAddress';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { getIsMobileTelegramApp, IS_CLIPBOARDS_SUPPORTED, IS_IOS } from '../../util/windowEnvironment';\nimport { callApi } from '../../api';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useFlag from '../../hooks/useFlag';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrScannerSupport from '../../hooks/useQrScannerSupport';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Input from '../ui/Input';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  swapType?: SwapType;\n  toAddress?: string;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n}\n\nconst SHORT_ADDRESS_SHIFT = 14;\nconst MIN_ADDRESS_LENGTH_TO_SHORTEN = SHORT_ADDRESS_SHIFT * 2;\n\nfunction SwapBlockchain({\n  isActive,\n  swapType,\n  toAddress = '',\n  tokenIn,\n  tokenOut,\n}: OwnProps) {\n  const {\n    cancelSwap,\n    setSwapCexAddress,\n    showNotification,\n    setSwapScreen,\n    requestOpenQrScanner,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const toAddressRef = useRef<HTMLInputElement>();\n\n  const [shouldRenderPasteButton, setShouldRenderPasteButton] = useState(IS_CLIPBOARDS_SUPPORTED);\n  const [isAddressFocused, markAddressFocused, unmarkAddressFocused] = useFlag();\n  const [hasToAddressError, setHasToAddressError] = useState(false);\n  const [canContinue, setCanContinue] = useState(swapType !== SwapType.CrosschainFromWallet);\n\n  const isQrScannerSupported = useQrScannerSupport();\n\n  const withPasteButton = shouldRenderPasteButton && toAddress === '';\n\n  const toAddressShort = toAddress.length > MIN_ADDRESS_LENGTH_TO_SHORTEN\n    ? shortenAddress(toAddress, SHORT_ADDRESS_SHIFT) || ''\n    : toAddress;\n\n  const handleCancelClick = useLastCallback(() => {\n    setHasToAddressError(false);\n    setCanContinue(false);\n    setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: handleCancelClick,\n  });\n\n  const handleAddressFocus = useLastCallback(() => {\n    const el = toAddressRef.current!;\n\n    // `selectionStart` is only updated in the next frame after `focus` event\n    requestAnimationFrame(() => {\n      const caretPosition = el.selectionStart!;\n      markAddressFocused();\n\n      // Restore caret position after input field value has been focused and expanded\n      requestAnimationFrame(() => {\n        const newCaretPosition = caretPosition <= SHORT_ADDRESS_SHIFT + 3\n          ? caretPosition\n          : Math.max(0, el.value.length - (toAddressShort.length - caretPosition));\n\n        el.setSelectionRange(newCaretPosition, newCaretPosition);\n        if (newCaretPosition > SHORT_ADDRESS_SHIFT * 2) {\n          el.scrollLeft = el.scrollWidth - el.clientWidth;\n        }\n      });\n    });\n  });\n\n  const validateToAddress = useLastCallback(async (address: string) => {\n    if (!address.length) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    const response = await callApi('swapCexValidateAddress', {\n      slug: tokenOut!.slug,\n      address,\n    });\n\n    if (!response) {\n      setHasToAddressError(false);\n      setCanContinue(false);\n      return;\n    }\n\n    setHasToAddressError(!response.result);\n    setCanContinue(response.result);\n  });\n\n  const handleAddressBlur = useLastCallback(() => {\n    unmarkAddressFocused();\n  });\n\n  const handleAddressInput = useLastCallback((newToAddress: string) => {\n    setSwapCexAddress({ toAddress: newToAddress.trim() });\n  });\n\n  const handlePasteClick = useLastCallback(async () => {\n    try {\n      const { type, text } = await readClipboardContent();\n\n      if (type === 'text/plain') {\n        setSwapCexAddress({ toAddress: text.trim() });\n        await validateToAddress(text.trim());\n      }\n    } catch (error) {\n      showNotification({\n        message: lang('Error reading clipboard'),\n      });\n      setShouldRenderPasteButton(false);\n    }\n  });\n\n  useEffect(() => {\n    void validateToAddress(toAddress);\n  }, [toAddress, validateToAddress]);\n\n  const submitPassword = useLastCallback(() => {\n    void vibrate();\n    setSwapScreen({ state: SwapState.Password });\n  });\n\n  const handleQrScanClick = useLastCallback(() => {\n    if (IS_IOS && getIsMobileTelegramApp()) {\n      alert('Scanning is temporarily not available');\n      return;\n    }\n\n    requestOpenQrScanner();\n    cancelSwap();\n  });\n\n  function renderInfo() {\n    const text = hasToAddressError\n      ? lang('Incorrect address.')\n      : lang('Please provide an address of your wallet in %blockchain% blockchain to receive bought tokens.', {\n        blockchain: getChainNetworkName(tokenOut?.chain),\n      });\n\n    return (\n      <Transition\n        name=\"fade\"\n        activeKey={hasToAddressError ? 0 : 1}\n        slideClassName={styles.blockchainHintWrapper}\n      >\n        <span className={buildClassName(\n          styles.blockchainHintText,\n          hasToAddressError && styles.blockchainHintTextError,\n        )}\n        >\n          {text}\n        </span>\n      </Transition>\n    );\n  }\n\n  function renderInputAddress() {\n    if (swapType !== SwapType.CrosschainFromWallet) return undefined;\n\n    return (\n      <>\n        <div className={styles.inputAddress}>\n          <Input\n            ref={toAddressRef}\n            isRequired\n            placeholder={lang('Your address on another blockchain')}\n            value={isAddressFocused ? toAddress : toAddressShort}\n            onInput={handleAddressInput}\n            onFocus={handleAddressFocus}\n            onBlur={handleAddressBlur}\n            wrapperClassName={styles.inputAddressWrapper}\n          >\n            {isQrScannerSupported && (\n              <Button\n                isSimple\n                className={buildClassName(styles.inputButton, withPasteButton && styles.inputButtonShifted)}\n                onClick={handleQrScanClick}\n                ariaLabel={lang('Scan QR Code')}\n              >\n                <i className=\"icon-qr-scanner-alt\" aria-hidden />\n              </Button>\n            )}\n            {withPasteButton && (\n              <Button isSimple className={styles.inputButton} onClick={handlePasteClick} ariaLabel={lang('Paste')}>\n                <i className=\"icon-paste\" aria-hidden />\n              </Button>\n            )}\n          </Input>\n        </div>\n        {renderInfo()}\n      </>\n    );\n  }\n\n  const title = lang('$swap_from_to', {\n    from: tokenIn?.symbol,\n    icon: <i className={buildClassName('icon-chevron-right', styles.swapArrowIcon)} aria-hidden />,\n    to: tokenOut?.symbol,\n  }) as TeactNode[];\n\n  return (\n    <>\n      <ModalHeader title={title} onClose={cancelSwap} />\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <AnimatedIconWithPreview\n          play={isActive}\n          noLoop={false}\n          nonInteractive\n          tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n          previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          size={ANIMATED_STICKER_BIG_SIZE_PX}\n        />\n\n        {renderInputAddress()}\n\n        <div className={buildClassName(styles.blockchainButtons, modalStyles.footerButtons)}>\n          <Button onClick={handleCancelClick} className={modalStyles.buttonHalfWidth}>{lang('Close')}</Button>\n          <Button\n            isPrimary\n            isDisabled={!canContinue}\n            className={modalStyles.buttonHalfWidth}\n            onClick={submitPassword}\n          >\n            {lang('Continue')}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapBlockchain);\n","// extracted by mini-css-extract-plugin\nexport default {\"sticker\":\"TY_nyPoa\",\"buttons\":\"JuY14PzG\",\"button\":\"e8xjMuq6\",\"changellyInfoBlock\":\"n91WXWIY\",\"changellyDescription\":\"nOPyXt4f\",\"changellyDescriptionBold\":\"bTumpDcM\",\"changellyTextField\":\"qcMvwyr2\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { Account, UserSwapToken } from '../../global/types';\nimport { SwapType } from '../../global/types';\n\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport { selectCurrentAccount } from '../../global/selectors';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useLang from '../../hooks/useLang';\n\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport SwapTokensInfo from './SwapTokensInfo';\n\nimport styles from './SwapResult.module.scss';\n\ninterface OwnProps {\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  playAnimation?: boolean;\n  firstButtonText?: string;\n  secondButtonText?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onFirstButtonClick?: NoneToVoidFunction;\n  onSecondButtonClick?: NoneToVoidFunction;\n  isFirstButtonDisabled?: boolean;\n}\n\ninterface StateProps {\n  addressByChain?: Account['addressByChain'];\n  isSensitiveDataHidden?: true;\n}\n\nfunction SwapResult({\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  playAnimation,\n  firstButtonText,\n  secondButtonText,\n  swapType,\n  toAddress = '',\n  addressByChain,\n  isSensitiveDataHidden,\n  onFirstButtonClick,\n  onSecondButtonClick,\n  isFirstButtonDisabled,\n}: OwnProps & StateProps) {\n  const lang = useLang();\n\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress, addressByChain,\n  });\n  const isToAddressInCurrentWallet = useMemo(() => {\n    return Boolean(toAddress && Object.values(addressByChain ?? {}).some((address) => address === toAddress));\n  }, [addressByChain, toAddress]);\n\n  function renderButtons() {\n    if (!firstButtonText && !secondButtonText) {\n      return undefined;\n    }\n\n    return (\n      <div className={styles.buttons}>\n        {firstButtonText && (\n          <Button\n            className={styles.button}\n            onClick={onFirstButtonClick}\n            isDisabled={isFirstButtonDisabled}\n          >\n            {firstButtonText}\n          </Button>\n        )}\n        {secondButtonText && (\n          <Button className={styles.button} onClick={onSecondButtonClick}>{secondButtonText}</Button>\n        )}\n      </div>\n    );\n  }\n\n  function renderSticker() {\n    if (swapType === SwapType.CrosschainFromWallet && !isInternalSwap) return undefined;\n\n    return (\n      <AnimatedIconWithPreview\n        play={playAnimation}\n        noLoop={false}\n        nonInteractive\n        className={styles.sticker}\n        tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n        previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n      />\n    );\n  }\n\n  function renderTimeWarning() {\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  function renderChangellyInfo() {\n    if (swapType !== SwapType.CrosschainFromWallet || isToAddressInCurrentWallet) {\n      return undefined;\n    }\n    const chain = getIsSupportedChain(tokenOut?.chain) ? tokenOut.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>\n          {\n            lang('$swap_changelly_from_ton_description', {\n              blockchain: (\n                <span className={styles.changellyDescriptionBold}>\n                  {getChainNetworkName(tokenOut?.chain)}\n                </span>\n              ),\n            })\n          }\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={toAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <>\n      {renderSticker()}\n\n      <SwapTokensInfo\n        isSensitiveDataHidden={isSensitiveDataHidden}\n        tokenIn={tokenIn}\n        amountIn={amountIn}\n        tokenOut={tokenOut}\n        amountOut={amountOut}\n      />\n\n      {swapType !== SwapType.OnChain && renderTimeWarning()}\n      {renderChangellyInfo()}\n\n      {renderButtons()}\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    addressByChain: selectCurrentAccount(global)?.addressByChain,\n    isSensitiveDataHidden: global.settings.isSensitiveDataHidden,\n  };\n})(SwapResult));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { SwapType, UserSwapToken } from '../../global/types';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport SwapResult from '../common/SwapResult';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  swapType?: SwapType;\n  toAddress?: string;\n  onInfoClick: NoneToVoidFunction;\n  onStartSwap: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n  isDetailsDisabled?: boolean;\n}\n\nfunction SwapComplete({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  swapType,\n  toAddress,\n  onInfoClick,\n  onStartSwap,\n  onClose,\n  isDetailsDisabled,\n}: OwnProps) {\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang('Swap Placed')} onClose={onClose} />\n\n      <div className={buildClassName(styles.scrollContent, 'custom-scroll')}>\n        <SwapResult\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n          swapType={swapType}\n          toAddress={toAddress}\n          playAnimation={isActive}\n          firstButtonText={lang('Details')}\n          secondButtonText={lang('Repeat')}\n          onFirstButtonClick={onInfoClick}\n          onSecondButtonClick={onStartSwap}\n          isFirstButtonDisabled={isDetailsDisabled}\n        />\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapComplete);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onBack: NoneToVoidFunction;\n}\n\nfunction SwapPassword({\n  isActive,\n  isLoading,\n  error,\n  children,\n  onSubmit,\n  onBack,\n}: OwnProps) {\n  const { cancelSwap, clearSwapError } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang('Confirm Swap')} onClose={cancelSwap} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={IS_CAPACITOR}\n        error={error}\n        operationType=\"swap\"\n        submitLabel={lang('Send')}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onBack}\n        onUpdate={clearSwapError}\n        skipAuthScreen\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(SwapPassword);\n","import React, { memo, useMemo, useState } from '../../lib/teact/teact';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, UserSwapToken } from '../../global/types';\n\nimport {\n  CHANGELLY_LIVE_CHAT_URL, CHANGELLY_SUPPORT_EMAIL, CHANGELLY_WAITING_DEADLINE,\n} from '../../config';\nimport { getIsInternalSwap, getIsSupportedChain } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport getChainNetworkName from '../../util/swap/getChainNetworkName';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useQrCode from '../../hooks/useQrCode';\n\nimport Countdown from '../common/Countdown';\nimport SwapTokensInfo from '../common/SwapTokensInfo';\nimport Button from '../ui/Button';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  tokenIn?: UserSwapToken;\n  tokenOut?: UserSwapToken;\n  amountIn?: string;\n  amountOut?: string;\n  payinAddress?: string;\n  payoutAddress?: string;\n  payinExtraId?: string;\n  activity?: ApiActivity;\n  addressByChain?: Account['addressByChain'];\n  onClose: NoneToVoidFunction;\n}\n\nfunction SwapWaitTokens({\n  isActive,\n  tokenIn,\n  tokenOut,\n  amountIn,\n  amountOut,\n  payinAddress,\n  payoutAddress,\n  payinExtraId,\n  activity,\n  addressByChain,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const [isExpired, setIsExpired] = useState(false);\n\n  const timestamp = useMemo(() => Date.now(), []);\n\n  const { qrCodeRef, isInitialized } = useQrCode({\n    address: payinAddress,\n    isActive,\n    hiddenClassName: styles.qrCodeHidden,\n    hideLogo: true,\n  });\n\n  const shouldShowQrCode = !payinExtraId;\n  const isInternalSwap = getIsInternalSwap({\n    from: tokenIn, to: tokenOut, toAddress: payoutAddress, addressByChain,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  const handleTimeout = useLastCallback(() => {\n    setIsExpired(true);\n  });\n\n  function renderMemo() {\n    if (!payinExtraId) return undefined;\n\n    return (\n      <div className={styles.textFieldWrapperFullWidth}>\n        <span className={styles.textFieldLabel}>\n          {lang('Memo')}\n        </span>\n        <InteractiveTextField\n          chain=\"ton\"\n          address={payinExtraId}\n          copyNotification={lang('Memo was copied!')}\n          noSavedAddress\n          noExplorer\n          className={styles.changellyTextField}\n        />\n      </div>\n    );\n  }\n\n  function renderInfo() {\n    if (isExpired) {\n      const cexTransactionId = activity && 'cex' in activity ? activity.cex?.transactionId : undefined;\n\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyImportantRed}>\n            {lang('The time for sending coins is over.')}\n          </span>\n          <span className={styles.changellyDescription}>\n            {lang('$swap_changelly_support', {\n              livechat: (\n                <a\n                  href={CHANGELLY_LIVE_CHAT_URL}\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  className={styles.changellyDescriptionBold}\n                >\n                  {lang('Changelly Live Chat')}\n                </a>\n              ),\n              email: (\n                <span className={styles.changellyDescriptionBold}>\n                  {CHANGELLY_SUPPORT_EMAIL}\n                </span>\n              ),\n            })}\n          </span>\n          {cexTransactionId && (\n            <InteractiveTextField\n              text={cexTransactionId}\n              copyNotification={lang('Transaction ID was copied!')}\n              noSavedAddress\n              noExplorer\n              className={styles.changellyTextField}\n            />\n          )}\n        </div>\n      );\n    }\n\n    if (isInternalSwap) {\n      return (\n        <div className={styles.changellyInfoBlock}>\n          <span className={styles.changellyDescription}>\n            {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n          </span>\n        </div>\n      );\n    }\n\n    const chain = getIsSupportedChain(tokenIn?.chain) ? tokenIn.chain : undefined;\n\n    return (\n      <div className={styles.changellyInfoBlock}>\n        <span className={styles.changellyDescription}>{lang('$swap_changelly_to_ton_description1', {\n          value: (\n            <span className={styles.changellyDescriptionBold}>\n              {formatCurrencyExtended(Number(amountIn), tokenIn?.symbol ?? '', true)}\n            </span>\n          ),\n          blockchain: (\n            <span className={styles.changellyDescriptionBold}>\n              {getChainNetworkName(tokenIn?.chain)}\n            </span>\n          ),\n          time: (\n            <Countdown\n              timestamp={timestamp}\n              deadline={CHANGELLY_WAITING_DEADLINE}\n              onCompleted={handleTimeout}\n            />\n          ),\n        })}\n        </span>\n        <InteractiveTextField\n          chain={chain}\n          address={payinAddress}\n          copyNotification={lang('Address was copied!')}\n          noSavedAddress\n          noExplorer\n          noDimming\n          className={styles.changellyTextField}\n        />\n        {renderMemo()}\n        {shouldShowQrCode && (\n          <div className={buildClassName(styles.qrCode, !isInitialized && styles.qrCodeHidden)} ref={qrCodeRef} />\n        )}\n        <span className={styles.changellyDescription}>\n          {lang('Please note that it may take up to a few hours for tokens to appear in your wallet.')}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <ModalHeader\n        title={lang(isExpired ? 'Swap Expired' : (isInternalSwap ? 'Swapping' : 'Waiting for Payment'))}\n        onClose={onClose}\n      />\n\n      <div className={buildClassName(styles.scrollContent, styles.selectBlockchainBlock, 'custom-scroll')}>\n        <SwapTokensInfo\n          tokenIn={tokenIn}\n          amountIn={amountIn}\n          tokenOut={tokenOut}\n          amountOut={amountOut}\n        />\n\n        <Transition\n          name=\"fade\"\n          activeKey={isExpired ? 1 : 0}\n        >\n          {renderInfo()}\n        </Transition>\n\n        <div className={modalStyles.buttons}>\n          <Button isPrimary onClick={onClose}>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(SwapWaitTokens);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiActivity } from '../../api/types';\nimport type { Account, GlobalState, UserSwapToken, UserToken } from '../../global/types';\nimport { SwapState, SwapType } from '../../global/types';\n\nimport {\n  selectCurrentAccount,\n  selectCurrentAccountState,\n  selectSwapTokens,\n  selectSwapType,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\n\nimport TokenSelector from '../common/TokenSelector';\nimport TransactionBanner from '../common/TransactionBanner';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport SwapBlockchain from './SwapBlockchain';\nimport SwapComplete from './SwapComplete';\nimport SwapInitial from './SwapInitial';\nimport SwapPassword from './SwapPassword';\nimport SwapWaitTokens from './SwapWaitTokens';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Swap.module.scss';\n\ninterface StateProps {\n  currentSwap: GlobalState['currentSwap'];\n  swapType: SwapType;\n  swapTokens?: UserSwapToken[];\n  activityById?: Record<string, ApiActivity>;\n  addressByChain?: Account['addressByChain'];\n}\n\nconst FULL_SIZE_NBS_STATES = [SwapState.Password, SwapState.SelectTokenFrom, SwapState.SelectTokenTo];\n\nfunction SwapModal({\n  currentSwap: {\n    state,\n    tokenInSlug,\n    tokenOutSlug,\n    amountIn = '0',\n    amountOut = '0',\n    isLoading,\n    error,\n    activityId,\n    toAddress,\n    payinAddress,\n    payoutAddress,\n    payinExtraId,\n    shouldResetOnClose,\n  },\n  swapType,\n  swapTokens,\n  activityById,\n  addressByChain,\n}: StateProps) {\n  const {\n    startSwap,\n    cancelSwap,\n    setSwapScreen,\n    submitSwap,\n    showActivityInfo,\n    submitSwapCex,\n    addSwapToken,\n    setSwapTokenIn,\n    setSwapTokenOut,\n  } = getActions();\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n\n  const isOpen = state !== SwapState.None;\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  const tokenIn = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenInSlug),\n    [tokenInSlug, swapTokens],\n  );\n\n  const tokenOut = useMemo(\n    () => swapTokens?.find((token) => token.slug === tokenOutSlug),\n    [swapTokens, tokenOutSlug],\n  );\n\n  const [renderedSwapType, setRenderedSwapType] = useState(swapType);\n  const [renderedTransactionAmountIn, setRenderedTransactionAmountIn] = useState(amountIn);\n  const [renderedTransactionAmountOut, setRenderedTransactionAmountOut] = useState(amountOut);\n  const [renderedTransactionTokenIn, setRenderedTransactionTokenIn] = useState(tokenIn);\n  const [renderedTransactionTokenOut, setRenderedTransactionTokenOut] = useState(tokenOut);\n  const [renderedActivity, setRenderedActivity] = useState<ApiActivity | undefined>();\n\n  useEffect(() => {\n    if (!isOpen || !activityId || !activityById?.[activityId]) {\n      setRenderedActivity(undefined);\n      return;\n    }\n\n    const activity = activityById[activityId];\n    setRenderedActivity(activity);\n\n    if (activity.kind === 'swap' && swapType === SwapType.CrosschainToWallet) {\n      const status = activity.cex?.status;\n      if (status === 'exchanging' || status === 'confirming') {\n        setSwapScreen({ state: SwapState.Complete });\n      }\n    }\n  }, [activityById, activityId, isOpen, swapType]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    setRenderedTransactionAmountIn(amountIn);\n    setRenderedTransactionAmountOut(amountOut);\n    setRenderedTransactionTokenIn(tokenIn);\n    setRenderedTransactionTokenOut(tokenOut);\n    setRenderedSwapType(swapType);\n\n    if (swapType === SwapType.OnChain) {\n      submitSwap({ password });\n      return;\n    }\n\n    submitSwapCex({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === SwapState.Password) {\n      if (swapType === SwapType.CrosschainFromWallet) {\n        setSwapScreen({ state: SwapState.Blockchain });\n      } else {\n        setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n      }\n      return;\n    }\n\n    if (state === SwapState.SelectTokenTo || state === SwapState.SelectTokenFrom) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n\n    if (state === SwapState.Blockchain) {\n      setSwapScreen({ state: isPortrait ? SwapState.Initial : SwapState.None });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    if (!activityId) return;\n\n    cancelSwap({ shouldReset: true });\n    showActivityInfo({ id: activityId });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelSwap({ shouldReset: isPortrait || shouldResetOnClose });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelSwap({ shouldReset: true });\n  });\n\n  const handleTokenSelect = useLastCallback((token: UserSwapToken | UserToken) => {\n    addSwapToken({ token: token as UserSwapToken });\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    const setToken = renderingKey === SwapState.SelectTokenTo ? setSwapTokenOut : setSwapTokenIn;\n    setToken({ tokenSlug: token.slug });\n  });\n\n  const handleStartSwap = useLastCallback(() => {\n    startSwap({\n      amountIn: renderedTransactionAmountIn,\n      tokenInSlug: renderedTransactionTokenIn?.slug,\n      tokenOutSlug: renderedTransactionTokenOut?.slug,\n    });\n  });\n\n  function renderSwapShortInfo() {\n    if (!tokenIn || !tokenOut || !amountIn || !amountOut) return undefined;\n\n    return (\n      <TransactionBanner\n        tokenIn={tokenIn}\n        withChainIcon\n        tokenOut={tokenOut}\n        text={formatCurrencyExtended(amountIn, tokenIn.symbol ?? '', true)}\n        secondText={formatCurrencyExtended(amountOut, tokenOut.symbol ?? '', true)}\n        className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n      />\n    );\n  }\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: SwapState) {\n    switch (currentKey) {\n      case SwapState.Initial:\n        return (\n          <>\n            <ModalHeader\n              title={lang('$swap_action')}\n              onClose={cancelSwap}\n            />\n            <SwapInitial isActive={isActive} />\n          </>\n        );\n      case SwapState.Blockchain:\n        return (\n          <SwapBlockchain\n            isActive={isActive}\n            toAddress={toAddress}\n            tokenIn={tokenIn}\n            tokenOut={tokenOut}\n            swapType={swapType}\n          />\n        );\n      case SwapState.WaitTokens:\n        return (\n          <SwapWaitTokens\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            payinAddress={payinAddress}\n            payoutAddress={payoutAddress}\n            payinExtraId={payinExtraId}\n            addressByChain={addressByChain}\n            activity={renderedActivity}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case SwapState.Password:\n        return (\n          <SwapPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onBack={handleBackClick}\n          >\n            {renderSwapShortInfo()}\n          </SwapPassword>\n        );\n      case SwapState.Complete: {\n        return (\n          <SwapComplete\n            isActive={isActive}\n            tokenIn={renderedTransactionTokenIn}\n            tokenOut={renderedTransactionTokenOut}\n            amountIn={renderedTransactionAmountIn}\n            amountOut={renderedTransactionAmountOut}\n            swapType={renderedSwapType}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n            onInfoClick={handleTransactionInfoClick}\n            onStartSwap={handleStartSwap}\n            isDetailsDisabled={!activityId}\n          />\n        );\n      }\n      case SwapState.SelectTokenFrom:\n      case SwapState.SelectTokenTo:\n        return (\n          <TokenSelector\n            isActive={isActive}\n            shouldUseSwapTokens\n            shouldFilter={currentKey === SwapState.SelectTokenTo}\n            onTokenSelect={handleTokenSelect}\n            onBack={handleBackClick}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  const forceFullNative = FULL_SIZE_NBS_STATES.includes(renderingKey)\n    // Crosschain exchanges have additional information that may cause the height of the modal to be insufficient\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n    || (renderingKey === SwapState.Complete && renderedSwapType !== SwapType.OnChain);\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={cancelSwap}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"swap\"\n      forceFullNative={forceFullNative}\n      hasCloseButton\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n  const account = selectCurrentAccount(global);\n  const activityById = accountState?.activities?.byId;\n\n  return {\n    currentSwap: global.currentSwap,\n    swapType: selectSwapType(global),\n    swapTokens: selectSwapTokens(global),\n    activityById,\n    addressByChain: account?.addressByChain,\n  };\n})(SwapModal));\n","import React, { memo, useEffect } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type { ApiNft } from '../../api/types';\n\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport TransferResult from '../common/TransferResult';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport styles from '../common/TransferResult.module.scss';\nimport modalStyles from '../ui/Modal.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  amount?: bigint;\n  symbol: string;\n  txId?: string;\n  tokenSlug: string;\n  toAddress?: string;\n  comment?: string;\n  decimals?: number;\n  nfts?: ApiNft[];\n  onInfoClick: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferComplete({\n  isActive,\n  amount,\n  symbol,\n  txId,\n  tokenSlug,\n  toAddress,\n  comment,\n  decimals,\n  nfts,\n  onInfoClick,\n  onClose,\n}: OwnProps) {\n  const { startTransfer } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isNftTransfer = Boolean(nfts?.length);\n\n  useHistoryBack({\n    isActive,\n    onBack: onClose,\n  });\n\n  useEffect(() => {\n    return isActive\n      ? captureKeyboardListeners({ onEnter: onClose })\n      : undefined;\n  }, [isActive, onClose]);\n\n  const handleTransactionRepeatClick = useLastCallback(() => {\n    startTransfer({\n      isPortrait,\n      tokenSlug,\n      toAddress,\n      amount,\n      comment,\n    });\n  });\n\n  return (\n    <>\n      <ModalHeader title={lang(isNftTransfer ? 'NFT has been sent!' : 'Coins have been sent!')} onClose={onClose} />\n\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? (\n          <>\n            <AnimatedIconWithPreview\n              play={isActive}\n              noLoop={false}\n              nonInteractive\n              className={styles.sticker}\n              tgsUrl={ANIMATED_STICKERS_PATHS.thumbUp}\n              previewUrl={ANIMATED_STICKERS_PATHS.thumbUpPreview}\n            />\n            {nfts.length === 1 ? <NftInfo nft={nfts[0]} /> : <NftChips nfts={nfts} />}\n            {Boolean(txId) && (\n              <div className={buildClassName(styles.buttons, styles.buttonsAfterNft)}>\n                <Button className={styles.button} onClick={onInfoClick}>{lang('Details')}</Button>\n              </div>\n            )}\n          </>\n        ) : (\n          <TransferResult\n            playAnimation={isActive}\n            amount={amount ? -amount : undefined}\n            tokenSymbol={symbol}\n            firstButtonText={txId ? lang('Details') : undefined}\n            secondButtonText={lang('Repeat')}\n            onFirstButtonClick={onInfoClick}\n            onSecondButtonClick={handleTransactionRepeatClick}\n            decimals={decimals}\n          />\n        )}\n\n        <div className={modalStyles.buttons}>\n          <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferComplete);\n","import type { TeactNode } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\nimport { formatCurrencyExtended } from '../../util/formatNumber';\n\nimport useLang from '../../hooks/useLang';\n\nimport styles from './AmountWithFeeTextField.module.scss';\n\ninterface OwnProps {\n  amount: string;\n  label: string;\n  currency?: string;\n  symbol?: string;\n  fractionDigits?: number;\n  feeText?: TeactNode;\n  className?: string;\n  labelClassName?: string;\n}\n\nfunction AmountWithFeeTextField({\n  amount,\n  label,\n  currency = '',\n  symbol,\n  fractionDigits,\n  feeText,\n  className,\n  labelClassName,\n}: OwnProps) {\n  const lang = useLang();\n\n  return (\n    <>\n      <div className={buildClassName(styles.label, labelClassName)}>{label}</div>\n      <div className={buildClassName(styles.root, className)}>\n        {formatCurrencyExtended(amount, currency, true, fractionDigits)}\n        {symbol && <span className={styles.suffix}>{symbol}</span>}\n        {Boolean(feeText) && (\n          <>\n            <div className={styles.feeLabel}>{lang('Fee')}</div>\n            <span className={styles.feeConfirm}>\n              {feeText}\n            </span>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(AmountWithFeeTextField);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ghrNkOZk\",\"suffix\":\"LPchTYAT\",\"label\":\"vEby849g\",\"feeLabel\":\"XPUDvAqg\",\"feeConfirm\":\"SkacqSTU\"};","import React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiToken } from '../../api/types';\nimport type {\n  Account, GlobalState, SavedAddress, UserToken,\n} from '../../global/types';\n\nimport {\n  ANIMATED_STICKER_SMALL_SIZE_PX,\n  BURN_ADDRESS,\n  BURN_CHUNK_DURATION_APPROX_SEC,\n  NFT_BATCH_SIZE,\n  NOTCOIN_EXCHANGERS,\n  STARS_SYMBOL,\n  TONCOIN,\n} from '../../config';\nimport renderText from '../../global/helpers/renderText';\nimport { selectNetworkAccounts } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { toDecimal } from '../../util/decimals';\nimport { explainApiTransferFee } from '../../util/fee/transferFee';\nimport { getLocalAddressName } from '../../util/getLocalAddressName';\nimport { vibrate } from '../../util/haptics';\nimport { getChainBySlug } from '../../util/tokens';\nimport { ANIMATED_STICKERS_PATHS } from '../ui/helpers/animatedAssets';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport AmountWithFeeTextField from '../ui/AmountWithFeeTextField';\nimport AnimatedIconWithPreview from '../ui/AnimatedIconWithPreview';\nimport Button from '../ui/Button';\nimport Fee from '../ui/Fee';\nimport IconWithTooltip from '../ui/IconWithTooltip';\nimport InteractiveTextField from '../ui/InteractiveTextField';\nimport ModalHeader from '../ui/ModalHeader';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  isActive: boolean;\n  savedAddresses?: SavedAddress[];\n  token?: UserToken | ApiToken;\n  onBack: NoneToVoidFunction;\n  onClose: NoneToVoidFunction;\n}\n\ninterface StateProps {\n  currentAccountId: string;\n  currentTransfer: GlobalState['currentTransfer'];\n  accounts?: Record<string, Account>;\n}\n\nfunction TransferConfirm({\n  currentTransfer: {\n    tokenSlug,\n    amount,\n    toAddress,\n    resolvedAddress,\n    fee,\n    realFee,\n    comment,\n    shouldEncrypt,\n    promiseId,\n    isLoading,\n    toAddressName,\n    isToNewAddress,\n    isScam,\n    binPayload,\n    nfts,\n    isGaslessWithStars,\n    diesel,\n    stateInit,\n  },\n  token,\n  currentAccountId,\n  accounts,\n  isActive,\n  savedAddresses,\n  onBack,\n  onClose,\n}: OwnProps & StateProps) {\n  const { submitTransferConfirm } = getActions();\n\n  const lang = useLang();\n\n  const isNftTransfer = Boolean(nfts?.length);\n  if (isNftTransfer) {\n    tokenSlug = TONCOIN.slug;\n  }\n\n  const chain = getChainBySlug(tokenSlug);\n  const localAddressName = useMemo(() => getLocalAddressName({\n    address: toAddress!,\n    chain,\n    currentAccountId,\n    accounts: accounts!,\n    savedAddresses,\n  }), [accounts, chain, currentAccountId, savedAddresses, toAddress]);\n  const addressName = localAddressName || toAddressName;\n  const isBurning = resolvedAddress === BURN_ADDRESS;\n  const isNotcoinBurning = resolvedAddress === NOTCOIN_EXCHANGERS[0];\n  const explainedFee = explainApiTransferFee({\n    fee,\n    realFee,\n    diesel,\n    tokenSlug,\n  });\n\n  useHistoryBack({\n    isActive,\n    onBack,\n  });\n\n  const handleConfirm = useLastCallback(() => {\n    void vibrate();\n    submitTransferConfirm();\n  });\n\n  function renderNfts() {\n    if (nfts!.length === 1) {\n      return <NftInfo nft={nfts![0]} withMediaViewer />;\n    }\n\n    return <NftChips nfts={nfts!} />;\n  }\n\n  function renderAmountWithFee() {\n    if (!explainedFee.realFee || !token) {\n      return undefined;\n    }\n\n    const feeText = (\n      <Fee\n        terms={explainedFee.realFee.terms}\n        precision={explainedFee.realFee.precision}\n        token={token}\n        symbolClassName={styles.currencySymbol}\n      />\n    );\n\n    return isNftTransfer ? (\n      <>\n        <div className={styles.label}>{lang('Fee')}</div>\n        <div className={styles.inputReadOnly}>{feeText}</div>\n      </>\n    ) : (\n      <AmountWithFeeTextField\n        label={lang('Amount')}\n        amount={toDecimal(amount ?? 0n, token?.decimals)}\n        symbol={token?.symbol ?? ''}\n        feeText={feeText}\n        fractionDigits={token?.decimals}\n      />\n    );\n  }\n\n  function renderComment() {\n    if (binPayload || stateInit) {\n      return (\n        <>\n          {binPayload && (\n            <>\n              <div className={styles.label}>{lang('Signing Data')}</div>\n              <InteractiveTextField\n                text={binPayload}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          {stateInit && (\n            <>\n              <div className={styles.label}>{lang('Contract Initialization Data')}</div>\n              <InteractiveTextField\n                text={stateInit}\n                copyNotification={lang('Data was copied!')}\n                className={styles.addressWidget}\n              />\n            </>\n          )}\n\n          <div className={styles.error}>\n            {renderText(lang('$signature_warning'))}\n          </div>\n        </>\n      );\n    }\n\n    if (!comment) {\n      return undefined;\n    }\n\n    return (\n      <>\n        <div className={styles.label}>{shouldEncrypt ? lang('Encrypted Message') : lang('Comment or Memo')}</div>\n        <div className={buildClassName(styles.inputReadOnly, styles.inputReadOnly_words, styles.commentInputWrapper)}>\n          {comment}\n        </div>\n      </>\n    );\n  }\n\n  const burningDurationMin = nfts?.length\n    ? (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60\n    : undefined;\n\n  const submitBtnText = lang(\n    (isBurning || isNotcoinBurning)\n      ? 'Burn NFT'\n      : isGaslessWithStars\n        ? 'Pay fee with %stars_symbol%'\n        : 'Confirm',\n    isGaslessWithStars ? { stars_symbol: STARS_SYMBOL } : undefined,\n  );\n\n  return (\n    <>\n      <ModalHeader title={lang('Is it all ok?')} onClose={onClose} />\n      <div className={modalStyles.transitionContent}>\n        {isNftTransfer ? renderNfts() : (\n          <AnimatedIconWithPreview\n            size={ANIMATED_STICKER_SMALL_SIZE_PX}\n            play={isActive}\n            noLoop={false}\n            nonInteractive\n            className={buildClassName(styles.sticker, styles.sticker_sizeSmall)}\n            tgsUrl={ANIMATED_STICKERS_PATHS.bill}\n            previewUrl={ANIMATED_STICKERS_PATHS.billPreview}\n          />\n        )}\n        <div className={styles.label}>\n          {lang('Receiving Address')}\n          {' '}\n          {isToNewAddress && (\n            <IconWithTooltip\n              emoji=\"\"\n              size=\"small\"\n              message={lang('This address is new and never received transfers before.')}\n              tooltipClassName={styles.warningTooltipContainer}\n            />\n          )}\n        </div>\n        <InteractiveTextField\n          chain={chain}\n          address={resolvedAddress}\n          addressName={addressName}\n          isScam={isScam}\n          copyNotification={lang('Address was copied!')}\n          className={styles.addressWidget}\n        />\n\n        {renderAmountWithFee()}\n        {renderComment()}\n\n        {nfts && (isBurning || (isNotcoinBurning && nfts?.length > 1)) && (\n          <div className={styles.burnWarning}>\n            {(\n              nfts?.length === 1 ? (\n                renderText(lang('Are you sure you want to burn this NFT? It will be lost forever.'))\n              ) : ([\n                renderText(lang('$multi_burn_nft_warning', { amount: nfts.length })),\n                ' ',\n                renderText(lang('$multi_send_nft_warning', { duration: burningDurationMin })),\n              ])\n            )}\n          </div>\n        )}\n\n        <div className={buildClassName(modalStyles.buttons, modalStyles.buttonsInsideContentWithScroll)}>\n          <Button className={modalStyles.button} onClick={promiseId ? onClose : onBack}>\n            {promiseId ? lang('Cancel') : lang('Edit')}\n          </Button>\n          <Button\n            isPrimary\n            isLoading={isLoading}\n            isDestructive={isBurning || isScam}\n            className={modalStyles.button}\n            onClick={handleConfirm}\n          >\n            {submitBtnText}\n          </Button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  return {\n    currentAccountId: global.currentAccountId!,\n    currentTransfer: global.currentTransfer,\n    accounts: selectNetworkAccounts(global),\n  };\n})(TransferConfirm));\n","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiNft } from '../../api/types';\n\nimport {\n  BURN_ADDRESS, BURN_CHUNK_DURATION_APPROX_SEC, NFT_BATCH_SIZE, NOTCOIN_EXCHANGERS,\n} from '../../config';\n\nimport useLang from '../../hooks/useLang';\n\nimport Button from '../ui/Button';\nimport ModalHeader from '../ui/ModalHeader';\nimport Spinner from '../ui/Spinner';\nimport NftChips from './NftChips';\nimport NftInfo from './NftInfo';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface OwnProps {\n  nfts: ApiNft[];\n  sentNftsCount?: number;\n  toAddress?: string;\n  onClose: NoneToVoidFunction;\n}\n\nfunction TransferMultiNftProcess({\n  nfts,\n  sentNftsCount = 0,\n  toAddress,\n  onClose,\n}: OwnProps) {\n  const lang = useLang();\n\n  const isInProgress = sentNftsCount < nfts.length;\n  const isBurning = toAddress === BURN_ADDRESS;\n  const isNotcoinBurning = toAddress === NOTCOIN_EXCHANGERS[0];\n\n  const title = isInProgress ? lang(\n    `${(isBurning || isNotcoinBurning) ? 'Burning' : 'Sending'}: %n% of %m% NFTs...`,\n    { n: sentNftsCount, m: nfts.length },\n  ) : lang('Sent');\n  const duration = (Math.ceil(nfts.length / NFT_BATCH_SIZE) * BURN_CHUNK_DURATION_APPROX_SEC) / 60;\n\n  return (\n    <>\n      <ModalHeader title={title} />\n\n      <div className={modalStyles.transitionContent}>\n        {isInProgress && (\n          <>\n            <Spinner className={styles.spinner} />\n            <div className={styles.infoBox}>{lang('$multi_send_nft_warning', { duration })}</div>\n          </>\n        )}\n        {nfts.length === 1 ? <NftInfo nft={nfts[0]} /> : <NftChips nfts={nfts} />}\n        {!isInProgress && (\n          <div className={modalStyles.buttons}>\n            <Button onClick={onClose} isPrimary>{lang('Close')}</Button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default memo(TransferMultiNftProcess);\n","import React, { memo, type TeactNode } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport { STARS_SYMBOL } from '../../config';\nimport { getDoesUsePinPad } from '../../util/biometrics';\n\nimport useHistoryBack from '../../hooks/useHistoryBack';\nimport useLang from '../../hooks/useLang';\n\nimport ModalHeader from '../ui/ModalHeader';\nimport PasswordForm from '../ui/PasswordForm';\n\ninterface OwnProps {\n  isActive: boolean;\n  isLoading?: boolean;\n  isBurning?: boolean;\n  error?: string;\n  children?: TeactNode;\n  onSubmit: (password: string) => void;\n  onCancel: NoneToVoidFunction;\n  isGaslessWithStars?: boolean;\n}\n\nfunction TransferPassword({\n  isActive, isLoading, isBurning, error, children, onSubmit, onCancel, isGaslessWithStars,\n}: OwnProps) {\n  const {\n    cancelTransfer,\n    clearTransferError,\n  } = getActions();\n\n  const lang = useLang();\n\n  useHistoryBack({\n    isActive,\n    onBack: onCancel,\n  });\n\n  const title = isBurning ? 'Confirm Burning' : 'Confirm Sending';\n  const submitLabel = isGaslessWithStars\n    ? lang('Pay fee with %stars_symbol%', { stars_symbol: STARS_SYMBOL })\n    : lang('Send');\n\n  return (\n    <>\n      {!getDoesUsePinPad() && <ModalHeader title={lang(title)} onClose={cancelTransfer} />}\n      <PasswordForm\n        isActive={isActive}\n        isLoading={isLoading}\n        withCloseButton={Boolean(children)}\n        operationType=\"transfer\"\n        error={error}\n        submitLabel={submitLabel}\n        cancelLabel={lang('Back')}\n        onSubmit={onSubmit}\n        onCancel={onCancel}\n        onUpdate={clearTransferError}\n      >\n        {children}\n      </PasswordForm>\n    </>\n  );\n}\n\nexport default memo(TransferPassword);\n","import React, {\n  memo, useEffect, useMemo,\n} from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { GlobalState, SavedAddress, UserToken } from '../../global/types';\nimport { TransferState } from '../../global/types';\n\nimport { BURN_ADDRESS, NFT_BATCH_SIZE } from '../../config';\nimport {\n  selectCurrentAccountState,\n  selectCurrentAccountTokens,\n  selectIsMultichainAccount,\n} from '../../global/selectors';\nimport { getDoesUsePinPad } from '../../util/biometrics';\nimport buildClassName from '../../util/buildClassName';\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport { toDecimal } from '../../util/decimals';\nimport { formatCurrency } from '../../util/formatNumber';\nimport resolveSlideTransitionName from '../../util/resolveSlideTransitionName';\nimport { shortenAddress } from '../../util/shortenAddress';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useLang from '../../hooks/useLang';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useModalTransitionKeys from '../../hooks/useModalTransitionKeys';\nimport usePrevious from '../../hooks/usePrevious';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport TransactionBanner from '../common/TransactionBanner';\nimport LedgerConfirmOperation from '../ledger/LedgerConfirmOperation';\nimport LedgerConnect from '../ledger/LedgerConnect';\nimport Modal from '../ui/Modal';\nimport ModalHeader from '../ui/ModalHeader';\nimport Transition from '../ui/Transition';\nimport TransferComplete from './TransferComplete';\nimport TransferConfirm from './TransferConfirm';\nimport TransferInitial from './TransferInitial';\nimport TransferMultiNftProcess from './TransferMultiNftProcess';\nimport TransferPassword from './TransferPassword';\n\nimport modalStyles from '../ui/Modal.module.scss';\nimport styles from './Transfer.module.scss';\n\ninterface StateProps {\n  currentTransfer: GlobalState['currentTransfer'];\n  tokens?: UserToken[];\n  savedAddresses?: SavedAddress[];\n  isMediaViewerOpen?: boolean;\n  isMultichainAccount: boolean;\n}\n\nconst SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS = 762; // Computed empirically\n\nfunction TransferModal({\n  currentTransfer: {\n    state,\n    amount,\n    toAddress,\n    comment,\n    error,\n    isLoading,\n    txId,\n    tokenSlug,\n    nfts,\n    sentNftsCount,\n    diesel,\n  },\n  tokens,\n  savedAddresses,\n  isMediaViewerOpen,\n  isMultichainAccount,\n}: StateProps) {\n  const {\n    submitTransferConfirm,\n    submitTransferPassword,\n    submitTransferHardware,\n    setTransferScreen,\n    cancelTransfer,\n    showActivityInfo,\n  } = getActions();\n\n  const lang = useLang();\n  const { isPortrait } = useDeviceScreen();\n  const isOpen = state !== TransferState.None;\n\n  const { screenHeight } = useWindowSize();\n  const selectedToken = useMemo(() => tokens?.find((token) => token.slug === tokenSlug), [tokenSlug, tokens]);\n  const decimals = selectedToken?.decimals;\n  const renderedTransactionAmount = usePrevious(amount, true);\n  const symbol = selectedToken?.symbol || '';\n  const isNftTransfer = Boolean(nfts?.length);\n  const isBurning = toAddress === BURN_ADDRESS;\n\n  const { renderingKey, nextKey, updateNextKey } = useModalTransitionKeys(state, isOpen);\n\n  useEffect(() => (\n    state === TransferState.Confirm\n      ? captureKeyboardListeners({ onEnter: () => submitTransferConfirm() })\n      : undefined\n  ), [state, submitTransferConfirm]);\n\n  const handleTransferSubmit = useLastCallback((password: string) => {\n    submitTransferPassword({ password });\n  });\n\n  const handleBackClick = useLastCallback(() => {\n    if (state === TransferState.Confirm) {\n      setTransferScreen({ state: TransferState.Initial });\n    }\n    if (state === TransferState.Password) {\n      setTransferScreen({ state: TransferState.Confirm });\n    }\n  });\n\n  const handleTransactionInfoClick = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n    showActivityInfo({ id: txId! });\n  });\n\n  const handleModalClose = useLastCallback(() => {\n    cancelTransfer({ shouldReset: isPortrait });\n    updateNextKey();\n  });\n\n  const handleModalCloseWithReset = useLastCallback(() => {\n    cancelTransfer({ shouldReset: true });\n  });\n\n  const handleLedgerConnect = useLastCallback(() => {\n    submitTransferHardware();\n  });\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: TransferState) {\n    switch (currentKey) {\n      case TransferState.Initial:\n        return (\n          <>\n            <ModalHeader title={lang(isNftTransfer ? 'Send NFT' : 'Send')} onClose={handleModalCloseWithReset} />\n            <TransferInitial />\n          </>\n        );\n      case TransferState.Confirm:\n        return (\n          <TransferConfirm\n            isActive={isActive}\n            token={selectedToken}\n            savedAddresses={savedAddresses}\n            onBack={isPortrait ? handleBackClick : handleModalClose}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.Password:\n        return (\n          <TransferPassword\n            isActive={isActive}\n            isLoading={isLoading}\n            isBurning={isBurning}\n            error={error}\n            onSubmit={handleTransferSubmit}\n            onCancel={handleModalCloseWithReset}\n            isGaslessWithStars={diesel?.status === 'stars-fee'}\n          >\n            <TransactionBanner\n              tokenIn={selectedToken}\n              imageUrl={nfts?.[0]?.thumbnail}\n              withChainIcon={isMultichainAccount}\n              text={isNftTransfer\n                ? (nfts.length > 1 ? lang('%amount% NFTs', { amount: nfts.length }) : nfts[0]?.name || 'NFT')\n                : formatCurrency(toDecimal(amount!, decimals), symbol)}\n              className={!getDoesUsePinPad() ? styles.transactionBanner : undefined}\n              secondText={shortenAddress(toAddress!)}\n            />\n          </TransferPassword>\n        );\n      case TransferState.ConnectHardware:\n        return (\n          <LedgerConnect\n            isActive={isActive}\n            onConnected={handleLedgerConnect}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n      case TransferState.ConfirmHardware:\n        return (\n          <LedgerConfirmOperation\n            text={lang('Please confirm transaction on your Ledger')}\n            error={error}\n            onClose={handleModalCloseWithReset}\n            onTryAgain={submitTransferHardware}\n          />\n        );\n      case TransferState.Complete:\n        return (nfts?.length || 0) <= NFT_BATCH_SIZE ? (\n          <TransferComplete\n            isActive={isActive}\n            nfts={nfts}\n            amount={renderedTransactionAmount}\n            symbol={symbol}\n            txId={txId}\n            tokenSlug={tokenSlug}\n            toAddress={toAddress}\n            comment={comment}\n            onInfoClick={handleTransactionInfoClick}\n            onClose={handleModalCloseWithReset}\n            decimals={decimals}\n          />\n        ) : (\n          <TransferMultiNftProcess\n            nfts={nfts!}\n            sentNftsCount={sentNftsCount}\n            toAddress={toAddress}\n            onClose={handleModalCloseWithReset}\n          />\n        );\n    }\n  }\n\n  return (\n    <Modal\n      isOpen={isOpen && !isMediaViewerOpen}\n      noBackdropClose\n      dialogClassName={styles.modalDialog}\n      nativeBottomSheetKey=\"transfer\"\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-enum-comparison\n      forceFullNative={screenHeight <= SCREEN_HEIGHT_FOR_FORCE_FULLSIZE_NBS || renderingKey === TransferState.Password}\n      onClose={handleModalCloseWithReset}\n      onCloseAnimationEnd={handleModalClose}\n    >\n      <Transition\n        name={resolveSlideTransitionName()}\n        className={buildClassName(modalStyles.transition, 'custom-scroll')}\n        slideClassName={modalStyles.transitionSlide}\n        activeKey={renderingKey}\n        nextKey={nextKey}\n        onStop={updateNextKey}\n      >\n        {renderContent}\n      </Transition>\n    </Modal>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  const accountState = selectCurrentAccountState(global);\n\n  return {\n    currentTransfer: global.currentTransfer,\n    tokens: selectCurrentAccountTokens(global),\n    savedAddresses: accountState?.savedAddresses,\n    isMediaViewerOpen: Boolean(global.mediaViewer.mediaId),\n    isMultichainAccount: selectIsMultichainAccount(global, global.currentAccountId!),\n  };\n})(TransferModal));\n","import React, { memo, useRef } from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport { requestMeasure } from '../../lib/fasterdom/fasterdom';\n\nimport { useDeviceScreen } from '../../hooks/useDeviceScreen';\nimport useForceUpdate from '../../hooks/useForceUpdate';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useSyncEffect from '../../hooks/useSyncEffect';\nimport useWindowSize from '../../hooks/useWindowSize';\n\nimport styles from './ConfettiContainer.module.scss';\n\ntype StateProps = {\n  lastRequestedAt?: number;\n};\n\ninterface Confetti {\n  pos: {\n    x: number;\n    y: number;\n  };\n  velocity: {\n    x: number;\n    y: number;\n  };\n  size: number;\n  color: string;\n  flicker: number;\n  flickerFrequency: number;\n  rotation: number;\n  lastDrawnAt: number;\n  frameCount: number;\n}\n\nconst CONFETTI_FADEOUT_TIMEOUT = 10000;\nconst DEFAULT_CONFETTI_SIZE = 10;\nconst CONFETTI_COLORS = ['#E8BC2C', '#D0049E', '#02CBFE', '#5723FD', '#FE8C27', '#6CB859'];\n\nfunction ConfettiContainer({ lastRequestedAt }: StateProps) {\n  const canvasRef = useRef<HTMLCanvasElement>();\n  const confettiRef = useRef<Confetti[]>([]);\n  const isRafStartedRef = useRef(false);\n  const windowSize = useWindowSize();\n  const forceUpdate = useForceUpdate();\n  const { isPortrait } = useDeviceScreen();\n\n  const defaultConfettiAmount = isPortrait ? 50 : 100;\n\n  const invokeGenerateConfetti = useLastCallback((w: number, h: number) => {\n    generateConfetti(confettiRef, w, h, defaultConfettiAmount);\n  });\n\n  const updateCanvas = useLastCallback(() => {\n    if (!canvasRef.current || !isRafStartedRef.current) {\n      return;\n    }\n    const canvas = canvasRef.current;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      return;\n    }\n\n    const { width: canvasWidth, height: canvasHeight } = canvas;\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    const confettiToRemove = new Set<Confetti>([]);\n    confettiRef.current.forEach((c, i) => {\n      const {\n        pos,\n        velocity,\n        size,\n        color,\n        flicker,\n        flickerFrequency,\n        rotation,\n        lastDrawnAt,\n        frameCount,\n      } = c;\n      const diff = (Date.now() - lastDrawnAt) / 1000;\n\n      const newPos = {\n        x: pos.x + velocity.x * diff,\n        y: pos.y + velocity.y * diff,\n      };\n\n      const newVelocity = {\n        x: velocity.x * 0.98, // Air Resistance\n        y: velocity.y += diff * 1000, // Gravity\n      };\n\n      const newFlicker = size * Math.abs(Math.sin(frameCount * flickerFrequency));\n      const newRotation = 5 * frameCount * flickerFrequency * (Math.PI / 180);\n\n      const newFrameCount = frameCount + 1;\n      const newLastDrawnAt = Date.now();\n\n      const shouldRemove = newPos.y > canvasHeight + c.size;\n      if (shouldRemove) {\n        confettiToRemove.add(c);\n        return;\n      }\n\n      confettiRef.current[i] = {\n        ...c,\n        pos: newPos,\n        velocity: newVelocity,\n        flicker: newFlicker,\n        rotation: newRotation,\n        lastDrawnAt: newLastDrawnAt,\n        frameCount: newFrameCount,\n      };\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.ellipse(\n        pos.x,\n        pos.y,\n        size,\n        flicker,\n        rotation,\n        0,\n        2 * Math.PI,\n      );\n      ctx.fill();\n    });\n\n    confettiRef.current = confettiRef.current.filter((c) => !confettiToRemove.has(c));\n    if (confettiRef.current.length) {\n      requestMeasure(updateCanvas);\n    } else {\n      isRafStartedRef.current = false;\n    }\n  });\n\n  useSyncEffect(([prevConfettiTime]) => {\n    let hideTimeout: number;\n    if (lastRequestedAt && prevConfettiTime !== lastRequestedAt) {\n      invokeGenerateConfetti(windowSize.width, windowSize.height);\n      hideTimeout = window.setTimeout(forceUpdate, CONFETTI_FADEOUT_TIMEOUT);\n\n      if (!isRafStartedRef.current) {\n        isRafStartedRef.current = true;\n        requestMeasure(updateCanvas);\n      }\n    }\n\n    return () => {\n      window.clearTimeout(hideTimeout);\n    };\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps -- Old timeout should be cleared only if new confetti is generated\n  }, [lastRequestedAt, forceUpdate, updateCanvas]);\n\n  if (!lastRequestedAt || Date.now() - lastRequestedAt > CONFETTI_FADEOUT_TIMEOUT) {\n    return undefined;\n  }\n  return (\n    <div id=\"Confetti\" className={styles.root}>\n      <canvas ref={canvasRef} width={windowSize.width} height={windowSize.height} />\n    </div>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    lastRequestedAt: global.confettiRequestedAt,\n  };\n})(ConfettiContainer));\n\nfunction generateConfetti(confettiRef: { current: Confetti[] }, width: number, height: number, amount: number) {\n  for (let i = 0; i < amount; i++) {\n    const leftSide = i % 2;\n    const pos = {\n      x: width * (leftSide ? -0.1 : 1.1),\n      y: height * 0.75,\n    };\n    const randomX = Math.random() * width * 1.5;\n    const randomY = -height / 2 - Math.random() * height;\n    const velocity = {\n      x: leftSide ? randomX : randomX * -1,\n      y: randomY,\n    };\n\n    const randomColor = CONFETTI_COLORS[Math.floor(Math.random() * CONFETTI_COLORS.length)];\n    const size = DEFAULT_CONFETTI_SIZE;\n    confettiRef.current.push({\n      pos,\n      size,\n      color: randomColor,\n      velocity,\n      flicker: size,\n      flickerFrequency: Math.random() * 0.2,\n      rotation: 0,\n      lastDrawnAt: Date.now(),\n      frameCount: 0,\n    });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"NEu40vNs\"};","import React, { memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport { TransferState } from '../../global/types';\n\nimport useShowTransition from '../../hooks/useShowTransition';\n\nimport Portal from './Portal';\nimport Spinner from './Spinner';\n\nimport styles from './LoadingOverlay.module.scss';\n\ntype StateProps = {\n  isOpen?: boolean;\n};\n\nfunction LoadingOverlay({ isOpen }: StateProps) {\n  const { closeLoadingOverlay } = getActions();\n\n  const { shouldRender, ref } = useShowTransition({\n    isOpen,\n    withShouldRender: true,\n  });\n\n  if (!shouldRender) return undefined;\n\n  return (\n    <Portal>\n      <div ref={ref} className={styles.root} onClick={() => closeLoadingOverlay()}>\n        <Spinner color=\"white\" />\n      </div>\n    </Portal>\n  );\n}\n\nexport default memo(withGlobal(\n  (global) => {\n    const isDpppModalOpen = (\n      global.dappConnectRequest?.state !== undefined || global.currentDappTransfer.state !== TransferState.None\n    );\n\n    return {\n      isOpen: global.isLoadingOverlayOpen && !isDpppModalOpen,\n    };\n  },\n)(LoadingOverlay));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"JqqCZr7K\"};","// extracted by mini-css-extract-plugin\nexport default {\"containerInner\":\"_8bq050R\",\"appSlide\":\"xYgMXl3B\",\"appSlide_fastTransition\":\"cumlVCAy\",\"appSlideFastTransition\":\"cumlVCAy\",\"appSlideTransparent\":\"ZZvRsvlT\",\"appSlideContent\":\"BY5oYr5T\",\"transitionContainer\":\"XDsN0suQ\",\"loading\":\"VPmyx3Yj\"};","import React, { memo, useEffect, useLayoutEffect } from '../lib/teact/teact';\nimport { getActions, withGlobal } from '../global';\n\nimport type { Theme } from '../global/types';\nimport { AppState } from '../global/types';\n\nimport {\n  APP_NAME,\n  INACTIVE_MARKER,\n  IS_ANDROID_DIRECT,\n  IS_CAPACITOR,\n  IS_CORE_WALLET,\n} from '../config';\nimport { selectCurrentAccountSettings } from '../global/selectors';\nimport { useAccentColor } from '../util/accentColor';\nimport { setActiveTabChangeListener } from '../util/activeTabMonitor';\nimport buildClassName from '../util/buildClassName';\nimport { MINUTE } from '../util/dateFormat';\nimport { closeThisTab } from '../util/ledger/tab';\nimport { resolveRender } from '../util/renderPromise';\nimport {\n  IS_ANDROID, IS_DELEGATED_BOTTOM_SHEET, IS_ELECTRON, IS_IOS, IS_LEDGER_EXTENSION_TAB, IS_LINUX,\n} from '../util/windowEnvironment';\nimport { updateSizes } from '../util/windowSize';\nimport { callApi } from '../api';\nimport IFrameBrowser from './ui/IFrameBrowser';\n\nimport { useAppIntersectionObserver } from '../hooks/useAppIntersectionObserver';\nimport useAppTheme from '../hooks/useAppTheme';\nimport useBackgroundMode from '../hooks/useBackgroundMode';\nimport { useDeviceScreen } from '../hooks/useDeviceScreen';\nimport useFlag from '../hooks/useFlag';\nimport useInterval from '../hooks/useInterval';\nimport useSyncEffect from '../hooks/useSyncEffect';\nimport useTimeout from '../hooks/useTimeout';\n\nimport AppInactive from './AppInactive';\nimport AppLocked from './appLocked/AppLocked';\nimport Auth from './auth/Auth';\nimport AuthImportWalletModal from './auth/AuthImportWalletModal';\nimport DappConnectModal from './dapps/DappConnectModal';\nimport DappSignDataModal from './dapps/DappSignDataModal';\nimport DappTransferModal from './dapps/DappTransferModal';\nimport Dialogs from './Dialogs';\nimport ElectronHeader from './electron/ElectronHeader';\nimport Explore from './explore/Explore';\nimport LedgerModal from './ledger/LedgerModal';\nimport Main from './main/Main';\nimport AddAccountModal from './main/modals/AddAccountModal';\nimport BackupModal from './main/modals/BackupModal';\nimport NftAttributesModal from './main/modals/NftAttributesModal';\nimport OnRampWidgetModal from './main/modals/OnRampWidgetModal';\nimport QrScannerModal from './main/modals/QrScannerModal';\nimport SignatureModal from './main/modals/SignatureModal';\nimport SwapActivityModal from './main/modals/SwapActivityModal';\nimport TransactionModal from './main/modals/TransactionModal';\nimport UnhideNftModal from './main/modals/UnhideNftModal';\nimport Notifications from './main/Notifications';\nimport BottomBar from './main/sections/Actions/BottomBar';\nimport MediaViewer from './mediaViewer/MediaViewer';\nimport MintCardModal from './mintCard/MintCardModal';\nimport Settings from './settings/Settings';\nimport SettingsModal from './settings/SettingsModal';\nimport SwapModal from './swap/SwapModal';\nimport TransferModal from './transfer/TransferModal';\nimport ConfettiContainer from './ui/ConfettiContainer';\nimport InAppBrowser from './ui/InAppBrowser';\nimport LoadingOverlay from './ui/LoadingOverlay';\nimport Transition from './ui/Transition';\n\n// import Test from './components/test/TestNoRedundancy';\nimport styles from './App.module.scss';\n\ninterface StateProps {\n  appState: AppState;\n  accountId?: string;\n  isBackupWalletModalOpen?: boolean;\n  isQrScannerOpen?: boolean;\n  isHardwareModalOpen?: boolean;\n  isExploreOpen?: boolean;\n  isFullscreen: boolean;\n  areSettingsOpen?: boolean;\n  theme: Theme;\n  accentColorIndex?: number;\n}\n\nconst APP_STATES_WITH_BOTTOM_BAR = new Set([AppState.Main, AppState.Settings, AppState.Explore]);\nconst APP_UPDATE_INTERVAL = (IS_ELECTRON && !IS_LINUX) || IS_ANDROID_DIRECT\n  ? 5 * MINUTE\n  : undefined;\nconst PRERENDER_MAIN_DELAY = 1200;\nlet mainKey = 0;\n\nconst APP_STATE_RENDER_COUNT = Object.keys(AppState).length / 2;\n\nfunction App({\n  appState,\n  accountId,\n  isBackupWalletModalOpen,\n  isHardwareModalOpen,\n  isQrScannerOpen,\n  isExploreOpen,\n  isFullscreen,\n  areSettingsOpen,\n  theme,\n  accentColorIndex,\n}: StateProps) {\n  const {\n    closeBackupWalletModal,\n    closeHardwareWalletModal,\n    closeSettings,\n    cancelCaching,\n    closeQrScanner,\n    checkAppVersion,\n  } = getActions();\n\n  const { isPortrait } = useDeviceScreen();\n  const areSettingsInModal = !isPortrait;\n\n  const [isInactive, markInactive] = useFlag(false);\n  const [canPrerenderMain, prerenderMain] = useFlag();\n\n  const renderingKey = isInactive\n    ? AppState.Inactive\n    : areSettingsOpen && !areSettingsInModal\n      ? AppState.Settings\n      : isExploreOpen && isPortrait\n        ? AppState.Explore : appState;\n  const withBottomBar = isPortrait && APP_STATES_WITH_BOTTOM_BAR.has(renderingKey);\n  const transitionName = withBottomBar\n    ? 'semiFade'\n    : isPortrait\n      ? (IS_ANDROID ? 'slideFadeAndroid' : IS_IOS ? 'slideLayers' : 'slideFade')\n      : 'semiFade';\n\n  useTimeout(\n    prerenderMain,\n    renderingKey === AppState.Auth && !canPrerenderMain ? PRERENDER_MAIN_DELAY : undefined,\n  );\n\n  useInterval(checkAppVersion, IS_CORE_WALLET ? undefined : APP_UPDATE_INTERVAL);\n\n  useEffect(() => {\n    document.documentElement.classList.toggle('with-bottombar', withBottomBar);\n  }, [withBottomBar]);\n\n  useEffect(() => {\n    updateSizes();\n    setActiveTabChangeListener(() => {\n      document.title = `${APP_NAME} ${INACTIVE_MARKER}`;\n\n      markInactive();\n      closeSettings();\n      cancelCaching();\n    });\n  }, [markInactive]);\n\n  useBackgroundMode(() => {\n    void callApi('setIsAppFocused', false);\n  }, () => {\n    void callApi('setIsAppFocused', true);\n  }, IS_LEDGER_EXTENSION_TAB);\n\n  useLayoutEffect(() => {\n    document.documentElement.classList.add('is-rendered');\n    resolveRender();\n  }, []);\n  useLayoutEffect(() => {\n    document.documentElement.classList.toggle('is-fullscreen', isFullscreen);\n    requestAnimationFrame(updateSizes);\n  }, [isFullscreen]);\n\n  useSyncEffect(() => {\n    if (accountId) {\n      mainKey += 1;\n    }\n  }, [accountId]);\n\n  const appTheme = useAppTheme(theme);\n  useAccentColor('body', appTheme, accentColorIndex);\n\n  useAppIntersectionObserver();\n\n  function renderContent(isActive: boolean, isFrom: boolean, currentKey: AppState) {\n    switch (currentKey) {\n      case AppState.Auth:\n        return <Auth />;\n      case AppState.Main: {\n        const slideFullClassName = buildClassName(\n          styles.appSlide,\n          styles.appSlideContent,\n          'custom-scroll',\n          'app-slide-content',\n        );\n        return (\n          <Transition\n            name=\"semiFade\"\n            activeKey={mainKey}\n            shouldCleanup\n            nextKey={renderingKey === AppState.Auth && canPrerenderMain ? mainKey + 1 : undefined}\n            slideClassName={slideFullClassName}\n          >\n            <Main\n              key={mainKey}\n              isActive={isActive}\n            />\n          </Transition>\n        );\n      }\n      case AppState.Explore:\n        return <Explore isActive={isActive} />;\n      case AppState.Settings:\n        return <Settings isActive={isActive} />;\n      case AppState.Ledger:\n        return <LedgerModal isOpen noBackdropClose onClose={closeThisTab} />;\n      case AppState.Inactive:\n        return <AppInactive />;\n    }\n  }\n\n  return (\n    <>\n      {IS_ELECTRON && !IS_LINUX && <ElectronHeader withTitle />}\n\n      <Transition\n        name={transitionName}\n        activeKey={renderingKey}\n        renderCount={APP_STATE_RENDER_COUNT}\n        shouldCleanup={!withBottomBar}\n        className={styles.transitionContainer}\n        slideClassName={\n          buildClassName(styles.appSlide, withBottomBar && styles.appSlide_fastTransition, 'custom-scroll')\n        }\n      >\n        {renderContent}\n      </Transition>\n\n      {areSettingsInModal && (\n        <SettingsModal\n          isOpen={areSettingsOpen}\n          onClose={closeSettings}\n        >\n          <Settings isActive={!!areSettingsOpen} isInsideModal />\n        </SettingsModal>\n      )}\n      <AppLocked />\n      <MediaViewer />\n      {!isInactive && (\n        <>\n          <AuthImportWalletModal />\n          <LedgerModal isOpen={isHardwareModalOpen} onClose={closeHardwareWalletModal} />\n          <BackupModal\n            isOpen={isBackupWalletModalOpen}\n            onClose={closeBackupWalletModal}\n          />\n          <TransferModal />\n          {!IS_CORE_WALLET && (\n            <>\n              <SwapModal />\n              <MintCardModal />\n            </>\n          )}\n          <SignatureModal />\n          <TransactionModal />\n          <SwapActivityModal />\n          <DappConnectModal />\n          <DappSignDataModal />\n          <DappTransferModal />\n          <AddAccountModal />\n          <OnRampWidgetModal />\n          <UnhideNftModal />\n          <NftAttributesModal />\n          {IS_CAPACITOR && (\n            <QrScannerModal\n              isOpen={isQrScannerOpen}\n              onClose={closeQrScanner}\n            />\n          )}\n          {!IS_DELEGATED_BOTTOM_SHEET && (\n            <>\n              <Notifications />\n              <Dialogs />\n              <ConfettiContainer />\n              {IS_CAPACITOR ? <InAppBrowser /> : <IFrameBrowser />}\n              <LoadingOverlay />\n            </>\n          )}\n        </>\n      )}\n      {withBottomBar && <BottomBar />}\n    </>\n  );\n}\n\nexport default memo(withGlobal((global): StateProps => {\n  return {\n    appState: global.appState,\n    accountId: global.currentAccountId,\n    isBackupWalletModalOpen: global.isBackupWalletModalOpen,\n    isHardwareModalOpen: global.isHardwareModalOpen,\n    isExploreOpen: global.isExploreOpen,\n    areSettingsOpen: global.areSettingsOpen,\n    isQrScannerOpen: global.isQrScannerOpen,\n    isFullscreen: Boolean(global.isFullscreen),\n    theme: global.settings.theme,\n    accentColorIndex: selectCurrentAccountSettings(global)?.accentColorIndex,\n  };\n})(App));\n","import { ElectronEvent } from '../electron/types';\n\nimport { processDeeplink } from './deeplink';\n\nexport function initElectron() {\n  window.electron?.on(ElectronEvent.DEEPLINK, ({ url }: { url: string }) => {\n    void processDeeplink(url);\n  });\n}\n","import './global/actions';\nimport './global/init';\nimport './util/handleError';\nimport './util/bigintPatch';\n\nimport React from './lib/teact/teact';\nimport TeactDOM from './lib/teact/teact-dom';\nimport { getActions, getGlobal } from './global';\n\nimport {\n  DEBUG, IS_CAPACITOR, IS_TELEGRAM_APP, STRICTERDOM_ENABLED,\n} from './config';\nimport { requestMutation } from './lib/fasterdom/fasterdom';\nimport { enableStrict } from './lib/fasterdom/stricterdom';\nimport { betterView } from './util/betterView';\nimport { fixIosAppStorage, initCapacitor, processCapacitorLaunchDeeplink } from './util/capacitor';\nimport { initElectron } from './util/electron';\nimport { initFocusScrollController } from './util/focusScroll';\nimport { forceLoadFonts } from './util/fonts';\nimport { logDebug, logSelfXssWarnings } from './util/logs';\nimport { initMultitab } from './util/multitab';\nimport { initTelegramApp } from './util/telegram';\nimport {\n  IS_DELEGATED_BOTTOM_SHEET, IS_DELEGATING_BOTTOM_SHEET, IS_ELECTRON, IS_IOS_APP, IS_LEDGER_EXTENSION_TAB,\n} from './util/windowEnvironment';\n\nimport App from './components/App';\n\nimport './styles/index.scss';\n\nif (DEBUG) {\n  // eslint-disable-next-line no-console\n  console.log('>>> INIT');\n}\n\nif (STRICTERDOM_ENABLED) {\n  enableStrict();\n}\n\nif (IS_CAPACITOR) {\n  void initCapacitor();\n}\n\nif (IS_ELECTRON) {\n  void initElectron();\n}\n\nif (IS_TELEGRAM_APP) {\n  void initTelegramApp();\n}\n\nif (IS_DELEGATING_BOTTOM_SHEET) {\n  initMultitab({ noPubGlobal: true });\n} else if (IS_DELEGATED_BOTTOM_SHEET) {\n  initMultitab();\n}\n\ninitFocusScrollController();\n\nvoid (async () => {\n  if (IS_IOS_APP) {\n    await fixIosAppStorage();\n  }\n\n  await window.electron?.restoreStorage();\n\n  getActions().init();\n\n  // Connecting to the API from remote tabs creates excessive polling in the API.\n  // The remote tab doesn't need the API anyway.\n  if (!IS_LEDGER_EXTENSION_TAB) {\n    getActions().initApi();\n  } else {\n    logDebug('API was not initialized because it was connected from a detached tab');\n  }\n\n  if (IS_CAPACITOR) {\n    await processCapacitorLaunchDeeplink();\n  }\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> START INITIAL RENDER');\n  }\n\n  requestMutation(() => {\n    TeactDOM.render(\n      <App />,\n      document.getElementById('root')!,\n    );\n\n    forceLoadFonts();\n    betterView();\n  });\n\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log('>>> FINISH INITIAL RENDER');\n  }\n\n  document.addEventListener('dblclick', () => {\n    // eslint-disable-next-line no-console\n    console.warn('GLOBAL STATE', getGlobal());\n  });\n\n  if (window.top === window) {\n    logSelfXssWarnings();\n  }\n})();\n","import { requestMutation } from '../lib/fasterdom/fasterdom';\n\nexport function forceLoadFonts() {\n  const el = document.createElement('div');\n  el.textContent = '';\n  el.classList.add('visually-hidden');\n  document.body.appendChild(el);\n\n  requestMutation(() => {\n    document.body.removeChild(el);\n  });\n}\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","BarcodeFormat","BarcodeValueType","Resolution","LensFacing","GoogleBarcodeScannerModuleInstallState","AddressType","EmailFormatType","PhoneFormatType","WifiEncryptionType","exports","read","buffer","offset","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","i","d","s","NaN","Infinity","Math","pow","write","value","c","rt","abs","isNaN","floor","log","LN2","Big","RM","NE","PE","ten","fromDecimal","decimals","BigInt","mul","TONCOIN","round","toString","toDecimal","noFloor","arguments","length","undefined","toBig","div","roundHalfUp","roundDecimal","BIGINT_PREFIX","bigintReviver","key","startsWith","slice","bigintAbs","bigintDivideToNumber","num","ONE_TON","bigintMultiplyToNumber","bigintMax","value0","value1","bigintMin","IS_EXTENSION_PAGE_SCRIPT","IS_EXTENSION","includes","self","location","protocol","shouldShowAlert","APP_ENV","window","throttledAlert","throttle","message","alert","SECOND","handleErrorEvent","ErrorEvent","preventDefault","handleError","error","reason","err","logDebugError","stack","endsWith","DEBUG_ALERT_MSG","addEventListener","TOKEN_TRANSFER_FORWARD_AMOUNT","NFT_TRANSFER_AMOUNT","NFT_TRANSFER_FORWARD_AMOUNT","TON_GAS","stakeNominators","unstakeNominators","stakeLiquid","unstakeLiquid","stakeJettonsForward","JettonStakingGas","STAKE_JETTONS","stakeJettons","unstakeJettons","UNSTAKE_JETTONS","claimJettons","JETTON_TRANSFER","SIMPLE_UPDATE_REQUEST","changeDns","stakeEthena","TOKEN_TRANSFER_AMOUNT","stakeEthenaForward","unstakeEthena","unstakeEthenaForward","unstakeEthenaLocked","unstakeEthenaLockedForward","TON_GAS_REAL","STAKE_COMMENT","UNSTAKE_COMMENT","DEFAULT_DECIMALS","DEFAULT_IS_BOUNCEABLE","WALLET_IS_BOUNCEABLE","Workchain","WORKCHAIN","BaseChain","TRANSFER_TIMEOUT_SEC","DEFAULT_MAX_MESSAGES","LEDGER_MAX_MESSAGES","W5_MAX_MESSAGES","OpCode","JettonOpCode","DnsOpCode","TeleitemOpCode","ContractType","DnsCategory","Excesses","Ok","Wallet","Staking","ConnectorClass","requestStates","Map","requestStatesByCallback","constructor","target","onUpdate","channel","shouldUseJson","targetOrigin","destroy","init","_len","args","Array","_key","this","postMessage","type","request","messageData","messageId","generateUniqueId","payload","requestState","promise","Promise","resolve","reject","Object","assign","withCallback","callback","pop","set","catch","finally","delete","cancelCallback","progressCallback","isCanceled","get","onMessage","data","decodeExtensionMessage","update","response","_requestState$callbac","call","callbackArgs","_data$error","_data$error2","Error","rawData","encodeExtensionMessage","createConnector","worker","connector","handleMessage","_ref","removeEventListener","Deferred","resolved","deferred","MINUTE","HOUR","DAY","YEAR","formatDayToStringWithCache","withCache","langCode","dayStartAt","noYear","monthFormat","noDay","withTime","Date","toLocaleString","year","month","day","hour","minute","hourCycle","formatRelativeHumanDateTime","total","now","minutes","hours","days","rtf","Intl","RelativeTimeFormat","localeMatcher","numeric","style","result","daysPlural","daysValue","formatToParts","reverse","push","replace","hoursPlural","hoursValue","minutesPlural","minutesValue","join","formatHumanDay","lang","datetime","getDayStartAt","isToday","yesterday","setDate","getDate","isYesterday","formatFullDay","code","date","today","getDayStart","getFullYear","formatShortDay","todayStartAt","noDate","targetAt","setSeconds","getMinuteStart","getTime","formatTime","String","getHours","padStart","getMinutes","getCountDaysToDate","ceil","setHours","ApiLiquidUnstakeMode","random","ExceptionCode","CapacitorException","super","Capacitor","win","capCustomPlatform","CapacitorCustomPlatform","cap","Plugins","getPlatform","name","_a","_b","androidBridge","webkit","messageHandlers","bridge","getPlatformId","getPluginHeader","pluginName","PluginHeaders","find","h","registeredPlugins","convertFileSrc","filePath","console","isNativePlatform","isPluginAvailable","plugin","platforms","has","registerPlugin","jsImplementations","registeredPlugin","warn","proxy","platform","pluginHeader","jsImplementation","createPluginMethodWrapper","prop","remove","wrapper","p","async","loadPluginImplementation","then","impl","fn","bind","Unimplemented","methodHeader","methods","rtype","options","nativePromise","nativeCallback","createPluginMethod","defineProperty","writable","configurable","addListener","removeListener","addListenerNative","eventName","callbackId","Proxy","_","Set","keys","Exception","DEBUG","isLoggingEnabled","createCapacitor","initCapacitorGlobal","globalThis","g","WebPlugin","listeners","retainedEventArguments","windowListeners","listenerFunc","firstListener","windowListener","registered","addWindowListener","sendRetainedArgumentsForEvent","removeAllListeners","listener","removeWindowListener","notifyListeners","retainUntilConsumed","forEach","hasListeners","registerWindowListener","windowEventName","pluginEventName","handler","event","unimplemented","msg","unavailable","Unavailable","index","indexOf","splice","handle","arg","encode","str","encodeURIComponent","decodeURIComponent","escape","decode","CapacitorCookiesPluginWeb","getCookies","cookies","document","cookie","cookieMap","split","trim","setCookie","encodedKey","encodedValue","expires","path","domain","url","deleteCookie","clearCookies","toUTCString","clearAllCookies","web","buildRequestInit","extra","output","method","headers","originalKeys","map","k","toLocaleLowerCase","reduce","acc","normalizeHttpHeaders","body","params","URLSearchParams","entries","FormData","form","append","Headers","JSON","stringify","CapacitorHttpPluginWeb","requestInit","webFetchExtra","urlParams","shouldEncode","accumulator","entry","item","isArray","substr","buildUrlParams","shouldEncodeUrlParams","fetch","contentType","blob","responseType","ok","reader","FileReader","onload","base64String","onerror","readAsDataURL","readBlobAsBase64","json","text","status","post","put","patch","cache","WeakMap","fnCache","cacheKey","cached","newValue","animate","tick","schedulerFn","animateInstantly","timingFunctions","linear","t","easeIn","easeOut","easeInOut","sin","PI","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","animateNumber","timing","duration","onEnd","from","to","t0","t1","min","progress","f","requestMeasure","applyStyles","element","css","ImpactStyle","NotificationType","UNDEFINED_PREFIX","extensionMessageReplacer","extensionMessageReviver","parse","process","IS_CORE_WALLET","APP_NAME","APP_VERSION","APP_COMMIT_HASH","APP_ENV_MARKER","DEBUG_MORE","DEBUG_API","DEBUG_VIEW_ACCOUNTS","IS_PRODUCTION","IS_TEST","IS_FIREFOX_EXTENSION","IS_OPERA_EXTENSION","env","IS_PACKAGED_ELECTRON","IS_CAPACITOR","IS_ANDROID_DIRECT","IS_AIR_APP","IS_TELEGRAM_APP","ELECTRON_HOST_URL","INACTIVE_MARKER","PRODUCTION_URL","BETA_URL","APP_INSTALL_URL","APP_REPO_URL","BOT_USERNAME","STRICTERDOM_ENABLED","PIN_LENGTH","NATIVE_BIOMETRICS_USERNAME","NATIVE_BIOMETRICS_SERVER","IS_BIP39_MNEMONIC_ENABLED","MNEMONIC_COUNT","MNEMONIC_COUNTS","PRIVATE_KEY_HEX_LENGTH","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_TINY_ICON_PX","ANIMATED_STICKER_ICON_PX","ANIMATED_STICKER_TINY_SIZE_PX","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_BIG_SIZE_PX","ANIMATED_STICKER_HUGE_SIZE_PX","DEFAULT_LANDSCAPE_ACTION_TAB_ID","TRANSACTION_ADDRESS_SHIFT","WHOLE_PART_DELIMITER","DEFAULT_SLIPPAGE_VALUE","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","MAIN_ACCOUNT_ID","TONCENTER_MAINNET_URL","TONCENTER_TESTNET_URL","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","MAX_PUSH_NOTIFICATIONS_ACCOUNT_COUNT","SUPPORT_USERNAME","MTW_TIPS_CHANNEL_NAME","en","ru","NFT_MARKETPLACE_TITLES","getgems","fragment","MTW_STATIC_BASE_URL","MTW_CARDS_BASE_URL","MTW_CARDS_MINT_BASE_URL","MYTONWALLET_PROMO_URL","MYTONWALLET_MULTISEND_DAPP_URL","TELEGRAM_WEB_URL","NFT_MARKETPLACE_URL","NFT_MARKETPLACE_TITLE","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","HELPCENTER_URL","EMPTY_HASH_VALUE","IFRAME_WHITELIST","SUBPROJECT_URL_MASK","CHANGELLY_SUPPORT_EMAIL","CHANGELLY_LIVE_CHAT_URL","CHANGELLY_SECURITY_EMAIL","CHANGELLY_TERMS_OF_USE","CHANGELLY_PRIVACY_POLICY","CHANGELLY_AML_KYC","CHANGELLY_WAITING_DEADLINE","PROXY_HOSTS","TINY_TRANSFER_MAX_COST","IMAGE_CACHE_NAME","LANG_CACHE_NAME","LANG_LIST","nativeName","rtl","IS_STAKING_DISABLED","VALIDATION_PERIOD_MS","DEFAULT_FEE","LIQUID_POOL","LIQUID_JETTON","STAKING_MIN_AMOUNT","NOMINATORS_STAKING_MIN_AMOUNT","MIN_ACTIVE_STAKING_REWARDS","TONCONNECT_PROTOCOL_VERSION","TONCONNECT_WALLET_JSBRIDGE_KEY","EMBEDDED_DAPP_BRIDGE_CHANNEL","NFT_FRAGMENT_COLLECTIONS","TELEGRAM_GIFTS_SUPER_COLLECTION","MTW_CARDS_WEBSITE","MTW_CARDS_COLLECTION","TON_DNS_COLLECTION","TON_DNS_RENEWAL_WARNING_DAYS","TON_DNS_RENEWAL_NFT_WARNING_DAYS","symbol","slug","chain","cmcSlug","TRX","MYCOIN","minterAddress","MYCOIN_TESTNET","CHAIN_CONFIG","ton","isMemoSupported","isDnsSupported","addressRegex","addressPrefixRegex","nativeToken","tron","mainnet","apiUrl","usdtAddress","testnet","TRC20_USDT_MAINNET_SLUG","TRC20_USDT_TESTNET_SLUG","TON_USDT_SLUG","STAKED_TON_SLUG","TRX_SWAP_COUNT_FEE_ADDRESS","ETHENA_STAKING_VAULT","ETHENA_STAKING_MIN_AMOUNT","ETHENA_ELIGIBILITY_CHECK_URL","STON_PTON_SLUG","TRC20_USDT","TON_USDT","tokenAddress","TON_USDE","image","TON_TSUSDE","ALL_STAKING_POOLS","DEFAULT_ENABLED_TOKEN_SLUGS","DEFAULT_ENABLED_TOKEN_COUNT","PRIORITY_TOKEN_SLUGS","COMMON_TOKEN","isFromBackend","price","priceUsd","percentChange24h","TOKEN_INFO","toncoin","trx","TOKEN_WITH_LABEL","INIT_SWAP_ASSETS","isPopular","DEFAULT_TRX_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_FIRST_TOKEN_SLUG","DEFAULT_SWAP_SECOND_TOKEN_SLUG","DEFAULT_TRANSFER_TOKEN_SLUG","DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG","SWAP_DEX_LABELS","dedust","ston","MULTITAB_DATA_CHANNEL_NAME","ACTIVE_TAB_STORAGE_KEY","WINDOW_PROVIDER_CHANNEL","SHOULD_SHOW_ALL_ASSETS_AND_ACTIVITY","PORTRAIT_MIN_ASSETS_TAB_VIEW","LANDSCAPE_MIN_ASSETS_TAB_VIEW","DEFAULT_PRICE_CURRENCY","CURRENCIES","USD","shortSymbol","EUR","RUB","CNY","BTC","BURN_ADDRESS","POPULAR_WALLET_VERSIONS","DEFAULT_TIMEOUT","DEFAULT_RETRIES","DEFAULT_ERROR_PAUSE","HISTORY_PERIODS","BROWSER_HISTORY_LIMIT","NFT_BATCH_SIZE","NOTCOIN_VOUCHERS_ADDRESS","BURN_CHUNK_DURATION_APPROX_SEC","NOTCOIN_EXCHANGERS","CLAIM_ADDRESS","CLAIM_AMOUNT","CLAIM_COMMENT","MINT_CARD_ADDRESS","MINT_CARD_COMMENT","MINT_CARD_REFUND_COMMENT","STARS_SYMBOL","GIVEAWAY_CHECKIN_URL","AUTOLOCK_OPTIONS_LIST","selectedName","period","AUTO_CONFIRM_DURATION_MINUTES","PRICELESS_TOKEN_HASHES","STAKED_TOKEN_SLUGS","DEFAULT_OUR_SWAP_FEE","DEFAULT_STAKING_STATE","id","tokenSlug","annualYield","yieldType","balance","pool","tokenBalance","unstakeRequestAmount","instantAvailable","start","end","DEFAULT_NOMINATORS_STAKING_STATE","pendingDepositAmount","JVAULT_URL","HELP_CENTER_SEED_SCAM_URL","HELP_CENTER_ETHENA_URL","ALL_TON_DNS_ZONES","suffixes","baseFormat","resolver","collectionName","isTelemint","isUnofficial","TON_DNS_ZONES","filter","DEFAULT_AUTOLOCK_OPTION","WRONG_ATTEMPTS_BEFORE_LOG_OUT_SUGGESTION","userAgent","navigator","test","maxTouchPoints","Directory","Encoding","pause","ms","setTimeout","debounce","waitingTimeout","shouldRunFirst","shouldRunLast","clearTimeout","isRunning","scheduleFn","runFn","localArgs","_len2","_args","_key2","throttleWithTickEnd","throttleWith","onTickEnd","waiting","_len3","_key3","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","onTickEndCallbacks","fastRaf","withTimeoutFallback","add","requestAnimationFrame","currentCallbacks","cb","currentTimeoutCallbacks","IDLE_TIMEOUT","onIdleCallbacks","beforeUnloadCallbacks","onIdle","requestIdleCallback","deadline","shift","timeRemaining","concat","timeout","onBeforeUnload","isLast","unshift","waitFor","interval","attempts","setCancellableTimeout","timeoutId","ApiBaseError","displayError","ApiUserRejectsError","ApiServerError","statusCode","ApiCommonError","ServerError","ApiUnsupportedVersionError","UnsupportedVersion","ApiHardwareBlindSigningNotEnabled","ApiTransactionError","HardwareBlindSigningNotEnabled","handleServerError","MAX_WORKERS","hardwareConcurrency","instances","launchMediaWorkers","fill","Worker","URL","requestMediaWorker","base64","ieee754","customInspectSymbol","Symbol","Buffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","Uint8Array","setPrototypeOf","prototype","encodingOrOffset","TypeError","allocUnsafe","string","encoding","isEncoding","byteLength","actual","fromString","ArrayBuffer","isView","arrayView","isInstance","copy","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","b","obj","isBuffer","len","checked","numberIsNaN","fromObject","toPrimitive","assertSize","size","array","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","n","bidirectionalIndexOf","val","dir","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","utf8Write","blitBuffer","asciiWrite","byteArray","charCodeAt","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","apply","decodeCodePointsArray","TYPED_ARRAY_SUPPORT","proto","foo","typedArraySupport","enumerable","poolSize","alloc","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","swap16","swap32","swap64","equals","inspect","max","thisStart","thisEnd","thisCopy","targetCopy","isFinite","toJSON","_arr","ret","out","hexSliceLookupTable","bytes","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","first","last","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","errors","E","sym","getMessage","Base","addNumericalSeparator","range","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","input","received","isInteger","INVALID_BASE64_RE","leadSurrogate","toByteArray","base64clean","src","dst","alphabet","table","i16","BufferBigIntNotDefined","MAX_DP","NAME","INVALID","INVALID_DP","INVALID_RM","DIV_BY_ZERO","P","UNDEFINED","NUMERIC","sd","rm","more","xc","doExponential","isNonzero","charAt","cmp","isneg","yc","l","dp","DP","bl","bt","ri","bz","ai","al","r","rl","q","qc","qi","eq","gt","gte","lt","lte","minus","xlty","plus","xe","ye","mod","ygtx","times","neg","one","prec","sqrt","half","toExponential","toFixed","for","toNumber","strict","toPrecision","_Big_","nl","search","substring","roundDown","roundHalfEven","roundUp","SAFE_EXEC_ENABLED","safeExec","rescue","always","shouldIgnoreError","DETACHED_TAB_URL","ledgerTabId","openLedgerTab","tab","chrome","tabs","create","active","windows","windowId","focused","createLedgerTab","closeLedgerTab","query","closeThisTab","getCurrent","onLedgerTabClose","onClose","closedTabId","onRemoved","callbackState","createPostMessageInterface","api","sendToOrigin","transferables","_e$data","_e$error","_e$error2","_e$reason","_e$reason2","handleErrors","createReverseIFrameInterface","_e$data2","origin","_api$init","lastArg","ImageBitmap","arrayBuffer","MAX_LOG_LENGTH","logs","errorReplacer","metadata","AssertionError","addLog","time","getLogs","level","logDebug","logDebugApi","obj1","obj2","debug","logSelfXssWarnings","selfXssWarnings","es","zh","language","ApiAuthError","ApiTransactionDraftError","randomBytes","crypto","getRandomValues","JettonStakingOpCodes","GET_STATIC_DATA","REPORT_STATIC_DATA","GET_STORAGE_DATA","REPORT_STORAGE_DATA","EXCESSES","TRANSFER_JETTON","INTERNAL_TRANSFER","TRANSFER_NOTIFICATION","PROVIDE_WALLET_ADDRESS","TAKE_WALLET_ADDRESS","BURN_JETTON","ADD_REWARDS","SEND_CLAIMED_REWARDS","SEND_UNSTAKED_JETTONS","APPROVE_STAKE","CANCEL_STAKE","ADD_REWARD_JETTONS","CLAIM_COMMISSIONS","REQUEST_UPDATE_REWARDS","CLAIM_REWARDS","RECEIVE_JETTONS","UNSTAKE_REQUEST","CANCEL_UNSTAKE_REQUEST","UPDATE_REWARDS","CONFIRM_TRANSFER","DEPLOY_NEW_POOL","SEND_COMMISSIONS","SET_CODE","CHANGE_CREATION_FEE","CHANGE_CONTENT","UPDATE_CODES","MIN_RESERVE","DEPLOY_POOL","NOTIFICATION","BURN_JETTONS","CANCEL_UNSTAKE","APPROVE_TRANSFER","SAVE_UPDATED_REWARDS","MIN_EXCESS","SEND_STAKED_JETTONS","Dividers","COMMISSION_DIVIDER","REWARDS_DIVIDER","DISTRIBUTION_SPEED_DIVIDER","DISTRIBUTED_REWARDS_DIVIDER","cachedSetTimeout","cachedClearTimeout","module","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","argv","version","versions","on","once","off","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","pendingMeasureTasks","pendingMutationTasks","pendingForceReflowTasks","runUpdatePassOnRaf","currentMeasureTasks","task","setPhase","currentMutationTasks","pendingForceReflowMutationTasks","mutationTask","throttledFn","requestMutation","requestForcedReflow","isDnsDomain","getDnsDomainZone","zone","suffix","base","isTonDnsNft","nft","collectionAddress","getTonDnsExpirationDate","dnsExpiration","address","filterExpiringDomains","nftAddresses","nftByAddress","expiringDomains","getDomainsExpirationDate","nfts","minDate","nftOrAddress","expirationDate","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","maxChunkLength","len2","encodeChunk","lookup","Element","props","HTMLElement","VisualViewport","Document","HTMLInputElement","MouseEvent","Range","onError","nativeMethods","observer","phase","isStrict","newPhase","enableStrict","LAYOUT_CAUSES","causes","entity","_Object$getOwnPropert","nativeGetter","getOwnPropertyDescriptor","onMeasure","nativeMethod","MutationObserver","mutations","_ref3","attributeName","contains","forcedMutationAllowedFor","contentEditable","clear","observe","childList","attributes","subtree","characterData","forceMeasure","forceMutation","nodes","node","suppressStrict","_observer","disconnect","_ref2","propName","HEALTH_CHECK_TIMEOUT","HEALTH_CHECK_MIN_DELAY","updateCallback","isInitialized","initApi","initArgs","windowMethods","createWindowProvider","IS_IOS","ensureWorkerPing","callApi","fnName","callApiWithThrow","startedAt","isResolved","race","_worker","terminate","TELEGRAM_MOBILE_PLATFORM","IS_PWA","matchMedia","matches","standalone","referrer","PLATFORM_ENV","IS_MAC_OS","IS_WINDOWS","IS_LINUX","IS_ANDROID","IS_SAFARI","IS_OPERA","IS_EDGE","IS_FIREFOX","IS_TOUCH_ENV","IS_CHROME_EXTENSION","Boolean","_window$chrome","system","IS_ELECTRON","electron","IS_WEB","DEFAULT_LANG_CODE","USER_AGENT_LANG_CODE","some","getBrowserLanguage","DPR","devicePixelRatio","IS_LEDGER_SUPPORTED","IS_LEDGER_EXTENSION_TAB","global","hash","IS_BIOMETRIC_AUTH_SUPPORTED","credentials","IS_DELEGATED_BOTTOM_SHEET","IS_DELEGATING_BOTTOM_SHEET","isIPad","IS_MULTITAB_SUPPORTED","IS_DAPP_SUPPORTED","IS_IOS_APP","IS_ANDROID_APP","IS_CLIPBOARDS_SUPPORTED","REM","getComputedStyle","documentElement","fontSize","STICKY_CARD_INTERSECTION_THRESHOLD","setScrollbarWidthProperty","el","createElement","cssText","classList","appendChild","width","offsetWidth","clientWidth","setProperty","getIsMobileTelegramApp","_window$Telegram","Telegram","WebApp","parseAccountId","accountId","network","buildAccountId","account","getMainAccountAddress","addressByChain","values","getAccountTitle","shortenAddress","buildCollectionByKey","collection","byKey","member","groupBy","groupKey","mapValues","newByKey","pick","object","pickTruthy","omit","stringKeys","omitUndefined","stringKey","orderBy","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","sort","unique","compact","areSortedArraysEqual","array1","array2","every","cloneDeep","isObject","isLiteralObject","findLast","predicate","cursor","extractKey","findDifference","set2","diff","filterValues","swapKeysAndValues","MEANINGFUL_CHAR_LENGTH","fromRight","FILLER","SecureStoragePlugin","resolvePromise","capacitorStorageGetItem","_await$get$catch","capacitorStorageSetItem","capacitorStorageRemoveItem","capacitorStorageClear","capacitorStorageKeys","localStorageGetItem","localStorage","getItem","localStorageSetItem","setItem","localStorageRemoveItem","removeItem","localStorageClear","localStorageGetAll","localStorageGetMany","localStorageSetMany","items","MAX_COMMENT_SIZE","BROKEN_CONNECTION_ERRORS","isValidLedgerComment","comment","isAscii","isLedgerCommentLengthValid","isLedgerConnectionBroken","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","getPrototypeOf","ns","def","current","getOwnPropertyNames","definition","o","chunkId","all","promises","u","miniCssF","Function","hasOwnProperty","done","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","nc","setAttribute","onScriptComplete","prev","doneFns","parentNode","removeChild","head","toStringTag","scriptUrl","importScripts","currentScript","tagName","toUpperCase","baseURI","href","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","arePropsShallowEqual","currentProps","newProps","currentKeys","currentKeysLength","logUnequalProps","debugKey","KEYS_TO_IGNORE","counters","renderCountersThrottled","loggerEl","clearEl","innerText","setupOverlay","halfSecondAgo","maxRenders","maxDuration","innerHTML","lastUpdateAt","content","background","textContent","parent","factor","incrementOverlayCounter","createCallbackManager","callbacks","removeCallback","runCallbacks","addCallback","hasCallbacks","SIGNAL_MARK","isSignal","unsubscribesByEffect","createSignal","defaultValue","state","effects","subscribe","effect","unsubscribe","unsubscribes","unsub","counter","counterBlocking","getIsAnimating","setIsAnimating","getIsBlockingAnimating","setIsBlockingAnimating","getIsHeavyAnimating","beginHeavyAnimation","isBlocking","hasEnded","onFullyIdle","VirtualType","MountState","Fragment","DEBUG_SILENT_RENDERS_FOR","renderingInstance","lastComponentId","isParentElement","$element","Tag","Component","source","children","buildChildren","buildFragmentElement","componentInstance","mountState","Unmounted","buildComponentElement","createComponentInstance","tag","buildTagElement","noEmpty","cleanChildren","isEmptyPlaceholder","dropEmptyTail","newChildren","child","buildChildElement","Empty","Text","DEBUG_components","TOTAL","renders","DEBUG_memos","avgRenderTime","calls","hitRate","instancesPendingUpdate","idsToExcludeFromUpdate","pendingEffects","pendingCleanups","pendingLayoutEffects","pendingLayoutCleanups","areImmediateEffectsCaptured","runImmediateEffects","captureImmediateEffects","instancesToUpdate","currentCleanups","currentEffects","prepareComponentForFrame","instance","currentElement","renderComponent","forceUpdateComponent","runCapturedImmediateEffects","currentLayoutCleanups","currentLayoutEffects","newRenderedValue","DEBUG_startAt","hooks","memos","refs","componentName","DEBUG_resolveComponentName","performance","renderedValue","Mounted","hasElementChanged","$old","$new","unmountComponent","_componentInstance$ho","byCursor","_effect$releaseSignal","cleanup","releaseSignals","hook","schedule","dependencies","nextValue","setter","onChange","helpGc","_componentInstance$ho2","useState","initial","useEffectBase","isLayout","effectConfig","_byCursor$cursor","cleanupsContainer","effectsContainer","effectId","runEffectCleanup","runEffect","scheduleEffect","dependency","causedBy","prevValue","cleanups","signal","setupSignals","useEffect","useLayoutEffect","useMemo","debugHitRateKey","DEBUG_state","instanceKey","misses","useCallback","newCallback","useRef","useSignal","signalRef","memo","TeactMemoWrapper","DEBUG_contentComponentName","useForceUpdate","setTrigger","trigger","next","shouldSkipUndefined","ref","useSyncEffect","prevDeps","usePrevious","cleanupRef","_cleanupRef$current","useEffectOnce","_cleanupRef$current2","useUniqueId","prefix","idRef","DEBUG_currentRandomId","currentGlobal","isInited","DEBUG_invalidateGlobalOnTickEnd","actionHandlers","container","containers","mapStateToProps","ownProps","mappedProps","forceUpdate","activateContainer","newMappedProps","DEBUG_componentName","DEBUG_updates","updateTime","actions","runCallbacksThrottled","forceOnHeavyAnimation","setUntypedGlobal","newGlobal","forceOutdated","DEBUG_randomId","forceSyncOnIOs","getUntypedGlobal","getUntypedActions","forceOnHeavyAnimationOnce","actionQueue","activationFn","stuckTo","stickTo","getGlobal","setGlobal","getActions","typed","TeactNContainer","useUnmountCleanup","React","_extends","addActionHandler","_actionHandlers$name","handleAction","withGlobal","isEmptyObject","isKeyCountGreater","countToOutnumber","keyCount","isViewAccount","accountType","memoize","ttlSeconds","isCacheDisabled","isDisabledUntil","isStale","lastTime","lastArgs","lastResult","disableCache","seconds","selectAccounts","_global$accounts","accounts","byId","selectNetworkAccountsMemoized","accountsById","fromEntries","selectNetworkAccounts","_global$accounts2","selectCurrentNetwork","settings","isTestnet","selectCurrentAccount","selectAccount","currentAccountId","_selectAccounts","selectCurrentAccountState","selectAccountState","byAccountId","selectAccountSettings","selectCurrentAccountSettings","isHardwareAccount","selectIsHardwareAccount","selectAllHardwareAccounts","selectIsOneAccount","selectEnabledTokensCountMemoizedFor","tokens","isDisabled","isMnemonicAccount","selectIsMnemonicAccount","selectIsPasswordPresentMemoized","selectIsPasswordPresent","selectVestingPartsReadyToUnfreeze","_selectAccountState","vesting","info","currentVesting","part","partId","selectAccountNftByAddress","nftAddress","_selectAccountState2","byAddress","selectIsMultichainAccount","_selectAccount","selectIsBiometricAuthEnabled","authConfig","kind","selectIsNativeBiometricAuthEnabled","selectIsCurrentAccountViewMode","isNftTransferPayload","isTokenTransferPayload","selectCurrentDappTransferTotalsMemoized","transactions","amountsBySlug","addSlugAmount","amount","isScam","isDangerous","nftCount","transaction","networkFee","selectDappTransferInsufficientTokensMemoized","balances","tokensBySlug","insufficientTokens","requiredAmount","token","selectCurrentDappTransferTotals","currentDappTransfer","selectDappTransferInsufficientTokens","_accountState$balance","accountState","bySlug","tokenInfo","precision","roundingMode","selectAccountTokensMemoizedFor","balancesBySlug","accountSettings","isSortByValueEnabled","areTokensWithNoCostHidden","isNewAccount","getIsNewAccount","_accountSettings$dele","deletedSlugs","_accountSettings$alwa","_accountSettings$alwa2","color","codeHash","balanceBig","totalValue","hasCost","isPricelessTokenWithBalance","alwaysShownSlugs","alwaysHiddenSlugs","change24h","tokenA","tokenB","orderedSlugs","priorityA","priorityB","selectCurrentAccountTokens","selectAccountTokens","selectCurrentAccountTokenBalance","_selectCurrentAccount","selectCurrentToncoinBalance","selectTokenAddress","selectToken","selectMycoin","selectChainTokenWithMaxBalanceSlow","maxToken","currentToken","compareActivities","getIsActivityPending","timestamp","getKey","getFromCache","updatePoisoningCache","tx","fromAddress","addToCache","getIsTransactionWithPoisoning","clearPoisoningCache","TRANSACTION_TYPE_TITLES","stake","unstake","unstakeRequest","callContract","excess","contractDeploy","bounced","mint","burn","auctionBid","dnsChangeAddress","dnsChangeSite","dnsChangeSubdomains","dnsChangeStorage","dnsDelete","dnsRenew","liquidityDeposit","liquidityWithdraw","STAKING_TRANSACTION_TYPES","DNS_TRANSACTION_TYPES","parseTxId","txId","subId","getIsTxIdLocal","getActivityTokenSlugs","activity","getIsActivitySuitableForFetchingTimestamp","getTransactionTitle","tense","translate","titles","isIncoming","isScamTransaction","_transaction$metadata","shouldShowTransactionComment","encryptedComment","getTransactionAmountDisplayMode","shouldShowTransactionAddress","toAddress","marketplace","isOurStakingTransaction","shouldShowTransactionAnnualYield","cex","isPending","getActivityIdReplacements","prevActivities","nextActivities","prevLocalActivities","prevChainActivities","getLocalActivityIdReplacements","getChainActivityIdReplacements","idReplacements","nextActivityIds","nextChainActivities","localActivity","prevId","chainActivity","doesLocalActivityMatch","nextActivitiesByMessageHash","externalMsgHashNorm","nextSubActivities","_localActivity$extra","withW5Gasless","normalizedAddress","fromAmount","shouldHide","selectNewestActivityTimestamps","activities","newestActivitiesBySlug","selectLocalActivitiesSlow","_global$byAccountId$a","localActivityIds","selectPendingActivitiesSlow","_global$byAccountId$a2","pendingActivityIds","ids","AppState","AuthState","BiometricsState","TransferState","SignDataState","DomainRenewalState","DomainLinkingState","SwapState","SwapInputSource","SwapErrorType","SwapType","DappConnectState","HardwareConnectState","StakingState","VestingUnfreezeState","SettingsState","MintCardState","ActiveTab","ContentTab","MediaType","LoadMoreDirection","getChainConfig","findChainConfig","chainByNativeSlug","getIsNativeToken","getIsTonToken","withNative","getNativeToken","getChainBySlug","getIsServiceToken","buildUserToken","createTokenList","swapTokenInfo","sortFn","filterFn","keywords","canSwap","selectPopularTokensMemoizedFor","popularTokenOrder","orderMap","selectSwapTokensMemoizedFor","localeCompare","selectAccountTokensForSwapMemoizedFor","selectSwapTokens","_selectCurrentAccount3","selectCurrentSwapTokenIn","tokenInSlug","currentSwap","selectCurrentSwapTokenOut","tokenOutSlug","selectSwapType","tokenInChain","tokenOutChain","OnChain","CrosschainFromWallet","CrosschainToWallet","selectIsSwapDisabled","restrictions","isSwapDisabled","explainApiTransferFee","diesel","shouldUseDiesel","dieselKey","realFeeInDiesel","exampleFromAmount","exampleToAmount","exchangeRate","convertFee","realFee","nativeAmount","dieselRealFee","nativeRealFee","isGasless","canTransferFullBalance","fullFee","terms","native","remainingFee","nativeSum","excessFee","explainGaslessTransferFee","fee","explainGasfullTransferFee","getMaxTransferAmount","getDieselTokenAmount","isValidAddressOrDomain","allowPrefix","config","selectCurrentTransferMaxAmount","currentTransfer","selectTokenMatchingCurrentTransferAddressSlow","currentTokenSlug","currentChain","isCheckingPrefix","availableChains","selectAccountStakingStatesMemoizedFor","stateDefault","stateById","states","selectAccountStakingStates","staking","stakingDefault","selectAccountStakingStatesBySlugMemoizedFor","stakingStates","selectAccountStakingStatesBySlug","selectAccountStakingState","stakingId","shouldUseNominators","selectAccountStakingHistory","stakingHistory","selectIsStakingDisabled","selectTonDnsLinkedAddress","linkedAddressByAddress","accountIds","apiUpdate","isElectron","isNativeBottomSheet","isIosApp","isAndroidApp","newestActivityTimestamps","isDefaultEnabled","areAllDisabled","toggleTonMagic","isEnabled","toggleTonProxy","toggleDeeplinkHook","changeBaseCurrency","currency","BiometryType","BiometricAuthError","NativeBiometric","NativeBiometricWeb","WINDOW_RESIZE_THROTTLE_MS","WINDOW_ORIENTATION_CHANGE_THROTTLE_MS","SAFE_AREA_INITIALIZATION_DELAY","initialHeight","innerHeight","virtualKeyboardOpenListeners","currentWindowSize","updateSizes","patchVh","toggleSafeAreaClasses","getWindowSize","innerWidth","height","screenHeight","screen","safeAreaTop","getSafeAreaTop","safeAreaBottom","getSafeAreaBottom","Keyboard","adjustBodyPaddingForKeyboard","keyboardHeight","visualViewport","pageTop","vh","paddingBottom","getPropertyValue","toggle","webApp","isBiometricInited","isNativeBiometricAuthSupported","isFaceIdAvailable","isTouchIdAvailable","disableSwipeRequests","getIsTelegramBiometricsRestricted","_webApp2","biometricManager","BiometricManager","isBiometricAvailable","isAccessGranted","isAccessRequested","getTelegramApp","getTelegramAppAsync","updateSafeAreaProperties","top","left","right","bottom","safeAreaInset","contentTop","contentLeft","contentRight","contentBottom","contentSafeAreaInset","updateFullscreenState","isFullscreen","openFullscreen","disableTelegramMiniAppSwipeToClose","closeFullscreen","enableTelegramMiniAppSwipeToClose","onFullscreenFailed","_webApp3","disableVerticalSwipes","_webApp4","enableVerticalSwipes","requestBiometricAccess","requestAccess","accessGranted","setBiometricCredentials","password","updateBiometricToken","updated","verifyIdentity","authenticate","success","PubkeyAlg","RP_NAME","USER_NAME","createCredential","rpId","hostname","userHandle","credBlob","publicKey","challenge","rp","user","displayName","pubKeyCredParams","alg","ES256","RS256","Ed25519","authenticatorSelection","requireResidentKey","userVerification","extensions","hmacCreateSecret","excludeCredentials","credential","getClientExtensionResults","verify","transports","getTransports","credentialId","rawId","allowCredentials","getCredBlob","assertion","getPassword","AbortController","aborted","webAuthn","_window$electron","encryptedPassword","encryptPassword","setTelegramBiometricCredentials","setCredentials","username","server","deleteCredentials","_window$electron2","decryptPassword","isVerified","verifyTelegramBiometricsIdentity","subtitle","isWeakAuthenticatorAllowed","maxAttempts","getCredentials","App","AppWeb","SplashScreen","SplashScreenWeb","SafeArea","SafeAreaWeb","AppLauncher","AppLauncherWeb","BottomSheet","stopEvent","stopPropagation","listenOnce","handleEvent","_navigator","userAgentData","devicePlatform","initConnectorString","bridgeKey","tonConnectProperties","TON_CONNECT_BRIDGE_METHODS","updateHandlers","sanitizeUrl","open","close","closest","tonconnect","listen","initTonConnect","CONNECT_EVENT_ERROR_CODES","SEND_TRANSACTION_ERROR_CODES","requestId","buildConnectError","UNKNOWN_ERROR","buildDappRequest","isUrlEnsured","buildBridgeApi","pageUrl","closeBrowser","tonConnectApi","openLoadingOverlay","closeLoadingOverlay","connect","protocolVersion","BAD_REQUEST_ERROR","_request$items","manifestUrl","verifyConnectRequest","restoreConnection","send","_global$byAccountId$d","dapps","dapp","UNKNOWN_APP_ERROR","dappRequest","applyScrollPatch","anyRequest","buildTonConnectBridgeApi","prefixedTonConnectApi","newEntries","v","prefixApi","openDeeplinkOrUrl","isExternal","isFromInAppBrowser","useStateRef","useLastCallback","_ref$current","InAppBrowserPostMessageAdapter","inAppBrowser","executeScript","URL_REGEX","VALID_PROTOCOLS","EXPLORER_CONFIGURATIONS","explorer","getHostnameFromUrl","getExplorerName","getExplorerBaseUrl","getExplorerTransactionUrl","transactionHash","getExplorerAddressUrl","getExplorerNftUrl","isTelegramUrl","getCardNftImageUrl","mtwCardId","SIMPLE_MARKDOWN_REGEX","renderText","filters","entities","match","entityResult","splittenParts","line","trimmedLine","trimStart","indentLength","repeat","cacheApi","caches","cacheName","SHORT_SYMBOLS","formatNumber","fractionDigits","noTruncate","bigValue","isNegative","formatted","wholePart","fractionPart","applyThousandsGrouping","formatCurrency","addCurrency","formatCurrencyExtended","noSign","isZeroNegative","numericValue","formatCurrencySimple","getShortCurrencySymbol","formatBaseCurrencyAmount","baseCurrency","defaultLangPack","defaultLangPackJson","SUBSTITUTION_REGEX","PLURAL_OPTIONS","PLURAL_RULES","de","pl","th","tr","uk","langPack","currentLangCode","createLangFn","format","pluralValue","_langPack","cacheValue","langString","preferredPluralOption","optionIndex","getPluralOption","template","otherValue","formattedValue","translationSlices","initialValue","processTemplate","processedTemplate","RegExp","tokenValue","processTemplateJsx","processTranslation","getTranslation","setLanguage","newLangPack","Request","remote","cacheData","Blob","Response","fetchRemote","langInfo","isRtl","langName","useLang","langProvider","buildClassName","clamp","isBetween","SwipeDirection","getDistance","hypot","pageX","pageY","getTouchCenter","lastClickTime","lethargy","stability","sensitivity","tolerance","delay","lastUpDeltas","lastDownDeltas","deltasTimestamp","check","lastDelta","originalEvent","wheelDelta","deltaY","detail","isInertia","direction","lastDeltas","lastDeltasOld","lastDeltasNew","oldSum","newSum","oldAverage","newAverage","captureEvents","captureEvent","hasMoved","hasSwiped","isZooming","initialDistance","wheelZoom","initialZoom","initialDragOffset","isDragCanceled","windowSize","initialSwipeAxis","initialTouchCenter","minZoom","maxZoom","onCapture","_options$onCapture","excludedClosestSelector","includedClosestSelector","withNativeDrag","withCursor","onDrag","onMove","onRelease","passive","touches","selectorToPreventScroll","querySelectorAll","scrollable","overflow","onDoubleClick","centerX","centerY","onClick","button","newWindowSize","onZoom","endDistance","touchCenter","dragOffsetX","dragOffsetY","zoomFactor","initialCenterX","initialCenterY","currentCenterX","currentCenterY","shouldPreventScroll","onSwipe","xAbs","yAbs","threshold","swipeThreshold","axis","currentSwipeAxis","offsets","Left","Right","Up","Down","processSwipe","releaseWheelDrag","releaseWheelZoom","onWheelCapture","onWheel","doubleTapZoom","is","deltaX","ctrlKey","metaKeyPressed","metaKey","shiftKey","delta","zoom","onWheelZoom","isUserEvent","sign","dx","dy","onWheelDrag","withWheelDrag","isNotPassive","keyToHandlerName","Enter","Backspace","Delete","Esc","Escape","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab","handlers","onEnter","onDelete","onBackspace","onEsc","onUp","onDown","onLeft","onRight","onTab","captureKeyboardListeners","hasActiveHandlers","handleKeyDown","handlerName","option","currentEventHandlers","findIndex","releaseKeyboardListener","keyHandlers","handlerOrOptions","noStopPropagation","shouldPreventDefault","disableSwipeToClose","enableSwipeToClose","trapFocus","focusableElements","currentFocusedIndex","em","isSameNode","activeElement","newFocusedIndex","focus","cssColorToHex","cssColor","parseFloat","Style","Animation","StatusBar","NavigationBarPluginEvents","NavigationBar","NavigationBarWeb","prefersDark","currentTheme","forcedDarkStatusBarBackground","switchTheme","theme","isInModal","setThemeValue","setStatusBarStyle","_document$querySelect","querySelector","_getTelegramApp","isDarkTheme","colorScheme","handlePrefersColorSchemeChange","_getTelegramApp2","_getTelegramApp3","_getTelegramApp4","hexColor","setHeaderColor","setBackgroundColor","setBottomBarColor","forceDarkBackground","currentAppTheme","isSystemDark","isModalOpen","Dark","Light","setStyle","setColor","darkButtons","switchStatusBar","onThemeChanged","telegramApp","onEvent","queriesMap","createQueryEntry","mql","dispatchers","useMediaQuery","setState","initializeWithValue","getInitialState","querySubscribe","queryUnsubscribe","isPortrait","useDeviceScreen","isSmallHeight","isLandscape","getIsPortrait","useEffectWithPrevDeps","prevDepsRef","controlledByMain","textInputTypes","safeAreaCache","safeAreaPromise","getSafeAreaInsets","insets","currentKey","isForcedFullSize","useOpenFromMainBottomSheet","isInput","isContentEditable","_controlledByMain$get","globalJson","dispatchEvent","Event","controlledByNative","prepare","_controlledByNative$g","closeCurrent","lastOpenCall","runDebounce","isGlobalHandlerAttached","uniqueId","updateBackButtonState","backButton","BackButton","show","handleBackButtonClick","hide","offClick","PATH_BASE","pathname","historyUniqueSessionId","historyState","historyCursor","isAlteringHistory","deferredHistoryOperations","deferredPopstateOperations","applyDeferredHistoryOperations","goOperations","op","stateOperations","goCount","history","go","processStateOperations","deferHistoryOperation","historyOperation","resetHistory","onBack","back","replaceState","cleanupClosed","countClosed","isClosed","cleanupTrashedState","_historyState$i$onBac","_historyState$i","useHistoryBack","isActive","shouldBeReplaced","shouldIgnoreForTelegram","lastOnBack","indexRef","telegramIdRef","wasReplaced","isFirstRender","pushState","shouldReplace","previousRecord","_previousRecord$markR","markReplaced","processBack","prevIsActive","registerTelegramCallback","unregisterTelegramCallback","TEST_getHistoryState","TEST_getHistoryCursor","previousUniqueSessionId","alreadyClosedCount","_historyState$i$onBac2","_historyState$i2","NON_BUBBLEABLE_EVENTS","documentEventCounters","delegationRegistryByEventType","delegatedEventTypesByElement","resolveEventType","eventType","canUseEventDelegation","realEventType","asCapture","removeDelegatedListener","realEvent","events","furtherCallsPrevented","Reflect","documentListenersCount","delegatedHandlersCount1","delegationRegistriesCount","delegatedHandlersCount2","delegationRegistry","delegationElementsCount","delegatedEventTypesCount","eventTypes","SVG_NAMESPACE","FILTERED_ATTRIBUTES","HTML_ATTRIBUTES","CONTROLLABLE_TAGS","MAPPED_ATTRIBUTES","autoCapitalize","autoComplete","autoCorrect","autoPlay","spellCheck","INDEX_KEY_PREFIX","SELECTION_STATE_ATTRIBUTE","headsByElement","extraClasses","extraStyles","renderWithVirtual","parentEl","$current","$parent","currentContext","_$new","_$new2","_$new3","skipComponentUpdate","nextSibling","namespace","isCurrentComponent","isNewComponent","$newAsReal","isCurrentFragment","isNewFragment","xmlns","updateComponent","setupComponentUpdateListener","newTarget","initComponent","context","mountChildren","firstChild","createNode","insertBefore","setElementRef","remount","getNextSibling","renderChildren","forceMoveToEnd","$currentAsReal","currentTarget","$newAsTag","processControlled","currentEntries","currentValue","removeAttribute","updateAttributes","Mounting","mountComponent","fragmentEl","placeholderTarget","createComment","$child","$renderedChild","createTextNode","createElementNS","defaultChecked","processUncontrolledOnMount","componentNextSibling","isComponent","isFragment","unmountChildren","replaceChild","unmountRealTree","_fragment$placeholder","removeAllDelegatedListeners","currentEl","DEBUG_checkKeyUniqueness","teactFastList","currentChildren","newKeys","$newChild","currentRemainingIndex","remainingByKey","$currentChild","isKeyPresent","newChildKey","orderKey","teactOrderKey","fragmentIndex","fragmentSize","currentPreservedIndex","currentChildInfo","renderFragment","newOrderKey","shouldMoveNode","isMovingDown","childNodes","renderFastListChildren","currentFragment","newFragment","_currentFragment$plac","siblingAfterFragment","currentChildrenLength","newChildrenLength","maxLength","createDocumentFragment","lastCurrentChild","fragmentNextSibling","_ref$onChange","isValueControlled","isCheckedControlled","onInput","onBlur","selectionStart","selectionEnd","isCaretAtEnd","setSelectionRange","selectionState","dataset","updateClassName","inputEl","selectionStateJson","updateStyle","__html","resolveDelegationRegistry","existing","newSet","resolveDelegatedEventTypes","addDelegatedListener","htmlElement","className","extraArray","applyExtraStyles","addExtraClass","removeExtraClass","toggleExtraClass","force","_extraClasses$get","setExtraStyles","styles","standardStyles","$head","useSignalEffect","isFirstRun","_unsubscribesByEffect","cleanupEffect","resolverOrDependency","isAsync","getValue","setValue","resolverRef","runCurrentResolver","currentResolver","resolverOrSignal","valueRef","isSync","useLayoutEffectWithPrevDeps","CLOSE_DURATION","useShowTransition","isOpen","noMountTransition","noOpenTransition","noCloseTransition","closeDuration","shouldForceOpen","onCloseAnimationEnd","localRef","closingTimeoutRef","getState","optionsRef","onCloseEndLast","useSyncEffectWithPrevDeps","prevIsOpen","applyClassNames","shouldRender","hasOpenClass","isClosing","withShouldRender","useDerivedState","getIsClosing","useDerivedSignal","useToggleClass","isDoubled","ariaLabel","forFormId","isSubmit","isPrimary","isSecondary","isSmall","isSimple","isText","isLoading","isRound","isDestructive","shouldStopPropagation","onMouseDown","onContextMenu","isClicked","setIsClicked","handleClick","loadingClassName","loadingInit","loadingStart","primary","secondary","sizeSmall","disabled","destructive","clicked","LoadingDots","loadingDots","containerId","elementRef","TeactDOM","CLOSE_DURATION_PORTRAIT","getModalCloseSignal","setModalCloseSignal","openNativeBottomSheetModals","FreezeWhenClosedModal","dialogRef","dialogClassName","titleClassName","contentClassName","doesWantToBeOpened","isTemporarilyClosed","isCompact","nativeBottomSheetKey","forceFullNative","forceBottomSheet","isInAppLock","noResetFullNativeOnBlur","noBackdrop","noBackdropClose","header","hasCloseButton","onCloseProp","modalRef","localDialogRef","swipeDownDateRef","getInAppBrowser","enable","useHideBrowser","animationDuration","isSlideUp","toggleSelfFullSize","isFullSize","isBrowserHidden","setIsBrowserHidden","isDelegatingToNative","isDelegating","shouldOpen","prevShouldOpen","_closeCurrent","closeNext","delegate","release","useDelegatingBottomSheet","noResetHeightOnBlur","dialogEl","openSelf","offsetHeight","backgroundColor","closeSelf","isDelegatedAndOpen","safeArea","setSafeArea","maxHeight","_ref4","prevForceFullNative","blurTimeout","onFocus","opacity","scrollTop","useDelegatedBottomSheet","lastScrollRef","scrollEl","getCanCloseModal","fullClassName","modal","slideUpAnimation","inAppLock","backdropFullClass","backdrop","contentFullClassName","contentCompact","Portal","tabIndex","role","dialog","header_wideContent","header_noClose","singleTitle","Button","closeButton","closeIcon","isAppLockActive","currentBrowserOptions","animationLevel","setupDappBridge","cleanupDappBridge","useInAppBrowserBridgeProvider","bridgeInjectionCode","features","maxMessages","types","appName","appVersion","maxProtocolVersion","tonConnectGetDeviceInfo","handleBrowserClose","openBrowser","isShown","disable","browserTitle","browserSubtitle","ADDITIONAL_INAPP_BROWSER_OPTIONS","cordova","InAppBrowser","INAPP_BROWSER_OPTIONS","originalHide","originalShow","originalClose","closedPromise","_inAppBrowser","closeAllOverlays","_getInAppBrowser","closeAnyModal","closeMediaViewer","SUBPROJECT_HOST_ENDING","openUrl","isSubproject","allowedOrigin","isInIframeWhitelist","couldOpenApp","completed","openAppSafe","host","handleUrlClick","resolveRenderPromise","renderPromise","TON_PROTOCOL","TONCONNECT_PROTOCOL","TONCONNECT_PROTOCOL_SELF","SELF_PROTOCOL","SELF_UNIVERSAL_URLS","TONCONNECT_UNIVERSAL_URL","CHECKIN_URL","DeeplinkCommand","urlAfterSignIn","urlOptions","isTonDeeplink","isTonConnectDeeplink","isSelfDeeplink","processDeeplink","returnUrl","processTonConnectDeeplink","deeplink","convertSelfDeeplinkToSelfUrl","searchParams","command","isLedger","ledger","CheckinWithR","_pathname$match","Giveaway","_pathname$match2","giveawayId","Swap","showError","startSwap","amountIn","toNumberOrEmptyString","BuyWithCrypto","BuyWithCard","openOnRampWidgetModal","Stake","startStaking","Transfer","processTonDeeplink","convertSelfUrlToTonDeeplink","Explore","closeSettings","openExplore","setActiveContentTab","_getGlobal$exploreDat","matchingSite","exploreData","sites","processSelfDeeplink","startTransferParams","parseTonDeeplink","startTransfer","setLandscapeActionsActiveTabIndex","adaptedDeeplink","getDeeplinkSearchParam","binPayload","jettonAddress","stateInit","replaceAllSpacesWithPlus","rawParseTonDeeplink","transferParams","globalToken","minter","selectTokenByMinterAddress","accountToken","accountTokens","selectAccountTokenBySlug","accountNft","selectCurrentAccountNftByAddress","omitProtocol","forceHttpsProtocol","parseDeeplinkTransferParams","tonDeeplink","selfUniversalUrl","param","PushNotifications","selectNotificationTonAddressesSlow","maxCount","resultCount","getCapacitorPlatform","nextUpdatePushNotifications","handlePushNotificationActionPerformed","notification","showAnyAccountTx","showAnyAccountTokenActivity","openAnyAccountStakingInfo","switchAccountAndOpenUrl","openDomainRenewalModal","notificationData","action","requiredAccount","selectAccountIdByAddress","domainAddress","addresses","handlePushNotificationRegistration","userToken","registerNotifications","notificationAccounts","pushNotifications","enabledAccounts","capture","statusBarHeight","capacitorAppLaunchDeeplinkProcessedAt","updateSafeAreaValues","safeAreaInsets","getStatusBarHeight","getIsNativeBiometricAuthSupported","getIsFaceIdAvailable","getIsTouchIdAvailable","getDoesUsePinPad","ClipboardWeb","clipboard","writeText","ClipboardItem","clipboardItemInput","readText","clipboardItems","clipboardBlob","getType","_getBlobData","readAsText","onloadend","Clipboard","Haptics","HapticsWeb","vibrate","HapticFeedback","impactOccurred","impact","vibrateOnError","notificationOccurred","Medium","vibrateOnSuccess","withPauseOnEnd","textCopyEl","copyTextToClipboard","readClipboardContent","readTextFromClipboard","isMnemonicPrivateKey","mnemonic","EQUAL","DELETE","__delete","DELETE_ALL_CHILDREN","__deleteAllChildren","deepDiff","value2","object1","object2","keys1","keys2","subValue1","subValue2","subDiff","deepMerge","oldValue","reduceDiff","getIsInBackgroundLocal","setIsInBackground","hasFocus","getIsInBackground","handleBlur","handleFocus","useBackgroundMode","lastOnBlur","lastOnFocus","isBackgroundModeActive","BroadcastChannel","initMultitab","noPubGlobal","onGlobalChange","handleGlobalChange","handleMultitabMessage","omitLocalOnlyKeys","callActionInMain","callActionInNative","INITIAL_STATE","appState","Auth","auth","none","biometrics","None","hardware","hardwareState","Connect","currentDomainRenewal","currentDomainLinking","slippage","currentDappSignData","currentStaking","tokenPriceHistory","Initial","areTinyTransfersHidden","canPlaySounds","isAppLockEnabled","autolockValue","dialogs","notifications","stateVersion","isLimitedRegion","isOnRampDisabled","isNftBuyingDisabled","mediaViewer","areDeepEqual","type1","isArray1","member1","key1","key2","isPartialDeepEqual","newPartial","updateAuth","authUpdate","updateAccounts","setIsPinAccepted","isPinAccepted","clearIsPinAccepted","createAccount","partial","titlePostfix","isMnemonicImported","importedAt","shouldForceAccountEdit","_account$title","accountAmount","isMainnet","viewWalletsCount","titlePrefix","postfix","count","updateAccount","createAccountsFromGlobal","firstNetworkAccount","secondNetworkAccount","updateCurrentAccountState","updateAccountState","withDeepCompare","doesAccountExist","updateSettings","settingsUpdate","updateAccountSettings","updateCurrentAccountSettings","updateBiometrics","biometricsUpdate","updateCurrentAccountId","_global$auth$firstNet","_global$auth$secondNe","shouldAvoidSwapEstimation","isEstimating","Blockchain","Password","isSwapEstimateInputEqual","swap1","swap2","amountKey","inputSource","In","isMaxAmount","isSwapFormFilled","getSwapEstimateResetParams","amountOut","amountOutMin","priceImpact","limits","dieselStatus","estimates","bestRateDexLabel","realNetworkFee","swapFee","swapFeePercent","ourFee","ourFeePercent","dieselFee","rawUpdateCurrentSwap","updateCurrentSwap","doAvoidEstimation","globalBefore","globalAfter","doesSwapChangeRequireEstimation","_ref5","doesSwapChangeRequireDexUnselect","isDexLabelChanged","clearCurrentSwap","updateCurrentTransferByCheckResult","preserveMaxTransferAmount","updateCurrentTransfer","toAddressName","addressName","clearCurrentTransfer","prevGlobal","nextGlobal","previousMaxAmount","updateCurrentTransferLoading","setCurrentTransferAddress","updateCurrentSignature","currentSignature","updateActivitiesIsLoading","updateActivitiesIsHistoryEndReached","isReached","isHistoryEndReachedBySlug","isMainHistoryEndReached","updateActivitiesIsLoadingByAccount","updateCurrentStaking","updateAccountStaking","updateDappConnectRequest","dappConnectRequest","clearDappConnectRequest","updateCurrentDappTransfer","clearCurrentDappTransfer","updateCurrentDappSignData","clearCurrentDappSignData","addNewActivities","newActivities","idsBySlug","idsMain","mergeSortedActivityIds","newIdsBySlug","buildActivityIdsBySlug","_pendingActivityIds","mergeIdsBySlug","getNewestActivitiesBySlug","removeActivities","_ids","_idsMain","_localActivityIds","affectedTokenSlugs","activityIds","tokenSlugs","getActivityListTokenSlugs","pendingIds","setIsInitialActivitiesLoadedTrue","_activities$isFirstTr","isFirstTransactionsLoaded","ids0","ids1","id0","id1","newestActivityId","oldIdsBySlug","activityById","newIds","addNft","shouldAppendToEnd","orderedAddresses","updateNft","_nfts$byAddress","updateAccountSettingsBackgroundNft","_settings$cardBackgro","cardBackgroundNft","updateVesting","updateMintCards","currentMintCard","updateCurrentDomainRenewal","updateCurrentDomainLinking","updateHardware","hardwareUpdate","resetHardware","switchAccount","newNetwork","switchAccountAndClearGlobal","changeNetwork","selectMnemonicForCheck","worldsCount","rnd","reduceGlobalForDebug","reduced","_ref15","getIsTinyOrScamTransaction","resolveSwapAssetId","asset","resolveSwapAsset","anyId","getIsSupportedChain","getIsInternalSwap","isMultichain","updateTokenInfo","getTonOperationFees","operation","gas","real","getTonStakingFees","claim","getUnstakeTime","unlockTime","getStakingTitle","stakingType","getStakingStateStatus","getIsActiveStakingState","unclaimedRewards","getIsLongUnstake","getFullStakingBalance","Main","isFirstAccount","isPasswordPresent","nextAuthState","createBackup","createWallet","createPin","createBiometrics","createPassword","checkPassword","promiseCalls","forceAddingTonOnlyAccount","mnemonicCheckIndexes","afterCreatePassword","requestConfetti","importWalletConfirmBiometrics","confirmBiometrics","biometricsStep","pin","isImporting","importWalletConfirmPin","confirmPin","importWalletCreateNativeBiometrics","createNativeBiometrics","skipCreateNativeBiometrics","importWalletCreatePin","isPasswordNumeric","createHardwareAccounts","withCredential","authApi","isAddAccountModalOpen","afterConfirmDisclaimer","disclaimer","disclaimerAndBackup","hardwareSelectedIndices","ledgerApi","wallets","wallet","importLedgerWallet","addHardwareAccounts","_ref6","_wallets$","nextActiveAccountId","updatedGlobal","walletInfo","driver","areSettingsOpen","hardwareWallet","tryAddNotificationAccount","afterSignIn","resetApiSettings","_ref7","isBackupRequired","importWalletCheckPassword","importWallet","about","_ref8","InvalidMnemonic","hasAccounts","importWalletCreateBiometrics","importWalletCreatePassword","confirmDisclaimer","ready","_ref9","_ref0","_ref1","TurnOnRegistration","TurnOnVerification","TurnOnPasswordConfirmation","TurnOnComplete","setInMemoryPassword","_ref10","oldPassword","TurnOffComplete","TurnOffWarning","TurnOffBiometricConfirmation","TurnOffCreatePassword","_ref11","nativeBiometricsError","verifyTelegramBiometricIdentity","safetyRules","mnemonicPage","checkWords","isBackupCreated","afterCheckMnemonic","accountConfigJson","storageData","showNotification","Unexpected","_ref12","isNew","currentWalletTitle","ledgerInfo","_ref13","_ref14","resolvedAddresses","closeAddAccountModal","importViewAccount","isImportModalOpen","shouldLoadWithBudget","shouldFetchMore","fetchedActivities","tokenIds","toTxId","toTimestamp","filteredResult","newById","newOrderedIds","currentActivities","fetchTokenTransactions","_selectAccountState3","tronTokenSlugs","selectAccountTxTokenSlugs","selectLastMainTxTimestamp","fetchAllTransactions","isMnemonicChecked","promiseId","isSigned","_global$tokenInfo","importedSlugs","_global$tokenInfo$byS","_selectAccountState4","importToken","apiToken","shouldUpdateBalance","changeBalance","reconnectLedger","showDialog","verifyAddress","activeContentTab","apiSwapAsset","_global$walletVersion","currentVersion","walletVersions","getDappConnectionUniqueId","_sseOptions","_sse","sseOptions","appClientId","sse","cancelDappOperation","callInMain","clearState","submitDappOperationPassword","updateState","apiUpdateDappOperation","isStateActive","currentPromiseId","isAnyDappModalActive","connectionType","explainSwapFee","shouldSwapBeGasless","nativeTokenBalance","getBigNativeTokenInBalance","getExcessFee","shouldShowOurFee","isExact","networkTerms","addOurFeeToTerms","networkFeeCoveredByDiesel","bigMax","realNetworkTerms","explainGaslessSwapFee","isNativeIn","explainGasfullSwapFee","getMaxSwapAmount","swapType","tokenInBalance","tokenIn","fullNetworkFee","maxAmount","isInsufficientNative","_findChainConfig3","nativeTokenInBalance","isOurFeeNative","stakingState","StakeInitial","UnstakeInitial","isUnstaking","UnstakeConnectHardware","UnstakePassword","tokenAmount","StakeConnectHardware","StakePassword","unstakeAmount","isLongUnstakeRequested","UnstakeComplete","StakeComplete","UnstakeConfirmHardware","StakeConfirmHardware","stakingBalance","submitLedgerUnstake","submitLedgerStake","clearCurrentStaking","changeCurrentStaking","openStakingInfo","isStakingInfoModalOpen","shouldReopenModal","openStakingInfoOrStart","ClaimConnectHardware","ClaimPassword","_getTonStakingFees$cl","isEthenaStaking","ClaimComplete","ClaimConfirmHardware","_getTonStakingFees$cl2","submitLedgerStakingClaimOrUnlock","permissions","isPasswordRequired","getDapps","connectAccountId","proof","ConfirmHardware","signature","signLedgerProof","submitDappConnectHardware","vestingAddress","signedMessages","signLedgerTransactions","isTonConnect","submitDappTransferHardware2","brokenDapp","deleteDapp","updateConnectedDapps","dappLastOpenedDatesByUrl","clearConnectedDapps","connectedDapps","removeConnectedDapp","Info","isAddressRequired","addSiteToBrowserHistory","emulation","closeDappTransfer","WarningHardware","payloadToSign","closeDappSignData","isSse","_global$dappConnectRe","pairsCache","CACHE_DURATION","SERVER_ERRORS_MAP","NotEnoughLiquidity","InvalidPair","TooSmallAmount","buildSwapBuildRequest","_findChainConfig","currentDexLabel","tokenOut","toAmount","nativeTokenIn","toMinAmount","shouldTryDiesel","dexLabel","requiredState","swapId","requiredTokenInSlug","requiredTokenOutSlug","withResetAmount","shouldReset","shouldResetOnClose","swapBuildRequest","buildResult","swapHistoryItem","hashes","Complete","transfers","activityId","isMutlichainAccount","supportedChains","getSupportedChains","shouldSendTonTransaction","shouldSendTronTransaction","shouldSendTransaction","shouldSendTokenToExternalWallet","tonAddress","swapTransactionRequest","swapItem","WaitTokens","payinAddress","payoutAddress","payinExtraId","transferOptions","transferResult","_transferResult","newTokenInSlug","newTokenIn","adjustedAmountIn","newTokenOutSlug","newTokenOut","adjustedAmountOut","Out","initialGlobal","isEstimatingSwap","isEstimateInputIntact","swapUpdate","shouldStop","_global$swapPairs2","isLoaded","assetId","pairs","isTonTokenIn","pair","isTonTokenOut","countTonTokens","isReverseProhibited","swapPairs","loadSwapPairs","_global$swapPairs","isFromAmountMax","processNativeMaxSwap","estimateAmount","toncoinBalance","estimate","UnexpectedError","NotEnoughForFee","other","buildSwapEstimates","currentEstimate","newEstimates","proposedBestDexLabel","_findChainConfig2","selectedEstimate","availableEstimates","variant","networkFeeBigint","dieselFeeBigint","canAffordSwapEstimateVariant","chooseSwapEstimate","estimateDexSwap","onLine","txDraft","convertTransferFeesToSwapFees","fromMin","fromMax","ChangellyMinSwap","ChangellyMaxSwap","estimateCexSwap","finalGlobal","estimateSwapConcurrently","swaps","nonExistentIds","nonExistentSwaps","newEstimate","updateTokenPriceHistory","shouldEncrypt","withDiesel","isGaslessWithStars","isNftTransfer","isBase64Data","allowGasless","_result","_result2","Confirm","resolvedAddress","isToNewAddress","isToAddressNew","InsufficientBalance","_global$currentTransf","currentAccount","transferTokenChain","shouldShowSeedPhraseScamWarning","shouldShowScamWarning","_global$currentTransf2","_explainedFee$fullFee","_explainedFee$realFee","explainedFee","fullNativeFee","realNativeFee","chunks","chunk","batchResult","sentNftsCount","dieselAmount","_result3","_explainedFee$realFee2","rawPayload","parsedPayload","signedMessage","currentResult","submitLedgerNftTransfer","submitLedgerTransfer","isDieselAuthorizationStarted","NBS_INIT_TIMEOUT","createTransferOptions","globalState","cardsInfo","cardInfo","handleTransferResult","Done","isCardMinting","isNotcoinVouchers","submitTransferInitial","blacklistedNftAddresses","whitelistedNftAddresses","isUnhideNftModalOpen","selectedNftToUnhide","isCollection","selectedNftsToHide","currentNftForAttributes","unfreezeRequestedIds","isConfirmRequested","openVestingModal","unfreezeState","transferError","_settings$accentColor","cardBackgroundNftAddress","accentColorNftAddress","accentColorNft","isCardBackgroundNftOwned","isAccentColorNftOwned","accentColorIndex","createAbortableFunction","toReturnOnAbort","abort","deleteNotificationAccount","currentEnabledAccounts","deleted","newEnabledAccounts","deleteAllNotificationAccounts","createNotificationAccount","abortableSubscribeNotifications","abortableUnsubscribeNotifications","handleDomainOperationResult","prepareHardwareOperation","verifyPasswordAndUpdateState","operationType","createResult","notificationAddresses","addressKeys","withAbort","pushNotificationsAccount","updateNotificationAccount","isAvailable","newAccountId","shouldLoadDetails","newActivity","updateActivity","nftsByAddress","subResult","_selectCurrentAccount2","renewResult","submitLedgerDnsRenewal","currentAddress","walletAddress","checkAddressResult","_selectCurrentAccount4","submitLedgerDnsChangeWallet","walletAddressName","resolvedWalletAddress","chainBalances","_selectAccountSetting","newBalances","currentBalances","currentBalance","forcedSlugs","updateBalances","totalProfit","updateStakingDefault","stateWithBiggestBalance","state0","state1","nominators","existingTokens","existingToken","updateTokens","_global$swapTokenInfo","currentTokens","updateSwapTokens","currentNfts","isTelegramGift","addCollectionTab","isAuto","checkCardNftOwnership","newOwnerAddress","sentNft","selectedAddresses","removedNft","removeNft","ownerAddress","setCardBackgroundNft","installAccentColorFromNft","isOnSale","accountUpdate","domainByChain","isLimited","isCopyStorageEnabled","supportAccountsCount","countryCode","isAppUpdateRequired","shouldRestrictSwapsAndOnRamp","updateRestrictions","apiUpdateWalletVersions","isIncorrectTimeNotificationReceived","showIncorrectTimeError","vestingInfo","updateVestingInfo","isUpdating","secondAddress","secondAccountId","isTonProxyEnabled","isTonMagicEnabled","accountConfig","expirationByAddress","updatedNfts","existingNft","addUnorderedNfts","NativeAudio","NativeAudioWeb","DEBOUNCE_MS","audioContext","AudioContext","webkitAudioContext","audioBuffer","isSoundInitialized","initializeSounds","resume","audioSettings","assetPath","audioChannelNum","isUrl","isPreloaded","preload","incomingTransactionSound","decodeAudioData","decodedAudioBuffer","loadSound","playIncomingTransactionSound","play","createBufferSource","destination","mainActivities","allActivities","flat","fromTimestamp","mergeActivityIdsToMaxTime","_activities","putInitialActivities","localActivities","chainActivities","_global$byAccountId$a3","selectRecentNonLocalActivitiesSlow","hideOutdatedLocalActivities","fetchTransferDieselState","noForward","newConfirmedActivities","pendingActivities","replacedIds","replacePendingActivities","replaceMap","currentActivityId","newActivityId","replaceCurrentActivityId","oldSwapId","newSwapId","replaceCurrentSwapId","oldTxId","newTxId","replaceCurrentDomainRenewalId","replaceCurrentDomainLinkingId","replaceCurrentTransferId","notifyAboutNewActivities","mintCardActivity","_activity$nft","refundActivity","processCardMintingActivity","dataHex","clearCurrentSignature","apiUpdateDappConnect","_global$currentDappTr","apiUpdateDappLoading","apiUpdateDappCloseLoading","apiUpdateDappSendTransaction","apiUpdateDappSignData","ANIMATION_LEVEL_OPTIONS","switchAnimationLevel","levelClassName","currentLevel","afterInit","langCachePrefix","langCacheVersion","clearPreviousLangpacks","isNativeBiometricAuthEnabled","biometricsAvailableResult","useFallback","biometryType","FACE_ID","TOUCH_ID","isPushNotificationsAvailable","notificationStatus","checkPermissions","receive","requestPermissions","register","initNotificationsWithGlobal","initCapacitorWithGlobal","requestFullscreen","initTelegramWithGlobal","resetAuth","_global$settings$auth","newDialogs","existingMessageIndex","isToncoin","setDefaultSwapParams","changeTransferToken","currentActivityToken","isDefaultFirstTokenOutSwap","InvalidAmount","InvalidAddress","InvalidToAddress","StateInitWithoutBin","InvalidStateInit","DomainNotResolved","WalletNotInitialized","InvalidAddressFormat","PartialTransactionFailure","IncorrectDeviceTime","UnsuccesfulTransfer","InactiveContract","NotSupportedHardwareOperation","DebugError","icon","newNotifications","existingNotificationIndex","toggleDeeplinkHandler","isDeeplinkHookEnabled","isFromAllAccounts","otherNetwork","otherNetworkAccountIds","nextAccountId","settingsById","afterSignOut","prevAccountId","nextNewestActivityTimestamps","settingsByAccountId","BarcodeScanner","BarcodeScannerWeb","APP_VERSION_REGEX","IGNORE_TAGS","useHotkeys","hotkeys","shouldFireEvent","hotkey","alt","ctrl","meta","altKey","pressedKey","isExactHotkey","modifiers","reservedKeys","parseHotkey","getHotkeyMatcher","useThrottledCallback","deps","msOrSchedulerFn","noFirst","fnMemo","useDebouncedCallback","noLast","useWindowSize","initialWidth","initialScreenHeight","setWidth","setHeight","setScreenHeight","isResizing","setIsResizing","setIsResizingDebounced","throttledSetIsResizing","throttledSetSize","newWidth","newHeight","newScreenHeight","handleResize","getEncryptedPasswordSignal","setEncryptedPasswordSignal","encryptionKey","isMainStore","initEncryptionKey","subtle","generateKey","getHasInMemoryPassword","getInMemoryPassword","encryptedData","decryptedData","decrypt","iv","ciphertext","TextDecoder","setInMemoryPasswordSignal","_clearTimeout","startTime","intervalId","isCleared","clearInterval","setInterval","setReliableTimeout","passwordData","TextEncoder","encrypt","encrypted","ANIMATED_STICKERS_PATHS","hello","snitch","bill","thumbUp","holdTon","happy","noData","forge","wait","yeee","guard","helloPreview","snitchPreview","billPreview","thumbUpPreview","holdTonPreview","happyPreview","noDataPreview","forgePreview","waitPreview","runPreview","yeeePreview","guardPreview","coreWalletLogo","coreWalletLogoPreview","light","iconAdd","iconAddLight","iconClock","iconClockLight","iconClockBlue","iconClockLightBlue","iconClockGray","iconClockLightGray","iconClockGreen","iconClockLightGreen","iconClockPurple","iconClockLightPurple","iconClockPurpleWhite","iconClockLightPurpleWhite","iconClockRed","iconClockLightRed","iconEarn","iconEarnLight","iconEarnPurple","iconEarnLightPurple","iconSend","iconSendLight","iconSwap","iconSwapLight","preview","iconClockPreviewLight","iconClockPreviewLightBlue","iconClockPreviewLightGray","iconClockPreviewLightGreen","iconClockPreviewLightPurple","iconClockPreviewLightPurpleWhite","iconClockPreviewLightRed","dark","iconAddDark","iconClockDark","iconClockDarkBlue","iconClockDarkGray","iconClockDarkGreen","iconClockDarkPurple","iconClockDarkPurpleWhite","iconClockDarkRed","iconEarnDark","iconEarnDarkPurple","iconSendDark","iconSwapDark","iconClockPreviewDark","iconClockPreviewDarkBlue","iconClockPreviewDarkGray","iconClockPreviewDarkGreen","iconClockPreviewDarkPurple","iconClockPreviewDarkPurpleWhite","iconClockPreviewDarkRed","useFocusAfterAnimation","useMatchCount","countRef","prevPredicateRef","handleChange","currentAccountState","hasManyAccounts","accountStates","signOut","isLogOutFromAllAccounts","setIsLogOutFromAllAccounts","accountsWithoutBackups","_accountStates$id","handleLogOut","handleClose","shouldRenderWarningForAnotherAccounts","shouldRenderWarningForCurrentAccount","cancelButtonClassNames","modalStyles","shortButton","Modal","text_noExtraMargin","Checkbox","links","idx","buttons","buildStyle","useMediaTransition","mediaData","isMediaReady","RLottie","ensureRLottie","default","getRLottie","hex2rgb","hex","rgbToLab","rgb","z","startCallbacks","endCallbacks","useHeavyAnimation","onStart","lastOnStart","lastOnEnd","elementObserverMap","renderId","tgsUrl","playSegment","speed","noLoop","shouldStretch","quality","isLowPriority","forceInBackground","sharedCanvas","sharedCanvasCoords","onLoad","onEnded","onLoop","containerRef","viewId","animation","setAnimation","animationRef","playKey","playRef","playSegmentRef","rgbColor","isUnmountedRef","newAnimation","coords","setSpeed","throttledInit","refOrElement","onIntersectionChange","onIntersectionChangeRef","callbackManager","IntersectionObserver","unobserve","useSharedIntersectionObserver","_animationRef$current","removeView","playAnimation","shouldRestart","isFrozen","playAnimationOnRaf","pauseAnimation","isPlaying","prevNoLoop","setNoLoop","prevSharedCanvasCoords","setSharedCanvasCoords","changeData","usePriorityPlaybackCheck","noTransition","nonInteractive","otherProps","isAnimationLoaded","markAnimationLoaded","useFlag","handleLoad","setPlayKey","AnimatedSticker","loadedPreviewUrls","DEFAULT_SIZE","noAnimation","previewUrl","iconPreviewClass","thumbDataUri","noPreviewTransition","isPreviewLoaded","markPreviewLoaded","isAnimationReady","markAnimationReady","markAnimationNotReady","handlePreviewLoad","AnimatedIcon","label","placeholder","valueOverlay","inputMode","isRequired","isMultiline","hasError","inputArg","wrapperClassName","onKeyDown","isStatic","isPasswordVisible","setIsPasswordVisible","markHasFocus","unmarkHasFocus","showValueOverlay","handleInput","finalType","inputFullClass","input_password","input_withvalueOverlay","labelFullClass","label_forPassword","label_error","htmlFor","inputContainer","scrollHeight","required","static","visibilityToggle","visibilityToggle_push","handleTogglePasswordVisibility","label_errorBottom","waitForAnimationEnd","animationName","fallbackMs","waitForEndEvent","detailedName","isHandled","handleAnimationEnd","TransitionEvent","propertyName","AnimationEvent","INERTIA_EASING","SWIPE_DISABLED_CLASS_NAME","swipeOffsets","cancelCurrentReleaseAnimation","isSwipeActive","captureControlledSwipe","_options$onSwipeLeftS","onSwipeLeftStart","_options$onSwipeRight","onSwipeRightStart","_onDrag","_onRelease","onCancel","updateAnimationProgress","elements","getAnimations","currentTime","getTiming","extractPositionFromTransform","transformRule","FALLBACK_ANIMATION_END","CLASSES","ACTIVE_SLIDE_CLASS_NAME","TO_SLIDE_CLASS_NAME","activeKey","nextKey","prevKey","renderCount","shouldRestoreHeight","shouldCleanup","cleanupExceptionKey","shouldWrap","wrapExceptionKey","slideClassName","withSwipeControl","onStop","onContainerClick","currentKeyRef","shouldDisableAnimation","rendersRef","prevActiveKey","isAnimatingRef","isSwipeJustCancelledRef","hasActiveKeyChanged","isBackwards","preservedRender","isSlideOptimized","prevActiveIndex","activeIndex","childElements","childElement","transition","transform","toSlide","fromSlide","endHeavyAnimation","clientHeight","performSlideOptimized","onAnimationEnd","watchedNode","giveUpAnimationEnd","currentSlide","nextSlide","onCancelForTransition","_cancelCurrentRelease","targetPosition","KeyframeEffect","keyframe","getKeyframes","position","extractAnimationEndPosition","currentDirection","animationTimingFunction","initialPositionPx","distance","dragOffset","newProgress","onCancelForClient","isRevertSwipe","cancel","releaseProgress","allowSwipeControlForTransition","flexBasis","asFastList","contents","render","rendered","DEFAULT_PIN_LENGTH","RESET_STATE_DELAY_MS","stickToFirst","resetStateDelayMs","isMinified","topContent","onBiometricsClick","onClearError","onSubmit","onLogOutClick","isFaceId","canRenderBackspace","isSuccess","prevIsPinAccepted","arePinButtonsDisabled","shouldSuggestLogout","clearScrollPatch","char","handleBackspaceClick","dotsClassName","renderDots","PinPadButton","Transition","STICKER_SIZE","getHandleBiometricsSignal","setHandleBiometricsSignal","triggerPasswordFormHandleBiometrics","isAutoConfirmEnabled","isBiometricAuthEnabled","cancelLabel","submitLabel","stickerSize","help","containerClassName","pinPadClassName","withCloseButton","noAnimatedIcon","inputWrapperClassName","forceBiometricsInMain","skipAuthScreen","openSettings","setIsAutoConfirmEnabled","memoizedPasswordRef","hasInMemoryPassword","inMemoryPasswordRef","useInMemoryPassword","showOnlyConfirmScreen","passwordRef","setPassword","localError","setLocalError","wrongAttempts","setWrongAttempts","isResetBiometricsWarningOpen","openResetBiometricsWarning","closeResetBiometricsWarning","isSubmitDisabled","canUsePinPad","isLogOutModalOpened","openLogOutModal","closeLogOutModal","showStorageClearedDialog","support_link","rel","footerButtons","useStorageClearedDialog","submitCallback","passwordToReturn","enteredPassword","passwordVerified","handleSubmit","handleBiometrics","biometricPassword","handleClearError","handleOpenSettings","handleAutoConfirmChange","handleOpenLogOutModal","shouldRenderFullWidthButton","footerButtonsClassName","footerButtonFullWidth","renderFooterButtons","buttonHalfWidth","buttonFullWidth","renderAutoConfirmCheckbox","autoConfirmCheckbox","shouldRenderAutoConfirmCheckbox","getPinPadTitle","actionName","pinPadHeader","AnimatedIconWithPreview","PinPad","LogOutModal","transitionContent","sticker","renderingError","renderBiometricPrompt","Input","errorMessage","logOutWrapper","logOutButton","detailsIcon","setTheme","preloadedImageUrls","loading","isSlow","imageClassName","fallback","markIsLoaded","markHasError","shouldShowFallback","divRef","draggable","referrerPolicy","appTheme","useAppTheme","logoPath","coreWalletLogoPath","logoLightPath","logoDarkPath","Image","innerContentTopPosition","shouldHideBiometrics","passwordError","setPasswordError","handleSubmitPassword","handlePasswordChange","PasswordForm","Logo","handleChangeSlideForBiometricAuth","ACTIVATION_EVENT_NAMES","ACTIVATION_EVENT_OPTIONS","SLIDES","getActivitySignal","setActivitySignal","isNonNativeBiometricAuthEnabled","canRender","isManualLockActive","appLockHideBiometrics","submitAppLockActivityEvent","setIsManualLockActive","setIsAppLockActive","isLocked","lock","unlock","lockReason","isFirstRunRef","isLockedRef","lockReasonRef","useAppLockState","shouldRenderUi","showUi","hideUi","lastActivityTime","unfixSlide","slideForBiometricAuth","setSlideForBiometricAuth","getDefaultSlideForBiometricAuth","passwordForm","setInnerContentTopPosition","isFixedState","isFixingSlideEnv","fixSlide","innerContent","getBoundingClientRect","useContentSlide","handleActivity","handleActivityThrottled","afterUnlockCallback","autolockPeriod","transitionRef","forceLockApp","_getInAppBrowser2","blur","handleLock","handleLockScreenHotkey","transitionKey","handleUnlockIntent","Space","UnlockButtonSlide","PasswordFormSlide","APP_VERSION_URL","showActivityInfo","showTokenActivity","savedAddresses","currentTokenPeriod","isAuthFlow","isMnemonicImport","addAccount2","authState","startImportingWallet","startCreatingWallet","renameAccount","renameNotificationAccount","isBackupWalletModalOpen","isInvestorViewEnabled","landscapeActionsActiveTabIndex","isSecurityWarningHidden","_ref16","_ref17","shouldShow","alwaysShownSlugsSet","alwaysHiddenSlugsSet","_ref18","_accountSettings$orde","_accountSettings$impo","remoteVersion","sanitizedRemoteVersion","getIsAppUpdateNeeded","isAppUpdateAvailable","latestAppVersion","confettiRequestedAt","showScanQrPopup","closeScanQrPopup","handleQrCode","currentQrScan","camera","isQrScannerOpen","_ref19","linkParams","plainAddressData","qrData","newChain","getChainFromAddress","parsePlainAddressQr","_ref20","_ref21","chainForOnRampWidgetModal","_ref22","mediaId","mediaType","hiddenNfts","noGhostAnimation","_ref23","receiveModalChain","isReceiveModalOpen","invoiceTokenSlug","isInvoiceModalOpen","isLoadingOverlayOpen","_ref24","isExploreOpen","_ref25","isHidden","isSensitiveDataHidden","_ref26","areAssetsActive","Assets","isWalletTabActive","closeExplore","closeSiteCategory","_ref27","layout","changeAppLayout","clearDappConnectRequestError","transactionIdx","viewTransactionOnIdx","inMemoryPassword","ConnectHardware","submitDappTransferPassword","browserHistory","_accountState$browser","newHistory","currentUrl","currentSiteCategoryId","submitDappSignDataPassword","connectLedger","transport","noRetry","noRemoteTab","Connecting","hardwareWallets","isLedgerConnected","isTonAppConnected","_global$hardware$avai","Failed","availableTransports","lastUsedTransport","WaitingForRemoteTab","popup","connectLedgerViaRemoteTab","waitLedgerTonApp","lastIndex","hardwareAccounts","hardwareAccountIndexes","selectLedgerAccountIndexToImport","currentHardwareAddresses","getNextLedgerWallets","getLedgerWallets","nextHardwareState","ConnectedWithSingleWallet","ConnectedWithSeveralWallets","isLedgerDisconnected","Ledger","isHardwareModalOpen","isBluetoothAvailable","isUsbAvailable","detectAvailableTransports","hasUsbDevice","initializeHardwareWalletConnection","oldHardwareWallets","prevSettings","isFinalCall","LedgerConnectHardware","currentCollectionAddress","addToSelectedAddresses","whitelistedNftAddressesSet","blacklistedNftAddressesSet","accountNfts","removeFromSelectedAddresses","wasTelegramGiftsAutoAdded","existingCollectionTabs","collectionTabs","isVestingModalOpen","allSlugs","newOrderedSlugs","Activity","_payload$nfts","rest","nftTokenSlug","previousFeeTokenSlug","nextFeeTokenSlug","shouldClearFee","newToken","submitTransferPassword","isExists","ACCENT_COLORS","useAccentColor","elementRefOrBody","accentColor","getAccentColorIndexFromNft","mtwCardType","mtwCardBorderShineType","UPDATE_THROTTLE","updateCacheThrottled","updateCache","updateCacheForced","unsubscribeFromBeforeUnload","preloadedData","isCaching","clearCaching","_unsubscribeFromBefor","getUsedTokenSlugs","reducedGlobal","usedTokenSlugs","_reducedGlobal$byAcco","transactionId","reduceByAccountId","_state$nfts","_state$stakingHistory","accountTokenSlugs","getAccountTokenSlugs","reducedIdsMain","pickVisibleActivities","reducedIdsBySlug","reducedNewestActivitiesBySlug","reducedIds","reduceAccountActivities","_Object$values$","reduceAccountStaking","visibleIdCount","shouldCacheActivity","initialState","timeEnd","_cached$tokenInfo","backupWallet","oldId","newId","testnetAccountId","clearActivities","areTokensWithNoBalanceHidden","areTokensWithNoPriceHidden","exceptionSlugs","_cached$accounts","isHardware","quote","dappLastOpenedDatesByOrigin","migrateCache","loadMemoryCache","loadCache","initLedgerPage","selectHasSession","isImproved","testAndImprove","frames","lastFrameAt","mean","containerEl","boosterEl","improveView","ElectronEvent","focusScroller","originalFocus","isProgrammaticFocus","patchedFocus","_originalFocus","preventScroll","scrollToActiveElement","install","uninstall","createFocusScroller","enforceInstantScroll","scrollTarget","scrollPosition","focusScrollPosition","scrollIntoView","block","behavior","IS_DISABLED","tabKey","Filesystem","FilesystemWeb","Share","ShareWeb","shareUrl","shareData","tryCapacitorShare","tryNavigatorShare","share","useCurrentOrPrev","shouldForceCurrent","shouldUseSelectedName","shouldTranslate","iconClassName","iconOverlayClassName","fontIconClassName","itemClassName","itemDescriptionClassName","displayedName","dangerous","itemIcon","itemMainIcon","overlayIcon","itemOverlayIcon","fontIcon","itemName","description","itemDescription","captureEscKeyListener","captureKeyboardListener","POSITIONING","EMPTY_RECT","applyStaticOptions","bubbleRef","anchor","positionX","positionY","transformOriginX","transformOriginY","bubbleStyle","bubbleEl","finalStyle","transformOrigin","ANIMATION_DURATION","menuRef","bubbleClassName","autoClose","shouldSkipTransition","withPortal","noCloseOnBackdrop","onMouseEnter","onMouseLeave","positionOptions","options2","isDynamicPositionOptions","staticOptions","getRootElement","getMenuElement","getTriggerElement","getLayout","withMaxHeight","triggerRect","rootRect","menuDimensions","triggerEl","rootEl","menuEl","extraMarginTop","menuElMinWidth","marginTop","gatherBounds","menuWidth","preferredPositionX","determineHorizontalPosition","menuHeight","topShiftY","extraTopPadding","isDense","doNotCoverTrigger","preferredPositionY","hasSpaceBelow","hasSpaceAbove","yWithTopShift","determineVerticalPosition","finalCoordinates","coordinates","shouldAvoidNegativePosition","centerHorizontally","leftWithPossibleNegative","addedXForMenuPositioning","applyBoundaryConstraints","positionResult","portalOffset","offsetX","offsetY","calculateTransformOrigin","processDynamically","useMenuPosition","menu","useVirtualBackdrop","fullBubbleClassName","bubble","inPortal","selectedValue","menuAnchor","menuPositionX","menuPositionY","shouldTranslateOptions","buttonClassName","onSelect","menuPositionOptions","handleItemClick","Menu","fullButtonClassName","item_with_icon","withDelimiter","delimiter","withDelimiterAfter","delimiterAfter","item_selected","DropdownItemContent","withNotch","closeClassName","menuItems","onBackButtonClick","onMenuItemClick","menuButtonRef","setMenuAnchor","hasMenu","isMenuOpen","closeMenu","handleMenuButtonClick","header_back","header_backIcon","menuButton","menuIcon","DropdownMenu","TITLES","MENU_ITEMS","iframeRef","iframe","contentWindow","useIFrameBridgeProvider","renderingTitle","handleMenuItemClick","ModalHeader","allow","useIntersectionObserver","rootCallback","rootRef","throttleMs","throttleScheduler","debounceMs","shouldSkipFirst","margin","controllerRef","rootCallbackRef","freezeFlagsRef","onUnfreezeRef","freeze","unfreeze","targetCallback","entriesAccumulator","observerCallback","observerCallbackSync","root","rootMargin","initController","controller","useGetIsIntersecting","targetRef","getIsIntersecting","setIsIntersecting","lastCallback","useOnIntersect","isIntersecting","observeIntersection","savedCallback","handleReload","reload","appInactivePathWebP","appInactivePathPng","app_name","useScrolledState","isAtBeginning","setIsAtBeginning","isAtEnd","setIsAtEnd","isScrolled","handleScroll","PATH_BY_EMOJI","loadedImages","markLoaded","isInsideModal","headerClassName","handleBackClick","handleContentScroll","aboutExtensionTitle","slide","modalHeader","headerBack","iconChevron","headerTitle","content_noScroll","onScroll","logo","titleLink","blockAbout","heading","Emoji","ninja","unicorn","extension_link","github","github_link","telegram","community_link","aboutFooterWrapper","aboutFooterContent","dotLarge","cleanAuthError","addAccount","container_scrollable","suggestions","suggest","embedded","suggestion","nextId","labelText","suggestionsPosition","markFocus","unmarkFocus","setHasError","filteredSuggestions","setFilteredSuggestions","activeSuggestionIndex","setActiveSuggestionIndex","areSuggestionsShown","setAreSuggestionsShown","wordlist","setWordlist","shouldRenderSuggestions","words","noError","isCorrectMnemonic","processSuggestions","userInput","unLinked","handleEnter","suggestedValue","nextInput","getElementById","select","wrapper_focus","wrapper_error","SuggestionList","touched","onPaste","pastedValue","clipboardData","getData","_checkIndexes$map","checkIndexes","descriptionClassName","formClassName","errorClassName","setWords","hasMnemonicError","setHasMnemonicError","handleMnemonicCheckSubmit","answer","handleSetWord","InputMnemonic","closeCheckWordsPage","CheckWordsForm","openMnemonicPage","headerBackBlock","CheckWordsContent","START_BIOMETRICS_CONFIRMATION_DELAY_MS","afterCreateBiometrics","cancelCreateBiometrics","useTimeout","shouldRenderSteps","shouldRenderError","biometricsError","buttons__inner","btn","btnHalfWidth","cancelConfirmPin","pinConfirm","setPinConfirm","setError","isConfirmed","setIsConfirmed","containerFullSize","skipCheckMnemonic","openAuthBackupWalletModal","canSkipMnemonicCheck","info__space","btn_wide","btn_single","btn_push","startCreatingBiometrics","skipCreateBiometrics","btn_text","afterCreateNativeBiometrics","isTouchId","faceIdSvg","touchIdSvg","biometricsIcon","biometricsTitle","biometricsSubtitle","SPECIAL_CHARS_REGEX","formId","isMobile","firstInputRef","isJustSubmitted","setIsJustSubmitted","firstPassword","setFirstPassword","secondPassword","setSecondPassword","isPasswordFocused","markPasswordFocused","unmarkPasswordFocused","isWeakPasswordModalOpen","openWeakPasswordModal","closeWeakPasswordModal","isPasswordsNotEqual","setIsPasswordsNotEqual","isSecondPasswordFocused","markSecondPasswordFocused","unmarkSecondPasswordFocused","canSubmit","validation","requiredMinLength","requiredLength","isOnlyNumbers","invalidLength","setInvalidLength","noNumber","setNoNumber","noUpperCase","setNoUpperCase","noLowerCase","setNoLowerCase","noSpecialChar","setNoSpecialChar","noEqual","setNoEqual","isInvalidLength","usePasswordValidation","handleFirstPasswordChange","handleSecondPasswordChange","isWeakPassword","rule","formWidgets","passwordRules","getValidationRuleClass","renderErrors","buttonsNoExtraSpace","ruleHasError","passwordRule","invalid","valid","getFormId","withDescription","titleSmallMargin","CreatePasswordForm","setPin","INTERVAL","markOne","two","markTwo","three","markThree","oneRef","twoRef","threeRef","counterTitle","counterDigit","onSkip","handleBackupClick","disclaimerBackupDialog","backupNotice","backupNoticeButtons","btn_mini","isImport","cancelDisclaimer","isInformationConfirmed","markInformationConfirmed","unmarkInformationConfirmed","setIsInformationConfirmed","handleCloseBackupWarningModal","handleSkipMnemonic","stickerAndTitle","infoBlock","informationCheckbox","informationCheckboxContent","AuthBackupWarning","MNEMONIC_INPUTS","MAX_LENGTH","afterImportMnemonic","setMnemonic","handleMnemonicSet","pastedMnemonic","_document$activeEleme","handlePasteMnemonic","pastedText","_document$activeEleme2","parsePastedText","useClipboardPaste","handlePaste","mnemonicValues","handleCancel","title_afterSmallSticker","infoSmallFont","infoPull","importingContent","getSuggestPosition","footerError","footerButton","w","inputRef","isInvalidAddress","setIsInvalidAddress","transitionContentWrapper","_inputRef$current","isValid","viewModeSticker","customStickerClassName","customButtonWrapperClassName","isFullSizeButton","isFirstCheckboxSelected","isSecondCheckboxSelected","isThirdCheckboxSelected","textFirst","textSecond","textThird","onFirstCheckboxClick","onSecondCheckboxClick","onThirdCheckboxClick","openCreateBackUpPage","firstChecked","setFirstChecked","secondChecked","setSecondChecked","thirdChecked","setThirdChecked","SafetyRulesContent","word","buttonText","SecretWordsList","openCheckWordsPage","wordsCount","containerAlignTop","SecretWordsContent","openAbout","openHardwareWalletModal","openAuthImportWalletModal","isLogoReady","markLogoReady","logoRef","btn_about","importButtonsBlock","importButtonsBlockSimple","importText","importButtons","RENDER_COUNT","closeAbout","closeImportViewAccount","renderingAuthState","setPrevKey","setNextKey","updateRenderingKeys","renderAuthScreen","isFrom","AuthStart","AuthCreatingWallet","AuthCheckPassword","AuthCreatePin","AuthConfirmPin","AuthCreateBiometrics","AuthConfirmBiometrics","AuthCreateNativeBiometrics","AuthCreatePassword","AuthCreateBackup","AuthDisclaimer","AuthImportMnemonic","SettingsAbout","aboutHeader","AuthSafetyRules","AuthSecretWords","AuthCheckWords","AuthImportViewAccount","transitionContainer","transitionSlide","spinner","inner","Spinner","rightItem","startImportViewAccount","closeAuthImportWalletModal","handleSecretWordsClick","handleImportHardwareWalletClick","handleImportViewAccountClick","importModalContent","actionsSection","ListItem","resolveSlideTransitionName","useModalTransitionKeys","renderingKey","updateNextKey","useCachedImage","imageUrl","useAsync","setIsLoading","setResult","wasCancelled","cachedResponse","createObjectURL","statusText","clone","getCachedImageUrl","revokeObjectURL","useCardCustomization","cardNft","mtwCardTextType","withTextGradient","mtwCardTextTypeClass","backgroundImageUrl","classNames","borderShineType","canEditAccount","onEdit","isViewMode","addressOrMultichain","mtwCardClassNames","withCheckbox","customCard","account_current","account_disabled","account_inactive","accountName","accountFooter","accountAddress","accountCheckMark","accountCheckMark_active","accountLength","accounts_single","accounts_two","ConfirmTransactionState","onTryAgain","activeState","setActiveState","Waiting","renderContent","isActiveSlide","textBlock","textBlock_small","actionBlock","actionBlock_single","button_single","renderWaitingConfirm","isErrorDetailed","declinedLabel","declinedLabelDetailed","renderTryAgain","DEFAULT_ARROW","DEFAULT_MENU_POSITION_X","menuClassName","arrow","buttonPrefix","openMenu","withMenu","isFullyInteractive","selectedItem","handleSelect","interactive","wide","buttonFullClassName","buttonSuffix","buttonIcon","TRANSPORT_NAMES","usb","bluetooth","onConnected","initializeHardwareWalletModal","selectedTransport","setSelectedTransport","isLedgerFailed","isTonAppFailed","isConnected","isConnecting","isWaitingForRemoteTab","shouldCloseOnCancel","renderingAvailableTransports","shouldRenderAvailableTransports","availableTransportsRef","prevLastUsedTransport","handleConnected","isSingleWallet","handleCloseWithRemoteTab","closeAction","getLedgerIconSrc","iconData","desktop","ledgerDesktopDarkSrc","ledgerDesktopSrc","mobileUsb","ledgerMobileUsbDarkSrc","ledgerMobileUsbSrc","ios","ledgerIosDarkSrc","ledgerIosSrc","mobileBluetooth","ledgerMobileBluetoothDarkSrc","ledgerMobileBluetoothSrc","renderScreen","settingsStyles","containerStatic","iconBlock","mobile","iconBlockSlideStatic","iconBlockSlide","ledgerIcon","textBlock_gap","textIcon","textBlock_success","text_failed","text_connected","text_success","dropdownBlock","Dropdown","item_small","isFailed","renderButtons","ARROW_WIDTH","GAP","emoji","tooltipClassName","tooltipContainerRef","colorClassName","iconRef","tooltipRef","tooltipStyle","arrowStyle","randomTooltipKey","handleClickOutside","tooltipWidth","tooltipHeight","tooltipCenter","arrowPosition","horizontalOffset","tooltipVerticalStyle","tooltipHorizontalStyle","arrowHorizontalStyle","arrowVerticalStyle","tooltip","commonClassName","renderIcon","onDisconnect","iconUrl","shouldShowDisconnect","handleDisconnect","IconWithTooltip","browserButton","hasConnectRequest","requiredPermissions","requiredProof","submitDappConnectRequestConfirm","submitDappConnectRequestConfirmHardware","cancelDappConnectRequestConfirm","setDappConnectRequestState","resetHardwareWalletConnect","selectedAccount","setSelectedAccount","isConfirmOpen","openConfirm","closeConfirm","iterableAccounts","shouldRenderAccounts","handlePasswordCancel","submitDappConnectRequestHardware","handlePasswordSubmit","renderAccounts","AccountButtonWrapper","AccountButton","renderAccount","Skeleton","DappInfo","renderDappInfo","DappPassword","LedgerConnect","LedgerConfirmOperation","dappname","_accounts$currentAcco","customTokenBalance","customTokenSymbol","customTokenDecimals","displayBalance","displaySymbol","displayDecimals","rows","renderRow","isLarge","hasFee","skeletonRows","submitDappSignDataConfirm","renderingPayloadToSign","isDappLoading","DappSkeletonWithContent","DappInfoWithAccount","cell","schema","renderSignDataByType","setDappSignDataScreen","clearDappSignDataError","cancelDappSignData","handleResetSignData","DappSignDataInitial","renderPassword","DappTransferComplete","getPseudoRandomNumber","seed","numberSeed","stringToNumberSeed","randomFraction","FIAT","getCurrencyPriority","getSwapRate","fromToken","toToken","shouldTrimLargeNumber","firstCurrencySymbol","secondCurrencySymbol","fromAmountBig","toAmountBig","fromPriority","ratio","isLargeNumber","CHAIN_ICON_MAP","avalanche","avalancheBlockchainIcon","bitcoin","bitcoinBlockchainIcon","bitcoin_cash","bitcoincashBlockchainIcon","binance_smart_chain","bnbBlockchainIcon","binance_dex","cardano","cosmos","dash","doge","eos","ethereum","ethereum_classic","internet_computer","iota","litecoin","monero","polkadot","ripple","solana","stellar","zcash","getChainNetworkIcon","networkName","ASSET_LOGO_PATHS","btc","usdt","my","withChainIcon","isLoadingError","markLoadingError","fallbackIcon","blockchainIcon","STEPS","FROM","SKIN_COLORS","lightTheme","darkTheme","cardLightText","cardDarkText","cardGoldText","purple","green","sample","cols","cellSize","skin","canvasRef","cellSizeDpr","animationStateRef","opacityValues","steps","lastSpeedChangeAt","isRendered","getIsInBackground2","getShouldAnimate","canvas","ctx","getContext","renderOptions","frameDuration","shouldChangeSpeed","clearRect","row","col","nextOpacity","fillStyle","fillRect","renderFrame","align","maskSkin","shouldHoldSize","maskClassName","setIsSensitiveDataHidden","contentRef","shouldRenderSpoiler","spoilerRef","spoilerClassName","spoiler","wrapperStyle","fixedWidth","SensitiveDataMask","iconName","CHANGELLY_PENDING_STATUSES","CHANGELLY_EXPIRED_STATUSES","ONCHAIN_ERROR_STATUSES","isFuture","isError","isHold","amountCols","isFromToncoin","isInternalSwap","statusClass","pendingIndicatorColor","ActivityPendingIndicator","SensitiveData","TokenIcon","renderAmount","cexStatus","renderStatusAndDate","rate","priceWhole","priceFraction","renderCurrency","getLocalAddressName","_savedAddresses$find","otherAccount","_accounts$accountId$a","OUT_TRANSACTION_TYPES","doesNftExist","openMediaViewer","isStaking","isDnsOperation","dnsIconText","getDnsIconText","attachmentsTakeSubheader","shouldAttachmentTakeSubheader","isNoSubheaderLeft","getIsNoSubheaderLeft","operationColorClass","handleNftClick","Nft","scamImg","amountDisplayMode","dexName","dex","marketplaceName","annual_yield","renderAddressAndDate","renderBaseCurrencyAmount","thumbnail","renderComment","getIsNoSubheaderRight","swapTokensBySlug","stakingStateBySlug","Transaction","getActivityHeight","getTransactionHeight","cancelDappTransfer","setDappTransferScreen","handleAgree","withTonExplorer","withMediaViewer","tonExplorerTitle","ton_explorer_name","handleClickInfo","DEFAULT_THRESHOLD","removeFromSavedAddress","handleDeleteSavedAddress","menuBackdropShouldRender","menuBackdropRef","MENU_ITEM_HEIGHT_PX","COMFORT_MARGIN_PX","isMultichainAccount","addressUrl","isTransaction","spoilerRevealText","spoilerCallback","copyNotification","noSavedAddress","noExplorer","textClassName","noDimming","withShareInMenu","addSavedAddress","addressNameRef","isSaveAddressModalOpen","openSaveAddressModal","closeSaveAddressModal","isDeleteSavedAddressModalOpen","openDeletedSavedAddressModal","closeDeleteSavedAddressModal","savedAddressName","setSavedAddressName","isConcealedWithSpoiler","revealSpoiler","isAddressAlreadySaved","savedAddress","saveAddressTitle","explorerTitle","withSavedAddresses","withExplorer","handleSaveAddressSubmit","handleCopy","handleShare","handleTonExplorerOpen","isActionsMenuOpen","handleMenuShow","handleMenuItemSelect","closeActionsMenu","menuHandlers","setMenuPositionY","isWalletAddress","withShare","_menuHandlers$value","changedTouches","clientX","useDropdownMenu","addressBook","shouldUseMenu","longPressHandlers","isLongPressActive","isPressed","timerId","canProcessEvent","onMouseUp","onTouchStart","onTouchEnd","onTouchCancel","useLongPress","handleRevealSpoiler","renderedContent","suffixStart","middle","meaningfulPart","dimmedPart","scam","scamImage","chainIcon","shortAddress","MenuBackdrop","isConcealed","commentContainer","button_spoiler","renderContentOrSpoiler","iconCaretDown","menuItem","iconStar","iconShare","renderActions","nameInput","DeleteSavedAddressModal","amountTerms","totalCost","sum","getTotalCost","payloadRef","isPayloadExpanded","expandPayload","payloadElement","scrollWidth","record","category","votingAddress","vote","renderPayload","_transaction$payload","renderPayloadLabel","DappTransactionContent","tonAmountBySlug","NftInfo","InteractiveTextField","displayedToAddress","DappAmountField","amountBySlug","DappTransactionPayload","PRECISION_PREFIX","exact","approximate","lessThan","STARS_TOKEN","UNKNOWN_TOKEN","TOKEN_ICONS","shouldPreferIcons","termClassName","symbolClassName","termList","firstDefinedTerm","tokenType","term","convertTermsObjectToList","symbolNode","keepDetailsButtonWithoutFee","onDetailsClick","Fee","FeeLineContainer","_accountState$nfts","totalAmountsBySlug","_renderingTransaction","showDappTransferTransaction","submitDappTransferConfirm","renderingTransactions","sortedTransactions","sortingCost","getTransactionCostForSorting","transaction0","transaction1","sortTransactions","hasSufficientBalance","tokenToDisplay","sufficientTokens","availableBalance","insufficientAmount","insufficientUsdValue","transactionUsdValue","maxInsufficientToken","maxTransactionToken","calculateTokenToDisplay","renderTransactionRow","amountText","hasAmount","renderTransactions","_emulation$activities","FeeLine","renderEmulation","tonAmount","cost","isMediaViewerOpen","clearDappTransferError","submitDappTransferHardware","needsExtraHeight","shouldForceFullScreen","handleTransferPasswordSubmit","handleLedgerConnect","handleResetTransfer","DappTransferInitial","DappLedgerWarning","DappTransaction","Dialog","DialogWeb","dismissDialog","openModal","closeModal","isElectronUpdateDownloaded","setIsElectronUpdateDownloaded","isElectronAutoUpdateEnabled","setIsElectronAutoUpdateEnabled","_window$electron3","removeUpdateErrorListener","UPDATE_ERROR","removeUpdateDownloadedListener","UPDATE_DOWNLOADED","getIsAutoUpdateEnabled","_window$electron4","installUpdate","withTitle","isDragging","screenX","screenY","handleMousedown","handleDrag","handleDoubleClick","useElectronDrag","handleMinimize","minimize","handleMaximize","getIsMaximized","unmaximize","maximize","_window$electron5","_window$electron6","UpdateApp","useTelegramMiniAppSwipeToClose","isSwipeDisabledRef","openSite","originalUrl","validProtocols","urlObject","isValidUrl","contentSelector","scrollLeft","usePrevious2","prevRef","lastRef","openSiteCategory","bigSites","smallSites","handleCategoryClick","site","MEMO_EMPTY_ARRAY","RERENDER_DAPPS_FEED_DELAY_MS","REPLACEMENTS_BY_URL","replacementUrl","updateDappLastOpenedAt","openDapp","dappStyles","HIDDEN_FROM_FEED_DAPP_URLS","dappsFromState","openSettingsWithState","sortedDapps","lastOpenedAt","compareDapps","seen","isPillMode","iconWrapperClassName","useHorizontalScroll","exploreStyles","sectionHeader","DappFeedItem","renderDapp","Dapps","aLastOpened","bLastOpened","connectedAt","clickArg","extendedIcon","withBorder","badgeText","isTrending","isInList","extended","trending","imageWrapper","imageWrapperScalable","trendingImage","infoWrapper","badgeLabel","badge","_searchSuggestions$hi","_searchSuggestions$si","isSuggestionsVisible","searchSuggestions","searchValue","onSiteClick","onSiteClear","isEmpty","suggestionsMenu","MenuItem","suggestionIcon","suggestionAddress","clearSuggestion","Site","_global$exploreData","categories","categoryId","CategoryHeader","shouldRestrict","originalSites","loadExploreSites","removeSiteFromBrowserHistory","suggestionsTimeoutRef","trendingContainerRef","setSearchValue","isSearchFocused","markSearchFocused","unmarkSearchFocused","showSuggestions","hideSuggestions","prevSiteCategoryIdRef","filteredSites","canBeRestricted","filterSites","historyResult","sitesResult","generateSearchSuggestions","trendingSites","allSites","isFeatured","trendingList","filteredCategories","_allSites$category$id","safeShowSuggestions","safeHideSuggestions","prevIsSearchFocused","handleSiteClick","targetUrl","handleSiteClear","handleSearchValueChange","handleMenuClose","handleSearchSubmit","isContentActive","main","searchWrapper","searchContainer","searchIcon","searchInput","ExploreSearchSuggestions","DappFeed","trendingSection","landscapeList","Category","currentSiteCategory","SiteList","emptyList","emptyListLoading","emptyListTitle","rootSlide","afterSelectHardwareWallets","loadMoreHardwareWallets","selectedAccountIndices","setSelectedAccountIndices","handleAccountToggle","handleAddLedgerWallets","alreadyConnectedList","handleAddWalletClick","_list","areAccountsSelected","isActiveAccount","accountCurrencyIcon","addAccountContainer","addAccountIcon","LedgerModalState","setCurrentSlide","SelectWallets","handleAddLedgerWallet","handleLedgerModalClose","LedgerSelectWallets","modalDialog","modalDialogInsideSettings","useElementVisibility","isVisible","setIsVisible","metaViewport","defaultViewportContent","allowedZoomViewportContent","secondText","twoIcons","isNftTransaction","imageUrls","tokenIcon","nftIcon","stacked","bold","nftTitle","isQrScannerSupported","useQrScannerSupport","isSupported","supported","isSavedAddress","deleteLabel","onDeleteClick","handleDeleteClick","otherAccountIds","onAddressSelect","onSavedAddressDelete","renderedSavedAddresses","doesSavedAddressFitSearch","AddressBookItem","renderedOtherAccounts","addressesToBeIgnored","uniqueAddresses","addressChain","searchQuery","INPUT_CLEAR_BUTTON_ID","withQrScan","addressBookChain","validateAddress","requestOpenQrScanner","addressBookTimeoutRef","addressForDeletion","setAddressForDeletion","chainForDeletion","setChainForDeletion","isAddressBookOpen","openAddressBook","closeAddressBook","isFocused","markFocused","unmarkFocused","shouldRenderPasteButton","setShouldRenderPasteButton","inputId","isAddressValid","addressBookAccountIds","shouldUseAddressBook","localAddressName","withPasteButton","withQrButton","withButton","addressOverlay","renderedAddressName","addressShort","SHORT_SINGLE_ADDRESS_SHIFT","handlePasteClick","handleAddressCheck","handleQrScanClick","handleAddressFocus","handleAddressBlur","_e$relatedTarget","relatedTarget","handleAddressBookClose","addressToCheck","handleAddressClear","handleDeleteSavedAddressClick","handleDeleteSavedAddressModalClose","handleAddressBookItemSelect","renderInputActions","AddressBook","FULL_NATIVE_STATES","domainNft","currentLinkedWalletAddress","tonBalance","currentTonAddress","startDomainLinking","cancelDomainLinking","clearDomainLinkingError","submitDomainLinking","submitDomainLinkingHardware","checkDomainLinkingDraft","checkLinkingAddress","setDomainLinkingWalletAddress","isInsufficientBalance","feeTerms","modalTitle","handleWalletAddressInput","newToAddress","handleHardwareSubmit","handleInfoClick","AddressInput","TransactionBanner","renderPasswordForm","renderComplete","isCollapsed","expand","shouldRenderExpander","LIMIT","renderedNfts","startDomainsRenewal","cancelDomainsRenewal","clearDomainsRenewalError","submitDomainsRenewal","submitDomainsRenewalHardware","checkDomainsRenewalDraft","domainNfts","newExpireTimestamp","domainNftThumbnails","useInterval","NftChips","_domainNfts$","_domainNfts$2","formatTransferUrl","noChainIcon","minWidth","CHARACTER_WIDTH","BUTTON_WIDTH","useSelectorWidth","buttonTransitionKeyRef","tokenToRender","NETWORK_NAMES_EXCEPTIONS","getChainNetworkName","SearchState","EMPTY_ARRAY","EMPTY_OBJECT","pairsBySlug","userTokens","selectAvailableUserForSwapTokens","popularTokens","selectPopularTokens","swapTokens","userTokensProp","popularTokensProp","shouldFilter","shouldUseSwapTokens","shouldHideMyTokens","shouldHideNotSupportedTokens","selectedChain","onTokenSelect","resetImportToken","shortBaseSymbol","scrollContainerRef","searchInputRef","isResetButtonVisible","setIsResetButtonVisible","setRenderingKey","searchTokenList","setSearchTokenList","filterTokens","_pairsBySlug$tokenInS","filterAndSortTokens","filterSupportedTokens","allTokens","userTokensWithFilter","popularTokensWithFilter","swapTokensWithFilter","filteredTokenList","tokensToFilter","untrimmedSearchValue","lowerCaseSearchValue","filteredTokens","isName","isSymbol","isKeyword","sortFactors","searchResultToken","factors","tickerExactMatch","tickerMatchLength","nameMatchLength","specialOrder","tokenSymbol","tokenName","comparisonResult","compareTokens","resetSearch","isValidAddress","newRenderingKey","Loading","TokenByAddress","Search","isSwap","handleTokenClick","selectedToken","_searchInputRef$curre","renderToken","descriptionText","tokenPrice","Token","renderTokenGroup","shouldShowSettings","tokenGroupContainer","tokenGroupHeader","tokenGroupTitle","tokenGroupAdditionalTitle","renderTokenSkeleton","tokenContainer","tokenContainerDisabled","tokenLogoContainer","logoContainer","tokenLogoSkeleton","tokenNetworkLogoSkeleton","nameContainer","tokenNameSkeleton","tokenValueSkeleton","tokenPriceContainer","rotateSkeleton","renderSearchResults","tokenToImport","tokenNotFound","tokenNotFoundTitle","tokenNotFoundDesc","tokenSelectInputWrapper","tokenSelectSearchIcon","tokenSelectInput","tokenSelectSearchResetWrapper","tokenSelectSearchReset","tokenSelectSearchResetIcon","tokenSelectContent","tokenLogo","tokenLogoDisabled","tokenTextDisabled","tokenNetwork","isFilterActive","buildContentHtml","withRadix","sanitizeHtml","hasDot","formattedWholePart","fractionStr","suffixStr","fractional","tempEl","shouldGetParentWidth","isFontChangedRef","measureEl","updateFontScale","offsetParent","parentElement","paddingLeft","paddingRight","cloneNode","scale","clearText","inputClassName","labelClassName","valueClassName","cornerClassName","onPressEnter","onInputClick","placeholderRef","useFontScale","textRef","updateHtml","newText","html","restoreCaretPosition","prefixLength","_clearedValue$","selection","getSelection","rangeCount","getRangeAt","setStart","clearedValue","NODE_TYPE","NodeFilter","SHOW_TEXT","treeWalker","createTreeWalker","elem","FILTER_REJECT","FILTER_ACCEPT","nextNode","currentNode","getTextNodeAtPosition","removeAllRanges","newRange","setEnd","addRange","saveCaretPosition","inputWrapperFullClass","input__wrapper","inputWrapperStatic","input__wrapper_hasFocus","large","labelTextClassName","cornerFullClass","swapCorner","swapCorner_error","rich","rich__value","rich__placeholder","focusAtTheEnd","createRange","selectNodeContents","collapse","changeInvoiceToken","closeInvoiceModal","isTokenSelectorOpen","openTokenSelector","closeTokenSelector","amountValue","setAmountValue","setComment","invoiceUrl","handleTokenSelect","contentTitle","RichNumberInput","SelectTokenButton","tokenButton","invoiceComment","labelForInvoice","invoiceLinkField","Selector","TokenSelector","stopById","onActiveClick","SCROLL_DURATION","CLIP_PATH_CONTAINER_CLASS_NAME","activeTab","overlayClassName","onSwitchTab","onActiveTabClick","appWidth","activeTabElement","offsetLeft","activeTabOffsetLeft","activeTabOffsetWidth","newLeft","containerWidth","scrollId","remainingPath","isStopped","scrollSnapType","startAt","currentPath","animateHorizontalScroll","useActiveTabCentering","_containerRef$current","clipPath","paddingTop","clipLeft","rightPosition","leftPosition","calculateClipPath","openInvoiceModal","closeReceiveModal","isSwapAllowed","isOnRampAllowed","handleBuyFiat","handleSwapClick","handleReceiveClick","qrCode","useQrCode","hiddenClassName","hideLogo","withFormatTransferUrl","setIsInitialized","logoUrl","qrCodeRef","QrCodeStyling","dotsOptions","cornersSquareOptions","imageOptions","imageSize","crossOrigin","qrOptions","errorCorrectionLevel","_qrCode","_options","verifyHardwareAddress","qrCodeHidden","qrClassNames","qrCodeStatic","contentTitleQr","copyButtonStatic","addressWrapper","contentTitleLedger","contentTitleLedgerStatic","dottedLink","TonActions","canBuyWithCard","TronActions","setReceiveActiveTab","tabTon","tabTron","handleSwitchTab","tabId","TonContent","TronContent","currentTab","TabList","tabsInModal","tabsOverlay","contentWrapper","contentStatic","iosModalDialog","receiveHeader","receiveHeaderNoTabs","Content","firstButtonText","secondButtonText","onFirstButtonClick","onSecondButtonClick","amountString","amountFraction","amountSymbol","useAmountInputState","onAmountChange","isBaseCurrency","switchCurrency","tokenAmountBI","isAmountReadonly","onTokenChange","setToken","setIsBaseCurrency","tokenAmountRef","currencyAmountRef","currencyDecimals","setAmountsFromToken","tokenAmountToCurrencyAmount","setAndReportAmountFromPrice","newTokenAmount","currencyAmountToTokenAmount","formalizeStringAmount","tokenAmountToBigInt","onInputChange","currencyAmount","inputValue","alternativeValue","useCurrencySwitch","onMaxAmountClick","onAlternativeAmountClick","tokenDecimals","useTokenDropdown","tokenBySlug","selectedStakingId","selectableTokens","hasNominatorsStake","hasLiquidStake","getStakingTokens","useTransitionActiveKey","isAllMode","onAmountClick","EMPTY_TOKEN_LIST","isInMode","buttonPrefixText","getTokenId","tokenToDropdownItem","tokenById","selectedTokenId","dropdown","isMaxAmountLoading","isMaxAmountAllMode","renderBottomRight","onInputFocus","onInputBlur","keepInputFocus","cancelFocusTimer","_cancelFocusTimer$cur","_cancelFocusTimer$cur2","useKeepInputFocus","handleMaxAmountClick","AmountInputMaxButton","TokenDropdown","renderInput","renderAlternativeAmount","getNumberRegex","zeroValue","isSensitiveData","sensitiveDataMaskSkin","prevValueRef","renderValue","noFallbackToPrev","contentEl","valueRegex","mask","BottomRightSlide","ACTIVE_STATES","runThrottled","_accountState$staking","apiError","submitStakingInitial","fetchStakingFee","cancelStaking","isSafeInfoModalOpen","openSafeInfoModal","closeSafeInfoModal","setAmount","isIncorrectAmount","isInsufficientFee","isBelowMinimumAmount","annualYieldText","tvl","dailyReward","apr","calcJettonStakingApr","annualYieldStandard","annualYieldVerified","isNativeToken","nativeSlug","nativeBalance","minAmount","getStakingMinAmount","doubleNetworkFee","shouldLeaveForUnstake","handleHelpCenterClick","confirm","okButtonTitle","cancelButtonTitle","handleCheckEligibility","errorTransitionKey","InsufficientFee","BelowMinimumAmount","ApiError","balanceError","amountBottomRight","amountBottomRight_error","amountBottomRight_slide","handleChangeStaking","amountInputProps","welcome","welcome_static","sticker_static","welcomeInformation","welcomeInformation_static","stakingApy","textButton","AmountInput","amountBig","currentAmount","balanceResult","balanceResultWrapper","balanceResultWrapper__slide","RichNumberField","balanceResultInput","balanceResultLabel","renderStakingResult","stakingSafeDialog","jvault_link","renderSafeDescription","renderSafeInfoModal","IS_OPEN_STATES","setStakingScreen","clearStakingError","submitStakingPassword","submitStakingHardware","renderedStakingAmount","setRenderedStakingAmount","handleTransferSubmit","handleViewStakingInfoClick","StakingInitial","transactionBanner","renderTransactionBanner","TransferResult","submitStakingClaim","submitStakingClaimHardware","cancelStakingClaim","rewardAmount","isNativeEnough","withModalHeader","feeClassName","renderInfo","tonToken","profit","selectAccountStakingTotalProfit","startUnstaking","startStakingClaim","fetchStakingHistory","unstakeTime","canBeClaimed","hasHistory","shouldRenderSpinner","spinnerRef","shouldRenderTotalAmount","totalAmountRef","handleStakeClick","handleUnstakeClick","handleClaimClick","stakingResult","renderUnstakeDescription","unstakeTime_purple","unstakeTimeIcon","stakingInfo","stakingInfo_modal","stakingInfoNoHistory","stakingTransition","stakingInfoClose","balanceStakedLabel","balanceStakedResult","stakingInfoLoading","stakingInfoLoadingAnimation","stakingInfoButtons","stakingInfoButtonsAdaptiveWidth","stakingInfoButtonsWithMargin","stakingInfoButton","checkEligibilityButton","rewardString","renderRewards","history_static","historyTotal","historyTotalValue","historyTitle","historyList","historyList_static","StakingProfitItem","withBackground","stakingInfoModalContent","StakingInfoContent","FULL_SIZE_NBS_STATES","isNominators","hasAmountError","isOnlyFullAmount","setUnstakeAmount","successUnstakeAmount","setSuccessUnstakeAmount","isLongUnstake","unstakeDate","setUnstakeDate","isUnstakeDisabled","refreshUnstakeDate","handleStartUnstakeClick","renderUnstakeTimer","unstakeDateText","shouldShowInfo","unstakeInfoTransition","unstakeInfo","renderUnstakeInfo","newAppVersion","calcVestingAmountByStatus","statuses","currentAcc","isUnfreezeRequested","mycoin","closeVestingModal","startClaimingVesting","currentlyFrozenAmount","currentlyReadyToUnfreezeAmount","isDisabledUnfreeze","handleStartClaimingVesting","volume","initialAmount","isInteractive","endsAt","submitClaimingVesting","submitClaimingVestingHardware","cancelClaimingVesting","clearVestingError","claimAmount","SEND_CONTEXT_MENU_ITEMS","handleSendMenuItemClick","restProps","FeeDetailsContent","realFeePrecision","excessFeePrecision","extraContent","full_fee","excess_symbol","chain_name","BUTTON_ANIMATION_DURATION","isSending","isNotEnoughNative","isPriceImpactError","isErrorExist","shouldSendingBeVisible","errorMsgByType","isTouched","textStr","transitionKeyRef","renderThrottled","throttledResolver","useThrottledResolver","useThrottledSignal","renderedText","swapArrowIcon","footerButtonWrapper","footerButtonInner","IS_WHOLE_PART_BIG_REGEX","setSwapDex","selectedDexLabel","setSelectedDexLabel","renderedDexItems","renderedCurrentDexLabel","renderedBestRateDexLabel","isBestRateSelected","confirmLabel","dex_name","handleDexConfirm","shouldRenderBenefit","benefitAmount","bestRateEstimate","otherEstimate","isDirectSwap","ourFeeValue","benefit","calculateBenefitAmount","renderedAmounts","formattedAmount","regex","getNumberParts","wholePartRaw","dotPart","formatDexItemAmount","buttonContent","DedustPath","StonfiPath","renderedDexItem","SLIPPAGE_VALUES","SwapSettings","showFullNetworkFee","onNetworkFeeClick","setSlippage","canEditSlippage","currentSlippage","setCurrentSlippage","priceImpactError","slippageError","handleSave","handleInputChange","stringValue","advancedInput","slippageList","advancedSlippageButton","balanceLink","dot","advancedSlippageContainer","advancedSlippage","renderSlippageValues","Tooltip","slippageLabel","advancedSlippageError","advancedBlock","advancedRow","advancedDescription","advancedValue","ValuePlaceholder","renderRate","actualFee","feeElement","advancedLink","advancedLinkIcon","renderNetworkFee","percent","advancedError","SwapSettingsModal","advancedPlaceholder","advancedTooltip","advancedTooltipContainer","_explainedFee$fullFee2","_explainedFee$fullFee3","setSwapAmountIn","setSwapAmountOut","switchSwapTokens","estimateSwap","setSwapScreen","setSwapCexAddress","authorizeDiesel","inputInRef","inputOutRef","currentTokenInSlug","currentTokenOutSlug","nativeTokenInSlug","nativeUserTokenIn","amountInBigint","amountOutBigint","balanceIn","isEnoughBalance","swapAmountInBigint","networkNativeFeeBigint","isBalanceSufficientForSwap","isEnoughNative","isDieselNotAuthorized","hasAmountInError","amountOutValue","hasInsufficientFeeError","isCrosschain","isBuyAmountInputDisabled","handleBuyAmountInputClick","_pairsBySlug$currentT","useReverseProhibited","handleEstimateSwap","debounceSetAmountIn","debounceSetAmountOut","currentSubModal","openSettingsModal","openFeeModal","closeSubModal","_explainedFee$realFee3","isFeeModalAvailable","currentModal","setCurrentModal","useSubModals","handleAmountInChange","handleSelectTokenInModalOpen","SelectTokenFrom","handleSelectTokenOutModalOpen","SelectTokenTo","handleAmountOutChange","handleSwitchTokens","amountInput","inputLabel","amountInputInner","swapCornerTop","swapCornerStaticTop","swapButtonWrapper","swapButtonWrapperStatic","AnimatedArrows","amountInputBuy","swapCornerBottom","swapCornerStaticBottom","SwapDexChooser","footerBlock","footerBlockStatic","feeLine","renderFee","priceImpactStatic","priceImpactSticker","priceImpactContent","priceImpactTitle","priceImpactArrow","priceImpactDescription","renderPriceImpactWarning","changellyInfo","changellyInfoStatic","changellyInfoTitle","changellyIcon","changellyInfoDescription","policy","kyc","renderChangellyInfo","SwapSubmitButton","FeeDetailsModal","shouldAnimate","hasAnimation","startAnimation","stopAnimation","renderArrow","isInverted","arrowContainer","arrowContainerInverted","arrowOld","animateDisappear","arrowNew","animateAppear","swapButton","trimStringByMaxBytes","maxBytes","decoder","sliced","COMMENT_DROPDOWN_ITEMS","isCommentRequired","isEncryptedCommentSupported","onCommentChange","setTransferShouldEncrypt","handleCommentOptionsChange","dropdownItems","AUTHORIZE_DIESEL_INTERVAL_MS","isMemoRequired","fetchTransferFee","fetchNftFee","setTransferAmount","setTransferToAddress","setTransferComment","cancelTransfer","checkTransferAddress","dismissTransferScamWarning","transferToken","isDisabledDebounce","doesSupportComment","helpCenterLink","handleAddressInput","isValueReplaced","shouldDisableClearButton","transferAmount","isFullTokenTransfer","tokenRequiredAmount","nativeTokenRequiredAmount","isBalanceSufficientForTransfer","isAmountMissing","authorizeDieselInterval","updateDieselState","runFunction","handleTokenChange","handleClear","handleCommentChange","isAmountGreaterThanBalance","isFeeModalOpen","closeFeeModal","useFeeModal","tokensToSelect","selectedTokenSlug","isSelectableToken","handleAmountChange","AmountInputSection","CommentSection","help_center_link","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","shouldDisablePropagation","isContextMenuOpen","setIsContextMenuOpen","contextMenuAnchor","setContextMenuAnchor","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","handleContextMenu","clientY","handleContextMenuClose","handleContextMenuHide","handleTouchMove","timer","clearLongPressTimer","clearLongPressTimerAndStopEvent","origialEvent","startLongPressTimer","emulateContextMenuEvent","WithContextMenu","onItemClick","buttonRef","useContextMenuHandlers","TABS","Receive","STAKING_TAB_TEXT_VARIANTS","inactive","unstakeRequested","readyToClaim","activeTabIndex","isStakingDisabled","stakingStatus","setActiveTabIndex","transferSlideClassName","renderedBgHelpers","contentBackgroundClassName","contentBgRef","contentFooterRef","lastHeightRef","adjustBg","_transitionRef$curren","_transitionRef$curren2","activeSlideSelector","transferQuery","rect","shouldRenderWithoutTransition","contentBgStyle","contentFooterStyle","componentObserver","ResizeObserver","contentBg","contentFooter","useTabHeightAnimation","slideContent","contentSlideStaked","areNotAllTabs","isLastTab","isAddBuyAnimating","playAddBuyAnimation","stopAddBuyAnimation","isSendAnimating","playSendAnimation","stopSendAnimation","isSwapAnimating","playSwapAnimation","stopSwapAnimation","isStakeAnimating","playStakeAnimation","stopStakeAnimation","stickerPaths","renderCurrentTab","slideContentAddBuy","slideContentTransfer","TransferInitial","SwapInitial","handleSelectTab","notAllTabs","tabIcon","tabText","tabDecoration","restButtonProps","withContextMenu","tabDelimiter","tab_purple","tab_purpleText","contentHeader","firstActive","lastActive","contentHeaderInner","onEarnClick","openReceiveModal","addBuyButtonName","handleStartSwap","handleStartTransfer","handleAddBuyClick","handleEarnClick","buttonProps","calcBigChangeValue","currentPrice","changeFactor","calculateFullBalance","primaryValue","stakingAmount","primaryWholePart","primaryFractionPart","changeValue","changePercent","changePrefix","useUpdateIndicator","updateStartedAtKey","setIsUpdating","updateStartedAt","timeElapsedSinceLastUpdateStarted","svgMaskId","viewBox","cx","cy","dur","repeatCount","hasCardsInfo","openMintCardModal","shouldRenderMintCardsButton","mintCardsButtonRef","ClockIcon","scheduledAnimationsCounter","resetCounterOnTickEnd","prevText","characters","textLength","prevTextLength","charIndex","prevTextCharIndex","renderAnimatedCharacters","chains","chainDropdownItems","hasDomain","handleCopyAddress","handleDomainClick","handleExplorerClick","closeTimeoutRef","handleMouseEnter","handleMouseLeave","addressContainer","addressLabel","multichainIconSrc","multichainIcon","addressMenuBubble","fullItemClassName","menuStyles","separator","menuItemName","domainText","addressText","menuFontIcon","menuExplorerIcon","displayText","explorerButton","currentCurrency","excludedCurrency","currencyList","handleBaseCurrencyChange","currencySwitcherMenu","_nft$metadata","isSticky","noShowAnimation","onTransitionEnd","cardClassName","rootClassName","sticky","loaded","withShadow","shadow","onCardChange","prevNftRef","prevNft","prevNftAddress","isMountRef","handleTransitionEnd","CustomCardBackground","TOKEN_CARD_COLORS","orange","pink","red","sea","tegro","blue","TOKEN_EXCEPTION_COLORS","prices","selectedIndex","imgClassName","onSelectIndex","boundingPoints","priceValues","points","scaleX","scaleY","getBasisPoint","indexesCount","point","tangent","firstPoint","getCurvePath","pCurrent","pMinus1","pMinus2","handleMouseMove","containerX","nextIndex","onMouseMove","onTouchMove","activePoint","partialPath","getPath","renderSvg","ITEMS","currentPeriod","setCurrentTokenPeriod","handlePeriodChange","OFFLINE_TIMEOUT","DEFAULT_PERIOD","historyPeriods","onYieldClick","loadPriceHistory","isCurrencyMenuOpen","openCurrencyMenu","closeCurrencyMenu","isHistoryMenuOpen","openHistoryMenu","closeHistoryMenu","shouldUseDefaultCurrency","currencySymbol","selectedHistoryIndex","setSelectedHistoryIndex","prevHistoryIndex","lastPrice","bestState","refreshHistory","newPeriod","handleCurrencyChange","tokenLastUpdatedAt","tokenLastHistoryPrice","selectedHistoryPoint","tokenChangePrice","dateStr","initialPrice","_history$find","valueBig","change","amountChange","withChange","historyStartDay","withExplorerButton","shouldHideChartPeriodSwitcher","closestColor","smallestDistance","tokenRgbColor","colorName","colorValue","rgbA","rgbB","l1","a1","b1","l2","a2","b2","c1","deltaC","deltaA","deltaB","deltaLKlsl","deltaCkcsc","deltaHkhsh","deltaE","calculateTokenCardColor","tokenCard","tokenInfoHeader","currencySwitcher","iconCaretSmall","CurrencySwitcherMenu","tokenInfoSubheader","tokenTitle","apy","tokenChange","tokenChangeSensitiveData","tokenChangeSpoiler","TokenPriceChart","chart","chartImg","tokenHistoryPrice","tokenPriceDate","center","periodChooser","periodChooserHidden","ChartHistorySwitcher","tokenCurrentPrice","getTokenExplorerBaseUrl","getExplorerTokenUrl","tokenExplorerButton","renderExplorerLink","onTokenCardClose","amountRef","customCardClassName","setCustomCardClassName","setWithTextGradient","screenWidth","screenWidthDep","renderedToken","shouldRenderTokenCard","tokenCardRef","getSensitiveDataMaskSkinFromCardNft","handleCardChange","hasGradient","containerWrapper","loadingDotsContainer","backstage","CustomCardManager","containerInner","iconCaretClassNames","iconCaretFraction","iconCaret","noAnimationCounter","balanceTransition","balanceSlide","blurred","AnimatedCounter","changeSpoiler","renderBalance","CardAddress","MintCardButton","TokenCard","getScrollableContainer","selector","getScrollableContainerSelector","getScrollContainerClosestSelector","addNftsToBlacklist","closeNftCollection","closeHideNftModal","handleHide","number","getViewportSlice","sourceIds","listSlice","offsetId","indexForDirection","Forwards","newViewportIds","areSomeLocal","areAllLocal","Backwards","newIsOnTop","loadMoreBackwards","listIds","_currentStateRef$curr","withResetOnInactive","currentStateRef","viewportIds","isOnTop","prevSlug","resetScroll","prevListIds","prevIsDisabled","oldViewportIds","oldIsOnTop","newListIds","sliceLength","getViewportSliceAfterListChange","getMore","DEFAULT_LIST_SELECTOR","DEFAULT_PRELOAD_BACKWARDS","DEFAULT_SENSITIVE_AREA","itemSelector","preloadBackwards","sensitiveArea","withAbsolutePositioning","noScrollRestore","noScrollRestoreOnTop","noFastList","cacheBuster","beforeChildren","scrollContainerClosest","onLoadMore","onDragOver","onDragLeave","stateRef","loadMoreForwards","scrollContainer","prevItems","listItemElements","newScrollTop","currentAnchor","newAnchorTop","currentAnchorTop","nextAnchor","isScrollTopJustUpdated","listLength","isNearTop","offsetTop","isNearBottom","isUpdated","nextAnchorTop","closestScrollContainer","handleNativeScroll","cleanupAnimation","topOffset","withAnimation","prevTopOffset","animateOpacity","animateMove","useActivityListEntry","THROTTLE_TIME","SCROLL_THRESHOLD","DATE_ID_PREFIX","EMPTY_DICTIONARY","selectIsFirstTransactionsLoaded","isNewWallet","_activities$idsMain","selectIsNewWallet","totalTokensAmount","shouldShowSeparateAssetsPanel","hasUserScrolledRef","allActivityIds","idList","listItemIds","_tokensBySlug$activit","filterActivityIds","lastActivityDayStart","activityDayStart","addDatesToActivityIds","firstListItemId","isHistoryEndReached","loadMore","FURTHER_SLICE","throttledLoadMore","useInfiniteScroll","getListItemKey","keyByIdRef","oldActivityById","keyById","oldActivities","oldActivityId","newActivityIds","itemId","_keyByIdRef$current","useListItemKeys","shouldUseAnimations","isActivitiesEmpty","itemPositionById","currentContainerHeight","lastViewportId","activityOffset","_prevItemPositionById","_itemPositionById$anc","prevItemPositionById","anchorId","prevTop","nextTop","scrollBy","usePreventScrolledListShift","handleActivityClick","NewWalletGreeting","InfiniteScroll","_itemPositionById$ite","itemContent","dateValue","isFirst","formattedDate","dateWithLoader","renderDate","isActivityActive","isLastInDay","ActivityListItem","renderHistory","UNFREEZE_DANGER_DURATION","OPEN_CONTEXT_MENU_CLASS_NAME","vestingStatus","unfreezeEndDate","isInvestorView","isStakingAvailable","isVesting","renderedAmount","changeClassName","change_up","change_down","withYield","withLabel","getTokenName","fiatAmountCols","shouldRenderYield","yieldRef","isContextMenuShown","isBackdropRendered","toggleTokenVisibility","isServiceToken","hasUnclaimedRewards","mandatoryItems","useTokenContextMenu","renderYield","apyLabel","apyLabel_staked","renderChangeIcon","iconArrow","renderStakingIcon","wrapperVisible","vestingIcon","primaryCell","nameText","chainLabel","secondaryCell","secondaryValue","secondaryValue_staked","secondaryValue_vesting","secondaryValue_vestingUnfreeze","totalAmount","canRenderYield","renderDefaultView","_accountState$vesting","isSeparatePanel","onTokenClick","onStakedTokenClick","renderedTokens","renderedMycoin","userMycoin","activeStates","stakedTokens","shouldRenderStakedTokens","vestingTokenRef","shouldRenderVestingToken","vestingAmount","onVestingTokenClick","loadMycoin","hasVesting","isMycoinLoaded","useVesting","viewportSlugs","viewportIndex","handleOpenTokenSettings","stateByTokenSlug","wrapperLoading","emptyListSeparate","indexInViewport","isSwapAvailable","noTokens","noTokensText","noTokensHeader","noTokensDescription","openSettingsButton","selectNfts","burnNfts","openHideNftModal","removeCollectionTab","isTelegramGifts","collectionNfts","dnsExpireInDays","isInTabs","isOnFragment","getgemsBaseUrl","nftCollectionAddress","getExplorerNftCollectionUrl","handleMenuOpen","isChecked","usePrevDuringAnimationSimple","durationMs","setPrev","ON_SALE_ITEM","TON_DNS_ITEM","SEND_ITEM","FRAGMENT_ITEM","GETGEMS_ITEM","TON_EXPLORER_ITEM","COLLECTION_ITEM","HIDE_ITEM","RENEW_ITEM","NOT_SCAM","UNHIDE","BURN_ITEM","SELECT_ITEM","INSTALL_CARD","RESET_CARD","INSTALL_ACCENT_COLOR","RESET_ACCENT_COLOR","LINK_TO_ADDRESS","CHANGE_LINKED_ADDRESS","useNftMenu","linkedAddress","isNftBlacklisted","isNftWhitelisted","isNftInstalled","isNftAccentColorInstalled","openNftCollection","addNftsToWhitelist","closeNftAttributesModal","openUnhideNftModal","clearCardBackgroundNft","clearAccentColorFromNft","openDomainLinkingModal","closeOverlays","fragmentUrl","isTonDns","isCard","isContextMenuMode","onOpen","tonDnsExpiration","clearNftSelection","openNftAttributesModal","isLottie","shouldPlay","markHover","unmarkHover","lottie","useIsIntersecting","isHover","useLottie","isSelectionEnabled","isSelected","isDnsExpireSoon","shouldRenderWarning","warningRef","handleRenewDomainClick","handleOpenContextMenu","handleOpenMenu","handleCloseMenu","renderDnsExpireWarning","Radio","NftMenu","clearNftsSelection","hasSelection","setIsScrolled","_containerRef$current2","nft_marketplace","selectAllNfts","allSelectedIsTonDnsNft","tonDnsMultiSelected","handleSendClick","handleBurnClick","handleHideClick","MAIN_CONTENT_TABS_LENGTH","activeNftKey","_vesting$info","tokensCount","doesSupportNft","selectDoesAccountSupportNft","tabsRef","hasNftSelection","numberOfStaking","handleNftsMenuButtonClick","HiddenNfts","nftCollections","hasTelegramGifts","itemsByAddress","shouldRenderHiddenNftsSection","blacklistedAddressesSet","mainContentTabsCount","mainContentTabs","contentTransitionKey","nftCollectionIndex","handleScrollToTop","scrollTo","rootMarginTop","handleTabIntersection","intersectionRatio","_e$target","handleClickAsset","Nfts","NftSelectionHeader","NftCollectionHeader","HideNftModal","newName","setNewName","currentWalletVersion","forceClose","accountClassName","accountSelectorClassName","withAccountSelector","withBalance","openAddAccountModal","openAccountSelector","closeAccountSelector","isEdit","openEdit","closeEdit","shouldRenderDialog","dialogContainerRef","isBip39Account","hasTonWallet","withAddW5Button","accountsAmount","balanceValues","handleSwitchAccount","handleAddV5WalletClick","WalletVersion","accountTitleClassName","accountTitle","accountTitleInteractive","balanceCurrency","balanceCurrencyPrefix","balanceFractionPart","handleOpenAccountSelector","accountTitleInner","arrowIcon","dialogFullClassName","dialog_compact","renderButton","createAccountButton","createAccountIcon","renderAccountsSelector","AccountRenameModal","handleManualLock","handleFullscreenToggle","exitFullscreen","setAppLayout","handleAppLayoutToggle","handleSensitiveDataToggle","canToggleAppLayout","iconsAmount","QrScannerButton","AccountSelector","AppLockButton","ToggleSensitiveDataButton","ToggleFullscreenButton","ToggleLayoutButton","SettingsButton","getThemeColorMetaElement","isLight","metaThemeColor","onOpenBackupWallet","lightColor","darkColor","metaElementLight","metaElementDark","lightContent","darkContent","useBrowserUiColor","wrapper_landscape","isOpenRef","setShouldRender","prevIsShown","hideTimeoutRef","toggleOpen","ignoredAddressForRenewal","nftForRenewal","renderedNftForRenewal","expireInDays","expiredDomains","Collapsible","wrapperFlex","previewNfts","domainPreviewWrapper","domainPreview","renderPreview","renderWarningMessage","closeSecurityWarning","IS_UNSAFE_WEB","portraitContainer","testnetWarning","BackupWarning","RenewDomainWarning","SecurityWarning","_global$mediaViewer","openBackupWalletModal","closeStakingInfo","updatePendingSwaps","cardRef","portraitContainerRef","landscapeContainerRef","markIsFocused","unmarkIsFocused","usePreventPinchZoomGesture","isPageAtTop","shouldHideBalanceInHeader","handleTokenCardClose","Warnings","Header","Card","PortraitActions","LandscapeActions","StakeModal","StakingInfoModal","ReceiveModal","InvoiceModal","UnstakeModal","StakingClaimModal","VestingModal","VestingPasswordModal","RenewDomainModal","LinkingDomainModal","UpdateAvailable","RenderingState","versionById","withOtherWalletVersions","clearAccountError","clearAccountLoading","isNewAccountImporting","setIsNewAccountImporting","handleModalClose","handleNewAccountClick","handleImportAccountClick","handleViewModeWalletClick","ViewMode","handleHardwareWalletConnected","SelectAccountsHardware","handleOpenSettingWalletVersion","AddAccountPasswordModal","buttonLabel","small","onNext","mnemonicContainer","privateKeyHex","privateKey","writedownAccepted","setWritedownAccepted","openWalletAccepted","setOpenWalletAccepted","canBeStolenAccepted","setCanBeStolenAccepted","modalSticker","setIsBackupRequired","setCheckIndexes","mnemonicRef","handleSafetyConfirm","handleBackupErrorUpdate","handleCheckMnemonic","_mnemonicRef$current","handleRestartCheckMnemonic","handleCheckMnemonicSubmit","SafetyRules","MnemonicPrivateKey","MnemonicList","MnemonicCheck","renderedNft","attributesCount","isFolded","setIsFolded","isNoData","FOLD_LIMIT","handleExpand","handleCollectionClick","actionIcon","nftInfo","nftName","collectionNameIcon","attributesList","renderAttributeRow","attribute","trait_type","attributeValue","expandButton","expandButtonIcon","closeOnRampWidgetModal","animationTimeoutRef","isAnimationInProgress","setIsAnimationInProgress","iframeSrc","setIframeSrc","onIframeLoaded","frameBorder","START_SCAN_DELAY_MS","MODAL_ANIMATION_DURATION_MS","DESTROY_SCANNER_DELAY_MS","isFlashlightAvailable","setIsFlashlightAvailable","isFlashlightEnabled","setIsFlashlightEnabled","isScannerStarted","setIsScannerStarted","flashlightRef","flashlightShouldRender","scanSquareRef","stopScan","startScan","formats","QrCode","scanAreaCoordinates","scanSquareRect","scaledRect","getDomNodeDimensions","barcodes","barcode","qrCodeCoordinates","cornerPoints","topHalf","bottomHalf","sortCoordinatesClockwise","scanArea","isQrCodeOutsideScanArea","rawValue","isTorchAvailable","available","isTorchEnabled","enabled","startScanTimeoutId","documentClassModifyTimeoutId","handleFlashlightClick","disableTorch","enableTorch","flashlightButtonClassName","submitSignature","clearSignatureError","cancelSignature","complete","handleConfirm","transferStyles","transitionContent_simple","usePrevDuringAnimation","timeoutRef","isCurrentPresent","isPrevPresent","onCompleted","initialSeconds","secondsLeft","setSecondsLeft","shouldShowWarning","clearTimer","pad","remainingSeconds","formattedTime","amountInCols","amountOutCols","renderTokenInfo","isReceived","amountWithSign","infoRow","noIcon","noCurrency","infoRowIcon","infoRowToken","infoRowAmount","infoRowAmountGreen","infoRowAmountError","infoRowChain","infoRowCurrency","infoRowCurrencyValue","infoSeparator","infoSeparatorIcon","infoSeparatorIconError","TransactionFee","CHANGELLY_EXPIRE_CHECK_STATUSES","CHANGELLY_ERROR_STATUSES","_accountState$activit","fetchActivityDetails","closeActivityInfo","renderedActivity","shouldRenderCexInfo","isCex","isCexError","isCexHold","isCexWaiting","isCexPending","isExpired","cexTransactionId","cexErrorMessage","isCountdownFinished","transactionUrl","shouldShowQrCode","renderMemo","textFieldWrapper","textFieldLabel","feeField","transactionHeader","headerDate","SwapTokensInfo","changellyInfoBlock","changellyDescription","changellyDescriptionBold","blockchain","Countdown","renderAddress","renderSwapInfo","email","swapSupportBlock","errorCexMessage","livechat","footer","isButtonVisible","renderFooterButton","typeClass","withStatus","renderedTransaction","isActivityWithHash","_activity$extra","isOurStaking","isOurUnstaking","isTransactionWithPoisoning","canDecryptComment","decryptedComment","setDecryptedComment","shouldRenderTransactionId","transactionIdRef","startOfStakingCycle","endOfStakingCycle","shouldRenderUnstakeTimer","unstakeTimerRef","clearPasswordError","openPasswordSlide","closePasswordSlide","handleStartStakingClick","handleUnstakeMoreClick","openHiddenComment","TransactionAmount","scamWarning","copyButtonWrapper","scamAddress","changellyTextField","canUnstake","buttonWide","renderFooter","renderTransactionContent","passwordFormContent","passwordFormContentInModal","unstakeModal","closeUnhideNftModal","handleUnhide","onDismiss","setIsOpen","timerRef","closeAndDismiss","dismissNotification","Notification","bottomBarHideCounter","bottomBarListeners","getIsBottomBarHidden","notifyBottomBarListeners","showBottomBar","wasHidden","switchToWallet","switchToExplore","switchToSettings","setIsHidden","OCCUPIED_HEIGHT","getNode","_container","createGhost","_source$parentElement","ghost","img","oncontextmenu","HTMLImageElement","applyShape","isOpening","isCustom","shouldAnimateFirstRender","externalRef","prevChildren","fromChildrenRef","SHOULD_CLOSE_VIEWER_HANDLERS","descriptionUrl","useSignalRef","getZoomChange","setZoomChange","useZoomChange","whitelistedMediaIds","isNftWhiteListed","SLIDES_GAP","cancelAnimation","cancelZoomAnimation","selectMedia","getMediaId","activeSlideRef","leftSlideRef","rightSlideRef","lastTransformRef","swipeDirectionRef","initialContentRectRef","isReleasedRef","prevZoomChangeRef","isMouseDown","setIsMouseDown","getTransform","setTransform","transformRef","getActiveMediaId","setActiveMediaId","activeMediaIdRef","isScaled","activeMediaId","windowHeight","windowWidth","selectMediaDebounced","clearSwipeDirectionDebounced","clickXThreshold","getTransformStyle","changeSlide","dryRun","lastTransform","mId","handleNextSlide","handlePrevSlide","lastDragOffset","lastZoomCenter","panDelta","lastGestureTime","setLastGestureTime","changeSlideOnClick","calculateOffsetBoundaries","initialContentRect","inBoundsX","inBoundsY","minOffsetX","maxOffsetX","minOffsetY","maxOffsetY","absX","absY","s1","scaleFactor","x1","y1","Vx","Vy","dirX","cancelDrag","absOffsetX","absOffsetY","Vertical","Horizontal","SWIPE_X_THRESHOLD","SWIPE_Y_THRESHOLD","MIN_ZOOM","MAX_ZOOM","scaledCenterX","scaledCenterY","scaleOffsetX","scaleOffsetY","isInThreshold","hasNextSlide","zoomChange","hasZoomChanged","wheelEvent","WheelEvent","nextMediaId","prevMediaId","hasPrev","hasNext","isMoving","Media","_global$settings","mediaUrl","mediaByIds","mediaIds","blacklistedIds","prevTxId","prevHiddenNfts","prevNoGhostAnimation","headerAnimation","shouldAnimateOpening","shouldAnimateClosing","renderedMediaIds","media","selectedMediaIndex","fromId","fromImage","mediaWidth","mediaHeight","getImageDimension","availableHeight","toWidth","toHeight","availableWidth","aspectRatio","calculatedWidth","calculateDimensions","toLeft","toTop","fromTop","fromLeft","fromWidth","fromHeight","fromTranslateX","fromTranslateY","fromScaleX","fromScaleY","clearShape","animateOpening","toImage","targetTop","display","isElementInViewport","existingGhost","ghostStyles","animateClosing","ShowTransition","MediaInfo","Actions","Slides","startCardMinting","currencyIcon","MAP_CARD_TYPE_TO_NAME","standard","silver","gold","platinum","black","CardSlides","TOTAL_SLIDES","closeMintCardModal","Standard","Silver","showNextSlide","Black","showPrevSlide","defaultProps","renderMediaCard","Gold","Platinum","navigation","navigationLeft","navigationIcon","navigationRight","muted","loop","playsInline","poster","video","slideInner","dots","dotActive","cardType","notMinted","avaliability","soldOut","sold","leftAmount","soldAmount","amountInner","amountLeft","amountSold","renderAvailability","CardPros","selectedCardType","clearMintCardError","submitMintCard","submitMintCardHardware","selectedCardName","CardRoster","mintCardBanner","resultWithTime","resultTimeIcon","onCheck","disableBiometrics","customSubmitButton","openBiometricsTurnOff","enableBiometrics","shouldDisablePasswordForm","customCancelButton","closeBiometricSettings","isTurnOnBiometricsOpened","isTurnOffBiometricsOpened","isTurnOffBiometricsWarningOpened","BiometricsTurnOn","BiometricsTurnOff","BiometricsTurnOffWarning","isNativeBiometricsEnabled","enableNativeBiometrics","clearNativeBiometricsError","pinPadType","pinTitle","prevIsEnabled","contentFullSize","stickerNativeBiometric","pinPadTitle","THEME_OPTIONS","darkThemeImg","isMintingCardsAvailable","isTrayIconEnabled","onTrayIconEnabledToggle","setAnimationLevel","isAvailableAccentLoading","setIsAvailableAccentLoading","availableAccentColorIds","setAvailableAccentColorIds","nftByColorIndexes","setNftsByColorIndex","nftCards","colors","nftsByColorIndex","colorIndex","getAccentColorsFromNfts","sortedColors","handleThemeChange","newTheme","handleAnimationLevelToggle","handleUnlockNewPalettesClick","renderColorButton","colorButton","colorButtonCurrent","iconLock","iconLockInverted","blockTitle","settingsBlock","themeWrapper","theme_active","themeIcon","themeIcon_active","themeImg","settingsBlockWithDescription","colorList","subBlockAsButton","blockDescription","Switcher","menuSwitcher","deleteToken","handleDeleteToken","ZERO_POINT","DEFAULT_OFFSET","EDGE_THRESHOLD","onDragEnd","externalStyle","knobStyle","parentRef","scrollRef","scrollIntervalId","translation","lastMousePosition","stopContinuousScroll","cancelAnimationFrame","startContinuousScroll","animateScroll","updateDraggablePosition","calculateConstrainedTranslation","setInitialState","_scrollRef$current","_ref$current2","getClientCoordinate","handleTouchStart","scrollRect","distanceFromTop","distanceFromBottom","scaledEase","handleMouseUp","dragButtonRef","cssStyles","lastScrollTop","draggableElement","parentRect","draggableRect","minX","maxX","minY","maxY","getOffsetBySlug","realIndex","getOffsetByIndex","parentContainer","updateOrderedSlugs","rebuildOrderedSlugs","tokensRef","sortableContainerRef","tokenToDelete","setTokenToDelete","orderedTokenSlugs","dragOrderTokenSlugs","draggedIndex","arr1","arr2","arraysAreEqual","handleOpenAddTokenPage","SelectTokenList","_state$orderedTokenSl","_state$orderedTokenSl2","handleDragEnd","handleTokenVisibility","contentRelative","sortableContainer","iconChevronRight","isDragged","draggedTop","isDeleteButtonVisible","isDragDisabled","Draggable","item_token","tokenDescription","deleteText","DeleteTokenModal","toggleTinyTransfersHidden","toggleInvestorView","toggleTokensWithNoCost","toggleSortByValue","setSettingsState","currencyItems","handleTinyTransfersHiddenToggle","handleInvestorViewToggle","handleOpenHiddenNfts","handleTokensWithNoPriceToggle","handleSortByValueToggle","localBaseCurrency","setLocalBaseCurrency","hiddenNftsCount","whitelistedAddressesSet","iconQuestion","wideTooltip","itemInfo","SettingsTokens","deleteAllDapps","handleDeleteAllDapps","handleDeleteDapp","isDisconnectModalOpen","openDisconnectModal","closeDisconnectModal","dappToDelete","setDappToDelete","handleDisconnectDapp","handleDisconnectAll","disconnectAllBlock","disconnectButton","DisconnectDappModal","getBuildPlatform","NETWORK_OPTIONS","CAN_DOWNLOAD_LOGS","canViewAllWalletVersions","onShowAllWalletVersions","startChangingNetwork","copyStorageData","currentNetwork","handleNetworkChange","handleAddTonOnlyWallet","handleDownloadLogs","logsString","accountsInfo","mainLogs","bottomSheetLogs","apiLogs","timezoneOffset","getTimezoneOffset","timezone","environment","commit","navigatorPlatform","build","flags","toISOString","getLogsString","filename","fileLocation","directory","Cache","file","writeFile","UTF8","uri","deleteFile","File","files","link","download","click","shareFile","item_disabled","developerCloseButton","sideTitle","removeNftSpecialStatus","isNftHidden","unmarkNftHidden","areSettingsInModal","nftImage","nftPrimaryCell","nftCollection","nftButtonUnhide","isWhitelisted","handleSwitcherClick","hiddenByUserNfts","probablyScamNfts","HiddenByUserNft","ProbablyScamNft","changeLanguage","handleLanguageChange","newLangCode","languageHeader","lc","item_lang","languageInfo","languageMain","languageNative","checkmarkImg","arePushNotificationsAvailable","toggleNotifications","toggleNotificationAccount","toggleCanPlaySounds","arePushNotificationsEnabled","handlePushNotificationsToggle","handleCanPlaySoundToggle","accountDisabled","AndroidSettings","IOSSettings","NativeSettings","NativeSettingsWeb","hasMnemonicWallet","onBackClick","onOpenSecretWordsSafetyRules","onOpenPrivateKeySafetyRules","openSettingsSlide","secretWordsImg","privateKeyImg","isBackupSlideActive","setPrivateKey","privateKeyResult","loadPrivateKey","PrivateKeyContent","backupType","mnemonicResult","loadMnemonic","onEnable","disableNativeBiometrics","isWarningModalOpen","openWarningModal","closeWarningModal","switcherTitle","warningTitle","warningDescription","faceIdImg","biometricsImg","handleConfirmDisableBiometrics","handleBiometricAuthToggle","renderDisableNativeBiometricsWarning","INITIAL_CHANGE_PASSWORD_SLIDE","createNewPin","newPassword","shouldShowBackup","navigateBackToSettings","isAutoUpdateEnabled","onSettingsClose","onAutoUpdateEnabledToggle","openBiometricsTurnOffWarning","openBiometricsTurnOn","setAppLockValue","setIsAuthLoading","previousSlide","setBackupType","setHasMnemonicWallet","pinValue","setPinValue","confirmPinValue","setConfirmPinValue","shouldKeepCurrentPassword","handleBackToSettingsClick","openConfirmNewPinSlide","confirmNewPin","openBackupPage","backup","openNewPasswordSlide","openPasswordChangedSlide","passwordChanged","handleNewPasswordSubmit","handlePinSubmit","handleConfirmPinSubmit","handleChangePasswordClick","handleOpenPrivateKeySafetyRules","handleOpenSecretWordsSafetyRules","secretWords","handleOpenBackupWallet","handleOpenPrivateKey","handleOpenSecretWords","handleAppLockToggle","handleAutolockChange","handleAutoConfirmToggle","handleNativeBiometricsTurnOnOpen","NativeBiometricsTurnOn","optionAndroid","ApplicationDetails","optionIOS","shouldRenderNativeBiometrics","shouldRenderMinifiedPinPad","isAutoConfirmAvailable","isSlideActive","backupImg","NativeBiometricsToggle","changePasswordButton","itemSmall","itemAutoLock","itemDisabled","memoizedPassword","contentInModal","pinPadHeaderMinified","onlyTextHeader","stickerHuge","Backup","BackupSafetyRules","BackupSecretWords","BackupPrivateKey","addToken","withTopSpace","headerInsideModal","importAccountByVersion","handleAddWallet","blockWalletVersionText","item_wallet_version","walletVersionInfo","walletVersionTitle","walletVersionAddress","walletVersionInfoRight","walletVersionTokens","walletVersionAmount","totalBalance","blockWalletVersionReadMore","ton_link","SUPPORT_ACCOUNTS_COUNT_DEFAULT","versionsById","openSettingsHardwareWallet","clicksAmount","setClicksAmount","prevRenderingKeyRef","isDeveloperModalOpen","openDeveloperModal","closeDeveloperModal","withAllWalletVersions","markWithAllWalletVersions","isInitialScreen","activeLang","_versions$filter","lastTxId","balanceInCurrency","isTelegramLinkRendered","telegramLinkRef","handleSlideAnimationStop","handleCloseSettings","hideBottomBar","handlCloseDeveloperModal","handleConnectedDappsOpen","handleAppearanceOpen","Appearance","handlePushNotificationsOpen","handleSecurityOpen","Security","handleAssetsOpen","handleLanguageOpen","Language","handleAboutOpen","About","handleDisclaimerOpen","Disclaimer","handleBackClickToAssets","handleOpenWalletVersion","handleDeeplinkHookToggle","handleTonProxyToggle","handleTonMagicToggle","handleClickInstallApp","handleClickInstallOnDesktop","handleClickInstallOnMobile","handleLedgerConnected","setIsTrayIconEnabled","getIsTrayIconEnabled","handleTrayIconEnabledToggle","setIsAutoUpdateEnabled","handleAutoUpdateEnabledToggle","handleBackOrCloseAction","handleCloseLogOutModal","shouldCloseSettings","handleOpenHardwareModal","handleMultipleClick","handleShowAllWalletVersions","renderHandleDeeplinkButton","tonLinksImg","hidden","withBottomSpace","upgradeImg","installAppImg","tonProxyImg","tonMagicImg","handleOpenTelegramWeb","telegramImg","appearanceImg","assetsActivityImg","securityImg","connectedDappsImg","languageImg","walletVersionImg","ledgerImg","mtwCardsImg","tipsImg","helpcenterImg","supportImg","disclaimerImg","installDesktopImg","installMobileImg","aboutImg","item_red","exitImg","SettingsPushNotifications","SettingsAppearance","SettingsAssets","SettingsSecurity","SettingsDapps","SettingsLanguage","SettingsDisclaimer","SettingsNativeBiometricsTurnOn","SettingsTokenList","SettingsWalletVersion","nestedTransition","SettingsHiddenNfts","SettingsDeveloperOptions","Biometrics","fullDialogClassName","modalDialogWeb","modalContent","cancelSwap","toAddressRef","isAddressFocused","markAddressFocused","unmarkAddressFocused","hasToAddressError","setHasToAddressError","canContinue","setCanContinue","toAddressShort","SHORT_ADDRESS_SHIFT","handleCancelClick","caretPosition","newCaretPosition","validateToAddress","submitPassword","scrollContent","selectBlockchainBlock","inputAddress","inputAddressWrapper","inputButton","inputButtonShifted","blockchainHintWrapper","blockchainHintText","blockchainHintTextError","renderInputAddress","blockchainButtons","isFirstButtonDisabled","isToAddressInCurrentWallet","renderSticker","onInfoClick","onStartSwap","isDetailsDisabled","SwapResult","clearSwapError","setIsExpired","handleTimeout","_activity$cex","changellyImportantRed","textFieldWrapperFullWidth","submitSwap","submitSwapCex","addSwapToken","setSwapTokenIn","setSwapTokenOut","renderedSwapType","setRenderedSwapType","renderedTransactionAmountIn","setRenderedTransactionAmountIn","renderedTransactionAmountOut","setRenderedTransactionAmountOut","renderedTransactionTokenIn","setRenderedTransactionTokenIn","renderedTransactionTokenOut","setRenderedTransactionTokenOut","setRenderedActivity","handleTransactionInfoClick","handleModalCloseWithReset","SwapBlockchain","SwapWaitTokens","SwapPassword","renderSwapShortInfo","SwapComplete","handleTransactionRepeatClick","buttonsAfterNft","feeText","submitTransferConfirm","isBurning","isNotcoinBurning","burningDurationMin","submitBtnText","stars_symbol","AmountWithFeeTextField","renderAmountWithFee","buttonsInsideContentWithScroll","isInProgress","clearTransferError","submitTransferHardware","setTransferScreen","renderedTransactionAmount","_nfts$","_nfts$2","TransferConfirm","TransferPassword","TransferComplete","TransferMultiNftProcess","CONFETTI_COLORS","lastRequestedAt","confettiRef","isRafStartedRef","defaultConfettiAmount","invokeGenerateConfetti","leftSide","randomX","velocity","randomColor","flicker","flickerFrequency","rotation","lastDrawnAt","frameCount","generateConfetti","updateCanvas","canvasWidth","canvasHeight","confettiToRemove","newPos","newVelocity","newFlicker","newRotation","newFrameCount","newLastDrawnAt","beginPath","ellipse","hideTimeout","prevConfettiTime","isDpppModalOpen","APP_STATES_WITH_BOTTOM_BAR","Settings","APP_UPDATE_INTERVAL","mainKey","APP_STATE_RENDER_COUNT","closeBackupWalletModal","closeHardwareWalletModal","cancelCaching","closeQrScanner","checkAppVersion","isInactive","markInactive","canPrerenderMain","prerenderMain","Inactive","withBottomBar","transitionName","slideFullClassName","LedgerModal","AppInactive","useAppIntersectionObserver","ElectronHeader","SettingsModal","AppLocked","MediaViewer","AuthImportWalletModal","BackupModal","TransferModal","SwapModal","MintCardModal","SignatureModal","TransactionModal","SwapActivityModal","DappConnectModal","DappSignDataModal","DappTransferModal","AddAccountModal","OnRampWidgetModal","UnhideNftModal","NftAttributesModal","QrScannerModal","Notifications","Dialogs","ConfettiContainer","IFrameBrowser","LoadingOverlay","BottomBar","newPlatform","fadeOutDuration","canGoBack","exitApp","initCapacitor","DEEPLINK","lockOrientation","SecondaryButton","setParams","isStateStable","_webApp","biometricType","initTelegramAppBiometric","viewportHeight","handleViewportResize","hasAttribute","isFocusable","initForVisualViewport","storageMethods","isLocalStorageDataExists","isApiStorageDataExists","fixIosAppStorage","restoreStorage","_await$App$getLaunchU","launchUrl","getLaunchUrl","processCapacitorLaunchDeeplink","forceLoadFonts","lastFocusAt","setupInterval","betterView"],"sourceRoot":""}